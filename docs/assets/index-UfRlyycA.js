(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var E_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},o4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},U5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(g=64)),r.push(t[l],t[d],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(V5(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):o4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new c4;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class c4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u4=function(n){const e=V5(n);return U5.encodeByteArray(e,!0)},M0=function(n){return u4(n).replace(/\./g,"")},j5=function(n){try{return U5.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function B0(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!l4(t)||(n[t]=B0(n[t],e[t]));return n}function l4(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=()=>q5().__FIREBASE_DEFAULTS__,f4=()=>{if(typeof process>"u"||typeof E_>"u")return;const n=E_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},d4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&j5(n[1]);return e&&JSON.parse(e)},N1=()=>{try{return h4()||f4()||d4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},z5=()=>{var n;return(n=N1())===null||n===void 0?void 0:n.config},p4=n=>{var e;return(e=N1())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[M0(JSON.stringify(t)),M0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function v4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Kn())}function k1(){var n;const e=(n=N1())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _4(){return typeof window<"u"||W5()}function W5(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function y4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function H5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function $5(){const n=Kn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function G5(){return!k1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ou(){try{return typeof indexedDB=="object"}catch{return!1}}function w4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function x4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4="FirebaseError";class Pr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=E4,Object.setPrototypeOf(this,Pr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?T4(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Pr(i,o,r)}}function T4(n,e){return n.replace(b4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const b4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T_(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function A4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function If(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(b_(s)&&b_(a)){if(!If(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function b_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Il(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function tf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function K5(n,e){const t=new I4(n,e);return t.subscribe.bind(t)}class I4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");S4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=jm),i.error===void 0&&(i.error=jm),i.complete===void 0&&(i.complete=jm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function S4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function jm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class jr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new m4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k4(e))try{this.getOrInitializeService({instanceIdentifier:qc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qc){return this.instances.has(e)}getOptions(e=qc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:N4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qc){return this.component?this.component.multipleInstances?e:qc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function N4(n){return n===qc?void 0:n}function k4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new P4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=[];var Yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Yt||(Yt={}));const X5={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},C4=Yt.INFO,R4={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},L4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=R4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ap{constructor(e){this.name=e,this._logLevel=C4,this._logHandler=L4,this._userLogHandler=null,R1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?X5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}function D4(n){R1.forEach(e=>{e.setLogLevel(n)})}function F4(n,e){for(const t of R1){let r=null;e&&e.level&&(r=X5[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&n({level:Yt[s].toLowerCase(),message:o,args:a,type:i.name})}}}const O4=(n,e)=>e.some(t=>n instanceof t);let A_,I_;function M4(){return A_||(A_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function B4(){return I_||(I_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const J5=new WeakMap,Ng=new WeakMap,Q5=new WeakMap,qm=new WeakMap,L1=new WeakMap;function V4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ya(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&J5.set(t,n)}).catch(()=>{}),L1.set(e,n),e}function U4(n){if(Ng.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Ng.set(n,e)}let kg={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ng.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Q5.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ya(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function j4(n){kg=n(kg)}function q4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(zm(this),e,...t);return Q5.set(r,e.sort?e.sort():[e]),Ya(r)}:B4().includes(n)?function(...e){return n.apply(zm(this),e),Ya(J5.get(this))}:function(...e){return Ya(n.apply(zm(this),e))}}function z4(n){return typeof n=="function"?q4(n):(n instanceof IDBTransaction&&U4(n),O4(n,M4())?new Proxy(n,kg):n)}function Ya(n){if(n instanceof IDBRequest)return V4(n);if(qm.has(n))return qm.get(n);const e=z4(n);return e!==n&&(qm.set(n,e),L1.set(e,n)),e}const zm=n=>L1.get(n);function lh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Ya(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ya(a.result),c.oldVersion,c.newVersion,Ya(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}function Nl(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Ya(t).then(()=>{})}const W4=["get","getKey","getAll","getAllKeys","count"],H4=["put","add","delete","clear"],Wm=new Map;function S_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Wm.get(e))return Wm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=H4.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||W4.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&c.done]))[0]};return Wm.set(e,s),s}j4(n=>({...n,get:(e,t,r)=>S_(e,t)||n.get(e,t,r),has:(e,t)=>!!S_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(G4(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function G4(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const V0="@firebase/app",Cg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new Ap("@firebase/app"),K4="@firebase/app-compat",Y4="@firebase/analytics-compat",X4="@firebase/analytics",J4="@firebase/app-check-compat",Q4="@firebase/app-check",Z4="@firebase/auth",e3="@firebase/auth-compat",t3="@firebase/database",n3="@firebase/data-connect",r3="@firebase/database-compat",i3="@firebase/functions",s3="@firebase/functions-compat",a3="@firebase/installations",o3="@firebase/installations-compat",c3="@firebase/messaging",u3="@firebase/messaging-compat",l3="@firebase/performance",h3="@firebase/performance-compat",f3="@firebase/remote-config",d3="@firebase/remote-config-compat",p3="@firebase/storage",m3="@firebase/storage-compat",g3="@firebase/firestore",v3="@firebase/vertexai-preview",_3="@firebase/firestore-compat",y3="firebase",w3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="[DEFAULT]",x3={[V0]:"fire-core",[K4]:"fire-core-compat",[X4]:"fire-analytics",[Y4]:"fire-analytics-compat",[Q4]:"fire-app-check",[J4]:"fire-app-check-compat",[Z4]:"fire-auth",[e3]:"fire-auth-compat",[t3]:"fire-rtdb",[n3]:"fire-data-connect",[r3]:"fire-rtdb-compat",[i3]:"fire-fn",[s3]:"fire-fn-compat",[a3]:"fire-iid",[o3]:"fire-iid-compat",[c3]:"fire-fcm",[u3]:"fire-fcm-compat",[l3]:"fire-perf",[h3]:"fire-perf-compat",[f3]:"fire-rc",[d3]:"fire-rc-compat",[p3]:"fire-gcs",[m3]:"fire-gcs-compat",[g3]:"fire-fst",[_3]:"fire-fst-compat",[v3]:"fire-vertex","fire-js":"fire-js",[y3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new Map,Hl=new Map,$l=new Map;function Sf(n,e){try{n.container.addComponent(e)}catch(t){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Z5(n,e){n.container.addOrOverwriteComponent(e)}function Yi(n){const e=n.name;if($l.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;$l.set(e,n);for(const t of nc.values())Sf(t,n);for(const t of Hl.values())Sf(t,n);return!0}function Ip(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function E3(n,e,t=tc){Ip(n,e).clearInstance(t)}function ex(n){return n.options!==void 0}function tr(n){return n.settings!==void 0}function T3(){$l.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new Ia("app","Firebase",b3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tx=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3 extends tx{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,a={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const o=e;super(o.options,a,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ei(V0,Cg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){F1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ps.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=w3;function D1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(t||(t=z5()),!t)throw Ps.create("no-options");const s=nc.get(i);if(s){if(If(t,s.options)&&If(r,s.config))return s;throw Ps.create("duplicate-app",{appName:i})}const a=new Y5(i);for(const c of $l.values())a.addComponent(c);const o=new tx(t,r,a);return nc.set(i,o),o}function I3(n,e){if(_4()&&!W5())throw Ps.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;ex(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((l,d)=>Math.imul(31,l)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ps.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),a=Hl.get(s);if(a)return a.incRefCount(e.releaseOnDeref),a;const o=new Y5(s);for(const u of $l.values())o.addComponent(u);const c=new A3(t,e,s,o);return Hl.set(s,c),c}function S3(n=tc){const e=nc.get(n);if(!e&&n===tc&&z5())return D1();if(!e)throw Ps.create("no-app",{appName:n});return e}function P3(){return Array.from(nc.values())}async function F1(n){let e=!1;const t=n.name;nc.has(t)?(e=!0,nc.delete(t)):Hl.has(t)&&n.decRefCount()<=0&&(Hl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function ei(n,e,t){var r;let i=(r=x3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(o.join(" "));return}Yi(new jr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function nx(n,e){if(n!==null&&typeof n!="function")throw Ps.create("invalid-log-argument");F4(n,e)}function rx(n){D4(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3="firebase-heartbeat-database",k3=1,Pf="firebase-heartbeat-store";let Hm=null;function ix(){return Hm||(Hm=lh(N3,k3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Pf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),Hm}async function C3(n){try{const t=(await ix()).transaction(Pf),r=await t.objectStore(Pf).get(sx(n));return await t.done,r}catch(e){if(e instanceof Pr)eo.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(t.message)}}}async function P_(n,e){try{const r=(await ix()).transaction(Pf,"readwrite");await r.objectStore(Pf).put(e,sx(n)),await r.done}catch(t){if(t instanceof Pr)eo.warn(t.message);else{const r=Ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});eo.warn(r.message)}}}function sx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R3=1024,L3=30*24*60*60*1e3;class D3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new O3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=N_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=L3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){eo.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=N_(),{heartbeatsToSend:r,unsentEntries:i}=F3(this._heartbeatsCache.heartbeats),s=M0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return eo.warn(t),""}}}function N_(){return new Date().toISOString().substring(0,10)}function F3(n,e=R3){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),k_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),k_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class O3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ou()?w4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await C3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return P_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return P_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function k_(n){return M0(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3(n){Yi(new jr("platform-logger",e=>new $4(e),"PRIVATE")),Yi(new jr("heartbeat",e=>new D3(e),"PRIVATE")),ei(V0,Cg,n),ei(V0,Cg,"esm2017"),ei("fire-js","")}M3("");const B3=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pr,SDK_VERSION:gc,_DEFAULT_ENTRY_NAME:tc,_addComponent:Sf,_addOrOverwriteComponent:Z5,_apps:nc,_clearComponents:T3,_components:$l,_getProvider:Ip,_isFirebaseApp:ex,_isFirebaseServerApp:tr,_registerComponent:Yi,_removeServiceInstance:E3,_serverApps:Hl,deleteApp:F1,getApp:S3,getApps:P3,initializeApp:D1,initializeServerApp:I3,onLog:nx,registerVersion:ei,setLogLevel:rx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e,t){this._delegate=e,this.firebase=t,Sf(e,new jr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),F1(this._delegate)))}_getService(e,t=tc){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=tc){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Sf(this._delegate,e)}_addOrOverwriteComponent(e){Z5(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},C_=new Ia("app-compat","Firebase",U3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:ei,setLogLevel:rx,onLog:nx,apps:null,SDK_VERSION:gc,INTERNAL:{registerComponent:o,removeApp:r,useAsService:c,modularAPIs:B3}};t.default=t,Object.defineProperty(t,"apps",{get:a});function r(u){delete e[u]}function i(u){if(u=u||tc,!T_(e,u))throw C_.create("no-app",{appName:u});return e[u]}i.App=n;function s(u,l={}){const d=D1(u,l);if(T_(e,d.name))return e[d.name];const g=new n(d,t);return e[d.name]=g,g}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const l=u.name,d=l.replace("-compat","");if(Yi(u)&&u.type==="PUBLIC"){const g=(p=i())=>{if(typeof p[d]!="function")throw C_.create("invalid-app-argument",{appName:l});return p[d]()};u.serviceProps!==void 0&&B0(g,u.serviceProps),t[d]=g,n.prototype[d]=function(...p){return this._getService.bind(this,l).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?t[d]:null}function c(u,l){return l==="serverAuth"?null:l}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){const n=j3(V3);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:ax,extendNamespace:e,createSubscribe:K5,ErrorFactory:Ia,deepExtend:B0});function e(t){B0(n,t)}return n}const q3=ax();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_=new Ap("@firebase/app-compat"),z3="@firebase/app-compat",W3="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3(n){ei(z3,W3,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=q5();if(n.firebase!==void 0){R_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&R_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const pr=q3;H3();var $3="firebase",G3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr.registerVersion($3,G3,"app-compat");function O1(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const Wh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ol={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function ox(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Y3=K3,X3=ox,cx=new Ia("auth","Firebase",ox());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Ap("@firebase/auth");function J3(n,...e){U0.logLevel<=Yt.WARN&&U0.warn(`Auth (${gc}): ${n}`,...e)}function x0(n,...e){U0.logLevel<=Yt.ERROR&&U0.error(`Auth (${gc}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(n,...e){throw B1(n,...e)}function Nr(n,...e){return B1(n,...e)}function M1(n,e,t){const r=Object.assign(Object.assign({},X3()),{[e]:t});return new Ia("auth","Firebase",r).create(e,{appName:n.name})}function Ur(n){return M1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hh(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&ri(n,"argument-error"),M1(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function B1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return cx.create(n,...e)}function tt(n,e,...t){if(!n)throw B1(e,...t)}function da(n){const e="INTERNAL ASSERTION FAILED: "+n;throw x0(e),new Error(e)}function Ys(n,e){n||da(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function V1(){return L_()==="http:"||L_()==="https:"}function L_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(V1()||H5()||"connection"in navigator)?navigator.onLine:!0}function Z3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ys(t>e,"Short delay should be less than long delay!"),this.isMobile=v4()||C1()}get(){return Q3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U1(n,e){Ys(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new id(3e4,6e4);function sr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ar(n,e,t,r,i={}){return lx(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=uh(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},s);return y4()||(u.referrerPolicy="no-referrer"),ux.fetch()(hx(n,n.config.apiHost,t,o),u)})}async function lx(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},eP),e);try{const i=new rP(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw nf(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw nf(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw nf(n,"user-disabled",a);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw M1(n,l,u);ri(n,l)}}catch(i){if(i instanceof Pr)throw i;ri(n,"network-request-failed",{message:String(i)})}}async function ao(n,e,t,r,i={}){const s=await ar(n,e,t,r,i);return"mfaPendingCredential"in s&&ri(n,"multi-factor-auth-required",{_serverResponse:s}),s}function hx(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?U1(n.config,i):`${n.config.apiScheme}://${i}`}function nP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class rP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Nr(this.auth,"network-request-failed")),tP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Nr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(n){return n!==void 0&&n.getResponse!==void 0}function F_(n){return n!==void 0&&n.enterprise!==void 0}class iP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return nP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(n){return(await ar(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function aP(n,e){return ar(n,"GET","/v2/recaptchaConfig",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oP(n,e){return ar(n,"POST","/v1/accounts:delete",e)}async function cP(n,e){return ar(n,"POST","/v1/accounts:update",e)}async function fx(n,e){return ar(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function uP(n,e=!1){const t=St(n),r=await t.getIdToken(e),i=Sp(r);tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:lf($m(i.auth_time)),issuedAtTime:lf($m(i.iat)),expirationTime:lf($m(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function $m(n){return Number(n)*1e3}function Sp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return x0("JWT malformed, contained fewer than 3 sections"),null;try{const i=j5(t);return i?JSON.parse(i):(x0("Failed to decode base64 JWT payload"),null)}catch(i){return x0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function O_(n){const e=Sp(n);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Pr&&lP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function lP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lf(this.lastLoginAt),this.creationTime=lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await to(n,fx(t,{idToken:r}));tt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dx(s.providerUserInfo):[],o=dP(n.providerData,a),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Rg(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(n,d)}async function fP(n){const e=St(n);await kf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function dP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dx(n){return n.map(e=>{var{providerId:t}=e,r=O1(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pP(n,e){const t=await lx(n,{},async()=>{const r=uh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=hx(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",ux.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function mP(n,e){return ar(n,"POST","/v2/accounts:revokeToken",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):O_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const t=O_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await pP(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new kl;return r&&(tt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(tt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kl,this.toJSON())}_performRefresh(){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(n,e){tt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $a{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=O1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Rg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await to(this,this.stsTokenManager.getToken(this.auth,e));return tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return uP(this,e)}reload(){return fP(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $a(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await kf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(tr(this.auth.app))return Promise.reject(Ur(this.auth));const e=await this.getIdToken();return await to(this,oP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,o,c,u,l;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,E=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(u=t.createdAt)!==null&&u!==void 0?u:void 0,L=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:M,emailVerified:K,isAnonymous:se,providerData:oe,stsTokenManager:N}=t;tt(M&&N,e,"internal-error");const A=kl.fromJSON(this.name,N);tt(typeof M=="string",e,"internal-error"),Uo(d,e.name),Uo(g,e.name),tt(typeof K=="boolean",e,"internal-error"),tt(typeof se=="boolean",e,"internal-error"),Uo(p,e.name),Uo(x,e.name),Uo(_,e.name),Uo(E,e.name),Uo(P,e.name),Uo(L,e.name);const C=new $a({uid:M,auth:e,email:g,emailVerified:K,displayName:d,isAnonymous:se,photoURL:x,phoneNumber:p,tenantId:_,stsTokenManager:A,createdAt:P,lastLoginAt:L});return oe&&Array.isArray(oe)&&(C.providerData=oe.map(B=>Object.assign({},B))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new kl;i.updateFromServerResponse(t);const s=new $a({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];tt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?dx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new kl;o.updateFromIdToken(r);const c=new $a({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Rg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=new Map;function ds(n){Ys(n instanceof Function,"Expected a class definition");let e=M_.get(n);return e?(Ys(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,M_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}px.type="NONE";const Gl=px;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nu(n,e,t){return`firebase:${n}:${e}:${t}`}class Cl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=nu(this.userKey,i.apiKey,s),this.fullPersistenceKey=nu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$a._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Cl(ds(Gl),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ds(Gl);const a=nu(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const l=await u._get(a);if(l){const d=$a._fromJSON(e,l);u!==s&&(o=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Cl(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Cl(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_x(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yx(e))return"Blackberry";if(wx(e))return"Webos";if(gx(e))return"Safari";if((e.includes("chrome/")||vx(e))&&!e.includes("edge/"))return"Chrome";if(sd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function mx(n=Kn()){return/firefox\//i.test(n)}function gx(n=Kn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function vx(n=Kn()){return/crios\//i.test(n)}function _x(n=Kn()){return/iemobile/i.test(n)}function sd(n=Kn()){return/android/i.test(n)}function yx(n=Kn()){return/blackberry/i.test(n)}function wx(n=Kn()){return/webos/i.test(n)}function ad(n=Kn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function gP(n=Kn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function vP(n=Kn()){var e;return ad(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function _P(){return $5()&&document.documentMode===10}function xx(n=Kn()){return ad(n)||sd(n)||wx(n)||yx(n)||/windows phone/i.test(n)||_x(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(n,e=[]){let t;switch(n){case"Browser":t=B_(Kn());break;case"Worker":t=`${B_(Kn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gc}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wP(n,e={}){return ar(n,"GET","/v2/passwordPolicy",sr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xP=6;class EP{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:xP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TP{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new V_(this),this.idTokenSubscription=new V_(this),this.beforeStateQueue=new yP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await fx(this,{idToken:e}),r=await $a._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(tr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await kf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Z3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(tr(this.app))return Promise.reject(Ur(this));const t=e?St(e):null;return t&&tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return tr(this.app)?Promise.reject(Ur(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return tr(this.app)?Promise.reject(Ur(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await wP(this),t=new EP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await mP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;tt(t,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ex(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&J3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rr(n){return St(n)}class V_{constructor(e){this.auth=e,this.observer=null,this.addObserver=K5(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bP(n){od=n}function j1(n){return od.loadJS(n)}function AP(){return od.recaptchaV2Script}function IP(){return od.recaptchaEnterpriseScript}function SP(){return od.gapiScript}function Tx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const PP="recaptcha-enterprise",NP="NO_RECAPTCHA";class kP{constructor(e){this.type=PP,this.auth=rr(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{aP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new iP(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;F_(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(NP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&F_(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=IP();c.length!==0&&(c+=o),j1(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function U_(n,e,t,r=!1){const i=new kP(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Cf(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await U_(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await U_(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function CP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function RP(n,e,t){const r=rr(n);tt(r._canInitEmulator,r,"emulator-config-failed"),tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=bx(e),{host:a,port:o}=LP(e),c=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||DP()}function bx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function LP(n){const e=bx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:j_(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:j_(a)}}}function j_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function DP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return da("not implemented")}_getIdTokenResponse(e){return da("not implemented")}_linkToIdToken(e,t){return da("not implemented")}_getReauthenticationResolver(e){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(n,e){return ar(n,"POST","/v1/accounts:resetPassword",sr(n,e))}async function FP(n,e){return ar(n,"POST","/v1/accounts:update",e)}async function OP(n,e){return ar(n,"POST","/v1/accounts:signUp",e)}async function MP(n,e){return ar(n,"POST","/v1/accounts:update",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(n,e){return ao(n,"POST","/v1/accounts:signInWithPassword",sr(n,e))}async function Pp(n,e){return ar(n,"POST","/v1/accounts:sendOobCode",sr(n,e))}async function VP(n,e){return Pp(n,e)}async function UP(n,e){return Pp(n,e)}async function jP(n,e){return Pp(n,e)}async function qP(n,e){return Pp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zP(n,e){return ao(n,"POST","/v1/accounts:signInWithEmailLink",sr(n,e))}async function WP(n,e){return ao(n,"POST","/v1/accounts:signInWithEmailLink",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends fh{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Rf(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Rf(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,t,"signInWithPassword",BP);case"emailLink":return zP(e,{email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Cf(e,r,"signUpPassword",OP);case"emailLink":return WP(e,{idToken:t,email:this._email,oobCode:this._password});default:ri(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(n,e){return ao(n,"POST","/v1/accounts:signInWithIdp",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP="http://localhost";class xa extends fh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ri("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=O1(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new xa(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Xa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xa(e,t)}buildRequest(){const e={requestUri:HP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $P(n,e){return ar(n,"POST","/v1/accounts:sendVerificationCode",sr(n,e))}async function GP(n,e){return ao(n,"POST","/v1/accounts:signInWithPhoneNumber",sr(n,e))}async function KP(n,e){const t=await ao(n,"POST","/v1/accounts:signInWithPhoneNumber",sr(n,e));if(t.temporaryProof)throw nf(n,"account-exists-with-different-credential",t);return t}const YP={USER_NOT_FOUND:"user-not-found"};async function XP(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ao(n,"POST","/v1/accounts:signInWithPhoneNumber",sr(n,t),YP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends fh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ru({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ru({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return GP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return KP(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return XP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new ru({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JP(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QP(n){const e=Il(tf(n)).link,t=e?Il(tf(e)).deep_link_id:null,r=Il(tf(n)).deep_link_id;return(r?Il(tf(r)).link:null)||r||t||e||n}class Np{constructor(e){var t,r,i,s,a,o;const c=Il(tf(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=JP((i=c.mode)!==null&&i!==void 0?i:null);tt(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=QP(e);try{return new Np(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.providerId=vc.PROVIDER_ID}static credential(e,t){return Rf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Np.parseLink(t);return tt(r,"argument-error"),Rf._fromEmailAndCode(e,r.code,r.tenantId)}}vc.PROVIDER_ID="password";vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Rl extends dh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return tt("providerId"in t&&"signInMethod"in t,"argument-error"),xa._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tt(e.idToken||e.accessToken,"argument-error"),xa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Rl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Rl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!r&&!i&&!t&&!s||!o)return null;try{return new Rl(o)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends dh{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return la.credential(t,r)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends dh{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP="http://localhost";class Kl extends fh{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Xa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Xa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xa(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new Kl(r,s)}static _create(e,t){return new Kl(e,t)}buildRequest(){return{requestUri:ZP,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN="saml.";class j0 extends oo{constructor(e){tt(e.startsWith(eN),"argument-error"),super(e)}static credentialFromResult(e){return j0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return j0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Kl.fromJSON(e);return tt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Kl._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends dh{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return fa.credential(t,r)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(n,e){return ao(n,"POST","/v1/accounts:signUp",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await $a._fromIdTokenResponse(e,r,i),a=q_(r);return new Ns({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=q_(r);return new Ns({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function q_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(n){var e;if(tr(n.app))return Promise.reject(Ur(n));const t=rr(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ns({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await Ix(t,{returnSecureToken:!0}),i=await Ns._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends Pr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,q0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new q0(e,t,r,i)}}function Sx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?q0._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(n,e){const t=St(n);await kp(!0,t,e);const{providerUserInfo:r}=await cP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Px(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function q1(n,e,t=!1){const r=await to(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ns._forOperation(n,"link",r)}async function kp(n,e,t){await kf(e);const r=Px(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";tt(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(n,e,t=!1){const{auth:r}=n;if(tr(r.app))return Promise.reject(Ur(r));const i="reauthenticate";try{const s=await to(n,Sx(r,i,e,n),t);tt(s.idToken,r,"internal-error");const a=Sp(s.idToken);tt(a,r,"internal-error");const{sub:o}=a;return tt(n.uid===o,r,"user-mismatch"),Ns._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ri(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kx(n,e,t=!1){if(tr(n.app))return Promise.reject(Ur(n));const r="signIn",i=await Sx(n,r,e),s=await Ns._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Cp(n,e){return kx(rr(n),e)}async function Cx(n,e){const t=St(n);return await kp(!1,t,e.providerId),q1(t,e)}async function Rx(n,e){return Nx(St(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(n,e){return ao(n,"POST","/v1/accounts:signInWithCustomToken",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(n,e){if(tr(n.app))return Promise.reject(Ur(n));const t=rr(n),r=await rN(t,{token:e,returnSecureToken:!0}),i=await Ns._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?z1._fromServerResponse(e,t):"totpInfo"in t?W1._fromServerResponse(e,t):ri(e,"internal-error")}}class z1 extends cd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new z1(t)}}class W1 extends cd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new W1(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e,t){var r;tt(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),tt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(tt(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(tt(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(n){const e=rr(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function sN(n,e,t){const r=rr(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Rp(r,i,t),await Cf(r,i,"getOobCode",UP)}async function aN(n,e,t){await Ax(St(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&H1(n),r})}async function oN(n,e){await MP(St(n),{oobCode:e})}async function Lx(n,e){const t=St(n),r=await Ax(t,{oobCode:e}),i=r.requestType;switch(tt(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(r.mfaInfo,t,"internal-error");default:tt(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=cd._fromServerResponse(rr(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function cN(n,e){const{data:t}=await Lx(St(n),e);return t.email}async function uN(n,e,t){if(tr(n.app))return Promise.reject(Ur(n));const r=rr(n),a=await Cf(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ix).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&H1(n),c}),o=await Ns._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function lN(n,e,t){return tr(n.app)?Promise.reject(Ur(n)):Cp(St(n),vc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&H1(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hN(n,e,t){const r=rr(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){tt(o.handleCodeInApp,r,"argument-error"),o&&Rp(r,a,o)}s(i,t),await Cf(r,i,"getOobCode",jP)}function fN(n,e){const t=Np.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function dN(n,e,t){if(tr(n.app))return Promise.reject(Ur(n));const r=St(n),i=vc.credentialWithLink(e,t||Nf());return tt(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Cp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e){return ar(n,"POST","/v1/accounts:createAuthUri",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(n,e){const t=V1()?Nf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await pN(St(n),r);return i||[]}async function gN(n,e){const t=St(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Rp(t.auth,i,e);const{email:s}=await VP(t.auth,i);s!==n.email&&await n.reload()}async function vN(n,e,t){const r=St(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Rp(r.auth,s,t);const{email:a}=await qP(r.auth,s);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _N(n,e){return ar(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=St(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await to(r,_N(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function wN(n,e){const t=St(n);return tr(t.auth.app)?Promise.reject(Ur(t.auth)):Dx(t,e,null)}function xN(n,e){return Dx(St(n),null,e)}async function Dx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await to(n,FP(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const a=(t=(e=Sp(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Ll(s,o)}}if(!r)return null;switch(r){case"facebook.com":return new TN(s,i);case"github.com":return new bN(s,i);case"google.com":return new AN(s,i);case"twitter.com":return new IN(s,i,n.screenName||null);case"custom":case"anonymous":return new Ll(s,null);default:return new Ll(s,r,i)}}class Ll{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class Fx extends Ll{constructor(e,t,r,i){super(e,t,r),this.username=i}}class TN extends Ll{constructor(e,t){super(e,"facebook.com",t)}}class bN extends Fx{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class AN extends Ll{constructor(e,t){super(e,"google.com",t)}}class IN extends Fx{constructor(e,t,r){super(e,"twitter.com",t,r)}}function SN(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:EN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new Qc("enroll",e,t)}static _fromMfaPendingCredential(e){return new Qc("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Qc._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Qc._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $1{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=rr(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>cd._fromServerResponse(r,o));tt(i.mfaPendingCredential,r,"internal-error");const a=Qc._fromMfaPendingCredential(i.mfaPendingCredential);return new $1(a,s,async o=>{const c=await o._process(r,a);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const l=await Ns._fromIdTokenResponse(r,t.operationType,u);return await r._updateCurrentUser(l.user),l;case"reauthenticate":return tt(t.user,r,"internal-error"),Ns._forOperation(t.user,t.operationType,u);default:ri(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function PN(n,e){var t;const r=St(n),i=e;return tt(e.customData.operationType,r,"argument-error"),tt((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),$1._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(n,e){return ar(n,"POST","/v2/accounts/mfaEnrollment:start",sr(n,e))}function kN(n,e){return ar(n,"POST","/v2/accounts/mfaEnrollment:finalize",sr(n,e))}function CN(n,e){return ar(n,"POST","/v2/accounts/mfaEnrollment:withdraw",sr(n,e))}class G1{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>cd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new G1(e)}async getSession(){return Qc._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await to(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await to(this.user,CN(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Gm=new WeakMap;function RN(n){const e=St(n);return Gm.has(e)||Gm.set(e,G1._fromUser(e)),Gm.get(e)}const z0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(z0,"1"),this.storage.removeItem(z0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=1e3,DN=10;class Mx extends Ox{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);_P()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,DN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},LN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Mx.type="LOCAL";const K1=Mx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx extends Ox{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Bx.type="SESSION";const cu=Bx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Lp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),c=await FN(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=ud("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function MN(n){xr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function BN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function VN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function UN(){return Y1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="firebaseLocalStorageDb",jN=1,W0="firebaseLocalStorage",Ux="fbase_key";class ld{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Dp(n,e){return n.transaction([W0],e?"readwrite":"readonly").objectStore(W0)}function qN(){const n=indexedDB.deleteDatabase(Vx);return new ld(n).toPromise()}function Lg(){const n=indexedDB.open(Vx,jN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(W0,{keyPath:Ux})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(W0)?e(r):(r.close(),await qN(),e(await Lg()))})})}async function z_(n,e,t){const r=Dp(n,!0).put({[Ux]:e,value:t});return new ld(r).toPromise()}async function zN(n,e){const t=Dp(n,!1).get(e),r=await new ld(t).toPromise();return r===void 0?null:r.value}function W_(n,e){const t=Dp(n,!0).delete(e);return new ld(t).toPromise()}const WN=800,HN=3;class jx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>HN)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Y1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lp._getInstance(UN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await BN(),!this.activeServiceWorker)return;this.sender=new ON(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||VN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await z_(e,z0,"1"),await W_(e,z0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>z_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>zN(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>W_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Dp(i,!1).getAll();return new ld(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}jx.type="LOCAL";const Lf=jx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n,e){return ar(n,"POST","/v2/accounts/mfaSignIn:start",sr(n,e))}function GN(n,e){return ar(n,"POST","/v2/accounts/mfaSignIn:finalize",sr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=500,YN=6e4,t0=1e12;class XN{constructor(e){this.auth=e,this.counter=t0,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new JN(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||t0;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||t0;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||t0;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class JN{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;tt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=QN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},YN)},KN))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function QN(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km=Tx("rcb"),ZN=new id(3e4,6e4);class ek{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=xr().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return tt(tk(t),e,"argument-error"),this.shouldResolveImmediately(t)&&D_(xr().grecaptcha)?Promise.resolve(xr().grecaptcha):new Promise((r,i)=>{const s=xr().setTimeout(()=>{i(Nr(e,"network-request-failed"))},ZN.get());xr()[Km]=()=>{xr().clearTimeout(s),delete xr()[Km];const o=xr().grecaptcha;if(!o||!D_(o)){i(Nr(e,"internal-error"));return}const c=o.render;o.render=(u,l)=>{const d=c(u,l);return this.counter++,d},this.hostLanguage=t,r(o)};const a=`${AP()}?${uh({onload:Km,render:"explicit",hl:t})}`;j1(a).catch(()=>{clearTimeout(s),i(Nr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=xr().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function tk(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class nk{async load(e){return new XN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="recaptcha",rk={theme:"light",type:"image"};let ik=class{constructor(e,t,r=Object.assign({},rk)){this.parameters=r,this.type=qx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rr(e),this.isInvisible=this.parameters.size==="invisible",tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;tt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new nk:new ek,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=xr()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){tt(V1()&&!Y1(),this.auth,"internal-error"),await sk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await sP(this.auth);tt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function sk(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ru._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ak(n,e,t){if(tr(n.app))return Promise.reject(Ur(n));const r=rr(n),i=await Fp(r,e,St(t));return new X1(i,s=>Cp(r,s))}async function ok(n,e,t){const r=St(n);await kp(!1,r,"phone");const i=await Fp(r.auth,e,St(t));return new X1(i,s=>Cx(r,s))}async function ck(n,e,t){const r=St(n);if(tr(r.auth.app))return Promise.reject(Ur(r.auth));const i=await Fp(r.auth,e,St(t));return new X1(i,s=>Rx(r,s))}async function Fp(n,e,t){var r;const i=await t.verify();try{tt(typeof i=="string",n,"argument-error"),tt(t.type===qx,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return tt(a.type==="enroll",n,"internal-error"),(await NN(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{tt(a.type==="signin",n,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return tt(o,n,"missing-multi-factor-info"),(await $N(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await $P(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function uk(n,e){const t=St(n);if(tr(t.auth.app))return Promise.reject(Ur(t.auth));await q1(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=class E0{constructor(e){this.providerId=E0.PROVIDER_ID,this.auth=rr(e)}verifyPhoneNumber(e,t){return Fp(this.auth,e,St(t))}static credential(e,t){return ru._fromVerification(e,t)}static credentialFromResult(e){const t=e;return E0.credentialFromTaggedObject(t)}static credentialFromError(e){return E0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?ru._fromTokenResponse(t,r):null}};uu.PROVIDER_ID="phone";uu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pu(n,e){return e?ds(e):(tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1 extends fh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function lk(n){return kx(n.auth,new J1(n),n.bypassAuthState)}function hk(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),Nx(t,new J1(n),n.bypassAuthState)}async function fk(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),q1(t,new J1(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return lk;case"linkViaPopup":case"linkViaRedirect":return fk;case"reauthViaPopup":case"reauthViaRedirect":return hk;default:ri(this.auth,"internal-error")}}resolve(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ys(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk=new id(2e3,1e4);async function pk(n,e,t){if(tr(n.app))return Promise.reject(Nr(n,"operation-not-supported-in-this-environment"));const r=rr(n);hh(n,e,oo);const i=Pu(r,t);return new Ga(r,"signInViaPopup",e,i).executeNotNull()}async function mk(n,e,t){const r=St(n);if(tr(r.auth.app))return Promise.reject(Nr(r.auth,"operation-not-supported-in-this-environment"));hh(r.auth,e,oo);const i=Pu(r.auth,t);return new Ga(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function gk(n,e,t){const r=St(n);hh(r.auth,e,oo);const i=Pu(r.auth,t);return new Ga(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ga extends zx{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ys(this.filter.length===1,"Popup operations only handle one event");const e=ud();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,dk.get())};e()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="pendingRedirect",hf=new Map;class _k extends zx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const r=await yk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function yk(n,e){const t=Hx(e),r=Wx(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function Q1(n,e){return Wx(n)._set(Hx(e),"true")}function wk(){hf.clear()}function Z1(n,e){hf.set(n._key(),e)}function Wx(n){return ds(n._redirectPersistence)}function Hx(n){return nu(vk,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(n,e,t){return Ek(n,e,t)}async function Ek(n,e,t){if(tr(n.app))return Promise.reject(Ur(n));const r=rr(n);hh(n,e,oo),await r._initializationPromise;const i=Pu(r,t);return await Q1(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Tk(n,e,t){return bk(n,e,t)}async function bk(n,e,t){const r=St(n);if(hh(r.auth,e,oo),tr(r.auth.app))return Promise.reject(Ur(r.auth));await r.auth._initializationPromise;const i=Pu(r.auth,t);await Q1(i,r.auth);const s=await $x(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Ak(n,e,t){return Ik(n,e,t)}async function Ik(n,e,t){const r=St(n);hh(r.auth,e,oo),await r.auth._initializationPromise;const i=Pu(r.auth,t);await kp(!1,r,e.providerId),await Q1(i,r.auth);const s=await $x(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Sk(n,e){return await rr(n)._initializationPromise,Op(n,e,!1)}async function Op(n,e,t=!1){if(tr(n.app))return Promise.reject(Ur(n));const r=rr(n),i=Pu(r,e),a=await new _k(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function $x(n){const e=ud(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=10*60*1e3;class Gx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Nk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Kx(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Nr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Pk&&this.cachedEventUids.clear(),this.cachedEventUids.has(H_(e))}saveEventToCache(e){this.cachedEventUids.add(H_(e)),this.lastProcessedEventTime=Date.now()}}function H_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Kx({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Nk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kx(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(n,e={}){return ar(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ck=/^https?/;async function Rk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Yx(n);for(const t of e)try{if(Lk(t))return}catch{}ri(n,"unauthorized-domain")}function Lk(n){const e=Nf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!Ck.test(t))return!1;if(kk.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk=new id(3e4,6e4);function $_(){const n=xr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Fk(n){return new Promise((e,t)=>{var r,i,s;function a(){$_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$_(),t(Nr(n,"network-request-failed"))},timeout:Dk.get()})}if(!((i=(r=xr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xr().gapi)===null||s===void 0)&&s.load)a();else{const o=Tx("iframefcb");return xr()[o]=()=>{gapi.load?a():t(Nr(n,"network-request-failed"))},j1(`${SP()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw T0=null,e})}let T0=null;function Ok(n){return T0=T0||Fk(n),T0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mk=new id(5e3,15e3),Bk="__/auth/iframe",Vk="emulator/auth/iframe",Uk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qk(n){const e=n.config;tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?U1(e,Vk):`https://${n.config.authDomain}/${Bk}`,r={apiKey:e.apiKey,appName:n.name,v:gc},i=jk.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${uh(r).slice(1)}`}async function zk(n){const e=await Ok(n),t=xr().gapi;return tt(t,n,"internal-error"),e.open({where:document.body,url:qk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Nr(n,"network-request-failed"),o=xr().setTimeout(()=>{s(a)},Mk.get());function c(){xr().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Hk=500,$k=600,Gk="_blank",Kk="http://localhost";class G_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Yk(n,e,t,r=Hk,i=$k){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},Wk),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Kn().toLowerCase();t&&(o=vx(u)?Gk:t),mx(u)&&(e=e||Kk,c.scrollbars="yes");const l=Object.entries(c).reduce((g,[p,x])=>`${g}${p}=${x},`,"");if(vP(u)&&o!=="_self")return Xk(e||"",o),new G_(null);const d=window.open(e||"",o,l);tt(d,n,"popup-blocked");try{d.focus()}catch{}return new G_(d)}function Xk(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jk="__/auth/handler",Qk="emulator/auth/handler",Zk=encodeURIComponent("fac");async function Dg(n,e,t,r,i,s){tt(n.config.authDomain,n,"auth-domain-config-required"),tt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:gc,eventId:i};if(e instanceof oo){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",A4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))a[l]=d}if(e instanceof dh){const l=e.getScopes().filter(d=>d!=="");l.length>0&&(a.scopes=l.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const l of Object.keys(o))o[l]===void 0&&delete o[l];const c=await n._getAppCheckToken(),u=c?`#${Zk}=${encodeURIComponent(c)}`:"";return`${eC(n)}?${uh(o).slice(1)}${u}`}function eC({config:n}){return n.emulator?U1(n,Qk):`https://${n.authDomain}/${Jk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym="webStorageSupport";class tC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cu,this._completeRedirectFn=Op,this._overrideRedirectResult=Z1}async _openPopup(e,t,r,i){var s;Ys((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Dg(e,t,r,Nf(),i);return Yk(e,a,ud())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Dg(e,t,r,Nf(),i);return MN(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ys(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await zk(e),r=new Gx(e);return t.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ym,{type:Ym},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Ym];a!==void 0&&t(!!a),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Rk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return xx()||gx()||ad()}}const nC=tC;class rC{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return da("unexpected MultiFactorSessionType")}}}class e2 extends rC{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new e2(e)}_finalizeEnroll(e,t,r){return kN(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return GN(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Xx{constructor(){}static assertion(e){return e2._fromCredential(e)}}Xx.FACTOR_ID="phone";var K_="@firebase/auth",Y_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function aC(n){Yi(new jr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;tt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ex(n)},u=new TP(r,i,s,c);return CP(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Yi(new jr("auth-internal",e=>{const t=rr(e.getProvider("auth").getImmediate());return(r=>new iC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(K_,Y_,sC(n)),ei(K_,Y_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oC=5*60;p4("authIdTokenMaxAge");function cC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Nr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",cC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});aC("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=2e3;async function lC(n,e,t){var r;const{BuildInfo:i}=lu();Ys(e.sessionId,"AuthEvent did not contain a session ID");const s=await mC(e.sessionId),a={};return ad()?a.ibi=i.packageName:sd()?a.apn=i.packageName:ri(n,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Dg(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,a)}async function hC(n){const{BuildInfo:e}=lu(),t={};ad()?t.iosBundleId=e.packageName:sd()?t.androidPackageName=e.packageName:ri(n,"operation-not-supported-in-this-environment"),await Yx(n,t)}function fC(n){const{cordova:e}=lu();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,gP()?"_blank":"_system","location=yes"),t(i)})})}async function dC(n,e,t){const{cordova:r}=lu();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var d;s();const g=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof g=="function"&&g(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function u(){o||(o=window.setTimeout(()=>{a(Nr(n,"redirect-cancelled-by-user"))},uC))}function l(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),sd()&&document.addEventListener("visibilitychange",l,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}})}finally{i()}}function pC(n){var e,t,r,i,s,a,o,c,u,l;const d=lu();tt(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((c=(o=(a=d==null?void 0:d.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((l=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||l===void 0?void 0:l.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function mC(n){const e=gC(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function gC(n){if(Ys(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vC=20;class _C extends Gx{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function yC(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:EC(),postBody:null,tenantId:n.tenantId,error:Nr(n,"no-auth-event")}}function wC(n,e){return Fg()._set(Og(n),e)}async function X_(n){const e=await Fg()._get(Og(n));return e&&await Fg()._remove(Og(n)),e}function xC(n,e){var t,r;const i=bC(e);if(i.includes("/__/auth/callback")){const s=b0(i),a=s.firebaseError?TC(decodeURIComponent(s.firebaseError)):null,o=(r=(t=a==null?void 0:a.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],c=o?Nr(o):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function EC(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<vC;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function Fg(){return ds(K1)}function Og(n){return nu("authEvent",n.config.apiKey,n.name)}function TC(n){try{return JSON.parse(n)}catch{return null}}function bC(n){const e=b0(n),t=e.link?decodeURIComponent(e.link):void 0,r=b0(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return b0(i).link||i||r||t||n}function b0(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Il(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=500;class IC{constructor(){this._redirectPersistence=cu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Op,this._overrideRedirectResult=Z1}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new _C(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){ri(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){pC(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),wk(),await this._originValidation(e);const a=yC(e,r,i);await wC(e,a);const o=await lC(e,a,t),c=await fC(o);return dC(e,s,c)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hC(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=lu(),a=setTimeout(async()=>{await X_(e),t.onEvent(J_())},AC),o=async l=>{clearTimeout(a);const d=await X_(e);let g=null;d&&(l!=null&&l.url)&&(g=xC(d,l.url)),t.onEvent(g||J_())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const c=i,u=`${s.packageName.toLowerCase()}://`;lu().handleOpenURL=async l=>{if(l.toLowerCase().startsWith(u)&&o({url:l}),typeof c=="function")try{c(l)}catch(d){console.error(d)}}}}const SC=IC;function J_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nr("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(n,e){rr(n)._logFramework(e)}var NC="@firebase/auth-compat",kC="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CC=1e3;function ff(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function RC(){return ff()==="http:"||ff()==="https:"}function Jx(n=Kn()){return!!((ff()==="file:"||ff()==="ionic:"||ff()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function LC(){return C1()||k1()}function DC(){return $5()&&(document==null?void 0:document.documentMode)===11}function FC(n=Kn()){return/Edge\/\d+/.test(n)}function OC(n=Kn()){return DC()||FC(n)}function Qx(){try{const n=self.localStorage,e=ud();if(n)return n.setItem(e,"1"),n.removeItem(e),OC()?ou():!0}catch{return t2()&&ou()}return!1}function t2(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Xm(){return(RC()||H5()||Jx())&&!LC()&&Qx()&&!t2()}function Zx(){return Jx()&&typeof document<"u"}async function MC(){return Zx()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},CC);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function BC(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls={LOCAL:"local",NONE:"none",SESSION:"session"},Hh=tt,eE="persistence";function VC(n,e){if(Hh(Object.values(ls).includes(e),n,"invalid-persistence-type"),C1()){Hh(e!==ls.SESSION,n,"unsupported-persistence-type");return}if(k1()){Hh(e===ls.NONE,n,"unsupported-persistence-type");return}if(t2()){Hh(e===ls.NONE||e===ls.LOCAL&&ou(),n,"unsupported-persistence-type");return}Hh(e===ls.NONE||Qx(),n,"unsupported-persistence-type")}async function Mg(n){await n._initializationPromise;const e=tE(),t=nu(eE,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function UC(n,e){const t=tE();if(!t)return[];const r=nu(eE,n,e);switch(t.getItem(r)){case ls.NONE:return[Gl];case ls.LOCAL:return[Lf,cu];case ls.SESSION:return[cu];default:return[]}}function tE(){var n;try{return((n=BC())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=tt;class Yo{constructor(){this.browserResolver=ds(nC),this.cordovaResolver=ds(SC),this.underlyingResolver=null,this._redirectPersistence=cu,this._completeRedirectFn=Op,this._overrideRedirectResult=Z1}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Zx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return jC(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await MC();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nE(n){return n.unwrap()}function qC(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(n){return rE(n)}function WC(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new HC(n,PN(n,e))}else if(r){const i=rE(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function rE(n){const{_tokenResponse:e}=n instanceof Pr?n.customData:n;if(!e)return null;if(!(n instanceof Pr)&&"temporaryProof"in e&&"phoneNumber"in e)return uu.credentialFromResult(n);const t=e.providerId;if(!t||t===Wh.PASSWORD)return null;let r;switch(t){case Wh.GOOGLE:r=la;break;case Wh.FACEBOOK:r=ua;break;case Wh.GITHUB:r=ha;break;case Wh.TWITTER:r=fa;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?t.startsWith("saml.")?Kl._create(t,o):xa._fromParams({providerId:t,signInMethod:t,pendingToken:o,idToken:i,accessToken:s}):new Rl(t).credential({idToken:i,accessToken:s,rawNonce:c})}return n instanceof Pr?r.credentialFromError(n):r.credentialFromResult(n)}function qi(n,e){return e.catch(t=>{throw t instanceof Pr&&WC(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:zC(t),additionalUserInfo:SN(t),user:Mp.getOrCreate(i)}})}async function Bg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>qi(n,t.confirm(r))}}class HC{constructor(e,t){this.resolver=t,this.auth=qC(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return qi(nE(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mp=class rf{constructor(e){this._delegate=e,this.multiFactor=RN(e)}static getOrCreate(e){return rf.USER_MAP.has(e)||rf.USER_MAP.set(e,new rf(e)),rf.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return qi(this.auth,Cx(this._delegate,e))}async linkWithPhoneNumber(e,t){return Bg(this.auth,ok(this._delegate,e,t))}async linkWithPopup(e){return qi(this.auth,gk(this._delegate,e,Yo))}async linkWithRedirect(e){return await Mg(rr(this.auth)),Ak(this._delegate,e,Yo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return qi(this.auth,Rx(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Bg(this.auth,ck(this._delegate,e,t))}reauthenticateWithPopup(e){return qi(this.auth,mk(this._delegate,e,Yo))}async reauthenticateWithRedirect(e){return await Mg(rr(this.auth)),Tk(this._delegate,e,Yo)}sendEmailVerification(e){return gN(this._delegate,e)}async unlink(e){return await nN(this._delegate,e),this}updateEmail(e){return wN(this._delegate,e)}updatePassword(e){return xN(this._delegate,e)}updatePhoneNumber(e){return uk(this._delegate,e)}updateProfile(e){return yN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return vN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Mp.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=tt;class Vg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;$h(r,"invalid-api-key",{appName:e.name}),$h(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Yo:void 0;this._delegate=t.initialize({options:{persistence:$C(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Y3),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){RP(this._delegate,e,t)}applyActionCode(e){return oN(this._delegate,e)}checkActionCode(e){return Lx(this._delegate,e)}confirmPasswordReset(e,t){return aN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return qi(this._delegate,uN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return mN(this._delegate,e)}isSignInWithEmailLink(e){return fN(this._delegate,e)}async getRedirectResult(){$h(Xm(),this._delegate,"operation-not-supported-in-this-environment");const e=await Sk(this._delegate,Yo);return e?qi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){PC(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:a}=Q_(e,t,r);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:a}=Q_(e,t,r);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,t){return hN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return sN(this._delegate,e,t||void 0)}async setPersistence(e){VC(this._delegate,e);let t;switch(e){case ls.SESSION:t=cu;break;case ls.LOCAL:t=await ds(Lf)._isAvailable()?Lf:K1;break;case ls.NONE:t=Gl;break;default:return ri("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return qi(this._delegate,tN(this._delegate))}signInWithCredential(e){return qi(this._delegate,Cp(this._delegate,e))}signInWithCustomToken(e){return qi(this._delegate,iN(this._delegate,e))}signInWithEmailAndPassword(e,t){return qi(this._delegate,lN(this._delegate,e,t))}signInWithEmailLink(e,t){return qi(this._delegate,dN(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Bg(this._delegate,ak(this._delegate,e,t))}async signInWithPopup(e){return $h(Xm(),this._delegate,"operation-not-supported-in-this-environment"),qi(this._delegate,pk(this._delegate,e,Yo))}async signInWithRedirect(e){return $h(Xm(),this._delegate,"operation-not-supported-in-this-environment"),await Mg(this._delegate),xk(this._delegate,e,Yo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return cN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Vg.Persistence=ls;function Q_(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:a=>i(a&&Mp.getOrCreate(a)),error:e,complete:t}}function $C(n,e){const t=UC(n,e);if(typeof self<"u"&&!t.includes(Lf)&&t.push(Lf),typeof window<"u")for(const r of[K1,cu])t.includes(r)||t.push(r);return t.includes(Gl)||t.push(Gl),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(){this.providerId="phone",this._delegate=new uu(nE(pr.auth()))}static credential(e,t){return uu.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}n2.PHONE_SIGN_IN_METHOD=uu.PHONE_SIGN_IN_METHOD;n2.PROVIDER_ID=uu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=tt;class KC{constructor(e,t,r=pr.app()){var i;GC((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new ik(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="auth-compat";function XC(n){n.INTERNAL.registerComponent(new jr(YC,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Vg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ol.EMAIL_SIGNIN,PASSWORD_RESET:ol.PASSWORD_RESET,RECOVER_EMAIL:ol.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ol.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ol.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ol.VERIFY_EMAIL}},EmailAuthProvider:vc,FacebookAuthProvider:ua,GithubAuthProvider:ha,GoogleAuthProvider:la,OAuthProvider:Rl,SAMLAuthProvider:j0,PhoneAuthProvider:n2,PhoneMultiFactorGenerator:Xx,RecaptchaVerifier:KC,TwitterAuthProvider:fa,Auth:Vg,AuthCredential:fh,Error:Pr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(NC,kC)}XC(pr);var Z_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iu,iE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function C(){}C.prototype=A.prototype,N.D=A.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(B,b,S){for(var R=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)R[ie-2]=arguments[ie];return A.prototype[b].apply(B,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,A,C){C||(C=0);var B=Array(16);if(typeof A=="string")for(var b=0;16>b;++b)B[b]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(b=0;16>b;++b)B[b]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=N.g[0],C=N.g[1],b=N.g[2];var S=N.g[3],R=A+(S^C&(b^S))+B[0]+3614090360&4294967295;A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[1]+3905402710&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[2]+606105819&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[3]+3250441966&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(S^C&(b^S))+B[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[5]+1200080426&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[6]+2821735955&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[7]+4249261313&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(S^C&(b^S))+B[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[9]+2336552879&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[10]+4294925233&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[11]+2304563134&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(S^C&(b^S))+B[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[13]+4254626195&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[14]+2792965006&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[15]+1236535329&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(b^S&(C^b))+B[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[6]+3225465664&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[11]+643717713&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[0]+3921069994&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(C^b))+B[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[10]+38016083&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[15]+3634488961&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[4]+3889429448&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(C^b))+B[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[14]+3275163606&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[3]+4107603335&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[8]+1163531501&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(C^b))+B[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[2]+4243563512&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[7]+1735328473&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[12]+2368359562&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(C^b^S)+B[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[8]+2272392833&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[11]+1839030562&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[14]+4259657740&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^S)+B[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[4]+1272893353&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[7]+4139469664&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[10]+3200236656&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^S)+B[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[0]+3936430074&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[3]+3572445317&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[6]+76029189&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^S)+B[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[12]+3873151461&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[15]+530742520&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[2]+3299628645&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(b^(C|~S))+B[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[7]+1126891415&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[14]+2878612391&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[5]+4237533241&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~S))+B[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[3]+2399980690&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[10]+4293915773&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[1]+2240044497&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~S))+B[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[15]+4264355552&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[6]+2734768916&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[13]+1309151649&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~S))+B[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[11]+3174756917&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[2]+718787259&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+b&4294967295,N.g[3]=N.g[3]+S&4294967295}r.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var C=A-this.blockSize,B=this.B,b=this.h,S=0;S<A;){if(b==0)for(;S<=C;)i(this,N,S),S+=this.blockSize;if(typeof N=="string"){for(;S<A;)if(B[b++]=N.charCodeAt(S++),b==this.blockSize){i(this,B),b=0;break}}else for(;S<A;)if(B[b++]=N[S++],b==this.blockSize){i(this,B),b=0;break}}this.h=b,this.o+=A},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var C=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=C&255,C/=256;for(this.u(N),N=Array(16),A=C=0;4>A;++A)for(var B=0;32>B;B+=8)N[C++]=this.g[A]>>>B&255;return N};function s(N,A){var C=o;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=A(N)}function a(N,A){this.h=A;for(var C=[],B=!0,b=N.length-1;0<=b;b--){var S=N[b]|0;B&&S==A||(C[b]=S,B=!1)}this.g=C}var o={};function c(N){return-128<=N&&128>N?s(N,function(A){return new a([A|0],0>A?-1:0)}):new a([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return d;if(0>N)return E(u(-N));for(var A=[],C=1,B=0;N>=C;B++)A[B]=N/C|0,C*=4294967296;return new a(A,0)}function l(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return E(l(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(A,8)),B=d,b=0;b<N.length;b+=8){var S=Math.min(8,N.length-b),R=parseInt(N.substring(b,b+S),A);8>S?(S=u(Math.pow(A,S)),B=B.j(S).add(u(R))):(B=B.j(C),B=B.add(u(R)))}return B}var d=c(0),g=c(1),p=c(16777216);n=a.prototype,n.m=function(){if(_(this))return-E(this).m();for(var N=0,A=1,C=0;C<this.g.length;C++){var B=this.i(C);N+=(0<=B?B:4294967296+B)*A,A*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(_(this))return"-"+E(this).toString(N);for(var A=u(Math.pow(N,6)),C=this,B="";;){var b=K(C,A).g;C=P(C,b.j(A));var S=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=b,x(C))return S+B;for(;6>S.length;)S="0"+S;B=S+B}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function _(N){return N.h==-1}n.l=function(N){return N=P(this,N),_(N)?-1:x(N)?0:1};function E(N){for(var A=N.g.length,C=[],B=0;B<A;B++)C[B]=~N.g[B];return new a(C,~N.h).add(g)}n.abs=function(){return _(this)?E(this):this},n.add=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0,b=0;b<=A;b++){var S=B+(this.i(b)&65535)+(N.i(b)&65535),R=(S>>>16)+(this.i(b)>>>16)+(N.i(b)>>>16);B=R>>>16,S&=65535,R&=65535,C[b]=R<<16|S}return new a(C,C[C.length-1]&-2147483648?-1:0)};function P(N,A){return N.add(E(A))}n.j=function(N){if(x(this)||x(N))return d;if(_(this))return _(N)?E(this).j(E(N)):E(E(this).j(N));if(_(N))return E(this.j(E(N)));if(0>this.l(p)&&0>N.l(p))return u(this.m()*N.m());for(var A=this.g.length+N.g.length,C=[],B=0;B<2*A;B++)C[B]=0;for(B=0;B<this.g.length;B++)for(var b=0;b<N.g.length;b++){var S=this.i(B)>>>16,R=this.i(B)&65535,ie=N.i(b)>>>16,me=N.i(b)&65535;C[2*B+2*b]+=R*me,L(C,2*B+2*b),C[2*B+2*b+1]+=S*me,L(C,2*B+2*b+1),C[2*B+2*b+1]+=R*ie,L(C,2*B+2*b+1),C[2*B+2*b+2]+=S*ie,L(C,2*B+2*b+2)}for(B=0;B<A;B++)C[B]=C[2*B+1]<<16|C[2*B];for(B=A;B<2*A;B++)C[B]=0;return new a(C,0)};function L(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function M(N,A){this.g=N,this.h=A}function K(N,A){if(x(A))throw Error("division by zero");if(x(N))return new M(d,d);if(_(N))return A=K(E(N),A),new M(E(A.g),E(A.h));if(_(A))return A=K(N,E(A)),new M(E(A.g),A.h);if(30<N.g.length){if(_(N)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var C=g,B=A;0>=B.l(N);)C=se(C),B=se(B);var b=oe(C,1),S=oe(B,1);for(B=oe(B,2),C=oe(C,2);!x(B);){var R=S.add(B);0>=R.l(N)&&(b=b.add(C),S=R),B=oe(B,1),C=oe(C,1)}return A=P(N,b.j(A)),new M(b,A)}for(b=d;0<=N.l(A);){for(C=Math.max(1,Math.floor(N.m()/A.m())),B=Math.ceil(Math.log(C)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),S=u(C),R=S.j(A);_(R)||0<R.l(N);)C-=B,S=u(C),R=S.j(A);x(S)&&(S=g),b=b.add(S),N=P(N,R)}return new M(b,N)}n.A=function(N){return K(this,N).h},n.and=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0;B<A;B++)C[B]=this.i(B)&N.i(B);return new a(C,this.h&N.h)},n.or=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0;B<A;B++)C[B]=this.i(B)|N.i(B);return new a(C,this.h|N.h)},n.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0;B<A;B++)C[B]=this.i(B)^N.i(B);return new a(C,this.h^N.h)};function se(N){for(var A=N.g.length+1,C=[],B=0;B<A;B++)C[B]=N.i(B)<<1|N.i(B-1)>>>31;return new a(C,N.h)}function oe(N,A){var C=A>>5;A%=32;for(var B=N.g.length-C,b=[],S=0;S<B;S++)b[S]=0<A?N.i(S+C)>>>A|N.i(S+C+1)<<32-A:N.i(S+C);return new a(b,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,iE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=l,iu=a}).apply(typeof Z_<"u"?Z_:typeof self<"u"?self:typeof window<"u"?window:{});var n0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sE,sf,aE,A0,Ug,oE,cE,uE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,k){return f==Array.prototype||f==Object.prototype||(f[w]=k.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof n0=="object"&&n0];for(var w=0;w<f.length;++w){var k=f[w];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=t(this);function i(f,w){if(w)e:{var k=r;f=f.split(".");for(var W=0;W<f.length-1;W++){var pe=f[W];if(!(pe in k))break e;k=k[pe]}f=f[f.length-1],W=k[f],w=w(W),w!=W&&w!=null&&e(k,f,{configurable:!0,writable:!0,value:w})}}function s(f,w){f instanceof String&&(f+="");var k=0,W=!1,pe={next:function(){if(!W&&k<f.length){var Ie=k++;return{value:w(Ie,f[Ie]),done:!1}}return W=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(f){return f||function(){return s(this,function(w,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function l(f,w,k){return f.call.apply(f.bind,arguments)}function d(f,w,k){if(!f)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,W),f.apply(w,pe)}}return function(){return f.apply(w,arguments)}}function g(f,w,k){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:d,g.apply(null,arguments)}function p(f,w){var k=Array.prototype.slice.call(arguments,1);return function(){var W=k.slice();return W.push.apply(W,arguments),f.apply(this,W)}}function x(f,w){function k(){}k.prototype=w.prototype,f.aa=w.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(W,pe,Ie){for(var Qe=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Qe[Bt-2]=arguments[Bt];return w.prototype[pe].apply(W,Qe)}}function _(f){const w=f.length;if(0<w){const k=Array(w);for(let W=0;W<w;W++)k[W]=f[W];return k}return[]}function E(f,w){for(let k=1;k<arguments.length;k++){const W=arguments[k];if(c(W)){const pe=f.length||0,Ie=W.length||0;f.length=pe+Ie;for(let Qe=0;Qe<Ie;Qe++)f[pe+Qe]=W[Qe]}else f.push(W)}}class P{constructor(w,k){this.i=w,this.j=k,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function L(f){return/^[\s\xa0]*$/.test(f)}function M(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var se=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function oe(f,w,k){for(const W in f)w.call(k,f[W],W,f)}function N(f,w){for(const k in f)w.call(void 0,f[k],k,f)}function A(f){const w={};for(const k in f)w[k]=f[k];return w}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,w){let k,W;for(let pe=1;pe<arguments.length;pe++){W=arguments[pe];for(k in W)f[k]=W[k];for(let Ie=0;Ie<C.length;Ie++)k=C[Ie],Object.prototype.hasOwnProperty.call(W,k)&&(f[k]=W[k])}}function b(f){var w=1;f=f.split(":");const k=[];for(;0<w&&f.length;)k.push(f.shift()),w--;return f.length&&k.push(f.join(":")),k}function S(f){o.setTimeout(()=>{throw f},0)}function R(){var f=ke;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class ie{constructor(){this.h=this.g=null}add(w,k){const W=me.get();W.set(w,k),this.h?this.h.next=W:this.g=W,this.h=W}}var me=new P(()=>new Ee,f=>f.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(w,k){this.h=w,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,_e=!1,ke=new ie,Fe=()=>{const f=o.Promise.resolve(void 0);Ne=()=>{f.then(rt)}};var rt=()=>{for(var f;f=R();){try{f.h.call(f.g)}catch(k){S(k)}var w=me;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}_e=!1};function T(){this.s=this.s,this.C=this.C}T.prototype.s=!1,T.prototype.ma=function(){this.s||(this.s=!0,this.N())},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var V=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};o.addEventListener("test",k,w),o.removeEventListener("test",k,w)}catch{}return f}();function U(f,w){if(D.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,W=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(se){e:{try{K(w.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(w=null)}}else k=="mouseover"?w=f.fromElement:k=="mouseout"&&(w=f.toElement);this.relatedTarget=w,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:J[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&U.aa.h.call(this)}}x(U,D);var J={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),le=0;function ue(f,w,k,W,pe){this.listener=f,this.proxy=null,this.src=w,this.type=k,this.capture=!!W,this.ha=pe,this.key=++le,this.da=this.fa=!1}function xe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ve(f){this.src=f,this.g={},this.h=0}Ve.prototype.add=function(f,w,k,W,pe){var Ie=f.toString();f=this.g[Ie],f||(f=this.g[Ie]=[],this.h++);var Qe=Ze(f,w,W,pe);return-1<Qe?(w=f[Qe],k||(w.fa=!1)):(w=new ue(w,this.src,Ie,!!W,pe),w.fa=k,f.push(w)),w};function ze(f,w){var k=w.type;if(k in f.g){var W=f.g[k],pe=Array.prototype.indexOf.call(W,w,void 0),Ie;(Ie=0<=pe)&&Array.prototype.splice.call(W,pe,1),Ie&&(xe(w),f.g[k].length==0&&(delete f.g[k],f.h--))}}function Ze(f,w,k,W){for(var pe=0;pe<f.length;++pe){var Ie=f[pe];if(!Ie.da&&Ie.listener==w&&Ie.capture==!!k&&Ie.ha==W)return pe}return-1}var at="closure_lm_"+(1e6*Math.random()|0),Re={};function re(f,w,k,W,pe){if(Array.isArray(w)){for(var Ie=0;Ie<w.length;Ie++)re(f,w[Ie],k,W,pe);return null}return k=Ft(k),f&&f[ae]?f.K(w,k,u(W)?!!W.capture:!1,pe):We(f,w,k,!1,W,pe)}function We(f,w,k,W,pe,Ie){if(!w)throw Error("Invalid event type");var Qe=u(pe)?!!pe.capture:!!pe,Bt=Tt(f);if(Bt||(f[at]=Bt=new Ve(f)),k=Bt.add(w,k,W,Qe,Ie),k.proxy)return k;if(W=_t(),k.proxy=W,W.src=f,W.listener=k,f.addEventListener)V||(pe=Qe),pe===void 0&&(pe=!1),f.addEventListener(w.toString(),W,pe);else if(f.attachEvent)f.attachEvent(ct(w.toString()),W);else if(f.addListener&&f.removeListener)f.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return k}function _t(){function f(k){return w.call(f.src,f.listener,k)}const w=ut;return f}function $e(f,w,k,W,pe){if(Array.isArray(w))for(var Ie=0;Ie<w.length;Ie++)$e(f,w[Ie],k,W,pe);else W=u(W)?!!W.capture:!!W,k=Ft(k),f&&f[ae]?(f=f.i,w=String(w).toString(),w in f.g&&(Ie=f.g[w],k=Ze(Ie,k,W,pe),-1<k&&(xe(Ie[k]),Array.prototype.splice.call(Ie,k,1),Ie.length==0&&(delete f.g[w],f.h--)))):f&&(f=Tt(f))&&(w=f.g[w.toString()],f=-1,w&&(f=Ze(w,k,W,pe)),(k=-1<f?w[f]:null)&&nt(k))}function nt(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[ae])ze(w.i,f);else{var k=f.type,W=f.proxy;w.removeEventListener?w.removeEventListener(k,W,f.capture):w.detachEvent?w.detachEvent(ct(k),W):w.addListener&&w.removeListener&&w.removeListener(W),(k=Tt(w))?(ze(k,f),k.h==0&&(k.src=null,w[at]=null)):xe(f)}}}function ct(f){return f in Re?Re[f]:Re[f]="on"+f}function ut(f,w){if(f.da)f=!0;else{w=new U(w,this);var k=f.listener,W=f.ha||f.src;f.fa&&nt(f),f=k.call(W,w)}return f}function Tt(f){return f=f[at],f instanceof Ve?f:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(f){return typeof f=="function"?f:(f[At]||(f[At]=function(w){return f.handleEvent(w)}),f[At])}function It(){T.call(this),this.i=new Ve(this),this.M=this,this.F=null}x(It,T),It.prototype[ae]=!0,It.prototype.removeEventListener=function(f,w,k,W){$e(this,f,w,k,W)};function kt(f,w){var k,W=f.F;if(W)for(k=[];W;W=W.F)k.push(W);if(f=f.M,W=w.type||w,typeof w=="string")w=new D(w,f);else if(w instanceof D)w.target=w.target||f;else{var pe=w;w=new D(W,f),B(w,pe)}if(pe=!0,k)for(var Ie=k.length-1;0<=Ie;Ie--){var Qe=w.g=k[Ie];pe=Ht(Qe,W,!0,w)&&pe}if(Qe=w.g=f,pe=Ht(Qe,W,!0,w)&&pe,pe=Ht(Qe,W,!1,w)&&pe,k)for(Ie=0;Ie<k.length;Ie++)Qe=w.g=k[Ie],pe=Ht(Qe,W,!1,w)&&pe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var k=f.g[w],W=0;W<k.length;W++)xe(k[W]);delete f.g[w],f.h--}}this.F=null},It.prototype.K=function(f,w,k,W){return this.i.add(String(f),w,!1,k,W)},It.prototype.L=function(f,w,k,W){return this.i.add(String(f),w,!0,k,W)};function Ht(f,w,k,W){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var pe=!0,Ie=0;Ie<w.length;++Ie){var Qe=w[Ie];if(Qe&&!Qe.da&&Qe.capture==k){var Bt=Qe.listener,Xt=Qe.ha||Qe.src;Qe.fa&&ze(f.i,Qe),pe=Bt.call(Xt,W)!==!1&&pe}}return pe&&!W.defaultPrevented}function Ct(f,w,k){if(typeof f=="function")k&&(f=g(f,k));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:o.setTimeout(f,w||0)}function qt(f){f.g=Ct(()=>{f.g=null,f.i&&(f.i=!1,qt(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class pt extends T{constructor(w,k){super(),this.m=w,this.l=k,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Fn(f){T.call(this),this.h=f,this.g={}}x(Fn,T);var Gt=[];function qr(f){oe(f.g,function(w,k){this.g.hasOwnProperty(k)&&nt(w)},f),f.g={}}Fn.prototype.N=function(){Fn.aa.N.call(this),qr(this)},Fn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tn=o.JSON.stringify,Tn=o.JSON.parse,Di=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Kt(){}Kt.prototype.h=null;function Zi(f){return f.h||(f.h=f.i())}function bn(){}var br={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vi(){D.call(this,"d")}x(vi,D);function un(){D.call(this,"c")}x(un,D);var Nt={},en=null;function Fi(){return en=en||new It}Nt.La="serverreachability";function Yn(f){D.call(this,Nt.La,f)}x(Yn,D);function Cr(f){const w=Fi();kt(w,new Yn(w))}Nt.STAT_EVENT="statevent";function _i(f,w){D.call(this,Nt.STAT_EVENT,f),this.stat=w}x(_i,D);function wt(f){const w=Fi();kt(w,new _i(w,f))}Nt.Ma="timingevent";function si(f,w){D.call(this,Nt.Ma,f),this.size=w}x(si,D);function gr(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},w)}function Xn(){this.g=!0}Xn.prototype.xa=function(){this.g=!1};function $n(f,w,k,W,pe,Ie){f.info(function(){if(f.g)if(Ie)for(var Qe="",Bt=Ie.split("&"),Xt=0;Xt<Bt.length;Xt++){var Vt=Bt[Xt].split("=");if(1<Vt.length){var dn=Vt[0];Vt=Vt[1];var Nn=dn.split("_");Qe=2<=Nn.length&&Nn[1]=="type"?Qe+(dn+"="+Vt+"&"):Qe+(dn+"=redacted&")}}else Qe=null;else Qe=Ie;return"XMLHTTP REQ ("+W+") [attempt "+pe+"]: "+w+`
`+k+`
`+Qe})}function jn(f,w,k,W,pe,Ie,Qe){f.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+pe+"]: "+w+`
`+k+`
`+Ie+" "+Qe})}function j(f,w,k,W){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Y(f,k)+(W?" "+W:"")})}function ee(f,w){f.info(function(){return"TIMEOUT: "+w})}Xn.prototype.info=function(){};function Y(f,w){if(!f.g)return w;if(!w)return null;try{var k=JSON.parse(w);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var W=k[f];if(!(2>W.length)){var pe=W[1];if(Array.isArray(pe)&&!(1>pe.length)){var Ie=pe[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var Qe=1;Qe<pe.length;Qe++)pe[Qe]=""}}}}return tn(k)}catch{return w}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},te;function ye(){}x(ye,Kt),ye.prototype.g=function(){return new XMLHttpRequest},ye.prototype.i=function(){return{}},te=new ye;function Ce(f,w,k,W){this.j=f,this.i=w,this.l=k,this.R=W||1,this.U=new Fn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Te={},Pe={};function Ke(f,w,k){f.L=1,f.v=Na(wi(w)),f.m=k,f.P=!0,it(f,null)}function it(f,w){f.F=Date.now(),lt(f),f.A=wi(f.v);var k=f.A,W=f.R;Array.isArray(W)||(W=[String(W)]),Mt(k.i,"t",W),f.C=0,k=f.j.J,f.h=new we,f.g=F(f.j,k?w:null,!f.m),0<f.O&&(f.M=new pt(g(f.Y,f,f.g),f.O)),w=f.U,k=f.g,W=f.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Gt[0]=pe.toString()),pe=Gt);for(var Ie=0;Ie<pe.length;Ie++){var Qe=re(k,pe[Ie],W||w.handleEvent,!1,w.h||w);if(!Qe)break;w.g[Qe.key]=Qe}w=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),Cr(),$n(f.i,f.u,f.A,f.l,f.R,f.m)}Ce.prototype.ca=function(f){f=f.target;const w=this.M;w&&Ar(f)==3?w.j():this.Y(f)},Ce.prototype.Y=function(f){try{if(f==this.g)e:{const Nn=Ar(this.g);var w=this.g.Ba();const Bs=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||$u(this.g)))){this.J||Nn!=4||w==7||(w==8||0>=Bs?Cr(3):Cr(2)),nn(this);var k=this.g.Z();this.X=k;t:if(mt(this)){var W=$u(this.g);f="";var pe=W.length,Ie=Ar(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),rn(this);var Qe="";break t}this.h.i=new o.TextDecoder}for(w=0;w<pe;w++)this.h.h=!0,f+=this.h.i.decode(W[w],{stream:!(Ie&&w==pe-1)});W.length=0,this.h.g+=f,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=k==200,jn(this.i,this.u,this.A,this.l,this.R,Nn,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Xt=this.g;if((Bt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Bt)){var Vt=Bt;break t}}Vt=null}if(k=Vt)j(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,yi(this,k);else{this.o=!1,this.s=3,wt(12),An(this),rn(this);break e}}if(this.P){k=!0;let Hr;for(;!this.J&&this.C<Qe.length;)if(Hr=et(this,Qe),Hr==Pe){Nn==4&&(this.s=4,wt(14),k=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(Hr==Te){this.s=4,wt(15),j(this.i,this.l,Qe,"[Invalid Chunk]"),k=!1;break}else j(this.i,this.l,Hr,null),yi(this,Hr);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||Qe.length!=0||this.h.h||(this.s=1,wt(16),k=!1),this.o=this.o&&k,!k)j(this.i,this.l,Qe,"[Invalid Chunked Response]"),An(this),rn(this);else if(0<Qe.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),Io(dn),dn.M=!0,wt(11))}}else j(this.i,this.l,Qe,null),yi(this,Qe);Nn==4&&An(this),this.o&&!this.J&&(Nn==4?na(this.j,this):(this.o=!1,lt(this)))}else ea(this.g),k==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),An(this),rn(this)}}}catch{}finally{}};function mt(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function et(f,w){var k=f.C,W=w.indexOf(`
`,k);return W==-1?Pe:(k=Number(w.substring(k,W)),isNaN(k)?Te:(W+=1,W+k>w.length?Pe:(w=w.slice(W,W+k),f.C=W+k,w)))}Ce.prototype.cancel=function(){this.J=!0,An(this)};function lt(f){f.S=Date.now()+f.I,Lt(f,f.I)}function Lt(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=gr(g(f.ba,f),w)}function nn(f){f.B&&(o.clearTimeout(f.B),f.B=null)}Ce.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ee(this.i,this.A),this.L!=2&&(Cr(),wt(17)),An(this),this.s=2,rn(this)):Lt(this,this.S-f)};function rn(f){f.j.G==0||f.J||na(f.j,f)}function An(f){nn(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,qr(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function yi(f,w){try{var k=f.j;if(k.G!=0&&(k.g==f||zr(k.h,f))){if(!f.K&&zr(k.h,f)&&k.G==3){try{var W=k.Da.g.parse(w)}catch{W=null}if(Array.isArray(W)&&W.length==3){var pe=W;if(pe[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)Ms(k),Eo(k);else break e;Da(k),wt(18)}}else k.za=pe[1],0<k.za-k.T&&37500>pe[2]&&k.F&&k.v==0&&!k.C&&(k.C=gr(g(k.Za,k),6e3));if(1>=ts(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else ai(k,11)}else if((f.K||k.g==f)&&Ms(k),!L(w))for(pe=k.Da.g.parse(w),w=0;w<pe.length;w++){let Vt=pe[w];if(k.T=Vt[0],Vt=Vt[1],k.G==2)if(Vt[0]=="c"){k.K=Vt[1],k.ia=Vt[2];const dn=Vt[3];dn!=null&&(k.la=dn,k.j.info("VER="+k.la));const Nn=Vt[4];Nn!=null&&(k.Aa=Nn,k.j.info("SVER="+k.Aa));const Bs=Vt[5];Bs!=null&&typeof Bs=="number"&&0<Bs&&(W=1.5*Bs,k.L=W,k.j.info("backChannelRequestTimeoutMs_="+W)),W=k;const Hr=f.g;if(Hr){const ra=Hr.g?Hr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ra){var Ie=W.h;Ie.g||ra.indexOf("spdy")==-1&&ra.indexOf("quic")==-1&&ra.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(On(Ie,Ie.h),Ie.h=null))}if(W.D){const ia=Hr.g?Hr.g.getResponseHeader("X-HTTP-Session-Id"):null;ia&&(W.ya=ia,pn(W.I,W.D,ia))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),W=k;var Qe=f;if(W.qa=v(W,W.J?W.ia:null,W.W),Qe.K){Tc(W.h,Qe);var Bt=Qe,Xt=W.L;Xt&&(Bt.I=Xt),Bt.B&&(nn(Bt),lt(Bt)),W.g=Qe}else Ao(W);0<k.i.length&&To(k)}else Vt[0]!="stop"&&Vt[0]!="close"||ai(k,7);else k.G==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?ai(k,7):Os(k):Vt[0]!="noop"&&k.l&&k.l.ta(Vt),k.v=0)}}Cr(4)}catch{}}var Cs=class{constructor(f,w){this.g=f,this.map=w}};function es(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oi(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ts(f){return f.h?1:f.g?f.g.size:0}function zr(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function On(f,w){f.g?f.g.add(w):f.h=w}function Tc(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}es.prototype.cancel=function(){if(this.i=bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function bc(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const k of f.g.values())w=w.concat(k.D);return w}return _(f.i)}function Uu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var w=[],k=f.length,W=0;W<k;W++)w.push(f[W]);return w}w=[],k=0;for(W in f)w[k++]=f[W];return w}function Ac(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var w=[];f=f.length;for(var k=0;k<f;k++)w.push(k);return w}w=[],k=0;for(const W in f)w[k++]=W;return w}}}function ju(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var k=Ac(f),W=Uu(f),pe=W.length,Ie=0;Ie<pe;Ie++)w.call(void 0,W[Ie],k&&k[Ie],f)}var Mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fo(f,w){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var W=f[k].indexOf("="),pe=null;if(0<=W){var Ie=f[k].substring(0,W);pe=f[k].substring(W+1)}else Ie=f[k];w(Ie,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Jn(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Jn){this.h=f.h,Pa(this,f.j),this.o=f.o,this.g=f.g,po(this,f.s),this.l=f.l;var w=f.i,k=new Qs;k.i=w.i,w.g&&(k.g=new Map(w.g),k.h=w.h),Ic(this,k),this.m=f.m}else f&&(w=String(f).match(Mi))?(this.h=!1,Pa(this,w[1]||"",!0),this.o=ka(w[2]||""),this.g=ka(w[3]||"",!0),po(this,w[4]),this.l=ka(w[5]||"",!0),Ic(this,w[6]||"",!0),this.m=ka(w[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}Jn.prototype.toString=function(){var f=[],w=this.j;w&&f.push(Rs(w,qu,!0),":");var k=this.g;return(k||w=="file")&&(f.push("//"),(w=this.o)&&f.push(Rs(w,qu,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(Rs(k,k.charAt(0)=="/"?Ls:Ph,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",Rs(k,go)),f.join("")};function wi(f){return new Jn(f)}function Pa(f,w,k){f.j=k?ka(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function po(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Ic(f,w,k){w instanceof Qs?(f.i=w,Nh(f.i,f.h)):(k||(w=Rs(w,mo)),f.i=new Qs(w,f.h))}function pn(f,w,k){f.i.set(w,k)}function Na(f){return pn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function ka(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Rs(f,w,k){return typeof f=="string"?(f=encodeURI(f).replace(w,Sh),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Sh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var qu=/[#\/\?@]/g,Ph=/[#\?:]/g,Ls=/[#\?]/g,mo=/[#\?@]/g,go=/#/g;function Qs(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Mn(f){f.g||(f.g=new Map,f.h=0,f.i&&fo(f.i,function(w,k){f.add(decodeURIComponent(w.replace(/\+/g," ")),k)}))}n=Qs.prototype,n.add=function(f,w){Mn(this),this.i=null,f=Zs(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(w),this.h+=1,this};function zu(f,w){Mn(f),w=Zs(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Sc(f,w){return Mn(f),w=Zs(f,w),f.g.has(w)}n.forEach=function(f,w){Mn(this),this.g.forEach(function(k,W){k.forEach(function(pe){f.call(w,pe,W,this)},this)},this)},n.na=function(){Mn(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),k=[];for(let W=0;W<w.length;W++){const pe=f[W];for(let Ie=0;Ie<pe.length;Ie++)k.push(w[W])}return k},n.V=function(f){Mn(this);let w=[];if(typeof f=="string")Sc(this,f)&&(w=w.concat(this.g.get(Zs(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)w=w.concat(f[k])}return w},n.set=function(f,w){return Mn(this),this.i=null,f=Zs(this,f),Sc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Mt(f,w,k){zu(f,w),0<k.length&&(f.i=null,f.g.set(Zs(f,w),_(k)),f.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var k=0;k<w.length;k++){var W=w[k];const Ie=encodeURIComponent(String(W)),Qe=this.V(W);for(W=0;W<Qe.length;W++){var pe=Ie;Qe[W]!==""&&(pe+="="+encodeURIComponent(String(Qe[W]))),f.push(pe)}}return this.i=f.join("&")};function Zs(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Nh(f,w){w&&!f.j&&(Mn(f),f.i=null,f.g.forEach(function(k,W){var pe=W.toLowerCase();W!=pe&&(zu(this,W),Mt(this,pe,k))},f)),f.j=w}function vs(f,w){const k=new Xn;if(o.Image){const W=new Image;W.onload=p(ns,k,"TestLoadImage: loaded",!0,w,W),W.onerror=p(ns,k,"TestLoadImage: error",!1,w,W),W.onabort=p(ns,k,"TestLoadImage: abort",!1,w,W),W.ontimeout=p(ns,k,"TestLoadImage: timeout",!1,w,W),o.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=f}else w(!1)}function Wu(f,w){const k=new Xn,W=new AbortController,pe=setTimeout(()=>{W.abort(),ns(k,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:W.signal}).then(Ie=>{clearTimeout(pe),Ie.ok?ns(k,"TestPingServer: ok",!0,w):ns(k,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(pe),ns(k,"TestPingServer: error",!1,w)})}function ns(f,w,k,W,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),W(k)}catch{}}function vo(){this.g=new Di}function Pc(f,w,k){const W=k||"";try{ju(f,function(pe,Ie){let Qe=pe;u(pe)&&(Qe=tn(pe)),w.push(W+Ie+"="+encodeURIComponent(Qe))})}catch(pe){throw w.push(W+"type="+encodeURIComponent("_badmap")),pe}}function _o(f){this.l=f.Ub||null,this.j=f.eb||!1}x(_o,Kt),_o.prototype.g=function(){return new yo(this.l,this.j)},_o.prototype.i=function(f){return function(){return f}}({});function yo(f,w){It.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(yo,It),n=yo.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,rs(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||o).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ds(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Ds(this):rs(this),this.readyState==3&&Hu(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Ds(this))},n.Qa=function(f){this.g&&(this.response=f,Ds(this))},n.ga=function(){this.g&&Ds(this)};function Ds(f){f.readyState=4,f.l=null,f.j=null,f.v=null,rs(f)}n.setRequestHeader=function(f,w){this.u.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var k=w.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=w.next();return f.join(`\r
`)};function rs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Fs(f){let w="";return oe(f,function(k,W){w+=W,w+=":",w+=k,w+=`\r
`}),w}function Nc(f,w,k){e:{for(W in k){var W=!1;break e}W=!0}W||(k=Fs(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):pn(f,w,k))}function fn(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(fn,It);var kc=/^https?$/i,wo=["POST","PUT"];n=fn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,w,k,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():te.g(),this.v=this.o?Zi(this.o):Zi(te),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(Ie){Cc(this,Ie);return}if(f=k||"",k=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var pe in W)k.set(pe,W[pe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ie of W.keys())k.set(Ie,W.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(k.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),pe=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(wo,w,void 0))||W||pe||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,Qe]of k)this.g.setRequestHeader(Ie,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ie){Cc(this,Ie)}};function Cc(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Rc(f),Ca(f)}function Rc(f){f.A||(f.A=!0,kt(f,"complete"),kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,kt(this,"complete"),kt(this,"abort"),Ca(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ca(this,!0)),fn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Lc(this):this.bb())},n.bb=function(){Lc(this)};function Lc(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Ar(f)!=4||f.Z()!=2)){if(f.u&&Ar(f)==4)Ct(f.Ea,0,f);else if(kt(f,"readystatechange"),Ar(f)==4){f.h=!1;try{const Qe=f.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var k;if(!(k=w)){var W;if(W=Qe===0){var pe=String(f.D).match(Mi)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),W=!kc.test(pe?pe.toLowerCase():"")}k=W}if(k)kt(f,"complete"),kt(f,"success");else{f.m=6;try{var Ie=2<Ar(f)?f.g.statusText:""}catch{Ie=""}f.l=Ie+" ["+f.Z()+"]",Rc(f)}}finally{Ca(f)}}}}function Ca(f,w){if(f.g){is(f);const k=f.g,W=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||kt(f,"ready");try{k.onreadystatechange=W}catch{}}}function is(f){f.I&&(o.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Ar(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Ar(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Tn(w)}};function $u(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(f){const w={};f=(f.g&&2<=Ar(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<f.length;W++){if(L(f[W]))continue;var k=b(f[W]);const pe=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const Ie=w[pe]||[];w[pe]=Ie,Ie.push(k)}N(w,function(W){return W.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wr(f,w,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||w}function xo(f){this.Aa=0,this.i=[],this.j=new Xn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wr("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wr("baseRetryDelayMs",5e3,f),this.cb=Wr("retryDelaySeedMs",1e4,f),this.Wa=Wr("forwardChannelMaxRetries",2,f),this.wa=Wr("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new es(f&&f.concurrentRequestLimit),this.Da=new vo,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=xo.prototype,n.la=8,n.G=1,n.connect=function(f,w,k,W){wt(0),this.W=f,this.H=w||{},k&&W!==void 0&&(this.H.OSID=k,this.H.OAID=W),this.F=this.X,this.I=v(this,null,this.W),To(this)};function Os(f){if(Ra(f),f.G==3){var w=f.U++,k=wi(f.I);if(pn(k,"SID",f.K),pn(k,"RID",w),pn(k,"TYPE","terminate"),ta(f,k),w=new Ce(f,f.j,w),w.L=2,w.v=Na(wi(k)),k=!1,o.navigator&&o.navigator.sendBeacon)try{k=o.navigator.sendBeacon(w.v.toString(),"")}catch{}!k&&o.Image&&(new Image().src=w.v,k=!0),k||(w.g=F(w.j,null),w.g.ea(w.v)),w.F=Date.now(),lt(w)}Po(f)}function Eo(f){f.g&&(Io(f),f.g.cancel(),f.g=null)}function Ra(f){Eo(f),f.u&&(o.clearTimeout(f.u),f.u=null),Ms(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function To(f){if(!Oi(f.h)&&!f.s){f.s=!0;var w=f.Ga;Ne||Fe(),_e||(Ne(),_e=!0),ke.add(w,f),f.B=0}}function Dc(f,w){return ts(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=gr(g(f.Ga,f,w),So(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const pe=new Ce(this,this.j,f);let Ie=this.o;if(this.S&&(Ie?(Ie=A(Ie),B(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(pe.H=Ie,Ie=null),this.P)e:{for(var w=0,k=0;k<this.i.length;k++){t:{var W=this.i[k];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(w+=W,4096<w){w=k;break e}if(w===4096||k===this.i.length-1){w=k+1;break e}}w=1e3}else w=1e3;w=La(this,pe,w),k=wi(this.I),pn(k,"RID",f),pn(k,"CVER",22),this.D&&pn(k,"X-HTTP-Session-Id",this.D),ta(this,k),Ie&&(this.O?w="headers="+encodeURIComponent(String(Fs(Ie)))+"&"+w:this.m&&Nc(k,this.m,Ie)),On(this.h,pe),this.Ua&&pn(k,"TYPE","init"),this.P?(pn(k,"$req",w),pn(k,"SID","null"),pe.T=!0,Ke(pe,k,null)):Ke(pe,k,w),this.G=2}}else this.G==3&&(f?bo(this,f):this.i.length==0||Oi(this.h)||bo(this))};function bo(f,w){var k;w?k=w.l:k=f.U++;const W=wi(f.I);pn(W,"SID",f.K),pn(W,"RID",k),pn(W,"AID",f.T),ta(f,W),f.m&&f.o&&Nc(W,f.m,f.o),k=new Ce(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),w&&(f.i=w.D.concat(f.i)),w=La(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),On(f.h,k),Ke(k,W,w)}function ta(f,w){f.H&&oe(f.H,function(k,W){pn(w,W,k)}),f.l&&ju({},function(k,W){pn(w,W,k)})}function La(f,w,k){k=Math.min(f.i.length,k);var W=f.l?g(f.l.Na,f.l,f):null;e:{var pe=f.i;let Ie=-1;for(;;){const Qe=["count="+k];Ie==-1?0<k?(Ie=pe[0].g,Qe.push("ofs="+Ie)):Ie=0:Qe.push("ofs="+Ie);let Bt=!0;for(let Xt=0;Xt<k;Xt++){let Vt=pe[Xt].g;const dn=pe[Xt].map;if(Vt-=Ie,0>Vt)Ie=Math.max(0,pe[Xt].g-100),Bt=!1;else try{Pc(dn,Qe,"req"+Vt+"_")}catch{W&&W(dn)}}if(Bt){W=Qe.join("&");break e}}}return f=f.i.splice(0,k),w.D=f,W}function Ao(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;Ne||Fe(),_e||(Ne(),_e=!0),ke.add(w,f),f.v=0}}function Da(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=gr(g(f.Fa,f),So(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=gr(g(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Eo(this),Gu(this))};function Io(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function Gu(f){f.g=new Ce(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=wi(f.qa);pn(w,"RID","rpc"),pn(w,"SID",f.K),pn(w,"AID",f.T),pn(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&pn(w,"TO",f.ja),pn(w,"TYPE","xmlhttp"),ta(f,w),f.m&&f.o&&Nc(w,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=Na(wi(w)),k.m=null,k.P=!0,it(k,f)}n.Za=function(){this.C!=null&&(this.C=null,Eo(this),Da(this),wt(19))};function Ms(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function na(f,w){var k=null;if(f.g==w){Ms(f),Io(f),f.g=null;var W=2}else if(zr(f.h,w))k=w.D,Tc(f.h,w),W=1;else return;if(f.G!=0){if(w.o)if(W==1){k=w.m?w.m.length:0,w=Date.now()-w.F;var pe=f.B;W=Fi(),kt(W,new si(W,k)),To(f)}else Ao(f);else if(pe=w.s,pe==3||pe==0&&0<w.X||!(W==1&&Dc(f,w)||W==2&&Da(f)))switch(k&&0<k.length&&(w=f.h,w.i=w.i.concat(k)),pe){case 1:ai(f,5);break;case 4:ai(f,10);break;case 3:ai(f,6);break;default:ai(f,2)}}}function So(f,w){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*w}function ai(f,w){if(f.j.info("Error code "+w),w==2){var k=g(f.fb,f),W=f.Xa;const pe=!W;W=new Jn(W||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pa(W,"https"),Na(W),pe?vs(W.toString(),k):Wu(W.toString(),k)}else wt(2);f.G=0,f.l&&f.l.sa(w),Po(f),Ra(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Po(f){if(f.G=0,f.ka=[],f.l){const w=bc(f.h);(w.length!=0||f.i.length!=0)&&(E(f.ka,w),E(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function v(f,w,k){var W=k instanceof Jn?wi(k):new Jn(k);if(W.g!="")w&&(W.g=w+"."+W.g),po(W,W.s);else{var pe=o.location;W=pe.protocol,w=w?w+"."+pe.hostname:pe.hostname,pe=+pe.port;var Ie=new Jn(null);W&&Pa(Ie,W),w&&(Ie.g=w),pe&&po(Ie,pe),k&&(Ie.l=k),W=Ie}return k=f.D,w=f.ya,k&&w&&pn(W,k,w),pn(W,"VER",f.la),ta(f,W),W}function F(f,w,k){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new fn(new _o({eb:k})):new fn(f.pa),w.Ha(f.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ne(){}n=ne.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ce(){}ce.prototype.g=function(f,w){return new ge(f,w)};function ge(f,w){It.call(this),this.g=new xo(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!L(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new dt(this)}x(ge,It),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Os(this.g)},ge.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=tn(f),f=k);w.i.push(new Cs(w.Ya++,f)),w.G==3&&To(w)},ge.prototype.N=function(){this.g.l=null,delete this.j,Os(this.g),delete this.g,ge.aa.N.call(this)};function Oe(f){vi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const k in w){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}x(Oe,vi);function Ye(){un.call(this),this.status=1}x(Ye,un);function dt(f){this.g=f}x(dt,ne),dt.prototype.ua=function(){kt(this.g,"a")},dt.prototype.ta=function(f){kt(this.g,new Oe(f))},dt.prototype.sa=function(f){kt(this.g,new Ye)},dt.prototype.ra=function(){kt(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,uE=function(){return new ce},cE=function(){return Fi()},oE=Nt,Ug={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,A0=X,Z.COMPLETE="complete",aE=Z,bn.EventType=br,br.OPEN="a",br.CLOSE="b",br.ERROR="c",br.MESSAGE="d",It.prototype.listen=It.prototype.K,sf=bn,fn.prototype.listenOnce=fn.prototype.L,fn.prototype.getLastError=fn.prototype.Ka,fn.prototype.getLastErrorCode=fn.prototype.Ba,fn.prototype.getStatus=fn.prototype.Z,fn.prototype.getResponseJson=fn.prototype.Oa,fn.prototype.getResponseText=fn.prototype.oa,fn.prototype.send=fn.prototype.ea,fn.prototype.setWithCredentials=fn.prototype.Ha,sE=fn}).apply(typeof n0<"u"?n0:typeof self<"u"?self:typeof window<"u"?window:{});const ey="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fr.UNAUTHENTICATED=new Fr(null),Fr.GOOGLE_CREDENTIALS=new Fr("google-credentials-uid"),Fr.FIRST_PARTY=new Fr("first-party-uid"),Fr.MOCK_USER=new Fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Ap("@firebase/firestore");function _l(){return rc.logLevel}function JC(n){rc.setLogLevel(n)}function Je(n,...e){if(rc.logLevel<=Yt.DEBUG){const t=e.map(r2);rc.debug(`Firestore (${ph}): ${n}`,...t)}}function fr(n,...e){if(rc.logLevel<=Yt.ERROR){const t=e.map(r2);rc.error(`Firestore (${ph}): ${n}`,...t)}}function Ea(n,...e){if(rc.logLevel<=Yt.WARN){const t=e.map(r2);rc.warn(`Firestore (${ph}): ${n}`,...t)}}function r2(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n="Unexpected state"){const e=`FIRESTORE (${ph}) INTERNAL ASSERTION FAILED: `+n;throw fr(e),new Error(e)}function bt(n,e){n||xt()}function QC(n,e){n||xt()}function gt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Pr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ZC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fr.UNAUTHENTICATED))}shutdown(){}}class eR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tR{constructor(e){this.t=e,this.currentUser=Fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ti,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ti)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string"),new lE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new Fr(e)}}class nR{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Fr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class rR{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new nR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class iR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);const r=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string"),this.R=t.token,new iR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=aR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function Yl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function fE(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Hn.fromMillis(Date.now())}static fromDate(e){return Hn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Hn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Hn(0,0))}static max(){return new Pt(new Hn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,r){t===void 0?t=0:t>e.length&&xt(),r===void 0?r=e.length-t:r>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Df.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Df?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Df{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const oR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class zn extends Df{construct(e,t,r){return new zn(e,t,r)}static isValidIdentifier(e){return oR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),zn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new zn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Xe(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xe(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Xe(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new zn(t)}static emptyPath(){return new zn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(Qt.fromString(e))}static fromName(e){return new ft(Qt.fromString(e).popFirst(5))}static empty(){return new ft(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function jg(n){return n.fields.find(e=>e.kind===2)}function zc(n){return n.fields.filter(e=>e.kind!==2)}H0.UNKNOWN_ID=-1;class I0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ff{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ff(0,ms.min())}}function dE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(r===1e9?new Hn(t+1,0):new Hn(t,r));return new ms(i,ft.empty(),e)}function pE(n){return new ms(n.readTime,n.key,-1)}class ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ms(Pt.min(),ft.empty(),-1)}static max(){return new ms(Pt.max(),ft.empty(),-1)}}function i2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ft.comparator(n.documentKey,e.documentKey),t!==0?t:jt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(n){if(n.code!==Le.FAILED_PRECONDITION||n.message!==mE)throw n;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(i=>i?Se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Se((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(l=>{a[u]=l,++o,o===s&&r(a)},l=>i(l))}})}static doWhile(e,t){return new Se((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ti,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new df(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=s2(r.target.error);this.V.reject(new df(e,i))}}static open(e,t,r,i){try{return new Bp(t,e.transaction(i,r))}catch(s){throw new df(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new uR(t)}}class va{constructor(e,t,r){this.name=e,this.version=t,this.p=r,va.S(Kn())===12.2&&fr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),Hc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ou())return!1;if(va.v())return!0;const e=Kn(),t=va.S(e),r=0<t&&t<10,i=vE(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Je("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new df(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new Xe(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Xe(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new df(e,a))},i.onupgradeneeded=s=>{Je("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{Je("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Bp.open(this.db,e,s?"readonly":"readwrite",r),c=i(o).next(u=>(o.g(),u)).catch(u=>(o.abort(u),Se.reject(u))).toPromise();return c.catch(()=>{}),await o.m,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(Je("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function vE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class cR{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hc(this.B.delete())}}class df extends Xe{constructor(e,t){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yc(n){return n.name==="IndexedDbTransactionError"}class uR{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Hc(r)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),Hc(this.store.add(e))}get(e){return Hc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),Hc(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),Hc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Se((a,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{a(c.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(o,c)=>{a.push(c)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Se((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,o)=>o.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Se((r,i)=>{t.onerror=s=>{const a=s2(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}W(e,t){const r=[];return new Se((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new cR(o),u=t(o.primaryKey,o.value,c);if(u instanceof Se){const l=u.catch(d=>(c.done(),Se.reject(d)));r.push(l)}c.isDone?i():c.K===null?o.continue():o.continue(c.K)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hc(n){return new Se((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=s2(r.target.error);t(i)}})}let ty=!1;function s2(n){const e=va.S(Kn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ty||(ty=!0,setTimeout(()=>{throw r},0)),r}}return n}class lR{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Je("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){yc(t)?Je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await _c(t)}await this.X(6e4)})}}class hR{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return Se.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return Je("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(o=>(Je("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=pE(s);i2(a,r)>0&&(r=a)}),new ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hi.oe=-1;function hd(n){return n==null}function Of(n){return n===0&&1/n==-1/0}function _E(n){return typeof n=="number"&&Number.isInteger(n)&&!Of(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ny(e)),e=fR(n.get(t),e);return ny(e)}function fR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function ny(n){return n+""}function pa(n){const e=n.length;if(bt(e>=2),e===2)return bt(n.charAt(0)===""&&n.charAt(1)===""),Qt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&xt(),n.charAt(a+1)){case"":const o=n.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:xt()}s=a+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(n,e){return[n,Pi(e)]}function yE(n,e,t){return[n,Pi(e),t]}const dR={},pR=["prefixPath","collectionGroup","readTime","documentId"],mR=["prefixPath","collectionGroup","documentId"],gR=["collectionGroup","readTime","prefixPath","documentId"],vR=["canonicalId","targetId"],_R=["targetId","path"],yR=["path","targetId"],wR=["collectionId","parent"],xR=["indexId","uid"],ER=["uid","sequenceNumber"],TR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bR=["indexId","uid","orderedDocumentKey"],AR=["userId","collectionPath","documentId"],IR=["userId","collectionPath","largestBatchId"],SR=["userId","collectionGroup","largestBatchId"],wE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],PR=[...wE,"documentOverlays"],xE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],EE=xE,a2=[...EE,"indexConfiguration","indexState","indexEntries"],NR=a2,kR=[...a2,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg extends gE{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function kr(n,e){const t=gt(n);return va.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Nu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function TE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,t){this.comparator=e,this.root=t||Xr.EMPTY}insert(e,t){return new Dn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xr.BLACK,null,null))}remove(e){return new Dn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new r0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new r0(this.root,e,this.comparator,!1)}getReverseIterator(){return new r0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new r0(this.root,e,this.comparator,!0)}}class r0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Xr.RED,this.left=i??Xr.EMPTY,this.right=s??Xr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Xr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Xr.EMPTY=null,Xr.RED=!0,Xr.BLACK=!1;Xr.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Xr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new Dn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new sy(this.data.getIterator())}getIteratorFrom(e){return new sy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class sy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort(zn.comparator)}static empty(){return new $i([])}unionWith(e){let t=new Pn(zn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Yl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new bE("Invalid base64 string: "+s):s}}(e);return new ir(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new ir(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ir.EMPTY_BYTE_STRING=new ir("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(n){if(bt(!!n),typeof n=="string"){let e=0;const t=RR.exec(n);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qn(n.seconds),nanos:qn(n.nanos)}}function qn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ic(n){return typeof n=="string"?ir.fromBase64String(n):ir.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function o2(n){const e=n.mapValue.fields.__previous_value__;return Vp(e)?o2(e):e}function Mf(n){const e=no(n.mapValue.fields.__local_write_time__.timestampValue);return new Hn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,t,r,i,s,a,o,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class sc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},P0={nullValue:"NULL_VALUE"};function hu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Vp(n)?4:AE(n)?9007199254740991:Up(n)?10:11:xt()}function Ta(n,e){if(n===e)return!0;const t=hu(n);if(t!==hu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Mf(n).isEqual(Mf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=no(i.timestampValue),o=no(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ic(i.bytesValue).isEqual(ic(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return qn(i.geoPointValue.latitude)===qn(s.geoPointValue.latitude)&&qn(i.geoPointValue.longitude)===qn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qn(i.integerValue)===qn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=qn(i.doubleValue),o=qn(s.doubleValue);return a===o?Of(a)===Of(o):isNaN(a)&&isNaN(o)}return!1}(n,e);case 9:return Yl(n.arrayValue.values||[],e.arrayValue.values||[],Ta);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(iy(a)!==iy(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Ta(a[c],o[c])))return!1;return!0}(n,e);default:return xt()}}function Bf(n,e){return(n.values||[]).find(t=>Ta(t,e))!==void 0}function ac(n,e){if(n===e)return 0;const t=hu(n),r=hu(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(s,a){const o=qn(s.integerValue||s.doubleValue),c=qn(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return ay(n.timestampValue,e.timestampValue);case 4:return ay(Mf(n),Mf(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(s,a){const o=ic(s),c=ic(a);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const l=jt(o[u],c[u]);if(l!==0)return l}return jt(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const o=jt(qn(s.latitude),qn(a.latitude));return o!==0?o:jt(qn(s.longitude),qn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return oy(n.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,l;const d=s.fields||{},g=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,x=(c=g.value)===null||c===void 0?void 0:c.arrayValue,_=jt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((l=x==null?void 0:x.values)===null||l===void 0?void 0:l.length)||0);return _!==0?_:oy(p,x)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Xo.mapValue&&a===Xo.mapValue)return 0;if(s===Xo.mapValue)return 1;if(a===Xo.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){const g=jt(c[d],l[d]);if(g!==0)return g;const p=ac(o[c[d]],u[l[d]]);if(p!==0)return p}return jt(c.length,l.length)}(n.mapValue,e.mapValue);default:throw xt()}}function ay(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return jt(n,e);const t=no(n),r=no(e),i=jt(t.seconds,r.seconds);return i!==0?i:jt(t.nanos,r.nanos)}function oy(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=ac(t[i],r[i]);if(s)return s}return jt(t.length,r.length)}function Xl(n){return zg(n)}function zg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=no(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ic(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ft.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=zg(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${zg(t.fields[a])}`;return i+"}"}(n.mapValue):xt()}function fu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Wg(n){return!!n&&"integerValue"in n}function Vf(n){return!!n&&"arrayValue"in n}function cy(n){return!!n&&"nullValue"in n}function uy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function N0(n){return!!n&&"mapValue"in n}function Up(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Nu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=pf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const IE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function DR(n){return"nullValue"in n?P0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?fu(sc.empty(),ft.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?Up(n)?IE:{mapValue:{}}:xt()}function FR(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?fu(sc.empty(),ft.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?IE:"mapValue"in n?Up(n)?{mapValue:{}}:Xo:xt()}function ly(n,e){const t=ac(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function hy(n,e){const t=ac(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr{constructor(e){this.value=e}static empty(){return new Jr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!N0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(t)}setAll(e){let t=zn.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=pf(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());N0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];N0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Nu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Jr(pf(this.value))}}function SE(n){const e=[];return Nu(n.fields,(t,r)=>{const i=new zn([t]);if(N0(r)){const s=SE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Bn(e,0,Pt.min(),Pt.min(),Pt.min(),Jr.empty(),0)}static newFoundDocument(e,t,r,i){return new Bn(e,1,t,Pt.min(),r,i,0)}static newNoDocument(e,t){return new Bn(e,2,t,Pt.min(),Pt.min(),Jr.empty(),0)}static newUnknownDocument(e,t){return new Bn(e,3,t,Pt.min(),Pt.min(),Jr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.position=e,this.inclusive=t}}function fy(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ft.comparator(ft.fromName(a.referenceValue),t.key):r=ac(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function dy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ta(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t="asc"){this.field=e,this.dir=t}}function OR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PE{}class Zt extends PE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new MR(e,t,r):t==="array-contains"?new UR(e,r):t==="in"?new DE(e,r):t==="not-in"?new jR(e,r):t==="array-contains-any"?new qR(e,r):new Zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new BR(e,r):new VR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ac(t,this.value)):t!==null&&hu(this.value)===hu(t)&&this.matchesComparison(ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends PE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new yn(e,t)}matches(e){return Jl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Jl(n){return n.op==="and"}function Hg(n){return n.op==="or"}function c2(n){return NE(n)&&Jl(n)}function NE(n){for(const e of n.filters)if(e instanceof yn)return!1;return!0}function $g(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Xl(n.value);if(c2(n))return n.filters.map(e=>$g(e)).join(",");{const e=n.filters.map(t=>$g(t)).join(",");return`${n.op}(${e})`}}function kE(n,e){return n instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&Ta(r.value,i.value)}(n,e):n instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&kE(a,i.filters[o]),!0):!1}(n,e):void xt()}function CE(n,e){const t=n.filters.concat(e);return yn.create(t,n.op)}function RE(n){return n instanceof Zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Xl(t.value)}`}(n):n instanceof yn?function(t){return t.op.toString()+" {"+t.getFilters().map(RE).join(" ,")+"}"}(n):"Filter"}class MR extends Zt{constructor(e,t,r){super(e,t,r),this.key=ft.fromName(r.referenceValue)}matches(e){const t=ft.comparator(e.key,this.key);return this.matchesComparison(t)}}class BR extends Zt{constructor(e,t){super(e,"in",t),this.keys=LE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class VR extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=LE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function LE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ft.fromName(r.referenceValue))}class UR extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&Bf(t.arrayValue,this.value)}}class DE extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bf(this.value.arrayValue,t)}}class jR extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Bf(this.value.arrayValue,t)}}class qR extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Bf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function Gg(n,e=null,t=[],r=[],i=null,s=null,a=null){return new zR(n,e,t,r,i,s,a)}function du(n){const e=gt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>$g(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Xl(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Xl(r)).join(",")),e.ue=t}return e.ue}function fd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!kE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!dy(n.startAt,e.startAt)&&dy(n.endAt,e.endAt)}function $0(n){return ft.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function G0(n,e){return n.filters.filter(t=>t instanceof Zt&&t.field.isEqual(e))}function py(n,e,t){let r=P0,i=!0;for(const s of G0(n,e)){let a=P0,o=!0;switch(s.op){case"<":case"<=":a=DR(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=P0}ly({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];ly({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function my(n,e,t){let r=Xo,i=!0;for(const s of G0(n,e)){let a=Xo,o=!0;switch(s.op){case">=":case">":a=FR(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Xo}hy({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];hy({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function FE(n,e,t,r,i,s,a,o){return new co(n,e,t,r,i,s,a,o)}function mh(n){return new co(n)}function gy(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function u2(n){return n.collectionGroup!==null}function Dl(n){const e=gt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pn(zn.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Uf(s,r))}),t.has(zn.keyField().canonicalString())||e.ce.push(new Uf(zn.keyField(),r))}return e.ce}function Ni(n){const e=gt(n);return e.le||(e.le=WR(e,Dl(n))),e.le}function WR(n,e){if(n.limitType==="F")return Gg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Uf(i.field,s)});const t=n.endAt?new oc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new oc(n.startAt.position,n.startAt.inclusive):null;return Gg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Kg(n,e){const t=n.filters.concat([e]);return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function K0(n,e,t){return new co(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dd(n,e){return fd(Ni(n),Ni(e))&&n.limitType===e.limitType}function OE(n){return`${du(Ni(n))}|lt:${n.limitType}`}function yl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>RE(i)).join(", ")}]`),hd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Xl(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Xl(i)).join(",")),`Target(${r})`}(Ni(n))}; limitType=${n.limitType})`}function pd(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ft.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Dl(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,o,c){const u=fy(a,o,c);return a.inclusive?u<=0:u<0}(r.startAt,Dl(r),i)||r.endAt&&!function(a,o,c){const u=fy(a,o,c);return a.inclusive?u>=0:u>0}(r.endAt,Dl(r),i))}(n,e)}function ME(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BE(n){return(e,t)=>{let r=!1;for(const i of Dl(n)){const s=HR(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function HR(n,e,t){const r=n.field.isKeyField()?ft.comparator(e.key,t.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?ac(c,u):xt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Nu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return TE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=new Dn(ft.comparator);function Gi(){return $R}const VE=new Dn(ft.comparator);function af(...n){let e=VE;for(const t of n)e=e.insert(t.key,t);return e}function UE(n){let e=VE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ma(){return mf()}function jE(){return mf()}function mf(){return new wc(n=>n.toString(),(n,e)=>n.isEqual(e))}const GR=new Dn(ft.comparator),KR=new Pn(ft.comparator);function Wt(...n){let e=KR;for(const t of n)e=e.add(t);return e}const YR=new Pn(jt);function l2(){return YR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(e)?"-0":e}}function qE(n){return{integerValue:""+n}}function zE(n,e){return _E(e)?qE(e):h2(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp{constructor(){this._=void 0}}function XR(n,e,t){return n instanceof Ql?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Vp(s)&&(s=o2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof pu?HE(n,e):n instanceof mu?$E(n,e):function(i,s){const a=WE(i,s),o=vy(a)+vy(i.Pe);return Wg(a)&&Wg(i.Pe)?qE(o):h2(i.serializer,o)}(n,e)}function JR(n,e,t){return n instanceof pu?HE(n,e):n instanceof mu?$E(n,e):t}function WE(n,e){return n instanceof Zl?function(r){return Wg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Ql extends jp{}class pu extends jp{constructor(e){super(),this.elements=e}}function HE(n,e){const t=GE(e);for(const r of n.elements)t.some(i=>Ta(i,r))||t.push(r);return{arrayValue:{values:t}}}class mu extends jp{constructor(e){super(),this.elements=e}}function $E(n,e){let t=GE(e);for(const r of n.elements)t=t.filter(i=>!Ta(i,r));return{arrayValue:{values:t}}}class Zl extends jp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function vy(n){return qn(n.integerValue||n.doubleValue)}function GE(n){return Vf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.field=e,this.transform=t}}function QR(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof pu&&i instanceof pu||r instanceof mu&&i instanceof mu?Yl(r.elements,i.elements,Ta):r instanceof Zl&&i instanceof Zl?Ta(r.Pe,i.Pe):r instanceof Ql&&i instanceof Ql}(n.transform,e.transform)}class ZR{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function k0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class qp{}function KE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new vh(n.key,Wn.none()):new gh(n.key,n.data,Wn.none());{const t=n.data,r=Jr.empty();let i=new Pn(zn.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new uo(n.key,r,new $i(i.toArray()),Wn.none())}}function e6(n,e,t){n instanceof gh?function(i,s,a){const o=i.value.clone(),c=yy(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,e,t):n instanceof uo?function(i,s,a){if(!k0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=yy(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(YE(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function gf(n,e,t,r){return n instanceof gh?function(s,a,o,c){if(!k0(s.precondition,a))return o;const u=s.value.clone(),l=wy(s.fieldTransforms,c,a);return u.setAll(l),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof uo?function(s,a,o,c){if(!k0(s.precondition,a))return o;const u=wy(s.fieldTransforms,c,a),l=a.data;return l.setAll(YE(s)),l.setAll(u),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,a,o){return k0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,e,t)}function t6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=WE(r.transform,i||null);s!=null&&(t===null&&(t=Jr.empty()),t.set(r.field,s))}return t||null}function _y(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Yl(r,i,(s,a)=>QR(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class gh extends qp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uo extends qp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function YE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function yy(n,e,t){const r=new Map;bt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,JR(a,o,t[i]))}return r}function wy(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,XR(s,a,e))}return r}class vh extends qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class f2 extends qp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&e6(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jE();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const c=KE(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Yl(this.mutations,e.mutations,(t,r)=>_y(t,r))&&Yl(this.baseMutations,e.baseMutations,(t,r)=>_y(t,r))}}class p2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length);let i=function(){return GR}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new p2(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wr,sn;function XE(n){switch(n){default:return xt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function JE(n){if(n===void 0)return fr("GRPC error has no .code"),Le.UNKNOWN;switch(n){case wr.OK:return Le.OK;case wr.CANCELLED:return Le.CANCELLED;case wr.UNKNOWN:return Le.UNKNOWN;case wr.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case wr.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case wr.INTERNAL:return Le.INTERNAL;case wr.UNAVAILABLE:return Le.UNAVAILABLE;case wr.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case wr.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case wr.NOT_FOUND:return Le.NOT_FOUND;case wr.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case wr.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case wr.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case wr.ABORTED:return Le.ABORTED;case wr.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case wr.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case wr.DATA_LOSS:return Le.DATA_LOSS;default:return xt()}}(sn=wr||(wr={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new iu([4294967295,4294967295],0);function xy(n){const e=QE().encode(n),t=new iE;return t.update(e),new Uint8Array(t.digest())}function Ey(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new iu([t,r],0),new iu([i,s],0)]}class g2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new of(`Invalid padding: ${t}`);if(r<0)throw new of(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new of(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new of(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=iu.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(iu.fromNumber(r)));return i.compare(r6)===1&&(i=new iu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=xy(e),[r,i]=Ey(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new g2(s,i,t);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const t=xy(e),[r,i]=Ey(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class of extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new gd(Pt.min(),i,new Dn(jt),Gi(),Wt())}}class vd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vd(r,t,Wt(),Wt(),Wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class ZE{constructor(e,t){this.targetId=e,this.me=t}}class eT{constructor(e,t,r=ir.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ty{constructor(){this.fe=0,this.ge=Ay(),this.pe=ir.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wt(),t=Wt(),r=Wt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xt()}}),new vd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Ay()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class i6{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gi(),this.qe=by(),this.Qe=new Dn(jt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if($0(s))if(r===0){const a=new ft(s.path);this.Ue(t,a,Bn.newNoDocument(a,Pt.min()))}else bt(r===1);else{const a=this.Ye(t);if(a!==r){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=ic(r).toUint8Array()}catch(c){if(c instanceof bE)return Ea("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new g2(a,i,s)}catch(c){return Ea(c instanceof of?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&$0(o.target)){const c=new ft(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Bn.newNoDocument(c,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=Wt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new gd(e,t,this.Qe,this.ke,r);return this.ke=Gi(),this.qe=by(),this.Qe=new Dn(jt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ty,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pn(jt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ty),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function by(){return new Dn(ft.comparator)}function Ay(){return new Dn(ft.comparator)}const s6={asc:"ASCENDING",desc:"DESCENDING"},a6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},o6={and:"AND",or:"OR"};class c6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Yg(n,e){return n.useProto3Json||hd(e)?e:{value:e}}function eh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function u6(n,e){return eh(n,e.toTimestamp())}function dr(n){return bt(!!n),Pt.fromTimestamp(function(t){const r=no(t);return new Hn(r.seconds,r.nanos)}(n))}function v2(n,e){return Xg(n,e).canonicalString()}function Xg(n,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function nT(n){const e=Qt.fromString(n);return bt(fT(e)),e}function jf(n,e){return v2(n.databaseId,e.path)}function _a(n,e){const t=nT(e);if(t.get(1)!==n.databaseId.projectId)throw new Xe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Xe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ft(sT(t))}function rT(n,e){return v2(n.databaseId,e)}function iT(n){const e=nT(n);return e.length===4?Qt.emptyPath():sT(e)}function Jg(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function sT(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Iy(n,e,t){return{name:jf(n,e),fields:t.value.mapValue.fields}}function aT(n,e,t){const r=_a(n,e.name),i=dr(e.updateTime),s=e.createTime?dr(e.createTime):Pt.min(),a=new Jr({mapValue:{fields:e.fields}}),o=Bn.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function l6(n,e){return"found"in e?function(r,i){bt(!!i.found),i.found.name,i.found.updateTime;const s=_a(r,i.found.name),a=dr(i.found.updateTime),o=i.found.createTime?dr(i.found.createTime):Pt.min(),c=new Jr({mapValue:{fields:i.found.fields}});return Bn.newFoundDocument(s,a,o,c)}(n,e):"missing"in e?function(r,i){bt(!!i.missing),bt(!!i.readTime);const s=_a(r,i.missing),a=dr(i.readTime);return Bn.newNoDocument(s,a)}(n,e):xt()}function h6(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(bt(l===void 0||typeof l=="string"),ir.fromBase64String(l||"")):(bt(l===void 0||l instanceof Buffer||l instanceof Uint8Array),ir.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const l=u.code===void 0?Le.UNKNOWN:JE(u.code);return new Xe(l,u.message||"")}(a);t=new eT(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=_a(n,r.document.name),s=dr(r.document.updateTime),a=r.document.createTime?dr(r.document.createTime):Pt.min(),o=new Jr({mapValue:{fields:r.document.fields}}),c=Bn.newFoundDocument(i,s,a,o),u=r.targetIds||[],l=r.removedTargetIds||[];t=new C0(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=_a(n,r.document),s=r.readTime?dr(r.readTime):Pt.min(),a=Bn.newNoDocument(i,s),o=r.removedTargetIds||[];t=new C0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=_a(n,r.document),s=r.removedTargetIds||[];t=new C0([],s,i,null)}else{if(!("filter"in e))return xt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new n6(i,s),o=r.targetId;t=new ZE(o,a)}}return t}function qf(n,e){let t;if(e instanceof gh)t={update:Iy(n,e.key,e.value)};else if(e instanceof vh)t={delete:jf(n,e.key)};else if(e instanceof uo)t={update:Iy(n,e.key,e.data),updateMask:v6(e.fieldMask)};else{if(!(e instanceof f2))return xt();t={verify:jf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof Ql)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof pu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof mu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Zl)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw xt()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:u6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt()}(n,e.precondition)),t}function Qg(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Wn.updateTime(dr(s.updateTime)):s.exists!==void 0?Wn.exists(s.exists):Wn.none()}(e.currentDocument):Wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let c=null;if("setToServerValue"in o)bt(o.setToServerValue==="REQUEST_TIME"),c=new Ql;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];c=new pu(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];c=new mu(l)}else"increment"in o?c=new Zl(a,o.increment):xt();const u=zn.fromServerFormat(o.fieldPath);return new md(u,c)}(n,i)):[];if(e.update){e.update.name;const i=_a(n,e.update.name),s=new Jr({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new $i(u.map(l=>zn.fromServerFormat(l)))}(e.updateMask);return new uo(i,s,a,t,r)}return new gh(i,s,t,r)}if(e.delete){const i=_a(n,e.delete);return new vh(i,t)}if(e.verify){const i=_a(n,e.verify);return new f2(i,t)}return xt()}function f6(n,e){return n&&n.length>0?(bt(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?dr(i.updateTime):dr(s);return a.isEqual(Pt.min())&&(a=dr(s)),new ZR(a,i.transformResults||[])}(t,e))):[]}function oT(n,e){return{documents:[rT(n,e.path)]}}function cT(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=rT(n,i);const s=function(u){if(u.length!==0)return hT(yn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(l=>function(g){return{field:wl(g.field),direction:p6(g.dir)}}(l))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=Yg(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function uT(n){let e=iT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(r===1);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=function(d){const g=lT(d);return g instanceof yn&&c2(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(d){return d.map(g=>function(x){return new Uf(xl(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(d){let g;return g=typeof d=="object"?d.value:d,hd(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(d){const g=!!d.before,p=d.values||[];return new oc(p,g)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const g=!d.before,p=d.values||[];return new oc(p,g)}(t.endAt)),FE(e,i,a,s,o,"F",c,u)}function d6(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function lT(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=xl(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=xl(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=xl(t.unaryFilter.field);return Zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=xl(t.unaryFilter.field);return Zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(n):n.fieldFilter!==void 0?function(t){return Zt.create(xl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yn.create(t.compositeFilter.filters.map(r=>lT(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt()}}(t.compositeFilter.op))}(n):xt()}function p6(n){return s6[n]}function m6(n){return a6[n]}function g6(n){return o6[n]}function wl(n){return{fieldPath:n.canonicalString()}}function xl(n){return zn.fromServerFormat(n.fieldPath)}function hT(n){return n instanceof Zt?function(t){if(t.op==="=="){if(uy(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NAN"}};if(cy(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(uy(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NAN"}};if(cy(t.value))return{unaryFilter:{field:wl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(t.field),op:m6(t.op),value:t.value}}}(n):n instanceof yn?function(t){const r=t.getFilters().map(i=>hT(i));return r.length===1?r[0]:{compositeFilter:{op:g6(t.op),filters:r}}}(n):xt()}function v6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function fT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,r,i,s=Pt.min(),a=Pt.min(),o=ir.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e){this.ct=e}}function _6(n,e){let t;if(e.document)t=aT(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ft.fromSegments(e.noDocument.path),i=vu(e.noDocument.readTime);t=Bn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const r=ft.fromSegments(e.unknownDocument.path),i=vu(e.unknownDocument.version);t=Bn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Hn(i[0],i[1]);return Pt.fromTimestamp(s)}(e.readTime)),t}function Sy(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Y0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:jf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:eh(s,a.version.toTimestamp()),createTime:eh(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:gu(e.version)};else{if(!e.isUnknownDocument())return xt();r.unknownDocument={path:t.path.toArray(),version:gu(e.version)}}return r}function Y0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function gu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vu(n){const e=new Hn(n.seconds,n.nanoseconds);return Pt.fromTimestamp(e)}function $c(n,e){const t=(e.baseMutations||[]).map(s=>Qg(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>Qg(n.ct,s)),i=Hn.fromMillis(e.localWriteTimeMs);return new d2(e.batchId,i,t,r)}function cf(n){const e=vu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?vu(n.lastLimboFreeSnapshotVersion):Pt.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return bt(s.documents.length===1),Ni(mh(iT(s.documents[0])))}(n.query):function(s){return Ni(uT(s))}(n.query),new Ka(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ir.fromBase64String(n.resumeToken))}function pT(n,e){const t=gu(e.snapshotVersion),r=gu(e.lastLimboFreeSnapshotVersion);let i;i=$0(e.target)?oT(n.ct,e.target):cT(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:du(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function _2(n){const e=uT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?K0(e,e.limit,"L"):e}function Jm(n,e){return new m2(e.largestBatchId,Qg(n.ct,e.overlayMutation))}function Py(n,e){const t=e.path.lastSegment();return[n,Pi(e.path.popLast()),t]}function Ny(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:gu(r.readTime),documentKey:Pi(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y6{getBundleMetadata(e,t){return ky(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:vu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return ky(e).put(function(i){return{bundleId:i.id,createTime:gu(dr(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Cy(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:_2(s.bundledQuery),readTime:vu(s.readTime)}}(r)})}saveNamedQuery(e,t){return Cy(e).put(function(i){return{name:i.name,readTime:gu(dr(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function ky(n){return kr(n,"bundles")}function Cy(n){return kr(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new zp(e,r)}getOverlay(e,t){return Gh(e).get(Py(this.userId,t)).next(r=>r?Jm(this.serializer,r):null)}getOverlays(e,t){const r=ma();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const o=new m2(t,a);i.push(this.ht(e,o))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Pi(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Gh(e).j("collectionPathOverlayIndex",o))}),Se.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ma(),s=Pi(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const c of o){const u=Jm(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ma();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gh(e).J({index:"collectionGroupOverlayIndex",range:o},(c,u,l)=>{const d=Jm(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):l.done()}).next(()=>s)}ht(e,t){return Gh(e).put(function(i,s,a){const[o,c,u]=Py(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:qf(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Gh(n){return kr(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w6{Pt(e){return kr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?ir.fromUint8Array(r):ir.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(qn(e.integerValue));else if("doubleValue"in e){const r=qn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Of(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=no(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ic(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?AE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Up(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",o=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(qn(o)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ft.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Gc.vt=new Gc;function x6(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Ry(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=x6(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class E6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=Ry(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=Ry(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class T6{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class b6{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Kh{constructor(){this.jt=new E6,this.Ht=new T6(this.jt),this.Jt=new b6(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Kc(this.indexId,this.documentKey,this.arrayValue,r)}}function jo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Ly(n.arrayValue,e.arrayValue),t!==0?t:(t=Ly(n.directionalValue,e.directionalValue),t!==0?t:ft.comparator(n.documentKey,e.documentKey)))}function Ly(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e){this.Xt=new Pn((t,r)=>zn.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(bt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=jg(e);if(t!==void 0&&!this.sn(t))return!1;const r=zc(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[s];if(!this.on(o,c)||!this._n(this.en[a++],c))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Pn(zn.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new I0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new I0(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new I0(r.field,r.dir==="asc"?0:1)));return new H0(H0.UNKNOWN_ID,this.collectionId,t,Ff.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(n){var e,t;if(bt(n instanceof Zt||n instanceof yn),n instanceof Zt){if(n instanceof DE){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Zt.create(n.field,"==",s)))||[];return yn.create(i,"or")}return n}const r=n.filters.map(i=>mT(i));return yn.create(r,n.op)}function A6(n){if(n.getFilters().length===0)return[];const e=t1(mT(n));return bt(gT(e)),Zg(e)||e1(e)?[e]:e.getFilters()}function Zg(n){return n instanceof Zt}function e1(n){return n instanceof yn&&c2(n)}function gT(n){return Zg(n)||e1(n)||function(t){if(t instanceof yn&&Hg(t)){for(const r of t.getFilters())if(!Zg(r)&&!e1(r))return!1;return!0}return!1}(n)}function t1(n){if(bt(n instanceof Zt||n instanceof yn),n instanceof Zt)return n;if(n.filters.length===1)return t1(n.filters[0]);const e=n.filters.map(r=>t1(r));let t=yn.create(e,n.op);return t=X0(t),gT(t)?t:(bt(t instanceof yn),bt(Jl(t)),bt(t.filters.length>1),t.filters.reduce((r,i)=>y2(r,i)))}function y2(n,e){let t;return bt(n instanceof Zt||n instanceof yn),bt(e instanceof Zt||e instanceof yn),t=n instanceof Zt?e instanceof Zt?function(i,s){return yn.create([i,s],"and")}(n,e):Fy(n,e):e instanceof Zt?Fy(e,n):function(i,s){if(bt(i.filters.length>0&&s.filters.length>0),Jl(i)&&Jl(s))return CE(i,s.getFilters());const a=Hg(i)?i:s,o=Hg(i)?s:i,c=a.filters.map(u=>y2(u,o));return yn.create(c,"or")}(n,e),X0(t)}function Fy(n,e){if(Jl(e))return CE(e,n.getFilters());{const t=e.filters.map(r=>y2(n,r));return yn.create(t,"or")}}function X0(n){if(bt(n instanceof Zt||n instanceof yn),n instanceof Zt)return n;const e=n.getFilters();if(e.length===1)return X0(e[0]);if(NE(n))return n;const t=e.map(i=>X0(i)),r=[];return t.forEach(i=>{i instanceof Zt?r.push(i):i instanceof yn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:yn.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(){this.un=new w2}addToCollectionParentIndex(e,t){return this.un.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve(ms.min())}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class w2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(Qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Uint8Array(0);class S6{constructor(e,t){this.databaseId=t,this.cn=new w2,this.ln=new wc(r=>du(r),(r,i)=>fd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Pi(i)};return Oy(e).put(s)}return Se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[fE(t),""],!1,!0);return Oy(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(pa(a.parent))}return r})}addFieldIndex(e,t){const r=Yh(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=ll(e);return s.next(o=>{a.put(Ny(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Yh(e),i=ll(e),s=ul(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Yh(e),r=ul(e),i=ll(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Se.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new Dy(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=ul(e);let i=!0;const s=new Map;return Se.forEach(this.hn(t),a=>this.Pn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=Wt();const o=[];return Se.forEach(s,(c,u)=>{Je("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${du(t)}`);const l=function(M,K){const se=jg(K);if(se===void 0)return null;for(const oe of G0(M,se.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null}(u,c),d=function(M,K){const se=new Map;for(const oe of zc(K))for(const N of G0(M,oe.fieldPath))switch(N.op){case"==":case"in":se.set(oe.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return se.set(oe.fieldPath.canonicalString(),N.value),Array.from(se.values())}return null}(u,c),g=function(M,K){const se=[];let oe=!0;for(const N of zc(K)){const A=N.kind===0?py(M,N.fieldPath,M.startAt):my(M,N.fieldPath,M.startAt);se.push(A.value),oe&&(oe=A.inclusive)}return new oc(se,oe)}(u,c),p=function(M,K){const se=[];let oe=!0;for(const N of zc(K)){const A=N.kind===0?my(M,N.fieldPath,M.endAt):py(M,N.fieldPath,M.endAt);se.push(A.value),oe&&(oe=A.inclusive)}return new oc(se,oe)}(u,c),x=this.In(c,u,g),_=this.In(c,u,p),E=this.Tn(c,u,d),P=this.En(c.indexId,l,x,g.inclusive,_,p.inclusive,E);return Se.forEach(P,L=>r.G(L,t.limit).next(M=>{M.forEach(K=>{const se=ft.fromSegments(K.documentKey);a.has(se)||(a=a.add(se),o.push(se))})}))}).next(()=>o)}return Se.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=A6(yn.create(e.filters,"and")).map(r=>Gg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,o){const c=(t!=null?t.length:1)*Math.max(r.length,s.length),u=c/(t!=null?t.length:1),l=[];for(let d=0;d<c;++d){const g=t?this.dn(t[d/u]):i0,p=this.An(e,g,r[d%u],i),x=this.Rn(e,g,s[d%u],a),_=o.map(E=>this.An(e,g,E,!0));l.push(...this.createRange(p,x,_))}return l}An(e,t,r,i){const s=new Kc(e,ft.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Kc(e,ft.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Dy(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)r.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return Se.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(c){let u=new Pn(zn.comparator),l=!1;for(const d of c.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?l=!0:u=u.add(g.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Kh;for(const i of zc(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);Gc.vt.It(s,a)}return r.zt()}dn(e){const t=new Kh;return Gc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Kh;return Gc.vt.It(fu(this.databaseId,t),r.Yt(function(s){const a=zc(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Kh);let s=0;for(const a of zc(e)){const o=r[s++];for(const c of i)if(this.fn(t,a.fieldPath)&&Vf(o))i=this.gn(i,a,o);else{const u=c.Yt(a.kind);Gc.vt.It(o,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const c=new Kh;c.seed(o.zt()),Gc.vt.It(a,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Zt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Yh(e),i=ll(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return Se.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(l,d){const g=d?new Ff(d.sequenceNumber,new ms(vu(d.readTime),new ft(pa(d.documentKey)),d.largestBatchId)):Ff.empty(),p=l.fields.map(([x,_])=>new I0(zn.fromServerFormat(x),_));return new H0(l.indexId,l.collectionGroup,p,g)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Yh(e),s=ll(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>Se.forEach(o,c=>s.put(Ny(c.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return Se.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Se.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Se.forEach(o,c=>this.wn(e,i,c).next(u=>{const l=this.Sn(s,c);return u.isEqual(l)?Se.resolve():this.bn(e,s,c,u,l)}))))})}Dn(e,t,r,i){return ul(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return ul(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=ul(e);let s=new Pn(jo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,o)=>{s=s.add(new Kc(r.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Pn(jo);const i=this.Vn(t,e);if(i==null)return r;const s=jg(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Vf(a))for(const o of a.arrayValue.values||[])r=r.add(new Kc(t.indexId,e.key,this.dn(o),i))}else r=r.add(new Kc(t.indexId,e.key,i0,i));return r}bn(e,t,r,i,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,u,l,d,g){const p=c.getIterator(),x=u.getIterator();let _=cl(p),E=cl(x);for(;_||E;){let P=!1,L=!1;if(_&&E){const M=l(_,E);M<0?L=!0:M>0&&(P=!0)}else _!=null?L=!0:P=!0;P?(d(E),E=cl(x)):L?(g(_),_=cl(p)):(_=cl(p),E=cl(x))}}(i,s,jo,o=>{a.push(this.Dn(e,t,r,o))},o=>{a.push(this.vn(e,t,r,o))}),Se.waitFor(a)}yn(e){let t=1;return ll(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,o)=>jo(a,o)).filter((a,o,c)=>!o||jo(a,c[o-1])!==0);const i=[];i.push(e);for(const a of r){const o=jo(a,e),c=jo(a,t);if(o===0)i[0]=e.Zt();else if(o>0&&c<0)i.push(a),i.push(a.Zt());else if(c>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,i0,[]],c=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,i0,[]];s.push(IDBKeyRange.bound(o,c))}return s}Cn(e,t){return jo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(My)}getMinOffset(e,t){return Se.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||xt())).next(My)}}function Oy(n){return kr(n,"collectionParents")}function ul(n){return kr(n,"indexEntries")}function Yh(n){return kr(n,"indexConfiguration")}function ll(n){return kr(n,"indexState")}function My(n){bt(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;i2(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ms(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const c=r.J({range:a},(l,d,g)=>(o++,g.delete()));s.push(c.next(()=>{bt(o===1)}));const u=[];for(const l of t.mutations){const d=yE(e,l.key.path,t.batchId);s.push(i.delete(d)),u.push(l.key)}return Se.waitFor(s).next(()=>u)}function J0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xt();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class Wp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){bt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Wp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qo(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=El(e),a=qo(e);return a.add({}).next(o=>{bt(typeof o=="number");const c=new d2(o,t,r,i),u=function(p,x,_){const E=_.baseMutations.map(L=>qf(p.ct,L)),P=_.mutations.map(L=>qf(p.ct,L));return{userId:x,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:E,mutations:P}}(this.serializer,this.userId,c),l=[];let d=new Pn((g,p)=>jt(g.canonicalString(),p.canonicalString()));for(const g of i){const p=yE(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),l.push(a.put(u)),l.push(s.put(p,dR))}return d.forEach(g=>{l.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[o]=c.keys()}),Se.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return qo(e).get(t).next(r=>r?(bt(r.userId===this.userId),$c(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?Se.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return qo(e).J({index:"userMutationsIndex",range:i},(a,o,c)=>{o.userId===this.userId&&(bt(o.batchId>=r),s=$c(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return qo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qo(e).U("userMutationsIndex",t).next(r=>r.map(i=>$c(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=S0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return El(e).J({range:i},(a,o,c)=>{const[u,l,d]=a,g=pa(l);if(u===this.userId&&t.path.isEqual(g))return qo(e).get(d).next(p=>{if(!p)throw xt();bt(p.userId===this.userId),s.push($c(this.serializer,p))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(jt);const i=[];return t.forEach(s=>{const a=S0(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=El(e).J({range:o},(u,l,d)=>{const[g,p,x]=u,_=pa(p);g===this.userId&&s.path.isEqual(_)?r=r.add(x):d.done()});i.push(c)}),Se.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=S0(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Pn(jt);return El(e).J({range:a},(c,u,l)=>{const[d,g,p]=c,x=pa(g);d===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(p)):l.done()}).next(()=>this.xn(e,o))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(qo(e).get(s).next(a=>{if(a===null)throw xt();bt(a.userId===this.userId),r.push($c(this.serializer,a))}))}),Se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return vT(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return El(e).J({range:r},(s,a,o)=>{if(s[0]===this.userId){const c=pa(s[1]);i.push(c)}else o.done()}).next(()=>{bt(i.length===0)})})}containsKey(e,t){return _T(e,this.userId,t)}Nn(e){return yT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function _T(n,e,t){const r=S0(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return El(n).J({range:s,H:!0},(o,c,u)=>{const[l,d,g]=o;l===e&&d===i&&(a=!0),u.done()}).next(()=>a)}function qo(n){return kr(n,"mutations")}function El(n){return kr(n,"documentMutations")}function yT(n){return kr(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _u(0)}static kn(){return new _u(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new _u(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Pt.fromTimestamp(new Hn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>hl(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return hl(e).J((a,o)=>{const c=cf(o);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return hl(e).J((r,i)=>{const s=cf(i);t(s)})}qn(e){return Vy(e).get("targetGlobalKey").next(t=>(bt(t!==null),t))}Qn(e,t){return Vy(e).put("targetGlobalKey",t)}Kn(e,t){return hl(e).put(pT(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=du(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return hl(e).J({range:i,index:"queryTargetsIndex"},(a,o,c)=>{const u=cf(o);fd(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Go(e);return t.forEach(a=>{const o=Pi(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))}),Se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Go(e);return Se.forEach(t,s=>{const a=Pi(s.path);return Se.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Go(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Go(e);let s=Wt();return i.J({range:r,H:!0},(a,o,c)=>{const u=pa(a[1]),l=new ft(u);s=s.add(l)}).next(()=>s)}containsKey(e,t){const r=Pi(t.path),i=IDBKeyRange.bound([r],[fE(r)],!1,!0);let s=0;return Go(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,o],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return hl(e).get(t).next(r=>r?cf(r):null)}}function hl(n){return kr(n,"targets")}function Vy(n){return kr(n,"targetGlobal")}function Go(n){return kr(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy([n,e],[t,r]){const i=jt(n,t);return i===0?jt(e,r):i}class N6{constructor(e){this.Un=e,this.buffer=new Pn(Uy),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();Uy(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class k6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yc(t)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await _c(t)}await this.Hn(3e5)})}}class C6{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(Hi.oe);const r=new N6(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(By)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),By):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,o,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),_l()<=Yt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-l}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function R6(n,e){return new C6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L6{constructor(e,t){this.db=e,this.garbageCollector=R6(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return s0(e,r)}removeReference(e,t,r){return s0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return s0(e,t)}nr(e,t){return function(i,s){let a=!1;return yT(i).Y(o=>_T(i,o,s).next(c=>(c&&(a=!0),Se.resolve(!c)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,o)=>{if(o<=t){const c=this.nr(e,a).next(u=>{if(!u)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Pt.min()),Go(e).delete(function(d){return[0,Pi(d.path)]}(a))))});i.push(c)}}).next(()=>Se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return s0(e,t)}tr(e,t){const r=Go(e);let i,s=Hi.oe;return r.J({index:"documentTargetsIndex"},([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==Hi.oe&&t(new ft(pa(i)),s),s=u,i=c):s=Hi.oe}).next(()=>{s!==Hi.oe&&t(new ft(pa(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function s0(n,e){return Go(n).put(function(r,i){return{targetId:0,path:Pi(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(){this.changes=new wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Bn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return jc(e).put(r)}removeEntry(e,t,r){return jc(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Y0(a),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=Bn.newInvalidDocument(t);return jc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xh(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:Bn.newInvalidDocument(t)};return jc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xh(t))},(i,s)=>{r={document:this.ir(t,s),size:J0(s)}}).next(()=>r)}getEntries(e,t){let r=Gi();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=Gi(),i=new Dn(ft.comparator);return this._r(e,t,(s,a)=>{const o=this.ir(s,a);r=r.insert(s,o),i=i.insert(s,J0(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return Se.resolve();let i=new Pn(zy);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Xh(i.first()),Xh(i.last())),a=i.getIterator();let o=a.getNext();return jc(e).J({index:"documentKeyIndex",range:s},(c,u,l)=>{const d=ft.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&zy(o,d)<0;)r(o,null),o=a.getNext();o&&o.isEqual(d)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?l.$(Xh(o)):l.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Y0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jc(e).U(IDBKeyRange.bound(o,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let l=Gi();for(const d of u){const g=this.ir(ft.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(pd(t,g)||i.has(g.key))&&(l=l.insert(g.key,g))}return l})}getAllFromCollectionGroup(e,t,r,i){let s=Gi();const a=qy(t,r),o=qy(t,ms.max());return jc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(c,u,l)=>{const d=this.ir(ft.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new F6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return jy(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}rr(e,t){return jy(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=_6(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pt.min())))return r}return Bn.newInvalidDocument(e)}}function xT(n){return new D6(n)}class F6 extends wT{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new wc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((s,a)=>jt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=Sy(this.cr.serializer,a);i=i.add(s.path.popLast());const u=J0(c);r+=u-o.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=o.size,this.trackRemovals){const c=Sy(this.cr.serializer,a.convertToNoDocument(Pt.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function jy(n){return kr(n,"remoteDocumentGlobal")}function jc(n){return kr(n,"remoteDocumentsV14")}function Xh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function qy(n,e){const t=e.documentKey.path.toArray();return[n,Y0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function zy(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=jt(t[s],r[s]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&gf(r.mutation,i,$i.empty(),Hn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=ma();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=af();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=ma();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,r,i){let s=Gi();const a=mf(),o=function(){return mf()}();return t.forEach((c,u)=>{const l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof uo)?s=s.insert(u.key,u):l!==void 0?(a.set(u.key,l.mutation.getFieldMask()),gf(l.mutation,u,l.mutation.getFieldMask(),Hn.now())):a.set(u.key,$i.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>a.set(u,l)),t.forEach((u,l)=>{var d;return o.set(u,new O6(l,(d=a.get(u))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,t){const r=mf();let i=new Dn((a,o)=>a-o),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let l=r.get(c)||$i.empty();l=o.applyToLocalView(u,l),r.set(c,l);const d=(i.get(o.batchId)||Wt()).add(c);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,l=c.value,d=jE();l.forEach(g=>{if(!s.has(g)){const p=KE(t.get(g),r.get(g));p!==null&&d.set(g,p),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Se.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return ft.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):u2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Se.resolve(ma());let o=-1,c=s;return a.next(u=>Se.forEach(u,(l,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(l)?Se.resolve():this.remoteDocumentCache.getEntry(e,l).next(g=>{c=c.insert(l,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Wt())).next(l=>({batchId:o,changes:UE(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ft(t)).next(r=>{let i=af();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=af();return this.indexManager.getCollectionParents(e,s).next(o=>Se.forEach(o,c=>{const u=function(d,g){return new co(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,g)=>{a=a.insert(d,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,u)=>{const l=u.getKey();a.get(l)===null&&(a=a.insert(l,Bn.newInvalidDocument(l)))});let o=af();return a.forEach((c,u)=>{const l=s.get(c);l!==void 0&&gf(l.mutation,u,$i.empty(),Hn.now()),pd(t,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Se.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dr(i.createTime)}}(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:_2(i.bundledQuery),readTime:dr(i.readTime)}}(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(){this.overlays=new Dn(ft.comparator),this.Ir=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ma();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=ma(),s=t.length+1,a=new ft(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Dn((u,l)=>u-l);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=ma(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const o=ma(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>o.set(u,l)),!(o.size()>=i)););return Se.resolve(o)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new m2(t,r));let s=this.Ir.get(t);s===void 0&&(s=Wt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(){this.sessionToken=ir.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(){this.Tr=new Pn(Dr.Er),this.dr=new Pn(Dr.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Dr(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Dr(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ft(new Qt([])),r=new Dr(t,e),i=new Dr(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ft(new Qt([])),r=new Dr(t,e),i=new Dr(t,e+1);let s=Wt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Dr(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Dr{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ft.comparator(e.key,t.key)||jt(e.wr,t.wr)}static Ar(e,t){return jt(e.wr,t.wr)||ft.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pn(Dr.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new d2(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new Dr(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Se.resolve(a)}lookupMutationBatch(e,t){return Se.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return Se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Dr(t,0),i=new Dr(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(jt);return t.forEach(i=>{const s=new Dr(i,0),a=new Dr(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Se.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ft.isDocumentKey(s)||(s=s.child(""));const a=new Dr(new ft(s),0);let o=new Pn(jt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),Se.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Se.forEach(t.mutations,i=>{const s=new Dr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Dr(t,0),i=this.br.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.Mr=e,this.docs=function(){return new Dn(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():Bn.newInvalidDocument(t))}getEntries(e,t){let r=Gi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Bn.newInvalidDocument(i))}),Se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Gi();const a=t.path,o=new ft(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||i2(pE(l),r)<=0||(i.has(l.key)||pd(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return Se.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xt()}Or(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new q6(this)}getSize(e){return Se.resolve(this.size)}}class q6 extends wT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.persistence=e,this.Nr=new wc(t=>du(t),fd),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new x2,this.targetCount=0,this.kr=_u.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new _u(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Kn(t),Se.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Se.waitFor(s).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Hi(0),this.Kr=!1,this.Kr=!0,this.$r=new V6,this.referenceDelegate=e(this),this.Ur=new z6(this),this.indexManager=new I6,this.remoteDocumentCache=function(i){return new j6(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new dT(t),this.Gr=new M6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new B6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new U6(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);const i=new W6(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Se.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class W6 extends gE{constructor(e){super(),this.currentSequenceNumber=e}}class Hp{constructor(e){this.persistence=e,this.Jr=new x2,this.Yr=null}static Zr(e){return new Hp(e)}get Xr(){if(this.Yr)return this.Yr;throw xt()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,r=>{const i=ft.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Pt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Se.or([()=>Se.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Bp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ry,{unique:!0}),c.createObjectStore("documentMutations")}(e),Wy(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=Se.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Wy(e)),a=a.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(c,u){return u.store("mutations").U().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ry,{unique:!0});const d=u.store("mutations"),g=l.map(p=>d.put(p));return Se.waitFor(g)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:AR});u.createIndex("collectionPathOverlayIndex",IR,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",SR,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:pR});u.createIndex("documentKeyIndex",mR),u.createIndex("collectionGroupIndex",gR)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:xR}).createIndex("sequenceNumberIndex",ER,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:TR}).createIndex("documentKeyIndex",bR,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=J0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Se.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(o=>Se.forEach(o,c=>{bt(c.userId===s.userId);const u=$c(this.serializer,c);return vT(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,o)=>{const c=new Qt(a),u=function(d){return[0,Pi(d)]}(c);s.push(t.get(u).next(l=>l?Se.resolve():(d=>t.put({targetId:0,path:Pi(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Se.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:wR});const r=t.store("collectionParents"),i=new w2,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return r.put({collectionId:o,parent:Pi(c)})}};return t.store("remoteDocuments").J({H:!0},(a,o)=>{const c=new Qt(a);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,o,c],u)=>{const l=pa(o);return s(l.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=cf(i),a=pT(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const o=t.store("remoteDocumentsV14"),c=function(d){return d.document?new ft(Qt.fromString(d.document.name).popFirst(5)):d.noDocument?ft.fromSegments(d.noDocument.path):d.unknownDocument?ft.fromSegments(d.unknownDocument.path):xt()}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))}).next(()=>Se.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=xT(this.serializer),s=new TT(Hp.Zr,this.serializer.ct);return r.U().next(a=>{const o=new Map;return a.forEach(c=>{var u;let l=(u=o.get(c.userId))!==null&&u!==void 0?u:Wt();$c(this.serializer,c).keys().forEach(d=>l=l.add(d)),o.set(c.userId,l)}),Se.forEach(o,(c,u)=>{const l=new Fr(u),d=zp.lt(this.serializer,l),g=s.getIndexManager(l),p=Wp.lt(l,this.serializer,g,s.referenceDelegate);return new ET(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new qg(t,Hi.oe),c).next()})})}}function Wy(n){n.createObjectStore("targetDocuments",{keyPath:_R}).createIndex("documentTargetsIndex",yR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vR,{unique:!0}),n.createObjectStore("targetGlobal")}const Qm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class E2{constructor(e,t,r,i,s,a,o,c,u,l,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=o,this.ci=u,this.li=l,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!E2.D())throw new Xe(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new L6(this,i),this.Ai=t+"main",this.serializer=new dT(c),this.Ri=new va(this.Ai,this.hi,new H6(this.serializer)),this.$r=new w6,this.Ur=new P6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=xT(this.serializer),this.Gr=new y6,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,l===!1&&fr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(Le.FAILED_PRECONDITION,Qm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Hi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>a0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(yc(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Jh(e).get("owner").next(t=>Se.resolve(this.vi(t)))}Ci(e){return a0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=kr(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return Se.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Se.resolve(!0):Jh(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Xe(Le.FAILED_PRECONDITION,Qm);return!1}}return!(!this.networkEnabled||!this.inForeground)||a0(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new qg(e,Hi.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>a0(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Wp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new S6(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return zp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Je("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?kR:c===16?NR:c===15?a2:c===14?EE:c===13?xE:c===12?PR:c===11?wE:void xt()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,o=>(a=new qg(o,this.Qr?this.Qr.next():Hi.oe),t==="readwrite-primary"?this.wi(a).next(c=>!!c||this.Si(a)).next(c=>{if(!c)throw fr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Xe(Le.FAILED_PRECONDITION,mE);return r(a)}).next(c=>this.Di(a).next(()=>c)):this.Ki(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Jh(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Xe(Le.FAILED_PRECONDITION,Qm)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jh(e).put("owner",t)}static D(){return va.D()}bi(e){const t=Jh(e);return t.get("owner").next(r=>this.vi(r)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Se.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(fr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;G5()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return fr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){fr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jh(n){return kr(n,"owner")}function a0(n){return kr(n,"clientMetadata")}function T2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Wt(),i=Wt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new b2(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return G5()?8:vE(Kn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new $6;return this.Xi(e,t,a).next(o=>{if(s.result=o,this.zi)return this.es(e,t,a,o.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(_l()<=Yt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",yl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(_l()<=Yt.DEBUG&&Je("QueryEngine","Query:",yl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(_l()<=Yt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",yl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ni(t))):Se.resolve())}Yi(e,t){if(gy(t))return Se.resolve(null);let r=Ni(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=K0(t,null,"F"),r=Ni(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Wt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(t,o);return this.ns(t,u,a,c.readTime)?this.Yi(e,K0(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return gy(t)||i.isEqual(Pt.min())?Se.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?Se.resolve(null):(_l()<=Yt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),yl(t)),this.rs(e,a,t,dE(i,-1)).next(o=>o))})}ts(e,t){let r=new Pn(BE(e));return t.forEach((i,s)=>{pd(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return _l()<=Yt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",yl(t)),this.Ji.getDocumentsMatchingQuery(e,t,ms.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Dn(jt),this._s=new wc(s=>du(s),fd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ET(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function AT(n,e,t,r){return new G6(n,e,t,r)}async function IT(n,e){const t=gt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=Wt();for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function K6(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,l){const d=u.batch,g=d.keys();let p=Se.resolve();return g.forEach(x=>{p=p.next(()=>l.getEntry(c,x)).next(_=>{const E=u.docVersions.get(x);bt(E!==null),_.version.compareTo(E)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Wt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function ST(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function Y6(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const o=[];e.targetChanges.forEach((l,d)=>{const g=i.get(d);if(!g)return;o.push(t.Ur.removeMatchingKeys(s,l.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,l.addedDocuments,d)));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(ir.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(d,p),function(_,E,P){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,p,l)&&o.push(t.Ur.updateTargetData(s,p))});let c=Gi(),u=Wt();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),o.push(PT(s,a,e.documentUpdates).next(l=>{c=l.Ps,u=l.Is})),!r.isEqual(Pt.min())){const l=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(l)}return Se.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function PT(n,e,t){let r=Wt(),i=Wt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Gi();return t.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Pt.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Je("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function X6(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function th(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,Se.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Ka(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function nh(n,e,t){const r=gt(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!yc(a))throw a;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Q0(n,e,t){const r=gt(n);let i=Pt.min(),s=Wt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,l){const d=gt(c),g=d._s.get(l);return g!==void 0?Se.resolve(d.os.get(g)):d.Ur.getTargetData(u,l)}(r,a,Ni(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:Pt.min(),t?s:Wt())).next(o=>(CT(r,ME(e),o),{documents:o,Ts:s})))}function NT(n,e){const t=gt(n),r=gt(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(a=>a?a.target:null))}function kT(n,e){const t=gt(n),r=t.us.get(e)||Pt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,dE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CT(t,e,i),i))}function CT(n,e,t){let r=n.us.get(e)||Pt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}async function J6(n,e,t,r){const i=gt(n);let s=Wt(),a=Gi();for(const u of t){const l=e.Es(u.metadata.name);u.document&&(s=s.add(l));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),a=a.insert(l,d)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),c=await th(i,function(l){return Ni(mh(Qt.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>PT(u,o,a).next(l=>(o.apply(u),l)).next(l=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.Ps,l.Is)).next(()=>l.Ps)))}async function Q6(n,e,t=Wt()){const r=await th(n,Ni(_2(e.bundledQuery))),i=gt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=dr(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=r.withResumeToken(ir.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function Hy(n,e){return`firestore_clients_${n}_${e}`}function $y(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Zm(n,e){return`firestore_targets_${n}_${e}`}class Z0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Xe(i.error.code,i.error.message))),a?new Z0(e,t,i.state,s):(fr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Xe(r.error.code,r.error.message))),s?new vf(e,r.state,i):(fr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ep{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=l2();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=_E(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new ep(e,s):(fr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class A2{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new A2(t.clientId,t.onlineState):(fr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class n1{constructor(){this.activeTargetIds=l2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class eg{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Dn(jt),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Hy(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new n1),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(Hy(this.persistenceKey,r));if(i){const s=ep.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Zm(this.persistenceKey,e));if(i){const s=vf.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Zm(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Je("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void fr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let a=Hi.oe;if(s!=null)try{const o=JSON.parse(s);bt(typeof o=="number"),a=o}catch(o){fr("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(t.newValue);r!==Hi.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new Z0(this.currentUser,e,t,r),s=$y(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=$y(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=Zm(this.persistenceKey,e),s=new vf(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return ep.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return Z0.Rs(new Fr(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return vf.Rs(i,t)}Ls(e){return A2.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.io(a,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=l2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class RT{constructor(){this.so=new n1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new n1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o0=null;function tg(){return o0===null?o0=function(){return 268435456+Math.round(2147483648*Math.random())}():o0++,"0x"+o0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class nL extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const o=tg(),c=this.xo(t,r.toUriEncodedString());Je("RestConnection",`Sending RPC '${t}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(t,c,u,i).then(l=>(Je("RestConnection",`Received RPC '${t}' ${o}: `,l),l),l=>{throw Ea("RestConnection",`RPC '${t}' ${o} failed with error: `,l,"url: ",c,"request:",i),l})}Lo(t,r,i,s,a,o){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ph}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=eL[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=tg();return new Promise((a,o)=>{const c=new sE;c.setWithCredentials(!0),c.listenOnce(aE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case A0.NO_ERROR:const l=c.getResponseJson();Je(oi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),a(l);break;case A0.TIMEOUT:Je(oi,`RPC '${e}' ${s} timed out`),o(new Xe(Le.DEADLINE_EXCEEDED,"Request time out"));break;case A0.HTTP_ERROR:const d=c.getStatus();if(Je(oi,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const p=g==null?void 0:g.error;if(p&&p.status&&p.message){const x=function(E){const P=E.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(P)>=0?P:Le.UNKNOWN}(p.status);o(new Xe(x,p.message))}else o(new Xe(Le.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new Xe(Le.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Je(oi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Je(oi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=tg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=uE(),o=cE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const l=s.join("");Je(oi,`Creating RPC '${e}' stream ${i}: ${l}`,c);const d=a.createWebChannel(l,c);let g=!1,p=!1;const x=new tL({Io:E=>{p?Je(oi,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Je(oi,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),Je(oi,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},To:()=>d.close()}),_=(E,P,L)=>{E.listen(P,M=>{try{L(M)}catch(K){setTimeout(()=>{throw K},0)}})};return _(d,sf.EventType.OPEN,()=>{p||(Je(oi,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),_(d,sf.EventType.CLOSE,()=>{p||(p=!0,Je(oi,`RPC '${e}' stream ${i} transport closed`),x.So())}),_(d,sf.EventType.ERROR,E=>{p||(p=!0,Ea(oi,`RPC '${e}' stream ${i} transport errored:`,E),x.So(new Xe(Le.UNAVAILABLE,"The operation could not be completed")))}),_(d,sf.EventType.MESSAGE,E=>{var P;if(!p){const L=E.data[0];bt(!!L);const M=L,K=M.error||((P=M[0])===null||P===void 0?void 0:P.error);if(K){Je(oi,`RPC '${e}' stream ${i} received error:`,K);const se=K.status;let oe=function(C){const B=wr[C];if(B!==void 0)return JE(B)}(se),N=K.message;oe===void 0&&(oe=Le.INTERNAL,N="Unknown error status: "+se+" with message "+K.message),p=!0,x.So(new Xe(oe,N)),d.close()}else Je(oi,`RPC '${e}' stream ${i} received:`,L),x.bo(L)}}),_(o,oE.STAT_EVENT,E=>{E.stat===Ug.PROXY?Je(oi,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Ug.NOPROXY&&Je(oi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LT(){return typeof window<"u"?window:null}function R0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(n){return new c6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,t,r,i,s,a,o,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new I2(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Le.RESOURCE_EXHAUSTED?(fr(t.toString()),fr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Xe(Le.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rL extends DT{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=h6(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?dr(a.readTime):Pt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=Jg(this.serializer),t.addTarget=function(s,a){let o;const c=a.target;if(o=$0(c)?{documents:oT(s,c)}:{query:cT(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=tT(s,a.resumeToken);const u=Yg(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=eh(s,a.snapshotVersion.toTimestamp());const u=Yg(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=d6(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=Jg(this.serializer),t.removeTarget=e,this.a_(t)}}class iL extends DT{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=f6(e.writeResults,e.commitTime),r=dr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=Jg(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>qf(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Xe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Xg(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xe(Le.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Xg(t,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xe(Le.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class aL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fr(t),this.D_=!1):Je("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{xc(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=gt(c);u.L_.add(4),await _h(u),u.q_.set("Unknown"),u.L_.delete(4),await yd(u)}(this))})}),this.q_=new aL(r,i)}}async function yd(n){if(xc(n))for(const e of n.B_)await e(!0)}async function _h(n){for(const e of n.B_)await e(!1)}function $p(n,e){const t=gt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),N2(t)?P2(t):wh(t).r_()&&S2(t,e))}function rh(n,e){const t=gt(n),r=wh(t);t.N_.delete(e),r.r_()&&FT(t,e),t.N_.size===0&&(r.r_()?r.o_():xc(t)&&t.q_.set("Unknown"))}function S2(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wh(n).A_(e)}function FT(n,e){n.Q_.xe(e),wh(n).R_(e)}function P2(n){n.Q_=new i6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),wh(n).start(),n.q_.v_()}function N2(n){return xc(n)&&!wh(n).n_()&&n.N_.size>0}function xc(n){return gt(n).L_.size===0}function OT(n){n.Q_=void 0}async function cL(n){n.q_.set("Online")}async function uL(n){n.N_.forEach((e,t)=>{S2(n,e)})}async function lL(n,e){OT(n),N2(n)?(n.q_.M_(e),P2(n)):n.q_.set("Unknown")}async function hL(n,e,t){if(n.q_.set("Online"),e instanceof eT&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(n,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tp(n,r)}else if(e instanceof C0?n.Q_.Ke(e):e instanceof ZE?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Pt.min()))try{const r=await ST(n.localStore);t.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=s.N_.get(u);l&&s.N_.set(u,l.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const l=s.N_.get(c);if(!l)return;s.N_.set(c,l.withResumeToken(ir.EMPTY_BYTE_STRING,l.snapshotVersion)),FT(s,c);const d=new Ka(l.target,c,u,l.sequenceNumber);S2(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),await tp(n,r)}}async function tp(n,e,t){if(!yc(e))throw e;n.L_.add(1),await _h(n),n.q_.set("Offline"),t||(t=()=>ST(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Je("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await yd(n)})}function MT(n,e){return e().catch(t=>tp(n,t,e))}async function yh(n){const e=gt(n),t=cc(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;fL(e);)try{const i=await X6(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,dL(e,i)}catch(i){await tp(e,i)}BT(e)&&VT(e)}function fL(n){return xc(n)&&n.O_.length<10}function dL(n,e){n.O_.push(e);const t=cc(n);t.r_()&&t.V_&&t.m_(e.mutations)}function BT(n){return xc(n)&&!cc(n).n_()&&n.O_.length>0}function VT(n){cc(n).start()}async function pL(n){cc(n).p_()}async function mL(n){const e=cc(n);for(const t of n.O_)e.m_(t.mutations)}async function gL(n,e,t){const r=n.O_.shift(),i=p2.from(r,e,t);await MT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await yh(n)}async function vL(n,e){e&&cc(n).V_&&await async function(r,i){if(function(a){return XE(a)&&a!==Le.ABORTED}(i.code)){const s=r.O_.shift();cc(r).s_(),await MT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yh(r)}}(n,e),BT(n)&&VT(n)}async function Ky(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=xc(t);t.L_.add(3),await _h(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yd(t)}async function r1(n,e){const t=gt(n);e?(t.L_.delete(2),await yd(t)):e||(t.L_.add(2),await _h(t),t.q_.set("Unknown"))}function wh(n){return n.K_||(n.K_=function(t,r,i){const s=gt(t);return s.w_(),new rL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:cL.bind(null,n),Ro:uL.bind(null,n),mo:lL.bind(null,n),d_:hL.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),N2(n)?P2(n):n.q_.set("Unknown")):(await n.K_.stop(),OT(n))})),n.K_}function cc(n){return n.U_||(n.U_=function(t,r,i){const s=gt(t);return s.w_(),new iL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:pL.bind(null,n),mo:vL.bind(null,n),f_:mL.bind(null,n),g_:gL.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await yh(n)):(await n.U_.stop(),n.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new k2(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xh(n,e){if(fr("AsyncQueue",`${e}: ${n}`),yc(n))return new Xe(Le.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ft.comparator(t.key,r.key):(t,r)=>ft.comparator(t.key,r.key),this.keyedMap=af(),this.sortedSet=new Dn(this.comparator)}static emptySet(e){return new Fl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Fl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yy{constructor(){this.W_=new Dn(ft.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ih{constructor(e,t,r,i,s,a,o,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new ih(e,t,Fl.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class yL{constructor(){this.queries=Xy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=gt(t),s=i.queries;i.queries=Xy(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(r)})})(this,new Xe(Le.ABORTED,"Firestore shutting down"))}}function Xy(){return new wc(n=>OE(n),dd)}async function C2(n,e){const t=gt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new _L,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=xh(a,`Initialization of query '${yl(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&L2(t)}async function R2(n,e){const t=gt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function wL(n,e){const t=gt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&L2(t)}function xL(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function L2(n){n.Y_.forEach(e=>{e.next()})}var i1,Jy;(Jy=i1||(i1={})).ea="default",Jy.Cache="cache";class D2{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ih(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ih.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==i1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qy{constructor(e){this.serializer=e}Es(e){return _a(this.serializer,e)}ds(e){return e.metadata.exists?aT(this.serializer,e.document,!1):Bn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dr(e)}}class TL{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=UT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Qt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new Qy(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(t.get(a)||Wt()).add(s);t.set(a,o)}}return t}async complete(){const e=await J6(this.localStore,new Qy(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await Q6(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function UT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.key=e}}class qT{constructor(e){this.key=e}}class zT{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wt(),this.mutatedKeys=Wt(),this.Aa=BE(e),this.Ra=new Fl(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new Yy,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const g=i.get(l),p=pd(this.query,d)?d:null,x=!!g&&this.mutatedKeys.has(g.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;g&&p?g.data.isEqual(p.data)?x!==_&&(r.track({type:3,doc:p}),E=!0):this.ga(g,p)||(r.track({type:2,doc:p}),E=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),E=!0):g&&!p&&(r.track({type:1,doc:g}),E=!0,(c||u)&&(o=!0)),E&&(p?(a=a.add(p),s=_?s.add(l):s.delete(l)):(a=a.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((l,d)=>function(p,x){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return _(p)-_(x)}(l.type,d.type)||this.Aa(l.doc,d.doc)),this.pa(r),i=i!=null&&i;const o=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new ih(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Yy,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Wt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new qT(r))}),this.da.forEach(r=>{e.has(r)||t.push(new jT(r))}),t}ba(e){this.Ta=e.Ts,this.da=Wt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ih.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class bL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class AL{constructor(e){this.key=e,this.va=!1}}class IL{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new wc(o=>OE(o),dd),this.Ma=new Map,this.xa=new Set,this.Oa=new Dn(ft.comparator),this.Na=new Map,this.La=new x2,this.Ba={},this.ka=new Map,this.qa=_u.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SL(n,e,t=!0){const r=Gp(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await WT(r,e,t,!0),i}async function PL(n,e){const t=Gp(n);await WT(t,e,!0,!1)}async function WT(n,e,t,r){const i=await th(n.localStore,Ni(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await F2(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&$p(n.remoteStore,i),o}async function F2(n,e,t,r,i){n.Ka=(d,g,p)=>async function(_,E,P,L){let M=E.view.ma(P);M.ns&&(M=await Q0(_.localStore,E.query,!1).then(({documents:N})=>E.view.ma(N,M)));const K=L&&L.targetChanges.get(E.targetId),se=L&&L.targetMismatches.get(E.targetId)!=null,oe=E.view.applyChanges(M,_.isPrimaryClient,K,se);return s1(_,E.targetId,oe.wa),oe.snapshot}(n,d,g,p);const s=await Q0(n.localStore,e,!0),a=new zT(e,s.Ts),o=a.ma(s.documents),c=vd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,c);s1(n,t,u.wa);const l=new bL(e,t,a);return n.Fa.set(e,l),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function NL(n,e,t){const r=gt(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!dd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await nh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&rh(r.remoteStore,i.targetId),sh(r,i.targetId)}).catch(_c)):(sh(r,i.targetId),await nh(r.localStore,i.targetId,!0))}async function kL(n,e){const t=gt(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),rh(t.remoteStore,r.targetId))}async function CL(n,e,t){const r=V2(n);try{const i=await function(a,o){const c=gt(a),u=Hn.now(),l=o.reduce((p,x)=>p.add(x.key),Wt());let d,g;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=Gi(),_=Wt();return c.cs.getEntries(p,l).next(E=>{x=E,x.forEach((P,L)=>{L.isValidDocument()||(_=_.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,x)).next(E=>{d=E;const P=[];for(const L of o){const M=t6(L,d.get(L.key).overlayedDocument);M!=null&&P.push(new uo(L.key,M,SE(M.value.mapValue),Wn.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,P,o)}).next(E=>{g=E;const P=E.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(p,E.batchId,P)})}).then(()=>({batchId:g.batchId,changes:UE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Dn(jt)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,t),await lo(r,i.changes),await yh(r.remoteStore)}catch(i){const s=xh(i,"Failed to persist write");t.reject(s)}}async function HT(n,e){const t=gt(n);try{const r=await Y6(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?bt(a.va):i.removedDocuments.size>0&&(bt(a.va),a.va=!1))}),await lo(t,r,e)}catch(r){await _c(r)}}function Zy(n,e,t){const r=gt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=gt(a);c.onlineState=o;let u=!1;c.queries.forEach((l,d)=>{for(const g of d.j_)g.Z_(o)&&(u=!0)}),u&&L2(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function RL(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Dn(ft.comparator);a=a.insert(s,Bn.newNoDocument(s,Pt.min()));const o=Wt().add(s),c=new gd(Pt.min(),new Map,new Dn(jt),a,o);await HT(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),B2(r)}else await nh(r.localStore,e,!1).then(()=>sh(r,e,t)).catch(_c)}async function LL(n,e){const t=gt(n),r=e.batch.batchId;try{const i=await K6(t.localStore,e);M2(t,r,null),O2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await lo(t,i)}catch(i){await _c(i)}}async function DL(n,e,t){const r=gt(n);try{const i=await function(a,o){const c=gt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,o).next(d=>(bt(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);M2(r,e,t),O2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await lo(r,i)}catch(i){await _c(i)}}async function FL(n,e){const t=gt(n);xc(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const o=gt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=xh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function O2(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function M2(n,e,t){const r=gt(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function sh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||$T(n,r)})}function $T(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(rh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),B2(n))}function s1(n,e,t){for(const r of t)r instanceof jT?(n.La.addReference(r.key,e),OL(n,r)):r instanceof qT?(Je("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||$T(n,r.key)):xt()}function OL(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Je("SyncEngine","New document in limbo: "+t),n.xa.add(r),B2(n))}function B2(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ft(Qt.fromString(e)),r=n.qa.next();n.Na.set(r,new AL(t)),n.Oa=n.Oa.insert(t,r),$p(n.remoteStore,new Ka(Ni(mh(t.path)),r,"TargetPurposeLimboResolution",Hi.oe))}}async function lo(n,e,t){const r=gt(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,c)=>{a.push(r.Ka(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){const d=u?!u.fromCache:(l=t==null?void 0:t.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);const d=b2.Wi(c.targetId,u);s.push(d)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const l=gt(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Se.forEach(u,g=>Se.forEach(g.$i,p=>l.persistence.referenceDelegate.addReference(d,g.targetId,p)).next(()=>Se.forEach(g.Ui,p=>l.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))}catch(d){if(!yc(d))throw d;Je("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=l.os.get(g),x=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(x);l.os=l.os.insert(g,_)}}}(r.localStore,s))}async function ML(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=await IT(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new Xe(Le.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lo(t,r.hs)}}function BL(n,e){const t=gt(n),r=t.Na.get(e);if(r&&r.va)return Wt().add(r.key);{let i=Wt();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const o=t.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function VL(n,e){const t=gt(n),r=await Q0(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&s1(t,e.targetId,i.wa),i}async function UL(n,e){const t=gt(n);return kT(t.localStore,e).then(r=>lo(t,r))}async function jL(n,e,t,r){const i=gt(n),s=await function(o,c){const u=gt(o),l=gt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Mn(d,c).next(g=>g?u.localDocuments.getDocuments(d,g):Se.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await yh(i.remoteStore):t==="acknowledged"||t==="rejected"?(M2(i,e,r||null),O2(i,e),function(o,c){gt(gt(o).mutationQueue).On(c)}(i.localStore,e)):xt(),await lo(i,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}async function qL(n,e){const t=gt(n);if(Gp(t),V2(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await ew(t,r.toArray());t.Qa=!0,await r1(t.remoteStore,!0);for(const s of i)$p(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(sh(t,a),nh(t.localStore,a,!0))),rh(t.remoteStore,a)}),await i,await ew(t,r),function(a){const o=gt(a);o.Na.forEach((c,u)=>{rh(o.remoteStore,u)}),o.La.pr(),o.Na=new Map,o.Oa=new Dn(ft.comparator)}(t),t.Qa=!1,await r1(t.remoteStore,!1)}}async function ew(n,e,t){const r=gt(n),i=[],s=[];for(const a of e){let o;const c=r.Ma.get(a);if(c&&c.length!==0){o=await th(r.localStore,Ni(c[0]));for(const u of c){const l=r.Fa.get(u),d=await VL(r,l);d.snapshot&&s.push(d.snapshot)}}else{const u=await NT(r.localStore,a);o=await th(r.localStore,u),await F2(r,GT(u),a,!1,o.resumeToken)}i.push(o)}return r.Ca.d_(s),i}function GT(n){return FE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zL(n){return function(t){return gt(gt(t).persistence).Qi()}(gt(n).localStore)}async function WL(n,e,t,r){const i=gt(n);if(i.Qa)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await kT(i.localStore,ME(s[0])),o=gd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",ir.EMPTY_BYTE_STRING);await lo(i,a,o);break}case"rejected":await nh(i.localStore,e,!0),sh(i,e,r);break;default:xt()}}async function HL(n,e,t){const r=Gp(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Je("SyncEngine","Adding an already active target "+i);continue}const s=await NT(r.localStore,i),a=await th(r.localStore,s);await F2(r,GT(s),a.targetId,!1,a.resumeToken),$p(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await nh(r.localStore,i,!1).then(()=>{rh(r.remoteStore,i),sh(r,i)}).catch(_c)}}function Gp(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=BL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RL.bind(null,e),e.Ca.d_=wL.bind(null,e.eventManager),e.Ca.$a=xL.bind(null,e.eventManager),e}function V2(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DL.bind(null,e),e}function $L(n,e,t){const r=gt(n);(async function(s,a,o){try{const c=await a.getMetadata();if(await function(p,x){const _=gt(p),E=dr(x.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",P=>_.Gr.getBundleMetadata(P,x.id)).then(P=>!!P&&P.createTime.compareTo(E)>=0)}(s.localStore,c))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress(UT(c));const u=new TL(c,s.localStore,a.serializer);let l=await a.Ua();for(;l;){const g=await u.la(l);g&&o._updateProgress(g),l=await a.Ua()}const d=await u.complete();return await lo(s,d.Ia,void 0),await function(p,x){const _=gt(p);return _.persistence.runTransaction("Save bundle","readwrite",E=>_.Gr.saveBundleMetadata(E,x))}(s.localStore,c),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(c){return Ea("SyncEngine",`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return AT(this.persistence,new bT,e.initialUser,this.serializer)}Ga(e){return new TT(Hp.Zr,this.serializer)}Wa(e){return new RT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class KT extends zf{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await V2(this.Ja.syncEngine),await yh(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return AT(this.persistence,new bT,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new k6(r,e.asyncQueue,t)}Ha(e,t){const r=new hR(t,this.persistence);return new lR(e.asyncQueue,r)}Ga(e){const t=T2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new E2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,LT(),R0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new RT}}class GL extends KT{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof eg&&(this.sharedClientState.syncEngine={no:jL.bind(null,t),ro:WL.bind(null,t),io:HL.bind(null,t),Qi:zL.bind(null,t),eo:UL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await qL(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=LT();if(!eg.D(t))throw new Xe(Le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=T2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new eg(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Zy(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=ML.bind(null,this.syncEngine),await r1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new yL}()}createDatastore(e){const t=_d(e.databaseInfo.databaseId),r=function(s){return new nL(s)}(e.databaseInfo);return function(s,a,o,c){return new sL(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,o){return new oL(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>Zy(this.syncEngine,t,0),function(){return Gy.D()?new Gy:new Z6}())}createSyncEngine(e,t){return function(i,s,a,o,c,u,l){const d=new IL(i,s,a,o,c,u);return l&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=gt(i);Je("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await _h(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wf.provider={build:()=>new Wf};function tw(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ti,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new EL(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Xe(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const a=gt(i),o={documents:s.map(d=>jf(a.serializer,d))},c=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Qt.emptyPath(),o,s.length),u=new Map;c.forEach(d=>{const g=l6(a.serializer,d);u.set(g.key.toString(),g)});const l=[];return s.forEach(d=>{const g=u.get(d.toString());bt(!!g),l.push(g)}),l}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=ft.fromPath(r);this.mutations.push(new f2(i,this.precondition(i)))}),await async function(r,i){const s=gt(r),a={writes:i.map(o=>qf(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,Qt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt();t=Pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Xe(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pt.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new Xe(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new I2(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new YL(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!hd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!XE(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Fr.UNAUTHENTICATED,this.clientId=hE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Je("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Je("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=xh(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ng(n,e){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await IT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function nw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await U2(n);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>Ky(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>Ky(e.remoteStore,i)),n._onlineComponents=e}async function U2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await ng(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ea("Error using user provided cache. Falling back to memory cache: "+t),await ng(n,new zf)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await ng(n,new zf);return n._offlineComponents}async function Yp(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await nw(n,n._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await nw(n,new Wf))),n._onlineComponents}function YT(n){return U2(n).then(e=>e.persistence)}function j2(n){return U2(n).then(e=>e.localStore)}function XT(n){return Yp(n).then(e=>e.remoteStore)}function q2(n){return Yp(n).then(e=>e.syncEngine)}function QL(n){return Yp(n).then(e=>e.datastore)}async function ah(n){const e=await Yp(n),t=e.eventManager;return t.onListen=SL.bind(null,e.syncEngine),t.onUnlisten=NL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=PL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=kL.bind(null,e.syncEngine),t}function ZL(n){return n.asyncQueue.enqueue(async()=>{const e=await YT(n),t=await XT(n);return e.setNetworkEnabled(!0),function(i){const s=gt(i);return s.L_.delete(0),yd(s)}(t)})}function eD(n){return n.asyncQueue.enqueue(async()=>{const e=await YT(n),t=await XT(n);return e.setNetworkEnabled(!1),async function(i){const s=gt(i);s.L_.add(0),await _h(s),s.q_.set("Offline")}(t)})}function tD(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await function(u,l){const d=gt(u);return d.persistence.runTransaction("read document","readonly",g=>d.localDocuments.getDocument(g,l))}(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Xe(Le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=xh(o,`Failed to get document '${s} from cache`);a.reject(c)}}(await j2(n),e,t)),t.promise}function JT(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new Kp({next:g=>{l.Za(),a.enqueueAndForget(()=>R2(s,d));const p=g.docs.has(o);!p&&g.fromCache?u.reject(new Xe(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&c&&c.source==="server"?u.reject(new Xe(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new D2(mh(o.path),l,{includeMetadataChanges:!0,_a:!0});return C2(s,d)}(await ah(n),n.asyncQueue,e,t,r)),r.promise}function nD(n,e){const t=new ti;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await Q0(i,s,!0),c=new zT(s,o.Ts),u=c.ma(o.documents),l=c.applyChanges(u,!1);a.resolve(l.snapshot)}catch(o){const c=xh(o,`Failed to execute query '${s} against cache`);a.reject(c)}}(await j2(n),e,t)),t.promise}function QT(n,e,t={}){const r=new ti;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new Kp({next:g=>{l.Za(),a.enqueueAndForget(()=>R2(s,d)),g.fromCache&&c.source==="server"?u.reject(new Xe(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new D2(o,l,{includeMetadataChanges:!0,_a:!0});return C2(s,d)}(await ah(n),n.asyncQueue,e,t,r)),r.promise}function rD(n,e){const t=new Kp(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){gt(i).Y_.add(s),s.next()}(await ah(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){gt(i).Y_.delete(s)}(await ah(n),t))}}function iD(n,e,t,r){const i=function(a,o){let c;return c=typeof a=="string"?QE().encode(a):a,function(l,d){return new KL(l,d)}(function(l,d){if(l instanceof Uint8Array)return tw(l,d);if(l instanceof ArrayBuffer)return tw(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(t,_d(e));n.asyncQueue.enqueueAndForget(async()=>{$L(await q2(n),i,r)})}function sD(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=gt(r);return s.persistence.runTransaction("Get named query","readonly",a=>s.Gr.getNamedQuery(a,i))}(await j2(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(n,e,t){if(!t)throw new Xe(Le.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function eb(n,e,t,r){if(e===!0&&r===!0)throw new Xe(Le.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function iw(n){if(!ft.isDocumentKey(n))throw new Xe(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function sw(n){if(ft.isDocumentKey(n))throw new Xe(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xp(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Xe(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xp(n);throw new Xe(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function tb(n,e){if(e<=0)throw new Xe(Le.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Xe(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}eb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ZT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new aw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new aw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ZC;switch(r.type){case"firstParty":return new rR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xe(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=rw.get(t);r&&(Je("ComponentProvider","Removing Datastore"),rw.delete(t),r.terminate())}(this),Promise.resolve()}}function aD(n,e,t,r={}){var i;const s=(n=cn(n,wd))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,c;if(typeof r.mockUserToken=="string")o=r.mockUserToken,c=Fr.MOCK_USER;else{o=g4(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Xe(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Fr(u)}n._authCredentials=new eR(new lE(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri=class nb{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new nb(this.firestore,e,this._query)}},Gn=class rb{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rb(this.firestore,e,this._key)}},ec=class ib extends Ri{constructor(e,t,r){super(e,t,mh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Gn(this.firestore,null,new ft(e))}withConverter(e){return new ib(this.firestore,e,this._path)}};function sb(n,e,...t){if(n=St(n),z2("collection","path",e),n instanceof wd){const r=Qt.fromString(e,...t);return sw(r),new ec(n,null,r)}{if(!(n instanceof Gn||n instanceof ec))throw new Xe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return sw(r),new ec(n.firestore,null,r)}}function oD(n,e){if(n=cn(n,wd),z2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ri(n,null,function(r){return new co(Qt.emptyPath(),r)}(e))}function np(n,e,...t){if(n=St(n),arguments.length===1&&(e=hE.newId()),z2("doc","path",e),n instanceof wd){const r=Qt.fromString(e,...t);return iw(r),new Gn(n,null,new ft(r))}{if(!(n instanceof Gn||n instanceof ec))throw new Xe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return iw(r),new Gn(n.firestore,n instanceof ec?n.converter:null,new ft(r))}}function ab(n,e){return n=St(n),e=St(e),(n instanceof Gn||n instanceof ec)&&(e instanceof Gn||e instanceof ec)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function ob(n,e){return n=St(n),e=St(e),n instanceof Ri&&e instanceof Ri&&n.firestore===e.firestore&&dd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new I2(this,"async_queue_retry"),this.Vu=()=>{const r=R0();r&&Je("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=R0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=R0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ti;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw fr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=k2.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function a1(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class cD{constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uD=-1;let mr=class extends wd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new ow,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ow(e),this._firestoreClient=void 0,await e}}};function gi(n){if(n._terminated)throw new Xe(Le.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||cb(n),n._firestoreClient}function cb(n){var e,t,r;const i=n._freezeSettings(),s=function(o,c,u,l){return new LR(o,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ZT(l.experimentalLongPollingOptions),l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new JL(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(n._componentsProvider))}function lD(n,e){Ea("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return ub(n,Wf.provider,{build:r=>new KT(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function hD(n){Ea("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();ub(n,Wf.provider,{build:t=>new GL(t,e.cacheSizeBytes)})}function ub(n,e,t){if((n=cn(n,mr))._firestoreClient||n._terminated)throw new Xe(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Xe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},cb(n)}function fD(n){if(n._initialized&&!n._terminated)throw new Xe(Le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!va.D())return Promise.resolve();const i=r+"main";await va.delete(i)}(T2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function dD(n){return function(t){const r=new ti;return t.asyncQueue.enqueueAndForget(async()=>FL(await q2(t),r)),r.promise}(gi(n=cn(n,mr)))}function pD(n){return ZL(gi(n=cn(n,mr)))}function mD(n){return eD(gi(n=cn(n,mr)))}function gD(n,e){const t=gi(n=cn(n,mr)),r=new cD;return iD(t,n._databaseId,e,r),r}function vD(n,e){return sD(gi(n=cn(n,mr)),e).then(t=>t?new Ri(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(ir.fromBase64String(e))}catch(t){throw new Xe(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(ir.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xe(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new zn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xe(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xe(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=/^__.*__$/;class yD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new gh(e,this.data,t,this.fieldTransforms)}}class lb{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class Qp{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(hb(this.Cu)&&_D.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class wD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||_d(e)}Qu(e,t,r,i=!1){return new Qp({Cu:e,methodName:t,qu:r,path:zn.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cu(n){const e=n._freezeSettings(),t=_d(n._databaseId);return new wD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Zp(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);J2("Data must be an object, but it was:",a,r);const o=pb(r,a);let c,u;if(s.merge)c=new $i(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const g=o1(e,d,t);if(!a.contains(g))throw new Xe(Le.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);gb(l,g)||l.push(g)}c=new $i(l),u=a.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=a.fieldTransforms;return new yD(new Jr(o),c,u)}class xd extends ku{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}function fb(n,e,t){return new Qp({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class H2 extends ku{_toFieldTransform(e){return new md(e.path,new Ql)}isEqual(e){return e instanceof H2}}class $2 extends ku{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=fb(this,e,!0),r=this.Ku.map(s=>Ru(s,t)),i=new pu(r);return new md(e.path,i)}isEqual(e){return e instanceof $2&&If(this.Ku,e.Ku)}}class G2 extends ku{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=fb(this,e,!0),r=this.Ku.map(s=>Ru(s,t)),i=new mu(r);return new md(e.path,i)}isEqual(e){return e instanceof G2&&If(this.Ku,e.Ku)}}class K2 extends ku{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Zl(e.serializer,zE(e.serializer,this.$u));return new md(e.path,t)}isEqual(e){return e instanceof K2&&this.$u===e.$u}}function Y2(n,e,t,r){const i=n.Qu(1,e,t);J2("Data must be an object, but it was:",i,r);const s=[],a=Jr.empty();Nu(r,(c,u)=>{const l=Q2(e,c,t);u=St(u);const d=i.Nu(l);if(u instanceof xd)s.push(l);else{const g=Ru(u,d);g!=null&&(s.push(l),a.set(l,g))}});const o=new $i(s);return new lb(a,o,i.fieldTransforms)}function X2(n,e,t,r,i,s){const a=n.Qu(1,e,t),o=[o1(e,r,t)],c=[i];if(s.length%2!=0)throw new Xe(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(o1(e,s[g])),c.push(s[g+1]);const u=[],l=Jr.empty();for(let g=o.length-1;g>=0;--g)if(!gb(u,o[g])){const p=o[g];let x=c[g];x=St(x);const _=a.Nu(p);if(x instanceof xd)u.push(p);else{const E=Ru(x,_);E!=null&&(u.push(p),l.set(p,E))}}const d=new $i(u);return new lb(l,d,a.fieldTransforms)}function db(n,e,t,r=!1){return Ru(t,n.Qu(r?4:3,e))}function Ru(n,e){if(mb(n=St(n)))return J2("Unsupported field value:",e,n),pb(n,e);if(n instanceof ku)return function(r,i){if(!hb(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let c=Ru(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return zE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Hn.fromDate(r);return{timestampValue:eh(i.serializer,s)}}if(r instanceof Hn){const s=new Hn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:eh(i.serializer,s)}}if(r instanceof Jp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ba)return{bytesValue:tT(i.serializer,r._byteString)};if(r instanceof Gn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:v2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof W2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return h2(o.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Xp(r)}`)}(n,e)}function pb(n,e){const t={};return TE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Nu(n,(r,i)=>{const s=Ru(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function mb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Hn||n instanceof Jp||n instanceof ba||n instanceof Gn||n instanceof ku||n instanceof W2)}function J2(n,e,t){if(!mb(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=Xp(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function o1(n,e,t){if((e=St(e))instanceof uc)return e._internalPath;if(typeof e=="string")return Q2(n,e);throw rp("Field path arguments must be of type string or ",n,!1,void 0,t)}const xD=new RegExp("[~\\*/\\[\\]]");function Q2(n,e,t){if(e.search(xD)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function rp(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Xe(Le.INVALID_ARGUMENT,o+n+c)}function gb(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Gn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ED(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(em("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class ED extends Hf{data(){return super.data()}}function em(n,e){return typeof e=="string"?Q2(n,e):e instanceof uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Xe(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Z2{}class Ed extends Z2{}function zo(n,e,...t){let r=[];e instanceof Z2&&r.push(e),r=r.concat(t),function(s){const a=s.filter(c=>c instanceof ev).length,o=s.filter(c=>c instanceof tm).length;if(a>1||a>0&&o>0)throw new Xe(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class tm extends Ed{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new tm(e,t,r)}_apply(e){const t=this._parse(e);return yb(e._query,t),new Ri(e.firestore,e.converter,Kg(e._query,t))}_parse(e){const t=Cu(e.firestore);return function(s,a,o,c,u,l,d){let g;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Xe(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){uw(d,l);const p=[];for(const x of d)p.push(cw(c,s,x));g={arrayValue:{values:p}}}else g=cw(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||uw(d,l),g=db(o,a,d,l==="in"||l==="not-in");return Zt.create(u,l,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function TD(n,e,t){const r=e,i=em("where",n);return tm._create(i,r,t)}class ev extends Z2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new ev(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)yb(a,c),a=Kg(a,c)}(e._query,t),new Ri(e.firestore,e.converter,Kg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tv extends Ed{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new tv(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uf(s,a)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new co(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function bD(n,e="asc"){const t=e,r=em("orderBy",n);return tv._create(r,t)}class nm extends Ed{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new nm(e,t,r)}_apply(e){return new Ri(e.firestore,e.converter,K0(e._query,this._limit,this._limitType))}}function AD(n){return tb("limit",n),nm._create("limit",n,"F")}function ID(n){return tb("limitToLast",n),nm._create("limitToLast",n,"L")}class rm extends Ed{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new rm(e,t,r)}_apply(e){const t=_b(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(i,s){return new co(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function SD(...n){return rm._create("startAt",n,!0)}function PD(...n){return rm._create("startAfter",n,!1)}class im extends Ed{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new im(e,t,r)}_apply(e){const t=_b(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(i,s){return new co(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function ND(...n){return im._create("endBefore",n,!1)}function kD(...n){return im._create("endAt",n,!0)}function _b(n,e,t,r){if(t[0]=St(t[0]),t[0]instanceof Hf)return function(s,a,o,c,u){if(!c)throw new Xe(Le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const d of Dl(s))if(d.field.isKeyField())l.push(fu(a,c.key));else{const g=c.data.field(d.field);if(Vp(g))throw new Xe(Le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const p=d.field.canonicalString();throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}l.push(g)}return new oc(l,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Cu(n.firestore);return function(a,o,c,u,l,d){const g=a.explicitOrderBy;if(l.length>g.length)throw new Xe(Le.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let x=0;x<l.length;x++){const _=l[x];if(g[x].field.isKeyField()){if(typeof _!="string")throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!u2(a)&&_.indexOf("/")!==-1)throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const E=a.path.child(Qt.fromString(_));if(!ft.isDocumentKey(E))throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const P=new ft(E);p.push(fu(o,P))}else{const E=db(c,u,_);p.push(E)}}return new oc(p,d)}(n._query,n.firestore._databaseId,i,e,t,r)}}function cw(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!u2(e)&&t.indexOf("/")!==-1)throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!ft.isDocumentKey(r))throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fu(n,new ft(r))}if(t instanceof Gn)return fu(n,t._key);throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xp(t)}.`)}function uw(n,e){if(!Array.isArray(n)||n.length===0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yb(n,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Xe(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xe(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class nv{convertValue(e,t="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Nu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>qn(a.doubleValue));return new W2(s)}convertGeoPoint(e){return new Jp(qn(e.latitude),qn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=o2(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Mf(e));default:return null}}convertTimestamp(e){const t=no(e);return new Hn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);bt(fT(r));const i=new sc(r.get(1),r.get(3)),s=new ft(r.popFirst(5));return i.isEqual(t)||fr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class CD extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let ro=class extends Hf{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(em("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},_f=class extends ro{data(e={}){return super.data(e)}},lc=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zc(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new _f(this._firestore,this._userDataWriter,r.key,r,new Zc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xe(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new _f(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Zc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new _f(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Zc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),l=a.indexOf(o.doc.key)),{type:RD(o.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function RD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}function wb(n,e){return n instanceof ro&&e instanceof ro?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof lc&&e instanceof lc&&n._firestore===e._firestore&&ob(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LD(n){n=cn(n,Gn);const e=cn(n.firestore,mr);return JT(gi(e),n._key).then(t=>rv(e,n,t))}class Lu extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Gn(this.firestore,null,t)}}function DD(n){n=cn(n,Gn);const e=cn(n.firestore,mr),t=gi(e),r=new Lu(e);return tD(t,n._key).then(i=>new ro(e,r,n._key,i,new Zc(i!==null&&i.hasLocalMutations,!0),n.converter))}function FD(n){n=cn(n,Gn);const e=cn(n.firestore,mr);return JT(gi(e),n._key,{source:"server"}).then(t=>rv(e,n,t))}function OD(n){n=cn(n,Ri);const e=cn(n.firestore,mr),t=gi(e),r=new Lu(e);return vb(n._query),QT(t,n._query).then(i=>new lc(e,r,n,i))}function MD(n){n=cn(n,Ri);const e=cn(n.firestore,mr),t=gi(e),r=new Lu(e);return nD(t,n._query).then(i=>new lc(e,r,n,i))}function BD(n){n=cn(n,Ri);const e=cn(n.firestore,mr),t=gi(e),r=new Lu(e);return QT(t,n._query,{source:"server"}).then(i=>new lc(e,r,n,i))}function lw(n,e,t){n=cn(n,Gn);const r=cn(n.firestore,mr),i=sm(n.converter,e,t);return Td(r,[Zp(Cu(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Wn.none())])}function hw(n,e,t,...r){n=cn(n,Gn);const i=cn(n.firestore,mr),s=Cu(i);let a;return a=typeof(e=St(e))=="string"||e instanceof uc?X2(s,"updateDoc",n._key,e,t,r):Y2(s,"updateDoc",n._key,e),Td(i,[a.toMutation(n._key,Wn.exists(!0))])}function VD(n){return Td(cn(n.firestore,mr),[new vh(n._key,Wn.none())])}function UD(n,e){const t=cn(n.firestore,mr),r=np(n),i=sm(n.converter,e);return Td(t,[Zp(Cu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}function xb(n,...e){var t,r,i;n=St(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||a1(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(a1(e[a])){const d=e[a];e[a]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[a+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(n instanceof Gn)u=cn(n.firestore,mr),l=mh(n._key.path),c={next:d=>{e[a]&&e[a](rv(u,n,d))},error:e[a+1],complete:e[a+2]};else{const d=cn(n,Ri);u=cn(d.firestore,mr),l=d._query;const g=new Lu(u);c={next:p=>{e[a]&&e[a](new lc(u,g,d,p))},error:e[a+1],complete:e[a+2]},vb(n._query)}return function(g,p,x,_){const E=new Kp(_),P=new D2(p,E,x);return g.asyncQueue.enqueueAndForget(async()=>C2(await ah(g),P)),()=>{E.Za(),g.asyncQueue.enqueueAndForget(async()=>R2(await ah(g),P))}}(gi(u),l,o,c)}function jD(n,e){return rD(gi(n=cn(n,mr)),a1(e)?e:{next:e})}function Td(n,e){return function(r,i){const s=new ti;return r.asyncQueue.enqueueAndForget(async()=>CL(await q2(r),i,s)),s.promise}(gi(n),e)}function rv(n,e,t){const r=t.docs.get(e._key),i=new Lu(n);return new ro(n,i,e._key,r,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zD=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cu(e)}set(e,t,r){this._verifyNotCommitted();const i=Ko(e,this._firestore),s=sm(i.converter,t,r),a=Zp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Ko(e,this._firestore);let a;return a=typeof(t=St(t))=="string"||t instanceof uc?X2(this._dataReader,"WriteBatch.update",s._key,t,r,i):Y2(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ko(e,this._firestore);return this._mutations=this._mutations.concat(new vh(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ko(n,e){if((n=St(n)).firestore!==e)throw new Xe(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WD=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Cu(t)}get(t){const r=Ko(t,this._firestore),i=new CD(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return xt();const a=s[0];if(a.isFoundDocument())return new Hf(this._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new Hf(this._firestore,i,r._key,null,r.converter);throw xt()})}set(t,r,i){const s=Ko(t,this._firestore),a=sm(s.converter,r,i),o=Zp(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(t,r,i,...s){const a=Ko(t,this._firestore);let o;return o=typeof(r=St(r))=="string"||r instanceof uc?X2(this._dataReader,"Transaction.update",a._key,r,i,s):Y2(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,o),this}delete(t){const r=Ko(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ko(e,this._firestore),r=new Lu(this._firestore);return super.get(e).then(i=>new ro(this._firestore,r,t._key,i._document,new Zc(!1,!1),t.converter))}};function HD(n,e,t){n=cn(n,mr);const r=Object.assign(Object.assign({},qD),t);return function(s){if(s.maxAttempts<1)throw new Xe(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,a,o){const c=new ti;return s.asyncQueue.enqueueAndForget(async()=>{const u=await QL(s);new XL(s.asyncQueue,u,o,a,c).au()}),c.promise}(gi(n),i=>e(new WD(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $D(){return new xd("deleteField")}function GD(){return new H2("serverTimestamp")}function KD(...n){return new $2("arrayUnion",n)}function YD(...n){return new G2("arrayRemove",n)}function XD(n){return new K2("increment",n)}(function(e,t=!0){(function(i){ph=i})(gc),Yi(new jr("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new mr(new tR(r.getProvider("auth-internal")),new sR(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xe(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(u.options.projectId,l)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ei(ey,"4.7.3",e),ei(ey,"4.7.3","esm2017")})();const JD="@firebase/firestore-compat",QD="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function dw(){if(!CR())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Eb=class c1{constructor(e){this._delegate=e}static fromBase64String(e){return dw(),new c1(ba.fromBase64String(e))}static fromUint8Array(e){return fw(),new c1(ba.fromUint8Array(e))}toBase64(){return dw(),this._delegate.toBase64()}toUint8Array(){return fw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u1(n){return ZD(n,["next","error","complete"])}function ZD(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{enableIndexedDbPersistence(e,t){return lD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return hD(e._delegate)}clearIndexedDbPersistence(e){return fD(e._delegate)}}class Tb{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof sc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ea("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){aD(this._delegate,e,t,r)}enableNetwork(){return pD(this._delegate)}disableNetwork(){return mD(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,eb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return dD(this._delegate)}onSnapshotsInSync(e){return jD(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new oh(this,sb(this._delegate,e))}catch(t){throw Ai(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ss(this,np(this._delegate,e))}catch(t){throw Ai(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new bi(this,oD(this._delegate,e))}catch(t){throw Ai(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return HD(this._delegate,t=>e(new bb(this,t)))}batch(){return gi(this._delegate),new Ab(new zD(this._delegate,e=>Td(this._delegate,e)))}loadBundle(e){return gD(this._delegate,e)}namedQuery(e){return vD(this._delegate,e).then(t=>t?new bi(this,t):null)}}class am extends nv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eb(new ba(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ss.forKey(t,this.firestore,null)}}function tF(n){JC(n)}class bb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new am(e)}get(e){const t=eu(e);return this._delegate.get(t).then(r=>new $f(this._firestore,new ro(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=eu(e);return r?(iv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=eu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=eu(e);return this._delegate.delete(t),this}}class Ab{constructor(e){this._delegate=e}set(e,t,r){const i=eu(e);return r?(iv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=eu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=eu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new _f(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=yu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new yu(e,new am(e),t),i.set(t,s)),s}}yu.INSTANCES=new WeakMap;class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new am(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ss(t,new Gn(t._delegate,r,new ft(e)))}static forKey(e,t,r){return new Ss(t,new Gn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new oh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new oh(this.firestore,sb(this._delegate,e))}catch(t){throw Ai(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=St(e),e instanceof Gn?ab(this._delegate,e):!1}set(e,t){t=iv("DocumentReference.set",t);try{return t?lw(this._delegate,e,t):lw(this._delegate,e)}catch(r){throw Ai(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?hw(this._delegate,e):hw(this._delegate,e,t,...r)}catch(i){throw Ai(i,"updateDoc()","DocumentReference.update()")}}delete(){return VD(this._delegate)}onSnapshot(...e){const t=Ib(e),r=Sb(e,i=>new $f(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return xb(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=DD(this._delegate):(e==null?void 0:e.source)==="server"?t=FD(this._delegate):t=LD(this._delegate),t.then(r=>new $f(this.firestore,new ro(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ss(this.firestore,e?this._delegate.withConverter(yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ai(n,e,t){return n.message=n.message.replace(e,t),n}function Ib(n){for(const e of n)if(typeof e=="object"&&!u1(e))return e;return{}}function Sb(n,e){var t,r;let i;return u1(n[0])?i=n[0]:u1(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class $f{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ss(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wb(this._delegate,e._delegate)}}class Gf extends $f{data(e){const t=this._delegate.data(e);return this._delegate._converter||QC(t!==void 0),t}}class bi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new am(e)}where(e,t,r){try{return new bi(this.firestore,zo(this._delegate,TD(e,t,r)))}catch(i){throw Ai(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new bi(this.firestore,zo(this._delegate,bD(e,t)))}catch(r){throw Ai(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new bi(this.firestore,zo(this._delegate,AD(e)))}catch(t){throw Ai(t,"limit()","Query.limit()")}}limitToLast(e){try{return new bi(this.firestore,zo(this._delegate,ID(e)))}catch(t){throw Ai(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new bi(this.firestore,zo(this._delegate,SD(...e)))}catch(t){throw Ai(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new bi(this.firestore,zo(this._delegate,PD(...e)))}catch(t){throw Ai(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new bi(this.firestore,zo(this._delegate,ND(...e)))}catch(t){throw Ai(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new bi(this.firestore,zo(this._delegate,kD(...e)))}catch(t){throw Ai(t,"endAt()","Query.endAt()")}}isEqual(e){return ob(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=MD(this._delegate):(e==null?void 0:e.source)==="server"?t=BD(this._delegate):t=OD(this._delegate),t.then(r=>new l1(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Ib(e),r=Sb(e,i=>new l1(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return xb(this._delegate,t,r)}withConverter(e){return new bi(this.firestore,e?this._delegate.withConverter(yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class nF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class l1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new bi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new nF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Gf(this._firestore,r))})}isEqual(e){return wb(this._delegate,e._delegate)}}class oh extends bi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ss(this.firestore,e):null}doc(e){try{return e===void 0?new Ss(this.firestore,np(this._delegate)):new Ss(this.firestore,np(this._delegate,e))}catch(t){throw Ai(t,"doc()","CollectionReference.doc()")}}add(e){return UD(this._delegate,e).then(t=>new Ss(this.firestore,t))}isEqual(e){return ab(this._delegate,e._delegate)}withConverter(e){return new oh(this.firestore,e?this._delegate.withConverter(yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function eu(n){return cn(n,Gn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(...e){this._delegate=new uc(...e)}static documentId(){return new sv(zn.keyField().canonicalString())}isEqual(e){return e=St(e),e instanceof uc?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this._delegate=e}static serverTimestamp(){const e=GD();return e._methodName="FieldValue.serverTimestamp",new Yc(e)}static delete(){const e=$D();return e._methodName="FieldValue.delete",new Yc(e)}static arrayUnion(...e){const t=KD(...e);return t._methodName="FieldValue.arrayUnion",new Yc(t)}static arrayRemove(...e){const t=YD(...e);return t._methodName="FieldValue.arrayRemove",new Yc(t)}static increment(e){const t=XD(e);return t._methodName="FieldValue.increment",new Yc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rF={Firestore:Tb,GeoPoint:Jp,Timestamp:Hn,Blob:Eb,Transaction:bb,WriteBatch:Ab,DocumentReference:Ss,DocumentSnapshot:$f,Query:bi,QueryDocumentSnapshot:Gf,QuerySnapshot:l1,CollectionReference:oh,FieldPath:sv,FieldValue:Yc,setLogLevel:tF,CACHE_SIZE_UNLIMITED:uD};function iF(n,e){n.INTERNAL.registerComponent(new jr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},rF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sF(n){iF(n,(e,t)=>new Tb(e,t,new eF)),n.registerVersion(JD,QD)}sF(pr);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="type.googleapis.com/google.protobuf.Int64Value",oF="type.googleapis.com/google.protobuf.UInt64Value";function Pb(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function h1(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>h1(e));if(typeof n=="function"||typeof n=="object")return Pb(n,e=>h1(e));throw new Error("Data cannot be encoded in JSON: "+n)}function ip(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case aF:case oF:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>ip(e)):typeof n=="function"||typeof n=="object"?Pb(n,e=>ip(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ol extends Pr{constructor(e,t,r){super(`${Nb}/${e}`,t||""),this.details=r}}function cF(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function uF(n,e){let t=cF(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!pw[a])return new Ol("internal","internal");t=pw[a],r=a}const o=s.message;typeof o=="string"&&(r=o),i=s.details,i!==void 0&&(i=ip(i))}}catch{}return t==="ok"?null:new Ol(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lF{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="us-central1";function hF(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Ol("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}let fF=class{constructor(e,t,r,i,s=mw,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new lF(t,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=mw}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function dF(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function pF(n,e,t){return r=>vF(n,e,r,t||{})}function mF(n,e,t){return r=>kb(n,e,r,t||{})}async function gF(n,e,t,r){t["Content-Type"]="application/json";let i;try{i=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function vF(n,e,t,r){const i=n._url(e);return kb(n,i,t,r)}async function kb(n,e,t,r){t=h1(t);const i={data:t},s={},a=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=r.timeout||7e4,c=hF(o),u=await Promise.race([gF(e,i,s,n.fetchImpl),c.promise,n.cancelAllRequests]);if(c.cancel(),!u)throw new Ol("cancelled","Firebase Functions instance was deleted.");const l=uF(u.status,u.json);if(l)throw l;if(!u.json)throw new Ol("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d>"u"&&(d=u.json.result),typeof d>"u")throw new Ol("internal","Response is missing data field.");return{data:ip(d)}}const gw="@firebase/functions",vw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _F="auth-internal",yF="app-check-internal",wF="messaging-internal";function xF(n,e){const t=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(_F),o=r.getProvider(wF),c=r.getProvider(yF);return new fF(s,a,o,c,i,n)};Yi(new jr(Nb,t,"PUBLIC").setMultipleInstances(!0)),ei(gw,vw,e),ei(gw,vw,"esm2017")}function _w(n,e,t){dF(St(n),e,t)}function EF(n,e,t){return pF(St(n),e,t)}function TF(n,e,t){return mF(St(n),e,t)}xF(fetch.bind(self));const bF="@firebase/functions-compat",AF="0.3.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return EF(this._delegate,e,t)}httpsCallableFromURL(e,t){return TF(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Pr("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Pr("functions","Port missing in origin provided to useFunctionsEmulator()");return _w(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return _w(this._delegate,e,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IF="us-central1",SF=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("functions").getImmediate({identifier:e??IF});return new Cb(t,r)};function PF(){const n={Functions:Cb};pr.INTERNAL.registerComponent(new jr("functions-compat",SF,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */PF();pr.registerVersion(bF,AF);const Rb="@firebase/installations",av="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb=1e4,Db=`w:${av}`,Fb="FIS_v2",NF="https://firebaseinstallations.googleapis.com/v1",kF=60*60*1e3,CF="installations",RF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wu=new Ia(CF,RF,LF);function Ob(n){return n instanceof Pr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mb({projectId:n}){return`${NF}/projects/${n}/installations`}function Bb(n){return{token:n.token,requestStatus:2,expiresIn:FF(n.expiresIn),creationTime:Date.now()}}async function Vb(n,e){const r=(await e.json()).error;return wu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Ub({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function DF(n,{refreshToken:e}){const t=Ub(n);return t.append("Authorization",OF(e)),t}async function jb(n){const e=await n();return e.status>=500&&e.status<600?n():e}function FF(n){return Number(n.replace("s","000"))}function OF(n){return`${Fb} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MF({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Mb(n),i=Ub(n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={fid:t,authVersion:Fb,appId:n.appId,sdkVersion:Db},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await jb(()=>fetch(r,o));if(c.ok){const u=await c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Bb(u.authToken)}}else throw await Vb("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF=/^[cdef][\w-]{21}$/,f1="";function UF(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=jF(n);return VF.test(t)?t:f1}catch{return f1}}function jF(n){return BF(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Map;function Wb(n,e){const t=om(n);Hb(t,e),qF(t,e)}function Hb(n,e){const t=zb.get(n);if(t)for(const r of t)r(e)}function qF(n,e){const t=zF();t&&t.postMessage({key:n,fid:e}),WF()}let tu=null;function zF(){return!tu&&"BroadcastChannel"in self&&(tu=new BroadcastChannel("[Firebase] FID Change"),tu.onmessage=n=>{Hb(n.data.key,n.data.fid)}),tu}function WF(){zb.size===0&&tu&&(tu.close(),tu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HF="firebase-installations-database",$F=1,xu="firebase-installations-store";let rg=null;function ov(){return rg||(rg=lh(HF,$F,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(xu)}}})),rg}async function sp(n,e){const t=om(n),i=(await ov()).transaction(xu,"readwrite"),s=i.objectStore(xu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&Wb(n,e.fid),e}async function $b(n){const e=om(n),r=(await ov()).transaction(xu,"readwrite");await r.objectStore(xu).delete(e),await r.done}async function cm(n,e){const t=om(n),i=(await ov()).transaction(xu,"readwrite"),s=i.objectStore(xu),a=await s.get(t),o=e(a);return o===void 0?await s.delete(t):await s.put(o,t),await i.done,o&&(!a||a.fid!==o.fid)&&Wb(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(n){let e;const t=await cm(n.appConfig,r=>{const i=GF(r),s=KF(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===f1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function GF(n){const e=n||{fid:UF(),registrationStatus:0};return Gb(e)}function KF(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(wu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YF(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XF(n)}:{installationEntry:e}}async function YF(n,e){try{const t=await MF(n,e);return sp(n.appConfig,t)}catch(t){throw Ob(t)&&t.customData.serverCode===409?await $b(n.appConfig):await sp(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function XF(n){let e=await yw(n.appConfig);for(;e.registrationStatus===1;)await qb(100),e=await yw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await cv(n);return r||t}return e}function yw(n){return cm(n,e=>{if(!e)throw wu.create("installation-not-found");return Gb(e)})}function Gb(n){return JF(n)?{fid:n.fid,registrationStatus:0}:n}function JF(n){return n.registrationStatus===1&&n.registrationTime+Lb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QF({appConfig:n,heartbeatServiceProvider:e},t){const r=ZF(n,t),i=DF(n,t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={installation:{sdkVersion:Db,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await jb(()=>fetch(r,o));if(c.ok){const u=await c.json();return Bb(u)}else throw await Vb("Generate Auth Token",c)}function ZF(n,{fid:e}){return`${Mb(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uv(n,e=!1){let t;const r=await cm(n.appConfig,s=>{if(!Kb(s))throw wu.create("not-registered");const a=s.authToken;if(!e&&nO(a))return s;if(a.requestStatus===1)return t=eO(n,e),s;{if(!navigator.onLine)throw wu.create("app-offline");const o=iO(s);return t=tO(n,o),o}});return t?await t:r.authToken}async function eO(n,e){let t=await ww(n.appConfig);for(;t.authToken.requestStatus===1;)await qb(100),t=await ww(n.appConfig);const r=t.authToken;return r.requestStatus===0?uv(n,e):r}function ww(n){return cm(n,e=>{if(!Kb(e))throw wu.create("not-registered");const t=e.authToken;return sO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function tO(n,e){try{const t=await QF(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await sp(n.appConfig,r),t}catch(t){if(Ob(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await $b(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await sp(n.appConfig,r)}throw t}}function Kb(n){return n!==void 0&&n.registrationStatus===2}function nO(n){return n.requestStatus===2&&!rO(n)}function rO(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+kF}function iO(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function sO(n){return n.requestStatus===1&&n.requestTime+Lb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aO(n){const e=n,{installationEntry:t,registrationPromise:r}=await cv(e);return r?r.catch(console.error):uv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(n,e=!1){const t=n;return await cO(t),(await uv(t,e)).token}async function cO(n){const{registrationPromise:e}=await cv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(n){if(!n||!n.options)throw ig("App Configuration");if(!n.name)throw ig("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw ig(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ig(n){return wu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="installations",lO="installations-internal",hO=n=>{const e=n.getProvider("app").getImmediate(),t=uO(e),r=Ip(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},fO=n=>{const e=n.getProvider("app").getImmediate(),t=Ip(e,Yb).getImmediate();return{getId:()=>aO(t),getToken:i=>oO(t,i)}};function dO(){Yi(new jr(Yb,hO,"PUBLIC")),Yi(new jr(lO,fO,"PRIVATE"))}dO();ei(Rb,av);ei(Rb,av,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO="/firebase-messaging-sw.js",mO="/firebase-cloud-messaging-push-scope",Xb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",gO="https://fcmregistrations.googleapis.com/v1",Jb="google.c.a.c_id",vO="google.c.a.c_l",_O="google.c.a.ts",yO="google.c.a.e";var xw;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(xw||(xw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Kf;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Kf||(Kf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function wO(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg="fcm_token_details_db",xO=5,Ew="fcm_token_object_Store";async function EO(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(sg))return null;let e=null;return(await lh(sg,xO,{upgrade:async(r,i,s,a)=>{var o;if(i<2||!r.objectStoreNames.contains(Ew))return;const c=a.objectStore(Ew),u=await c.index("fcmSenderId").get(n);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:za(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:za(l.auth),p256dh:za(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:za(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:za(l.auth),p256dh:za(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:za(l.vapidKey)}}}}}})).close(),await Nl(sg),await Nl("fcm_vapid_details_db"),await Nl("undefined"),TO(e)?e:null}function TO(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="firebase-messaging-database",AO=1,Eu="firebase-messaging-store";let ag=null;function lv(){return ag||(ag=lh(bO,AO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Eu)}}})),ag}async function Qb(n){const e=fv(n),r=await(await lv()).transaction(Eu).objectStore(Eu).get(e);if(r)return r;{const i=await EO(n.appConfig.senderId);if(i)return await hv(n,i),i}}async function hv(n,e){const t=fv(n),i=(await lv()).transaction(Eu,"readwrite");return await i.objectStore(Eu).put(e,t),await i.done,e}async function IO(n){const e=fv(n),r=(await lv()).transaction(Eu,"readwrite");await r.objectStore(Eu).delete(e),await r.done}function fv({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ki=new Ia("messaging","Messaging",SO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(n,e){const t=await pv(n),r=eA(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(dv(n.appConfig),i)).json()}catch(a){throw ki.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ki.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw ki.create("token-subscribe-no-token");return s.token}async function NO(n,e){const t=await pv(n),r=eA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${dv(n.appConfig)}/${e.token}`,i)).json()}catch(a){throw ki.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ki.create("token-update-failed",{errorInfo:a})}if(!s.token)throw ki.create("token-update-no-token");return s.token}async function Zb(n,e){const r={method:"DELETE",headers:await pv(n)};try{const s=await(await fetch(`${dv(n.appConfig)}/${e}`,r)).json();if(s.error){const a=s.error.message;throw ki.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw ki.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function dv({projectId:n}){return`${gO}/projects/${n}/registrations`}async function pv({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function eA({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Xb&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=7*24*60*60*1e3;async function CO(n){const e=await DO(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:za(e.getKey("auth")),p256dh:za(e.getKey("p256dh"))},r=await Qb(n.firebaseDependencies);if(r){if(FO(r.subscriptionOptions,t))return Date.now()>=r.createTime+kO?LO(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await Zb(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Tw(n.firebaseDependencies,t)}else return Tw(n.firebaseDependencies,t)}async function RO(n){const e=await Qb(n.firebaseDependencies);e&&(await Zb(n.firebaseDependencies,e.token),await IO(n.firebaseDependencies));const t=await n.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function LO(n,e){try{const t=await NO(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await hv(n.firebaseDependencies,r),t}catch(t){throw t}}async function Tw(n,e){const r={token:await PO(n,e),createTime:Date.now(),subscriptionOptions:e};return await hv(n,r),r.token}async function DO(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:wO(e)})}function FO(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return OO(e,n),MO(e,n),BO(e,n),e}function OO(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}function MO(n,e){e.data&&(n.data=e.data)}function BO(n,e){var t,r,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const o=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(n.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(n){return typeof n=="object"&&!!n&&Jb in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(n){if(!n||!n.options)throw og("App Configuration Object");if(!n.name)throw og("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw og(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function og(n){return ki.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jO=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=UO(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(n){try{n.swRegistration=await navigator.serviceWorker.register(pO,{scope:mO}),n.swRegistration.update().catch(()=>{})}catch(e){throw ki.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(n,e){if(!e&&!n.swRegistration&&await tA(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ki.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zO(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Xb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nA(n,e){if(!navigator)throw ki.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ki.create("permission-blocked");return await zO(n,e==null?void 0:e.vapidKey),await qO(n,e==null?void 0:e.serviceWorkerRegistration),CO(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(n,e,t){const r=HO(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[Jb],message_name:t[vO],message_time:t[_O],message_device_time:Math.floor(Date.now()/1e3)})}function HO(n){switch(n){case Kf.NOTIFICATION_CLICKED:return"notification_open";case Kf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Kf.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(bw(t)):n.onMessageHandler.next(bw(t)));const r=t.data;VO(r)&&r[yO]==="1"&&await WO(n,t.messageType,r)}const Aw="@firebase/messaging",Iw="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO=n=>{const e=new jO(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>$O(e,t)),e},KO=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>nA(e,r)}};function YO(){Yi(new jr("messaging",GO,"PUBLIC")),Yi(new jr("messaging-internal",KO,"PRIVATE")),ei(Aw,Iw),ei(Aw,Iw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(n){if(!navigator)throw ki.create("only-available-in-window");return n.swRegistration||await tA(n),RO(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(n,e){if(!navigator)throw ki.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}async function QO(n,e){return n=St(n),nA(n,e)}function ZO(n){return n=St(n),XO(n)}function e8(n,e){return n=St(n),JO(n,e)}YO();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",t8="https://fcmregistrations.googleapis.com/v1",iA="FCM_MSG",n8="google.c.a.c_id",r8=3,i8=1;var ap;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ap||(ap={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var op;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(op||(op={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function s8(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cg="fcm_token_details_db",a8=5,Sw="fcm_token_object_Store";async function o8(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(cg))return null;let e=null;return(await lh(cg,a8,{upgrade:async(r,i,s,a)=>{var o;if(i<2||!r.objectStoreNames.contains(Sw))return;const c=a.objectStore(Sw),u=await c.index("fcmSenderId").get(n);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Wa(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}}}})).close(),await Nl(cg),await Nl("fcm_vapid_details_db"),await Nl("undefined"),c8(e)?e:null}function c8(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8="firebase-messaging-database",l8=1,Tu="firebase-messaging-store";let ug=null;function mv(){return ug||(ug=lh(u8,l8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Tu)}}})),ug}async function gv(n){const e=_v(n),r=await(await mv()).transaction(Tu).objectStore(Tu).get(e);if(r)return r;{const i=await o8(n.appConfig.senderId);if(i)return await vv(n,i),i}}async function vv(n,e){const t=_v(n),i=(await mv()).transaction(Tu,"readwrite");return await i.objectStore(Tu).put(e,t),await i.done,e}async function h8(n){const e=_v(n),r=(await mv()).transaction(Tu,"readwrite");await r.objectStore(Tu).delete(e),await r.done}function _v({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ya=new Ia("messaging","Messaging",f8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d8(n,e){const t=await wv(n),r=aA(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(yv(n.appConfig),i)).json()}catch(a){throw ya.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ya.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw ya.create("token-subscribe-no-token");return s.token}async function p8(n,e){const t=await wv(n),r=aA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${yv(n.appConfig)}/${e.token}`,i)).json()}catch(a){throw ya.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ya.create("token-update-failed",{errorInfo:a})}if(!s.token)throw ya.create("token-update-no-token");return s.token}async function sA(n,e){const r={method:"DELETE",headers:await wv(n)};try{const s=await(await fetch(`${yv(n.appConfig)}/${e}`,r)).json();if(s.error){const a=s.error.message;throw ya.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw ya.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function yv({projectId:n}){return`${t8}/projects/${n}/registrations`}async function wv({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function aA({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==rA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8=7*24*60*60*1e3;async function g8(n){const e=await _8(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Wa(e.getKey("auth")),p256dh:Wa(e.getKey("p256dh"))},r=await gv(n.firebaseDependencies);if(r){if(y8(r.subscriptionOptions,t))return Date.now()>=r.createTime+m8?v8(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await sA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Nw(n.firebaseDependencies,t)}else return Nw(n.firebaseDependencies,t)}async function Pw(n){const e=await gv(n.firebaseDependencies);e&&(await sA(n.firebaseDependencies,e.token),await h8(n.firebaseDependencies));const t=await n.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function v8(n,e){try{const t=await p8(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await vv(n.firebaseDependencies,r),t}catch(t){throw t}}async function Nw(n,e){const r={token:await d8(n,e),createTime:Date.now(),subscriptionOptions:e};return await vv(n,r),r.token}async function _8(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s8(e)})}function y8(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w8(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return x8(e,n),E8(e,n),T8(e,n),e}function x8(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}function E8(n,e){e.data&&(n.data=e.data)}function T8(n,e){var t,r,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const o=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(n.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b8(n){return typeof n=="object"&&!!n&&n8 in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A8(n){return new Promise(e=>{setTimeout(e,n)})}async function I8(n,e){const t=S8(e,await n.firebaseDependencies.installations.getId());P8(n,t,e.productId)}function S8(n,e){var t,r;const i={};return n.from&&(i.project_number=n.from),n.fcmMessageId&&(i.message_id=n.fcmMessageId),i.instance_id=e,n.notification?i.message_type=ap.DISPLAY_NOTIFICATION.toString():i.message_type=ap.DATA_MESSAGE.toString(),i.sdk_platform=r8.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(i.collapse_key=n.collapse_key),i.event=i8.toString(),!((t=n.fcmOptions)===null||t===void 0)&&t.analytics_label&&(i.analytics_label=(r=n.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function P8(n,e,t){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),t&&(r.compliance_data=N8(t)),n.logEvents.push(r)}function N8(n){return{privacy_context:{prequest:{origin_associated_product_id:n}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k8(n,e){var t,r;const{newSubscription:i}=n;if(!i){await Pw(e);return}const s=await gv(e.firebaseDependencies);await Pw(e),e.vapidKey=(r=(t=s==null?void 0:s.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&r!==void 0?r:rA,await g8(e)}async function C8(n,e){const t=D8(n);if(!t)return;e.deliveryMetricsExportedToBigQueryEnabled&&await I8(e,t);const r=await oA();if(O8(r))return M8(r,t);if(t.notification&&await B8(L8(t)),!!e&&e.onBackgroundMessageHandler){const i=w8(t);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function R8(n){var e,t;const r=(t=(e=n.notification)===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t[iA];if(r){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const i=V8(r);if(!i)return;const s=new URL(i,self.location.href),a=new URL(self.location.origin);if(s.host!==a.host)return;let o=await F8(s);if(o?o=await o.focus():(o=await self.clients.openWindow(i),await A8(3e3)),!!o)return r.messageType=op.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,o.postMessage(r)}function L8(n){const e=Object.assign({},n.notification);return e.data={[iA]:n},e}function D8({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function F8(n){const e=await oA();for(const t of e){const r=new URL(t.url,self.location.href);if(n.host===r.host)return t}return null}function O8(n){return n.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function M8(n,e){e.isFirebaseMessaging=!0,e.messageType=op.PUSH_RECEIVED;for(const t of n)t.postMessage(e)}function oA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function B8(n){var e;const{actions:t}=n,{maxActions:r}=Notification;return t&&r&&t.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=n.title)!==null&&e!==void 0?e:"",n)}function V8(n){var e,t,r;const i=(t=(e=n.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&t!==void 0?t:(r=n.notification)===null||r===void 0?void 0:r.click_action;return i||(b8(n.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U8(n){if(!n||!n.options)throw lg("App Configuration Object");if(!n.name)throw lg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw lg(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function lg(n){return ya.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j8{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=U8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8=n=>{const e=new j8(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",t=>{t.waitUntil(C8(t,e))}),self.addEventListener("pushsubscriptionchange",t=>{t.waitUntil(k8(t,e))}),self.addEventListener("notificationclick",t=>{t.waitUntil(R8(t))}),e};function z8(){Yi(new jr("messaging-sw",q8,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W8(n,e){if(self.document!==void 0)throw ya.create("only-available-in-sw");return n.onBackgroundMessageHandler=e,()=>{n.onBackgroundMessageHandler=null}}function H8(n,e){return n=St(n),W8(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */z8();const $8="@firebase/messaging-compat",G8="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K8(){return self&&"ServiceWorkerGlobalScope"in self?X8():Y8()}function Y8(){return typeof window<"u"&&ou()&&x4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function X8(){return ou()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class kw{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return QO(this._delegate,e)}async deleteToken(){return ZO(this._delegate)}onMessage(e){return e8(this._delegate,e)}onBackgroundMessage(e){return H8(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J8=n=>self&&"ServiceWorkerGlobalScope"in self?new kw(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new kw(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),Q8={isSupported:K8};function Z8(){pr.INTERNAL.registerComponent(new jr("messaging-compat",J8,"PUBLIC").setServiceProps(Q8))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Z8();pr.registerVersion($8,G8);const e7={apiKey:"AIzaSyDJcK71mE0pjol-2loS9q9XhXFwxnJMu6U",authDomain:"appazeit.firebaseapp.com",projectId:"appazeit",storageBucket:"appazeit.firebasestorage.app",messagingSenderId:"977328058000",appId:"1:977328058000:web:360b79579689552423b215"};pr.apps.length||pr.initializeApp(e7);const Eh=pr.auth(),di=pr.firestore();pr.functions();typeof window<"u"&&"Notification"in window&&pr.messaging.isSupported()&&pr.messaging();const Me={currentUser:null,entries:[],projects:{},tasks:[],timerInterval:null,timerStart:null,timerSeconds:0,isRunning:!1,isHomeoffice:!0,entriesPageSize:50,entriesCurrentPage:1,sortOrderDescending:!0,dashboardPeriod:"week",unsubscribeEntries:null,unsubscribeProjects:null,unsubscribeTasks:null,tasksDashboardShown:!1};function t7(){window.addManualEntry=n7,window.editEntry=r7,window.saveEdit=i7,window.deleteEntry=s7,window.closeEditModal=uA,window.changeEntriesPage=a7,window.changeEntriesPageSize=o7,window.filterChanged=!0,window.filterEntries=bd,window.toggleSortOrder=c7}function n7(){const n=document.getElementById("manualDate").value,e=document.getElementById("manualStart").value,t=document.getElementById("manualEnd").value,r=document.getElementById("currentProject").value,i=document.getElementById("currentActivity").value;if(!n||!e||!t){alert("Bitte Datum, Start und Ende eingeben!");return}if(cA(n,e,t))return;const s={datum:n,start:e,ende:t,projekt:r,taetigkeit:i,homeoffice:document.getElementById("manualLocation").value==="true",stunden:r==="Pause"?0:lA(e,t),pause:0,createdAt:pr.firestore.FieldValue.serverTimestamp()};xA(s),Li(" Eintrag hinzugefgt!"),document.getElementById("manualStart").value="",document.getElementById("manualEnd").value=""}function cA(n,e,t,r=null){if(!Me.entries)return!1;const[i,s]=e.split(":").map(Number),[a,o]=t.split(":").map(Number),c=i*60+s,u=a*60+o,l=Me.entries.find(d=>{if(d.id===r||d.datum!==n)return!1;const[g,p]=(d.start||"00:00").split(":").map(Number),[x,_]=(d.ende||"00:00").split(":").map(Number),E=g*60+p,P=x*60+_;return c<P&&u>E});return l?!confirm(` Achtung: Dieser Eintrag berschneidet sich mit:
"${l.projekt}" (${l.start} - ${l.ende})

Trotzdem speichern?`):!1}function bd(){const n=document.getElementById("filterDate").value,e=document.getElementById("filterProject").value;window.filterChanged&&(Me.entriesCurrentPage=1,window.filterChanged=!1);let t=[...Me.entries];n&&(t=t.filter(o=>o.datum===n)),e&&(t=t.filter(o=>o.projekt===e)),t.sort((o,c)=>Me.sortOrderDescending?o.datum!==c.datum?c.datum.localeCompare(o.datum):(c.start||"").localeCompare(o.start||""):o.datum!==c.datum?o.datum.localeCompare(c.datum):(o.start||"").localeCompare(c.start||""));const r=document.getElementById("entriesList");if(!r)return;const i=Me.entriesPageSize,s=Me.entriesCurrentPage,a=t.slice((s-1)*i,s*i);Math.ceil(t.length/i),t.length===0?r.innerHTML='<div class="p-8 text-br-300 text-center">Keine Eintrge gefunden</div>':r.innerHTML=a.map(o=>{var c;return`
             <div class="bg-br-800 rounded-lg p-3 border border-br-600 flex items-center gap-3">
                <div class="w-1 h-12 rounded" style="background: ${o.projekt==="Pause"?"#60A5FA":((c=Me.projects[o.projekt])==null?void 0:c.color)||"#6B7280"}"></div>
                <div class="flex-1">
                    <div class="text-sm font-medium">${bu(o.datum)}</div>
                    <div class="text-xs text-br-200">${o.start} - ${o.ende}  ${o.projekt||"Allgemein"}</div>
                    ${o.taetigkeit?`<div class="text-xs text-br-300">${o.taetigkeit}</div>`:""}
                </div>
                <div class="text-right">
                    <div class="font-mono">${(o.stunden||0).toFixed(2)}h</div>
                    <div class="text-xs">${o.homeoffice?"":""}</div>
                </div>
                <button onclick="editEntry('${o.id}')" class="p-2 hover:bg-br-600 rounded"></button>
                <button onclick="deleteEntry('${o.id}')" class="p-2 hover:bg-red-900 rounded"></button>
            </div>
        `}).join(""),document.getElementById("entriesStats").textContent=`${t.length} Eintrge`}function r7(n){const e=Me.entries.find(r=>r.id===n);if(!e)return;Me.editingEntryId=n,document.getElementById("editDate").value=e.datum,document.getElementById("editStart").value=e.start,document.getElementById("editEnd").value=e.ende,document.getElementById("editProject").value=e.projekt||"",document.getElementById("editActivity").value=e.taetigkeit||"",document.getElementById("editLocation").value=e.homeoffice?"true":"false";const t=document.getElementById("editModal");t.classList.remove("hidden"),t.classList.add("flex")}function i7(){if(!Me.editingEntryId)return;const n=document.getElementById("editProject").value,e=n==="Pause";let t=0;if(e){const[i,s]=document.getElementById("editStart").value.split(":").map(Number),[a,o]=document.getElementById("editEnd").value.split(":").map(Number),c=i*60+s,u=a*60+o;t=Math.max(0,u-c)}const r={datum:document.getElementById("editDate").value,start:document.getElementById("editStart").value,ende:document.getElementById("editEnd").value,projekt:n,taetigkeit:document.getElementById("editActivity").value,stunden:e?0:lA(document.getElementById("editStart").value,document.getElementById("editEnd").value),pause:t,homeoffice:document.getElementById("editLocation").value==="true"};cA(r.datum,r.start,r.ende,Me.editingEntryId)||(U7(Me.editingEntryId,r),uA(),Li(" Gespeichert"))}function uA(){const n=document.getElementById("editModal");n.classList.add("hidden"),n.classList.remove("flex"),Me.editingEntryId=null}function s7(n){confirm("Lschen?")&&j7(n)}function a7(n){Me.entriesCurrentPage=n,bd()}function o7(n){Me.entriesPageSize=parseInt(n),Me.entriesCurrentPage=1,bd()}function c7(){Me.sortOrderDescending=!Me.sortOrderDescending,bd()}function lA(n,e){if(!n||!e)return 0;const[t,r]=n.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+r,o=i*60+s;return Math.round((o-a)/60*100)/100}function u7(){window.addProject=h7,window.editProject=f7,window.deleteProject=d7,window.renderProjects=hA}function l7(){const n=Me.projects,e=document.getElementById("currentProject"),t=document.getElementById("filterProject"),r=document.getElementById("editProject");if(!e)return;const i=[...Object.keys(n),"Pause"];i.sort();const s=i.map(a=>`<option value="${a}">${a}</option>`).join("");e.innerHTML='<option value="">-- Kein Projekt --</option>'+s,t.innerHTML='<option value="">Alle Projekte</option>'+s,r&&(r.innerHTML='<option value="">-- Kein Projekt --</option>'+s)}function hA(){const n=document.getElementById("projectsList");if(!n)return;const e=Object.keys(Me.projects).sort();n.innerHTML=e.map(t=>`
        <div class="bg-br-800 rounded-lg p-4 border border-br-600 flex items-center gap-3">
            <div class="w-4 h-4 rounded" style="background: ${Me.projects[t].color}"></div>
            <div class="flex-1">
                <div class="font-medium">${t}</div>
            </div>
            <button onclick="editProject('${t}')" class="p-2 hover:bg-br-600 rounded"></button>
            <button onclick="deleteProject('${t}')" class="p-2 hover:bg-red-900 rounded"></button>
        </div>
    `).join("")}async function h7(){const n=document.getElementById("newProjectName").value.trim(),e=document.getElementById("newProjectColor").value;n&&(await di.collection("users").doc(Me.currentUser.uid).collection("projects").doc(n).set({name:n,color:e,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),document.getElementById("newProjectName").value="",Li(" Projekt erstellt"))}async function f7(n){const e=Me.projects[n];if(!e)return;const t=prompt("Neuer Projektname:",n);t&&t!==n&&(await di.collection("users").doc(Me.currentUser.uid).collection("projects").doc(t).set({name:t,color:e.color,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),await di.collection("users").doc(Me.currentUser.uid).collection("projects").doc(n).delete(),Li(" Projekt umbenannt"))}async function d7(n){confirm(`Projekt "${n}" wirklich lschen?`)&&(await di.collection("users").doc(Me.currentUser.uid).collection("projects").doc(n).delete(),Li(" Projekt gelscht"))}function p7(){window.updateDashboard=xv,window.setDashboardPeriod=m7,Me.dashboardPeriod="week"}function m7(n){Me.dashboardPeriod=n;const e=document.getElementById("dashboardDateRange");e&&(n==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")),xv()}function xv(){const n=Me.dashboardPeriod||"week",e=Me.entries;if(!e)return;const{start:t,end:r}=g7(n),i=e.filter(L=>L.datum>=t&&L.datum<=r);let s=0,a=0,o=0;const c=new Set,u={};i.forEach(L=>{const M=parseFloat(L.stunden||0),K=L.projekt||"unknown";if(K==="Pause"){let se=0;if(L.pause)se=L.pause/60;else if(L.start&&L.ende){const[oe,N]=L.start.split(":").map(Number),[A,C]=L.ende.split(":").map(Number),B=oe*60+N,b=A*60+C;se=Math.max(0,(b-B)/60)}u[K]||(u[K]=0),u[K]+=se;return}s+=M,c.add(L.datum),L.homeoffice?a+=M:o+=M,u[K]||(u[K]=0),u[K]+=M});const l=c.size,d=l>0?s/l:0;fl("statTotalHours",s.toFixed(1)),fl("statAvgPerDay",d.toFixed(1)),fl("statWorkDays",l),fl("statEntries",i.length);const g=a+o,p=g>0?a/g*100:0,x=g>0?o/g*100:0;fl("statHomeoffice",`${Math.round(p)}%`),fl("statOffice",`${Math.round(x)}%`);const _=document.getElementById("hoBar"),E=document.getElementById("officeBar");_&&(_.style.width=`${p}%`),E&&(E.style.width=`${x}%`);const P=document.getElementById("projectStats");if(P){const L=Object.entries(u).sort((M,K)=>K[1]-M[1]);P.innerHTML=L.map(([M,K])=>{let se=Me.projects[M];M==="Pause"?se={name:"Pause",color:"#60A5FA"}:se||(se={name:M==="unknown"?"Ohne Projekt":M,color:"#6B7280"});const oe=se.name,N=s>0?K/s*100:0;return`
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-br-200">${oe}</span>
                        <span class="font-mono">${K.toFixed(1)}h (${Math.round(N)}%)</span>
                    </div>
                    <div class="w-full h-2 bg-br-700 rounded-full overflow-hidden">
                        <div class="h-full rounded-full" style="width: ${N}%; background-color: ${se.color}"></div>
                    </div>
                </div>
            `}).join("")}}function g7(n){var r,i;const e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0];if(n==="custom"){const s=(r=document.getElementById("dashFrom"))==null?void 0:r.value,a=(i=document.getElementById("dashTo"))==null?void 0:i.value;return{start:s||"0000-00-00",end:a||"9999-99-99"}}if(n==="all")return{start:"0000-00-00",end:"9999-99-99"};if(n==="today")return{start:t,end:t};if(n==="week"){const s=new Date(e),a=s.getDay()||7;return s.setDate(s.getDate()-a+1),{start:s.toISOString().split("T")[0],end:t}}if(n==="month"){const s=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],a=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0];return{start:s,end:a}}if(n==="year"){const s=`${e.getFullYear()}-01-01`,a=`${e.getFullYear()}-12-31`;return{start:s,end:a}}return{start:t,end:t}}function fl(n,e){const t=document.getElementById(n);t&&(t.textContent=e)}function v7(){window.addTask=_7,window.toggleTaskStatus=y7,window.editTask=w7,window.saveTaskEdit=x7,window.closeEditTaskModal=Ev,window.renderTasks=fA}function fA(){var g,p,x;const n=Me.tasks||[],e=(g=document.getElementById("hideCompleted"))==null?void 0:g.checked,t=(p=document.getElementById("filterTaskPriority"))==null?void 0:p.value,r=(x=document.getElementById("filterTaskStatus"))==null?void 0:x.value,i=new Date().toISOString().split("T")[0];let s=n.filter(_=>!(e&&_.status==="erledigt"||t&&_.prioritaet!==t||r&&(_.status||"offen")!==r));const a=[],o=[],c=[],u=[];s.forEach(_=>{if(_.status==="erledigt"){u.push(_);return}if(!_.faelligAm){c.push(_);return}_.faelligAm<i?a.push(_):_.faelligAm===i?o.push(_):c.push(_)}),c0("overdueTasksList",a,"overdueTasks","overdueCount"),c0("todayTasksList",o,"todayTasks","todayTasksCount"),c0("upcomingTasksList",c,null,"upcomingCount"),c0("completedTasksList",u,"completedTasksSection","completedCount");const l=a.length+o.length+c.length,d=document.getElementById("noTasksMessage");d&&(l===0&&s.length===0?d.classList.remove("hidden"):d.classList.add("hidden"))}function c0(n,e,t,r){const i=document.getElementById(n);if(!i)return;if(t){const a=document.getElementById(t);a&&(e.length>0?a.classList.remove("hidden"):a.classList.add("hidden"))}if(r){const a=document.getElementById(r);a&&(a.textContent=e.length)}const s=a=>a==="hoch"?"text-red-400":a==="mittel"?"text-yellow-400":"text-green-400";i.innerHTML=e.map(a=>`
        <div class="p-3 flex items-start gap-3 hover:bg-br-700/30 transition-colors">
             <input type="checkbox" ${a.status==="erledigt"?"checked":""} 
                onclick="toggleTaskStatus('${a.id}')" 
                class="mt-1 w-4 h-4 rounded border-gray-500 bg-gray-700 checked:bg-blue-500">
             <div class="flex-1 cursor-pointer" onclick="editTask('${a.id}')">
                <div class="flex justify-between items-start">
                    <span class="${a.status==="erledigt"?"line-through text-br-400":"text-white"}">
                        ${a.aufgabe}
                    </span>
                    ${a.prioritaet?`<span class="text-[10px] ${s(a.prioritaet)} border border-current px-1 rounded ml-2 uppercase">${a.prioritaet}</span>`:""}
                </div>
                <div class="flex gap-3 mt-1 text-xs text-br-300">
                    <span> ${a.faelligAm?bu(a.faelligAm):"Kein Datum"}</span>
                    ${a.notizen?'<span title="Notizen vorhanden"></span>':""}
                </div>
             </div>
        </div>
    `).join("")}async function _7(){const n=document.getElementById("newTaskTitle").value.trim();if(!n){alert("Bitte eine Aufgabe eingeben");return}const e={aufgabe:n,faelligAm:document.getElementById("newTaskDue").value,prioritaet:document.getElementById("newTaskPriority").value,notizen:document.getElementById("newTaskNotes").value,status:"offen",createdAt:pr.firestore.FieldValue.serverTimestamp()};try{await di.collection("users").doc(Me.currentUser.uid).collection("tasks").add(e),Li(" Aufgabe hinzugefgt"),document.getElementById("newTaskTitle").value="",document.getElementById("newTaskNotes").value="",document.getElementById("newTaskDue").value=""}catch(t){console.error(t),Li(" Fehler beim Speichern")}}async function y7(n){const e=Me.tasks.find(r=>r.id===n);if(!e)return;const t=e.status==="erledigt"?"offen":"erledigt";await di.collection("users").doc(Me.currentUser.uid).collection("tasks").doc(n).update({status:t})}function w7(n){const e=Me.tasks.find(t=>t.id===n);e&&(Me.editingTaskId=n,document.getElementById("editTaskTitle").value=e.aufgabe,document.getElementById("editTaskDue").value=e.faelligAm||"",document.getElementById("editTaskPriority").value=e.prioritaet||"mittel",document.getElementById("editTaskStatus").value=e.status||"offen",document.getElementById("editTaskNotes").value=e.notizen||"",document.getElementById("editTaskModal").style.display="flex")}async function x7(){if(!Me.editingTaskId)return;const n={aufgabe:document.getElementById("editTaskTitle").value,faelligAm:document.getElementById("editTaskDue").value,prioritaet:document.getElementById("editTaskPriority").value,status:document.getElementById("editTaskStatus").value,notizen:document.getElementById("editTaskNotes").value};try{await di.collection("users").doc(Me.currentUser.uid).collection("tasks").doc(Me.editingTaskId).update(n),Li(" Gespeichert"),Ev()}catch{Li(" Fehler")}}async function E7(){if(!(!Me.editingTaskId||!confirm("Aufgabe wirklich lschen?")))try{await di.collection("users").doc(Me.currentUser.uid).collection("tasks").doc(Me.editingTaskId).delete(),Li(" Gelscht"),Ev()}catch{Li(" Fehler")}}function Ev(){Me.editingTaskId=null,document.getElementById("editTaskModal").style.display="none"}function T7(){var i,s,a,o,c;const n=Me.tasks||[],e=new Date().toISOString().split("T")[0],t=n.filter(u=>u.status!=="erledigt"&&u.faelligAm&&u.faelligAm<e),r=n.filter(u=>u.status!=="erledigt"&&u.faelligAm===e);if(t.length>0||r.length>0){const u=(d,g)=>{const p=document.getElementById(g);p&&(p.innerHTML=d.map(x=>`
                <div class="bg-br-700/50 p-2 rounded flex justify-between items-center">
                    <span class="${x.faelligAm<e?"text-red-300 font-bold":""}">${x.aufgabe}</span>
                    <button onclick="closeTasksDashboard(); editTask('${x.id}')" class="text-xs bg-br-600 px-2 py-1 rounded"></button>
                </div>
            `).join(""))};t.length>0?((i=document.getElementById("dashOverdue"))==null||i.classList.remove("hidden"),u(t,"dashOverdueList")):(s=document.getElementById("dashOverdue"))==null||s.classList.add("hidden"),r.length>0?((a=document.getElementById("dashToday"))==null||a.classList.remove("hidden"),u(r,"dashTodayList")):(o=document.getElementById("dashToday"))==null||o.classList.add("hidden"),(c=document.getElementById("dashNoUrgent"))==null||c.classList.add("hidden"),Me.tasksDashboardShown=!0;const l=document.getElementById("tasksDashboardModal");l&&(l.classList.remove("hidden"),l.classList.add("flex"))}}window.closeTasksDashboard=function(){document.getElementById("tasksDashboardModal").classList.add("hidden"),document.getElementById("tasksDashboardModal").classList.remove("flex")};window.deleteTask=E7;function b7(){window.toggleTimer=A7,window.startTimer=dA,window.stopTimer=um,window.resetTimer=I7,window.toggleCountdownMode=S7,window.testAlarm=R7,window.activateNotifications=L7}function A7(){Me.isRunning?um():dA()}function dA(){const n=document.getElementById("useCountdown").checked;pA(),vA();const e=parseInt(document.getElementById("countdownMinutes").value)||60,t=document.getElementById("currentProject").value;if(n){Me.timerSeconds=e*60;const r=Date.now()+e*60*1e3;q7(r,t)}else Me.timerSeconds=0;Me.timerStart=new Date,Me.isRunning=!0,lm(!0,n),k7(),Me.timerInterval=setInterval(()=>{const i=Math.floor((new Date-Me.timerStart)/1e3);n?(Me.timerSeconds=Math.max(0,e*60-i),Me.timerSeconds<=0&&(Me.timerSeconds=0,um(),mA())):Me.timerSeconds=i,Tv()},1e3)}function um(){clearInterval(Me.timerInterval),Me.isRunning=!1,lm(!1),Me.timerStart&&Math.floor((new Date-Me.timerStart)/1e3)>60&&P7(),EA(),bv()}function I7(){clearInterval(Me.timerInterval),Me.isRunning=!1,Me.timerSeconds=0,Me.timerStart=null,lm(!1),document.getElementById("timerStatus").textContent="Bereit zum Starten",Tv(),EA(),bv()}function lm(n,e=!1){const t=document.getElementById("btnStartStop"),r=document.getElementById("timerDisplay"),i=document.getElementById("timerStatus");n?(t.innerHTML=" Stop",t.classList.replace("bg-green-600","bg-red-600"),t.classList.replace("hover:bg-green-500","hover:bg-red-500"),r.classList.add("timer-active"),i.textContent=e?" Countdown luft... (Cloud-Alarm aktiv )":"Timer luft..."):(t.innerHTML=" Start",t.classList.replace("bg-red-600","bg-green-600"),t.classList.replace("hover:bg-red-500","hover:bg-green-500"),r.classList.remove("timer-active"),i.textContent="Timer gestoppt")}function Tv(){const n=Math.floor(Me.timerSeconds/3600),e=Math.floor(Me.timerSeconds%3600/60),t=Me.timerSeconds%60;document.getElementById("timerValue").textContent=`${String(n).padStart(2,"0")}:${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`}function S7(){const n=document.getElementById("useCountdown").checked;document.getElementById("countdownMinutes").disabled=!n}function P7(){const n=document.getElementById("useCountdown").checked,e=document.getElementById("currentProject").value,t=document.getElementById("currentActivity").value;let r;if(n){const c=parseInt(document.getElementById("countdownMinutes").value)||60;r=new Date(Me.timerStart.getTime()+c*60*1e3)}else r=new Date;const i=r-Me.timerStart,s=Math.round(i/6e4),a=e==="Pause",o={datum:Me.timerStart.toISOString().split("T")[0],start:Me.timerStart.toTimeString().slice(0,5),ende:r.toTimeString().slice(0,5),projekt:e,taetigkeit:t,homeoffice:Me.isHomeoffice,stunden:a?0:N7(Me.timerStart.toTimeString().slice(0,5),r.toTimeString().slice(0,5)),pause:a?s:0,createdAt:pr.firestore.FieldValue.serverTimestamp()};xA(o),Me.timerStart=null,Li(" Zeiteintrag gespeichert!")}function N7(n,e){const t=Cw(n),r=Cw(e);return Math.round((r-t)/60*100)/100}function Cw(n){if(!n)return 0;const[e,t]=n.split(":").map(Number);return e*60+t}function k7(){var n;localStorage.setItem("zeiterfassung_timer",JSON.stringify({timerStart:(n=Me.timerStart)==null?void 0:n.toISOString(),isRunning:Me.isRunning,isCountdown:document.getElementById("useCountdown").checked,countdownMinutes:document.getElementById("countdownMinutes").value,project:document.getElementById("currentProject").value,activity:document.getElementById("currentActivity").value,homeoffice:Me.isHomeoffice}))}function bv(){localStorage.removeItem("zeiterfassung_timer")}function C7(){const n=localStorage.getItem("zeiterfassung_timer");if(!n)return;const e=JSON.parse(n);if(!e.isRunning||!e.timerStart)return;const t=new Date(e.timerStart),r=Math.floor((Date.now()-t.getTime())/1e3),i=parseInt(e.countdownMinutes)||60;if(Me.timerStart=t,document.getElementById("currentProject").value=e.project||"",document.getElementById("currentActivity").value=e.activity||"",window.setLocation(e.homeoffice),e.isCountdown){if(document.getElementById("useCountdown").checked=!0,document.getElementById("countdownMinutes").value=i,Me.timerSeconds=Math.max(0,i*60-r),Me.timerSeconds<=0){Me.timerSeconds=0,bv();return}}else Me.timerSeconds=r;Me.isRunning=!0,lm(!0,e.isCountdown),Li(" Timer wiederhergestellt!"),Me.timerInterval=setInterval(()=>{const a=Math.floor((new Date-Me.timerStart)/1e3);e.isCountdown?(Me.timerSeconds=Math.max(0,i*60-a),Me.timerSeconds<=0&&(Me.timerSeconds=0,um(),mA())):Me.timerSeconds=a,Tv()},1e3)}let Ha=null;function pA(){Ha||(Ha=new(window.AudioContext||window.webkitAudioContext)),Ha.state==="suspended"&&Ha.resume()}function mA(){Li(" Zeit abgelaufen!"),gA()}function gA(){if(Ha){const n=Ha.createOscillator(),e=Ha.createGain();n.connect(e),e.connect(Ha.destination),n.frequency.value=880,n.start(),n.stop(Ha.currentTime+1)}}function R7(){pA(),gA()}function vA(){"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()}function L7(){vA()}function Li(n){const e=document.createElement("div");e.className="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg border border-gray-600 z-50 animate-bounce",e.textContent=n,document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}function D7(){var n,e,t,r;(n=document.getElementById("loginScreen"))==null||n.classList.remove("hidden"),(e=document.getElementById("app"))==null||e.classList.add("hidden"),(t=document.getElementById("registerForm"))==null||t.classList.add("hidden"),(r=document.getElementById("emailLoginForm"))==null||r.classList.remove("hidden")}function F7(){var i,s,a;(i=document.getElementById("loginScreen"))==null||i.classList.add("hidden"),(s=document.getElementById("app"))==null||s.classList.remove("hidden");const n=Me.currentUser,e=document.getElementById("userPhoto"),t=document.getElementById("userAvatar");n&&n.photoURL?(e.src=n.photoURL,e.style.display="block"):(e.src="",e.style.display="none",t.innerHTML="");const r=n.displayName||((a=n.email)==null?void 0:a.split("@")[0])||"User";document.getElementById("userName").textContent=r,document.getElementById("userEmail").textContent=n.email||"",_A("tasks")}function Wi(n){const e=document.getElementById("syncStatus");if(e)switch(e.classList.remove("syncing"),n){case"syncing":e.innerHTML=" Sync...",e.className="sync-indicator syncing text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full";break;case"synced":e.innerHTML=" Sync",e.className="sync-indicator text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full";break;case"error":e.innerHTML=" Offline",e.className="sync-indicator text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full";break}}function _A(n){var e,t,r;["timer","tasks","entries","projects","dashboard","export"].forEach(i=>{var s,a,o;(s=document.getElementById(`content-${i}`))==null||s.classList.add("hidden"),(a=document.getElementById(`tab-${i}`))==null||a.classList.remove("tab-active"),(o=document.getElementById(`tab-${i}`))==null||o.classList.add("text-br-200")}),(e=document.getElementById(`content-${n}`))==null||e.classList.remove("hidden"),(t=document.getElementById(`tab-${n}`))==null||t.classList.add("tab-active"),(r=document.getElementById(`tab-${n}`))==null||r.classList.remove("text-br-200"),n==="entries"&&window.filterEntries&&window.filterEntries(),n==="projects"&&window.renderProjects&&window.renderProjects(),n==="dashboard"&&window.updateDashboard&&window.updateDashboard(),n==="tasks"&&window.renderTasks&&window.renderTasks()}function O7(){document.getElementById("manualDate").value=new Date().toISOString().split("T")[0],localStorage.getItem("zeiterfassung_sortOrder")==="asc"&&(Me.sortOrderDescending=!1,document.getElementById("btnSortOrder").innerHTML="",document.getElementById("btnSortOrder").title="Sortierung: lteste zuerst"),window.showTab=_A}function yA(){const n=new Date,e=new Date(n.getTime()-n.getTimezoneOffset()*6e4).toISOString().split("T")[0],t=Me.entries.filter(E=>E.datum===e);let r=0,i=0,s=0;t.forEach(E=>{const P=parseFloat(E.stunden||0);r+=P,E.homeoffice?i+=P:s+=P});const a=7.8,o=r/a*100,c=Math.round(o),u=Math.min(100,o);document.getElementById("todayWorkProgress").textContent=`${r.toFixed(1)}h / ${a}h`,document.getElementById("todayWorkPercentText").textContent=`${c}%`;const l=document.getElementById("todayWorkBar");l&&(l.style.width=`${u}%`);const d=document.getElementById("todayWorkPercent");d&&(d.textContent=c>10?`${c}%`:"");const g=i+s,p=g>0?i/g*100:50,x=g>0?s/g*100:50;document.getElementById("todayHoBar").style.width=`${p}%`,document.getElementById("todayOfficeBar").style.width=`${x}%`,document.getElementById("todayHoLabel").textContent=p>10?`${Math.round(p)}%`:"",document.getElementById("todayOfficeLabel").textContent=x>10?`${Math.round(x)}%`:"",document.getElementById("todayHoHours").textContent=`${i.toFixed(1)}h`,document.getElementById("todayOfficeHours").textContent=`${s.toFixed(1)}h`,document.getElementById("todayTotal").textContent=`${r.toFixed(2)} h`;const _=document.getElementById("todayEntries");_&&(t.length===0?_.innerHTML='<div class="p-4 text-center text-br-300 text-sm">Noch keine Eintrge heute</div>':(t.sort((E,P)=>(E.start||"").localeCompare(P.start||"")),_.innerHTML=t.map(E=>{var P;return`
                <div class="p-3 border-b border-br-600 flex items-center justify-between hover:bg-br-700/50 transition-colors">
                    <div class="flex items-center gap-3">
                        <div class="w-1 h-8 rounded" style="background: ${((P=Me.projects[E.projekt])==null?void 0:P.color)||"#6B7280"}"></div>
                        <div>
                            <div class="text-sm font-medium">${E.start} - ${E.ende}</div>
                            <div class="text-xs text-br-200">${E.projekt||"Allgemein"}  ${E.taetigkeit||"-"}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-mono text-sm">${(E.stunden||0).toFixed(2)}h</div>
                        <div class="text-xs">${E.homeoffice?"":""}</div>
                    </div>
                </div>
            `}).join("")))}function wA(){var n;(n=document.getElementById("userMenu"))==null||n.classList.add("hidden")}function bu(n){if(!n)return"";try{const e=new Date(n);return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}catch{return n}}window.showUserMenu=()=>document.getElementById("userMenu").classList.toggle("hidden");window.hideUserMenu=wA;window.formatDate=bu;window.updateTodayView=yA;window.setLocation=M7;function M7(n){Me.isHomeoffice=n;const e=document.getElementById("btn-ho"),t=document.getElementById("btn-office");n?(e.classList.replace("bg-br-700","bg-br-500"),t.classList.replace("bg-br-500","bg-br-700")):(e.classList.replace("bg-br-500","bg-br-700"),t.classList.replace("bg-br-700","bg-br-500"))}function B7(){Me.currentUser&&(Wi("syncing"),Me.unsubscribeEntries=di.collection("users").doc(Me.currentUser.uid).collection("entries").orderBy("datum","desc").onSnapshot(n=>{Me.entries=[],n.forEach(e=>{Me.entries.push({id:e.id,...e.data()})}),yA(),bd(),xv(),Wi("synced")},n=>{console.error("Entries sync error:",n),Wi("error")}),Me.unsubscribeProjects=di.collection("users").doc(Me.currentUser.uid).collection("projects").onSnapshot(n=>{n.empty||(Me.projects={},n.forEach(e=>{Me.projects[e.id]=e.data()}),l7(),hA())},n=>{console.error("Projects sync error:",n)}),Me.unsubscribeTasks=di.collection("users").doc(Me.currentUser.uid).collection("tasks").orderBy("faelligAm","asc").onSnapshot(n=>{Me.tasks=[],n.forEach(e=>{Me.tasks.push({id:e.id,...e.data()})}),fA(),Me.tasksDashboardShown||T7(),Wi("synced")},n=>{console.error("Tasks sync error:",n),Wi("error")}))}function V7(){Me.unsubscribeEntries&&Me.unsubscribeEntries(),Me.unsubscribeProjects&&Me.unsubscribeProjects(),Me.unsubscribeTasks&&Me.unsubscribeTasks()}async function xA(n){if(Me.currentUser){Wi("syncing");try{await di.collection("users").doc(Me.currentUser.uid).collection("entries").add(n),Wi("synced")}catch(e){console.error("Add entry error:",e),Wi("error")}}}async function U7(n,e){if(Me.currentUser){Wi("syncing");try{await di.collection("users").doc(Me.currentUser.uid).collection("entries").doc(n).update(e),Wi("synced")}catch(t){console.error("Update entry error:",t),Wi("error")}}}async function j7(n){if(Me.currentUser){Wi("syncing");try{await di.collection("users").doc(Me.currentUser.uid).collection("entries").doc(n).delete(),Wi("synced")}catch(e){console.error("Delete entry error:",e),Wi("error")}}}async function q7(n,e){if(Me.currentUser)try{await di.collection("users").doc(Me.currentUser.uid).collection("timers").doc("current").set({alarmTime:n,project:e||"",active:!0,createdAt:pr.firestore.FieldValue.serverTimestamp()}),console.log(" Cloud Timer gespeichert")}catch(t){console.error("Cloud Timer Fehler:",t)}}async function EA(){if(Me.currentUser)try{await di.collection("users").doc(Me.currentUser.uid).collection("timers").doc("current").update({active:!1}),console.log(" Cloud Timer deaktiviert")}catch(n){console.error("Cloud Timer lschen Fehler:",n)}}function z7(){Eh.onAuthStateChanged(n=>{console.log("Auth State:",n?n.email:"nicht angemeldet"),n?(Me.currentUser=n,F7(),B7(),C7()):(Me.currentUser=null,D7(),V7())}),window.signInWithGoogle=W7,window.signInWithEmail=K7,window.registerWithEmail=Y7,window.resetPassword=X7,window.signOut=H7,window.showRegisterForm=$7,window.showLoginForm=G7}async function W7(){const n=new pr.auth.GoogleAuthProvider;n.setCustomParameters({prompt:"select_account"});try{const e=document.getElementById("loginBtn");e&&(e.disabled=!0,e.innerHTML=" Anmelden..."),await Eh.signInWithPopup(n),console.log(" Login erfolgreich")}catch(e){console.error("Login Error:",e.code,e.message);const t=document.getElementById("loginBtn");t&&(t.disabled=!1,t.innerHTML='<svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Mit Google anmelden'),e.code==="auth/popup-blocked"?alert(" Popup wurde blockiert! Bitte erlaube Popups fr diese Seite."):e.code!=="auth/popup-closed-by-user"&&e.code!=="auth/cancelled-popup-request"&&alert(" Login fehlgeschlagen: "+e.message)}}function H7(){Eh.signOut(),wA()}function $7(){document.getElementById("emailLoginForm").classList.add("hidden"),document.getElementById("registerForm").classList.remove("hidden")}function G7(){var n,e;(n=document.getElementById("registerForm"))==null||n.classList.add("hidden"),(e=document.getElementById("emailLoginForm"))==null||e.classList.remove("hidden")}async function K7(){const n=document.getElementById("loginEmail").value.trim(),e=document.getElementById("loginPassword").value;if(!n||!e){alert("Bitte E-Mail und Passwort eingeben.");return}const t=document.getElementById("emailLoginBtn");t.disabled=!0,t.innerHTML=" Anmelden...";try{await Eh.signInWithEmailAndPassword(n,e),console.log(" E-Mail Login erfolgreich")}catch(r){switch(console.error("E-Mail Login Error:",r.code,r.message),t.disabled=!1,t.innerHTML=" Mit E-Mail anmelden",r.code){case"auth/user-not-found":alert(` Kein Konto mit dieser E-Mail gefunden.

Mchtest du dich registrieren?`);break;case"auth/wrong-password":alert(" Falsches Passwort.");break;case"auth/invalid-email":alert(" Ungltige E-Mail-Adresse.");break;case"auth/too-many-requests":alert(" Zu viele Versuche. Bitte warte einen Moment.");break;default:alert(" Login fehlgeschlagen: "+r.message)}}}async function Y7(){const n=document.getElementById("registerEmail").value.trim(),e=document.getElementById("registerPassword").value,t=document.getElementById("registerPasswordConfirm").value;if(!n||!e){alert("Bitte E-Mail und Passwort eingeben.");return}if(e.length<6){alert("Das Passwort muss mindestens 6 Zeichen haben.");return}if(e!==t){alert("Die Passwrter stimmen nicht berein.");return}try{await Eh.createUserWithEmailAndPassword(n,e),console.log(" Registrierung erfolgreich"),Li(" Konto erstellt! Du bist jetzt angemeldet.")}catch(r){switch(console.error("Registrierung Error:",r.code,r.message),r.code){case"auth/email-already-in-use":alert(` Diese E-Mail ist bereits registriert.

Bitte melde dich an oder nutze "Passwort vergessen".`);break;default:alert(" Registrierung fehlgeschlagen: "+r.message)}}}async function X7(){const n=document.getElementById("loginEmail").value.trim();if(!n){alert("Bitte gib zuerst deine E-Mail-Adresse ein.");return}try{await Eh.sendPasswordResetEmail(n),alert(` Passwort-Reset E-Mail gesendet!

Bitte prfe dein Postfach (auch Spam-Ordner).`)}catch(e){console.error("Password Reset Error:",e.code,e.message),alert(" Fehler: "+e.message)}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var cp={};cp.version="0.18.5";var TA=1252,J7=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],bA=function(n){J7.indexOf(n)!=-1&&(TA=n)};function Q7(){bA(1252)}var Yf=function(n){bA(n)};function Z7(){Yf(1200),Q7()}var u0=function(e){return String.fromCharCode(e)},Rw=function(e){return String.fromCharCode(e)},up,Jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xf(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,c=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,c=i&63,isNaN(r)?o=c=64:isNaN(i)&&(c=64),e+=Jo.charAt(s)+Jo.charAt(a)+Jo.charAt(o)+Jo.charAt(c);return e}function io(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,c=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Jo.indexOf(n.charAt(u++)),a=Jo.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Jo.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),c=Jo.indexOf(n.charAt(u++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var hn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ho=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Au(n){return hn?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function Lw(n){return hn?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var $s=function(e){return hn?ho(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function hm(n){if(typeof ArrayBuffer>"u")return $s(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function Ad(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function eM(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var Qr=hn?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:ho(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function tM(n){for(var e=[],t=0,r=n.length+250,i=Au(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Au(65535),r=65530)}return e.push(i.slice(0,t)),Qr(e)}var yf=/\u0000/g,l0=/[\u0001-\u0006]/g;function Ml(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Gs(n,e){var t=""+n;return t.length>=e?t:er("0",e-t.length)+t}function Av(n,e){var t=""+n;return t.length>=e?t:er(" ",e-t.length)+t}function lp(n,e){var t=""+n;return t.length>=e?t:t+er(" ",e-t.length)}function nM(n,e){var t=""+Math.round(n);return t.length>=e?t:er("0",e-t.length)+t}function rM(n,e){var t=""+n;return t.length>=e?t:er("0",e-t.length)+t}var Dw=Math.pow(2,32);function dl(n,e){if(n>Dw||n<-Dw)return nM(n,e);var t=Math.round(n);return rM(t,e)}function hp(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var Fw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],hg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function iM(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var nr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Ow={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},sM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function fp(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,c=1,u=0,l=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,l=d*u+c,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,c=u,u=l;if(l>e&&(u>e?(l=c,o=s):(l=u,o=a)),!t)return[0,r*o,l];var g=Math.floor(r*o/l);return[g,r*o-g*l,l]}function h0(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var c=new Date(1900,0,1);c.setDate(c.getDate()+r-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),r<60&&(s=(s+6)%7),t&&(s=fM(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var AA=new Date(1899,11,31,0,0,0),aM=AA.getTime(),oM=new Date(1900,2,1,0,0,0);function IA(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=oM&&(t+=24*60*60*1e3),(t-(aM+(n.getTimezoneOffset()-AA.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Iv(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function cM(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function uM(n){var e=n<0?12:11,t=Iv(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function lM(n){var e=Iv(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function hM(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=uM(n):e===10?t=n.toFixed(10).substr(0,12):t=lM(n),Iv(cM(t.toUpperCase()))}function d1(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):hM(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return hc(14,IA(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function fM(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function dM(n,e,t,r){var i="",s=0,a=0,o=t.y,c,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=t.m,u=e.length;break;case 3:return hg[t.m-1][1];case 5:return hg[t.m-1][0];default:return hg[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=t.d,u=e.length;break;case 3:return Fw[t.q][0];default:return Fw[t.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Gs(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Gs(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=t.D*24+t.H;break;case"[m]":case"[mm]":c=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":c=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var l=u>0?Gs(c,u):"";return l}function Qo(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var SA=/%/g;function pM(n,e,t){var r=e.replace(SA,""),i=e.length-r.length;return Ja(n,r,t*Math.pow(10,2*i))+er("%",i)}function mM(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ja(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function PA(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+PA(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var NA=/# (\?+)( ?)\/( ?)(\d+)/;function gM(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?er(" ",n[1].length+1+n[4].length):Av(a,n[1].length)+n[2]+"/"+n[3]+Gs(o,n[4].length))}function vM(n,e,t){return t+(e===0?"":""+e)+er(" ",n[1].length+2+n[4].length)}var kA=/^#*0*\.([0#]+)/,CA=/\).*[0#]/,RA=/\(###\) ###\\?-####/;function Ii(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function Mw(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function Bw(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function _M(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function yM(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function As(n,e,t){if(n.charCodeAt(0)===40&&!e.match(CA)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?As("n",r,t):"("+As("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return mM(n,e,t);if(e.indexOf("%")!==-1)return pM(n,e,t);if(e.indexOf("E")!==-1)return PA(e,t);if(e.charCodeAt(0)===36)return"$"+As(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+dl(c,e.length);if(e.match(/^[#?]+$/))return i=dl(t,0),i==="0"&&(i=""),i.length>e.length?i:Ii(e.substr(0,e.length-i.length))+i;if(s=e.match(NA))return gM(s,c,u);if(e.match(/^#+0+$/))return u+dl(c,e.length-e.indexOf("0"));if(s=e.match(kA))return i=Mw(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Ii(s[1])).replace(/\.$/,"."+Ii(s[1])).replace(/\.(\d*)$/,function(x,_){return"."+_+er("0",Ii(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+Mw(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Qo(dl(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+As(n,e,-t):Qo(""+(Math.floor(t)+_M(t,s[1].length)))+"."+Gs(Bw(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return As(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ml(As(n,e.replace(/[\\-]/g,""),t)),a=0,Ml(Ml(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(RA))return i=As(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=fp(c,Math.pow(10,a)-1,!1),i=""+u,l=Ja("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=lp(o[2],a),l.length<s[4].length&&(l=Ii(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=fp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Av(o[1],a)+s[2]+"/"+s[3]+lp(o[2],a):er(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=dl(t,0),e.length<=i.length?i:Ii(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Ii(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=Bw(t,s[1].length),t<0?"-"+As(n,e,-t):Qo(yM(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Gs(0,3-x.length):"")+x})+"."+Gs(a,s[1].length);switch(e){case"###,##0.00":return As(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Qo(dl(c,0));return p!=="0"?u+p:"";case"###,###.00":return As(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return As(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function wM(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Ja(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function xM(n,e,t){var r=e.replace(SA,""),i=e.length-r.length;return Ja(n,r,t*Math.pow(10,2*i))+er("%",i)}function LA(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+LA(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function aa(n,e,t){if(n.charCodeAt(0)===40&&!e.match(CA)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?aa("n",r,t):"("+aa("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return wM(n,e,t);if(e.indexOf("%")!==-1)return xM(n,e,t);if(e.indexOf("E")!==-1)return LA(e,t);if(e.charCodeAt(0)===36)return"$"+aa(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Gs(c,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Ii(e.substr(0,e.length-i.length))+i;if(s=e.match(NA))return vM(s,c,u);if(e.match(/^#+0+$/))return u+Gs(c,e.length-e.indexOf("0"));if(s=e.match(kA))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Ii(s[1])).replace(/\.$/,"."+Ii(s[1])),i=i.replace(/\.(\d*)$/,function(x,_){return"."+_+er("0",Ii(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Qo(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+aa(n,e,-t):Qo(""+t)+"."+er("0",s[1].length);if(s=e.match(/^#,#*,#0/))return aa(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ml(aa(n,e.replace(/[\\-]/g,""),t)),a=0,Ml(Ml(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(RA))return i=aa(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=fp(c,Math.pow(10,a)-1,!1),i=""+u,l=Ja("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=lp(o[2],a),l.length<s[4].length&&(l=Ii(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=fp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Av(o[1],a)+s[2]+"/"+s[3]+lp(o[2],a):er(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Ii(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Ii(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+aa(n,e,-t):Qo(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Gs(0,3-x.length):"")+x})+"."+Gs(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Qo(""+c);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return aa(n,e.slice(0,e.lastIndexOf(".")),t)+Ii(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ja(n,e,t){return(t|0)===t?aa(n,e,t):As(n,e,t)}function EM(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var DA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function FA(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":hp(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(DA))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function TM(n,e,t,r){for(var i=[],s="",a=0,o="",c="t",u,l,d,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!hp(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),x=p==="("||p===")"?p:"t";i[i.length]={t:x,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=h0(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=h0(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var _={t:o,v:o};if(u==null&&(u=h0(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(_.v=u.H>=12?"P":"A"),_.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(_.v=u.H>=12?"PM":"AM"),_.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(_.v=u.H>=12?"":""),_.t="T",a+=5,g="h"):(_.t="t",++a),u==null&&_.t==="T")return"";i[i.length]=_,c=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(DA)){if(u==null&&(u=h0(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",FA(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var E=0,P=0,L;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,c="h",E<1&&(E=1);break;case"s":(L=i[a].v.match(/\.0+$/))&&(P=Math.max(P,L[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var M="",K;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=dM(i[a].t.charCodeAt(0),i[a].v,u,P),i[a].t="t";break;case"n":case"?":for(K=a+1;i[K]!=null&&((o=i[K].t)==="?"||o==="D"||(o===" "||o==="t")&&i[K+1]!=null&&(i[K+1].t==="?"||i[K+1].t==="t"&&i[K+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[K].v==="/"||i[K].v===" "&&i[K+1]!=null&&i[K+1].t=="?"));)i[a].v+=i[K].v,i[K]={v:"",t:";"},++K;M+=i[a].v,a=K-1;break;case"G":i[a].t="t",i[a].v=d1(e,t);break}var se="",oe,N;if(M.length>0){M.charCodeAt(0)==40?(oe=e<0&&M.charCodeAt(0)===45?-e:e,N=Ja("n",M,oe)):(oe=e<0&&r>1?-e:e,N=Ja("n",M,oe),oe<0&&i[0]&&i[0].t=="t"&&(N=N.substr(1),i[0].v="-"+i[0].v)),K=N.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var C=i.length;if(A===i.length&&N.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(K>=i[a].v.length-1?(K-=i[a].v.length,i[a].v=N.substr(K+1,i[a].v.length)):K<0?i[a].v="":(i[a].v=N.substr(0,K+1),K=-1),i[a].t="t",C=a);K>=0&&C<i.length&&(i[C].v=N.substr(0,K+1)+i[C].v)}else if(A!==i.length&&N.indexOf("E")===-1){for(K=N.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,se=i[a].v.substr(l+1);l>=0;--l)K>=0&&(i[a].v.charAt(l)==="0"||i[a].v.charAt(l)==="#")&&(se=N.charAt(K--)+se);i[a].v=se,i[a].t="t",C=a}for(K>=0&&C<i.length&&(i[C].v=N.substr(0,K+1)+i[C].v),K=N.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,se=i[a].v.substr(0,l);l<i[a].v.length;++l)K<N.length&&(se+=N.charAt(K++));i[a].v=se,i[a].t="t",C=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(oe=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ja(i[a].t,i[a].v,oe),i[a].t="t");var B="";for(a=0;a!==i.length;++a)i[a]!=null&&(B+=i[a].v);return B}var Vw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Uw(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function bM(n,e){var t=EM(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(Vw),o=t[1].match(Vw);return Uw(e,a)?[r,t[0]]:Uw(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function hc(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:nr)[n],r==null&&(r=t.table&&t.table[Ow[n]]||nr[Ow[n]]),r==null&&(r=sM[n]||"General");break}if(hp(r,0))return d1(e,t);e instanceof Date&&(e=IA(e,t.date1904));var i=bM(r,e);if(hp(i[1]))return d1(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return TM(i[1],e,t,i[0])}function OA(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(nr[t]==null){e<0&&(e=t);continue}if(nr[t]==n){e=t;break}}e<0&&(e=391)}return nr[e]=n,e}function fm(n){for(var e=0;e!=392;++e)n[e]!==void 0&&OA(n[e],e)}function dm(){nr=iM()}var MA=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function AM(n){var e=typeof n=="number"?nr[n]:n;return e=e.replace(MA,"(\\d+)"),new RegExp("^"+e+"$")}function IM(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match(MA)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":c=p;break;case"m":a>=0?o=p:i=p;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var l=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?u:r==-1&&i==-1&&s==-1?l:u+"T"+l}var SM=function(){var n={};n.version="1.2.0";function e(){for(var N=0,A=new Array(256),C=0;C!=256;++C)N=C,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,A[C]=N;return typeof Int32Array<"u"?new Int32Array(A):A}var t=e();function r(N){var A=0,C=0,B=0,b=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)b[B]=N[B];for(B=0;B!=256;++B)for(C=N[B],A=256+B;A<4096;A+=256)C=b[A]=C>>>8^N[C&255];var S=[];for(B=1;B!=16;++B)S[B-1]=typeof Int32Array<"u"?b.subarray(B*256,B*256+256):b.slice(B*256,B*256+256);return S}var i=r(t),s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],l=i[5],d=i[6],g=i[7],p=i[8],x=i[9],_=i[10],E=i[11],P=i[12],L=i[13],M=i[14];function K(N,A){for(var C=A^-1,B=0,b=N.length;B<b;)C=C>>>8^t[(C^N.charCodeAt(B++))&255];return~C}function se(N,A){for(var C=A^-1,B=N.length-15,b=0;b<B;)C=M[N[b++]^C&255]^L[N[b++]^C>>8&255]^P[N[b++]^C>>16&255]^E[N[b++]^C>>>24]^_[N[b++]]^x[N[b++]]^p[N[b++]]^g[N[b++]]^d[N[b++]]^l[N[b++]]^u[N[b++]]^c[N[b++]]^o[N[b++]]^a[N[b++]]^s[N[b++]]^t[N[b++]];for(B+=15;b<B;)C=C>>>8^t[(C^N[b++])&255];return~C}function oe(N,A){for(var C=A^-1,B=0,b=N.length,S=0,R=0;B<b;)S=N.charCodeAt(B++),S<128?C=C>>>8^t[(C^S)&255]:S<2048?(C=C>>>8^t[(C^(192|S>>6&31))&255],C=C>>>8^t[(C^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,R=N.charCodeAt(B++)&1023,C=C>>>8^t[(C^(240|S>>8&7))&255],C=C>>>8^t[(C^(128|S>>2&63))&255],C=C>>>8^t[(C^(128|R>>6&15|(S&3)<<4))&255],C=C>>>8^t[(C^(128|R&63))&255]):(C=C>>>8^t[(C^(224|S>>12&15))&255],C=C>>>8^t[(C^(128|S>>6&63))&255],C=C>>>8^t[(C^(128|S&63))&255]);return~C}return n.table=t,n.bstr=K,n.buf=se,n.str=oe,n}(),Sn=function(){var e={};e.version="1.2.1";function t(j,ee){for(var Y=j.split("/"),X=ee.split("/"),Z=0,te=0,ye=Math.min(Y.length,X.length);Z<ye;++Z){if(te=Y[Z].length-X[Z].length)return te;if(Y[Z]!=X[Z])return Y[Z]<X[Z]?-1:1}return Y.length-X.length}function r(j){if(j.charAt(j.length-1)=="/")return j.slice(0,-1).indexOf("/")===-1?j:r(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(0,ee+1)}function i(j){if(j.charAt(j.length-1)=="/")return i(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(ee+1)}function s(j,ee){typeof ee=="string"&&(ee=new Date(ee));var Y=ee.getHours();Y=Y<<6|ee.getMinutes(),Y=Y<<5|ee.getSeconds()>>>1,j.write_shift(2,Y);var X=ee.getFullYear()-1980;X=X<<4|ee.getMonth()+1,X=X<<5|ee.getDate(),j.write_shift(2,X)}function a(j){var ee=j.read_shift(2)&65535,Y=j.read_shift(2)&65535,X=new Date,Z=Y&31;Y>>>=5;var te=Y&15;Y>>>=4,X.setMilliseconds(0),X.setFullYear(Y+1980),X.setMonth(te-1),X.setDate(Z);var ye=ee&31;ee>>>=5;var Ce=ee&63;return ee>>>=6,X.setHours(ee),X.setMinutes(Ce),X.setSeconds(ye<<1),X}function o(j){us(j,0);for(var ee={},Y=0;j.l<=j.length-4;){var X=j.read_shift(2),Z=j.read_shift(2),te=j.l+Z,ye={};switch(X){case 21589:Y=j.read_shift(1),Y&1&&(ye.mtime=j.read_shift(4)),Z>5&&(Y&2&&(ye.atime=j.read_shift(4)),Y&4&&(ye.ctime=j.read_shift(4))),ye.mtime&&(ye.mt=new Date(ye.mtime*1e3));break}j.l=te,ee[X]=ye}return ee}var c;function u(){return c||(c={})}function l(j,ee){if(j[0]==80&&j[1]==75)return bn(j,ee);if((j[0]|32)==109&&(j[1]|32)==105)return _i(j,ee);if(j.length<512)throw new Error("CFB file size "+j.length+" < 512");var Y=3,X=512,Z=0,te=0,ye=0,Ce=0,we=0,Te=[],Pe=j.slice(0,512);us(Pe,0);var Ke=d(Pe);switch(Y=Ke[0],Y){case 3:X=512;break;case 4:X=4096;break;case 0:if(Ke[1]==0)return bn(j,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+Y)}X!==512&&(Pe=j.slice(0,X),us(Pe,28));var it=j.slice(0,X);g(Pe,Y);var mt=Pe.read_shift(4,"i");if(Y===3&&mt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mt);Pe.l+=4,ye=Pe.read_shift(4,"i"),Pe.l+=4,Pe.chk("00100000","Mini Stream Cutoff Size: "),Ce=Pe.read_shift(4,"i"),Z=Pe.read_shift(4,"i"),we=Pe.read_shift(4,"i"),te=Pe.read_shift(4,"i");for(var et=-1,lt=0;lt<109&&(et=Pe.read_shift(4,"i"),!(et<0));++lt)Te[lt]=et;var Lt=p(j,X);E(we,te,Lt,X,Te);var nn=L(Lt,ye,Te,X);nn[ye].name="!Directory",Z>0&&Ce!==R&&(nn[Ce].name="!MiniFAT"),nn[Te[0]].name="!FAT",nn.fat_addrs=Te,nn.ssz=X;var rn={},An=[],yi=[],Cs=[];M(ye,nn,Lt,An,Z,rn,yi,Ce),x(yi,Cs,An),An.shift();var es={FileIndex:yi,FullPaths:Cs};return ee&&ee.raw&&(es.raw={header:it,sectors:Lt}),es}function d(j){if(j[j.l]==80&&j[j.l+1]==75)return[0,0];j.chk(ie,"Header Signature: "),j.l+=16;var ee=j.read_shift(2,"u");return[j.read_shift(2,"u"),ee]}function g(j,ee){var Y=9;switch(j.l+=2,Y=j.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+Y);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+Y);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Y)}j.chk("0600","Mini Sector Shift: "),j.chk("000000000000","Reserved: ")}function p(j,ee){for(var Y=Math.ceil(j.length/ee)-1,X=[],Z=1;Z<Y;++Z)X[Z-1]=j.slice(Z*ee,(Z+1)*ee);return X[Y-1]=j.slice(Y*ee),X}function x(j,ee,Y){for(var X=0,Z=0,te=0,ye=0,Ce=0,we=Y.length,Te=[],Pe=[];X<we;++X)Te[X]=Pe[X]=X,ee[X]=Y[X];for(;Ce<Pe.length;++Ce)X=Pe[Ce],Z=j[X].L,te=j[X].R,ye=j[X].C,Te[X]===X&&(Z!==-1&&Te[Z]!==Z&&(Te[X]=Te[Z]),te!==-1&&Te[te]!==te&&(Te[X]=Te[te])),ye!==-1&&(Te[ye]=X),Z!==-1&&X!=Te[X]&&(Te[Z]=Te[X],Pe.lastIndexOf(Z)<Ce&&Pe.push(Z)),te!==-1&&X!=Te[X]&&(Te[te]=Te[X],Pe.lastIndexOf(te)<Ce&&Pe.push(te));for(X=1;X<we;++X)Te[X]===X&&(te!==-1&&Te[te]!==te?Te[X]=Te[te]:Z!==-1&&Te[Z]!==Z&&(Te[X]=Te[Z]));for(X=1;X<we;++X)if(j[X].type!==0){if(Ce=X,Ce!=Te[Ce])do Ce=Te[Ce],ee[X]=ee[Ce]+"/"+ee[X];while(Ce!==0&&Te[Ce]!==-1&&Ce!=Te[Ce]);Te[X]=-1}for(ee[0]+="/",X=1;X<we;++X)j[X].type!==2&&(ee[X]+="/")}function _(j,ee,Y){for(var X=j.start,Z=j.size,te=[],ye=X;Y&&Z>0&&ye>=0;)te.push(ee.slice(ye*S,ye*S+S)),Z-=S,ye=Xc(Y,ye*4);return te.length===0?Be(0):Qr(te).slice(0,j.size)}function E(j,ee,Y,X,Z){var te=R;if(j===R){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(j!==-1){var ye=Y[j],Ce=(X>>>2)-1;if(!ye)return;for(var we=0;we<Ce&&(te=Xc(ye,we*4))!==R;++we)Z.push(te);E(Xc(ye,X-4),ee-1,Y,X,Z)}}function P(j,ee,Y,X,Z){var te=[],ye=[];Z||(Z=[]);var Ce=X-1,we=0,Te=0;for(we=ee;we>=0;){Z[we]=!0,te[te.length]=we,ye.push(j[we]);var Pe=Y[Math.floor(we*4/X)];if(Te=we*4&Ce,X<4+Te)throw new Error("FAT boundary crossed: "+we+" 4 "+X);if(!j[Pe])break;we=Xc(j[Pe],Te)}return{nodes:te,data:Kw([ye])}}function L(j,ee,Y,X){var Z=j.length,te=[],ye=[],Ce=[],we=[],Te=X-1,Pe=0,Ke=0,it=0,mt=0;for(Pe=0;Pe<Z;++Pe)if(Ce=[],it=Pe+ee,it>=Z&&(it-=Z),!ye[it]){we=[];var et=[];for(Ke=it;Ke>=0;){et[Ke]=!0,ye[Ke]=!0,Ce[Ce.length]=Ke,we.push(j[Ke]);var lt=Y[Math.floor(Ke*4/X)];if(mt=Ke*4&Te,X<4+mt)throw new Error("FAT boundary crossed: "+Ke+" 4 "+X);if(!j[lt]||(Ke=Xc(j[lt],mt),et[Ke]))break}te[it]={nodes:Ce,data:Kw([we])}}return te}function M(j,ee,Y,X,Z,te,ye,Ce){for(var we=0,Te=X.length?2:0,Pe=ee[j].data,Ke=0,it=0,mt;Ke<Pe.length;Ke+=128){var et=Pe.slice(Ke,Ke+128);us(et,64),it=et.read_shift(2),mt=Cv(et,0,it-Te),X.push(mt);var lt={name:mt,type:et.read_shift(1),color:et.read_shift(1),L:et.read_shift(4,"i"),R:et.read_shift(4,"i"),C:et.read_shift(4,"i"),clsid:et.read_shift(16),state:et.read_shift(4,"i"),start:0,size:0},Lt=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);Lt!==0&&(lt.ct=K(et,et.l-8));var nn=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);nn!==0&&(lt.mt=K(et,et.l-8)),lt.start=et.read_shift(4,"i"),lt.size=et.read_shift(4,"i"),lt.size<0&&lt.start<0&&(lt.size=lt.type=0,lt.start=R,lt.name=""),lt.type===5?(we=lt.start,Z>0&&we!==R&&(ee[we].name="!StreamData")):lt.size>=4096?(lt.storage="fat",ee[lt.start]===void 0&&(ee[lt.start]=P(Y,lt.start,ee.fat_addrs,ee.ssz)),ee[lt.start].name=lt.name,lt.content=ee[lt.start].data.slice(0,lt.size)):(lt.storage="minifat",lt.size<0?lt.size=0:we!==R&&lt.start!==R&&ee[we]&&(lt.content=_(lt,ee[we].data,(ee[Ce]||{}).data))),lt.content&&us(lt.content,0),te[mt]=lt,ye.push(lt)}}function K(j,ee){return new Date((fs(j,ee+4)/1e7*Math.pow(2,32)+fs(j,ee)/1e7-11644473600)*1e3)}function se(j,ee){return u(),l(c.readFileSync(j),ee)}function oe(j,ee){var Y=ee&&ee.type;switch(Y||hn&&Buffer.isBuffer(j)&&(Y="buffer"),Y||"base64"){case"file":return se(j,ee);case"base64":return l($s(io(j)),ee);case"binary":return l($s(j),ee)}return l(j,ee)}function N(j,ee){var Y=ee||{},X=Y.root||"Root Entry";if(j.FullPaths||(j.FullPaths=[]),j.FileIndex||(j.FileIndex=[]),j.FullPaths.length!==j.FileIndex.length)throw new Error("inconsistent CFB structure");j.FullPaths.length===0&&(j.FullPaths[0]=X+"/",j.FileIndex[0]={name:X,type:5}),Y.CLSID&&(j.FileIndex[0].clsid=Y.CLSID),A(j)}function A(j){var ee="Sh33tJ5";if(!Sn.find(j,"/"+ee)){var Y=Be(4);Y[0]=55,Y[1]=Y[3]=50,Y[2]=54,j.FileIndex.push({name:ee,type:2,content:Y,size:4,L:69,R:69,C:69}),j.FullPaths.push(j.FullPaths[0]+ee),C(j)}}function C(j,ee){N(j);for(var Y=!1,X=!1,Z=j.FullPaths.length-1;Z>=0;--Z){var te=j.FileIndex[Z];switch(te.type){case 0:X?Y=!0:(j.FileIndex.pop(),j.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(te.R*te.L*te.C)&&(Y=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(Y=!0);break;default:Y=!0;break}}if(!(!Y&&!ee)){var ye=new Date(1987,1,19),Ce=0,we=Object.create?Object.create(null):{},Te=[];for(Z=0;Z<j.FullPaths.length;++Z)we[j.FullPaths[Z]]=!0,j.FileIndex[Z].type!==0&&Te.push([j.FullPaths[Z],j.FileIndex[Z]]);for(Z=0;Z<Te.length;++Z){var Pe=r(Te[Z][0]);X=we[Pe],X||(Te.push([Pe,{name:i(Pe).replace("/",""),type:1,clsid:Ee,ct:ye,mt:ye,content:null}]),we[Pe]=!0)}for(Te.sort(function(mt,et){return t(mt[0],et[0])}),j.FullPaths=[],j.FileIndex=[],Z=0;Z<Te.length;++Z)j.FullPaths[Z]=Te[Z][0],j.FileIndex[Z]=Te[Z][1];for(Z=0;Z<Te.length;++Z){var Ke=j.FileIndex[Z],it=j.FullPaths[Z];if(Ke.name=i(it).replace("/",""),Ke.L=Ke.R=Ke.C=-(Ke.color=1),Ke.size=Ke.content?Ke.content.length:0,Ke.start=0,Ke.clsid=Ke.clsid||Ee,Z===0)Ke.C=Te.length>1?1:-1,Ke.size=0,Ke.type=5;else if(it.slice(-1)=="/"){for(Ce=Z+1;Ce<Te.length&&r(j.FullPaths[Ce])!=it;++Ce);for(Ke.C=Ce>=Te.length?-1:Ce,Ce=Z+1;Ce<Te.length&&r(j.FullPaths[Ce])!=r(it);++Ce);Ke.R=Ce>=Te.length?-1:Ce,Ke.type=1}else r(j.FullPaths[Z+1]||"")==r(it)&&(Ke.R=Z+1),Ke.type=2}}}function B(j,ee){var Y=ee||{};if(Y.fileType=="mad")return wt(j,Y);switch(C(j),Y.fileType){case"zip":return vi(j,Y)}var X=function(mt){for(var et=0,lt=0,Lt=0;Lt<mt.FileIndex.length;++Lt){var nn=mt.FileIndex[Lt];if(nn.content){var rn=nn.content.length;rn>0&&(rn<4096?et+=rn+63>>6:lt+=rn+511>>9)}}for(var An=mt.FullPaths.length+3>>2,yi=et+7>>3,Cs=et+127>>7,es=yi+lt+An+Cs,Oi=es+127>>7,ts=Oi<=109?0:Math.ceil((Oi-109)/127);es+Oi+ts+127>>7>Oi;)ts=++Oi<=109?0:Math.ceil((Oi-109)/127);var zr=[1,ts,Oi,Cs,An,lt,et,0];return mt.FileIndex[0].size=et<<6,zr[7]=(mt.FileIndex[0].start=zr[0]+zr[1]+zr[2]+zr[3]+zr[4]+zr[5])+(zr[6]+7>>3),zr}(j),Z=Be(X[7]<<9),te=0,ye=0;{for(te=0;te<8;++te)Z.write_shift(1,me[te]);for(te=0;te<8;++te)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),te=0;te<3;++te)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:R),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:R),Z.write_shift(4,X[1]),te=0;te<109;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1)}if(X[1])for(ye=0;ye<X[1];++ye){for(;te<236+ye*127;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1);Z.write_shift(-4,ye===X[1]-1?R:ye+1)}var Ce=function(mt){for(ye+=mt;te<ye-1;++te)Z.write_shift(-4,te+1);mt&&(++te,Z.write_shift(-4,R))};for(ye=te=0,ye+=X[1];te<ye;++te)Z.write_shift(-4,Ne.DIFSECT);for(ye+=X[2];te<ye;++te)Z.write_shift(-4,Ne.FATSECT);Ce(X[3]),Ce(X[4]);for(var we=0,Te=0,Pe=j.FileIndex[0];we<j.FileIndex.length;++we)Pe=j.FileIndex[we],Pe.content&&(Te=Pe.content.length,!(Te<4096)&&(Pe.start=ye,Ce(Te+511>>9)));for(Ce(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,Ne.ENDOFCHAIN);for(ye=te=0,we=0;we<j.FileIndex.length;++we)Pe=j.FileIndex[we],Pe.content&&(Te=Pe.content.length,!(!Te||Te>=4096)&&(Pe.start=ye,Ce(Te+63>>6)));for(;Z.l&511;)Z.write_shift(-4,Ne.ENDOFCHAIN);for(te=0;te<X[4]<<2;++te){var Ke=j.FullPaths[te];if(!Ke||Ke.length===0){for(we=0;we<17;++we)Z.write_shift(4,0);for(we=0;we<3;++we)Z.write_shift(4,-1);for(we=0;we<12;++we)Z.write_shift(4,0);continue}Pe=j.FileIndex[te],te===0&&(Pe.start=Pe.size?Pe.start-1:R);var it=te===0&&Y.root||Pe.name;if(Te=2*(it.length+1),Z.write_shift(64,it,"utf16le"),Z.write_shift(2,Te),Z.write_shift(1,Pe.type),Z.write_shift(1,Pe.color),Z.write_shift(-4,Pe.L),Z.write_shift(-4,Pe.R),Z.write_shift(-4,Pe.C),Pe.clsid)Z.write_shift(16,Pe.clsid,"hex");else for(we=0;we<4;++we)Z.write_shift(4,0);Z.write_shift(4,Pe.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,Pe.start),Z.write_shift(4,Pe.size),Z.write_shift(4,0)}for(te=1;te<j.FileIndex.length;++te)if(Pe=j.FileIndex[te],Pe.size>=4096)if(Z.l=Pe.start+1<<9,hn&&Buffer.isBuffer(Pe.content))Pe.content.copy(Z,Z.l,0,Pe.size),Z.l+=Pe.size+511&-512;else{for(we=0;we<Pe.size;++we)Z.write_shift(1,Pe.content[we]);for(;we&511;++we)Z.write_shift(1,0)}for(te=1;te<j.FileIndex.length;++te)if(Pe=j.FileIndex[te],Pe.size>0&&Pe.size<4096)if(hn&&Buffer.isBuffer(Pe.content))Pe.content.copy(Z,Z.l,0,Pe.size),Z.l+=Pe.size+63&-64;else{for(we=0;we<Pe.size;++we)Z.write_shift(1,Pe.content[we]);for(;we&63;++we)Z.write_shift(1,0)}if(hn)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function b(j,ee){var Y=j.FullPaths.map(function(we){return we.toUpperCase()}),X=Y.map(function(we){var Te=we.split("/");return Te[Te.length-(we.slice(-1)=="/"?2:1)]}),Z=!1;ee.charCodeAt(0)===47?(Z=!0,ee=Y[0].slice(0,-1)+ee):Z=ee.indexOf("/")!==-1;var te=ee.toUpperCase(),ye=Z===!0?Y.indexOf(te):X.indexOf(te);if(ye!==-1)return j.FileIndex[ye];var Ce=!te.match(l0);for(te=te.replace(yf,""),Ce&&(te=te.replace(l0,"!")),ye=0;ye<Y.length;++ye)if((Ce?Y[ye].replace(l0,"!"):Y[ye]).replace(yf,"")==te||(Ce?X[ye].replace(l0,"!"):X[ye]).replace(yf,"")==te)return j.FileIndex[ye];return null}var S=64,R=-2,ie="d0cf11e0a1b11ae1",me=[208,207,17,224,161,177,26,225],Ee="00000000000000000000000000000000",Ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _e(j,ee,Y){u();var X=B(j,Y);c.writeFileSync(ee,X)}function ke(j){for(var ee=new Array(j.length),Y=0;Y<j.length;++Y)ee[Y]=String.fromCharCode(j[Y]);return ee.join("")}function Fe(j,ee){var Y=B(j,ee);switch(ee&&ee.type||"buffer"){case"file":return u(),c.writeFileSync(ee.filename,Y),Y;case"binary":return typeof Y=="string"?Y:ke(Y);case"base64":return Xf(typeof Y=="string"?Y:ke(Y));case"buffer":if(hn)return Buffer.isBuffer(Y)?Y:ho(Y);case"array":return typeof Y=="string"?$s(Y):Y}return Y}var rt;function T(j){try{var ee=j.InflateRaw,Y=new ee;if(Y._processChunk(new Uint8Array([3,0]),Y._finishFlushFlag),Y.bytesRead)rt=j;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function D(j,ee){if(!rt)return Kt(j,ee);var Y=rt.InflateRaw,X=new Y,Z=X._processChunk(j.slice(j.l),X._finishFlushFlag);return j.l+=X.bytesRead,Z}function V(j){return rt?rt.deflateRawSync(j):qt(j)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(j){var ee=(j<<1|j<<11)&139536|(j<<5|j<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var ue=typeof Uint8Array<"u",xe=ue?new Uint8Array(256):[],Ve=0;Ve<256;++Ve)xe[Ve]=le(Ve);function ze(j,ee){var Y=xe[j&255];return ee<=8?Y>>>8-ee:(Y=Y<<8|xe[j>>8&255],ee<=16?Y>>>16-ee:(Y=Y<<8|xe[j>>16&255],Y>>>24-ee))}function Ze(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=6?0:j[X+1]<<8))>>>Y&3}function at(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=5?0:j[X+1]<<8))>>>Y&7}function Re(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=4?0:j[X+1]<<8))>>>Y&15}function re(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=3?0:j[X+1]<<8))>>>Y&31}function We(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=1?0:j[X+1]<<8))>>>Y&127}function _t(j,ee,Y){var X=ee&7,Z=ee>>>3,te=(1<<Y)-1,ye=j[Z]>>>X;return Y<8-X||(ye|=j[Z+1]<<8-X,Y<16-X)||(ye|=j[Z+2]<<16-X,Y<24-X)||(ye|=j[Z+3]<<24-X),ye&te}function $e(j,ee,Y){var X=ee&7,Z=ee>>>3;return X<=5?j[Z]|=(Y&7)<<X:(j[Z]|=Y<<X&255,j[Z+1]=(Y&7)>>8-X),ee+3}function nt(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y=(Y&1)<<X,j[Z]|=Y,ee+1}function ct(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y,ee+8}function ut(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y&255,j[Z+2]=Y>>>8,ee+16}function Tt(j,ee){var Y=j.length,X=2*Y>ee?2*Y:ee+5,Z=0;if(Y>=ee)return j;if(hn){var te=Lw(X);if(j.copy)j.copy(te);else for(;Z<j.length;++Z)te[Z]=j[Z];return te}else if(ue){var ye=new Uint8Array(X);if(ye.set)ye.set(j);else for(;Z<Y;++Z)ye[Z]=j[Z];return ye}return j.length=X,j}function At(j){for(var ee=new Array(j),Y=0;Y<j;++Y)ee[Y]=0;return ee}function Ft(j,ee,Y){var X=1,Z=0,te=0,ye=0,Ce=0,we=j.length,Te=ue?new Uint16Array(32):At(32);for(te=0;te<32;++te)Te[te]=0;for(te=we;te<Y;++te)j[te]=0;we=j.length;var Pe=ue?new Uint16Array(we):At(we);for(te=0;te<we;++te)Te[Z=j[te]]++,X<Z&&(X=Z),Pe[te]=0;for(Te[0]=0,te=1;te<=X;++te)Te[te+16]=Ce=Ce+Te[te-1]<<1;for(te=0;te<we;++te)Ce=j[te],Ce!=0&&(Pe[te]=Te[Ce+16]++);var Ke=0;for(te=0;te<we;++te)if(Ke=j[te],Ke!=0)for(Ce=ze(Pe[te],X)>>X-Ke,ye=(1<<X+4-Ke)-1;ye>=0;--ye)ee[Ce|ye<<Ke]=Ke&15|te<<4;return X}var It=ue?new Uint16Array(512):At(512),kt=ue?new Uint16Array(32):At(32);if(!ue){for(var Ht=0;Ht<512;++Ht)It[Ht]=0;for(Ht=0;Ht<32;++Ht)kt[Ht]=0}(function(){for(var j=[],ee=0;ee<32;ee++)j.push(5);Ft(j,kt,32);var Y=[];for(ee=0;ee<=143;ee++)Y.push(8);for(;ee<=255;ee++)Y.push(9);for(;ee<=279;ee++)Y.push(7);for(;ee<=287;ee++)Y.push(8);Ft(Y,It,288)})();var Ct=function(){for(var ee=ue?new Uint8Array(32768):[],Y=0,X=0;Y<ae.length-1;++Y)for(;X<ae[Y+1];++X)ee[X]=Y;for(;X<32768;++X)ee[X]=29;var Z=ue?new Uint8Array(259):[];for(Y=0,X=0;Y<J.length-1;++Y)for(;X<J[Y+1];++X)Z[X]=Y;function te(Ce,we){for(var Te=0;Te<Ce.length;){var Pe=Math.min(65535,Ce.length-Te),Ke=Te+Pe==Ce.length;for(we.write_shift(1,+Ke),we.write_shift(2,Pe),we.write_shift(2,~Pe&65535);Pe-- >0;)we[we.l++]=Ce[Te++]}return we.l}function ye(Ce,we){for(var Te=0,Pe=0,Ke=ue?new Uint16Array(32768):[];Pe<Ce.length;){var it=Math.min(65535,Ce.length-Pe);if(it<10){for(Te=$e(we,Te,+(Pe+it==Ce.length)),Te&7&&(Te+=8-(Te&7)),we.l=Te/8|0,we.write_shift(2,it),we.write_shift(2,~it&65535);it-- >0;)we[we.l++]=Ce[Pe++];Te=we.l*8;continue}Te=$e(we,Te,+(Pe+it==Ce.length)+2);for(var mt=0;it-- >0;){var et=Ce[Pe];mt=(mt<<5^et)&32767;var lt=-1,Lt=0;if((lt=Ke[mt])&&(lt|=Pe&-32768,lt>Pe&&(lt-=32768),lt<Pe))for(;Ce[lt+Lt]==Ce[Pe+Lt]&&Lt<250;)++Lt;if(Lt>2){et=Z[Lt],et<=22?Te=ct(we,Te,xe[et+1]>>1)-1:(ct(we,Te,3),Te+=5,ct(we,Te,xe[et-23]>>5),Te+=3);var nn=et<8?0:et-4>>2;nn>0&&(ut(we,Te,Lt-J[et]),Te+=nn),et=ee[Pe-lt],Te=ct(we,Te,xe[et]>>3),Te-=3;var rn=et<4?0:et-2>>1;rn>0&&(ut(we,Te,Pe-lt-ae[et]),Te+=rn);for(var An=0;An<Lt;++An)Ke[mt]=Pe&32767,mt=(mt<<5^Ce[Pe])&32767,++Pe;it-=Lt-1}else et<=143?et=et+48:Te=nt(we,Te,1),Te=ct(we,Te,xe[et]),Ke[mt]=Pe&32767,++Pe}Te=ct(we,Te,0)-1}return we.l=(Te+7)/8|0,we.l}return function(we,Te){return we.length<8?te(we,Te):ye(we,Te)}}();function qt(j){var ee=Be(50+Math.floor(j.length*1.1)),Y=Ct(j,ee);return ee.slice(0,Y)}var pt=ue?new Uint16Array(32768):At(32768),Fn=ue?new Uint16Array(32768):At(32768),Gt=ue?new Uint16Array(128):At(128),qr=1,tn=1;function Tn(j,ee){var Y=re(j,ee)+257;ee+=5;var X=re(j,ee)+1;ee+=5;var Z=Re(j,ee)+4;ee+=4;for(var te=0,ye=ue?new Uint8Array(19):At(19),Ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],we=1,Te=ue?new Uint8Array(8):At(8),Pe=ue?new Uint8Array(8):At(8),Ke=ye.length,it=0;it<Z;++it)ye[U[it]]=te=at(j,ee),we<te&&(we=te),Te[te]++,ee+=3;var mt=0;for(Te[0]=0,it=1;it<=we;++it)Pe[it]=mt=mt+Te[it-1]<<1;for(it=0;it<Ke;++it)(mt=ye[it])!=0&&(Ce[it]=Pe[mt]++);var et=0;for(it=0;it<Ke;++it)if(et=ye[it],et!=0){mt=xe[Ce[it]]>>8-et;for(var lt=(1<<7-et)-1;lt>=0;--lt)Gt[mt|lt<<et]=et&7|it<<3}var Lt=[];for(we=1;Lt.length<Y+X;)switch(mt=Gt[We(j,ee)],ee+=mt&7,mt>>>=3){case 16:for(te=3+Ze(j,ee),ee+=2,mt=Lt[Lt.length-1];te-- >0;)Lt.push(mt);break;case 17:for(te=3+at(j,ee),ee+=3;te-- >0;)Lt.push(0);break;case 18:for(te=11+We(j,ee),ee+=7;te-- >0;)Lt.push(0);break;default:Lt.push(mt),we<mt&&(we=mt);break}var nn=Lt.slice(0,Y),rn=Lt.slice(Y);for(it=Y;it<286;++it)nn[it]=0;for(it=X;it<30;++it)rn[it]=0;return qr=Ft(nn,pt,286),tn=Ft(rn,Fn,30),ee}function Di(j,ee){if(j[0]==3&&!(j[1]&3))return[Au(ee),2];for(var Y=0,X=0,Z=Lw(ee||1<<18),te=0,ye=Z.length>>>0,Ce=0,we=0;!(X&1);){if(X=at(j,Y),Y+=3,X>>>1)X>>1==1?(Ce=9,we=5):(Y=Tn(j,Y),Ce=qr,we=tn);else{Y&7&&(Y+=8-(Y&7));var Te=j[Y>>>3]|j[(Y>>>3)+1]<<8;if(Y+=32,Te>0)for(!ee&&ye<te+Te&&(Z=Tt(Z,te+Te),ye=Z.length);Te-- >0;)Z[te++]=j[Y>>>3],Y+=8;continue}for(;;){!ee&&ye<te+32767&&(Z=Tt(Z,te+32767),ye=Z.length);var Pe=_t(j,Y,Ce),Ke=X>>>1==1?It[Pe]:pt[Pe];if(Y+=Ke&15,Ke>>>=4,!(Ke>>>8&255))Z[te++]=Ke;else{if(Ke==256)break;Ke-=257;var it=Ke<8?0:Ke-4>>2;it>5&&(it=0);var mt=te+J[Ke];it>0&&(mt+=_t(j,Y,it),Y+=it),Pe=_t(j,Y,we),Ke=X>>>1==1?kt[Pe]:Fn[Pe],Y+=Ke&15,Ke>>>=4;var et=Ke<4?0:Ke-2>>1,lt=ae[Ke];for(et>0&&(lt+=_t(j,Y,et),Y+=et),!ee&&ye<mt&&(Z=Tt(Z,mt+100),ye=Z.length);te<mt;)Z[te]=Z[te-lt],++te}}}return ee?[Z,Y+7>>>3]:[Z.slice(0,te),Y+7>>>3]}function Kt(j,ee){var Y=j.slice(j.l||0),X=Di(Y,ee);return j.l+=X[1],X[0]}function Zi(j,ee){if(j)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function bn(j,ee){var Y=j;us(Y,0);var X=[],Z=[],te={FileIndex:X,FullPaths:Z};N(te,{root:ee.root});for(var ye=Y.length-4;(Y[ye]!=80||Y[ye+1]!=75||Y[ye+2]!=5||Y[ye+3]!=6)&&ye>=0;)--ye;Y.l=ye+4,Y.l+=4;var Ce=Y.read_shift(2);Y.l+=6;var we=Y.read_shift(4);for(Y.l=we,ye=0;ye<Ce;++ye){Y.l+=20;var Te=Y.read_shift(4),Pe=Y.read_shift(4),Ke=Y.read_shift(2),it=Y.read_shift(2),mt=Y.read_shift(2);Y.l+=8;var et=Y.read_shift(4),lt=o(Y.slice(Y.l+Ke,Y.l+Ke+it));Y.l+=Ke+it+mt;var Lt=Y.l;Y.l=et+4,br(Y,Te,Pe,te,lt),Y.l=Lt}return te}function br(j,ee,Y,X,Z){j.l+=2;var te=j.read_shift(2),ye=j.read_shift(2),Ce=a(j);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var we=j.read_shift(4),Te=j.read_shift(4),Pe=j.read_shift(4),Ke=j.read_shift(2),it=j.read_shift(2),mt="",et=0;et<Ke;++et)mt+=String.fromCharCode(j[j.l++]);if(it){var lt=o(j.slice(j.l,j.l+it));(lt[21589]||{}).mt&&(Ce=lt[21589].mt),((Z||{})[21589]||{}).mt&&(Ce=Z[21589].mt)}j.l+=it;var Lt=j.slice(j.l,j.l+Te);switch(ye){case 8:Lt=D(j,Pe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ye)}var nn=!1;te&8&&(we=j.read_shift(4),we==134695760&&(we=j.read_shift(4),nn=!0),Te=j.read_shift(4),Pe=j.read_shift(4)),Te!=ee&&Zi(nn,"Bad compressed size: "+ee+" != "+Te),Pe!=Y&&Zi(nn,"Bad uncompressed size: "+Y+" != "+Pe),gr(X,mt,Lt,{unsafe:!0,mt:Ce})}function vi(j,ee){var Y=ee||{},X=[],Z=[],te=Be(1),ye=Y.compression?8:0,Ce=0,we=0,Te=0,Pe=0,Ke=0,it=j.FullPaths[0],mt=it,et=j.FileIndex[0],lt=[],Lt=0;for(we=1;we<j.FullPaths.length;++we)if(mt=j.FullPaths[we].slice(it.length),et=j.FileIndex[we],!(!et.size||!et.content||mt=="Sh33tJ5")){var nn=Pe,rn=Be(mt.length);for(Te=0;Te<mt.length;++Te)rn.write_shift(1,mt.charCodeAt(Te)&127);rn=rn.slice(0,rn.l),lt[Ke]=SM.buf(et.content,0);var An=et.content;ye==8&&(An=V(An)),te=Be(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,Ce),te.write_shift(2,ye),et.mt?s(te,et.mt):te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,An.length),te.write_shift(4,et.content.length),te.write_shift(2,rn.length),te.write_shift(2,0),Pe+=te.length,X.push(te),Pe+=rn.length,X.push(rn),Pe+=An.length,X.push(An),te=Be(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,Ce),te.write_shift(2,ye),te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,An.length),te.write_shift(4,et.content.length),te.write_shift(2,rn.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,nn),Lt+=te.l,Z.push(te),Lt+=rn.length,Z.push(rn),++Ke}return te=Be(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,Ke),te.write_shift(2,Ke),te.write_shift(4,Lt),te.write_shift(4,Pe),te.write_shift(2,0),Qr([Qr(X),Qr(Z),te])}var un={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Nt(j,ee){if(j.ctype)return j.ctype;var Y=j.name||"",X=Y.match(/\.([^\.]+)$/);return X&&un[X[1]]||ee&&(X=(Y=ee).match(/[\.\\]([^\.\\])+$/),X&&un[X[1]])?un[X[1]]:"application/octet-stream"}function en(j){for(var ee=Xf(j),Y=[],X=0;X<ee.length;X+=76)Y.push(ee.slice(X,X+76));return Y.join(`\r
`)+`\r
`}function Fi(j){var ee=j.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Te){var Pe=Te.charCodeAt(0).toString(16).toUpperCase();return"="+(Pe.length==1?"0"+Pe:Pe)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Y=[],X=ee.split(`\r
`),Z=0;Z<X.length;++Z){var te=X[Z];if(te.length==0){Y.push("");continue}for(var ye=0;ye<te.length;){var Ce=76,we=te.slice(ye,ye+Ce);we.charAt(Ce-1)=="="?Ce--:we.charAt(Ce-2)=="="?Ce-=2:we.charAt(Ce-3)=="="&&(Ce-=3),we=te.slice(ye,ye+Ce),ye+=Ce,ye<te.length&&(we+="="),Y.push(we)}}return Y.join(`\r
`)}function Yn(j){for(var ee=[],Y=0;Y<j.length;++Y){for(var X=j[Y];Y<=j.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+j[++Y];ee.push(X)}for(var Z=0;Z<ee.length;++Z)ee[Z]=ee[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return $s(ee.join(`\r
`))}function Cr(j,ee,Y){for(var X="",Z="",te="",ye,Ce=0;Ce<10;++Ce){var we=ee[Ce];if(!we||we.match(/^\s*$/))break;var Te=we.match(/^(.*?):\s*([^\s].*)$/);if(Te)switch(Te[1].toLowerCase()){case"content-location":X=Te[2].trim();break;case"content-type":te=Te[2].trim();break;case"content-transfer-encoding":Z=Te[2].trim();break}}switch(++Ce,Z.toLowerCase()){case"base64":ye=$s(io(ee.slice(Ce).join("")));break;case"quoted-printable":ye=Yn(ee.slice(Ce));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var Pe=gr(j,X.slice(Y.length),ye,{unsafe:!0});te&&(Pe.ctype=te)}function _i(j,ee){if(ke(j.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Y=ee&&ee.root||"",X=(hn&&Buffer.isBuffer(j)?j.toString("binary"):ke(j)).split(`\r
`),Z=0,te="";for(Z=0;Z<X.length;++Z)if(te=X[Z],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),Y||(Y=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,Y.length)!=Y))for(;Y.length>0&&(Y=Y.slice(0,Y.length-1),Y=Y.slice(0,Y.lastIndexOf("/")+1),te.slice(0,Y.length)!=Y););var ye=(X[1]||"").match(/boundary="(.*?)"/);if(!ye)throw new Error("MAD cannot find boundary");var Ce="--"+(ye[1]||""),we=[],Te=[],Pe={FileIndex:we,FullPaths:Te};N(Pe);var Ke,it=0;for(Z=0;Z<X.length;++Z){var mt=X[Z];mt!==Ce&&mt!==Ce+"--"||(it++&&Cr(Pe,X.slice(Ke,Z),Y),Ke=Z)}return Pe}function wt(j,ee){var Y=ee||{},X=Y.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],te=j.FullPaths[0],ye=te,Ce=j.FileIndex[0],we=1;we<j.FullPaths.length;++we)if(ye=j.FullPaths[we].slice(te.length),Ce=j.FileIndex[we],!(!Ce.size||!Ce.content||ye=="Sh33tJ5")){ye=ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Lt){return"_x"+Lt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Lt){return"_u"+Lt.charCodeAt(0).toString(16)+"_"});for(var Te=Ce.content,Pe=hn&&Buffer.isBuffer(Te)?Te.toString("binary"):ke(Te),Ke=0,it=Math.min(1024,Pe.length),mt=0,et=0;et<=it;++et)(mt=Pe.charCodeAt(et))>=32&&mt<128&&++Ke;var lt=Ke>=it*4/5;Z.push(X),Z.push("Content-Location: "+(Y.root||"file:///C:/SheetJS/")+ye),Z.push("Content-Transfer-Encoding: "+(lt?"quoted-printable":"base64")),Z.push("Content-Type: "+Nt(Ce,ye)),Z.push(""),Z.push(lt?Fi(Pe):en(Pe))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function si(j){var ee={};return N(ee,j),ee}function gr(j,ee,Y,X){var Z=X&&X.unsafe;Z||N(j);var te=!Z&&Sn.find(j,ee);if(!te){var ye=j.FullPaths[0];ee.slice(0,ye.length)==ye?ye=ee:(ye.slice(-1)!="/"&&(ye+="/"),ye=(ye+ee).replace("//","/")),te={name:i(ee),type:2},j.FileIndex.push(te),j.FullPaths.push(ye),Z||Sn.utils.cfb_gc(j)}return te.content=Y,te.size=Y?Y.length:0,X&&(X.CLSID&&(te.clsid=X.CLSID),X.mt&&(te.mt=X.mt),X.ct&&(te.ct=X.ct)),te}function Xn(j,ee){N(j);var Y=Sn.find(j,ee);if(Y){for(var X=0;X<j.FileIndex.length;++X)if(j.FileIndex[X]==Y)return j.FileIndex.splice(X,1),j.FullPaths.splice(X,1),!0}return!1}function $n(j,ee,Y){N(j);var X=Sn.find(j,ee);if(X){for(var Z=0;Z<j.FileIndex.length;++Z)if(j.FileIndex[Z]==X)return j.FileIndex[Z].name=i(Y),j.FullPaths[Z]=Y,!0}return!1}function jn(j){C(j,!0)}return e.find=b,e.read=oe,e.parse=l,e.write=Fe,e.writeFile=_e,e.utils={cfb_new:si,cfb_add:gr,cfb_del:Xn,cfb_mov:$n,cfb_gc:jn,ReadShift:xf,CheckField:tI,prep_blob:us,bconcat:Qr,use_zlib:T,_deflateRaw:qt,_inflateRaw:Kt,consts:Ne},e}();function PM(n){return typeof n=="string"?hm(n):Array.isArray(n)?eM(n):n}function Id(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=hm(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?Qf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([PM(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Ad(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+n)}function ii(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function jw(n,e){for(var t=[],r=ii(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function Sv(n){for(var e=[],t=ii(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function pm(n){for(var e=[],t=ii(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function NM(n){for(var e=[],t=ii(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var dp=new Date(1899,11,30,0,0,0);function Xi(n,e){var t=n.getTime(),r=dp.getTime()+(n.getTimezoneOffset()-dp.getTimezoneOffset())*6e4;return(t-r)/(24*60*60*1e3)}var BA=new Date,kM=dp.getTime()+(BA.getTimezoneOffset()-dp.getTimezoneOffset())*6e4,qw=BA.getTimezoneOffset();function VA(n){var e=new Date;return e.setTime(n*24*60*60*1e3+kM),e.getTimezoneOffset()!==qw&&e.setTime(e.getTime()+(e.getTimezoneOffset()-qw)*6e4),e}var zw=new Date("2017-02-19T19:06:09.000Z"),UA=isNaN(zw.getFullYear())?new Date("2/19/17"):zw,CM=UA.getFullYear()==2017;function Ci(n,e){var t=new Date(n);if(CM)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(UA.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function mm(n,e){if(hn&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function Ji(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=Ji(n[t]));return e}function er(n,e){for(var t="";t.length<e;)t+=n;return t}function Qa(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var RM=["january","february","march","april","may","june","july","august","september","october","november","december"];function Jf(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&RM.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function $t(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return hn?r=ho(t):r=tM(t),Sn.utils.cfb_add(n,e,r)}Sn.utils.cfb_add(n,e,t)}else n.file(e,t)}function Pv(){return Sn.utils.cfb_new()}var Tr=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,LM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Nv=Sv(LM),kv=/[&<>'"]/g,DM=/[\u0000-\u0008\u000b-\u001f]/g;function wn(n){var e=n+"";return e.replace(kv,function(t){return Nv[t]}).replace(DM,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Ww(n){return wn(n).replace(/ /g,"_x0020_")}var jA=/[\u0000-\u001f]/g;function FM(n){var e=n+"";return e.replace(kv,function(t){return Nv[t]}).replace(/\n/g,"<br/>").replace(jA,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function OM(n){var e=n+"";return e.replace(kv,function(t){return Nv[t]}).replace(jA,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function MM(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function BM(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function fg(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Hw(n){var e=Au(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function $w(n){return ho(n,"binary").toString("utf8")}var f0="foo bar baz",wf=hn&&($w(f0)==fg(f0)&&$w||Hw(f0)==fg(f0)&&Hw)||fg,Qf=hn?function(n){return ho(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},VM=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}}(),qA=/(^\s|\s$|\n)/;function Zr(n,e){return"<"+n+(e.match(qA)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function Zf(n){return ii(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function st(n,e,t){return"<"+n+(t!=null?Zf(t):"")+(e!=null?(e.match(qA)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function p1(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function UM(n,e){switch(typeof n){case"string":var t=st("vt:lpwstr",wn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return st((n|0)==n?"vt:i4":"vt:r8",wn(String(n)));case"boolean":return st("vt:bool",n?"true":"false")}if(n instanceof Date)return st("vt:filetime",p1(n));throw new Error("Unable to serialize "+n)}var Mr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Th=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],hs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function jM(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function qM(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var Gw=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},Kw=hn?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:ho(e)})):Gw(n)}:Gw,Yw=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(uf(n,i)));return r.join("").replace(yf,"")},Cv=hn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(yf,""):Yw(n,e,t)}:Yw,Xw=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},zA=hn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):Xw(n,e,t)}:Xw,Jw=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(Tl(n,i)));return r.join("")},Sd=hn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):Jw(e,t,r)}:Jw,WA=function(n,e){var t=fs(n,e);return t>0?Sd(n,e+4,e+4+t-1):""},HA=WA,$A=function(n,e){var t=fs(n,e);return t>0?Sd(n,e+4,e+4+t-1):""},GA=$A,KA=function(n,e){var t=2*fs(n,e);return t>0?Sd(n,e+4,e+4+t-1):""},YA=KA,XA=function(e,t){var r=fs(e,t);return r>0?Cv(e,t+4,t+4+r):""},JA=XA,QA=function(n,e){var t=fs(n,e);return t>0?Sd(n,e+4,e+4+t):""},ZA=QA,eI=function(n,e){return jM(n,e)},pp=eI,Rv=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};hn&&(HA=function(e,t){if(!Buffer.isBuffer(e))return WA(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},GA=function(e,t){if(!Buffer.isBuffer(e))return $A(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},YA=function(e,t){if(!Buffer.isBuffer(e))return KA(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},JA=function(e,t){if(!Buffer.isBuffer(e))return XA(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},ZA=function(e,t){if(!Buffer.isBuffer(e))return QA(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},pp=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):eI(e,t)},Rv=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Tl=function(n,e){return n[e]},uf=function(n,e){return n[e+1]*256+n[e]},zM=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},fs=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},Xc=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},WM=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function xf(n,e){var t="",r,i,s=[],a,o,c,u;switch(e){case"dbcs":if(u=this.l,hn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(c=0;c<n;++c)t+=String.fromCharCode(uf(this,u)),u+=2;n*=2;break;case"utf8":t=Sd(this,this.l,this.l+n);break;case"utf16le":n*=2,t=Cv(this,this.l,this.l+n);break;case"wstr":return xf.call(this,n,"dbcs");case"lpstr-ansi":t=HA(this,this.l),n=4+fs(this,this.l);break;case"lpstr-cp":t=GA(this,this.l),n=4+fs(this,this.l);break;case"lpwstr":t=YA(this,this.l),n=4+2*fs(this,this.l);break;case"lpp4":n=4+fs(this,this.l),t=JA(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+fs(this,this.l),t=ZA(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=Tl(this,this.l+n++))!==0;)s.push(u0(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=uf(this,this.l+n))!==0;)s.push(u0(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,c=0;c<n;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Tl(this,u),this.l=u+1,o=xf.call(this,n-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(u0(uf(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,c=0;c!=n;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Tl(this,u),this.l=u+1,o=xf.call(this,n-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(u0(Tl(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=Tl(this,this.l),this.l++,r;case 2:return r=(e==="i"?zM:uf)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(r=(n>0?Xc:WM)(this,this.l),this.l+=4,r):(i=fs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=pp(this,this.l):i=pp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=zA(this,this.l,n);break}}return this.l+=n,t}var HM=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},$M=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},GM=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function KM(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)GM(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,HM(this,e,this.l);break;case 8:if(r=8,t==="f"){qM(this,e,this.l);break}case 16:break;case-4:r=4,$M(this,e,this.l);break}return this.l+=r,this}function tI(n,e){var t=zA(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function us(n,e){n.l=e,n.read_shift=xf,n.chk=tI,n.write_shift=KM}function Aa(n,e){n.l+=e}function Be(n){var e=Au(n);return us(e,0),e}function Ki(){var n=[],e=hn?256:2048,t=function(u){var l=Be(u);return us(l,0),l},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),Qr(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function He(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=jq[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&Rv(t)&&n.push(t)}}function Ef(n,e,t){var r=Ji(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function Qw(n,e,t){var r=Ji(n);return r.s=Ef(r.s,e.s,t),r.e=Ef(r.e,e.s,t),r}function Tf(n,e){if(n.cRel&&n.c<0)for(n=Ji(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=Ji(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=En(n);return!n.cRel&&n.cRel!=null&&(t=JM(t)),!n.rRel&&n.rRel!=null&&(t=YM(t)),t}function dg(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+pi(n.s.c)+":"+(n.e.cRel?"":"$")+pi(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+ni(n.s.r)+":"+(n.e.rRel?"":"$")+ni(n.e.r):Tf(n.s,e.biff)+":"+Tf(n.e,e.biff)}function Lv(n){return parseInt(XM(n),10)-1}function ni(n){return""+(n+1)}function YM(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function XM(n){return n.replace(/\$(\d+)$/,"$1")}function Dv(n){for(var e=QM(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function pi(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function JM(n){return n.replace(/^([A-Z])/,"$$$1")}function QM(n){return n.replace(/^\$([A-Z])/,"$1")}function ZM(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Br(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function En(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function gs(n){var e=n.indexOf(":");return e==-1?{s:Br(n),e:Br(n)}:{s:Br(n.slice(0,e)),e:Br(n.slice(e+1))}}function Er(n,e){return typeof e>"u"||typeof e=="number"?Er(n.s,n.e):(typeof n!="string"&&(n=En(n)),typeof e!="string"&&(e=En(e)),n==e?n:n+":"+e)}function Un(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function Zw(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=hc(n.z,t?Xi(e):e)}catch{}try{return n.w=hc((n.XF||{}).numFmtId||(t?14:0),t?Xi(e):e)}catch{return""+e}}function so(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?Pd[n.v]||n.v:e==null?Zw(n,n.v):Zw(n,e))}function Du(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function nI(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var c=typeof r.origin=="string"?Br(r.origin):r.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var l=Un(s["!ref"]);u.s.c=l.s.c,u.s.r=l.s.r,u.e.c=Math.max(u.e.c,l.e.c),u.e.r=Math.max(u.e.r,l.e.r),a==-1&&(u.e.r=a=l.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},x=a+d,_=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>_&&(u.s.c=_),u.e.r<x&&(u.e.r=x),u.e.c<_&&(u.e.c=_),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||nr[14],r.cellDates?(p.t="d",p.w=hc(p.z,Xi(p.v))):(p.t="n",p.v=Xi(p.v),p.w=hc(p.z,p.v))):p.t="s";if(i)s[x]||(s[x]=[]),s[x][_]&&s[x][_].z&&(p.z=s[x][_].z),s[x][_]=p;else{var E=En({c:_,r:x});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return u.s.c<1e7&&(s["!ref"]=Er(u)),s}function bh(n,e){return nI(null,n,e)}function e9(n){return n.read_shift(4,"i")}function Ks(n,e){return e||(e=Be(4)),e.write_shift(4,n),e}function mi(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function Vr(n,e){var t=!1;return e==null&&(t=!0,e=Be(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function t9(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function n9(n,e){return e||(e=Be(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Fv(n,e){var t=n.l,r=n.read_shift(1),i=mi(n),s=[],a={t:i,h:i};if(r&1){for(var o=n.read_shift(4),c=0;c!=o;++c)s.push(t9(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function r9(n,e){var t=!1;return e==null&&(t=!0,e=Be(15+4*n.t.length)),e.write_shift(1,0),Vr(n.t,e),t?e.slice(0,e.l):e}var i9=Fv;function s9(n,e){var t=!1;return e==null&&(t=!0,e=Be(23+4*n.t.length)),e.write_shift(1,1),Vr(n.t,e),e.write_shift(4,1),n9({},e),t?e.slice(0,e.l):e}function ks(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function Fu(n,e){return e==null&&(e=Be(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function Ou(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function Mu(n,e){return e==null&&(e=Be(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var a9=mi,rI=Vr;function Ov(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function mp(n,e){var t=!1;return e==null&&(t=!0,e=Be(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var o9=mi,m1=Ov,Mv=mp;function iI(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?pp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Xc(e,0)>>2;return t?i/100:i}function sI(n,e){e==null&&(e=Be(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function aI(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function c9(n,e){return e||(e=Be(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Bu=aI,Ah=c9;function Ih(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Iu(n,e){return(e||Be(8)).write_shift(8,n,"f")}function u9(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),c=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=_9[i];u&&(e.rgb=l5(u));break;case 2:e.rgb=l5([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function gp(n,e){if(e||(e=Be(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function l9(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function h9(n,e){e||(e=Be(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var oI=2,cs=3,d0=11,vp=19,p0=64,f9=65,d9=71,p9=4108,m9=4126,Yr=80,e5={1:{n:"CodePage",t:oI},2:{n:"Category",t:Yr},3:{n:"PresentationFormat",t:Yr},4:{n:"ByteCount",t:cs},5:{n:"LineCount",t:cs},6:{n:"ParagraphCount",t:cs},7:{n:"SlideCount",t:cs},8:{n:"NoteCount",t:cs},9:{n:"HiddenCount",t:cs},10:{n:"MultimediaClipCount",t:cs},11:{n:"ScaleCrop",t:d0},12:{n:"HeadingPairs",t:p9},13:{n:"TitlesOfParts",t:m9},14:{n:"Manager",t:Yr},15:{n:"Company",t:Yr},16:{n:"LinksUpToDate",t:d0},17:{n:"CharacterCount",t:cs},19:{n:"SharedDoc",t:d0},22:{n:"HyperlinksChanged",t:d0},23:{n:"AppVersion",t:cs,p:"version"},24:{n:"DigSig",t:f9},26:{n:"ContentType",t:Yr},27:{n:"ContentStatus",t:Yr},28:{n:"Language",t:Yr},29:{n:"Version",t:Yr},255:{},2147483648:{n:"Locale",t:vp},2147483651:{n:"Behavior",t:vp},1919054434:{}},t5={1:{n:"CodePage",t:oI},2:{n:"Title",t:Yr},3:{n:"Subject",t:Yr},4:{n:"Author",t:Yr},5:{n:"Keywords",t:Yr},6:{n:"Comments",t:Yr},7:{n:"Template",t:Yr},8:{n:"LastAuthor",t:Yr},9:{n:"RevNumber",t:Yr},10:{n:"EditTime",t:p0},11:{n:"LastPrinted",t:p0},12:{n:"CreatedDate",t:p0},13:{n:"ModifiedDate",t:p0},14:{n:"PageCount",t:cs},15:{n:"WordCount",t:cs},16:{n:"CharCount",t:cs},17:{n:"Thumbnail",t:d9},18:{n:"Application",t:Yr},19:{n:"DocSecurity",t:cs},255:{},2147483648:{n:"Locale",t:vp},2147483651:{n:"Behavior",t:vp},1919054434:{}};function g9(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var v9=g9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),_9=Ji(v9),Pd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},y9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},m0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function cI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function uI(n,e){var t=NM(y9),r=[],i;r[r.length]=Tr,r[r.length]=st("Types",null,{xmlns:Mr.CT,"xmlns:xsd":Mr.xsd,"xmlns:xsi":Mr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return st("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){n[c]&&n[c].length>0&&(i=n[c][0],r[r.length]=st("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:m0[c][e.bookType]||m0[c].xlsx}))},a=function(c){(n[c]||[]).forEach(function(u){r[r.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:m0[c][e.bookType]||m0[c].xlsx})})},o=function(c){(n[c]||[]).forEach(function(u){r[r.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[c][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var on={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function lI(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Bl(n){var e=[Tr,st("Relationships",null,{xmlns:Mr.RELS})];return ii(n["!id"]).forEach(function(t){e[e.length]=st("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function _n(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[on.HLINK,on.XPATH,on.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function w9(n){var e=[Tr];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function n5(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function x9(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function E9(n){var e=[Tr];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(n5(n[t][0],n[t][1])),e.push(x9("",n[t][0]));return e.push(n5("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function hI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+cp.version+"</meta:generator></office:meta></office:document-meta>"}var su=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function pg(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=wn(e),r[r.length]=t?st(n,e,t):Zr(n,e))}function fI(n,e){var t=e||{},r=[Tr,st("cp:coreProperties",null,{"xmlns:cp":Mr.CORE_PROPS,"xmlns:dc":Mr.dc,"xmlns:dcterms":Mr.dcterms,"xmlns:dcmitype":Mr.dcmitype,"xmlns:xsi":Mr.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&pg("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:p1(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&pg("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:p1(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=su.length;++s){var a=su[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&pg(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var Vl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],dI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function pI(n){var e=[],t=st;return n||(n={}),n.Application="SheetJS",e[e.length]=Tr,e[e.length]=st("Properties",null,{xmlns:Mr.EXT_PROPS,"xmlns:vt":Mr.vt}),Vl.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=wn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+wn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function mI(n){var e=[Tr,st("Properties",null,{xmlns:Mr.CUST_PROPS,"xmlns:vt":Mr.vt})];if(!n)return e.join("");var t=1;return ii(n).forEach(function(i){++t,e[e.length]=st("property",UM(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:wn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var r5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function T9(n,e){var t=[];return ii(r5).map(function(r){for(var i=0;i<su.length;++i)if(su[i][1]==r)return su[i];for(i=0;i<Vl.length;++i)if(Vl[i][1]==r)return Vl[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Zr(r5[r[1]]||r[1],i))}}),st("DocumentProperties",t.join(""),{xmlns:hs.o})}function b9(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&ii(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<su.length;++a)if(s==su[a][1])return;for(a=0;a<Vl.length;++a)if(s==Vl[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(st(Ww(s),o,{"dt:dt":c}))}}),e&&ii(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(st(Ww(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+hs.o+'">'+i.join("")+"</"+r+">"}function A9(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Be(8);return a.write_shift(4,r),a.write_shift(4,i),a}function i5(n,e){var t=Be(4),r=Be(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Be(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=A9(e);break;case 31:case 80:for(r=Be(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return Qr([t,r])}var gI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function I9(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function s5(n,e,t){var r=Be(8),i=[],s=[],a=8,o=0,c=Be(8),u=Be(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),a+=8+c.length,!e){u=Be(8),u.write_shift(4,0),i.unshift(u);var l=[Be(4)];for(l[0].write_shift(4,n.length),o=0;o<n.length;++o){var d=n[o][0];for(c=Be(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);l.push(c)}c=Qr(l),s.unshift(c),a+=8+c.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(gI.indexOf(n[o][0])>-1||dI.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var x=t[p];if(x.p=="version"&&typeof g=="string"){var _=g.split(".");g=(+_[0]<<16)+(+_[1]||0)}c=i5(x.t,g)}else{var E=I9(g);E==-1&&(E=31,g=String(g)),c=i5(E,g)}s.push(c),u=Be(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+c.length}var P=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,P),P+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),Qr([r].concat(i).concat(s))}function a5(n,e,t,r,i,s){var a=Be(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Sn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=s5(n,t,r);if(o.push(c),i){var u=s5(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(u)}return Qr(o)}function S9(n,e){e||(e=Be(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function P9(n,e){return n.read_shift(e)===1}function Si(n,e){return e||(e=Be(2)),e.write_shift(2,+!!n),e}function vI(n){return n.read_shift(2,"u")}function Is(n,e){return e||(e=Be(2)),e.write_shift(2,n),e}function _I(n,e,t){return t||(t=Be(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function yI(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function N9(n){var e=n.t||"",t=Be(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Be(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return Qr(i)}function k9(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function C9(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):k9(n,r,t)}function R9(n,e,t){if(t.biff>5)return C9(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function wI(n,e,t){return t||(t=Be(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function o5(n,e){e||(e=Be(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function L9(n){var e=Be(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),o5(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&o5(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var c=0;r.slice(c*3,c*3+3)=="../"||r.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,r.length-3*c+1),t=0;t<r.length-3*c;++t)e.write_shift(1,r.charCodeAt(t+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Su(n,e,t,r){return r||(r=Be(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function D9(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function F9(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function xI(n,e){return e||(e=Be(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function Bv(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Be(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function O9(n,e){var t=!e||e.biff==8,r=Be(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function M9(n,e){var t=!e||e.biff>=8?2:1,r=Be(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function B9(n,e){var t=Be(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=N9(n[i]);var s=Qr([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function V9(){var n=Be(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function U9(n){var e=Be(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function j9(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Be(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function q9(n,e,t,r){var i=Be(10);return Su(n,e,r,i),i.write_shift(4,t),i}function z9(n,e,t,r,i){var s=!i||i.biff==8,a=Be(8+ +s+(1+s)*t.length);return Su(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function W9(n,e,t,r){var i=t&&t.biff==5;r||(r=Be(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function H9(n,e){var t=e.biff==8||!e.biff?4:2,r=Be(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function c5(n,e,t,r){var i=t&&t.biff==5;r||(r=Be(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function $9(n){var e=Be(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function G9(n,e,t,r,i,s){var a=Be(8);return Su(n,e,r,a),_I(t,s,a),a}function K9(n,e,t,r){var i=Be(14);return Su(n,e,r,i),Iu(t,i),i}function Y9(n,e,t){if(t.biff<8)return X9(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(D9(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function X9(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=yI(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function J9(n){var e=Be(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)xI(n[t],e);return e}function Q9(n){var e=Be(24),t=Br(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return Qr([e,L9(n[1])])}function Z9(n){var e=n[1].Tooltip,t=Be(10+2*(e.length+1));t.write_shift(2,2048);var r=Br(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function eB(n){return n||(n=Be(4)),n.write_shift(2,1),n.write_shift(2,1),n}function tB(n,e,t){if(!t.cellStyles)return Aa(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),c=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:c};return(t.biff>=5||!t.biff)&&(u.level=c>>8&7),u}function nB(n,e){var t=Be(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function rB(n){for(var e=Be(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function iB(n,e,t){var r=Be(15);return kd(r,n,e),r.write_shift(8,t,"f"),r}function sB(n,e,t){var r=Be(9);return kd(r,n,e),r.write_shift(2,t),r}var aB=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Sv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,c){var u=[],l=Au(1);switch(c.type){case"base64":l=$s(io(o));break;case"binary":l=$s(o);break;case"buffer":case"array":l=o;break}us(l,0);var d=l.read_shift(1),g=!!(d&136),p=!1,x=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var _=0,E=521;d==2&&(_=l.read_shift(2)),l.l+=3,d!=2&&(_=l.read_shift(4)),_>1048576&&(_=1e6),d!=2&&(E=l.read_shift(2));var P=l.read_shift(2),L=c.codepage||1252;d!=2&&(l.l+=16,l.read_shift(1),l[l.l]!==0&&(L=n[l[l.l]]),l.l+=1,l.l+=2),x&&(l.l+=36);for(var M=[],K={},se=Math.min(l.length,d==2?521:E-10-(p?264:0)),oe=x?32:11;l.l<se&&l[l.l]!=13;)switch(K={},K.name=up.utils.decode(L,l.slice(l.l,l.l+oe)).replace(/[\u0000\r\n].*$/g,""),l.l+=oe,K.type=String.fromCharCode(l.read_shift(1)),d!=2&&!x&&(K.offset=l.read_shift(4)),K.len=l.read_shift(1),d==2&&(K.offset=l.read_shift(2)),K.dec=l.read_shift(1),K.name.length&&M.push(K),d!=2&&(l.l+=x?13:14),K.type){case"B":(!p||K.len!=8)&&c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+K.type)}if(l[l.l]!==13&&(l.l=E-1),l.read_shift(1)!==13)throw new Error("DBF Terminator not found "+l.l+" "+l[l.l]);l.l=E;var N=0,A=0;for(u[0]=[],A=0;A!=M.length;++A)u[0][A]=M[A].name;for(;_-- >0;){if(l[l.l]===42){l.l+=P;continue}for(++l.l,u[++N]=[],A=0,A=0;A!=M.length;++A){var C=l.slice(l.l,l.l+M[A].len);l.l+=M[A].len,us(C,0);var B=up.utils.decode(L,C);switch(M[A].type){case"C":B.trim().length&&(u[N][A]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[N][A]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[N][A]=B;break;case"F":u[N][A]=parseFloat(B.trim());break;case"+":case"I":u[N][A]=x?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[N][A]=!0;break;case"N":case"F":u[N][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[N][A]="##MEMO##"+(x?parseInt(B.trim(),10):C.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[N][A]=+B||0);break;case"@":u[N][A]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":u[N][A]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":u[N][A]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[N][A]=-C.read_shift(-8,"f");break;case"B":if(p&&M[A].len==8){u[N][A]=C.read_shift(8,"f");break}case"G":case"P":C.l+=M[A].len;break;case"0":if(M[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+M[A].type)}}}if(d!=2&&l.l<l.length&&l[l.l++]!=26)throw new Error("DBF EOF Marker missing "+(l.l-1)+" of "+l.length+" "+l[l.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=M,u}function r(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var l=bh(t(o,u),u);return l["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,l}function i(o,c){try{return Du(r(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var u=c||{};if(+u.codepage>=0&&Yf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var l=Ki(),d=Ep(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),x=o["!cols"]||[],_=0,E=0,P=0,L=1;for(_=0;_<g.length;++_){if(((x[_]||{}).DBF||{}).name){g[_]=x[_].DBF.name,++P;continue}if(g[_]!=null){if(++P,typeof g[_]=="number"&&(g[_]=g[_].toString(10)),typeof g[_]!="string")throw new Error("DBF Invalid column name "+g[_]+" |"+typeof g[_]+"|");if(g.indexOf(g[_])!==_){for(E=0;E<1024;++E)if(g.indexOf(g[_]+"_"+E)==-1){g[_]+="_"+E;break}}}}var M=Un(o["!ref"]),K=[],se=[],oe=[];for(_=0;_<=M.e.c-M.s.c;++_){var N="",A="",C=0,B=[];for(E=0;E<p.length;++E)p[E][_]!=null&&B.push(p[E][_]);if(B.length==0||g[_]==null){K[_]="?";continue}for(E=0;E<B.length;++E){switch(typeof B[E]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=B[E]instanceof Date?"D":"C";break;default:A="C"}C=Math.max(C,String(B[E]).length),N=N&&N!=A?"C":A}C>250&&(C=250),A=((x[_]||{}).DBF||{}).type,A=="C"&&x[_].DBF.len>C&&(C=x[_].DBF.len),N=="B"&&A=="N"&&(N="N",oe[_]=x[_].DBF.dec,C=x[_].DBF.len),se[_]=N=="C"||A=="N"?C:s[N]||0,L+=se[_],K[_]=N}var b=l.next(32);for(b.write_shift(4,318902576),b.write_shift(4,p.length),b.write_shift(2,296+32*P),b.write_shift(2,L),_=0;_<4;++_)b.write_shift(4,0);for(b.write_shift(4,0|(+e[TA]||3)<<8),_=0,E=0;_<g.length;++_)if(g[_]!=null){var S=l.next(32),R=(g[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,R,"sbcs"),S.write_shift(1,K[_]=="?"?"C":K[_],"sbcs"),S.write_shift(4,E),S.write_shift(1,se[_]||s[K[_]]||0),S.write_shift(1,oe[_]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),E+=se[_]||s[K[_]]||0}var ie=l.next(264);for(ie.write_shift(4,13),_=0;_<65;++_)ie.write_shift(4,0);for(_=0;_<p.length;++_){var me=l.next(L);for(me.write_shift(1,0),E=0;E<g.length;++E)if(g[E]!=null)switch(K[E]){case"L":me.write_shift(1,p[_][E]==null?63:p[_][E]?84:70);break;case"B":me.write_shift(8,p[_][E]||0,"f");break;case"N":var Ee="0";for(typeof p[_][E]=="number"&&(Ee=p[_][E].toFixed(oe[E]||0)),P=0;P<se[E]-Ee.length;++P)me.write_shift(1,32);me.write_shift(1,Ee,"sbcs");break;case"D":p[_][E]?(me.write_shift(4,("0000"+p[_][E].getFullYear()).slice(-4),"sbcs"),me.write_shift(2,("00"+(p[_][E].getMonth()+1)).slice(-2),"sbcs"),me.write_shift(2,("00"+p[_][E].getDate()).slice(-2),"sbcs")):me.write_shift(8,"00000000","sbcs");break;case"C":var Ne=String(p[_][E]!=null?p[_][E]:"").slice(0,se[E]);for(me.write_shift(1,Ne,"sbcs"),P=0;P<se[E]-Ne.length;++P)me.write_shift(1,32);break}}return l.next(1).write_shift(1,26),l.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}}(),oB=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ii(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var x=n[p];return typeof x=="number"?Rw(x):x},r=function(g,p,x){var _=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return _==59?g:Rw(_)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(io(g),p);case"binary":return s(g,p);case"buffer":return s(hn&&Buffer.isBuffer(g)?g.toString("binary"):Ad(g),p);case"array":return s(mm(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var x=g.split(/[\n\r]+/),_=-1,E=-1,P=0,L=0,M=[],K=[],se=null,oe={},N=[],A=[],C=[],B=0,b;for(+p.codepage>=0&&Yf(+p.codepage);P!==x.length;++P){B=0;var S=x[P].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),R=S.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),ie=R[0],me;if(S.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&K.push(S.slice(3).replace(/;;/g,";"));break;case"C":var Ee=!1,Ne=!1,_e=!1,ke=!1,Fe=-1,rt=-1;for(L=1;L<R.length;++L)switch(R[L].charAt(0)){case"A":break;case"X":E=parseInt(R[L].slice(1))-1,Ne=!0;break;case"Y":for(_=parseInt(R[L].slice(1))-1,Ne||(E=0),b=M.length;b<=_;++b)M[b]=[];break;case"K":me=R[L].slice(1),me.charAt(0)==='"'?me=me.slice(1,me.length-1):me==="TRUE"?me=!0:me==="FALSE"?me=!1:isNaN(Qa(me))?isNaN(Jf(me).getDate())||(me=Ci(me)):(me=Qa(me),se!==null&&FA(se)&&(me=VA(me))),Ee=!0;break;case"E":ke=!0;var T=sV(R[L].slice(1),{r:_,c:E});M[_][E]=[M[_][E],T];break;case"S":_e=!0,M[_][E]=[M[_][E],"S5S"];break;case"G":break;case"R":Fe=parseInt(R[L].slice(1))-1;break;case"C":rt=parseInt(R[L].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}if(Ee&&(M[_][E]&&M[_][E].length==2?M[_][E][0]=me:M[_][E]=me,se=null),_e){if(ke)throw new Error("SYLK shared formula cannot have own formula");var D=Fe>-1&&M[Fe][rt];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");M[_][E][1]=aV(D[1],{r:_-Fe,c:E-rt})}break;case"F":var V=0;for(L=1;L<R.length;++L)switch(R[L].charAt(0)){case"X":E=parseInt(R[L].slice(1))-1,++V;break;case"Y":for(_=parseInt(R[L].slice(1))-1,b=M.length;b<=_;++b)M[b]=[];break;case"M":B=parseInt(R[L].slice(1))/20;break;case"F":break;case"G":break;case"P":se=K[parseInt(R[L].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=R[L].slice(1).split(" "),b=parseInt(C[0],10);b<=parseInt(C[1],10);++b)B=parseInt(C[2],10),A[b-1]=B===0?{hidden:!0}:{wch:B},Vv(A[b-1]);break;case"C":E=parseInt(R[L].slice(1))-1,A[E]||(A[E]={});break;case"R":_=parseInt(R[L].slice(1))-1,N[_]||(N[_]={}),B>0?(N[_].hpt=B,N[_].hpx=II(B)):B===0&&(N[_].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}V<1&&(se=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}}return N.length>0&&(oe["!rows"]=N),A.length>0&&(oe["!cols"]=A),p&&p.sheetRows&&(M=M.slice(0,p.sheetRows)),[M,oe]}function a(g,p){var x=i(g,p),_=x[0],E=x[1],P=bh(_,p);return ii(E).forEach(function(L){P[L]=E[L]}),P}function o(g,p){return Du(a(g,p),p)}function c(g,p,x,_){var E="C;Y"+(x+1)+";X"+(_+1)+";K";switch(g.t){case"n":E+=g.v||0,g.f&&!g.F&&(E+=";E"+jv(g.f,{r:x,c:_}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||g.v;break;case"d":E+='"'+(g.w||g.v)+'"';break;case"s":E+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,p){p.forEach(function(x,_){var E="F;W"+(_+1)+" "+(_+1)+" ";x.hidden?E+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=_p(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=yp(x.wpx)),typeof x.wch=="number"&&(E+=Math.round(x.wch))),E.charAt(E.length-1)!=" "&&g.push(E)})}function l(g,p){p.forEach(function(x,_){var E="F;";x.hidden?E+="M0;":x.hpt?E+="M"+20*x.hpt+";":x.hpx&&(E+="M"+20*wp(x.hpx)+";"),E.length>2&&g.push(E+"R"+(_+1))})}function d(g,p){var x=["ID;PWXL;N;E"],_=[],E=Un(g["!ref"]),P,L=Array.isArray(g),M=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&l(x,g["!rows"]),x.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var K=E.s.r;K<=E.e.r;++K)for(var se=E.s.c;se<=E.e.c;++se){var oe=En({r:K,c:se});P=L?(g[K]||[])[se]:g[oe],!(!P||P.v==null&&(!P.f||P.F))&&_.push(c(P,g,K,se))}return x.join(M)+M+_.join(M)+M+"E"+M}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),cB=function(){function n(s,a){switch(a.type){case"base64":return e(io(s),a);case"binary":return e(s,a);case"buffer":return e(hn&&Buffer.isBuffer(s)?s.toString("binary"):Ad(s),a);case"array":return e(mm(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),c=-1,u=-1,l=0,d=[];l!==o.length;++l){if(o[l].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var g=o[l].trim().split(","),p=g[0],x=g[1];++l;for(var _=o[l]||"";(_.match(/["]/g)||[]).length&1&&l<o.length-1;)_+=`
`+o[++l];switch(_=_.trim(),+p){case-1:if(_==="BOT"){d[++c]=[],u=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?d[c][u]=!0:_==="FALSE"?d[c][u]=!1:isNaN(Qa(x))?isNaN(Jf(x).getDate())?d[c][u]=x:d[c][u]=Ci(x):d[c][u]=Qa(x),++u;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),d[c][u++]=_!==""?_:null;break}if(_==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return bh(n(s,a),a)}function r(s,a){return Du(t(s,a),a)}var i=function(){var s=function(c,u,l,d,g){c.push(u),c.push(l+","+d),c.push('"'+g.replace(/"/g,'""')+'"')},a=function(c,u,l,d){c.push(u+","+l),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],l=Un(c["!ref"]),d,g=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,l.e.r-l.s.r+1,""),s(u,"TUPLES",0,l.e.c-l.s.c+1,""),s(u,"DATA",0,0,"");for(var p=l.s.r;p<=l.e.r;++p){a(u,-1,0,"BOT");for(var x=l.s.c;x<=l.e.c;++x){var _=En({r:p,c:x});if(d=g?(c[p]||[])[x]:c[_],!d){a(u,1,0,"");continue}switch(d.t){case"n":var E=d.w;!E&&d.v!=null&&(E=d.v),E==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,E,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=hc(d.z||nr[14],Xi(Ci(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var P=`\r
`,L=u.join(P);return L}}();return{to_workbook:r,to_sheet:t,from_sheet:i}}(),EI=function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),x=-1,_=-1,E=0,P=[];E!==p.length;++E){var L=p[E].trim().split(":");if(L[0]==="cell"){var M=Br(L[1]);if(P.length<=M.r)for(x=P.length;x<=M.r;++x)P[x]||(P[x]=[]);switch(x=M.r,_=M.c,L[2]){case"t":P[x][_]=n(L[3]);break;case"v":P[x][_]=+L[3];break;case"vtf":var K=L[L.length-1];case"vtc":switch(L[3]){case"nl":P[x][_]=!!+L[4];break;default:P[x][_]=+L[4];break}L[2]=="vtf"&&(P[x][_]=[P[x][_],K])}}}return g&&g.sheetRows&&(P=P.slice(0,g.sheetRows)),P}function r(d,g){return bh(t(d,g),g)}function i(d,g){return Du(r(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],x,_="",E=gs(d["!ref"]),P=Array.isArray(d),L=E.s.r;L<=E.e.r;++L)for(var M=E.s.c;M<=E.e.c;++M)if(_=En({r:L,c:M}),x=P?(d[L]||[])[M]:d[_],!(!x||x.v==null||x.t==="z")){switch(p=["cell",_,"t"],x.t){case"s":case"str":p.push(e(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=e(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var K=Xi(Ci(x.v));p[2]="vtc",p[3]="nd",p[4]=""+K,p[5]=x.w||hc(x.z||nr[14],K);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function l(d){return[s,a,o,a,u(d),c].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:l}}(),uB=function(){function n(l,d,g,p,x){x.raw?d[g][p]=l:l===""||(l==="TRUE"?d[g][p]=!0:l==="FALSE"?d[g][p]=!1:isNaN(Qa(l))?isNaN(Jf(l).getDate())?d[g][p]=l:d[g][p]=Ci(l):d[g][p]=Qa(l))}function e(l,d){var g=d||{},p=[];if(!l||l.length===0)return p;for(var x=l.split(/[\r\n]/),_=x.length-1;_>=0&&x[_].length===0;)--_;for(var E=10,P=0,L=0;L<=_;++L)P=x[L].indexOf(" "),P==-1?P=x[L].length:P++,E=Math.max(E,P);for(L=0;L<=_;++L){p[L]=[];var M=0;for(n(x[L].slice(0,E).trim(),p,L,M,g),M=1;M<=(x[L].length-E)/10+1;++M)n(x[L].slice(E+(M-1)*10,E+M*10).trim(),p,L,M,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(l){for(var d={},g=!1,p=0,x=0;p<l.length;++p)(x=l.charCodeAt(p))==34?g=!g:!g&&x in t&&(d[x]=(d[x]||0)+1);x=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p]);if(!x.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p])}return x.sort(function(_,E){return _[0]-E[0]||r[_[1]]-r[E[1]]}),t[x.pop()[1]]||44}function s(l,d){var g=d||{},p="",x=g.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};l.slice(0,4)=="sep="?l.charCodeAt(5)==13&&l.charCodeAt(6)==10?(p=l.charAt(4),l=l.slice(7)):l.charCodeAt(5)==13||l.charCodeAt(5)==10?(p=l.charAt(4),l=l.slice(6)):p=i(l.slice(0,1024)):g&&g.FS?p=g.FS:p=i(l.slice(0,1024));var E=0,P=0,L=0,M=0,K=0,se=p.charCodeAt(0),oe=!1,N=0,A=l.charCodeAt(0);l=l.replace(/\r\n/mg,`
`);var C=g.dateNF!=null?AM(g.dateNF):null;function B(){var b=l.slice(M,K),S={};if(b.charAt(0)=='"'&&b.charAt(b.length-1)=='"'&&(b=b.slice(1,-1).replace(/""/g,'"')),b.length===0)S.t="z";else if(g.raw)S.t="s",S.v=b;else if(b.trim().length===0)S.t="s",S.v=b;else if(b.charCodeAt(0)==61)b.charCodeAt(1)==34&&b.charCodeAt(b.length-1)==34?(S.t="s",S.v=b.slice(2,-1).replace(/""/g,'"')):oV(b)?(S.t="n",S.f=b.slice(1)):(S.t="s",S.v=b);else if(b=="TRUE")S.t="b",S.v=!0;else if(b=="FALSE")S.t="b",S.v=!1;else if(!isNaN(L=Qa(b)))S.t="n",g.cellText!==!1&&(S.w=b),S.v=L;else if(!isNaN(Jf(b).getDate())||C&&b.match(C)){S.z=g.dateNF||nr[14];var R=0;C&&b.match(C)&&(b=IM(b,g.dateNF,b.match(C)||[]),R=1),g.cellDates?(S.t="d",S.v=Ci(b,R)):(S.t="n",S.v=Xi(Ci(b,R))),g.cellText!==!1&&(S.w=hc(S.z,S.v instanceof Date?Xi(S.v):S.v)),g.cellNF||delete S.z}else S.t="s",S.v=b;if(S.t=="z"||(g.dense?(x[E]||(x[E]=[]),x[E][P]=S):x[En({c:P,r:E})]=S),M=K+1,A=l.charCodeAt(M),_.e.c<P&&(_.e.c=P),_.e.r<E&&(_.e.r=E),N==se)++P;else if(P=0,++E,g.sheetRows&&g.sheetRows<=E)return!0}e:for(;K<l.length;++K)switch(N=l.charCodeAt(K)){case 34:A===34&&(oe=!oe);break;case se:case 10:case 13:if(!oe&&B())break e;break}return K-M>0&&B(),x["!ref"]=Er(_),x}function a(l,d){return!(d&&d.PRN)||d.FS||l.slice(0,4)=="sep="||l.indexOf("	")>=0||l.indexOf(",")>=0||l.indexOf(";")>=0?s(l,d):bh(e(l,d),d)}function o(l,d){var g="",p=d.type=="string"?[0,0,0,0]:xz(l,d);switch(d.type){case"base64":g=io(l);break;case"binary":g=l;break;case"buffer":d.codepage==65001?g=l.toString("utf8"):d.codepage&&typeof up<"u"||(g=hn&&Buffer.isBuffer(l)?l.toString("binary"):Ad(l));break;case"array":g=mm(l);break;case"string":g=l;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=wf(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=wf(g):d.type=="binary"&&typeof up<"u",g.slice(0,19)=="socialcalc:version:"?EI.to_sheet(d.type=="string"?g:wf(g),d):a(g,d)}function c(l,d){return Du(o(l,d),d)}function u(l){for(var d=[],g=Un(l["!ref"]),p,x=Array.isArray(l),_=g.s.r;_<=g.e.r;++_){for(var E=[],P=g.s.c;P<=g.e.c;++P){var L=En({r:_,c:P});if(p=x?(l[_]||[])[P]:l[L],!p||p.v==null){E.push("          ");continue}for(var M=(p.w||(so(p),p.w)||"").slice(0,10);M.length<10;)M+=" ";E.push(M+(P===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}(),u5=function(){function n(T,D,V){if(T){us(T,T.l||0);for(var U=V.Enum||Fe;T.l<T.length;){var J=T.read_shift(2),ae=U[J]||U[65535],le=T.read_shift(2),ue=T.l+le,xe=ae.f&&ae.f(T,le,V);if(T.l=ue,D(xe,ae,J))return}}}function e(T,D){switch(D.type){case"base64":return t($s(io(T)),D);case"binary":return t($s(T),D);case"buffer":case"array":return t(T,D)}throw"Unsupported type "+D.type}function t(T,D){if(!T)return T;var V=D||{},U=V.dense?[]:{},J="Sheet1",ae="",le=0,ue={},xe=[],Ve=[],ze={s:{r:0,c:0},e:{r:0,c:0}},Ze=V.sheetRows||0;if(T[2]==0&&(T[3]==8||T[3]==9)&&T.length>=16&&T[14]==5&&T[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(T[2]==2)V.Enum=Fe,n(T,function(We,_t,$e){switch($e){case 0:V.vers=We,We>=4096&&(V.qpro=!0);break;case 6:ze=We;break;case 204:We&&(ae=We);break;case 222:ae=We;break;case 15:case 51:V.qpro||(We[1].v=We[1].v.slice(1));case 13:case 14:case 16:$e==14&&(We[2]&112)==112&&(We[2]&15)>1&&(We[2]&15)<15&&(We[1].z=V.dateNF||nr[14],V.cellDates&&(We[1].t="d",We[1].v=VA(We[1].v))),V.qpro&&We[3]>le&&(U["!ref"]=Er(ze),ue[J]=U,xe.push(J),U=V.dense?[]:{},ze={s:{r:0,c:0},e:{r:0,c:0}},le=We[3],J=ae||"Sheet"+(le+1),ae="");var nt=V.dense?(U[We[0].r]||[])[We[0].c]:U[En(We[0])];if(nt){nt.t=We[1].t,nt.v=We[1].v,We[1].z!=null&&(nt.z=We[1].z),We[1].f!=null&&(nt.f=We[1].f);break}V.dense?(U[We[0].r]||(U[We[0].r]=[]),U[We[0].r][We[0].c]=We[1]):U[En(We[0])]=We[1];break}},V);else if(T[2]==26||T[2]==14)V.Enum=rt,T[2]==14&&(V.qpro=!0,T.l=0),n(T,function(We,_t,$e){switch($e){case 204:J=We;break;case 22:We[1].v=We[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(We[3]>le&&(U["!ref"]=Er(ze),ue[J]=U,xe.push(J),U=V.dense?[]:{},ze={s:{r:0,c:0},e:{r:0,c:0}},le=We[3],J="Sheet"+(le+1)),Ze>0&&We[0].r>=Ze)break;V.dense?(U[We[0].r]||(U[We[0].r]=[]),U[We[0].r][We[0].c]=We[1]):U[En(We[0])]=We[1],ze.e.c<We[0].c&&(ze.e.c=We[0].c),ze.e.r<We[0].r&&(ze.e.r=We[0].r);break;case 27:We[14e3]&&(Ve[We[14e3][0]]=We[14e3][1]);break;case 1537:Ve[We[0]]=We[1],We[0]==le&&(J=We[1]);break}},V);else throw new Error("Unrecognized LOTUS BOF "+T[2]);if(U["!ref"]=Er(ze),ue[ae||J]=U,xe.push(ae||J),!Ve.length)return{SheetNames:xe,Sheets:ue};for(var at={},Re=[],re=0;re<Ve.length;++re)ue[xe[re]]?(Re.push(Ve[re]||xe[re]),at[Ve[re]]=ue[Ve[re]]||ue[xe[re]]):(Re.push(Ve[re]),at[Ve[re]]={"!ref":"A1"});return{SheetNames:Re,Sheets:at}}function r(T,D){var V=D||{};if(+V.codepage>=0&&Yf(+V.codepage),V.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Ki(),J=Un(T["!ref"]),ae=Array.isArray(T),le=[];ot(U,0,s(1030)),ot(U,6,c(J));for(var ue=Math.min(J.e.r,8191),xe=J.s.r;xe<=ue;++xe)for(var Ve=ni(xe),ze=J.s.c;ze<=J.e.c;++ze){xe===J.s.r&&(le[ze]=pi(ze));var Ze=le[ze]+Ve,at=ae?(T[xe]||[])[ze]:T[Ze];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?ot(U,13,p(xe,ze,at.v)):ot(U,14,_(xe,ze,at.v));else{var Re=so(at);ot(U,15,d(xe,ze,Re.slice(0,239)))}}return ot(U,1),U.end()}function i(T,D){var V=D||{};if(+V.codepage>=0&&Yf(+V.codepage),V.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Ki();ot(U,0,a(T));for(var J=0,ae=0;J<T.SheetNames.length;++J)(T.Sheets[T.SheetNames[J]]||{})["!ref"]&&ot(U,27,ke(T.SheetNames[J],ae++));var le=0;for(J=0;J<T.SheetNames.length;++J){var ue=T.Sheets[T.SheetNames[J]];if(!(!ue||!ue["!ref"])){for(var xe=Un(ue["!ref"]),Ve=Array.isArray(ue),ze=[],Ze=Math.min(xe.e.r,8191),at=xe.s.r;at<=Ze;++at)for(var Re=ni(at),re=xe.s.c;re<=xe.e.c;++re){at===xe.s.r&&(ze[re]=pi(re));var We=ze[re]+Re,_t=Ve?(ue[at]||[])[re]:ue[We];if(!(!_t||_t.t=="z"))if(_t.t=="n")ot(U,23,B(at,re,le,_t.v));else{var $e=so(_t);ot(U,22,N(at,re,le,$e.slice(0,239)))}}++le}}return ot(U,1),U.end()}function s(T){var D=Be(2);return D.write_shift(2,T),D}function a(T){var D=Be(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var V=0,U=0,J=0,ae=0;ae<T.SheetNames.length;++ae){var le=T.SheetNames[ae],ue=T.Sheets[le];if(!(!ue||!ue["!ref"])){++J;var xe=gs(ue["!ref"]);V<xe.e.r&&(V=xe.e.r),U<xe.e.c&&(U=xe.e.c)}}return V>8191&&(V=8191),D.write_shift(2,V),D.write_shift(1,J),D.write_shift(1,U),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function o(T,D,V){var U={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&V.qpro?(U.s.c=T.read_shift(1),T.l++,U.s.r=T.read_shift(2),U.e.c=T.read_shift(1),T.l++,U.e.r=T.read_shift(2),U):(U.s.c=T.read_shift(2),U.s.r=T.read_shift(2),D==12&&V.qpro&&(T.l+=2),U.e.c=T.read_shift(2),U.e.r=T.read_shift(2),D==12&&V.qpro&&(T.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(T){var D=Be(8);return D.write_shift(2,T.s.c),D.write_shift(2,T.s.r),D.write_shift(2,T.e.c),D.write_shift(2,T.e.r),D}function u(T,D,V){var U=[{c:0,r:0},{t:"n",v:0},0,0];return V.qpro&&V.vers!=20768?(U[0].c=T.read_shift(1),U[3]=T.read_shift(1),U[0].r=T.read_shift(2),T.l+=2):(U[2]=T.read_shift(1),U[0].c=T.read_shift(2),U[0].r=T.read_shift(2)),U}function l(T,D,V){var U=T.l+D,J=u(T,D,V);if(J[1].t="s",V.vers==20768){T.l++;var ae=T.read_shift(1);return J[1].v=T.read_shift(ae,"utf8"),J}return V.qpro&&T.l++,J[1].v=T.read_shift(U-T.l,"cstr"),J}function d(T,D,V){var U=Be(7+V.length);U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(1,39);for(var J=0;J<U.length;++J){var ae=V.charCodeAt(J);U.write_shift(1,ae>=128?95:ae)}return U.write_shift(1,0),U}function g(T,D,V){var U=u(T,D,V);return U[1].v=T.read_shift(2,"i"),U}function p(T,D,V){var U=Be(7);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(2,V,"i"),U}function x(T,D,V){var U=u(T,D,V);return U[1].v=T.read_shift(8,"f"),U}function _(T,D,V){var U=Be(13);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(8,V,"f"),U}function E(T,D,V){var U=T.l+D,J=u(T,D,V);if(J[1].v=T.read_shift(8,"f"),V.qpro)T.l=U;else{var ae=T.read_shift(2);K(T.slice(T.l,T.l+ae),J),T.l+=ae}return J}function P(T,D,V){var U=D&32768;return D&=-32769,D=(U?T:0)+(D>=8192?D-16384:D),(U?"":"$")+(V?pi(D):ni(D))}var L={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},M=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function K(T,D){us(T,0);for(var V=[],U=0,J="",ae="",le="",ue="";T.l<T.length;){var xe=T[T.l++];switch(xe){case 0:V.push(T.read_shift(8,"f"));break;case 1:ae=P(D[0].c,T.read_shift(2),!0),J=P(D[0].r,T.read_shift(2),!1),V.push(ae+J);break;case 2:{var Ve=P(D[0].c,T.read_shift(2),!0),ze=P(D[0].r,T.read_shift(2),!1);ae=P(D[0].c,T.read_shift(2),!0),J=P(D[0].r,T.read_shift(2),!1),V.push(Ve+ze+":"+ae+J)}break;case 3:if(T.l<T.length){console.error("WK1 premature formula end");return}break;case 4:V.push("("+V.pop()+")");break;case 5:V.push(T.read_shift(2));break;case 6:{for(var Ze="";xe=T[T.l++];)Ze+=String.fromCharCode(xe);V.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:V.push("-"+V.pop());break;case 23:V.push("+"+V.pop());break;case 22:V.push("NOT("+V.pop()+")");break;case 20:case 21:ue=V.pop(),le=V.pop(),V.push(["AND","OR"][xe-20]+"("+le+","+ue+")");break;default:if(xe<32&&M[xe])ue=V.pop(),le=V.pop(),V.push(le+M[xe]+ue);else if(L[xe]){if(U=L[xe][1],U==69&&(U=T[T.l++]),U>V.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+V.join("|")+"|");return}var at=V.slice(-U);V.length-=U,V.push(L[xe][0]+"("+at.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}V.length==1?D[1].f=""+V[0]:console.error("WK1 bad formula parse |"+V.join("|")+"|")}function se(T){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=T.read_shift(2),D[3]=T[T.l++],D[0].c=T[T.l++],D}function oe(T,D){var V=se(T);return V[1].t="s",V[1].v=T.read_shift(D-4,"cstr"),V}function N(T,D,V,U){var J=Be(6+U.length);J.write_shift(2,T),J.write_shift(1,V),J.write_shift(1,D),J.write_shift(1,39);for(var ae=0;ae<U.length;++ae){var le=U.charCodeAt(ae);J.write_shift(1,le>=128?95:le)}return J.write_shift(1,0),J}function A(T,D){var V=se(T);V[1].v=T.read_shift(2);var U=V[1].v>>1;if(V[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return V[1].v=U,V}function C(T,D){var V=se(T),U=T.read_shift(4),J=T.read_shift(4),ae=T.read_shift(2);if(ae==65535)return U===0&&J===3221225472?(V[1].t="e",V[1].v=15):U===0&&J===3489660928?(V[1].t="e",V[1].v=42):V[1].v=0,V;var le=ae&32768;return ae=(ae&32767)-16446,V[1].v=(1-le*2)*(J*Math.pow(2,ae+32)+U*Math.pow(2,ae)),V}function B(T,D,V,U){var J=Be(14);if(J.write_shift(2,T),J.write_shift(1,V),J.write_shift(1,D),U==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var ae=0,le=0,ue=0,xe=0;return U<0&&(ae=1,U=-U),le=Math.log2(U)|0,U/=Math.pow(2,le-31),xe=U>>>0,xe&2147483648||(U/=2,++le,xe=U>>>0),U-=xe,xe|=2147483648,xe>>>=0,U*=Math.pow(2,32),ue=U>>>0,J.write_shift(4,ue),J.write_shift(4,xe),le+=16383+(ae?32768:0),J.write_shift(2,le),J}function b(T,D){var V=C(T);return T.l+=D-14,V}function S(T,D){var V=se(T),U=T.read_shift(4);return V[1].v=U>>6,V}function R(T,D){var V=se(T),U=T.read_shift(8,"f");return V[1].v=U,V}function ie(T,D){var V=R(T);return T.l+=D-10,V}function me(T,D){return T[T.l+D-1]==0?T.read_shift(D,"cstr"):""}function Ee(T,D){var V=T[T.l++];V>D-1&&(V=D-1);for(var U="";U.length<V;)U+=String.fromCharCode(T[T.l++]);return U}function Ne(T,D,V){if(!(!V.qpro||D<21)){var U=T.read_shift(1);T.l+=17,T.l+=1,T.l+=2;var J=T.read_shift(D-21,"cstr");return[U,J]}}function _e(T,D){for(var V={},U=T.l+D;T.l<U;){var J=T.read_shift(2);if(J==14e3){for(V[J]=[0,""],V[J][0]=T.read_shift(2);T[T.l];)V[J][1]+=String.fromCharCode(T[T.l]),T.l++;T.l++}}return V}function ke(T,D){var V=Be(5+T.length);V.write_shift(2,14e3),V.write_shift(2,D);for(var U=0;U<T.length;++U){var J=T.charCodeAt(U);V[V.l++]=J>127?95:J}return V[V.l++]=0,V}var Fe={0:{n:"BOF",f:vI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:l},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:l},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:me},222:{n:"SHEETNAMELP",f:Ee},65535:{n:""}},rt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:oe},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:b},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:_e},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}(),lB=/^\s|\s$|[\t\n\r]/;function TI(n,e){if(!e.bookSST)return"";var t=[Tr];t[t.length]=st("sst",null,{xmlns:Th[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(lB)&&(s+=' xml:space="preserve"'),s+=">"+wn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function hB(n){return[n.read_shift(4),n.read_shift(4)]}function fB(n,e){return e||(e=Be(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var dB=r9;function pB(n){var e=Ki();He(e,159,fB(n));for(var t=0;t<n.length;++t)He(e,19,dB(n[t]));return He(e,160),e.end()}function mB(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function bI(n){var e=0,t,r=mB(n),i=r.length+1,s,a,o,c,u;for(t=Au(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=e&16384?1:0,c=e<<1&32767,u=o|c,e=u^a;return e^52811}var gB=function(){function n(i,s){switch(s.type){case"base64":return e(io(i),s);case"binary":return e(i,s);case"buffer":return e(hn&&Buffer.isBuffer(i)?i.toString("binary"):Ad(i),s);case"array":return e(mm(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(l,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,x,_=-1;x=g.exec(l);){switch(x[0]){case"\\cell":var E=l.slice(p,g.lastIndex-x[0].length);if(E[0]==" "&&(E=E.slice(1)),++_,E.length){var P={v:E,t:"s"};Array.isArray(o)?o[d][_]=P:o[En({r:d,c:_})]=P}break}p=g.lastIndex}_>u.e.c&&(u.e.c=_)}),o["!ref"]=Er(u),o}function t(i,s){return Du(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=Un(i["!ref"]),o,c=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var l=a.s.c;l<=a.e.c;++l)s.push("\\cellx"+(l+1));for(s.push("\\pard\\intbl"),l=a.s.c;l<=a.e.c;++l){var d=En({r:u,c:l});o=c?(i[u]||[])[l]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(so(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}}();function l5(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var vB=6,Za=vB;function _p(n){return Math.floor((n+Math.round(128/Za)/256)*Za)}function yp(n){return Math.floor((n-5)/Za*100+.5)/100}function g1(n){return Math.round((n*Za+5)/Za*256)/256}function Vv(n){n.width?(n.wpx=_p(n.width),n.wch=yp(n.wpx),n.MDW=Za):n.wpx?(n.wch=yp(n.wpx),n.width=g1(n.wch),n.MDW=Za):typeof n.wch=="number"&&(n.width=g1(n.wch),n.wpx=_p(n.width),n.MDW=Za),n.customWidth&&delete n.customWidth}var _B=96,AI=_B;function wp(n){return n*96/AI}function II(n){return n*AI/96}function yB(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=st("numFmt",null,{numFmtId:r,formatCode:wn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=st("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function wB(n){var e=[];return e[e.length]=st("cellXfs",null),n.forEach(function(t){e[e.length]=st("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=st("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function SI(n,e){var t=[Tr,st("styleSheet",null,{xmlns:Th[0],"xmlns:vt":Mr.vt})],r;return n.SSF&&(r=yB(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=wB(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function xB(n,e){var t=n.read_shift(2),r=mi(n);return[t,r]}function EB(n,e,t){t||(t=Be(6+4*e.length)),t.write_shift(2,n),Vr(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function TB(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=l9(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var c=n.read_shift(1);switch(c>0&&(r.charset=c),n.l++,r.color=u9(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=mi(n),r}function bB(n,e){e||(e=Be(25+4*32)),e.write_shift(2,n.sz*20),h9(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),gp(n.color,e);var r=0;return r=2,e.write_shift(1,r),Vr(n.name,e),e.length>e.l?e.slice(0,e.l):e}var AB=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],mg,IB=Aa;function h5(n,e){e||(e=Be(4*3+8*7+16*1)),mg||(mg=Sv(AB));var t=mg[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(gp({auto:1},e),gp({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function SB(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function PI(n,e,t){t||(t=Be(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Qh(n,e){return e||(e=Be(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var PB=Aa;function NB(n,e){return e||(e=Be(51)),e.write_shift(1,0),Qh(null,e),Qh(null,e),Qh(null,e),Qh(null,e),Qh(null,e),e.length>e.l?e.slice(0,e.l):e}function kB(n,e){return e||(e=Be(12+4*10)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),mp(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function CB(n,e,t){var r=Be(2052);return r.write_shift(4,n),mp(e,r),mp(t,r),r.length>r.l?r.slice(0,r.l):r}function RB(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(He(n,615,Ks(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&He(n,44,EB(i,e[i]))}),He(n,616))}}function LB(n){var e=1;He(n,611,Ks(e)),He(n,43,bB({sz:12,color:{theme:1},name:"Calibri",family:2})),He(n,612)}function DB(n){var e=2;He(n,603,Ks(e)),He(n,45,h5({patternType:"none"})),He(n,45,h5({patternType:"gray125"})),He(n,604)}function FB(n){var e=1;He(n,613,Ks(e)),He(n,46,NB()),He(n,614)}function OB(n){var e=1;He(n,626,Ks(e)),He(n,47,PI({numFmtId:0},65535)),He(n,627)}function MB(n,e){He(n,617,Ks(e.length)),e.forEach(function(t){He(n,47,PI(t,0))}),He(n,618)}function BB(n){var e=1;He(n,619,Ks(e)),He(n,48,kB({xfId:0,name:"Normal"})),He(n,620)}function VB(n){var e=0;He(n,505,Ks(e)),He(n,506)}function UB(n){var e=0;He(n,508,CB(e,"TableStyleMedium9","PivotStyleMedium4")),He(n,509)}function jB(n,e){var t=Ki();return He(t,278),RB(t,n.SSF),LB(t),DB(t),FB(t),OB(t),MB(t,e.cellXfs),BB(t),VB(t),UB(t),He(t,279),t.end()}function NI(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Tr];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function qB(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:mi(n)}}function zB(n){var e=Be(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),Vr(n.name,e),e.slice(0,e.l)}function WB(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function HB(n){var e=Be(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function $B(n,e){var t=Be(8+2*e.length);return t.write_shift(4,n),Vr(e,t),t.slice(0,t.l)}function GB(n){return n.l+=4,n.read_shift(4)!=0}function KB(n,e){var t=Be(8);return t.write_shift(4,n),t.write_shift(4,1),t}function YB(){var n=Ki();return He(n,332),He(n,334,Ks(1)),He(n,335,zB({name:"XLDAPR",version:12e4,flags:3496657072})),He(n,336),He(n,339,$B(1,"XLDAPR")),He(n,52),He(n,35,Ks(514)),He(n,4096,Ks(0)),He(n,4097,Is(1)),He(n,36),He(n,53),He(n,340),He(n,337,KB(1)),He(n,51,HB([[1,0]])),He(n,338),He(n,333),n.end()}function kI(){var n=[Tr];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function XB(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=En(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Sl=1024;function CI(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[st("xml",null,{"xmlns:v":hs.v,"xmlns:o":hs.o,"xmlns:x":hs.x,"xmlns:mv":hs.mv}).replace(/\/>/,">"),st("o:shapelayout",st("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),st("v:shapetype",[st("v:stroke",null,{joinstyle:"miter"}),st("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Sl<n*1e3;)Sl+=1e3;return e.forEach(function(s){var a=Br(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?st("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=st("v:fill",c,o),l={on:"t",obscured:"t"};++Sl,i=i.concat(["<v:shape"+Zf({id:"_x0000_s"+Sl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,st("v:shadow",null,l),st("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zr("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Zr("x:AutoFill","False"),Zr("x:Row",String(a.r)),Zr("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function RI(n){var e=[Tr,st("comments",null,{xmlns:Th[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=wn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(c){c.a&&(i=t.indexOf(wn(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Zr("t",wn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Zr("t",wn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function JB(n,e,t){var r=[Tr,st("ThreadedComments",null,{xmlns:Mr.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(st("threadedComment",Zr("text",a.t||""),c))})}),r.push("</ThreadedComments>"),r.join("")}function QB(n){var e=[Tr,st("personList",null,{xmlns:Mr.TCMNT,"xmlns:x":Th[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(st("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function ZB(n){var e={};e.iauthor=n.read_shift(4);var t=Bu(n);return e.rfx=t.s,e.ref=En(t.s),n.l+=16,e}function eV(n,e){return e==null&&(e=Be(36)),e.write_shift(4,n[1].iauthor),Ah(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var tV=mi;function nV(n){return Vr(n.slice(0,54))}function rV(n){var e=Ki(),t=[];return He(e,628),He(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),He(e,632,nV(i.a)))})}),He(e,631),He(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Br(r[0]),e:Br(r[0])};He(e,635,eV([s,i])),i.t&&i.t.length>0&&He(e,637,s9(i)),He(e,636),delete i.iauthor})}),He(e,634),He(e,629),e.end()}function iV(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Sn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var LI=["xlsb","xlsm","xlam","biff8","xla"],sV=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,l=a.length>0?parseInt(a,10)|0:0;return o?l+=e.c:--l,c?u+=e.r:--u,i+(o?"":"$")+pi(l)+(c?"":"$")+ni(u)}return function(i,s){return e=s,i.replace(n,t)}}(),Uv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,jv=function(){return function(e,t){return e.replace(Uv,function(r,i,s,a,o,c){var u=Dv(a)-(s?0:t.c),l=Lv(c)-(o?0:t.r),d=l==0?"":o?l+1:"["+l+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}}();function aV(n,e){return n.replace(Uv,function(t,r,i,s,a,o){return r+(i=="$"?i+s:pi(Dv(s)+e.c))+(a=="$"?a+o:ni(Lv(o)+e.r))})}function oV(n){return n.length!=1}function yr(n){n.l+=1}function fc(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function DI(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return FI(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=fc(n),o=fc(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function FI(n){var e=fc(n),t=fc(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function cV(n,e,t){if(t.biff<8)return FI(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=fc(n),a=fc(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function OI(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return uV(n);var r=n.read_shift(t&&t.biff==12?4:2),i=fc(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function uV(n){var e=fc(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function lV(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function hV(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return fV(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function fV(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function dV(n,e,t){var r=(n[n.l++]&96)>>5,i=DI(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function pV(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=DI(n,s,t);return[r,i,a]}function mV(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function gV(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function vV(n,e,t){var r=(n[n.l++]&96)>>5,i=cV(n,e-1,t);return[r,i]}function _V(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function f5(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function yV(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function wV(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function xV(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function EV(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function TV(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function MI(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function bV(n){return n.read_shift(2),MI(n)}function AV(n){return n.read_shift(2),MI(n)}function IV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=OI(n,0,t);return[r,i]}function SV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=hV(n,0,t);return[r,i]}function PV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=OI(n,0,t);return[r,i,s]}function NV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[NU[i],UI[i],r]}function kV(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:CV(n);return[i,(s[0]===0?UI:PU)[s[1]]]}function CV(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function RV(n,e,t){n.l+=t&&t.biff==2?3:4}function LV(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function DV(n){return n.l++,Pd[n.read_shift(1)]}function FV(n){return n.l++,n.read_shift(2)}function OV(n){return n.l++,n.read_shift(1)!==0}function MV(n){return n.l++,Ih(n)}function BV(n,e,t){return n.l++,yI(n,e-1,t)}function VV(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=P9(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=Pd[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=Ih(n);break;case 2:t[1]=R9(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function UV(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?Bu:F9)(n));return i}function jV(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=VV(n,t.biff);return a}function qV(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function zV(n,e,t){if(t.biff==5)return WV(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function WV(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function HV(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function $V(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function GV(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function KV(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var YV=Aa,XV=Aa,JV=Aa;function Nd(n,e,t){return n.l+=2,[lV(n)]}function qv(n){return n.l+=6,[]}var QV=Nd,ZV=qv,eU=qv,tU=Nd;function BI(n){return n.l+=2,[vI(n),n.read_shift(2)&1]}var nU=Nd,rU=BI,iU=qv,sU=Nd,aU=Nd,oU=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function cU(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=oU[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function uU(n){return n.l+=2,[n.read_shift(4)]}function lU(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function hU(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function fU(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function dU(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function pU(n){return n.l+=4,[0,0]}var d5={1:{n:"PtgExp",f:LV},2:{n:"PtgTbl",f:JV},3:{n:"PtgAdd",f:yr},4:{n:"PtgSub",f:yr},5:{n:"PtgMul",f:yr},6:{n:"PtgDiv",f:yr},7:{n:"PtgPower",f:yr},8:{n:"PtgConcat",f:yr},9:{n:"PtgLt",f:yr},10:{n:"PtgLe",f:yr},11:{n:"PtgEq",f:yr},12:{n:"PtgGe",f:yr},13:{n:"PtgGt",f:yr},14:{n:"PtgNe",f:yr},15:{n:"PtgIsect",f:yr},16:{n:"PtgUnion",f:yr},17:{n:"PtgRange",f:yr},18:{n:"PtgUplus",f:yr},19:{n:"PtgUminus",f:yr},20:{n:"PtgPercent",f:yr},21:{n:"PtgParen",f:yr},22:{n:"PtgMissArg",f:yr},23:{n:"PtgStr",f:BV},26:{n:"PtgSheet",f:lU},27:{n:"PtgEndSheet",f:hU},28:{n:"PtgErr",f:DV},29:{n:"PtgBool",f:OV},30:{n:"PtgInt",f:FV},31:{n:"PtgNum",f:MV},32:{n:"PtgArray",f:_V},33:{n:"PtgFunc",f:NV},34:{n:"PtgFuncVar",f:kV},35:{n:"PtgName",f:qV},36:{n:"PtgRef",f:IV},37:{n:"PtgArea",f:dV},38:{n:"PtgMemArea",f:HV},39:{n:"PtgMemErr",f:YV},40:{n:"PtgMemNoMem",f:XV},41:{n:"PtgMemFunc",f:$V},42:{n:"PtgRefErr",f:GV},43:{n:"PtgAreaErr",f:mV},44:{n:"PtgRefN",f:SV},45:{n:"PtgAreaN",f:vV},46:{n:"PtgMemAreaN",f:fU},47:{n:"PtgMemNoMemN",f:dU},57:{n:"PtgNameX",f:zV},58:{n:"PtgRef3d",f:PV},59:{n:"PtgArea3d",f:pV},60:{n:"PtgRefErr3d",f:KV},61:{n:"PtgAreaErr3d",f:gV},255:{}},mU={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},gU={1:{n:"PtgElfLel",f:BI},2:{n:"PtgElfRw",f:sU},3:{n:"PtgElfCol",f:QV},6:{n:"PtgElfRwV",f:aU},7:{n:"PtgElfColV",f:tU},10:{n:"PtgElfRadical",f:nU},11:{n:"PtgElfRadicalS",f:iU},13:{n:"PtgElfColS",f:ZV},15:{n:"PtgElfColSV",f:eU},16:{n:"PtgElfRadicalLel",f:rU},25:{n:"PtgList",f:cU},29:{n:"PtgSxName",f:uU},255:{}},vU={0:{n:"PtgAttrNoop",f:pU},1:{n:"PtgAttrSemi",f:TV},2:{n:"PtgAttrIf",f:xV},4:{n:"PtgAttrChoose",f:yV},8:{n:"PtgAttrGoto",f:wV},16:{n:"PtgAttrSum",f:RV},32:{n:"PtgAttrBaxcel",f:f5},33:{n:"PtgAttrBaxcel",f:f5},64:{n:"PtgAttrSpace",f:bV},65:{n:"PtgAttrSpaceSemi",f:AV},128:{n:"PtgAttrIfError",f:EV},255:{}};function _U(n,e,t,r){if(r.biff<8)return Aa(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=jV(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=UV(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(Aa(n,e)),s}function yU(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=d5[s]||d5[mU[s]],(s===24||s===25)&&(i=(s===24?gU:vU)[n[n.l+1]]),!i||!i.f?Aa(n,e):a.push([i.n,i.f(n,e,t)]);return a}function wU(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var xU={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function EU(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function VI(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function p5(n,e,t){var r=VI(n,e,t);return r=="#REF"?r:EU(r,t)}function ch(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],c,u,l,d=0,g=0,p,x="";if(!n[0]||!n[0][0])return"";for(var _=-1,E="",P=0,L=n[0].length;P<L;++P){var M=n[0][P];switch(M[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),_>=0){switch(n[0][_][1][0]){case 0:E=er(" ",n[0][_][1][1]);break;case 1:E=er("\r",n[0][_][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][_][1][0])}u=u+E,_=-1}o.push(u+xU[M[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":l=Ef(M[1][1],a,i),o.push(Tf(l,s));break;case"PtgRefN":l=t?Ef(M[1][1],t,i):M[1][1],o.push(Tf(l,s));break;case"PtgRef3d":d=M[1][1],l=Ef(M[1][2],a,i),x=p5(r,d,i),o.push(x+"!"+Tf(l,s));break;case"PtgFunc":case"PtgFuncVar":var K=M[1][0],se=M[1][1];K||(K=0),K&=127;var oe=K==0?[]:o.slice(-K);o.length-=K,se==="User"&&(se=oe.shift()),o.push(se+"("+oe.join(",")+")");break;case"PtgBool":o.push(M[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(M[1]);break;case"PtgNum":o.push(String(M[1]));break;case"PtgStr":o.push('"'+M[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(M[1]);break;case"PtgAreaN":p=Qw(M[1][1],t?{s:t}:a,i),o.push(dg(p,i));break;case"PtgArea":p=Qw(M[1][1],a,i),o.push(dg(p,i));break;case"PtgArea3d":d=M[1][1],p=M[1][2],x=p5(r,d,i),o.push(x+"!"+dg(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=M[1][2];var N=(r.names||[])[g-1]||(r[0]||[])[g],A=N?N.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var C=M[1][1];g=M[1][2];var B;if(i.biff<=5)C<0&&(C=-C),r[C]&&(B=r[C][g]);else{var b="";if(((r[C]||[])[0]||[])[0]==14849||(((r[C]||[])[0]||[])[0]==1025?r[C][g]&&r[C][g].itab>0&&(b=r.SheetNames[r[C][g].itab-1]+"!"):b=r.SheetNames[g-1]+"!"),r[C]&&r[C][g])b+=r[C][g].Name;else if(r[0]&&r[0][g])b+=r[0][g].Name;else{var S=(VI(r,C,i)||"").split(";;");S[g-1]?b=S[g-1]:b+="SH33TJSERRX"}o.push(b);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var R="(",ie=")";if(_>=0){switch(E="",n[0][_][1][0]){case 2:R=er(" ",n[0][_][1][1])+R;break;case 3:R=er("\r",n[0][_][1][1])+R;break;case 4:ie=er(" ",n[0][_][1][1])+ie;break;case 5:ie=er("\r",n[0][_][1][1])+ie;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][_][1][0])}_=-1}o.push(R+o.pop()+ie);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":l={c:M[1][1],r:M[1][0]};var me={c:t.c,r:t.r};if(r.sharedf[En(l)]){var Ee=r.sharedf[En(l)];o.push(ch(Ee,a,me,r,i))}else{var Ne=!1;for(c=0;c!=r.arrayf.length;++c)if(u=r.arrayf[c],!(l.c<u[0].s.c||l.c>u[0].e.c)&&!(l.r<u[0].s.r||l.r>u[0].e.r)){o.push(ch(u[1],a,me,r,i)),Ne=!0;break}Ne||o.push(M[1])}break;case"PtgArray":o.push("{"+wU(M[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=P;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+M[1].idx+"[#"+M[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(M));default:throw new Error("Unrecognized Formula Token: "+String(M))}var _e=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&_e.indexOf(n[0][P][0])==-1){M=n[0][_];var ke=!0;switch(M[1][0]){case 4:ke=!1;case 0:E=er(" ",M[1][1]);break;case 5:ke=!1;case 1:E=er("\r",M[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+M[1][0])}o.push((ke?E:"")+o.pop()+(ke?"":E)),_=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function TU(n){if(n==null){var e=Be(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Iu(n);return Iu(0)}function bU(n,e,t,r,i){var s=Su(e,t,i),a=TU(n.v),o=Be(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Be(n.bf.length),l=0;l<n.bf.length;++l)u[l]=n.bf[l];var d=Qr([s,a,o,u]);return d}function gm(n,e,t){var r=n.read_shift(4),i=yU(n,r,t),s=n.read_shift(4),a=s>0?_U(n,s,i,t):null;return[i,a]}var AU=gm,vm=gm,IU=gm,SU=gm,PU={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},UI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},NU={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function kU(n){var e="of:="+n.replace(Uv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function CU(n){return n.replace(/\./,"!")}var bf=typeof Map<"u";function zv(n,e,t){var r=0,i=n.length;if(t){if(bf?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=bf?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(bf?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function _m(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(Za=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=yp(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=g1(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function jI(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function Ec(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){OA(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function RU(n,e,t){if(n&&n["!ref"]){var r=Un(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function LU(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+Er(n[t])+'"/>';return e+"</mergeCells>"}function DU(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[t];try{e.Workbook&&(c=e.Workbook.Sheets[t].CodeName||c)}catch{}s=!0,a.codeName=Qf(wn(c))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+st("outlinePr",null,u)}!s&&!o||(i[i.length]=st("sheetPr",o,a))}var FU=["objects","scenarios","selectLockedCells","selectUnlockedCells"],OU=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function MU(n){var e={sheet:1};return FU.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),OU.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=bI(n.password).toString(16).toUpperCase()),st("sheetProtection",null,e)}function BU(n){return jI(n),st("pageMargins",null,n)}function VU(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=st("col",null,_m(i,r)));return t[t.length]="</cols>",t.join("")}function UU(n,e,t,r){var i=typeof n.ref=="string"?n.ref:Er(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=gs(i);a.s.r==a.e.r&&(a.e.r=gs(e["!ref"]).e.r,i=Er(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),st("autoFilter",null,{ref:i})}function jU(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),st("sheetViews",st("sheetView",null,i),{})}function qU(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=Pd[n.v];break;case"d":r&&r.cellDates?i=Ci(n.v,-1).toISOString():(n=Ji(n),n.t="n",i=""+(n.v=Xi(Ci(n.v)))),typeof n.z>"u"&&(n.z=nr[14]);break;default:i=n.v;break}var o=Zr("v",wn(i)),c={r:e},u=Ec(r.cellXfs,n,r);switch(u!==0&&(c.s=u),n.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=Zr("v",""+zv(r.Strings,n.v,r.revStrings)),c.t="s";break}c.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var l=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=st("f",wn(n.f),l)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(c.cm=1),st("c",o,c)}function zU(n,e,t,r){var i=[],s=[],a=Un(n["!ref"]),o="",c,u="",l=[],d=0,g=0,p=n["!rows"],x=Array.isArray(n),_={r:u},E,P=-1;for(g=a.s.c;g<=a.e.c;++g)l[g]=pi(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=ni(d),g=a.s.c;g<=a.e.c;++g){c=l[g]+u;var L=x?(n[d]||[])[g]:n[c];L!==void 0&&(o=qU(L,c,n,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(_={r:u},p&&p[d]&&(E=p[d],E.hidden&&(_.hidden=1),P=-1,E.hpx?P=wp(E.hpx):E.hpt&&(P=E.hpt),P>-1&&(_.ht=P,_.customHeight=1),E.level&&(_.outlineLevel=E.level)),i[i.length]=st("row",s.join(""),_))}if(p)for(;d<p.length;++d)p&&p[d]&&(_={r:d+1},E=p[d],E.hidden&&(_.hidden=1),P=-1,E.hpx?P=wp(E.hpx):E.hpt&&(P=E.hpt),P>-1&&(_.ht=P,_.customHeight=1),E.level&&(_.outlineLevel=E.level),i[i.length]=st("row","",_));return i.join("")}function qI(n,e,t,r){var i=[Tr,st("worksheet",null,{xmlns:Th[0],"xmlns:r":Mr.r})],s=t.SheetNames[n],a=0,o="",c=t.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",l=Un(u);if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575),u=Er(l)}r||(r={}),c["!comments"]=[];var d=[];DU(c,t,n,e,i),i[i.length]=st("dimension",null,{ref:u}),i[i.length]=jU(c,e,n,t),e.sheetFormat&&(i[i.length]=st("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=VU(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=zU(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=MU(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=UU(c["!autofilter"],c,t,n)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=LU(c["!merges"]));var g=-1,p,x=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(_){_[1].Target&&(p={ref:_[0]},_[1].Target.charAt(0)!="#"&&(x=_n(r,-1,wn(_[1].Target).replace(/#.*$/,""),on.HLINK),p["r:id"]="rId"+x),(g=_[1].Target.indexOf("#"))>-1&&(p.location=wn(_[1].Target.slice(g+1))),_[1].Tooltip&&(p.tooltip=wn(_[1].Tooltip)),i[i.length]=st("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=BU(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Zr("ignoredErrors",st("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(x=_n(r,-1,"../drawings/drawing"+(n+1)+".xml",on.DRAW),i[i.length]=st("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=d),c["!comments"].length>0&&(x=_n(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",on.VML),i[i.length]=st("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function WU(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function HU(n,e,t){var r=Be(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=wp(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,c=r.l;r.l+=4;for(var u={r:n,c:0},l=0;l<16;++l)if(!(e.s.c>l+1<<10||e.e.c<l<<10)){for(var d=-1,g=-1,p=l<<10;p<l+1<<10;++p){u.c=p;var x=Array.isArray(t)?(t[u.r]||[])[u.c]:t[En(u)];x&&(d<0&&(d=p),g=p)}d<0||(++o,r.write_shift(4,d),r.write_shift(4,g))}var _=r.l;return r.l=c,r.write_shift(4,o),r.l=_,r.length>r.l?r.slice(0,r.l):r}function $U(n,e,t,r){var i=HU(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&He(n,0,i)}var GU=Bu,KU=Ah;function YU(){}function XU(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=a9(n),t}function JU(n,e,t){t==null&&(t=Be(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return gp({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),rI(n,t),t.slice(0,t.l)}function QU(n){var e=ks(n);return[e]}function ZU(n,e,t){return t==null&&(t=Be(8)),Fu(e,t)}function ej(n){var e=Ou(n);return[e]}function tj(n,e,t){return t==null&&(t=Be(4)),Mu(e,t)}function nj(n){var e=ks(n),t=n.read_shift(1);return[e,t,"b"]}function rj(n,e,t){return t==null&&(t=Be(9)),Fu(e,t),t.write_shift(1,n.v?1:0),t}function ij(n){var e=Ou(n),t=n.read_shift(1);return[e,t,"b"]}function sj(n,e,t){return t==null&&(t=Be(5)),Mu(e,t),t.write_shift(1,n.v?1:0),t}function aj(n){var e=ks(n),t=n.read_shift(1);return[e,t,"e"]}function oj(n,e,t){return t==null&&(t=Be(9)),Fu(e,t),t.write_shift(1,n.v),t}function cj(n){var e=Ou(n),t=n.read_shift(1);return[e,t,"e"]}function uj(n,e,t){return t==null&&(t=Be(8)),Mu(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function lj(n){var e=ks(n),t=n.read_shift(4);return[e,t,"s"]}function hj(n,e,t){return t==null&&(t=Be(12)),Fu(e,t),t.write_shift(4,e.v),t}function fj(n){var e=Ou(n),t=n.read_shift(4);return[e,t,"s"]}function dj(n,e,t){return t==null&&(t=Be(8)),Mu(e,t),t.write_shift(4,e.v),t}function pj(n){var e=ks(n),t=Ih(n);return[e,t,"n"]}function mj(n,e,t){return t==null&&(t=Be(16)),Fu(e,t),Iu(n.v,t),t}function gj(n){var e=Ou(n),t=Ih(n);return[e,t,"n"]}function vj(n,e,t){return t==null&&(t=Be(12)),Mu(e,t),Iu(n.v,t),t}function _j(n){var e=ks(n),t=iI(n);return[e,t,"n"]}function yj(n,e,t){return t==null&&(t=Be(12)),Fu(e,t),sI(n.v,t),t}function wj(n){var e=Ou(n),t=iI(n);return[e,t,"n"]}function xj(n,e,t){return t==null&&(t=Be(8)),Mu(e,t),sI(n.v,t),t}function Ej(n){var e=ks(n),t=Fv(n);return[e,t,"is"]}function Tj(n){var e=ks(n),t=mi(n);return[e,t,"str"]}function bj(n,e,t){return t==null&&(t=Be(12+4*n.v.length)),Fu(e,t),Vr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Aj(n){var e=Ou(n),t=mi(n);return[e,t,"str"]}function Ij(n,e,t){return t==null&&(t=Be(8+4*n.v.length)),Mu(e,t),Vr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Sj(n,e,t){var r=n.l+e,i=ks(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=vm(n,r-n.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else n.l=r;return a}function Pj(n,e,t){var r=n.l+e,i=ks(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=vm(n,r-n.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else n.l=r;return a}function Nj(n,e,t){var r=n.l+e,i=ks(n);i.r=t["!row"];var s=Ih(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=vm(n,r-n.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else n.l=r;return a}function kj(n,e,t){var r=n.l+e,i=ks(n);i.r=t["!row"];var s=mi(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=vm(n,r-n.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else n.l=r;return a}var Cj=Bu,Rj=Ah;function Lj(n,e){return e==null&&(e=Be(4)),e.write_shift(4,n),e}function Dj(n,e){var t=n.l+e,r=Bu(n),i=Ov(n),s=mi(n),a=mi(n),o=mi(n);n.l=t;var c={rfx:r,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function Fj(n,e){var t=Be(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Ah({s:Br(n[0]),e:Br(n[0])},t),Mv("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return Vr(i||"",t),Vr(n[1].Tooltip||"",t),Vr("",t),t.slice(0,t.l)}function Oj(){}function Mj(n,e,t){var r=n.l+e,i=aI(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=AU(n,r-n.l,t);a[1]=o}else n.l=r;return a}function Bj(n,e,t){var r=n.l+e,i=Bu(n),s=[i];if(t.cellFormula){var a=SU(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function Vj(n,e,t){t==null&&(t=Be(18));var r=_m(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var zI=["left","right","top","bottom","header","footer"];function Uj(n){var e={};return zI.forEach(function(t){e[t]=Ih(n)}),e}function jj(n,e){return e==null&&(e=Be(6*8)),jI(n),zI.forEach(function(t){Iu(n[t],e)}),e}function qj(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function zj(n,e,t){t==null&&(t=Be(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Wj(n){var e=Be(24);return e.write_shift(4,4),e.write_shift(4,1),Ah(n,e),e}function Hj(n,e){return e==null&&(e=Be(16*4+2)),e.write_shift(2,n.password?bI(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function $j(){}function Gj(){}function Kj(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Ji(e),e.z=e.z||nr[14],e.v=Xi(Ci(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r:t,c:r};switch(c.s=Ec(i.cellXfs,e,i),e.l&&s["!links"].push([En(c),e.l]),e.c&&s["!comments"].push([En(c),e.c]),e.t){case"s":case"str":return i.bookSST?(o=zv(i.Strings,e.v,i.revStrings),c.t="s",c.v=o,a?He(n,18,dj(e,c)):He(n,7,hj(e,c))):(c.t="str",a?He(n,17,Ij(e,c)):He(n,6,bj(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?He(n,13,xj(e,c)):He(n,2,yj(e,c)):a?He(n,16,vj(e,c)):He(n,5,mj(e,c)),!0;case"b":return c.t="b",a?He(n,15,sj(e,c)):He(n,4,rj(e,c)),!0;case"e":return c.t="e",a?He(n,14,uj(e,c)):He(n,3,oj(e,c)),!0}return a?He(n,12,tj(e,c)):He(n,1,ZU(e,c)),!0}function Yj(n,e,t,r){var i=Un(e["!ref"]||"A1"),s,a="",o=[];He(n,145);var c=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var l=i.s.r;l<=u;++l){a=ni(l),$U(n,e,i,l);var d=!1;if(l<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){l===i.s.r&&(o[g]=pi(g)),s=o[g]+a;var p=c?(e[l]||[])[g]:e[s];if(!p){d=!1;continue}d=Kj(n,p,l,g,r,e,d)}}He(n,146)}function Xj(n,e){!e||!e["!merges"]||(He(n,177,Lj(e["!merges"].length)),e["!merges"].forEach(function(t){He(n,176,Rj(t))}),He(n,178))}function Jj(n,e){!e||!e["!cols"]||(He(n,390),e["!cols"].forEach(function(t,r){t&&He(n,60,Vj(r,t))}),He(n,391))}function Qj(n,e){!e||!e["!ref"]||(He(n,648),He(n,649,Wj(Un(e["!ref"]))),He(n,650))}function Zj(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=_n(t,-1,r[1].Target.replace(/#.*$/,""),on.HLINK);He(n,494,Fj(r,i))}}),delete e["!links"]}function eq(n,e,t,r){if(e["!comments"].length>0){var i=_n(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",on.VML);He(n,551,Mv("rId"+i)),e["!legacy"]=i}}function tq(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Er(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=gs(s);o.s.r==o.e.r&&(o.e.r=gs(e["!ref"]).e.r,s=Er(o));for(var c=0;c<a.length;++c){var u=a[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),He(n,161,Ah(Un(s))),He(n,162)}}function nq(n,e,t){He(n,133),He(n,137,zj(e,t)),He(n,138),He(n,134)}function rq(n,e){e["!protect"]&&He(n,535,Hj(e["!protect"]))}function iq(n,e,t,r){var i=Ki(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var c=Un(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],He(i,129),(t.vbaraw||a["!outline"])&&He(i,147,JU(o,a["!outline"])),He(i,148,KU(c)),nq(i,a,t.Workbook),Jj(i,a),Yj(i,a,n,e),rq(i,a),tq(i,a,t,n),Xj(i,a),Zj(i,a,r),a["!margins"]&&He(i,476,jj(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Qj(i,a),eq(i,a,n,r),He(i,130),i.end()}function sq(n,e){n.l+=10;var t=mi(n);return{name:t}}var aq=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function oq(n){return!n.Workbook||!n.Workbook.WBProps?"false":BM(n.Workbook.WBProps.date1904)?"true":"false"}var cq="][*?/\\".split("");function WI(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return cq.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function uq(n,e,t){n.forEach(function(r,i){WI(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function lq(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];uq(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)RU(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function HI(n){var e=[Tr];e[e.length]=st("workbook",null,{xmlns:Th[0],"xmlns:r":Mr.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(aq.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=st("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:wn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=st("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=st("definedName",wn(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function hq(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=m1(n),t.name=mi(n),t}function fq(n,e){return e||(e=Be(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),Mv(n.strRelID,e),Vr(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function dq(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?mi(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function pq(n,e){e||(e=Be(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),rI(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function mq(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=o9(n),a=IU(n,0,t),o=Ov(n);n.l=r;var c={Name:s,Ptg:a};return i<268435455&&(c.Sheet=i),o&&(c.Comment=o),c}function gq(n,e){He(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};He(n,156,fq(i))}He(n,144)}function vq(n,e){e||(e=Be(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Vr("SheetJS",e),Vr(cp.version,e),Vr(cp.version,e),Vr("7262",e),e.length>e.l?e.slice(0,e.l):e}function _q(n,e){e||(e=Be(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function yq(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(He(n,135),He(n,158,_q(i)),He(n,136))}}function wq(n,e){var t=Ki();return He(t,131),He(t,128,vq()),He(t,153,pq(n.Workbook&&n.Workbook.WBProps||null)),yq(t,n),gq(t,n),He(t,132),t.end()}function xq(n,e,t){return(e.slice(-4)===".bin"?wq:HI)(n)}function Eq(n,e,t,r,i){return(e.slice(-4)===".bin"?iq:qI)(n,t,r,i)}function Tq(n,e,t){return(e.slice(-4)===".bin"?jB:SI)(n,t)}function bq(n,e,t){return(e.slice(-4)===".bin"?pB:TI)(n,t)}function Aq(n,e,t){return(e.slice(-4)===".bin"?rV:RI)(n)}function Iq(n){return(n.slice(-4)===".bin"?YB:kI)()}function Sq(n,e){var t=[];return n.Props&&t.push(T9(n.Props,e)),n.Custprops&&t.push(b9(n.Props,n.Custprops)),t.join("")}function Pq(){return""}function Nq(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(st("NumberFormat",null,{"ss:Format":wn(nr[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(st("Style",s.join(""),a))}),st("Styles",t.join(""))}function $I(n){return st("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+jv(n.Ref,{r:0,c:0})})}function kq(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push($I(i)))}return st("Names",t.join(""))}function Cq(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push($I(o)))}return s.join("")}function Rq(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(st("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(st("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(st("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(st("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(Zr("ProtectContents","True")),n["!protect"].objects&&i.push(Zr("ProtectObjects","True")),n["!protect"].scenarios&&i.push(Zr("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(Zr("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(Zr("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":st("WorksheetOptions",i.join(""),{xmlns:hs.x})}function Lq(n){return n.map(function(e){var t=MM(e.t||""),r=st("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return st("Comment",r,{"ss:Author":e.a})}).join("")}function Dq(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+wn(jv(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var c=Br(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=wn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=wn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],l=0;l!=u.length;++l)u[l].s.c!=a.c||u[l].s.r!=a.r||(u[l].e.c>u[l].s.c&&(o["ss:MergeAcross"]=u[l].e.c-u[l].s.c),u[l].e.r>u[l].s.r&&(o["ss:MergeDown"]=u[l].e.r-u[l].s.r));var d="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",g=String(n.v);break;case"b":d="Boolean",g=n.v?"1":"0";break;case"e":d="Error",g=Pd[n.v];break;case"d":d="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||nr[14]);break;case"s":d="String",g=OM(n.v||"");break}var p=Ec(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var x=n.v!=null?g:"",_=n.t=="z"?"":'<Data ss:Type="'+d+'">'+x+"</Data>";return(n.c||[]).length>0&&(_+=Lq(n.c)),st("Cell",_,o)}function Fq(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=II(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Oq(n,e,t,r){if(!n["!ref"])return"";var i=Un(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(E,P){Vv(E);var L=!!E.width,M=_m(P,E),K={"ss:Index":P+1};L&&(K["ss:Width"]=_p(M.width)),E.hidden&&(K["ss:Hidden"]="1"),o.push(st("Column",null,K))});for(var c=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var l=[Fq(u,(n["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},x=En(p),_=c?(n[u]||[])[d]:n[x];l.push(Dq(_,x,n,e,t,r,p))}}l.push("</Row>"),l.length>2&&o.push(l.join(""))}return o.join("")}function Mq(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Cq(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Oq(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(Rq(s,e,n,t)),r.join("")}function Bq(n,e){e||(e={}),n.SSF||(n.SSF=Ji(nr)),n.SSF&&(dm(),fm(n.SSF),e.revssf=pm(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],Ec(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Sq(n,e)),t.push(Pq()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(st("Worksheet",Mq(r,e,n),{"ss:Name":wn(n.SheetNames[r])}));return t[2]=Nq(n,e),t[3]=kq(n),Tr+st("Workbook",t.join(""),{xmlns:hs.ss,"xmlns:o":hs.o,"xmlns:x":hs.x,"xmlns:ss":hs.ss,"xmlns:dt":hs.dt,"xmlns:html":hs.html})}var gg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Vq(n,e){var t=[],r=[],i=[],s=0,a,o=jw(e5,"n"),c=jw(t5,"n");if(n.Props)for(a=ii(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=ii(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)gI.indexOf(i[s][0])>-1||dI.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Sn.utils.cfb_add(e,"/SummaryInformation",a5(r,gg.SI,c,t5)),(t.length||u.length)&&Sn.utils.cfb_add(e,"/DocumentSummaryInformation",a5(t,gg.DSI,o,e5,u.length?u:null,gg.UDI))}function Uq(n,e){var t=e||{},r=Sn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Sn.utils.cfb_add(r,i,GI(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Vq(n,r),t.biff==8&&n.vbaraw&&iV(r,Sn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var jq={0:{f:WU},1:{f:QU},2:{f:_j},3:{f:aj},4:{f:nj},5:{f:pj},6:{f:Tj},7:{f:lj},8:{f:kj},9:{f:Nj},10:{f:Sj},11:{f:Pj},12:{f:ej},13:{f:wj},14:{f:cj},15:{f:ij},16:{f:gj},17:{f:Aj},18:{f:fj},19:{f:Fv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:mq},40:{},42:{},43:{f:TB},44:{f:xB},45:{f:IB},46:{f:PB},47:{f:SB},48:{},49:{f:e9},50:{},51:{f:WB},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:tB},62:{f:Ej},63:{f:XB},64:{f:$j},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Aa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:qj},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:XU},148:{f:GU,p:16},151:{f:Oj},152:{},153:{f:dq},154:{},155:{},156:{f:hq},157:{},158:{},159:{T:1,f:hB},160:{T:-1},161:{T:1,f:Bu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Cj},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:qB},336:{T:-1},337:{f:GB,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:m1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Y9},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Mj},427:{f:Bj},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Uj},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:YU},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Dj},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:m1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:tV},633:{T:1},634:{T:-1},635:{T:1,f:ZB},636:{T:-1},637:{f:i9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:sq},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Gj},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ot(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&Rv(t)&&n.push(t)}}function qq(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return ot(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,c=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var l=n.next(4);for(l.write_shift(2,s),l.write_shift(2,u),n.push(t.slice(c,c+u)),c+=u;c<i;){for(l=n.next(4),l.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;l.write_shift(2,u),n.push(t.slice(c,c+u)),c+=u}}}function kd(n,e,t){return n||(n=Be(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function zq(n,e,t,r){var i=Be(9);return kd(i,n,e),_I(t,r||"b",i),i}function Wq(n,e,t){var r=Be(8+2*t.length);return kd(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function Hq(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Xi(Ci(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?ot(n,2,sB(t,r,i)):ot(n,3,iB(t,r,i));return;case"b":case"e":ot(n,5,zq(t,r,e.v,e.t));return;case"s":case"str":ot(n,4,Wq(t,r,(e.v||"").slice(0,255)));return}ot(n,1,kd(null,t,r))}function $q(n,e,t,r){var i=Array.isArray(e),s=Un(e["!ref"]||"A1"),a,o="",c=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Er(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ni(u);for(var l=s.s.c;l<=s.e.c;++l){u===s.s.r&&(c[l]=pi(l)),a=c[l]+o;var d=i?(e[u]||[])[l]:e[a];d&&Hq(n,d,u,l)}}}function Gq(n,e){for(var t=e||{},r=Ki(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return ot(r,t.biff==4?1033:t.biff==3?521:9,Bv(n,16,t)),$q(r,n.Sheets[n.SheetNames[i]],i,t),ot(r,10),r.end()}function Kq(n,e,t){ot(n,49,j9({sz:12,name:"Arial"},t))}function Yq(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&ot(n,1054,W9(i,e[i],t))})}function Xq(n,e){var t=Be(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),ot(n,2151,t),t=Be(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),xI(Un(e["!ref"]||"A1"),t),t.write_shift(4,4),ot(n,2152,t)}function Jq(n,e){for(var t=0;t<16;++t)ot(n,224,c5({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){ot(n,224,c5(r,0,e))})}function Qq(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];ot(n,440,Q9(r)),r[1].Tooltip&&ot(n,2048,Z9(r))}delete e["!links"]}function Zq(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&ot(n,125,nB(_m(i,r),i))})}}function ez(n,e,t,r,i){var s=16+Ec(i.cellXfs,e,i);if(e.v==null&&!e.bf){ot(n,513,Su(t,r,s));return}if(e.bf)ot(n,6,bU(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Xi(Ci(e.v)):e.v;ot(n,515,K9(t,r,a,s));break;case"b":case"e":ot(n,517,G9(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=zv(i.Strings,e.v,i.revStrings);ot(n,253,q9(t,r,o,s))}else ot(n,516,z9(t,r,(e.v||"").slice(0,255),s,i));break;default:ot(n,513,Su(t,r,s))}}function tz(n,e,t){var r=Ki(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},c=Array.isArray(s),u=e.biff==8,l,d="",g=[],p=Un(s["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}ot(r,2057,Bv(t,16,e)),ot(r,13,Is(1)),ot(r,12,Is(100)),ot(r,15,Si(!0)),ot(r,17,Si(!1)),ot(r,16,Iu(.001)),ot(r,95,Si(!0)),ot(r,42,Si(!1)),ot(r,43,Si(!1)),ot(r,130,Is(1)),ot(r,128,$9()),ot(r,131,Si(!1)),ot(r,132,Si(!1)),u&&Zq(r,s["!cols"]),ot(r,512,H9(p,e)),u&&(s["!links"]=[]);for(var _=p.s.r;_<=p.e.r;++_){d=ni(_);for(var E=p.s.c;E<=p.e.c;++E){_===p.s.r&&(g[E]=pi(E)),l=g[E]+d;var P=c?(s[_]||[])[E]:s[l];P&&(ez(r,P,_,E,e),u&&P.l&&s["!links"].push([l,P.l]))}}var L=o.CodeName||o.name||i;return u&&ot(r,574,U9((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&ot(r,229,J9(s["!merges"])),u&&Qq(r,s),ot(r,442,wI(L)),u&&Xq(r,s),ot(r,10),r.end()}function nz(n,e,t){var r=Ki(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,c=t.biff==5;if(ot(r,2057,Bv(n,5,t)),t.bookType=="xla"&&ot(r,135),ot(r,225,o?Is(1200):null),ot(r,193,S9(2)),c&&ot(r,191),c&&ot(r,192),ot(r,226),ot(r,92,O9("SheetJS",t)),ot(r,66,Is(o?1200:1252)),o&&ot(r,353,Is(0)),o&&ot(r,448),ot(r,317,rB(n.SheetNames.length)),o&&n.vbaraw&&ot(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";ot(r,442,wI(u))}ot(r,156,Is(17)),ot(r,25,Si(!1)),ot(r,18,Si(!1)),ot(r,19,Is(0)),o&&ot(r,431,Si(!1)),o&&ot(r,444,Is(0)),ot(r,61,V9()),ot(r,64,Si(!1)),ot(r,141,Is(0)),ot(r,34,Si(oq(n)=="true")),ot(r,14,Si(!0)),o&&ot(r,439,Si(!1)),ot(r,218,Is(0)),Kq(r,n,t),Yq(r,n.SSF,t),Jq(r,t),o&&ot(r,352,Si(!1));var l=r.end(),d=Ki();o&&ot(d,140,eB()),o&&t.Strings&&qq(d,252,B9(t.Strings)),ot(d,10);var g=d.end(),p=Ki(),x=0,_=0;for(_=0;_<n.SheetNames.length;++_)x+=(o?12:11)+(o?2:1)*n.SheetNames[_].length;var E=l.length+x+g.length;for(_=0;_<n.SheetNames.length;++_){var P=s[_]||{};ot(p,133,M9({pos:E,hs:P.Hidden||0,dt:0,name:n.SheetNames[_]},t)),E+=e[_].length}var L=p.end();if(x!=L.length)throw new Error("BS8 "+x+" != "+L.length);var M=[];return l.length&&M.push(l),L.length&&M.push(L),g.length&&M.push(g),Qr(M)}function rz(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=Ji(nr)),n&&n.SSF&&(dm(),fm(n.SSF),t.revssf=pm(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Wv(t),t.cellXfs=[],Ec(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=tz(i,t,n);return r.unshift(nz(n,r,t)),Qr(r)}function GI(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=gs(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return rz(n,e);case 4:case 3:case 2:return Gq(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function iz(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,c=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,c=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var l=En({r:t,c:a}),d=r.dense?(n[t]||[])[a]:n[l],g=d&&d.v!=null&&(d.h||FM(d.w||(so(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),r.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+l,s.push(st("td",g,p))}}var x="<tr>";return x+s.join("")+"</tr>"}var sz='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',az="</body></html>";function oz(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function KI(n,e){var t=e||{},r=t.header!=null?t.header:sz,i=t.footer!=null?t.footer:az,s=[r],a=gs(n["!ref"]);t.dense=Array.isArray(n),s.push(oz(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(iz(n,a,o,t));return s.push("</table>"+i),s.join("")}function YI(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?Br(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),c=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var l=gs(n["!ref"]);u.s.r=Math.min(u.s.r,l.s.r),u.s.c=Math.min(u.s.c,l.s.c),u.e.r=Math.max(u.e.r,l.e.r),u.e.c=Math.max(u.e.c,l.e.c),i==-1&&(u.e.r=i=l.e.r+1)}var d=[],g=0,p=n["!rows"]||(n["!rows"]=[]),x=0,_=0,E=0,P=0,L=0,M=0;for(n["!cols"]||(n["!cols"]=[]);x<o.length&&_<c;++x){var K=o[x];if(m5(K)){if(r.display)continue;p[_]={hidden:!0}}var se=K.children;for(E=P=0;E<se.length;++E){var oe=se[E];if(!(r.display&&m5(oe))){var N=oe.hasAttribute("data-v")?oe.getAttribute("data-v"):oe.hasAttribute("v")?oe.getAttribute("v"):VM(oe.innerHTML),A=oe.getAttribute("data-z")||oe.getAttribute("z");for(g=0;g<d.length;++g){var C=d[g];C.s.c==P+s&&C.s.r<_+i&&_+i<=C.e.r&&(P=C.e.c+1-s,g=-1)}M=+oe.getAttribute("colspan")||1,((L=+oe.getAttribute("rowspan")||1)>1||M>1)&&d.push({s:{r:_+i,c:P+s},e:{r:_+i+(L||1)-1,c:P+s+(M||1)-1}});var B={t:"s",v:N},b=oe.getAttribute("data-t")||oe.getAttribute("t")||"";N!=null&&(N.length==0?B.t=b||"z":r.raw||N.trim().length==0||b=="s"||(N==="TRUE"?B={t:"b",v:!0}:N==="FALSE"?B={t:"b",v:!1}:isNaN(Qa(N))?isNaN(Jf(N).getDate())||(B={t:"d",v:Ci(N)},r.cellDates||(B={t:"n",v:Xi(B.v)}),B.z=r.dateNF||nr[14]):B={t:"n",v:Qa(N)})),B.z===void 0&&A!=null&&(B.z=A);var S="",R=oe.getElementsByTagName("A");if(R&&R.length)for(var ie=0;ie<R.length&&!(R[ie].hasAttribute("href")&&(S=R[ie].getAttribute("href"),S.charAt(0)!="#"));++ie);S&&S.charAt(0)!="#"&&(B.l={Target:S}),r.dense?(n[_+i]||(n[_+i]=[]),n[_+i][P+s]=B):n[En({c:P+s,r:_+i})]=B,u.e.c<P+s&&(u.e.c=P+s),P+=M}}++_}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,_-1+i),n["!ref"]=Er(u),_>=c&&(n["!fullref"]=Er((u.e.r=o.length-x+_-1+i,u))),n}function XI(n,e){var t=e||{},r=t.dense?[]:{};return YI(r,n,e)}function cz(n,e){return Du(XI(n,e),e)}function m5(n){var e="",t=uz(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function uz(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var lz=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Zf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Tr+e}}(),g5=function(){var n=function(s){return wn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var c=[];c.push('      <table:table table:name="'+wn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,l=0,d=gs(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,x=Array.isArray(s);if(s["!cols"])for(l=0;l<=d.e.c;++l)c.push("        <table:table-column"+(s["!cols"][l]?' table:style-name="co'+s["!cols"][l].ods+'"':"")+`></table:table-column>
`);var _="",E=s["!rows"]||[];for(u=0;u<d.s.r;++u)_=E[u]?' table:style-name="ro'+E[u].ods+'"':"",c.push("        <table:table-row"+_+`></table:table-row>
`);for(;u<=d.e.r;++u){for(_=E[u]?' table:style-name="ro'+E[u].ods+'"':"",c.push("        <table:table-row"+_+`>
`),l=0;l<d.s.c;++l)c.push(e);for(;l<=d.e.c;++l){var P=!1,L={},M="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>l)&&!(g[p].s.r>u)&&!(g[p].e.c<l)&&!(g[p].e.r<u)){(g[p].s.c!=l||g[p].s.r!=u)&&(P=!0),L["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,L["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(P){c.push(t);continue}var K=En({r:u,c:l}),se=x?(s[u]||[])[l]:s[K];if(se&&se.f&&(L["table:formula"]=wn(kU(se.f)),se.F&&se.F.slice(0,K.length)==K)){var oe=gs(se.F);L["table:number-matrix-columns-spanned"]=oe.e.c-oe.s.c+1,L["table:number-matrix-rows-spanned"]=oe.e.r-oe.s.r+1}if(!se){c.push(e);continue}switch(se.t){case"b":M=se.v?"TRUE":"FALSE",L["office:value-type"]="boolean",L["office:boolean-value"]=se.v?"true":"false";break;case"n":M=se.w||String(se.v||0),L["office:value-type"]="float",L["office:value"]=se.v||0;break;case"s":case"str":M=se.v==null?"":se.v,L["office:value-type"]="string";break;case"d":M=se.w||Ci(se.v).toISOString(),L["office:value-type"]="date",L["office:date-value"]=Ci(se.v).toISOString(),L["table:style-name"]="ce1";break;default:c.push(e);continue}var N=n(M);if(se.l&&se.l.Target){var A=se.l.Target;A=A.charAt(0)=="#"?"#"+CU(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),N=st("text:a",N,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+st("table:table-cell",st("text:p",N,{}),L)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var l=0;l<u["!cols"].length;++l)if(u["!cols"][l]){var d=u["!cols"][l];if(d.width==null&&d.wpx==null&&d.wch==null)continue;Vv(d),d.ods=o;var g=u["!cols"][l].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var l=0;l<u["!rows"].length;++l)if(u["!rows"][l]){u["!rows"][l].ods=c;var d=u["!rows"][l].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var c=[Tr],u=Zf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),l=Zf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+l+`>
`),c.push(hI().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),i(c,a),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)c.push(r(a.Sheets[a.SheetNames[d]],a,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function JI(n,e){if(e.bookType=="fods")return g5(n,e);var t=Pv(),r="",i=[],s=[];return r="mimetype",$t(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",$t(t,r,g5(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",$t(t,r,lz(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",$t(t,r,Tr+hI()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",$t(t,r,E9(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",$t(t,r,w9(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function xp(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function hz(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):$s(Qf(n))}function fz(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function dc(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function dz(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function ed(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function vn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function Ul(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Sr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=ed(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var c=t[0];n[t[0]++]>=128;);o=n.slice(c,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=ed(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Kr(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(vn(r*8+i.type)),i.type==2&&e.push(vn(i.data.length)),e.push(i.data))})}),dc(e)}function js(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=ed(n,r),s=Sr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:Ul(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Sr(o.data),u=Ul(c[3][0].data);a.messages.push({meta:c,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Ul(s[3][0].data)>>>0>0),t.push(a)}return t}function pl(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:vn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:vn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:vn(a.data.length)}],r[2].push({data:Kr(a.meta),type:2})});var s=Kr(r);e.push(vn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),dc(e)}function pz(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=ed(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var c=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,c=(e[t[0]++]&224)<<3,c|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(c=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(c=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[dc(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(i.push(i[0].slice(-c)),u-=c;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-c,-c+u))}}var l=dc(i);if(l.length!=r)throw new Error("Unexpected length: ".concat(l.length," != ").concat(r));return l}function qs(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(pz(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return dc(e)}function ml(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=vn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return dc(e)}function vg(n,e){var t=new Uint8Array(32),r=xp(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,dz(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function _g(n,e){var t=new Uint8Array(32),r=xp(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function Wo(n){var e=Sr(n);return ed(e[1][0].data)}function mz(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&Ul(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=xp(n[7][0].data),l=0,d=[],g=xp(n[4][0].data),p=0,x=[],_=0;_<e.length;++_){if(e[_]==null){u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535);continue}u.setUint16(_*2,l,!0),g.setUint16(_*2,p,!0);var E,P;switch(typeof e[_]){case"string":E=vg({t:"s",v:e[_]},t),P=_g({t:"s",v:e[_]},t);break;case"number":E=vg({t:"n",v:e[_]},t),P=_g({t:"n",v:e[_]},t);break;case"boolean":E=vg({t:"b",v:e[_]},t),P=_g({t:"b",v:e[_]},t);break;default:throw new Error("Unsupported value "+e[_])}d.push(E),l+=E.length,x.push(P),p+=P.length,++c}for(n[2][0].data=vn(c);_<n[7][0].data.length/2;++_)u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535,!0);return n[6][0].data=dc(d),n[3][0].data=dc(x),c}function gz(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=gs(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Er(r)));var s=Ep(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(D){return D.forEach(function(V){typeof V=="string"&&a.push(V)})});var o={},c=[],u=Sn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(D,V){return[D,u.FullPaths[V]]}).forEach(function(D){var V=D[0],U=D[1];if(V.type==2&&V.name.match(/\.iwa/)){var J=V.content,ae=qs(J),le=js(ae);le.forEach(function(ue){c.push(ue.id),o[ue.id]={deps:[],location:U,type:Ul(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(D,V){return D-V});var l=c.filter(function(D){return D>1}).map(function(D){return[D,vn(D)]});u.FileIndex.map(function(D,V){return[D,u.FullPaths[V]]}).forEach(function(D){var V=D[0];if(D[1],!!V.name.match(/\.iwa/)){var U=js(qs(V.content));U.forEach(function(J){J.messages.forEach(function(ae){l.forEach(function(le){J.messages.some(function(ue){return Ul(ue.meta[1][0].data)!=11006&&fz(ue.data,le[1])})&&o[le[0]].deps.push(J.id)})})})}});for(var d=Sn.find(u,o[1].location),g=js(qs(d.content)),p,x=0;x<g.length;++x){var _=g[x];_.id==1&&(p=_)}var E=Wo(Sr(p.messages[0].data)[1][0].data);for(d=Sn.find(u,o[E].location),g=js(qs(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);for(E=Wo(Sr(p.messages[0].data)[2][0].data),d=Sn.find(u,o[E].location),g=js(qs(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);for(E=Wo(Sr(p.messages[0].data)[2][0].data),d=Sn.find(u,o[E].location),g=js(qs(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);var P=Sr(p.messages[0].data);{P[6][0].data=vn(r.e.r+1),P[7][0].data=vn(r.e.c+1);var L=Wo(P[46][0].data),M=Sn.find(u,o[L].location),K=js(qs(M.content));{for(var se=0;se<K.length&&K[se].id!=L;++se);if(K[se].id!=L)throw"Bad ColumnRowUIDMapArchive";var oe=Sr(K[se].messages[0].data);oe[1]=[],oe[2]=[],oe[3]=[];for(var N=0;N<=r.e.c;++N){var A=[];A[1]=A[2]=[{type:0,data:vn(N+420690)}],oe[1].push({type:2,data:Kr(A)}),oe[2].push({type:0,data:vn(N)}),oe[3].push({type:0,data:vn(N)})}oe[4]=[],oe[5]=[],oe[6]=[];for(var C=0;C<=r.e.r;++C)A=[],A[1]=A[2]=[{type:0,data:vn(C+726270)}],oe[4].push({type:2,data:Kr(A)}),oe[5].push({type:0,data:vn(C)}),oe[6].push({type:0,data:vn(C)});K[se].messages[0].data=Kr(oe)}M.content=ml(pl(K)),M.size=M.content.length,delete P[46];var B=Sr(P[4][0].data);{B[7][0].data=vn(r.e.r+1);var b=Sr(B[1][0].data),S=Wo(b[2][0].data);M=Sn.find(u,o[S].location),K=js(qs(M.content));{if(K[0].id!=S)throw"Bad HeaderStorageBucket";var R=Sr(K[0].messages[0].data);for(C=0;C<s.length;++C){var ie=Sr(R[2][0].data);ie[1][0].data=vn(C),ie[4][0].data=vn(s[C].length),R[2][C]={type:R[2][0].type,data:Kr(ie)}}K[0].messages[0].data=Kr(R)}M.content=ml(pl(K)),M.size=M.content.length;var me=Wo(B[2][0].data);M=Sn.find(u,o[me].location),K=js(qs(M.content));{if(K[0].id!=me)throw"Bad HeaderStorageBucket";for(R=Sr(K[0].messages[0].data),N=0;N<=r.e.c;++N)ie=Sr(R[2][0].data),ie[1][0].data=vn(N),ie[4][0].data=vn(r.e.r+1),R[2][N]={type:R[2][0].type,data:Kr(ie)};K[0].messages[0].data=Kr(R)}M.content=ml(pl(K)),M.size=M.content.length;var Ee=Wo(B[4][0].data);(function(){for(var D=Sn.find(u,o[Ee].location),V=js(qs(D.content)),U,J=0;J<V.length;++J){var ae=V[J];ae.id==Ee&&(U=ae)}var le=Sr(U.messages[0].data);{le[3]=[];var ue=[];a.forEach(function(ze,Ze){ue[1]=[{type:0,data:vn(Ze)}],ue[2]=[{type:0,data:vn(1)}],ue[3]=[{type:2,data:hz(ze)}],le[3].push({type:2,data:Kr(ue)})})}U.messages[0].data=Kr(le);var xe=pl(V),Ve=ml(xe);D.content=Ve,D.size=D.content.length})();var Ne=Sr(B[3][0].data);{var _e=Ne[1][0];delete Ne[2];var ke=Sr(_e.data);{var Fe=Wo(ke[2][0].data);(function(){for(var D=Sn.find(u,o[Fe].location),V=js(qs(D.content)),U,J=0;J<V.length;++J){var ae=V[J];ae.id==Fe&&(U=ae)}var le=Sr(U.messages[0].data);{delete le[6],delete Ne[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var xe=0,Ve=0;Ve<=r.e.r;++Ve){var ze=Sr(ue);xe+=mz(ze,s[Ve],a),ze[1][0].data=vn(Ve),le[5].push({data:Kr(ze),type:2})}le[1]=[{type:0,data:vn(r.e.c+1)}],le[2]=[{type:0,data:vn(r.e.r+1)}],le[3]=[{type:0,data:vn(xe)}],le[4]=[{type:0,data:vn(r.e.r+1)}]}U.messages[0].data=Kr(le);var Ze=pl(V),at=ml(Ze);D.content=at,D.size=D.content.length})()}_e.data=Kr(ke)}B[3][0].data=Kr(Ne)}P[4][0].data=Kr(B)}p.messages[0].data=Kr(P);var rt=pl(g),T=ml(rt);return d.content=T,d.size=d.content.length,u}function vz(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function Wv(n){vz([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function _z(n,e){return e.bookType=="ods"?JI(n,e):e.bookType=="numbers"?gz(n,e):e.bookType=="xlsb"?yz(n,e):wz(n,e)}function yz(n,e){Sl=1024,n&&!n.SSF&&(n.SSF=Ji(nr)),n&&n.SSF&&(dm(),fm(n.SSF),e.revssf=pm(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,bf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=LI.indexOf(e.bookType)>-1,i=cI();Wv(e=e||{});var s=Pv(),a="",o=0;if(e.cellXfs=[],Ec(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",$t(s,a,fI(n.Props,e)),i.coreprops.push(a),_n(e.rels,2,a,on.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(n.SheetNames[u]);n.Props.SheetNames=c}for(n.Props.Worksheets=n.Props.SheetNames.length,$t(s,a,pI(n.Props)),i.extprops.push(a),_n(e.rels,3,a,on.EXT_PROPS),n.Custprops!==n.Props&&ii(n.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,mI(n.Custprops)),i.custprops.push(a),_n(e.rels,4,a,on.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var l={"!id":{}},d=n.Sheets[n.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,Eq(o-1,a,e,n,l)),i.sheets.push(a),_n(e.wbrels,-1,"worksheets/sheet"+o+"."+t,on.WS[0])}if(d){var p=d["!comments"],x=!1,_="";p&&p.length>0&&(_="xl/comments"+o+"."+t,$t(s,_,Aq(p,_)),i.comments.push(_),_n(l,-1,"../comments"+o+"."+t,on.CMNT),x=!0),d["!legacy"]&&x&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",CI(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}l["!id"].rId1&&$t(s,lI(a),Bl(l))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,bq(e.Strings,a,e)),i.strs.push(a),_n(e.wbrels,-1,"sharedStrings."+t,on.SST)),a="xl/workbook."+t,$t(s,a,xq(n,a)),i.workbooks.push(a),_n(e.rels,1,a,on.WB),a="xl/theme/theme1.xml",$t(s,a,NI(n.Themes,e)),i.themes.push(a),_n(e.wbrels,-1,"theme/theme1.xml",on.THEME),a="xl/styles."+t,$t(s,a,Tq(n,a,e)),i.styles.push(a),_n(e.wbrels,-1,"styles."+t,on.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",$t(s,a,n.vbaraw),i.vba.push(a),_n(e.wbrels,-1,"vbaProject.bin",on.VBA)),a="xl/metadata."+t,$t(s,a,Iq(a)),i.metadata.push(a),_n(e.wbrels,-1,"metadata."+t,on.XLMETA),$t(s,"[Content_Types].xml",uI(i,e)),$t(s,"_rels/.rels",Bl(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Bl(e.wbrels)),delete e.revssf,delete e.ssf,s}function wz(n,e){Sl=1024,n&&!n.SSF&&(n.SSF=Ji(nr)),n&&n.SSF&&(dm(),fm(n.SSF),e.revssf=pm(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,bf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=LI.indexOf(e.bookType)>-1,i=cI();Wv(e=e||{});var s=Pv(),a="",o=0;if(e.cellXfs=[],Ec(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",$t(s,a,fI(n.Props,e)),i.coreprops.push(a),_n(e.rels,2,a,on.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(n.SheetNames[u]);n.Props.SheetNames=c}n.Props.Worksheets=n.Props.SheetNames.length,$t(s,a,pI(n.Props)),i.extprops.push(a),_n(e.rels,3,a,on.EXT_PROPS),n.Custprops!==n.Props&&ii(n.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,mI(n.Custprops)),i.custprops.push(a),_n(e.rels,4,a,on.CUST_PROPS));var l=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,qI(o-1,e,n,d)),i.sheets.push(a),_n(e.wbrels,-1,"worksheets/sheet"+o+"."+t,on.WS[0])}if(g){var x=g["!comments"],_=!1,E="";if(x&&x.length>0){var P=!1;x.forEach(function(L){L[1].forEach(function(M){M.T==!0&&(P=!0)})}),P&&(E="xl/threadedComments/threadedComment"+o+"."+t,$t(s,E,JB(x,l,e)),i.threadedcomments.push(E),_n(d,-1,"../threadedComments/threadedComment"+o+"."+t,on.TCMNT)),E="xl/comments"+o+"."+t,$t(s,E,RI(x)),i.comments.push(E),_n(d,-1,"../comments"+o+"."+t,on.CMNT),_=!0}g["!legacy"]&&_&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",CI(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&$t(s,lI(a),Bl(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,TI(e.Strings,e)),i.strs.push(a),_n(e.wbrels,-1,"sharedStrings."+t,on.SST)),a="xl/workbook."+t,$t(s,a,HI(n)),i.workbooks.push(a),_n(e.rels,1,a,on.WB),a="xl/theme/theme1.xml",$t(s,a,NI(n.Themes,e)),i.themes.push(a),_n(e.wbrels,-1,"theme/theme1.xml",on.THEME),a="xl/styles."+t,$t(s,a,SI(n,e)),i.styles.push(a),_n(e.wbrels,-1,"styles."+t,on.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",$t(s,a,n.vbaraw),i.vba.push(a),_n(e.wbrels,-1,"vbaProject.bin",on.VBA)),a="xl/metadata."+t,$t(s,a,kI()),i.metadata.push(a),_n(e.wbrels,-1,"metadata."+t,on.XLMETA),l.length>1&&(a="xl/persons/person.xml",$t(s,a,QB(l)),i.people.push(a),_n(e.wbrels,-1,"persons/person.xml",on.PEOPLE)),$t(s,"[Content_Types].xml",uI(i,e)),$t(s,"_rels/.rels",Bl(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Bl(e.wbrels)),delete e.revssf,delete e.ssf,s}function xz(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=io(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function QI(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Id(e.file,Sn.write(n,{type:hn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Sn.write(n,e)}function Ez(n,e){var t=Ji(e||{}),r=_z(n,t);return Tz(r,t)}function Tz(n,e){var t={},r=hn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Sn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(hm(i))}return e.password&&typeof encrypt_agile<"u"?QI(encrypt_agile(i,e.password),e):e.type==="file"?Id(e.file,i):e.type=="string"?wf(i):i}function bz(n,e){var t=e||{},r=Uq(n,t);return QI(r,t)}function oa(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Xf(Qf(r));case"binary":return Qf(r);case"string":return n;case"file":return Id(e.file,r,"utf8");case"buffer":return hn?ho(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):oa(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Az(n,e){switch(e.type){case"base64":return Xf(n);case"binary":return n;case"string":return n;case"file":return Id(e.file,n,"binary");case"buffer":return hn?ho(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function g0(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Xf(t):e.type=="string"?wf(t):t;case"file":return Id(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function ZI(n,e){Z7(),lq(n);var t=Ji(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=ZI(n,t);return t.type="array",hm(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return oa(Bq(n,t),t);case"slk":case"sylk":return oa(oB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return oa(KI(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Az(eS(n.Sheets[n.SheetNames[i]],t),t);case"csv":return oa(Hv(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return oa(cB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return g0(aB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return oa(uB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return oa(gB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return oa(EI.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return oa(JI(n,t),t);case"wk1":return g0(u5.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return g0(u5.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),g0(GI(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),bz(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Ez(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Iz(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function Sz(n,e,t){var r={};return r.type="file",r.file=e,Iz(r),ZI(n,r)}function Pz(n,e,t,r,i,s,a,o){var c=ni(t),u=o.defval,l=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var x=a?n[t][p]:n[r[p]+c];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var _=x.v;switch(x.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[p]!=null){if(_==null)if(x.t=="e"&&_===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(l&&_===null)g[s[p]]=null;else continue;else g[s[p]]=l&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?_:so(x,_,o);_!=null&&(d=!1)}}return{row:g,isempty:d}}function Ep(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},l=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof l){case"string":c=Un(l);break;case"number":c=Un(n["!ref"]),c.s.r=l;break;default:c=l}r>0&&(i=0);var d=ni(c.s.r),g=[],p=[],x=0,_=0,E=Array.isArray(n),P=c.s.r,L=0,M={};E&&!n[P]&&(n[P]=[]);var K=u.skipHidden&&n["!cols"]||[],se=u.skipHidden&&n["!rows"]||[];for(L=c.s.c;L<=c.e.c;++L)if(!(K[L]||{}).hidden)switch(g[L]=pi(L),t=E?n[P][L]:n[g[L]+d],r){case 1:s[L]=L-c.s.c;break;case 2:s[L]=g[L];break;case 3:s[L]=u.header[L-c.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=so(t,null,u),_=M[a]||0,!_)M[a]=1;else{do o=a+"_"+_++;while(M[o]);M[a]=_,M[o]=1}s[L]=o}for(P=c.s.r+i;P<=c.e.r;++P)if(!(se[P]||{}).hidden){var oe=Pz(n,c,P,g,r,s,E,u);(oe.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=oe.row)}return p.length=x,p}var v5=/"/g;function Nz(n,e,t,r,i,s,a,o){for(var c=!0,u=[],l="",d=ni(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+d];if(p==null)l="";else if(p.v!=null){c=!1,l=""+(o.rawNumbers&&p.t=="n"?p.v:so(p,null,o));for(var x=0,_=0;x!==l.length;++x)if((_=l.charCodeAt(x))===i||_===s||_===34||o.forceQuotes){l='"'+l.replace(v5,'""')+'"';break}l=="ID"&&(l='"ID"')}else p.f!=null&&!p.F?(c=!1,l="="+p.f,l.indexOf(",")>=0&&(l='"'+l.replace(v5,'""')+'"')):l="";u.push(l)}return o.blankrows===!1&&c?null:u.join(a)}function Hv(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=Un(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),l="",d=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(g[x]||{}).hidden||(d[x]=pi(x));for(var _=0,E=i.s.r;E<=i.e.r;++E)(p[E]||{}).hidden||(l=Nz(n,i,E,d,a,c,s,r),l!=null&&(r.strip&&(l=l.replace(u,"")),(l||r.blankrows!==!1)&&t.push((_++?o:"")+l)));return delete r.dense,t.join("")}function eS(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Hv(n,e);return t}function kz(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=Un(n["!ref"]),s="",a=[],o,c=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=pi(o);for(var l=i.s.r;l<=i.e.r;++l)for(s=ni(l),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[l]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}c[c.length]=e+"="+r}return c}function tS(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var c=typeof r.origin=="string"?Br(r.origin):r.origin;a=c.r,o=c.c}var u,l={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Un(s["!ref"]);l.e.c=Math.max(l.e.c,d.e.c),l.e.r=Math.max(l.e.r,d.e.r),a==-1&&(a=d.e.r+1,l.e.r=a+e.length-1+i)}else a==-1&&(a=0,l.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(_,E){ii(_).forEach(function(P){(p=g.indexOf(P))==-1&&(g[p=g.length]=P);var L=_[P],M="z",K="",se=En({c:o+p,r:a+E+i});u=td(s,se),L&&typeof L=="object"&&!(L instanceof Date)?s[se]=L:(typeof L=="number"?M="n":typeof L=="boolean"?M="b":typeof L=="string"?M="s":L instanceof Date?(M="d",r.cellDates||(M="n",L=Xi(L)),K=r.dateNF||nr[14]):L===null&&r.nullError&&(M="e",L=0),u?(u.t=M,u.v=L,delete u.w,delete u.R,K&&(u.z=K)):s[se]=u={t:M,v:L},K&&(u.z=K))})}),l.e.c=Math.max(l.e.c,o+g.length-1);var x=ni(a);if(i)for(p=0;p<g.length;++p)s[pi(p+o)+x]={t:"s",v:g[p]};return s["!ref"]=Er(l),s}function Cz(n,e){return tS(null,n,e)}function td(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=Br(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?td(n,En(e)):td(n,En({r:e,c:t||0}))}function Rz(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Lz(){return{SheetNames:[],Sheets:{}}}function Dz(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(WI(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Fz(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Rz(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function Oz(n,e){return n.z=e,n}function nS(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Mz(n,e,t){return nS(n,"#"+e,t)}function Bz(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Vz(n,e,t,r){for(var i=typeof e!="string"?e:Un(e),s=typeof e=="string"?e:Er(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=td(n,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=t,r&&(c.D=!0))}return n}var yg={encode_col:pi,encode_row:ni,encode_cell:En,encode_range:Er,decode_col:Dv,decode_row:Lv,split_cell:ZM,decode_cell:Br,decode_range:gs,format_cell:so,sheet_add_aoa:nI,sheet_add_json:tS,sheet_add_dom:YI,aoa_to_sheet:bh,json_to_sheet:Cz,table_to_sheet:XI,table_to_book:cz,sheet_to_csv:Hv,sheet_to_txt:eS,sheet_to_json:Ep,sheet_to_html:KI,sheet_to_formulae:kz,sheet_to_row_object_array:Ep,sheet_get_cell:td,book_new:Lz,book_append_sheet:Dz,book_set_sheet_visibility:Fz,cell_set_number_format:Oz,cell_set_hyperlink:nS,cell_set_internal_link:Mz,cell_add_comment:Bz,sheet_set_array_formula:Vz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Uz="modulepreload",jz=function(n){return"/"+n},_5={},v1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=jz(c),c in _5)return;_5[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Uz,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((g,p)=>{d.addEventListener("load",g),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function xn(n){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(n)}var fi=Uint8Array,ps=Uint16Array,$v=Int32Array,ym=new fi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wm=new fi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_1=new fi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),rS=function(n,e){for(var t=new ps(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new $v(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},iS=rS(ym,2),sS=iS.b,y1=iS.r;sS[28]=258,y1[258]=28;var aS=rS(wm,0),qz=aS.b,y5=aS.r,w1=new ps(32768);for(var Vn=0;Vn<32768;++Vn){var Ho=(Vn&43690)>>1|(Vn&21845)<<1;Ho=(Ho&52428)>>2|(Ho&13107)<<2,Ho=(Ho&61680)>>4|(Ho&3855)<<4,w1[Vn]=((Ho&65280)>>8|(Ho&255)<<8)>>1}var wa=function(n,e,t){for(var r=n.length,i=0,s=new ps(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new ps(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ps(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],l=e-n[i],d=a[n[i]-1]++<<l,g=d|(1<<l)-1;d<=g;++d)o[w1[d]>>c]=u}else for(o=new ps(r),i=0;i<r;++i)n[i]&&(o[i]=w1[a[n[i]-1]++]>>15-n[i]);return o},pc=new fi(288);for(var Vn=0;Vn<144;++Vn)pc[Vn]=8;for(var Vn=144;Vn<256;++Vn)pc[Vn]=9;for(var Vn=256;Vn<280;++Vn)pc[Vn]=7;for(var Vn=280;Vn<288;++Vn)pc[Vn]=8;var nd=new fi(32);for(var Vn=0;Vn<32;++Vn)nd[Vn]=5;var zz=wa(pc,9,0),Wz=wa(pc,9,1),Hz=wa(nd,5,0),$z=wa(nd,5,1),wg=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},zs=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},xg=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Gv=function(n){return(n+7)/8|0},oS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new fi(n.subarray(e,t))},Gz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hs=function(n,e,t){var r=new Error(e||Gz[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,Hs),!t)throw r;return r},Kz=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new fi(0);var a=!t,o=a||e.i!=2,c=e.i;a&&(t=new fi(i*3));var u=function(Ve){var ze=t.length;if(Ve>ze){var Ze=new fi(Math.max(ze*2,Ve));Ze.set(t),t=Ze}},l=e.f||0,d=e.p||0,g=e.b||0,p=e.l,x=e.d,_=e.m,E=e.n,P=i*8;do{if(!p){l=zs(n,d,1);var L=zs(n,d+1,3);if(d+=3,L)if(L==1)p=Wz,x=$z,_=9,E=5;else if(L==2){var oe=zs(n,d,31)+257,N=zs(n,d+10,15)+4,A=oe+zs(n,d+5,31)+1;d+=14;for(var C=new fi(A),B=new fi(19),b=0;b<N;++b)B[_1[b]]=zs(n,d+b*3,7);d+=N*3;for(var S=wg(B),R=(1<<S)-1,ie=wa(B,S,1),b=0;b<A;){var me=ie[zs(n,d,R)];d+=me&15;var M=me>>4;if(M<16)C[b++]=M;else{var Ee=0,Ne=0;for(M==16?(Ne=3+zs(n,d,3),d+=2,Ee=C[b-1]):M==17?(Ne=3+zs(n,d,7),d+=3):M==18&&(Ne=11+zs(n,d,127),d+=7);Ne--;)C[b++]=Ee}}var _e=C.subarray(0,oe),ke=C.subarray(oe);_=wg(_e),E=wg(ke),p=wa(_e,_,1),x=wa(ke,E,1)}else Hs(1);else{var M=Gv(d)+4,K=n[M-4]|n[M-3]<<8,se=M+K;if(se>i){c&&Hs(0);break}o&&u(g+K),t.set(n.subarray(M,se),g),e.b=g+=K,e.p=d=se*8,e.f=l;continue}if(d>P){c&&Hs(0);break}}o&&u(g+131072);for(var Fe=(1<<_)-1,rt=(1<<E)-1,T=d;;T=d){var Ee=p[xg(n,d)&Fe],D=Ee>>4;if(d+=Ee&15,d>P){c&&Hs(0);break}if(Ee||Hs(2),D<256)t[g++]=D;else if(D==256){T=d,p=null;break}else{var V=D-254;if(D>264){var b=D-257,U=ym[b];V=zs(n,d,(1<<U)-1)+sS[b],d+=U}var J=x[xg(n,d)&rt],ae=J>>4;J||Hs(3),d+=J&15;var ke=qz[ae];if(ae>3){var U=wm[ae];ke+=xg(n,d)&(1<<U)-1,d+=U}if(d>P){c&&Hs(0);break}o&&u(g+131072);var le=g+V;if(g<ke){var ue=s-ke,xe=Math.min(ke,le);for(ue+g<0&&Hs(3);g<xe;++g)t[g]=r[ue+g]}for(;g<le;++g)t[g]=t[g-ke]}}e.l=p,e.p=T,e.b=g,e.f=l,p&&(l=1,e.m=_,e.d=x,e.n=E)}while(!l);return g!=t.length&&a?oS(t,0,g):t.subarray(0,g)},qa=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},Zh=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Eg=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:uS,l:0};if(i==1){var a=new fi(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(se,oe){return se.f-oe.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,l=1,d=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};l!=i-1;)o=t[t[u].f<t[d].f?u++:d++],c=t[u!=l&&t[u].f<t[d].f?u++:d++],t[l++]={s:-1,f:o.f+c.f,l:o,r:c};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var p=new ps(g+1),x=x1(t[l-1],p,0);if(x>e){var r=0,_=0,E=x-e,P=1<<E;for(s.sort(function(oe,N){return p[N.s]-p[oe.s]||oe.f-N.f});r<i;++r){var L=s[r].s;if(p[L]>e)_+=P-(1<<x-p[L]),p[L]=e;else break}for(_>>=E;_>0;){var M=s[r].s;p[M]<e?_-=1<<e-p[M]++-1:++r}for(;r>=0&&_;--r){var K=s[r].s;p[K]==e&&(--p[K],++_)}x=e}return{t:new fi(p),l:x}},x1=function(n,e,t){return n.s==-1?Math.max(x1(n.l,e,t+1),x1(n.r,e,t+1)):e[n.s]=t},w5=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ps(++e),r=0,i=n[0],s=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(n[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[o]}return{c:t.subarray(0,r),n:e}},ef=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},cS=function(n,e,t){var r=t.length,i=Gv(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},x5=function(n,e,t,r,i,s,a,o,c,u,l){qa(e,l++,t),++i[256];for(var d=Eg(i,15),g=d.t,p=d.l,x=Eg(s,15),_=x.t,E=x.l,P=w5(g),L=P.c,M=P.n,K=w5(_),se=K.c,oe=K.n,N=new ps(19),A=0;A<L.length;++A)++N[L[A]&31];for(var A=0;A<se.length;++A)++N[se[A]&31];for(var C=Eg(N,7),B=C.t,b=C.l,S=19;S>4&&!B[_1[S-1]];--S);var R=u+5<<3,ie=ef(i,pc)+ef(s,nd)+a,me=ef(i,g)+ef(s,_)+a+14+3*S+ef(N,B)+2*N[16]+3*N[17]+7*N[18];if(c>=0&&R<=ie&&R<=me)return cS(e,l,n.subarray(c,c+u));var Ee,Ne,_e,ke;if(qa(e,l,1+(me<ie)),l+=2,me<ie){Ee=wa(g,p,0),Ne=g,_e=wa(_,E,0),ke=_;var Fe=wa(B,b,0);qa(e,l,M-257),qa(e,l+5,oe-1),qa(e,l+10,S-4),l+=14;for(var A=0;A<S;++A)qa(e,l+3*A,B[_1[A]]);l+=3*S;for(var rt=[L,se],T=0;T<2;++T)for(var D=rt[T],A=0;A<D.length;++A){var V=D[A]&31;qa(e,l,Fe[V]),l+=B[V],V>15&&(qa(e,l,D[A]>>5&127),l+=D[A]>>12)}}else Ee=zz,Ne=pc,_e=Hz,ke=nd;for(var A=0;A<o;++A){var U=r[A];if(U>255){var V=U>>18&31;Zh(e,l,Ee[V+257]),l+=Ne[V+257],V>7&&(qa(e,l,U>>23&31),l+=ym[V]);var J=U&31;Zh(e,l,_e[J]),l+=ke[J],J>3&&(Zh(e,l,U>>5&8191),l+=wm[J])}else Zh(e,l,Ee[U]),l+=Ne[U]}return Zh(e,l,Ee[256]),l+Ne[256]},Yz=new $v([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),uS=new fi(0),Xz=function(n,e,t,r,i,s){var a=s.z||n.length,o=new fi(r+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(r,o.length-i),u=s.l,l=(s.r||0)&7;if(e){l&&(c[0]=s.r>>3);for(var d=Yz[e-1],g=d>>13,p=d&8191,x=(1<<t)-1,_=s.p||new ps(32768),E=s.h||new ps(x+1),P=Math.ceil(t/3),L=2*P,M=function(at){return(n[at]^n[at+1]<<P^n[at+2]<<L)&x},K=new $v(25e3),se=new ps(288),oe=new ps(32),N=0,A=0,C=s.i||0,B=0,b=s.w||0,S=0;C+2<a;++C){var R=M(C),ie=C&32767,me=E[R];if(_[ie]=me,E[R]=ie,b<=C){var Ee=a-C;if((N>7e3||B>24576)&&(Ee>423||!u)){l=x5(n,c,0,K,se,oe,A,B,S,C-S,l),B=N=A=0,S=C;for(var Ne=0;Ne<286;++Ne)se[Ne]=0;for(var Ne=0;Ne<30;++Ne)oe[Ne]=0}var _e=2,ke=0,Fe=p,rt=ie-me&32767;if(Ee>2&&R==M(C-rt))for(var T=Math.min(g,Ee)-1,D=Math.min(32767,C),V=Math.min(258,Ee);rt<=D&&--Fe&&ie!=me;){if(n[C+_e]==n[C+_e-rt]){for(var U=0;U<V&&n[C+U]==n[C+U-rt];++U);if(U>_e){if(_e=U,ke=rt,U>T)break;for(var J=Math.min(rt,U-2),ae=0,Ne=0;Ne<J;++Ne){var le=C-rt+Ne&32767,ue=_[le],xe=le-ue&32767;xe>ae&&(ae=xe,me=le)}}}ie=me,me=_[ie],rt+=ie-me&32767}if(ke){K[B++]=268435456|y1[_e]<<18|y5[ke];var Ve=y1[_e]&31,ze=y5[ke]&31;A+=ym[Ve]+wm[ze],++se[257+Ve],++oe[ze],b=C+_e,++N}else K[B++]=n[C],++se[n[C]]}}for(C=Math.max(C,b);C<a;++C)K[B++]=n[C],++se[n[C]];l=x5(n,c,u,K,se,oe,A,B,S,C-S,l),u||(s.r=l&7|c[l/8|0]<<3,l-=7,s.h=E,s.p=_,s.i=C,s.w=b)}else{for(var C=s.w||0;C<a+u;C+=65535){var Ze=C+65535;Ze>=a&&(c[l/8|0]=u,Ze=a),l=cS(c,l+1,n.subarray(C,Ze))}s.i=a}return oS(o,0,r+Gv(l)+i)},lS=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},Jz=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new fi(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return Xz(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},hS=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},Qz=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=lS();i.p(e.dictionary),hS(n,2,i.d())}},Zz=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Hs(6,"invalid zlib data"),(n[1]>>5&1)==1&&Hs(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function E1(n,e){e||(e={});var t=lS();t.p(n);var r=Jz(n,e,e.dictionary?6:2,4);return Qz(r,e),hS(r,r.length-4,t.d()),r}function eW(n,e){return Kz(n.subarray(Zz(n),-4),{i:2},e,e)}var tW=typeof TextDecoder<"u"&&new TextDecoder,nW=0;try{tW.decode(uS,{stream:!0}),nW=1}catch{}var Ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Tg(){Ot.console&&typeof Ot.console.log=="function"&&Ot.console.log.apply(Ot.console,arguments)}var Cn={log:Tg,warn:function(n){Ot.console&&(typeof Ot.console.warn=="function"?Ot.console.warn.apply(Ot.console,arguments):Tg.call(null,arguments))},error:function(n){Ot.console&&(typeof Ot.console.error=="function"?Ot.console.error.apply(Ot.console,arguments):Tg(n))}};function bg(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Wc(r.response,e,t)},r.onerror=function(){Cn.error("could not download file")},r.send()}function E5(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function v0(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Af,T1,Wc=Ot.saveAs||((typeof window>"u"?"undefined":xn(window))!=="object"||window!==Ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ot.URL||Ot.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?E5(i.href)?bg(n,e,t):v0(i,i.target="_blank"):v0(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){v0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(E5(n))bg(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){v0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:xn(s)!=="object"&&(Cn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return bg(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Ot.HTMLElement)||Ot.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":xn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var l=o.result;l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=l:location=l,r=null},o.readAsDataURL(n)}else{var c=Ot.URL||Ot.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function fS(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Ag(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=ci(t,r,i,s,e[0],7,-680876936),s=ci(s,t,r,i,e[1],12,-389564586),i=ci(i,s,t,r,e[2],17,606105819),r=ci(r,i,s,t,e[3],22,-1044525330),t=ci(t,r,i,s,e[4],7,-176418897),s=ci(s,t,r,i,e[5],12,1200080426),i=ci(i,s,t,r,e[6],17,-1473231341),r=ci(r,i,s,t,e[7],22,-45705983),t=ci(t,r,i,s,e[8],7,1770035416),s=ci(s,t,r,i,e[9],12,-1958414417),i=ci(i,s,t,r,e[10],17,-42063),r=ci(r,i,s,t,e[11],22,-1990404162),t=ci(t,r,i,s,e[12],7,1804603682),s=ci(s,t,r,i,e[13],12,-40341101),i=ci(i,s,t,r,e[14],17,-1502002290),t=ui(t,r=ci(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ui(s,t,r,i,e[6],9,-1069501632),i=ui(i,s,t,r,e[11],14,643717713),r=ui(r,i,s,t,e[0],20,-373897302),t=ui(t,r,i,s,e[5],5,-701558691),s=ui(s,t,r,i,e[10],9,38016083),i=ui(i,s,t,r,e[15],14,-660478335),r=ui(r,i,s,t,e[4],20,-405537848),t=ui(t,r,i,s,e[9],5,568446438),s=ui(s,t,r,i,e[14],9,-1019803690),i=ui(i,s,t,r,e[3],14,-187363961),r=ui(r,i,s,t,e[8],20,1163531501),t=ui(t,r,i,s,e[13],5,-1444681467),s=ui(s,t,r,i,e[2],9,-51403784),i=ui(i,s,t,r,e[7],14,1735328473),t=li(t,r=ui(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=li(s,t,r,i,e[8],11,-2022574463),i=li(i,s,t,r,e[11],16,1839030562),r=li(r,i,s,t,e[14],23,-35309556),t=li(t,r,i,s,e[1],4,-1530992060),s=li(s,t,r,i,e[4],11,1272893353),i=li(i,s,t,r,e[7],16,-155497632),r=li(r,i,s,t,e[10],23,-1094730640),t=li(t,r,i,s,e[13],4,681279174),s=li(s,t,r,i,e[0],11,-358537222),i=li(i,s,t,r,e[3],16,-722521979),r=li(r,i,s,t,e[6],23,76029189),t=li(t,r,i,s,e[9],4,-640364487),s=li(s,t,r,i,e[12],11,-421815835),i=li(i,s,t,r,e[15],16,530742520),t=hi(t,r=li(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=hi(s,t,r,i,e[7],10,1126891415),i=hi(i,s,t,r,e[14],15,-1416354905),r=hi(r,i,s,t,e[5],21,-57434055),t=hi(t,r,i,s,e[12],6,1700485571),s=hi(s,t,r,i,e[3],10,-1894986606),i=hi(i,s,t,r,e[10],15,-1051523),r=hi(r,i,s,t,e[1],21,-2054922799),t=hi(t,r,i,s,e[8],6,1873313359),s=hi(s,t,r,i,e[15],10,-30611744),i=hi(i,s,t,r,e[6],15,-1560198380),r=hi(r,i,s,t,e[13],21,1309151649),t=hi(t,r,i,s,e[4],6,-145523070),s=hi(s,t,r,i,e[11],10,-1120210379),i=hi(i,s,t,r,e[2],15,718787259),r=hi(r,i,s,t,e[9],21,-343485551),n[0]=Zo(t,n[0]),n[1]=Zo(r,n[1]),n[2]=Zo(i,n[2]),n[3]=Zo(s,n[3])}function xm(n,e,t,r,i,s){return e=Zo(Zo(e,n),Zo(r,s)),Zo(e<<i|e>>>32-i,t)}function ci(n,e,t,r,i,s,a){return xm(e&t|~e&r,n,e,i,s,a)}function ui(n,e,t,r,i,s,a){return xm(e&r|t&~r,n,e,i,s,a)}function li(n,e,t,r,i,s,a){return xm(e^t^r,n,e,i,s,a)}function hi(n,e,t,r,i,s,a){return xm(t^(e|~r),n,e,i,s,a)}function dS(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Ag(r,rW(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Ag(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Ag(r,i),r}function rW(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Af=Ot.atob.bind(Ot),T1=Ot.btoa.bind(Ot);var T5="0123456789abcdef".split("");function iW(n){for(var e="",t=0;t<4;t++)e+=T5[n>>8*t+4&15]+T5[n>>8*t&15];return e}function sW(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function b1(n){return dS(n).map(sW).join("")}var aW=function(n){for(var e=0;e<n.length;e++)n[e]=iW(n[e]);return n.join("")}(dS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zo(n,e){if(aW){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function A1(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var l=o[c];u=(u+l+a.charCodeAt(c))%256,o[c]=o[u],o[u]=l}t=n,r=o}else o=r;var d=e.length,g=0,p=0,x="";for(c=0;c<d;c++)p=(p+(l=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=l,a=o[(o[g]+o[p])%256],x+=String.fromCharCode(e.charCodeAt(c)^a);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var b5={print:4,modify:8,copy:16,"annot-forms":32};function bl(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(o){if(b5.perm!==void 0)throw new Error("Invalid permission: "+o);i+=b5[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=b1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=A1(this.encryptionKey,this.padding)}function Al(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function A5(n){if(xn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(o){Ot.console&&Cn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Tp(n){if(!(this instanceof Tp))return new Tp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function pS(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Jc(n,e,t,r,i){if(!(this instanceof Jc))return new Jc(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,pS.call(this,r,i)}function Pl(n,e,t,r,i){if(!(this instanceof Pl))return new Pl(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,pS.call(this,r,i)}function Dt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,c=16,u="S",l=null;xn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(l=n.encryption||null)!==null&&(l.userPassword=l.userPassword||"",l.ownerPassword=l.ownerPassword||"",l.userPermissions=l.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=A5;var x="1.3",_=p.__private__.getPdfVersion=function(){return x};p.__private__.setPdfVersion=function(v){x=v};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return E};var P=p.__private__.getPageFormat=function(v){return E[v]};i=i||"a4";var L={COMPAT:"compat",ADVANCED:"advanced"},M=L.COMPAT;function K(){this.saveGraphicsState(),re(new wt(pt,0,0,-pt,0,ai()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),u="n",M=L.ADVANCED}function se(){this.restoreGraphicsState(),u="S",M=L.COMPAT}var oe=p.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};p.advancedAPI=function(v){var F=M===L.COMPAT;return F&&K.call(this),typeof v!="function"||(v(this),F&&se.call(this)),this},p.compatAPI=function(v){var F=M===L.ADVANCED;return F&&se.call(this),typeof v!="function"||(v(this),F&&K.call(this)),this},p.isAdvancedAPI=function(){return M===L.ADVANCED};var N,A=function(v){if(M!==L.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=p.roundToPrecision=p.__private__.roundToPrecision=function(v,F){var ne=e||F;if(isNaN(v)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(ne).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,16)};var B=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return C(v,2)},b=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return C(v,3)},S=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return M===L.COMPAT?v*pt:M===L.ADVANCED?v:void 0},R=function(v){return M===L.COMPAT?ai()-v:M===L.ADVANCED?v:void 0},ie=function(v){return S(R(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var me,Ee="00000000000000000000000000000000",Ne=p.__private__.getFileId=function(){return Ee},_e=p.__private__.setFileId=function(v){return Ee=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),l!==null&&(Mn=new bl(l.userPermissions,l.userPassword,l.ownerPassword,Ee)),Ee};p.setFileId=function(v){return _e(v),this},p.getFileId=function(){return Ne()};var ke=p.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),ne=F<0?"+":"-",ce=Math.floor(Math.abs(F/60)),ge=Math.abs(F%60),Oe=[ne,V(ce),"'",V(ge),"'"].join("");return["D:",v.getFullYear(),V(v.getMonth()+1),V(v.getDate()),V(v.getHours()),V(v.getMinutes()),V(v.getSeconds()),Oe].join("")},Fe=p.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),ne=parseInt(v.substr(6,2),10)-1,ce=parseInt(v.substr(8,2),10),ge=parseInt(v.substr(10,2),10),Oe=parseInt(v.substr(12,2),10),Ye=parseInt(v.substr(14,2),10);return new Date(F,ne,ce,ge,Oe,Ye,0)},rt=p.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=ke(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return me=F},T=p.__private__.getCreationDate=function(v){var F=me;return v==="jsDate"&&(F=Fe(me)),F};p.setCreationDate=function(v){return rt(v),this},p.getCreationDate=function(v){return T(v)};var D,V=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},U=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},J=0,ae=[],le=[],ue=0,xe=[],Ve=[],ze=!1,Ze=le,at=function(){J=0,ue=0,le=[],ae=[],xe=[],Y=jn(),X=jn()};p.__private__.setCustomOutputDestination=function(v){ze=!0,Ze=v};var Re=function(v){ze||(Ze=v)};p.__private__.resetCustomOutputDestination=function(){ze=!1,Ze=le};var re=p.__private__.out=function(v){return v=v.toString(),ue+=v.length+1,Ze.push(v),Ze},We=p.__private__.write=function(v){return re(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},_t=p.__private__.getArrayBuffer=function(v){for(var F=v.length,ne=new ArrayBuffer(F),ce=new Uint8Array(ne);F--;)ce[F]=v.charCodeAt(F);return ne},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return $e};var nt=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return nt=M===L.ADVANCED?v/pt:v,this};var ct,ut=p.__private__.getFontSize=p.getFontSize=function(){return M===L.COMPAT?nt:nt*pt},Tt=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return Tt=v,this},p.__private__.getR2L=p.getR2L=function(){return Tt};var At,Ft=p.__private__.setZoomMode=function(v){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ct=v;else if(isNaN(v)){if(F.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ct=v}else ct=parseInt(v,10)};p.__private__.getZoomMode=function(){return ct};var It,kt=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');At=v};p.__private__.getPageMode=function(){return At};var Ht=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');It=v};p.__private__.getLayoutMode=function(){return It},p.__private__.setDisplayMode=p.setDisplayMode=function(v,F,ne){return Ft(v),Ht(F),kt(ne),this};var Ct={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Ct).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ct[v]},p.__private__.getDocumentProperties=function(){return Ct},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var F in Ct)Ct.hasOwnProperty(F)&&v[F]&&(Ct[F]=v[F]);return this},p.__private__.setDocumentProperty=function(v,F){if(Object.keys(Ct).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ct[v]=F};var qt,pt,Fn,Gt,qr,tn={},Tn={},Di=[],Kt={},Zi={},bn={},br={},vi=null,un=0,Nt=[],en=new A5(p),Fi=n.hotfixes||[],Yn={},Cr={},_i=[],wt=function v(F,ne,ce,ge,Oe,Ye){if(!(this instanceof v))return new v(F,ne,ce,ge,Oe,Ye);isNaN(F)&&(F=1),isNaN(ne)&&(ne=0),isNaN(ce)&&(ce=0),isNaN(ge)&&(ge=1),isNaN(Oe)&&(Oe=0),isNaN(Ye)&&(Ye=0),this._matrix=[F,ne,ce,ge,Oe,Ye]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(v)},wt.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,ne=v.sx*this.shy+v.shy*this.sy,ce=v.shx*this.sx+v.sy*this.shx,ge=v.shx*this.shy+v.sy*this.sy,Oe=v.tx*this.sx+v.ty*this.shx+this.tx,Ye=v.tx*this.shy+v.ty*this.sy+this.ty;return new wt(F,ne,ce,ge,Oe,Ye)},wt.prototype.decompose=function(){var v=this.sx,F=this.shy,ne=this.shx,ce=this.sy,ge=this.tx,Oe=this.ty,Ye=Math.sqrt(v*v+F*F),dt=(v/=Ye)*ne+(F/=Ye)*ce;ne-=v*dt,ce-=F*dt;var f=Math.sqrt(ne*ne+ce*ce);return dt/=f,v*(ce/=f)<F*(ne/=f)&&(v=-v,F=-F,dt=-dt,Ye=-Ye),{scale:new wt(Ye,0,0,f,0,0),translate:new wt(1,0,0,1,ge,Oe),rotate:new wt(v,F,-F,v,0,0),skew:new wt(1,0,dt,1,0,0)}},wt.prototype.toString=function(v){return this.join(" ")},wt.prototype.inversed=function(){var v=this.sx,F=this.shy,ne=this.shx,ce=this.sy,ge=this.tx,Oe=this.ty,Ye=1/(v*ce-F*ne),dt=ce*Ye,f=-F*Ye,w=-ne*Ye,k=v*Ye;return new wt(dt,f,w,k,-dt*ge-w*Oe,-f*ge-k*Oe)},wt.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,ne=v.x*this.shy+v.y*this.sy+this.ty;return new La(F,ne)},wt.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),ne=this.applyToPoint(new La(v.x+v.w,v.y+v.h));return new Ao(F.x,F.y,ne.x-F.x,ne.y-F.y)},wt.prototype.clone=function(){var v=this.sx,F=this.shy,ne=this.shx,ce=this.sy,ge=this.tx,Oe=this.ty;return new wt(v,F,ne,ce,ge,Oe)},p.Matrix=wt;var si=p.matrixMult=function(v,F){return F.multiply(v)},gr=new wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=gr;var Xn=function(v,F){if(!Zi[v]){var ne=(F instanceof Jc?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);F.id=ne,Zi[v]=ne,Kt[ne]=F,en.publish("addPattern",F)}};p.ShadingPattern=Jc,p.TilingPattern=Pl,p.addShadingPattern=function(v,F){return A("addShadingPattern()"),Xn(v,F),this},p.beginTilingPattern=function(v){A("beginTilingPattern()"),Io(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,F){A("endTilingPattern()"),F.stream=Ve[D].join(`
`),Xn(v,F),en.publish("endTilingPattern",F),_i.pop().restore()};var $n=p.__private__.newObject=function(){var v=jn();return j(v,!0),v},jn=p.__private__.newObjectDeferred=function(){return J++,ae[J]=function(){return ue},J},j=function(v,F){return F=typeof F=="boolean"&&F,ae[v]=ue,F&&re(v+" 0 obj"),v},ee=p.__private__.newAdditionalObject=function(){var v={objId:jn(),content:""};return xe.push(v),v},Y=jn(),X=jn(),Z=p.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var ne=parseFloat(F[0]);F=[ne,ne,ne,"r"]}for(var ce="#",ge=0;ge<3;ge++)ce+=("0"+Math.floor(255*parseFloat(F[ge])).toString(16)).slice(-2);return ce},te=p.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var ne=v.ch1,ce=v.ch2,ge=v.ch3,Oe=v.ch4,Ye=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var dt=new fS(ne);if(dt.ok)ne=dt.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var f=parseInt(ne.substr(1),16);ne=f>>16&255,ce=f>>8&255,ge=255&f}if(ce===void 0||Oe===void 0&&ne===ce&&ce===ge)if(typeof ne=="string")F=ne+" "+Ye[0];else switch(v.precision){case 2:F=B(ne/255)+" "+Ye[0];break;case 3:default:F=b(ne/255)+" "+Ye[0]}else if(Oe===void 0||xn(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return F=["1.","1.","1.",Ye[1]].join(" ");if(typeof ne=="string")F=[ne,ce,ge,Ye[1]].join(" ");else switch(v.precision){case 2:F=[B(ne/255),B(ce/255),B(ge/255),Ye[1]].join(" ");break;default:case 3:F=[b(ne/255),b(ce/255),b(ge/255),Ye[1]].join(" ")}}else if(typeof ne=="string")F=[ne,ce,ge,Oe,Ye[2]].join(" ");else switch(v.precision){case 2:F=[B(ne),B(ce),B(ge),B(Oe),Ye[2]].join(" ");break;case 3:default:F=[b(ne),b(ce),b(ge),b(Oe),Ye[2]].join(" ")}return F},ye=p.__private__.getFilters=function(){return a},Ce=p.__private__.putStream=function(v){var F=(v=v||{}).data||"",ne=v.filters||ye(),ce=v.alreadyAppliedFilters||[],ge=v.addLength1||!1,Oe=F.length,Ye=v.objectId,dt=function(Bt){return Bt};if(l!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");l!==null&&(dt=Mn.encryptor(Ye,0));var f={};ne===!0&&(ne=["FlateEncode"]);var w=v.additionalKeyValues||[],k=(f=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(F,ne):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(f.data.length!==0&&(w.push({key:"Length",value:f.data.length}),ge===!0&&w.push({key:"Length1",value:Oe})),k.length!=0)if(k.split("/").length-1==1)w.push({key:"Filter",value:k});else{w.push({key:"Filter",value:"["+k+"]"});for(var W=0;W<w.length;W+=1)if(w[W].key==="DecodeParms"){for(var pe=[],Ie=0;Ie<f.reverseChain.split("/").length-1;Ie+=1)pe.push("null");pe.push(w[W].value),w[W].value="["+pe.join(" ")+"]"}}re("<<");for(var Qe=0;Qe<w.length;Qe++)re("/"+w[Qe].key+" "+w[Qe].value);re(">>"),f.data.length!==0&&(re("stream"),re(dt(f.data)),re("endstream"))},we=p.__private__.putPage=function(v){var F=v.number,ne=v.data,ce=v.objId,ge=v.contentsObjId;j(ce,!0),re("<</Type /Page"),re("/Parent "+v.rootDictionaryObjId+" 0 R"),re("/Resources "+v.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(N(v.mediaBox.bottomLeftX))+" "+parseFloat(N(v.mediaBox.bottomLeftY))+" "+N(v.mediaBox.topRightX)+" "+N(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&re("/CropBox ["+N(v.cropBox.bottomLeftX)+" "+N(v.cropBox.bottomLeftY)+" "+N(v.cropBox.topRightX)+" "+N(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&re("/BleedBox ["+N(v.bleedBox.bottomLeftX)+" "+N(v.bleedBox.bottomLeftY)+" "+N(v.bleedBox.topRightX)+" "+N(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&re("/TrimBox ["+N(v.trimBox.bottomLeftX)+" "+N(v.trimBox.bottomLeftY)+" "+N(v.trimBox.topRightX)+" "+N(v.trimBox.topRightY)+"]"),v.artBox!==null&&re("/ArtBox ["+N(v.artBox.bottomLeftX)+" "+N(v.artBox.bottomLeftY)+" "+N(v.artBox.topRightX)+" "+N(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&re("/UserUnit "+v.userUnit),en.publish("putPage",{objId:ce,pageContext:Nt[F],pageNumber:F,page:ne}),re("/Contents "+ge+" 0 R"),re(">>"),re("endobj");var Oe=ne.join(`
`);return M===L.ADVANCED&&(Oe+=`
Q`),j(ge,!0),Ce({data:Oe,filters:ye(),objectId:ge}),re("endobj"),ce},Te=p.__private__.putPages=function(){var v,F,ne=[];for(v=1;v<=un;v++)Nt[v].objId=jn(),Nt[v].contentsObjId=jn();for(v=1;v<=un;v++)ne.push(we({number:v,data:Ve[v],objId:Nt[v].objId,contentsObjId:Nt[v].contentsObjId,mediaBox:Nt[v].mediaBox,cropBox:Nt[v].cropBox,bleedBox:Nt[v].bleedBox,trimBox:Nt[v].trimBox,artBox:Nt[v].artBox,userUnit:Nt[v].userUnit,rootDictionaryObjId:Y,resourceDictionaryObjId:X}));j(Y,!0),re("<</Type /Pages");var ce="/Kids [";for(F=0;F<un;F++)ce+=ne[F]+" 0 R ";re(ce+"]"),re("/Count "+un),re(">>"),re("endobj"),en.publish("postPutPages")},Pe=function(v){en.publish("putFont",{font:v,out:re,newObject:$n,putStream:Ce}),v.isAlreadyPutted!==!0&&(v.objectNumber=$n(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Al(v.postScriptName)),re("/Subtype /Type1"),typeof v.encoding=="string"&&re("/Encoding /"+v.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},Ke=function(){for(var v in tn)tn.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&Pe(tn[v])},it=function(v){v.objectNumber=$n();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[N(v.x),N(v.y),N(v.x+v.width),N(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var ne=v.pages[1].join(`
`);Ce({data:ne,additionalKeyValues:F,objectId:v.objectNumber}),re("endobj")},mt=function(){for(var v in Yn)Yn.hasOwnProperty(v)&&it(Yn[v])},et=function(v,F){var ne,ce=[],ge=1/(F-1);for(ne=0;ne<1;ne+=ge)ce.push(ne);if(ce.push(1),v[0].offset!=0){var Oe={offset:0,color:v[0].color};v.unshift(Oe)}if(v[v.length-1].offset!=1){var Ye={offset:1,color:v[v.length-1].color};v.push(Ye)}for(var dt="",f=0,w=0;w<ce.length;w++){for(ne=ce[w];ne>v[f+1].offset;)f++;var k=v[f].offset,W=(ne-k)/(v[f+1].offset-k),pe=v[f].color,Ie=v[f+1].color;dt+=U(Math.round((1-W)*pe[0]+W*Ie[0]).toString(16))+U(Math.round((1-W)*pe[1]+W*Ie[1]).toString(16))+U(Math.round((1-W)*pe[2]+W*Ie[2]).toString(16))}return dt.trim()},lt=function(v,F){F||(F=21);var ne=$n(),ce=et(v.colors,F),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+F+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ce({data:ce,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),re("endobj"),v.objectNumber=$n(),re("<< /ShadingType "+v.type),re("/ColorSpace /DeviceRGB");var Oe="/Coords ["+N(parseFloat(v.coords[0]))+" "+N(parseFloat(v.coords[1]))+" ";v.type===2?Oe+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3])):Oe+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3]))+" "+N(parseFloat(v.coords[4]))+" "+N(parseFloat(v.coords[5])),re(Oe+="]"),v.matrix&&re("/Matrix ["+v.matrix.toString()+"]"),re("/Function "+ne+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Lt=function(v,F){var ne=jn(),ce=$n();F.push({resourcesOid:ne,objectOid:ce}),v.objectNumber=ce;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+v.boundingBox.map(N).join(" ")+"]"}),ge.push({key:"XStep",value:N(v.xStep)}),ge.push({key:"YStep",value:N(v.yStep)}),ge.push({key:"Resources",value:ne+" 0 R"}),v.matrix&&ge.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Ce({data:v.stream,additionalKeyValues:ge,objectId:v.objectNumber}),re("endobj")},nn=function(v){var F;for(F in Kt)Kt.hasOwnProperty(F)&&(Kt[F]instanceof Jc?lt(Kt[F]):Kt[F]instanceof Pl&&Lt(Kt[F],v))},rn=function(v){for(var F in v.objectNumber=$n(),re("<<"),v)switch(F){case"opacity":re("/ca "+B(v[F]));break;case"stroke-opacity":re("/CA "+B(v[F]))}re(">>"),re("endobj")},An=function(){var v;for(v in bn)bn.hasOwnProperty(v)&&rn(bn[v])},yi=function(){for(var v in re("/XObject <<"),Yn)Yn.hasOwnProperty(v)&&Yn[v].objectNumber>=0&&re("/"+v+" "+Yn[v].objectNumber+" 0 R");en.publish("putXobjectDict"),re(">>")},Cs=function(){Mn.oid=$n(),re("<<"),re("/Filter /Standard"),re("/V "+Mn.v),re("/R "+Mn.r),re("/U <"+Mn.toHexString(Mn.U)+">"),re("/O <"+Mn.toHexString(Mn.O)+">"),re("/P "+Mn.P),re(">>"),re("endobj")},es=function(){for(var v in re("/Font <<"),tn)tn.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&re("/"+v+" "+tn[v].objectNumber+" 0 R");re(">>")},Oi=function(){if(Object.keys(Kt).length>0){for(var v in re("/Shading <<"),Kt)Kt.hasOwnProperty(v)&&Kt[v]instanceof Jc&&Kt[v].objectNumber>=0&&re("/"+v+" "+Kt[v].objectNumber+" 0 R");en.publish("putShadingPatternDict"),re(">>")}},ts=function(v){if(Object.keys(Kt).length>0){for(var F in re("/Pattern <<"),Kt)Kt.hasOwnProperty(F)&&Kt[F]instanceof p.TilingPattern&&Kt[F].objectNumber>=0&&Kt[F].objectNumber<v&&re("/"+F+" "+Kt[F].objectNumber+" 0 R");en.publish("putTilingPatternDict"),re(">>")}},zr=function(){if(Object.keys(bn).length>0){var v;for(v in re("/ExtGState <<"),bn)bn.hasOwnProperty(v)&&bn[v].objectNumber>=0&&re("/"+v+" "+bn[v].objectNumber+" 0 R");en.publish("putGStateDict"),re(">>")}},On=function(v){j(v.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),es(),Oi(),ts(v.objectOid),zr(),yi(),re(">>"),re("endobj")},Tc=function(){var v=[];Ke(),An(),mt(),nn(v),en.publish("putResources"),v.forEach(On),On({resourcesOid:X,objectOid:Number.MAX_SAFE_INTEGER}),en.publish("postPutResources")},bc=function(){en.publish("putAdditionalObjects");for(var v=0;v<xe.length;v++){var F=xe[v];j(F.objId,!0),re(F.content),re("endobj")}en.publish("postPutAdditionalObjects")},Uu=function(v){Tn[v.fontName]=Tn[v.fontName]||{},Tn[v.fontName][v.fontStyle]=v.id},Ac=function(v,F,ne,ce,ge){var Oe={id:"F"+(Object.keys(tn).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:ne,encoding:ce,isStandardFont:ge||!1,metadata:{}};return en.publish("addFont",{font:Oe,instance:this}),tn[Oe.id]=Oe,Uu(Oe),Oe.id},ju=function(v){for(var F=0,ne=$e.length;F<ne;F++){var ce=Ac.call(this,v[F][0],v[F][1],v[F][2],$e[F][3],!0);d===!1&&(g[ce]=!0);var ge=v[F][0].split("-");Uu({id:ce,fontName:ge[0],fontStyle:ge[1]||""})}en.publish("addFonts",{fonts:tn,dictionary:Tn})},Mi=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ce){var F=ce.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var ne="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Ot.console)throw new Error(ne);Ot.console.error(ne,ce),Ot.alert&&alert(ne)}},v.foo.bar=v,v.foo},fo=function(v,F){var ne,ce,ge,Oe,Ye,dt,f,w,k;if(ge=(F=F||{}).sourceEncoding||"Unicode",Ye=F.outputEncoding,(F.autoencode||Ye)&&tn[qt].metadata&&tn[qt].metadata[ge]&&tn[qt].metadata[ge].encoding&&(Oe=tn[qt].metadata[ge].encoding,!Ye&&tn[qt].encoding&&(Ye=tn[qt].encoding),!Ye&&Oe.codePages&&(Ye=Oe.codePages[0]),typeof Ye=="string"&&(Ye=Oe[Ye]),Ye)){for(f=!1,dt=[],ne=0,ce=v.length;ne<ce;ne++)(w=Ye[v.charCodeAt(ne)])?dt.push(String.fromCharCode(w)):dt.push(v[ne]),dt[ne].charCodeAt(0)>>8&&(f=!0);v=dt.join("")}for(ne=v.length;f===void 0&&ne!==0;)v.charCodeAt(ne-1)>>8&&(f=!0),ne--;if(!f)return v;for(dt=F.noBOM?[]:[254,255],ne=0,ce=v.length;ne<ce;ne++){if((k=(w=v.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dt.push(k),dt.push(w-(k<<8))}return String.fromCharCode.apply(void 0,dt)},Jn=p.__private__.pdfEscape=p.pdfEscape=function(v,F){return fo(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},wi=p.__private__.beginPage=function(v){Ve[++un]=[],Nt[un]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Ic(un),Re(Ve[D])},Pa=function(v,F){var ne,ce,ge;switch(t=F||t,typeof v=="string"&&(ne=P(v.toLowerCase()),Array.isArray(ne)&&(ce=ne[0],ge=ne[1])),Array.isArray(v)&&(ce=v[0]*pt,ge=v[1]*pt),isNaN(ce)&&(ce=i[0],ge=i[1]),(ce>14400||ge>14400)&&(Cn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ge=Math.min(14400,ge)),i=[ce,ge],t.substr(0,1)){case"l":ge>ce&&(i=[ge,ce]);break;case"p":ce>ge&&(i=[ge,ce])}wi(i),Cc(kc),re(Wr),Dc!==0&&re(Dc+" J"),bo!==0&&re(bo+" j"),en.publish("addPage",{pageNumber:un})},po=function(v){v>0&&v<=un&&(Ve.splice(v,1),Nt.splice(v,1),un--,D>un&&(D=un),this.setPage(D))},Ic=function(v){v>0&&v<=un&&(D=v)},pn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ve.length-1},Na=function(v,F,ne){var ce,ge=void 0;return ne=ne||{},v=v!==void 0?v:tn[qt].fontName,F=F!==void 0?F:tn[qt].fontStyle,ce=v.toLowerCase(),Tn[ce]!==void 0&&Tn[ce][F]!==void 0?ge=Tn[ce][F]:Tn[v]!==void 0&&Tn[v][F]!==void 0?ge=Tn[v][F]:ne.disableWarning===!1&&Cn.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),ge||ne.noFallback||(ge=Tn.times[F])==null&&(ge=Tn.times.normal),ge},ka=p.__private__.putInfo=function(){var v=$n(),F=function(ce){return ce};for(var ne in l!==null&&(F=Mn.encryptor(v,0)),re("<<"),re("/Producer ("+Jn(F("jsPDF "+Dt.version))+")"),Ct)Ct.hasOwnProperty(ne)&&Ct[ne]&&re("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+Jn(F(Ct[ne]))+")");re("/CreationDate ("+Jn(F(me))+")"),re(">>"),re("endobj")},Rs=p.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||Y;switch($n(),re("<<"),re("/Type /Catalog"),re("/Pages "+F+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+ct;ne.substr(ne.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&re("/OpenAction [3 0 R /XYZ null null "+B(ct)+"]")}switch(It||(It="continuous"),It){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}At&&re("/PageMode /"+At),en.publish("putCatalog"),re(">>"),re("endobj")},Sh=p.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(J+1)),re("/Root "+J+" 0 R"),re("/Info "+(J-1)+" 0 R"),l!==null&&re("/Encrypt "+Mn.oid+" 0 R"),re("/ID [ <"+Ee+"> <"+Ee+"> ]"),re(">>")},qu=p.__private__.putHeader=function(){re("%PDF-"+x),re("%")},Ph=p.__private__.putXRef=function(){var v="0000000000";re("xref"),re("0 "+(J+1)),re("0000000000 65535 f ");for(var F=1;F<=J;F++)typeof ae[F]=="function"?re((v+ae[F]()).slice(-10)+" 00000 n "):ae[F]!==void 0?re((v+ae[F]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Ls=p.__private__.buildDocument=function(){at(),Re(le),en.publish("buildDocument"),qu(),Te(),bc(),Tc(),l!==null&&Cs(),ka(),Rs();var v=ue;return Ph(),Sh(),re("startxref"),re(""+v),re("%%EOF"),Re(Ve[D]),le.join(`
`)},mo=p.__private__.getBlob=function(v){return new Blob([_t(v)],{type:"application/pdf"})},go=p.output=p.__private__.output=Mi(function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return Ls();case"save":p.save(F.filename);break;case"arraybuffer":return _t(Ls());case"blob":return mo(Ls());case"bloburi":case"bloburl":if(Ot.URL!==void 0&&typeof Ot.URL.createObjectURL=="function")return Ot.URL&&Ot.URL.createObjectURL(mo(Ls()))||void 0;Cn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",ce=Ls();try{ne=T1(ce)}catch{ne=T1(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+F.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(ge=F.pdfObjectUrl,Oe="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",dt=Ot.open();return dt!==null&&dt.document.write(Ye),dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',w=Ot.open();if(w!==null){w.document.write(f);var k=this;w.document.documentElement.querySelector("#pdfViewer").onload=function(){w.document.title=F.filename,w.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(k.output("bloburl"))}}return w}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var W='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',pe=Ot.open();if(pe!==null&&(pe.document.write(W),pe.document.title=F.filename),pe||typeof safari>"u")return pe;break;case"datauri":case"dataurl":return Ot.document.location.href=this.output("datauristring",F);default:return null}}),Qs=function(v){return Array.isArray(Fi)===!0&&Fi.indexOf(v)>-1};switch(r){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Qs("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);pt=r}var Mn=null;rt(),_e();var zu=function(v){return l!==null?Mn.encryptor(v,0):function(F){return F}},Sc=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[v].objId,pageNumber:v,pageContext:Nt[v]}},Mt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Nt)if(Nt[F].objId===v)break;return Sc(F)},Zs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Nt[D].objId,pageNumber:D,pageContext:Nt[D]}};p.addPage=function(){return Pa.apply(this,arguments),this},p.setPage=function(){return Ic.apply(this,arguments),Re.call(this,Ve[D]),this},p.insertPage=function(v){return this.addPage(),this.movePage(D,v),this},p.movePage=function(v,F){var ne,ce;if(v>F){ne=Ve[v],ce=Nt[v];for(var ge=v;ge>F;ge--)Ve[ge]=Ve[ge-1],Nt[ge]=Nt[ge-1];Ve[F]=ne,Nt[F]=ce,this.setPage(F)}else if(v<F){ne=Ve[v],ce=Nt[v];for(var Oe=v;Oe<F;Oe++)Ve[Oe]=Ve[Oe+1],Nt[Oe]=Nt[Oe+1];Ve[F]=ne,Nt[F]=ce,this.setPage(F)}return this},p.deletePage=function(){return po.apply(this,arguments),this},p.__private__.text=p.text=function(v,F,ne,ce,ge){var Oe,Ye,dt,f,w,k,W,pe,Ie,Qe=(ce=ce||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof ne=="string"||Array.isArray(ne))){var Bt=ne;ne=F,F=v,v=Bt}if(arguments[3]instanceof wt?(A("The transform parameter of text() with a Matrix value"),Ie=ge):(dt=arguments[4],f=arguments[5],xn(W=arguments[3])==="object"&&W!==null||(typeof dt=="string"&&(f=dt,dt=null),typeof W=="string"&&(f=W,W=null),typeof W=="number"&&(dt=W,W=null),ce={flags:W,angle:dt,align:f})),isNaN(F)||isNaN(ne)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Qe;var Xt="",Vt=!1,dn=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:fn,Nn=Qe.internal.scaleFactor;function Bs(Rn){return Rn=Rn.split("	").join(Array(ce.TabLen||9).join(" ")),Jn(Rn,W)}function Hr(Rn){for(var Ln,cr=Rn.concat(),Ir=[],Ba=cr.length;Ba--;)typeof(Ln=cr.shift())=="string"?Ir.push(Ln):Array.isArray(Rn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?Ir.push(Ln[0]):Ir.push([Ln[0],Ln[1],Ln[2]]);return Ir}function ra(Rn,Ln){var cr;if(typeof Rn=="string")cr=Ln(Rn)[0];else if(Array.isArray(Rn)){for(var Ir,Ba,Mh=Rn.concat(),nl=[],Fd=Mh.length;Fd--;)typeof(Ir=Mh.shift())=="string"?nl.push(Ln(Ir)[0]):Array.isArray(Ir)&&typeof Ir[0]=="string"&&(Ba=Ln(Ir[0],Ir[1],Ir[2]),nl.push([Ba[0],Ba[1],Ba[2]]));cr=nl}return cr}var ia=!1,kh=!0;if(typeof v=="string")ia=!0;else if(Array.isArray(v)){var Ch=v.concat();Ye=[];for(var Ku,$r=Ch.length;$r--;)(typeof(Ku=Ch.shift())!="string"||Array.isArray(Ku)&&typeof Ku[0]!="string")&&(kh=!1);ia=kh}if(ia===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Yu=nt/Qe.internal.scaleFactor,Xu=Yu*(dn-1);switch(ce.baseline){case"bottom":ne-=Xu;break;case"top":ne+=Yu-Xu;break;case"hanging":ne+=Yu-2*Xu;break;case"middle":ne+=Yu/2-Xu}if((k=ce.maxWidth||0)>0&&(typeof v=="string"?v=Qe.splitTextToSize(v,k):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Rn,Ln){return Rn.concat(Qe.splitTextToSize(Ln,k))},[]))),Oe={text:v,x:F,y:ne,options:ce,mutex:{pdfEscape:Jn,activeFontKey:qt,fonts:tn,activeFontSize:nt}},en.publish("preProcessText",Oe),v=Oe.text,dt=(ce=Oe.options).angle,!(Ie instanceof wt)&&dt&&typeof dt=="number"){dt*=Math.PI/180,ce.rotationDirection===0&&(dt=-dt),M===L.ADVANCED&&(dt=-dt);var Ju=Math.cos(dt),Rh=Math.sin(dt);Ie=new wt(Ju,Rh,-Rh,Ju,0,0)}else dt&&dt instanceof wt&&(Ie=dt);M!==L.ADVANCED||Ie||(Ie=gr),(w=ce.charSpace||Ra)!==void 0&&(Xt+=N(S(w))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pe=ce.horizontalScale)!==void 0&&(Xt+=N(100*pe)+` Tz
`),ce.lang;var Bi=-1,Tm=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,Lh=Qe.internal.getCurrentPageInfo().pageContext;switch(Tm){case 0:case!1:case"fill":Bi=0;break;case 1:case!0:case"stroke":Bi=1;break;case 2:case"fillThenStroke":Bi=2;break;case 3:case"invisible":Bi=3;break;case 4:case"fillAndAddForClipping":Bi=4;break;case 5:case"strokeAndAddPathForClipping":Bi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bi=6;break;case 7:case"addToPathForClipping":Bi=7}var Cd=Lh.usedRenderingMode!==void 0?Lh.usedRenderingMode:-1;Bi!==-1?Xt+=Bi+` Tr
`:Cd!==-1&&(Xt+=`0 Tr
`),Bi!==-1&&(Lh.usedRenderingMode=Bi),f=ce.align||"left";var _s,Qu=nt*dn,Rd=Qe.internal.pageSize.getWidth(),Ld=tn[qt];w=ce.charSpace||Ra,k=ce.maxWidth||0,W=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var No=[],Fc=function(Rn){return Qe.getStringUnitWidth(Rn,{font:Ld,charSpace:w,fontSize:nt,doKerning:!1})*nt/Nn};if(Object.prototype.toString.call(v)==="[object Array]"){var Vi;Ye=Hr(v),f!=="left"&&(_s=Ye.map(Fc));var xi,ko=0;if(f==="right"){F-=_s[0],v=[],$r=Ye.length;for(var Fa=0;Fa<$r;Fa++)Fa===0?(xi=is(F),Vi=Ar(ne)):(xi=S(ko-_s[Fa]),Vi=-Qu),v.push([Ye[Fa],xi,Vi]),ko=_s[Fa]}else if(f==="center"){F-=_s[0]/2,v=[],$r=Ye.length;for(var Oa=0;Oa<$r;Oa++)Oa===0?(xi=is(F),Vi=Ar(ne)):(xi=S((ko-_s[Oa])/2),Vi=-Qu),v.push([Ye[Oa],xi,Vi]),ko=_s[Oa]}else if(f==="left"){v=[],$r=Ye.length;for(var Zu=0;Zu<$r;Zu++)v.push(Ye[Zu])}else if(f==="justify"&&Ld.encoding==="Identity-H"){v=[],$r=Ye.length,k=k!==0?k:Rd;for(var Ma=0,or=0;or<$r;or++)if(Vi=or===0?Ar(ne):-Qu,xi=or===0?is(F):Ma,or<$r-1){var Dh=S((k-_s[or])/(Ye[or].split(" ").length-1)),Ei=Ye[or].split(" ");v.push([Ei[0]+" ",xi,Vi]),Ma=0;for(var ys=1;ys<Ei.length;ys++){var el=(Fc(Ei[ys-1]+" "+Ei[ys])-Fc(Ei[ys]))*Nn+Dh;ys==Ei.length-1?v.push([Ei[ys],el,0]):v.push([Ei[ys]+" ",el,0]),Ma-=el}}else v.push([Ye[or],xi,Vi]);v.push(["",Ma,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],$r=Ye.length,k=k!==0?k:Rd,or=0;or<$r;or++)Vi=or===0?Ar(ne):-Qu,xi=or===0?is(F):0,or<$r-1?No.push(N(S((k-_s[or])/(Ye[or].split(" ").length-1)))):No.push(0),v.push([Ye[or],xi,Vi])}}var Dd=typeof ce.R2L=="boolean"?ce.R2L:Tt;Dd===!0&&(v=ra(v,function(Rn,Ln,cr){return[Rn.split("").reverse().join(""),Ln,cr]})),Oe={text:v,x:F,y:ne,options:ce,mutex:{pdfEscape:Jn,activeFontKey:qt,fonts:tn,activeFontSize:nt}},en.publish("postProcessText",Oe),v=Oe.text,Vt=Oe.mutex.isHex||!1;var Fh=tn[qt].encoding;Fh!=="WinAnsiEncoding"&&Fh!=="StandardEncoding"||(v=ra(v,function(Rn,Ln,cr){return[Bs(Rn),Ln,cr]})),Ye=Hr(v),v=[];for(var Oc,Mc,Co,Bc=0,tl=1,Vc=Array.isArray(Ye[0])?tl:Bc,Ro="",Oh=function(Rn,Ln,cr){var Ir="";return cr instanceof wt?(cr=typeof ce.angle=="number"?si(cr,new wt(1,0,0,1,Rn,Ln)):si(new wt(1,0,0,1,Rn,Ln),cr),M===L.ADVANCED&&(cr=si(new wt(1,0,0,-1,0,0),cr)),Ir=cr.join(" ")+` Tm
`):Ir=N(Rn)+" "+N(Ln)+` Td
`,Ir},ws=0;ws<Ye.length;ws++){switch(Ro="",Vc){case tl:Co=(Vt?"<":"(")+Ye[ws][0]+(Vt?">":")"),Oc=parseFloat(Ye[ws][1]),Mc=parseFloat(Ye[ws][2]);break;case Bc:Co=(Vt?"<":"(")+Ye[ws]+(Vt?">":")"),Oc=is(F),Mc=Ar(ne)}No!==void 0&&No[ws]!==void 0&&(Ro=No[ws]+` Tw
`),ws===0?v.push(Ro+Oh(Oc,Mc,Ie)+Co):Vc===Bc?v.push(Ro+Co):Vc===tl&&v.push(Ro+Oh(Oc,Mc,Ie)+Co)}v=Vc===Bc?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var xs=`BT
/`;return xs+=qt+" "+nt+` Tf
`,xs+=N(nt*dn)+` TL
`,xs+=Os+`
`,xs+=Xt,xs+=v,re(xs+="ET"),g[qt]=!0,Qe};var Nh=p.__private__.clip=p.clip=function(v){return re(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Nh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return re("n"),this};var vs=p.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return vs(v)&&(u=v),this};var Wu=p.__private__.getStyle=p.getStyle=function(v){var F=u;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},ns=p.close=function(){return re("h"),this};p.stroke=function(){return re("S"),this},p.fill=function(v){return vo("f",v),this},p.fillEvenOdd=function(v){return vo("f*",v),this},p.fillStroke=function(v){return vo("B",v),this},p.fillStrokeEvenOdd=function(v){return vo("B*",v),this};var vo=function(v,F){xn(F)==="object"?yo(F,v):re(v)},Pc=function(v){v===null||M===L.ADVANCED&&v===void 0||(v=Wu(v),re(v))};function _o(v,F,ne,ce,ge){var Oe=new Pl(F||this.boundingBox,ne||this.xStep,ce||this.yStep,this.gState,ge||this.matrix);Oe.stream=this.stream;var Ye=v+"$$"+this.cloneIndex+++"$$";return Xn(Ye,Oe),Oe}var yo=function(v,F){var ne=Zi[v.key],ce=Kt[ne];if(ce instanceof Jc)re("q"),re(Hu(F)),ce.gState&&p.setGState(ce.gState),re(v.matrix.toString()+" cm"),re("/"+ne+" sh"),re("Q");else if(ce instanceof Pl){var ge=new wt(1,0,0,-1,0,ai());v.matrix&&(ge=ge.multiply(v.matrix||gr),ne=_o.call(ce,v.key,v.boundingBox,v.xStep,v.yStep,ge).id),re("q"),re("/Pattern cs"),re("/"+ne+" scn"),ce.gState&&p.setGState(ce.gState),re(F),re("Q")}},Hu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ds=p.moveTo=function(v,F){return re(N(S(v))+" "+N(ie(F))+" m"),this},rs=p.lineTo=function(v,F){return re(N(S(v))+" "+N(ie(F))+" l"),this},Fs=p.curveTo=function(v,F,ne,ce,ge,Oe){return re([N(S(v)),N(ie(F)),N(S(ne)),N(ie(ce)),N(S(ge)),N(ie(Oe)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,F,ne,ce,ge){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||!vs(ge))throw new Error("Invalid arguments passed to jsPDF.line");return M===L.COMPAT?this.lines([[ne-v,ce-F]],v,F,[1,1],ge||"S"):this.lines([[ne-v,ce-F]],v,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,F,ne,ce,ge,Oe){var Ye,dt,f,w,k,W,pe,Ie,Qe,Bt,Xt,Vt;if(typeof v=="number"&&(Vt=ne,ne=F,F=v,v=Vt),ce=ce||[1,1],Oe=Oe||!1,isNaN(F)||isNaN(ne)||!Array.isArray(v)||!Array.isArray(ce)||!vs(ge)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ds(F,ne),Ye=ce[0],dt=ce[1],w=v.length,Bt=F,Xt=ne,f=0;f<w;f++)(k=v[f]).length===2?(Bt=k[0]*Ye+Bt,Xt=k[1]*dt+Xt,rs(Bt,Xt)):(W=k[0]*Ye+Bt,pe=k[1]*dt+Xt,Ie=k[2]*Ye+Bt,Qe=k[3]*dt+Xt,Bt=k[4]*Ye+Bt,Xt=k[5]*dt+Xt,Fs(W,pe,Ie,Qe,Bt,Xt));return Oe&&ns(),Pc(ge),this},p.path=function(v){for(var F=0;F<v.length;F++){var ne=v[F],ce=ne.c;switch(ne.op){case"m":Ds(ce[0],ce[1]);break;case"l":rs(ce[0],ce[1]);break;case"c":Fs.apply(this,ce);break;case"h":ns()}}return this},p.__private__.rect=p.rect=function(v,F,ne,ce,ge){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||!vs(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return M===L.COMPAT&&(ce=-ce),re([N(S(v)),N(ie(F)),N(S(ne)),N(S(ce)),"re"].join(" ")),Pc(ge),this},p.__private__.triangle=p.triangle=function(v,F,ne,ce,ge,Oe,Ye){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||isNaN(ge)||isNaN(Oe)||!vs(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-v,ce-F],[ge-ne,Oe-ce],[v-ge,F-Oe]],v,F,[1,1],Ye,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,F,ne,ce,ge,Oe,Ye){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||isNaN(ge)||isNaN(Oe)||!vs(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dt=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*ne),Oe=Math.min(Oe,.5*ce),this.lines([[ne-2*ge,0],[ge*dt,0,ge,Oe-Oe*dt,ge,Oe],[0,ce-2*Oe],[0,Oe*dt,-ge*dt,Oe,-ge,Oe],[2*ge-ne,0],[-ge*dt,0,-ge,-Oe*dt,-ge,-Oe],[0,2*Oe-ce],[0,-Oe*dt,ge*dt,-Oe,ge,-Oe]],v+ge,F,[1,1],Ye,!0),this},p.__private__.ellipse=p.ellipse=function(v,F,ne,ce,ge){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||!vs(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*ne,Ye=4/3*(Math.SQRT2-1)*ce;return Ds(v+ne,F),Fs(v+ne,F-Ye,v+Oe,F-ce,v,F-ce),Fs(v-Oe,F-ce,v-ne,F-Ye,v-ne,F),Fs(v-ne,F+Ye,v-Oe,F+ce,v,F+ce),Fs(v+Oe,F+ce,v+ne,F+Ye,v+ne,F),Pc(ge),this},p.__private__.circle=p.circle=function(v,F,ne,ce){if(isNaN(v)||isNaN(F)||isNaN(ne)||!vs(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,ne,ne,ce)},p.setFont=function(v,F,ne){return ne&&(F=oe(F,ne)),qt=Na(v,F,{disableWarning:!1}),this};var Nc=p.__private__.getFont=p.getFont=function(){return tn[Na.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,F,ne={};for(v in Tn)if(Tn.hasOwnProperty(v))for(F in ne[v]=[],Tn[v])Tn[v].hasOwnProperty(F)&&ne[v].push(F);return ne},p.addFont=function(v,F,ne,ce,ge){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(ne=oe(ne,ce)),ge=ge||"Identity-H",Ac.call(this,v,F,ne,ge)};var fn,kc=n.lineWidth||.200025,wo=p.__private__.getLineWidth=p.getLineWidth=function(){return kc},Cc=p.__private__.setLineWidth=p.setLineWidth=function(v){return kc=v,re(N(S(v))+" w"),this};p.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(ne){return N(S(ne))}).join(" "),F=N(S(F)),re("["+v+"] "+F+" d"),this};var Rc=p.__private__.getLineHeight=p.getLineHeight=function(){return nt*fn};p.__private__.getLineHeight=p.getLineHeight=function(){return nt*fn};var Lc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(fn=v),this},Ca=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return fn};Lc(n.lineHeight);var is=p.__private__.getHorizontalCoordinate=function(v){return S(v)},Ar=p.__private__.getVerticalCoordinate=function(v){return M===L.ADVANCED?v:Nt[D].mediaBox.topRightY-Nt[D].mediaBox.bottomLeftY-S(v)},$u=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return N(is(v))},ea=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return N(Ar(v))},Wr=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Z(Wr)},p.__private__.setStrokeColor=p.setDrawColor=function(v,F,ne,ce){return Wr=te({ch1:v,ch2:F,ch3:ne,ch4:ce,pdfColorType:"draw",precision:2}),re(Wr),this};var xo=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Z(xo)},p.__private__.setFillColor=p.setFillColor=function(v,F,ne,ce){return xo=te({ch1:v,ch2:F,ch3:ne,ch4:ce,pdfColorType:"fill",precision:2}),re(xo),this};var Os=n.textColor||"0 g",Eo=p.__private__.getTextColor=p.getTextColor=function(){return Z(Os)};p.__private__.setTextColor=p.setTextColor=function(v,F,ne,ce){return Os=te({ch1:v,ch2:F,ch3:ne,ch4:ce,pdfColorType:"text",precision:3}),this};var Ra=n.charSpace,To=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ra||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ra=v,this};var Dc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dc=F,re(F+" J"),this};var bo=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bo=F,re(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(N(S(v))+" M"),this},p.GState=Tp,p.setGState=function(v){(v=typeof v=="string"?bn[br[v]]:ta(null,v)).equals(vi)||(re("/"+v.id+" gs"),vi=v)};var ta=function(v,F){if(!v||!br[v]){var ne=!1;for(var ce in bn)if(bn.hasOwnProperty(ce)&&bn[ce].equals(F)){ne=!0;break}if(ne)F=bn[ce];else{var ge="GS"+(Object.keys(bn).length+1).toString(10);bn[ge]=F,F.id=ge}return v&&(br[v]=F.id),en.publish("addGState",F),F}};p.addGState=function(v,F){return ta(v,F),this},p.saveGraphicsState=function(){return re("q"),Di.push({key:qt,size:nt,color:Os}),this},p.restoreGraphicsState=function(){re("Q");var v=Di.pop();return qt=v.key,nt=v.size,Os=v.color,vi=null,this},p.setCurrentTransformationMatrix=function(v){return re(v.toString()+" cm"),this},p.comment=function(v){return re("#"+v),this};var La=function(v,F){var ne=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(Oe){isNaN(Oe)||(ne=parseFloat(Oe))}});var ce=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Oe){isNaN(Oe)||(ce=parseFloat(Oe))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Oe){ge=Oe.toString()}}),this},Ao=function(v,F,ne,ce){La.call(this,v,F),this.type="rect";var ge=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Ye){isNaN(Ye)||(ge=parseFloat(Ye))}});var Oe=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Ye){isNaN(Ye)||(Oe=parseFloat(Ye))}}),this},Da=function(){this.page=un,this.currentPage=D,this.pages=Ve.slice(0),this.pagesContext=Nt.slice(0),this.x=Fn,this.y=Gt,this.matrix=qr,this.width=na(D),this.height=ai(D),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Da.prototype.restore=function(){un=this.page,D=this.currentPage,Nt=this.pagesContext,Ve=this.pages,Fn=this.x,Gt=this.y,qr=this.matrix,So(D,this.width),Po(D,this.height),Ze=this.outputDestination};var Io=function(v,F,ne,ce,ge){_i.push(new Da),un=D=0,Ve=[],Fn=v,Gt=F,qr=ge,wi([ne,ce])},Gu=function(v){if(Cr[v])_i.pop().restore();else{var F=new Da,ne="Xo"+(Object.keys(Yn).length+1).toString(10);F.id=ne,Cr[v]=ne,Yn[ne]=F,en.publish("addFormObject",F),_i.pop().restore()}};for(var Ms in p.beginFormObject=function(v,F,ne,ce,ge){return Io(v,F,ne,ce,ge),this},p.endFormObject=function(v){return Gu(v),this},p.doFormObject=function(v,F){var ne=Yn[Cr[v]];return re("q"),re(F.toString()+" cm"),re("/"+ne.id+" Do"),re("Q"),this},p.getFormObject=function(v){var F=Yn[Cr[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Wc(mo(Ls()),v),typeof Wc.unload=="function"&&Ot.setTimeout&&setTimeout(Wc.unload,911),this):new Promise(function(ne,ce){try{var ge=Wc(mo(Ls()),v);typeof Wc.unload=="function"&&Ot.setTimeout&&setTimeout(Wc.unload,911),ne(ge)}catch(Oe){ce(Oe.message)}})},Dt.API)Dt.API.hasOwnProperty(Ms)&&(Ms==="events"&&Dt.API.events.length?function(v,F){var ne,ce,ge;for(ge=F.length-1;ge!==-1;ge--)ne=F[ge][0],ce=F[ge][1],v.subscribe.apply(v,[ne].concat(typeof ce=="function"?[ce]:ce))}(en,Dt.API.events):p[Ms]=Dt.API[Ms]);var na=p.getPageWidth=function(v){return(Nt[v=v||D].mediaBox.topRightX-Nt[v].mediaBox.bottomLeftX)/pt},So=p.setPageWidth=function(v,F){Nt[v].mediaBox.topRightX=F*pt+Nt[v].mediaBox.bottomLeftX},ai=p.getPageHeight=function(v){return(Nt[v=v||D].mediaBox.topRightY-Nt[v].mediaBox.bottomLeftY)/pt},Po=p.setPageHeight=function(v,F){Nt[v].mediaBox.topRightY=F*pt+Nt[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:Jn,getStyle:Wu,getFont:Nc,getFontSize:ut,getCharSpace:To,getTextColor:Eo,getLineHeight:Rc,getLineHeightFactor:Ca,getLineWidth:wo,write:We,getHorizontalCoordinate:is,getVerticalCoordinate:Ar,getCoordinateString:$u,getVerticalCoordinateString:ea,collections:{},newObject:$n,newAdditionalObject:ee,newObjectDeferred:jn,newObjectDeferredBegin:j,getFilters:ye,putStream:Ce,events:en,scaleFactor:pt,pageSize:{getWidth:function(){return na(D)},setWidth:function(v){So(D,v)},getHeight:function(){return ai(D)},setHeight:function(v){Po(D,v)}},encryptionOptions:l,encryption:Mn,getEncryptor:zu,output:go,getNumberOfPages:pn,pages:Ve,out:re,f2:B,f3:b,getPageInfo:Sc,getPageInfoByObjId:Mt,getCurrentPageInfo:Zs,getPDFVersion:_,Point:La,Rectangle:Ao,Matrix:wt,hasHotfix:Qs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return na(D)},set:function(v){So(D,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ai(D)},set:function(v){Po(D,v)},enumerable:!0,configurable:!0}),ju.call(p,$e),qt="F1",Pa(i,t),en.publish("initialized"),p}bl.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},bl.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},bl.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},bl.prototype.processOwnerPassword=function(n,e){return A1(b1(e).substr(0,5),n)},bl.prototype.encryptor=function(n,e){var t=b1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return A1(t,r)}},Tp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||xn(n)!==xn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Dt.API={events:[]},Dt.version="2.5.2";var Zn=Dt.API,Kv=1,Vu=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},gl=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ut=function(n){return n.toFixed(2)},$o=function(n){return n.toFixed(5)};Zn.__acroform__={};var Qi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},I5=function(n){return n*Kv},ca=function(n){var e=new gS,t=Et.internal.getHeight(n)||0,r=Et.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Ut(r)),Number(Ut(t))],e},oW=Zn.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},cW=Zn.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},uW=Zn.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},ur=Zn.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return uW(n,e-1)},lr=Zn.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return oW(n,e-1)},hr=Zn.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cW(n,e-1)},lW=Zn.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Ut(c.lowerLeft_X)),Number(Ut(c.lowerLeft_Y)),Number(Ut(c.upperRight_X)),Number(Ut(c.upperRight_Y))]},hW=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=I1(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Ut(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ca(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},I1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var s=t,a=Et.internal.getHeight(n)||0;a=a<0?-a:a;var o=Et.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(b,S,R){if(b+1<i.length){var ie=S+" "+i[b+1][0];return _0(ie,n,R).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,l,d=_0("3",n,s).height,g=n.multiline?a-s:(a-d)/2,p=g+=2,x=0,_=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+_0(e,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var P="",L=0,M=0;M<i.length;M++)if(i.hasOwnProperty(M)){var K=!1;if(i[M].length!==1&&E!==i[M].length-1){if((d+2)*(L+2)+2>a)continue e;P+=i[M][E],K=!0,_=M,M--}else{P=(P+=i[M][E]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var se=parseInt(M),oe=c(se,P,s),N=M>=i.length-1;if(oe&&!N){P+=" ",E=0;continue}if(oe||N){if(N)_=se;else if(n.multiline&&(d+2)*(L+2)+2>a)continue e}else{if(!n.multiline||(d+2)*(L+2)+2>a)continue e;_=se}}for(var A="",C=x;C<=_;C++){var B=i[C];if(n.multiline){if(C===_){A+=B[E]+" ",E=(E+1)%B.length;continue}if(C===x){A+=B[B.length-1]+" ";continue}}A+=B[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,l=_0(A,n,s).width,n.textAlign){case"right":u=o-l-2;break;case"center":u=(o-l)/2;break;case"left":default:u=2}e+=Ut(u)+" "+Ut(p)+` Td
`,e+="("+Vu(A)+`) Tj
`,e+=-Ut(u)+` 0 Td
`,p=-(s+2),l=0,x=K?_:_+1,L++,P=""}break}return r.text=e,r.fontSize=s,r},_0=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},fW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},dW=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},pW=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),xn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},mW=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Xs.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(fW)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Kv=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new vS,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&dW(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=lW(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Et.createDefaultAppearanceStream(o),xn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=hW(o);c.push({key:"AP",value:"<</N "+l+">>"}),i.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var d="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(d+="/"+g+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var x=p[a];typeof x=="function"&&(x=x.call(i,o)),d+="/"+a+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=p)=="function"&&(x=x.call(i,o)),d+="/"+a+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&pW(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},mS=Zn.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),xn(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+Vu(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ig=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Vu(r(n))+")"},ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ga.prototype.toString=function(){return this.objId+" 0 R"},ga.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ga.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:mS(i,this.objId,this.scope)}):i instanceof ga?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var gS=function(){ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Qi(gS,ga);var vS=function(){ga.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Vu(t(n))+")"}},set:function(t){n=t}})};Qi(vS,ga);var Xs=function n(){ga.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ur(e,3)},set:function(P){P?this.F=lr(e,3):this.F=hr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(P){r=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(P){r[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(P){r[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(P){r[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(P){r[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof bp)return;s="FieldObject"+n.FieldNum++}var P=function(L){return L};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Vu(P(s))+")"},set:function(P){s=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(P){s=P}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(P){o=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Kv:u},set:function(P){u=P}});var l="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return l},set:function(P){l=P}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof bp||this instanceof au))return Ig(d,this.objId,this.scope)},set:function(P){P=P.toString(),d=P}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Or?g:Ig(g,this.objId,this.scope)},set:function(P){P=P.toString(),g=this instanceof Or?P:P.substr(0,1)==="("?gl(P.substr(1,P.length-2)):gl(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or?gl(g.substr(1,g.length-1)):g},set:function(P){P=P.toString(),g=this instanceof Or?"/"+P:P}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Or?p:Ig(p,this.objId,this.scope)},set:function(P){P=P.toString(),p=this instanceof Or?P:P.substr(0,1)==="("?gl(P.substr(1,P.length-2)):gl(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Or?gl(p.substr(1,p.length-1)):p},set:function(P){P=P.toString(),p=this instanceof Or?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(P){P=!!P,_=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(P){x=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,1)},set:function(P){P?this.Ff=lr(this.Ff,1):this.Ff=hr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,2)},set:function(P){P?this.Ff=lr(this.Ff,2):this.Ff=hr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,3)},set:function(P){P?this.Ff=lr(this.Ff,3):this.Ff=hr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');E=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(E){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Qi(Xs,ga);var jl=function(){Xs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return mS(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,o){o||(o=1);for(var c,u=[];c=a.exec(s);)u.push(c[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,18)},set:function(t){t?this.Ff=lr(this.Ff,18):this.Ff=hr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=lr(this.Ff,19):this.Ff=hr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,20)},set:function(t){t?(this.Ff=lr(this.Ff,20),e.sort()):this.Ff=hr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,22)},set:function(t){t?this.Ff=lr(this.Ff,22):this.Ff=hr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,23)},set:function(t){t?this.Ff=lr(this.Ff,23):this.Ff=hr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,27)},set:function(t){t?this.Ff=lr(this.Ff,27):this.Ff=hr(this.Ff,27)}}),this.hasAppearanceStream=!1};Qi(jl,Xs);var ql=function(){jl.call(this),this.fontName="helvetica",this.combo=!1};Qi(ql,jl);var zl=function(){ql.call(this),this.combo=!0};Qi(zl,ql);var L0=function(){zl.call(this),this.edit=!0};Qi(L0,zl);var Or=function(){Xs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,15)},set:function(t){t?this.Ff=lr(this.Ff,15):this.Ff=hr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,16)},set:function(t){t?this.Ff=lr(this.Ff,16):this.Ff=hr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,17)},set:function(t){t?this.Ff=lr(this.Ff,17):this.Ff=hr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,26)},set:function(t){t?this.Ff=lr(this.Ff,26):this.Ff=hr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+Vu(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){xn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Qi(Or,Xs);var D0=function(){Or.call(this),this.pushButton=!0};Qi(D0,Or);var Wl=function(){Or.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Qi(Wl,Or);var bp=function(){var n,e;Xs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+Vu(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){xn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qi(bp,Xs),Wl.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Wl.prototype.createOption=function(n){var e=new bp;return e.Parent=this,e.optionName=n,this.Kids.push(e),gW.call(this.scope,e),e};var F0=function(){Or.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Et.CheckBox.createAppearanceStream()};Qi(F0,Or);var au=function(){Xs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,13)},set:function(e){e?this.Ff=lr(this.Ff,13):this.Ff=hr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,21)},set:function(e){e?this.Ff=lr(this.Ff,21):this.Ff=hr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,23)},set:function(e){e?this.Ff=lr(this.Ff,23):this.Ff=hr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,24)},set:function(e){e?this.Ff=lr(this.Ff,24):this.Ff=hr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,25)},set:function(e){e?this.Ff=lr(this.Ff,25):this.Ff=hr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,26)},set:function(e){e?this.Ff=lr(this.Ff,26):this.Ff=hr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qi(au,Xs);var O0=function(){au.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ur(this.Ff,14)},set:function(n){n?this.Ff=lr(this.Ff,14):this.Ff=hr(this.Ff,14)}}),this.password=!0};Qi(O0,au);var Et={CheckBox:{createAppearanceStream:function(){return{N:{On:Et.CheckBox.YesNormal},D:{On:Et.CheckBox.YesPushDown,Off:Et.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ca(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=I1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Ut(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ca(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Et.internal.getHeight(n),a=Et.internal.getWidth(n),o=I1(n,n.caption);return i.push("1 g"),i.push("0 0 "+Ut(a)+" "+Ut(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ut(a-1)+" "+Ut(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Ut(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=ca(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Et.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Et.RadioButton.Circle.YesNormal,e.D[n]=Et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ca(n);e.scope=n.scope;var t=[],r=Et.internal.getWidth(n)<=Et.internal.getHeight(n)?Et.internal.getWidth(n)/4:Et.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Et.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(n)/2)+" "+$o(Et.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ca(n);e.scope=n.scope;var t=[],r=Et.internal.getWidth(n)<=Et.internal.getHeight(n)?Et.internal.getWidth(n)/4:Et.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Et.internal.Bezier_C).toFixed(5)),a=Number((r*Et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(n)/2)+" "+$o(Et.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(n)/2)+" "+$o(Et.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ca(n);e.scope=n.scope;var t=[],r=Et.internal.getWidth(n)<=Et.internal.getHeight(n)?Et.internal.getWidth(n)/4:Et.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(n)/2)+" "+$o(Et.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Et.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Et.RadioButton.Cross.YesNormal,e.D[n]=Et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ca(n);e.scope=n.scope;var t=[],r=Et.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Ut(Et.internal.getWidth(n)-2)+" "+Ut(Et.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Ut(r.x1.x)+" "+Ut(r.x1.y)+" m"),t.push(Ut(r.x2.x)+" "+Ut(r.x2.y)+" l"),t.push(Ut(r.x4.x)+" "+Ut(r.x4.y)+" m"),t.push(Ut(r.x3.x)+" "+Ut(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ca(n);e.scope=n.scope;var t=Et.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ut(Et.internal.getWidth(n)-2)+" "+Ut(Et.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Ut(t.x1.x)+" "+Ut(t.x1.y)+" m"),r.push(Ut(t.x2.x)+" "+Ut(t.x2.y)+" l"),r.push(Ut(t.x4.x)+" "+Ut(t.x4.y)+" m"),r.push(Ut(t.x3.x)+" "+Ut(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ca(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Et.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Et.internal.getWidth(n),t=Et.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Et.internal.getWidth=function(n){var e=0;return xn(n)==="object"&&(e=I5(n.Rect[2])),e},Et.internal.getHeight=function(n){var e=0;return xn(n)==="object"&&(e=I5(n.Rect[3])),e};var gW=Zn.addField=function(n){if(mW(this,n),!(n instanceof Xs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Zn.AcroFormChoiceField=jl,Zn.AcroFormListBox=ql,Zn.AcroFormComboBox=zl,Zn.AcroFormEditBox=L0,Zn.AcroFormButton=Or,Zn.AcroFormPushButton=D0,Zn.AcroFormRadioButton=Wl,Zn.AcroFormCheckBox=F0,Zn.AcroFormTextField=au,Zn.AcroFormPasswordField=O0,Zn.AcroFormAppearance=Et,Zn.AcroForm={ChoiceField:jl,ListBox:ql,ComboBox:zl,EditBox:L0,Button:Or,PushButton:D0,RadioButton:Wl,CheckBox:F0,TextField:au,PasswordField:O0,Appearance:Et},Dt.AcroForm={ChoiceField:jl,ListBox:ql,ComboBox:zl,EditBox:L0,Button:Or,PushButton:D0,RadioButton:Wl,CheckBox:F0,TextField:au,PasswordField:O0,Appearance:Et};Dt.AcroForm;function _S(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(b,S){var R,ie,me,Ee,Ne,_e=e;if((S=S||e)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(oe(b))for(Ne in t)for(me=t[Ne],R=0;R<me.length;R+=1){for(Ee=!0,ie=0;ie<me[R].length;ie+=1)if(me[R][ie]!==void 0&&me[R][ie]!==b[ie]){Ee=!1;break}if(Ee===!0){_e=Ne;break}}else for(Ne in t)for(me=t[Ne],R=0;R<me.length;R+=1){for(Ee=!0,ie=0;ie<me[R].length;ie+=1)if(me[R][ie]!==void 0&&me[R][ie]!==b.charCodeAt(ie)){Ee=!1;break}if(Ee===!0){_e=Ne;break}}return _e===e&&S!==e&&(_e=S),_e},i=function b(S){for(var R=this.internal.write,ie=this.internal.putStream,me=(0,this.internal.getFilters)();me.indexOf("FlateEncode")!==-1;)me.splice(me.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Ee=[];if(Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Image"}),Ee.push({key:"Width",value:S.width}),Ee.push({key:"Height",value:S.height}),S.colorSpace===E.INDEXED?Ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Ee.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===E.DEVICE_CMYK&&Ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ee.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Ee.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var Ne="",_e=0,ke=S.transparency.length;_e<ke;_e++)Ne+=S.transparency[_e]+" "+S.transparency[_e]+" ";Ee.push({key:"Mask",value:"["+Ne+"]"})}S.sMask!==void 0&&Ee.push({key:"SMask",value:S.objectId+1+" 0 R"});var Fe=S.filter!==void 0?["/"+S.filter]:void 0;if(ie({data:S.data,additionalKeyValues:Ee,alreadyAppliedFilters:Fe,objectId:S.objectId}),R("endobj"),"sMask"in S&&S.sMask!==void 0){var rt="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,T={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:rt,data:S.sMask};"filter"in S&&(T.filter=S.filter),b.call(this,T)}if(S.colorSpace===E.INDEXED){var D=this.internal.newObject();ie({data:A(new Uint8Array(S.palette)),objectId:D}),R("endobj")}},s=function(){var b=this.internal.collections.addImage_images;for(var S in b)i.call(this,b[S])},a=function(){var b,S=this.internal.collections.addImage_images,R=this.internal.write;for(var ie in S)R("/I"+(b=S[ie]).index,b.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var b=this.internal.collections.addImage_images;return o.call(this),b},u=function(){return Object.keys(this.internal.collections.addImage_images).length},l=function(b){return typeof n["process"+b.toUpperCase()]=="function"},d=function(b){return xn(b)==="object"&&b.nodeType===1},g=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var R=""+b.getAttribute("src");if(R.indexOf("data:image/")===0)return Af(unescape(R).split("base64,").pop());var ie=n.loadFile(R,!0);if(ie!==void 0)return ie}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var me;switch(S){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;case"JPEG":case"JPG":default:me="image/jpeg"}return Af(b.toDataURL(me,1).split("base64,").pop())}},p=function(b){var S=this.internal.collections.addImage_images;if(S){for(var R in S)if(b===S[R].alias)return S[R]}},x=function(b,S,R){return b||S||(b=-96,S=-96),b<0&&(b=-1*R.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*R.height*72/S/this.internal.scaleFactor),b===0&&(b=S*R.width/R.height),S===0&&(S=b*R.height/R.width),[b,S]},_=function(b,S,R,ie,me,Ee){var Ne=x.call(this,R,ie,me),_e=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Fe=c.call(this);if(R=Ne[0],ie=Ne[1],Fe[me.index]=me,Ee){Ee*=Math.PI/180;var rt=Math.cos(Ee),T=Math.sin(Ee),D=function(U){return U.toFixed(4)},V=[D(rt),D(T),D(-1*T),D(rt),0,0,"cm"]}this.internal.write("q"),Ee?(this.internal.write([1,"0","0",1,_e(b),ke(S+ie),"cm"].join(" ")),this.internal.write(V.join(" ")),this.internal.write([_e(R),"0","0",_e(ie),"0","0","cm"].join(" "))):this.internal.write([_e(R),"0","0",_e(ie),_e(b),ke(S+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},E=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=n.__addimage__.sHashCode=function(b){var S,R,ie=0;if(typeof b=="string")for(R=b.length,S=0;S<R;S++)ie=(ie<<5)-ie+b.charCodeAt(S),ie|=0;else if(oe(b))for(R=b.byteLength/2,S=0;S<R;S++)ie=(ie<<5)-ie+b[S],ie|=0;return ie},M=n.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},K=n.__addimage__.extractImageFromDataUrl=function(b){var S=(b=b||"").split("base64,"),R=null;if(S.length===2){var ie=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(ie)&&(R={mimeType:ie[1],charset:ie[2],data:S[1]})}return R},se=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(b){return se()&&b instanceof ArrayBuffer};var oe=n.__addimage__.isArrayBufferView=function(b){return se()&&typeof Uint32Array<"u"&&(b instanceof Int8Array||b instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)},N=n.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,R=new Uint8Array(S),ie=0;ie<S;ie++)R[ie]=b.charCodeAt(ie);return R},A=n.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",R=oe(b)?b:new Uint8Array(b),ie=0;ie<R.length;ie+=8192)S+=String.fromCharCode.apply(null,R.subarray(ie,ie+8192));return S};n.addImage=function(){var b,S,R,ie,me,Ee,Ne,_e,ke;if(typeof arguments[1]=="number"?(S=e,R=arguments[1],ie=arguments[2],me=arguments[3],Ee=arguments[4],Ne=arguments[5],_e=arguments[6],ke=arguments[7]):(S=arguments[1],R=arguments[2],ie=arguments[3],me=arguments[4],Ee=arguments[5],Ne=arguments[6],_e=arguments[7],ke=arguments[8]),xn(b=arguments[0])==="object"&&!d(b)&&"imageData"in b){var Fe=b;b=Fe.imageData,S=Fe.format||S||e,R=Fe.x||R||0,ie=Fe.y||ie||0,me=Fe.w||Fe.width||me,Ee=Fe.h||Fe.height||Ee,Ne=Fe.alias||Ne,_e=Fe.compression||_e,ke=Fe.rotation||Fe.angle||ke}var rt=this.internal.getFilters();if(_e===void 0&&rt.indexOf("FlateEncode")!==-1&&(_e="SLOW"),isNaN(R)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var T=C.call(this,b,S,Ne,_e);return _.call(this,R,ie,me,Ee,T,ke),this};var C=function(b,S,R,ie){var me,Ee,Ne;if(typeof b=="string"&&r(b)===e){b=unescape(b);var _e=B(b,!1);(_e!==""||(_e=n.loadFile(b,!0))!==void 0)&&(b=_e)}if(d(b)&&(b=g(b,S)),S=r(b,S),!l(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((Ne=R)==null||Ne.length===0)&&(R=function(ke){return typeof ke=="string"||oe(ke)?L(ke):oe(ke.data)?L(ke.data):null}(b)),(me=p.call(this,R))||(se()&&(b instanceof Uint8Array||S==="RGBA"||(Ee=b,b=N(b))),me=this["process"+S.toUpperCase()](b,u.call(this),R,function(ke){return ke&&typeof ke=="string"&&(ke=ke.toUpperCase()),ke in n.image_compression?ke:P.NONE}(ie),Ee)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},B=n.__addimage__.convertBase64ToBinaryString=function(b,S){var R;S=typeof S!="boolean"||S;var ie,me="";if(typeof b=="string"){ie=(R=K(b))!==null?R.data:b;try{me=Af(ie)}catch(Ee){if(S)throw M(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return me};n.getImageProperties=function(b){var S,R,ie="";if(d(b)&&(b=g(b)),typeof b=="string"&&r(b)===e&&((ie=B(b,!1))===""&&(ie=n.loadFile(b)||""),b=ie),R=r(b),!l(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!se()||b instanceof Uint8Array||(b=N(b)),!(S=this["process"+R.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=R,S}})(Dt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,l=!1,d=0;d<u.length&&!l;d++)switch((r=u[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(l!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){r=u[g];var p=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(_.objId),L=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(P(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(P(L))+") >>",_.content=s;var M=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+M,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(_.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var K=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var se=this.annotations._nameMap[r.options.name];r.options.pageNumber=se.page,r.options.top=se.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var oe=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+oe+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+i),h:u(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var l=this.splitTextToSize(t,o).length;a=Math.ceil(u*l)}else o=c,a=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,o,a,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Dt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=n.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var l=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(_){var E=0,P=t,L="",M=0;for(E=0;E<_.length;E+=1)P[_.charCodeAt(E)]!==void 0?(M++,typeof(P=P[_.charCodeAt(E)])=="number"&&(L+=String.fromCharCode(P),P=t,M=0),E===_.length-1&&(P=t,L+=_.charAt(E-(M-1)),E-=M-1,M=0)):(P=t,L+=_.charAt(E-M),E-=M,M=0);return L};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(_,E,P){return a(_)?s(_)===!1?-1:!u(_)||!a(E)&&!a(P)||!a(P)&&o(E)||o(_)&&!a(E)||o(_)&&c(E)||o(_)&&o(E)?0:l(_)&&a(E)&&!o(E)&&a(P)&&u(P)?3:o(_)||!a(P)?1:2:-1},p=function(_){var E=0,P=0,L=0,M="",K="",se="",oe=(_=_||"").split("\\s+"),N=[];for(E=0;E<oe.length;E+=1){for(N.push(""),P=0;P<oe[E].length;P+=1)M=oe[E][P],K=oe[E][P-1],se=oe[E][P+1],a(M)?(L=g(M,K,se),N[E]+=L!==-1?String.fromCharCode(e[M.charCodeAt(0)][L]):M):N[E]+=M;N[E]=d(N[E])}return N.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var _,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(E)){var L=0;for(P=[],L=0;L<E.length;L+=1)Array.isArray(E[L])?P.push([p(E[L][0]),E[L][1],E[L][2]]):P.push([p(E[L])]);_=P}else _=p(E);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",x])}(Dt.API),Dt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var l=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(_){x=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var l=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,p=0,x=0,_=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=u.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(M,K){return M.concat(E.splitTextToSize(K,P))},[])):c=Array.isArray(c)?c:[c];for(var L=0;L<c.length;L++)p<(_=this.getStringUnitWidth(c[L],{font:d})*l)&&(p=_);return p!==0&&(x=c.length),{w:p/=g,h:Math.max((x*l*this.getLineHeightFactor()-l*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,l=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-l,c.y+l,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+l,{align:"center",baseline:"top",maxWidth:c.width-l-l}):this.text(c.text,c.x+l,c.y+l,{align:"left",baseline:"top",maxWidth:c.width-l-l})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,l,d,g){if(r.call(this),!l)throw new Error("No data for PDF table.");var p,x,_,E,P=[],L=[],M=[],K={},se={},oe=[],N=[],A=(g=g||{}).autoSize||!1,C=g.printHeaders!==!1,B=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,b=g.margins||Object.assign({width:this.getPageWidth()},e),S=typeof g.padding=="number"?g.padding:3,R=g.headerBackgroundColor||"#c8c8c8",ie=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=ie,this.setFontSize(B),d==null)L=P=Object.keys(l[0]),M=P.map(function(){return"left"});else if(Array.isArray(d)&&xn(d[0])==="object")for(P=d.map(function(Fe){return Fe.name}),L=d.map(function(Fe){return Fe.prompt||Fe.name||""}),M=d.map(function(Fe){return Fe.align||"left"}),p=0;p<d.length;p+=1)se[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(L=P=d,M=P.map(function(){return"left"}));if(A||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<P.length;p+=1){for(K[E=P[p]]=l.map(function(Fe){return Fe[E]}),this.setFont(void 0,"bold"),oe.push(this.getTextDimensions(L[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=K[E],this.setFont(void 0,"normal"),_=0;_<x.length;_+=1)oe.push(this.getTextDimensions(x[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[E]=Math.max.apply(null,oe)+S+S,oe=[]}if(C){var me={};for(p=0;p<P.length;p+=1)me[P[p]]={},me[P[p]].text=L[p],me[P[p]].align=M[p];var Ee=o.call(this,me,se);N=P.map(function(Fe){return new s(c,u,se[Fe],Ee,me[Fe].text,void 0,me[Fe].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var Ne=d.reduce(function(Fe,rt){return Fe[rt.name]=rt.align,Fe},{});for(p=0;p<l.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:l[p]},this);var _e=o.call(this,l[p],se);for(_=0;_<P.length;_+=1){var ke=l[p][P[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:_,data:ke},this),a.call(this,new s(c,u,se[P[_]],_e,ke,p+2,Ne[P[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var l=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var x=c[p];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[p]-l-l)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/g+l+l},this).reduce(function(p,x){return Math.max(p,x)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var l;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){l=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(l.y=this.internal.__cell__.margins.top||0,g.push(l)),l.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,l),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Dt.API);var yS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},wS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],S1=_S(wS),xS=[100,200,300,400,500,600,700,800,900],vW=_S(xS);function P1(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return yS[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof S1[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function S5(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var _W={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},P5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function N5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function yW(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},_W,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=P1(e[o])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+N5(s)+"' and default family '"+r+"'.");if(a=function(c,u){if(u[c])return u[c];var l=S1[c],d=l<=S1.normal?-1:1,g=S5(u,wS,l,d);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,a),a=function(c,u){if(u[c])return u[c];for(var l=yS[c],d=0;d<l.length;++d)if(u[l[d]])return u[l[d]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var l=vW[c],d=S5(u,xS,l,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+N5(s)+"'.");return a}function k5(n){return n.trimLeft()}function wW(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function xW(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var y0,C5,R5,Sg=["times"];(function(n){var e,t,r,i,s,a,o,c,u,l=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new a,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new a,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new l}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=T;Object.defineProperty(this,"pdf",{get:function(){return D}});var V=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return V},set:function(Re){V=!!Re}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(Re){U=!!Re}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(Re){isNaN(Re)||(J=Re)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(Re){isNaN(Re)||(ae=Re)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Re){var re;typeof Re=="number"?re=[Re,Re,Re,Re]:((re=new Array(4))[0]=Re[0],re[1]=Re.length>=2?Re[1]:re[0],re[2]=Re.length>=3?Re[2]:re[0],re[3]=Re.length>=4?Re[3]:re[1]),u.margin=re}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(Re){le=Re}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Re){ue=Re}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(Re){xe=Re}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Re){Re instanceof l&&(u=Re)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Re){u.path=Re}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(Re){Ve=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var re;re=g(Re),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var re=g(Re);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var ze=null;function Ze(Re,re){if(ze===null){var We=function(_t){var $e=[];return Object.keys(_t).forEach(function(nt){_t[nt].forEach(function(ct){var ut=null;switch(ct){case"bold":ut={family:nt,weight:"bold"};break;case"italic":ut={family:nt,style:"italic"};break;case"bolditalic":ut={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:nt}}ut!==null&&(ut.ref={name:nt,style:ct},$e.push(ut))})}),$e}(Re.getFontList());ze=function(_t){for(var $e={},nt=0;nt<_t.length;++nt){var ct=P1(_t[nt]),ut=ct.family,Tt=ct.stretch,At=ct.style,Ft=ct.weight;$e[ut]=$e[ut]||{},$e[ut][Tt]=$e[ut][Tt]||{},$e[ut][Tt][At]=$e[ut][Tt][At]||{},$e[ut][Tt][At][Ft]=ct}return $e}(We.concat(re))}return ze}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(Re){ze=null,at=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var re;if(this.ctx.font=Re,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var We=re[1],_t=(re[2],re[3]),$e=re[4],nt=(re[5],re[6]),ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(ct==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ut=function(Ct){var qt,pt,Fn=[],Gt=Ct.trim();if(Gt==="")return Sg;if(Gt in P5)return[P5[Gt]];for(;Gt!=="";){switch(pt=null,qt=(Gt=k5(Gt)).charAt(0)){case'"':case"'":pt=wW(Gt.substring(1),qt);break;default:pt=xW(Gt)}if(pt===null||(Fn.push(pt[0]),(Gt=k5(pt[1]))!==""&&Gt.charAt(0)!==","))return Sg;Gt=Gt.replace(/^,/,"")}return Fn}(nt);if(this.fontFaces){var Tt=yW(Ze(this.pdf,this.fontFaces),ut.map(function(Ct){return{family:Ct,stretch:"normal",weight:_t,style:We}}));this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var At="";(_t==="bold"||parseInt(_t,10)>=700||We==="bold")&&(At="bold"),We==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Ft="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<ut.length;kt++){if(this.pdf.internal.getFont(ut[kt],At,{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[kt];break}if(At==="bolditalic"&&this.pdf.internal.getFont(ut[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=ut[kt],At="bold";else if(this.pdf.internal.getFont(ut[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[kt],At="normal";break}}if(Ft===""){for(var Ht=0;Ht<ut.length;Ht++)if(It[ut[Ht]]){Ft=It[ut[Ht]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,rt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,rt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){K.call(this,"fill",!1)},d.prototype.stroke=function(){K.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var V=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"mt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(T,D)},d.prototype.closePath=function(){var T=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&xn(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){T=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(T.x,T.y)},d.prototype.lineTo=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var V=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"lt",x:V.x,y:V.y}),this.ctx.lastPoint=new a(V.x,V.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,D,V,U){if(isNaN(V)||isNaN(U)||isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new a(V,U)),ae=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},d.prototype.bezierCurveTo=function(T,D,V,U,J,ae){if(isNaN(J)||isNaN(ae)||isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U))throw Cn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new a(J,ae)),ue=this.ctx.transform.applyToPoint(new a(T,D)),xe=this.ctx.transform.applyToPoint(new a(V,U));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new a(le.x,le.y)},d.prototype.arc=function(T,D,V,U,J,ae){if(isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U)||isNaN(J))throw Cn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new a(T,D));T=le.x,D=le.y;var ue=this.ctx.transform.applyToPoint(new a(0,V)),xe=this.ctx.transform.applyToPoint(new a(0,0));V=Math.sqrt(Math.pow(ue.x-xe.x,2)+Math.pow(ue.y-xe.y,2))}Math.abs(J-U)>=2*Math.PI&&(U=0,J=2*Math.PI),this.path.push({type:"arc",x:T,y:D,radius:V,startAngle:U,endAngle:J,counterclockwise:ae})},d.prototype.arcTo=function(T,D,V,U,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,D,V,U){if(isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U))throw Cn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,D),this.lineTo(T+V,D),this.lineTo(T+V,D+U),this.lineTo(T,D+U),this.lineTo(T,D),this.lineTo(T+V,D),this.lineTo(T,D)},d.prototype.fillRect=function(T,D,V,U){if(isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U))throw Cn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,D,V,U),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(T,D,V,U){if(isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U))throw Cn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(T,D,V,U),this.stroke())},d.prototype.clearRect=function(T,D,V,U){if(isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U))throw Cn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,D,V,U))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,V=0;V<this.pdf.internal.getNumberOfPages();V++)this.pdf.setPage(V+1),this.pdf.internal.out("Q");this.pdf.setPage(D),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(T){var D,V,U,J;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))D=0,V=0,U=0,J=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(ae!==null)D=parseInt(ae[1]),V=parseInt(ae[2]),U=parseInt(ae[3]),J=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)D=parseInt(ae[1]),V=parseInt(ae[2]),U=parseInt(ae[3]),J=parseFloat(ae[4]);else{if(J=1,typeof T=="string"&&T.charAt(0)!=="#"){var le=new fS(T);T=le.ok?le.toHex():"#000000"}T.length===4?(D=T.substring(1,2),D+=D,V=T.substring(2,3),V+=V,U=T.substring(3,4),U+=U):(D=T.substring(1,3),V=T.substring(3,5),U=T.substring(5,7)),D=parseInt(D,16),V=parseInt(V,16),U=parseInt(U,16)}}return{r:D,g:V,b:U,a:J,style:T}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,D,V,U){if(isNaN(D)||isNaN(V)||typeof T!="string")throw Cn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!p.call(this)){var J=_e(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;S.call(this,{text:T,x:D,y:V,scale:ae,angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.strokeText=function(T,D,V,U){if(isNaN(D)||isNaN(V)||typeof T!="string")throw Cn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){U=isNaN(U)?void 0:U;var J=_e(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;S.call(this,{text:T,x:D,y:V,scale:ae,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.measureText=function(T){if(typeof T!="string")throw Cn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,V=this.pdf.internal.scaleFactor,U=D.internal.getFontSize(),J=D.getStringUnitWidth(T)*U/D.internal.scaleFactor,ae=function(le){var ue=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new ae({width:J*=Math.round(96*V/72*1e4)/1e4})},d.prototype.scale=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var V=new c(T,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.rotate=function(T){if(isNaN(T))throw Cn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.translate=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var V=new c(1,0,0,1,T,D);this.ctx.transform=this.ctx.transform.multiply(V)},d.prototype.transform=function(T,D,V,U,J,ae){if(isNaN(T)||isNaN(D)||isNaN(V)||isNaN(U)||isNaN(J)||isNaN(ae))throw Cn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(T,D,V,U,J,ae);this.ctx.transform=this.ctx.transform.multiply(le)},d.prototype.setTransform=function(T,D,V,U,J,ae){T=isNaN(T)?1:T,D=isNaN(D)?0:D,V=isNaN(V)?0:V,U=isNaN(U)?1:U,J=isNaN(J)?0:J,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(T,D,V,U,J,ae)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,D,V,U,J,ae,le,ue,xe){var Ve=this.pdf.getImageProperties(T),ze=1,Ze=1,at=1,Re=1;U!==void 0&&ue!==void 0&&(at=ue/U,Re=xe/J,ze=Ve.width/U*ue/U,Ze=Ve.height/J*xe/J),ae===void 0&&(ae=D,le=V,D=0,V=0),U!==void 0&&ue===void 0&&(ue=U,xe=J),U===void 0&&ue===void 0&&(ue=Ve.width,xe=Ve.height);for(var re,We=this.ctx.transform.decompose(),_t=_e(We.rotate.shx),$e=new c,nt=($e=($e=($e=$e.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new o(ae-D*at,le-V*Re,U*ze,J*Ze)),ct=E.call(this,nt),ut=[],Tt=0;Tt<ct.length;Tt+=1)ut.indexOf(ct[Tt])===-1&&ut.push(ct[Tt]);if(M(ut),this.autoPaging)for(var At=ut[0],Ft=ut[ut.length-1],It=At;It<Ft+1;It++){this.pdf.setPage(It);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=It===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=It===1?0:Ct+(It-2)*qt;if(this.ctx.clip_path.length!==0){var Fn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(re,this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Fn}var Gt=JSON.parse(JSON.stringify(nt));Gt=L([Gt],this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset)[0];var qr=(It>At||It<Ft)&&_.call(this);qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,qt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,_t),qr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,_t)};var E=function(T,D,V){var U=[];D=D||this.pdf.internal.pageSize.width,V=V||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":U.push(Math.floor((T.y+J)/V)+1);break;case"arc":U.push(Math.floor((T.y+J-T.radius)/V)+1),U.push(Math.floor((T.y+J+T.radius)/V)+1);break;case"qct":var ae=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);U.push(Math.floor((ae.y+J)/V)+1),U.push(Math.floor((ae.y+ae.h+J)/V)+1);break;case"bct":var le=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);U.push(Math.floor((le.y+J)/V)+1),U.push(Math.floor((le.y+le.h+J)/V)+1);break;case"rect":U.push(Math.floor((T.y+J)/V)+1),U.push(Math.floor((T.y+T.h+J)/V)+1)}for(var ue=0;ue<U.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<U[ue];)P.call(this);return U},P=function(){var T=this.fillStyle,D=this.strokeStyle,V=this.font,U=this.lineCap,J=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=D,this.font=V,this.lineCap=U,this.lineWidth=J,this.lineJoin=ae},L=function(T,D,V){for(var U=0;U<T.length;U++)switch(T[U].type){case"bct":T[U].x2+=D,T[U].y2+=V;case"qct":T[U].x1+=D,T[U].y1+=V;case"mt":case"lt":case"arc":default:T[U].x+=D,T[U].y+=V}return T},M=function(T){return T.sort(function(D,V){return D-V})},K=function(T,D){for(var V,U,J=this.fillStyle,ae=this.strokeStyle,le=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Ve=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),at=[],Re=0;Re<Ze.length;Re++)if(Ze[Re].x!==void 0)for(var re=E.call(this,Ze[Re]),We=0;We<re.length;We+=1)at.indexOf(re[We])===-1&&at.push(re[We]);for(var _t=0;_t<at.length;_t++)for(;this.pdf.internal.getNumberOfPages()<at[_t];)P.call(this);if(M(at),this.autoPaging)for(var $e=at[0],nt=at[at.length-1],ct=$e;ct<nt+1;ct++){this.pdf.setPage(ct),this.fillStyle=J,this.strokeStyle=ae,this.lineCap=le,this.lineWidth=xe,this.lineJoin=Ve;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=ct===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=ct===1?0:At+(ct-2)*Ft;if(this.ctx.clip_path.length!==0){var kt=this.path;V=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(V,this.posX+this.margin[3],-It+Tt+this.ctx.prevPageLastElemOffset),se.call(this,T,!0),this.path=kt}if(U=JSON.parse(JSON.stringify(ze)),this.path=L(U,this.posX+this.margin[3],-It+Tt+this.ctx.prevPageLastElemOffset),D===!1||ct===0){var Ht=(ct>$e||ct<nt)&&_.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ft,null).clip().discardPath()),se.call(this,T,D),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=xe,se.call(this,T,D),this.lineWidth=ue;this.path=ze},se=function(T,D){if((T!=="stroke"||D||!x.call(this))&&(T==="stroke"||D||!p.call(this))){for(var V,U,J=[],ae=this.path,le=0;le<ae.length;le++){var ue=ae[le];switch(ue.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:ue,deltas:[],abs:[]});break;case"lt":var xe=J.length;if(ae[le-1]&&!isNaN(ae[le-1].x)&&(V=[ue.x-ae[le-1].x,ue.y-ae[le-1].y],xe>0)){for(;xe>=0;xe--)if(J[xe-1].close!==!0&&J[xe-1].begin!==!0){J[xe-1].deltas.push(V),J[xe-1].abs.push(ue);break}}break;case"bct":V=[ue.x1-ae[le-1].x,ue.y1-ae[le-1].y,ue.x2-ae[le-1].x,ue.y2-ae[le-1].y,ue.x-ae[le-1].x,ue.y-ae[le-1].y],J[J.length-1].deltas.push(V);break;case"qct":var Ve=ae[le-1].x+2/3*(ue.x1-ae[le-1].x),ze=ae[le-1].y+2/3*(ue.y1-ae[le-1].y),Ze=ue.x+2/3*(ue.x1-ue.x),at=ue.y+2/3*(ue.y1-ue.y),Re=ue.x,re=ue.y;V=[Ve-ae[le-1].x,ze-ae[le-1].y,Ze-ae[le-1].x,at-ae[le-1].y,Re-ae[le-1].x,re-ae[le-1].y],J[J.length-1].deltas.push(V);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(ue)}}U=D?null:T==="stroke"?"stroke":"fill";for(var We=!1,_t=0;_t<J.length;_t++)if(J[_t].arc)for(var $e=J[_t].abs,nt=0;nt<$e.length;nt++){var ct=$e[nt];ct.type==="arc"?A.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,D,!We):R.call(this,ct.x,ct.y),We=!0}else if(J[_t].close===!0)this.pdf.internal.out("h"),We=!1;else if(J[_t].begin!==!0){var ut=J[_t].start.x,Tt=J[_t].start.y;ie.call(this,J[_t].deltas,ut,Tt),We=!0}U&&C.call(this,U),D&&B.call(this)}},oe=function(T){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,V=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-V;case"top":return T+D-V;case"hanging":return T+D-2*V;case"middle":return T+D/2-V;case"ideographic":return T;case"alphabetic":default:return T}},N=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(D,V){this.colorStops.push([D,V])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(T,D,V,U,J,ae,le,ue,xe){for(var Ve=Ee.call(this,V,U,J,ae),ze=0;ze<Ve.length;ze++){var Ze=Ve[ze];ze===0&&(xe?b.call(this,Ze.x1+T,Ze.y1+D):R.call(this,Ze.x1+T,Ze.y1+D)),me.call(this,T,D,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ue?B.call(this):C.call(this,le)},C=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(T,D){this.pdf.internal.out(t(T)+" "+r(D)+" m")},S=function(T){var D;switch(T.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var V=this.pdf.getTextDimensions(T.text),U=oe.call(this,T.y),J=N.call(this,U)-V.h,ae=this.ctx.transform.applyToPoint(new a(T.x,U)),le=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var xe,Ve,ze,Ze=this.ctx.transform.applyToRectangle(new o(T.x,U,V.w,V.h)),at=ue.applyToRectangle(new o(T.x,J,V.w,V.h)),Re=E.call(this,at),re=[],We=0;We<Re.length;We+=1)re.indexOf(Re[We])===-1&&re.push(Re[We]);if(M(re),this.autoPaging)for(var _t=re[0],$e=re[re.length-1],nt=_t;nt<$e+1;nt++){this.pdf.setPage(nt);var ct=nt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[2],At=Tt-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],It=Ft-this.margin[3],kt=nt===1?0:ut+(nt-2)*At;if(this.ctx.clip_path.length!==0){var Ht=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(xe,this.posX+this.margin[3],-1*kt+ct),se.call(this,"fill",!0),this.path=Ht}var Ct=L([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-kt+ct+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*T.scale),ze=this.lineWidth,this.lineWidth=ze*T.scale);var qt=this.autoPaging!=="text";if(qt||Ct.y+Ct.h<=Tt){if(qt||Ct.y>=ct&&Ct.x<=Ft){var pt=qt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Ft-Ct.x)[0],Fn=L([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-kt+ct+this.ctx.prevPageLastElemOffset)[0],Gt=qt&&(nt>_t||nt<$e)&&_.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,At,null).clip().discardPath()),this.pdf.text(pt,Fn.x,Fn.y,{angle:T.angle,align:D,renderingMode:T.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else Ct.y<Tt&&(this.ctx.prevPageLastElemOffset+=Tt-Ct.y);T.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=ze)}else T.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*T.scale),ze=this.lineWidth,this.lineWidth=ze*T.scale),this.pdf.text(T.text,ae.x+this.posX,ae.y+this.posY,{angle:T.angle,align:D,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=ze)},R=function(T,D,V,U){V=V||0,U=U||0,this.pdf.internal.out(t(T+V)+" "+r(D+U)+" l")},ie=function(T,D,V){return this.pdf.lines(T,D,V,null,null)},me=function(T,D,V,U,J,ae,le,ue){this.pdf.internal.out([e(i(V+T)),e(s(U+D)),e(i(J+T)),e(s(ae+D)),e(i(le+T)),e(s(ue+D)),"c"].join(" "))},Ee=function(T,D,V,U){for(var J=2*Math.PI,ae=Math.PI/2;D>V;)D-=J;var le=Math.abs(V-D);le<J&&U&&(le=J-le);for(var ue=[],xe=U?-1:1,Ve=D;le>1e-5;){var ze=Ve+xe*Math.min(le,ae);ue.push(Ne.call(this,T,Ve,ze)),le-=Math.abs(ze-Ve),Ve=ze}return ue},Ne=function(T,D,V){var U=(V-D)/2,J=T*Math.cos(U),ae=T*Math.sin(U),le=J,ue=-ae,xe=le*le+ue*ue,Ve=xe+le*J+ue*ae,ze=4/3*(Math.sqrt(2*xe*Ve)-Ve)/(le*ae-ue*J),Ze=le-ze*ue,at=ue+ze*le,Re=Ze,re=-at,We=U+D,_t=Math.cos(We),$e=Math.sin(We);return{x1:T*Math.cos(D),y1:T*Math.sin(D),x2:Ze*_t-at*$e,y2:Ze*$e+at*_t,x3:Re*_t-re*$e,y3:Re*$e+re*_t,x4:T*Math.cos(V),y4:T*Math.sin(V)}},_e=function(T){return 180*T/Math.PI},ke=function(T,D,V,U,J,ae){var le=T+.5*(V-T),ue=D+.5*(U-D),xe=J+.5*(V-J),Ve=ae+.5*(U-ae),ze=Math.min(T,J,le,xe),Ze=Math.max(T,J,le,xe),at=Math.min(D,ae,ue,Ve),Re=Math.max(D,ae,ue,Ve);return new o(ze,at,Ze-ze,Re-at)},Fe=function(T,D,V,U,J,ae,le,ue){var xe,Ve,ze,Ze,at,Re,re,We,_t,$e,nt,ct,ut,Tt,At=V-T,Ft=U-D,It=J-V,kt=ae-U,Ht=le-J,Ct=ue-ae;for(Ve=0;Ve<41;Ve++)_t=(re=(ze=T+(xe=Ve/40)*At)+xe*((at=V+xe*It)-ze))+xe*(at+xe*(J+xe*Ht-at)-re),$e=(We=(Ze=D+xe*Ft)+xe*((Re=U+xe*kt)-Ze))+xe*(Re+xe*(ae+xe*Ct-Re)-We),Ve==0?(nt=_t,ct=$e,ut=_t,Tt=$e):(nt=Math.min(nt,_t),ct=Math.min(ct,$e),ut=Math.max(ut,_t),Tt=Math.max(Tt,$e));return new o(Math.round(nt),Math.round(ct),Math.round(ut-nt),Math.round(Tt-ct))},rt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,D,V=(T=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:D}));this.prevLineDash!==V&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=V)}}})(Dt.API),function(n){var e=function(s){var a,o,c,u,l,d,g,p,x,_;for(o=[],c=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(l=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(l=((l=((l=((l=(l-(_=l%85))/85)-(x=l%85))/85)-(p=l%85))/85)-(g=l%85))/85)%85,o.push(d+33,g+33,p+33,x+33,_+33)):o.push(122);return function(E,P){for(var L=P;L>0;L--)E.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,c,u,l,d=String,g="length",p=255,x="charCodeAt",_="slice",E="replace";for(s[_](-2),s=s[_](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],u=0,l=(s+=a="uuuuu"[_](s[g]%5||5))[g];l>u;u+=5)o=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(P,L){for(var M=L;M>0;M--)P.pop()}(c,a[g]),d.fromCharCode.apply(d,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=E1(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var o=0,c=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Dt.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(c,u,l){var d=new XMLHttpRequest,g=0,p=function(x){var _=x.length,E=[],P=String.fromCharCode;for(g=0;g<_;g+=1)E.push(P(255&x.charCodeAt(g)));return E.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?l(p(this.responseText)):l(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)}(i,s,a)}catch{}return o}(e,t,r)},n.loadImageFile=n.loadFile}(Dt.API),function(n){function e(){return(Ot.html2canvas?Promise.resolve(Ot.html2canvas):v1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Ot.DOMPurify?Promise.resolve(Ot.DOMPurify):v1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=xn(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,l){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)l!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(c(g,l));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,l=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:l,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var p=u[g],x=p.src.find(function(_){return _.format==="truetype"});x&&c.addFont(x.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,function(u,l){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,l).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),l=c.call(u,a,o);return s.convert(l,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,o,c){if(xn(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var l,d=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":l=1;break;case"mm":l=72/25.4;break;case"cm":l=72/2.54;break;case"in":l=72;break;case"px":l=.75;break;case"pc":case"em":l=12;break;case"ex":l=6;break;default:throw"Invalid unit: "+o}var p,x=0,_=0;if(g.hasOwnProperty(d))x=g[d][1]/l,_=g[d][0]/l;else try{x=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",_>x&&(p=_,_=x,x=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>_&&(p=_,_=x,x=p)}return{width:_,height:x,unit:o,k:l,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(P1):null;var c=new s(o);return o.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(n){return R5=n,this.internal.events.subscribe("postPutResources",function(){y0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(y0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),C5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+R5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){y0!==void 0&&C5!==void 0&&this.internal.out("/Names <</JavaScript "+y0+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,l=[];for(s=0;s<u;s++){var d=t.internal.newObject();l.push(d);var g=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<l.length;s++)t.internal.write("(page_"+(s+1)+")"+l[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Dt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,o){var c,u=this.decode.DCT_DECODE,l=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(d){for(var g,p=256*d.charCodeAt(4)+d.charCodeAt(5),x=d.length,_={width:0,height:0,numcomponents:1},E=4;E<x;E+=2){if(E+=p,e.indexOf(d.charCodeAt(E+1))!==-1){g=256*d.charCodeAt(E+5)+d.charCodeAt(E+6),_={width:256*d.charCodeAt(E+7)+d.charCodeAt(E+8),height:g,numcomponents:d.charCodeAt(E+9)};break}p=256*d.charCodeAt(E+2)+d.charCodeAt(E+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}l={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return l}}(Dt.API);var vl,w0,L5,D5,F5,EW=function(){var n,e,t;function r(s){var a,o,c,u,l,d,g,p,x,_,E,P,L,M;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),x=(function(){var K,se;for(se=[],K=0;K<4;++K)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},l=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*l/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),s=(d!=null?d.data:void 0)||this.imgData,P=0;0<=a?P<a:P>a;0<=a?++P:--P)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(L=0;0<=_?L<_:L>_;0<=_?++L:--L)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(E=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,E.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,E.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function l(d,g,p,x){var _,E,P,L,M,K,se,oe,N,A,C,B,b,S,R,ie,me,Ee,Ne,_e,ke,Fe=Math.ceil((u.width-d)/p),rt=Math.ceil((u.height-g)/x),T=u.width==Fe&&u.height==rt;for(S=a*Fe,B=T?o:new Uint8Array(S*rt),K=s.length,b=0,E=0;b<rt&&c<K;){switch(s[c++]){case 0:for(L=me=0;me<S;L=me+=1)B[E++]=s[c++];break;case 1:for(L=Ee=0;Ee<S;L=Ee+=1)_=s[c++],M=L<a?0:B[E-a],B[E++]=(_+M)%256;break;case 2:for(L=Ne=0;Ne<S;L=Ne+=1)_=s[c++],P=(L-L%a)/a,R=b&&B[(b-1)*S+P*a+L%a],B[E++]=(R+_)%256;break;case 3:for(L=_e=0;_e<S;L=_e+=1)_=s[c++],P=(L-L%a)/a,M=L<a?0:B[E-a],R=b&&B[(b-1)*S+P*a+L%a],B[E++]=(_+Math.floor((M+R)/2))%256;break;case 4:for(L=ke=0;ke<S;L=ke+=1)_=s[c++],P=(L-L%a)/a,M=L<a?0:B[E-a],b===0?R=ie=0:(R=B[(b-1)*S+P*a+L%a],ie=P&&B[(b-1)*S+(P-1)*a+L%a]),se=M+R-ie,oe=Math.abs(se-M),A=Math.abs(se-R),C=Math.abs(se-ie),N=oe<=A&&oe<=C?M:A<=C?R:ie,B[E++]=(_+N)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!T){var D=((g+b*x)*u.width+d)*a,V=b*S;for(L=0;L<Fe;L+=1){for(var U=0;U<a;U+=1)o[D++]=B[V++];D+=(p-1)*a}}b++}}return s=eW(s),u.interlaceMethod==1?(l(0,0,8,8),l(4,0,8,8),l(0,4,4,8),l(2,0,4,4),l(0,2,2,4),l(1,0,2,2),l(0,1,1,2)):l(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,c,u,l,d,g,p;for(o=this.palette,l=this.transparency.indexed||[],u=new Uint8Array((l.length||0)+o.length),c=0,s=0,a=d=0,g=o.length;d<g;a=d+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(p=l[s++])!=null?p:255;return u},r.prototype.copyToImageData=function(s,a){var o,c,u,l,d,g,p,x,_,E,P;if(c=this.colors,_=null,o=this.hasAlphaChannel,this.palette.length&&(_=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),c=4,o=!0),x=(u=s.data||s).length,d=_||a,l=g=0,c===1)for(;l<x;)p=_?4*a[l/4]:g,E=d[p++],u[l++]=E,u[l++]=E,u[l++]=E,u[l++]=o?d[p++]:255,g=p;else for(;l<x;)p=_?4*a[l/4]:g,u[l++]=d[p++],u[l++]=d[p++],u[l++]=d[p++],u[l++]=o?d[p++]:255,g=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ot)==="[object Window]"){try{e=Ot.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,c,u,l,d,g,p;if(this.animation){for(p=[],o=l=0,d=(g=this.animation.frames).length;l<d;o=++l)a=g[o],c=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,p.push(a.image=n(c));return p}},r.prototype.renderFrame=function(s,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,c,u,l,d,g=this;return o=0,d=this.animation,u=d.numFrames,c=d.frames,l=d.numPlays,(a=function(){var p,x;if(p=o++%u,x=c[p],g.renderFrame(s,p),u>1&&o/u<l)return g.animation._timeout=setTimeout(a,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function TW(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var o=null,c=null;s&&(o=e,c=a,e+=3*a);var u=!0,l=[],d=0,g=null,p=0,x=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];d=n[e++]|n[e++]<<8,g=n[e++],!(1&_)&&(g=null),p=_>>2&7,e++;break;case 254:for(;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var E=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,M=n[e++]|n[e++]<<8,K=n[e++],se=K>>6&1,oe=1<<(7&K)+1,N=o,A=c,C=!1;K>>7&&(C=!0,N=e,A=oe,e+=3*oe);var B=e;for(e++;;){var b;if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}l.push({x:E,y:P,width:L,height:M,has_local_palette:C,palette_offset:N,palette_size:A,data_offset:B,data_length:e-B,transparent_index:g,interlaced:!!se,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return x},this.frameInfo=function(S){if(S<0||S>=l.length)throw new Error("Frame index out of range.");return l[S]},this.decodeAndBlitFrameBGRA=function(S,R){var ie=this.frameInfo(S),me=ie.width*ie.height,Ee=new Uint8Array(me);O5(n,ie.data_offset,Ee,me);var Ne=ie.palette_offset,_e=ie.transparent_index;_e===null&&(_e=256);var ke=ie.width,Fe=t-ke,rt=ke,T=4*(ie.y*t+ie.x),D=4*((ie.y+ie.height)*t+ie.x),V=T,U=4*Fe;ie.interlaced===!0&&(U+=4*t*7);for(var J=8,ae=0,le=Ee.length;ae<le;++ae){var ue=Ee[ae];if(rt===0&&(rt=ke,(V+=U)>=D&&(U=4*Fe+4*t*(J-1),V=T+(ke+Fe)*(J<<1),J>>=1)),ue===_e)V+=4;else{var xe=n[Ne+3*ue],Ve=n[Ne+3*ue+1],ze=n[Ne+3*ue+2];R[V++]=ze,R[V++]=Ve,R[V++]=xe,R[V++]=255}--rt}},this.decodeAndBlitFrameRGBA=function(S,R){var ie=this.frameInfo(S),me=ie.width*ie.height,Ee=new Uint8Array(me);O5(n,ie.data_offset,Ee,me);var Ne=ie.palette_offset,_e=ie.transparent_index;_e===null&&(_e=256);var ke=ie.width,Fe=t-ke,rt=ke,T=4*(ie.y*t+ie.x),D=4*((ie.y+ie.height)*t+ie.x),V=T,U=4*Fe;ie.interlaced===!0&&(U+=4*t*7);for(var J=8,ae=0,le=Ee.length;ae<le;++ae){var ue=Ee[ae];if(rt===0&&(rt=ke,(V+=U)>=D&&(U=4*Fe+4*t*(J-1),V=T+(ke+Fe)*(J<<1),J>>=1)),ue===_e)V+=4;else{var xe=n[Ne+3*ue],Ve=n[Ne+3*ue+1],ze=n[Ne+3*ue+2];R[V++]=xe,R[V++]=Ve,R[V++]=ze,R[V++]=255}--rt}}}function O5(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,o=a+1,c=i+1,u=(1<<c)-1,l=0,d=0,g=0,p=n[e++],x=new Int32Array(4096),_=null;;){for(;l<16&&p!==0;)d|=n[e++]<<l,l+=8,p===1?p=n[e++]:--p;if(l<c)break;var E=d&u;if(d>>=c,l-=c,E!==s){if(E===a)break;for(var P=E<o?E:_,L=0,M=P;M>s;)M=x[M]>>8,++L;var K=M;if(g+L+(P!==E?1:0)>r)return void Cn.log("Warning, gif stream longer than expected.");t[g++]=K;var se=g+=L;for(P!==E&&(t[g++]=K),M=P;L--;)M=x[M],t[--se]=255&M,M>>=8;_!==null&&o<4096&&(x[o++]=_<<8|K,o>=u+1&&c<12&&(++c,u=u<<1|1)),_=E}else o=a+1,u=(1<<(c=i+1))-1,_=null}return g!==r&&Cn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Pg(n){var e,t,r,i,s,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),d=new Array(65535),g=new Array(65535),p=new Array(64),x=new Array(64),_=[],E=0,P=7,L=new Array(64),M=new Array(64),K=new Array(64),se=new Array(256),oe=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ee(T,D){for(var V=0,U=0,J=new Array,ae=1;ae<=16;ae++){for(var le=1;le<=T[ae];le++)J[D[U]]=[],J[D[U]][0]=V,J[D[U]][1]=ae,U++,V++;V*=2}return J}function Ne(T){for(var D=T[0],V=T[1]-1;V>=0;)D&1<<V&&(E|=1<<P),V--,--P<0&&(E==255?(_e(255),_e(0)):_e(E),P=7,E=0)}function _e(T){_.push(T)}function ke(T){_e(T>>8&255),_e(255&T)}function Fe(T,D,V,U,J){for(var ae,le=J[0],ue=J[240],xe=function($e,nt){var ct,ut,Tt,At,Ft,It,kt,Ht,Ct,qt,pt=0;for(Ct=0;Ct<8;++Ct){ct=$e[pt],ut=$e[pt+1],Tt=$e[pt+2],At=$e[pt+3],Ft=$e[pt+4],It=$e[pt+5],kt=$e[pt+6];var Fn=ct+(Ht=$e[pt+7]),Gt=ct-Ht,qr=ut+kt,tn=ut-kt,Tn=Tt+It,Di=Tt-It,Kt=At+Ft,Zi=At-Ft,bn=Fn+Kt,br=Fn-Kt,vi=qr+Tn,un=qr-Tn;$e[pt]=bn+vi,$e[pt+4]=bn-vi;var Nt=.707106781*(un+br);$e[pt+2]=br+Nt,$e[pt+6]=br-Nt;var en=.382683433*((bn=Zi+Di)-(un=tn+Gt)),Fi=.5411961*bn+en,Yn=1.306562965*un+en,Cr=.707106781*(vi=Di+tn),_i=Gt+Cr,wt=Gt-Cr;$e[pt+5]=wt+Fi,$e[pt+3]=wt-Fi,$e[pt+1]=_i+Yn,$e[pt+7]=_i-Yn,pt+=8}for(pt=0,Ct=0;Ct<8;++Ct){ct=$e[pt],ut=$e[pt+8],Tt=$e[pt+16],At=$e[pt+24],Ft=$e[pt+32],It=$e[pt+40],kt=$e[pt+48];var si=ct+(Ht=$e[pt+56]),gr=ct-Ht,Xn=ut+kt,$n=ut-kt,jn=Tt+It,j=Tt-It,ee=At+Ft,Y=At-Ft,X=si+ee,Z=si-ee,te=Xn+jn,ye=Xn-jn;$e[pt]=X+te,$e[pt+32]=X-te;var Ce=.707106781*(ye+Z);$e[pt+16]=Z+Ce,$e[pt+48]=Z-Ce;var we=.382683433*((X=Y+j)-(ye=$n+gr)),Te=.5411961*X+we,Pe=1.306562965*ye+we,Ke=.707106781*(te=j+$n),it=gr+Ke,mt=gr-Ke;$e[pt+40]=mt+Te,$e[pt+24]=mt-Te,$e[pt+8]=it+Pe,$e[pt+56]=it-Pe,pt++}for(Ct=0;Ct<64;++Ct)qt=$e[Ct]*nt[Ct],p[Ct]=qt>0?qt+.5|0:qt-.5|0;return p}(T,D),Ve=0;Ve<64;++Ve)x[N[Ve]]=xe[Ve];var ze=x[0]-V;V=x[0],ze==0?Ne(U[0]):(Ne(U[g[ae=32767+ze]]),Ne(d[ae]));for(var Ze=63;Ze>0&&x[Ze]==0;)Ze--;if(Ze==0)return Ne(le),V;for(var at,Re=1;Re<=Ze;){for(var re=Re;x[Re]==0&&Re<=Ze;)++Re;var We=Re-re;if(We>=16){at=We>>4;for(var _t=1;_t<=at;++_t)Ne(ue);We&=15}ae=32767+x[Re],Ne(J[(We<<4)+g[ae]]),Ne(d[ae]),Re++}return Ze!=63&&Ne(le),V}function rt(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(D){for(var V=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var J=a((V[U]*D+50)/100);J=Math.min(Math.max(J,1),255),o[N[U]]=J}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var ue=a((ae[le]*D+50)/100);ue=Math.min(Math.max(ue,1),255),c[N[le]]=ue}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,ze=0;ze<8;ze++)for(var Ze=0;Ze<8;Ze++)u[Ve]=1/(o[N[Ve]]*xe[ze]*xe[Ze]*8),l[Ve]=1/(c[N[Ve]]*xe[ze]*xe[Ze]*8),Ve++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,D){D&&rt(D),_=new Array,E=0,P=7,ke(65496),ke(65504),ke(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),ke(1),ke(1),_e(0),_e(0),function(){ke(65499),ke(132),_e(0);for(var ut=0;ut<64;ut++)_e(o[ut]);_e(1);for(var Tt=0;Tt<64;Tt++)_e(c[Tt])}(),function(ut,Tt){ke(65472),ke(17),_e(8),ke(Tt),ke(ut),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1)}(T.width,T.height),function(){ke(65476),ke(418),_e(0);for(var ut=0;ut<16;ut++)_e(A[ut+1]);for(var Tt=0;Tt<=11;Tt++)_e(C[Tt]);_e(16);for(var At=0;At<16;At++)_e(B[At+1]);for(var Ft=0;Ft<=161;Ft++)_e(b[Ft]);_e(1);for(var It=0;It<16;It++)_e(S[It+1]);for(var kt=0;kt<=11;kt++)_e(R[kt]);_e(17);for(var Ht=0;Ht<16;Ht++)_e(ie[Ht+1]);for(var Ct=0;Ct<=161;Ct++)_e(me[Ct])}(),ke(65498),ke(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var V=0,U=0,J=0;E=0,P=7,this.encode.displayName="_encode_";for(var ae,le,ue,xe,Ve,ze,Ze,at,Re,re=T.data,We=T.width,_t=T.height,$e=4*We,nt=0;nt<_t;){for(ae=0;ae<$e;){for(Ve=$e*nt+ae,Ze=-1,at=0,Re=0;Re<64;Re++)ze=Ve+(at=Re>>3)*$e+(Ze=4*(7&Re)),nt+at>=_t&&(ze-=$e*(nt+1+at-_t)),ae+Ze>=$e&&(ze-=ae+Ze-$e+4),le=re[ze++],ue=re[ze++],xe=re[ze++],L[Re]=(oe[le]+oe[ue+256>>0]+oe[xe+512>>0]>>16)-128,M[Re]=(oe[le+768>>0]+oe[ue+1024>>0]+oe[xe+1280>>0]>>16)-128,K[Re]=(oe[le+1280>>0]+oe[ue+1536>>0]+oe[xe+1792>>0]>>16)-128;V=Fe(L,u,V,e,r),U=Fe(M,l,U,t,i),J=Fe(K,l,J,t,i),ae+=32}nt+=8}if(P>=0){var ct=[];ct[1]=P+1,ct[0]=(1<<P+1)-1,Ne(ct)}return ke(65497),new Uint8Array(_)},n=n||50,function(){for(var T=String.fromCharCode,D=0;D<256;D++)se[D]=T(D)}(),e=Ee(A,C),t=Ee(S,R),r=Ee(B,b),i=Ee(ie,me),function(){for(var T=1,D=2,V=1;V<=15;V++){for(var U=T;U<D;U++)g[32767+U]=V,d[32767+U]=[],d[32767+U][1]=V,d[32767+U][0]=U;for(var J=-(D-1);J<=-T;J++)g[32767+J]=V,d[32767+J]=[],d[32767+J][1]=V,d[32767+J][0]=D-1+J;T<<=1,D<<=1}}(),function(){for(var T=0;T<256;T++)oe[T]=19595*T,oe[T+256>>0]=38470*T,oe[T+512>>0]=7471*T+32768,oe[T+768>>0]=-11059*T,oe[T+1024>>0]=-21709*T,oe[T+1280>>0]=32768*T+8421375,oe[T+1536>>0]=-27439*T,oe[T+1792>>0]=-5329*T}(),rt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ws(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function M5(n){function e(A){if(!A)throw Error("assert :P")}function t(A,C,B){for(var b=0;4>b;b++)if(A[C+b]!=B.charCodeAt(b))return!0;return!1}function r(A,C,B,b,S){for(var R=0;R<S;R++)A[C+R]=B[b+R]}function i(A,C,B,b){for(var S=0;S<b;S++)A[C+S]=B}function s(A){return new Int32Array(A)}function a(A,C){for(var B=[],b=0;b<A;b++)B.push(new C);return B}function o(A,C){var B=[];return function b(S,R,ie){for(var me=ie[R],Ee=0;Ee<me&&(S.push(ie.length>R+1?[]:new C),!(ie.length<R+1));Ee++)b(S[Ee],R+1,ie)}(B,0,A),B}var c=function(){var A=this;function C(h,m){for(var y=1<<m-1>>>0;h&y;)y>>>=1;return y?(h&y-1)+y:h}function B(h,m,y,I,O){e(!(I%y));do h[m+(I-=y)]=O;while(0<I)}function b(h,m,y,I,O){if(e(2328>=O),512>=O)var q=s(512);else if((q=s(O))==null)return 0;return function(z,H,G,Q,he,be){var Ae,ve,qe=H,De=1<<G,fe=s(16),de=s(16);for(e(he!=0),e(Q!=null),e(z!=null),e(0<G),ve=0;ve<he;++ve){if(15<Q[ve])return 0;++fe[Q[ve]]}if(fe[0]==he)return 0;for(de[1]=0,Ae=1;15>Ae;++Ae){if(fe[Ae]>1<<Ae)return 0;de[Ae+1]=de[Ae]+fe[Ae]}for(ve=0;ve<he;++ve)Ae=Q[ve],0<Q[ve]&&(be[de[Ae]++]=ve);if(de[15]==1)return(Q=new S).g=0,Q.value=be[0],B(z,qe,1,De,Q),De;var Ue,Ge=-1,je=De-1,yt=0,ht=1,Rt=1,vt=1<<G;for(ve=0,Ae=1,he=2;Ae<=G;++Ae,he<<=1){if(ht+=Rt<<=1,0>(Rt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae])(Q=new S).g=Ae,Q.value=be[ve++],B(z,qe+yt,he,vt,Q),yt=C(yt,Ae)}for(Ae=G+1,he=2;15>=Ae;++Ae,he<<=1){if(ht+=Rt<<=1,0>(Rt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae]){if(Q=new S,(yt&je)!=Ge){for(qe+=vt,Ue=1<<(Ge=Ae)-G;15>Ge&&!(0>=(Ue-=fe[Ge]));)++Ge,Ue<<=1;De+=vt=1<<(Ue=Ge-G),z[H+(Ge=yt&je)].g=Ue+G,z[H+Ge].value=qe-H-Ge}Q.g=Ae-G,Q.value=be[ve++],B(z,qe+(yt>>G),he,vt,Q),yt=C(yt,Ae)}}return ht!=2*de[15]-1?0:De}(h,m,y,I,O,q)}function S(){this.value=this.g=0}function R(){this.value=this.g=0}function ie(){this.G=a(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a($r,R)}function me(h,m,y,I){e(h!=null),e(m!=null),e(2147483648>I),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=y,h.Jd=m,h.Yc=y+I,h.Zc=4<=I?y+I-4+1:y,ae(h)}function Ee(h,m){for(var y=0;0<m--;)y|=ue(h,128)<<m;return y}function Ne(h,m){var y=Ee(h,m);return le(h)?-y:y}function _e(h,m,y,I){var O,q=0;for(e(h!=null),e(m!=null),e(4294967288>I),h.Sb=I,h.Ra=0,h.u=0,h.h=0,4<I&&(I=4),O=0;O<I;++O)q+=m[y+O]<<8*O;h.Ra=q,h.bb=I,h.oa=m,h.pa=y}function ke(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Ju-8>>>0,++h.bb,h.u-=8;V(h)&&(h.h=1,h.u=0)}function Fe(h,m){if(e(0<=m),!h.h&&m<=Xu){var y=D(h)&Yu[m];return h.u+=m,ke(h),y}return h.h=1,h.u=0}function rt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(h){return h.Ra>>>(h.u&Ju-1)>>>0}function V(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Ju}function U(h,m){h.u=m,h.h=V(h)}function J(h){h.u>=Rh&&(e(h.u>=Rh),ke(h))}function ae(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function le(h){return Ee(h,1)}function ue(h,m){var y=h.Ca;0>h.b&&ae(h);var I=h.b,O=y*m>>>8,q=(h.I>>>I>O)+0;for(q?(y-=O,h.I-=O+1<<I>>>0):y=O+1,I=y,O=0;256<=I;)O+=8,I>>=8;return I=7^O+Bi[I],h.b-=I,h.Ca=(y<<I)-1,q}function xe(h,m,y){h[m+0]=y>>24&255,h[m+1]=y>>16&255,h[m+2]=y>>8&255,h[m+3]=y>>0&255}function Ve(h,m){return h[m+0]<<0|h[m+1]<<8}function ze(h,m){return Ve(h,m)|h[m+2]<<16}function Ze(h,m){return Ve(h,m)|Ve(h,m+2)<<16}function at(h,m){var y=1<<m;return e(h!=null),e(0<m),h.X=s(y),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Re(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function We(h,m,y,I){e(y!=null),e(I!=null);var O=y[0],q=I[0];return O==0&&(O=(h*q+m/2)/m),q==0&&(q=(m*O+h/2)/h),0>=O||0>=q?0:(y[0]=O,I[0]=q,1)}function _t(h,m){return h+(1<<m)-1>>>m}function $e(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function nt(h,m){A[m]=function(y,I,O,q,z,H,G){var Q;for(Q=0;Q<z;++Q){var he=A[h](H[G+Q-1],O,q+Q);H[G+Q]=$e(y[I+Q],he)}}}function ct(){this.ud=this.hd=this.jd=0}function ut(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function Tt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function At(h,m){return Tt(h+(h-m+.5>>1))}function Ft(h,m,y){return Math.abs(m-y)-Math.abs(h-y)}function It(h,m,y,I,O,q,z){for(I=q[z-1],y=0;y<O;++y)q[z+y]=I=$e(h[m+y],I)}function kt(h,m,y,I,O){var q;for(q=0;q<y;++q){var z=h[m+q],H=z>>8&255,G=16711935&(G=(G=16711935&z)+((H<<16)+H));I[O+q]=(4278255360&z)+G>>>0}}function Ht(h,m){m.jd=h>>0&255,m.hd=h>>8&255,m.ud=h>>16&255}function Ct(h,m,y,I,O,q){var z;for(z=0;z<I;++z){var H=m[y+z],G=H>>>8,Q=H,he=255&(he=(he=H>>>16)+((h.jd<<24>>24)*(G<<24>>24)>>>5));Q=255&(Q=(Q=Q+((h.hd<<24>>24)*(G<<24>>24)>>>5))+((h.ud<<24>>24)*(he<<24>>24)>>>5)),O[q+z]=(4278255360&H)+(he<<16)+Q}}function qt(h,m,y,I,O){A[m]=function(q,z,H,G,Q,he,be,Ae,ve){for(G=be;G<Ae;++G)for(be=0;be<ve;++be)Q[he++]=O(H[I(q[z++])])},A[h]=function(q,z,H,G,Q,he,be){var Ae=8>>q.b,ve=q.Ea,qe=q.K[0],De=q.w;if(8>Ae)for(q=(1<<q.b)-1,De=(1<<Ae)-1;z<H;++z){var fe,de=0;for(fe=0;fe<ve;++fe)fe&q||(de=I(G[Q++])),he[be++]=O(qe[de&De]),de>>=Ae}else A["VP8LMapColor"+y](G,Q,qe,De,he,be,z,H,ve)}}function pt(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>16&255,I[O++]=q>>8&255,I[O++]=q>>0&255}}function Fn(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>16&255,I[O++]=q>>8&255,I[O++]=q>>0&255,I[O++]=q>>24&255}}function Gt(h,m,y,I,O){for(y=m+y;m<y;){var q=(z=h[m++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;I[O++]=q,I[O++]=z}}function qr(h,m,y,I,O){for(y=m+y;m<y;){var q=(z=h[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;I[O++]=q,I[O++]=z}}function tn(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>0&255,I[O++]=q>>8&255,I[O++]=q>>16&255}}function Tn(h,m,y,I,O,q){if(q==0)for(y=m+y;m<y;)xe(I,((q=h[m++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),O+=32;else r(I,O,h,m,y)}function Di(h,m){A[m][0]=A[h+"0"],A[m][1]=A[h+"1"],A[m][2]=A[h+"2"],A[m][3]=A[h+"3"],A[m][4]=A[h+"4"],A[m][5]=A[h+"5"],A[m][6]=A[h+"6"],A[m][7]=A[h+"7"],A[m][8]=A[h+"8"],A[m][9]=A[h+"9"],A[m][10]=A[h+"10"],A[m][11]=A[h+"11"],A[m][12]=A[h+"12"],A[m][13]=A[h+"13"],A[m][14]=A[h+"0"],A[m][15]=A[h+"0"]}function Kt(h){return h==Im||h==Sm||h==jd||h==Pm}function Zi(){this.eb=[],this.size=this.A=this.fb=0}function bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function br(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zi,this.f.kb=new bn,this.sd=null}function vi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function en(h,m){var y=h.T,I=m.ba.f.RGBA,O=I.eb,q=I.fb+h.ka*I.A,z=Ts[m.ba.S],H=h.y,G=h.O,Q=h.f,he=h.N,be=h.ea,Ae=h.W,ve=m.cc,qe=m.dc,De=m.Mc,fe=m.Nc,de=h.ka,Ue=h.ka+h.T,Ge=h.U,je=Ge+1>>1;for(de==0?z(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,O,q,null,null,Ge):(z(m.ec,m.fc,H,G,ve,qe,De,fe,Q,he,be,Ae,O,q-I.A,O,q,Ge),++y);de+2<Ue;de+=2)ve=Q,qe=he,De=be,fe=Ae,he+=h.Rc,Ae+=h.Rc,q+=2*I.A,z(H,(G+=2*h.fa)-h.fa,H,G,ve,qe,De,fe,Q,he,be,Ae,O,q-I.A,O,q,Ge);return G+=h.fa,h.j+Ue<h.o?(r(m.ec,m.fc,H,G,Ge),r(m.cc,m.dc,Q,he,je),r(m.Mc,m.Nc,be,Ae,je),y--):1&Ue||z(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,O,q+I.A,null,null,Ge),y}function Fi(h,m,y){var I=h.F,O=[h.J];if(I!=null){var q=h.U,z=m.ba.S,H=z==Ud||z==jd;m=m.ba.f.RGBA;var G=[0],Q=h.ka;G[0]=h.T,h.Kb&&(Q==0?--G[0]:(--Q,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(G[0]=h.o-h.j-Q));var he=m.eb;Q=m.fb+Q*m.A,h=Ln(I,O[0],h.width,q,G,he,Q+(H?0:3),m.A),e(y==G),h&&Kt(z)&&xs(he,Q,H,q,G,m.A)}return 0}function Yn(h){var m=h.ma,y=m.ba.S,I=11>y,O=y==Bd||y==Vd||y==Ud||y==Am||y==12||Kt(y);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!kh(m.Oa,h,O?11:12))return 0;if(O&&Kt(y)&&Ye(),h.da)alert("todo:use_scaling");else{if(I){if(m.Ib=Nt,h.Kb){if(y=h.U+1>>1,m.memory=s(h.U+2*y),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+y,m.Ib=en,Ye()}}else alert("todo:EmitYUV");O&&(m.Jb=Fi,I&&ge())}if(I&&!i_){for(h=0;256>h;++h)qS[h]=89858*(h-128)+zd>>qd,HS[h]=-22014*(h-128)+zd,WS[h]=-45773*(h-128),zS[h]=113618*(h-128)+zd>>qd;for(h=Vh;h<Cm;++h)m=76283*(h-16)+zd>>qd,$S[h-Vh]=dn(m,255),GS[h-Vh]=dn(m+8>>4,15);i_=1}return 1}function Cr(h){var m=h.ma,y=h.U,I=h.T;return e(!(1&h.ka)),0>=y||0>=I?0:(y=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,y),m.Dc+=y,1)}function _i(h){h.ma.memory=null}function wt(h,m,y,I){return Fe(h,8)!=47?0:(m[0]=Fe(h,14)+1,y[0]=Fe(h,14)+1,I[0]=Fe(h,1),Fe(h,3)!=0?0:!h.h)}function si(h,m){if(4>h)return h+1;var y=h-2>>1;return(2+(1&h)<<y)+Fe(m,y)+1}function gr(h,m){return 120<m?m-120:1<=(y=((y=PS[m-1])>>4)*h+(8-(15&y)))?y:1;var y}function Xn(h,m,y){var I=D(y),O=h[m+=255&I].g-8;return 0<O&&(U(y,y.u+8),I=D(y),m+=h[m].value,m+=I&(1<<O)-1),U(y,y.u+h[m].g),h[m].value}function $n(h,m,y){return y.g+=h.g,y.value+=h.value<<m>>>0,e(8>=y.g),h.g}function jn(h,m,y){var I=h.xc;return e((m=I==0?0:h.vc[h.md*(y>>I)+(m>>I)])<h.Wb),h.Ya[m]}function j(h,m,y,I){var O=h.ab,q=h.c*m,z=h.C;m=z+m;var H=y,G=I;for(I=h.Ta,y=h.Ua;0<O--;){var Q=h.gc[O],he=z,be=m,Ae=H,ve=G,qe=(G=I,H=y,Q.Ea);switch(e(he<be),e(be<=Q.nc),Q.hc){case 2:Cd(Ae,ve,(be-he)*qe,G,H);break;case 0:var De=he,fe=be,de=G,Ue=H,Ge=(vt=Q).Ea;De==0&&(Tm(Ae,ve,null,null,1,de,Ue),It(Ae,ve+1,0,0,Ge-1,de,Ue+1),ve+=Ge,Ue+=Ge,++De);for(var je=1<<vt.b,yt=je-1,ht=_t(Ge,vt.b),Rt=vt.K,vt=vt.w+(De>>vt.b)*ht;De<fe;){var ln=Rt,mn=vt,an=1;for(Lh(Ae,ve,de,Ue-Ge,1,de,Ue);an<Ge;){var Jt=(an&~yt)+je;Jt>Ge&&(Jt=Ge),(0,No[ln[mn++]>>8&15])(Ae,ve+ +an,de,Ue+an-Ge,Jt-an,de,Ue+an),an=Jt}ve+=Ge,Ue+=Ge,++De&yt||(vt+=ht)}be!=Q.nc&&r(G,H-qe,G,H+(be-he-1)*qe,qe);break;case 1:for(qe=Ae,fe=ve,Ge=(Ae=Q.Ea)-(Ue=Ae&~(de=(ve=1<<Q.b)-1)),De=_t(Ae,Q.b),je=Q.K,Q=Q.w+(he>>Q.b)*De;he<be;){for(yt=je,ht=Q,Rt=new ct,vt=fe+Ue,ln=fe+Ae;fe<vt;)Ht(yt[ht++],Rt),Fc(Rt,qe,fe,ve,G,H),fe+=ve,H+=ve;fe<ln&&(Ht(yt[ht++],Rt),Fc(Rt,qe,fe,Ge,G,H),fe+=Ge,H+=Ge),++he&de||(Q+=De)}break;case 3:if(Ae==G&&ve==H&&0<Q.b){for(fe=G,Ae=qe=H+(be-he)*qe-(Ue=(be-he)*_t(Q.Ea,Q.b)),ve=G,de=H,De=[],Ue=(Ge=Ue)-1;0<=Ue;--Ue)De[Ue]=ve[de+Ue];for(Ue=Ge-1;0<=Ue;--Ue)fe[Ae+Ue]=De[Ue];_s(Q,he,be,G,qe,G,H)}else _s(Q,he,be,Ae,ve,G,H)}H=I,G=y}G!=y&&r(I,y,H,G,q)}function ee(h,m){var y=h.V,I=h.Ba+h.c*h.C,O=m-h.C;if(e(m<=h.l.o),e(16>=O),0<O){var q=h.l,z=h.Ta,H=h.Ua,G=q.width;if(j(h,O,y,I),O=H=[H],e((y=h.C)<(I=m)),e(q.v<q.va),I>q.o&&(I=q.o),y<q.j){var Q=q.j-y;y=q.j,O[0]+=Q*G}if(y>=I?y=0:(O[0]+=4*q.v,q.ka=y-q.j,q.U=q.va-q.v,q.T=I-y,y=1),y){if(H=H[0],11>(y=h.ca).S){var he=y.f.RGBA,be=(I=y.S,O=q.U,q=q.T,Q=he.eb,he.A),Ae=q;for(he=he.fb+h.Ma*he.A;0<Ae--;){var ve=z,qe=H,De=O,fe=Q,de=he;switch(I){case Md:Vi(ve,qe,De,fe,de);break;case Bd:xi(ve,qe,De,fe,de);break;case Im:xi(ve,qe,De,fe,de),xs(fe,de,0,De,1,0);break;case Yv:Oa(ve,qe,De,fe,de);break;case Vd:Tn(ve,qe,De,fe,de,1);break;case Sm:Tn(ve,qe,De,fe,de,1),xs(fe,de,0,De,1,0);break;case Ud:Tn(ve,qe,De,fe,de,0);break;case jd:Tn(ve,qe,De,fe,de,0),xs(fe,de,1,De,1,0);break;case Am:ko(ve,qe,De,fe,de);break;case Pm:ko(ve,qe,De,fe,de),Rn(fe,de,De,1,0);break;case Xv:Fa(ve,qe,De,fe,de);break;default:e(0)}H+=G,he+=be}h.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=y.height)}}h.C=m,e(h.C<=h.i)}function Y(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var y=h.Ya[m].G,I=h.Ya[m].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function X(h,m,y,I,O,q){if(h.Z!=0){var z=h.qd,H=h.rd;for(e(Do[h.Z]!=null);m<y;++m)Do[h.Z](z,H,I,O,I,O,q),z=I,H=O,O+=q;h.qd=z,h.rd=H}}function Z(h,m){var y=h.l.ma,I=y.Z==0||y.Z==1?h.l.j:h.C;if(I=h.C<I?I:h.C,e(m<=h.l.o),m>I){var O=h.l.width,q=y.ca,z=y.tb+O*I,H=h.V,G=h.Ba+h.c*I,Q=h.gc;e(h.ab==1),e(Q[0].hc==3),Rd(Q[0],I,m,H,G,q,z),X(y,I,m,q,z,O)}h.C=h.Ma=m}function te(h,m,y,I,O,q,z){var H=h.$/I,G=h.$%I,Q=h.m,he=h.s,be=y+h.$,Ae=be;O=y+I*O;var ve=y+I*q,qe=280+he.ua,De=h.Pb?H:16777216,fe=0<he.ua?he.Wa:null,de=he.wc,Ue=be<ve?jn(he,G,H):null;e(h.C<q),e(ve<=O);var Ge=!1;e:for(;;){for(;Ge||be<ve;){var je=0;if(H>=De){var yt=be-y;e((De=h).Pb),De.wd=De.m,De.xd=yt,0<De.s.ua&&Re(De.s.Wa,De.s.vb),De=H+kS}if(G&de||(Ue=jn(he,G,H)),e(Ue!=null),Ue.Qb&&(m[be]=Ue.qb,Ge=!0),!Ge)if(J(Q),Ue.jc){je=Q,yt=m;var ht=be,Rt=Ue.pd[D(je)&$r-1];e(Ue.jc),256>Rt.g?(U(je,je.u+Rt.g),yt[ht]=Rt.value,je=0):(U(je,je.u+Rt.g-256),e(256<=Rt.value),je=Rt.value),je==0&&(Ge=!0)}else je=Xn(Ue.G[0],Ue.H[0],Q);if(Q.h)break;if(Ge||256>je){if(!Ge)if(Ue.nd)m[be]=(Ue.qb|je<<8)>>>0;else{if(J(Q),Ge=Xn(Ue.G[1],Ue.H[1],Q),J(Q),yt=Xn(Ue.G[2],Ue.H[2],Q),ht=Xn(Ue.G[3],Ue.H[3],Q),Q.h)break;m[be]=(ht<<24|Ge<<16|je<<8|yt)>>>0}if(Ge=!1,++be,++G>=I&&(G=0,++H,z!=null&&H<=q&&!(H%16)&&z(h,H),fe!=null))for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else if(280>je){if(je=si(je-256,Q),yt=Xn(Ue.G[4],Ue.H[4],Q),J(Q),yt=gr(I,yt=si(yt,Q)),Q.h)break;if(be-y<yt||O-be<je)break e;for(ht=0;ht<je;++ht)m[be+ht]=m[be+ht-yt];for(be+=je,G+=je;G>=I;)G-=I,++H,z!=null&&H<=q&&!(H%16)&&z(h,H);if(e(be<=O),G&de&&(Ue=jn(he,G,H)),fe!=null)for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else{if(!(je<qe))break e;for(Ge=je-280,e(fe!=null);Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je;je=be,e(!(Ge>>>(yt=fe).Xa)),m[je]=yt.X[Ge],Ge=!0}Ge||e(Q.h==V(Q))}if(h.Pb&&Q.h&&be<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Re(h.s.vb,h.s.Wa);else{if(Q.h)break e;z!=null&&z(h,H>q?q:H),h.a=0,h.$=be-y}return 1}return h.a=3,0}function ye(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function Ce(){var h=new Gu;return h==null?null:(h.a=0,h.xb=Zv,Di("Predictor","VP8LPredictors"),Di("Predictor","VP8LPredictors_C"),Di("PredictorAdd","VP8LPredictorsAdd"),Di("PredictorAdd","VP8LPredictorsAdd_C"),Cd=kt,Fc=Ct,Vi=pt,xi=Fn,ko=Gt,Fa=qr,Oa=tn,A.VP8LMapColor32b=Qu,A.VP8LMapColor8b=Ld,h)}function we(h,m,y,I,O){var q=1,z=[h],H=[m],G=I.m,Q=I.s,he=null,be=0;e:for(;;){if(y)for(;q&&Fe(G,1);){var Ae=z,ve=H,qe=I,De=1,fe=qe.m,de=qe.gc[qe.ab],Ue=Fe(fe,2);if(qe.Oc&1<<Ue)q=0;else{switch(qe.Oc|=1<<Ue,de.hc=Ue,de.Ea=Ae[0],de.nc=ve[0],de.K=[null],++qe.ab,e(4>=qe.ab),Ue){case 0:case 1:de.b=Fe(fe,3)+2,De=we(_t(de.Ea,de.b),_t(de.nc,de.b),0,qe,de.K),de.K=de.K[0];break;case 3:var Ge,je=Fe(fe,8)+1,yt=16<je?0:4<je?1:2<je?2:3;if(Ae[0]=_t(de.Ea,yt),de.b=yt,Ge=De=we(je,1,0,qe,de.K)){var ht,Rt=je,vt=de,ln=1<<(8>>vt.b),mn=s(ln);if(mn==null)Ge=0;else{var an=vt.K[0],Jt=vt.w;for(mn[0]=vt.K[0][0],ht=1;ht<1*Rt;++ht)mn[ht]=$e(an[Jt+ht],mn[ht-1]);for(;ht<4*ln;++ht)mn[ht]=0;vt.K[0]=null,vt.K[0]=mn,Ge=1}}De=Ge;break;case 2:break;default:e(0)}q=De}}if(z=z[0],H=H[0],q&&Fe(G,1)&&!(q=1<=(be=Fe(G,4))&&11>=be)){I.a=3;break e}var kn;if(kn=q)t:{var In,zt,vr,Ui=I,_r=z,ji=H,gn=be,as=y,os=Ui.m,Rr=Ui.s,Gr=[null],Ti=1,bs=0,sa=NS[gn];n:for(;;){if(as&&Fe(os,1)){var Lr=Fe(os,3)+2,Ua=_t(_r,Lr),Uc=_t(ji,Lr),rl=Ua*Uc;if(!we(Ua,Uc,0,Ui,Gr))break n;for(Gr=Gr[0],Rr.xc=Lr,In=0;In<rl;++In){var Fo=Gr[In]>>8&65535;Gr[In]=Fo,Fo>=Ti&&(Ti=Fo+1)}}if(os.h)break n;for(zt=0;5>zt;++zt){var Qn=Jv[zt];!zt&&0<gn&&(Qn+=1<<gn),bs<Qn&&(bs=Qn)}var Rm=a(Ti*sa,S),o_=Ti,c_=a(o_,ie);if(c_==null)var Hd=null;else e(65536>=o_),Hd=c_;var Uh=s(bs);if(Hd==null||Uh==null||Rm==null){Ui.a=1;break n}var $d=Rm;for(In=vr=0;In<Ti;++In){var Us=Hd[In],il=Us.G,sl=Us.H,u_=0,Gd=1,l_=0;for(zt=0;5>zt;++zt){Qn=Jv[zt],il[zt]=$d,sl[zt]=vr,!zt&&0<gn&&(Qn+=1<<gn);i:{var Kd,Lm=Qn,Yd=Ui,jh=Uh,XS=$d,JS=vr,Dm=0,Oo=Yd.m,QS=Fe(Oo,1);if(i(jh,0,0,Lm),QS){var ZS=Fe(Oo,1)+1,e4=Fe(Oo,1),h_=Fe(Oo,e4==0?1:8);jh[h_]=1,ZS==2&&(jh[h_=Fe(Oo,8)]=1);var Xd=1}else{var f_=s(19),d_=Fe(Oo,4)+4;if(19<d_){Yd.a=3;var Jd=0;break i}for(Kd=0;Kd<d_;++Kd)f_[SS[Kd]]=Fe(Oo,3);var Fm=void 0,qh=void 0,p_=Yd,t4=f_,Qd=Lm,m_=jh,Om=0,Mo=p_.m,g_=8,v_=a(128,S);r:for(;b(v_,0,7,t4,19);){if(Fe(Mo,1)){var n4=2+2*Fe(Mo,3);if((Fm=2+Fe(Mo,n4))>Qd)break r}else Fm=Qd;for(qh=0;qh<Qd&&Fm--;){J(Mo);var __=v_[0+(127&D(Mo))];U(Mo,Mo.u+__.g);var al=__.value;if(16>al)m_[qh++]=al,al!=0&&(g_=al);else{var r4=al==16,y_=al-16,i4=AS[y_],w_=Fe(Mo,bS[y_])+i4;if(qh+w_>Qd)break r;for(var s4=r4?g_:0;0<w_--;)m_[qh++]=s4}}Om=1;break r}Om||(p_.a=3),Xd=Om}(Xd=Xd&&!Oo.h)&&(Dm=b(XS,JS,8,jh,Lm)),Xd&&Dm!=0?Jd=Dm:(Yd.a=3,Jd=0)}if(Jd==0)break n;if(Gd&&IS[zt]==1&&(Gd=$d[vr].g==0),u_+=$d[vr].g,vr+=Jd,3>=zt){var zh,Mm=Uh[0];for(zh=1;zh<Qn;++zh)Uh[zh]>Mm&&(Mm=Uh[zh]);l_+=Mm}}if(Us.nd=Gd,Us.Qb=0,Gd&&(Us.qb=(il[3][sl[3]+0].value<<24|il[1][sl[1]+0].value<<16|il[2][sl[2]+0].value)>>>0,u_==0&&256>il[0][sl[0]+0].value&&(Us.Qb=1,Us.qb+=il[0][sl[0]+0].value<<8)),Us.jc=!Us.Qb&&6>l_,Us.jc){var Zd,ja=Us;for(Zd=0;Zd<$r;++Zd){var Bo=Zd,Vo=ja.pd[Bo],e0=ja.G[0][ja.H[0]+Bo];256<=e0.value?(Vo.g=e0.g+256,Vo.value=e0.value):(Vo.g=0,Vo.value=0,Bo>>=$n(e0,8,Vo),Bo>>=$n(ja.G[1][ja.H[1]+Bo],16,Vo),Bo>>=$n(ja.G[2][ja.H[2]+Bo],0,Vo),$n(ja.G[3][ja.H[3]+Bo],24,Vo))}}}Rr.vc=Gr,Rr.Wb=Ti,Rr.Ya=Hd,Rr.yc=Rm,kn=1;break t}kn=0}if(!(q=kn)){I.a=3;break e}if(0<be){if(Q.ua=1<<be,!at(Q.Wa,be)){I.a=1,q=0;break e}}else Q.ua=0;var Bm=I,x_=z,a4=H,Vm=Bm.s,Um=Vm.xc;if(Bm.c=x_,Bm.i=a4,Vm.md=_t(x_,Um),Vm.wc=Um==0?-1:(1<<Um)-1,y){I.xb=MS;break e}if((he=s(z*H))==null){I.a=1,q=0;break e}q=(q=te(I,he,0,z,H,H,null))&&!G.h;break e}return q?(O!=null?O[0]=he:(e(he==null),e(y)),I.$=0,y||ye(Q)):ye(Q),q}function Te(h,m){var y=h.c*h.i,I=y+m+16*m;return e(h.c<=m),h.V=s(I),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+y+m,1)}function Pe(h,m){var y=h.C,I=m-y,O=h.V,q=h.Ba+h.c*y;for(e(m<=h.l.o);0<I;){var z=16<I?16:I,H=h.l.ma,G=h.l.width,Q=G*z,he=H.ca,be=H.tb+G*y,Ae=h.Ta,ve=h.Ua;j(h,z,O,q),cr(Ae,ve,he,be,Q),X(H,y,y+z,he,be,G),I-=z,O+=z*h.c,y+=z}e(y==m),h.C=h.Ma=m}function Ke(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function et(){this.Yb=function(){var h=[];return function m(y,I,O){for(var q=O[I],z=0;z<q&&(y.push(O.length>I+1?[]:0),!(O.length<I+1));z++)m(y[z],I+1,O)}(h,0,[3,11]),h}()}function lt(){this.jb=s(3),this.Wc=o([4,8],et),this.Xc=o([4,17],et)}function Lt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function nn(){this.ld=this.La=this.dd=this.tc=0}function rn(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function yi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Cs(){this.uc=this.M=this.Nb=0,this.wa=Array(new nn),this.Y=0,this.ya=Array(new yi),this.aa=0,this.l=new ts}function es(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Oi(){this.cb=this.a=0,this.sc="",this.m=new rt,this.Od=new Ke,this.Kc=new it,this.ed=new Lt,this.Qa=new mt,this.Ic=this.$c=this.Aa=0,this.D=new Cs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,rt),this.ia=0,this.pb=a(4,An),this.Pa=new lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new es),this.Hd=0,this.rb=Array(new rn),this.sb=0,this.wa=Array(new nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new yi),this.L=this.aa=0,this.gd=o([4,2],nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function zr(){var h=new Oi;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Bh||(Bh=Uu)),h}function On(h,m,y){return h.a==0&&(h.a=m,h.sc=y,h.cb=0),0}function Tc(h,m,y){return 3<=y&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function bc(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return On(h,2,"null VP8Io passed to VP8GetHeaders()");var y=m.data,I=m.w,O=m.ha;if(4>O)return On(h,7,"Truncated header.");var q=y[I+0]|y[I+1]<<8|y[I+2]<<16,z=h.Od;if(z.Rb=!(1&q),z.td=q>>1&7,z.yd=q>>4&1,z.ub=q>>5,3<z.td)return On(h,3,"Incorrect keyframe parameters.");if(!z.yd)return On(h,4,"Frame not displayable.");I+=3,O-=3;var H=h.Kc;if(z.Rb){if(7>O)return On(h,7,"cannot parse picture header");if(!Tc(y,I,O))return On(h,3,"Bad code word");H.c=16383&(y[I+4]<<8|y[I+3]),H.Td=y[I+4]>>6,H.i=16383&(y[I+6]<<8|y[I+5]),H.Ud=y[I+6]>>6,I+=7,O-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((q=h.Pa).jb,0,255,q.jb.length),e((q=h.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,i(q.Zb,0,0,q.Zb.length),i(q.Lb,0,0,q.Lb)}if(z.ub>O)return On(h,7,"bad partition length");me(q=h.m,y,I,z.ub),I+=z.ub,O-=z.ub,z.Rb&&(H.Ld=le(q),H.Kd=le(q)),H=h.Qa;var G,Q=h.Pa;if(e(q!=null),e(H!=null),H.Cb=le(q),H.Cb){if(H.Bb=le(q),le(q)){for(H.Fb=le(q),G=0;4>G;++G)H.Zb[G]=le(q)?Ne(q,7):0;for(G=0;4>G;++G)H.Lb[G]=le(q)?Ne(q,6):0}if(H.Bb)for(G=0;3>G;++G)Q.jb[G]=le(q)?Ee(q,8):255}else H.Bb=0;if(q.Ka)return On(h,3,"cannot parse segment header");if((H=h.ed).zd=le(q),H.Tb=Ee(q,6),H.wb=Ee(q,3),H.Pc=le(q),H.Pc&&le(q)){for(Q=0;4>Q;++Q)le(q)&&(H.vd[Q]=Ne(q,6));for(Q=0;4>Q;++Q)le(q)&&(H.od[Q]=Ne(q,6))}if(h.L=H.Tb==0?0:H.zd?1:2,q.Ka)return On(h,3,"cannot parse filter header");var he=O;if(O=G=I,I=G+he,H=he,h.Xb=(1<<Ee(h.m,2))-1,he<3*(Q=h.Xb))y=7;else{for(G+=3*Q,H-=3*Q,he=0;he<Q;++he){var be=y[O+0]|y[O+1]<<8|y[O+2]<<16;be>H&&(be=H),me(h.Jc[+he],y,G,be),G+=be,H-=be,O+=3}me(h.Jc[+Q],y,G,H),y=G<I?0:5}if(y!=0)return On(h,y,"cannot parse partitions");for(y=Ee(G=h.m,7),O=le(G)?Ne(G,4):0,I=le(G)?Ne(G,4):0,H=le(G)?Ne(G,4):0,Q=le(G)?Ne(G,4):0,G=le(G)?Ne(G,4):0,he=h.Qa,be=0;4>be;++be){if(he.Cb){var Ae=he.Zb[be];he.Fb||(Ae+=y)}else{if(0<be){h.pb[be]=h.pb[0];continue}Ae=y}var ve=h.pb[be];ve.Sc[0]=Nm[dn(Ae+O,127)],ve.Sc[1]=km[dn(Ae+0,127)],ve.Eb[0]=2*Nm[dn(Ae+I,127)],ve.Eb[1]=101581*km[dn(Ae+H,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=Nm[dn(Ae+Q,117)],ve.Qc[1]=km[dn(Ae+G,127)],ve.lc=Ae+G}if(!z.Rb)return On(h,4,"Not a key frame.");for(le(q),z=h.Pa,y=0;4>y;++y){for(O=0;8>O;++O)for(I=0;3>I;++I)for(H=0;11>H;++H)Q=ue(q,FS[y][O][I][H])?Ee(q,8):LS[y][O][I][H],z.Wc[y][O].Yb[I][H]=Q;for(O=0;17>O;++O)z.Xc[y][O]=z.Wc[y][OS[O]]}return h.kc=le(q),h.kc&&(h.Bd=Ee(q,8)),h.cb=1}function Uu(h,m,y,I,O,q,z){var H=m[O].Yb[y];for(y=0;16>O;++O){if(!ue(h,H[y+0]))return O;for(;!ue(h,H[y+1]);)if(H=m[++O].Yb[0],y=0,O==16)return 16;var G=m[O+1].Yb;if(ue(h,H[y+2])){var Q=h,he=0;if(ue(Q,(Ae=H)[(be=y)+3]))if(ue(Q,Ae[be+6])){for(H=0,be=2*(he=ue(Q,Ae[be+8]))+(Ae=ue(Q,Ae[be+9+he])),he=0,Ae=CS[be];Ae[H];++H)he+=he+ue(Q,Ae[H]);he+=3+(8<<be)}else ue(Q,Ae[be+7])?(he=7+2*ue(Q,165),he+=ue(Q,145)):he=5+ue(Q,159);else he=ue(Q,Ae[be+4])?3+ue(Q,Ae[be+5]):2;H=G[2]}else he=1,H=G[1];G=z+RS[O],0>(Q=h).b&&ae(Q);var be,Ae=Q.b,ve=(be=Q.Ca>>1)-(Q.I>>Ae)>>31;--Q.b,Q.Ca+=ve,Q.Ca|=1,Q.I-=(be+1&ve)<<Ae,q[G]=((he^ve)-ve)*I[(0<O)+0]}return 16}function Ac(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function ju(h,m){if(h==null)return 0;if(m==null)return On(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!bc(h,m))return 0;if(e(h.cb),m.ac==null||m.ac(m)){m.ob&&(h.L=0);var y=Wd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=m.v-y>>4,h.zb=m.j-y>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=m.o+15+y>>4,h.Hb=m.va+15+y>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var I=h.ed;for(y=0;4>y;++y){var O;if(h.Qa.Cb){var q=h.Qa.Lb[y];h.Qa.Fb||(q+=I.Tb)}else q=I.Tb;for(O=0;1>=O;++O){var z=h.gd[y][O],H=q;if(I.Pc&&(H+=I.vd[0],O&&(H+=I.od[0])),0<(H=0>H?0:63<H?63:H)){var G=H;0<I.wb&&(G=4<I.wb?G>>2:G>>1)>9-I.wb&&(G=9-I.wb),1>G&&(G=1),z.dd=G,z.tc=2*H+G,z.ld=40<=H?2:15<=H?1:0}else z.tc=0;z.La=O}}}y=0}else On(h,6,"Frame setup failed"),y=h.a;if(y=y==0){if(y){h.$c=0,0<h.Aa||(h.Ic=YS);e:{y=h.Ic,I=4*(G=h.za);var Q=32*G,he=G+1,be=0<h.L?G*(0<h.Aa?2:1):0,Ae=(h.Aa==2?2:1)*G;if((z=I+832+(O=3*(16*y+Wd[h.L])/2*Q)+(q=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=z)y=0;else{if(z>h.Vb){if(h.Vb=0,h.Ec=s(z),h.Fc=0,h.Ec==null){y=On(h,1,"no memory during frame initialization.");break e}h.Vb=z}z=h.Ec,H=h.Fc,h.Ac=z,h.Bc=H,H+=I,h.Gd=a(Q,es),h.Hd=0,h.rb=a(he+1,rn),h.sb=1,h.wa=be?a(be,nn):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=G),e(!0),h.oc=z,h.pc=H,H+=832,h.ya=a(Ae,yi),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=G),h.R=16*G,h.B=8*G,G=(Q=Wd[h.L])*h.R,Q=Q/2*h.B,h.sa=z,h.ta=H+G,h.qa=h.sa,h.ra=h.ta+16*y*h.R+Q,h.Ha=h.qa,h.Ia=h.ra+8*y*h.B+Q,h.$c=0,H+=O,h.mb=q?z:null,h.nb=q?H:null,e(H+q<=h.Fc+h.Vb),Ac(h),i(h.Ac,h.Bc,0,I),y=1}}if(y){if(m.ka=0,m.y=h.sa,m.O=h.ta,m.f=h.qa,m.N=h.ra,m.ea=h.Ha,m.Vd=h.Ia,m.fa=h.R,m.Rc=h.B,m.F=null,m.J=0,!Fd){for(y=-255;255>=y;++y)Ir[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Ba[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Mh[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)nl[255+y]=0>y?0:255<y?255:y;Fd=1}Zu=ka,Ma=po,Dh=Ic,Ei=pn,ys=Na,or=Pa,el=xo,Dd=Os,Fh=To,Oc=Dc,Mc=Eo,Co=Ra,Bc=bo,tl=ta,Vc=Ca,Ro=is,Oh=Ar,ws=$u,Vs[0]=vs,Vs[1]=Sh,Vs[2]=Zs,Vs[3]=Nh,Vs[4]=Wu,Vs[5]=vo,Vs[6]=ns,Vs[7]=Pc,Vs[8]=yo,Vs[9]=_o,Lo[0]=Qs,Lo[1]=Ph,Lo[2]=Ls,Lo[3]=mo,Lo[4]=Mn,Lo[5]=zu,Lo[6]=Sc,Va[0]=Fs,Va[1]=qu,Va[2]=Hu,Va[3]=Ds,Va[4]=fn,Va[5]=Nc,Va[6]=kc,y=1}else y=0}y&&(y=function(ve,qe){for(ve.M=0;ve.M<ve.Va;++ve.M){var De,fe=ve.Jc[ve.M&ve.Xb],de=ve.m,Ue=ve;for(De=0;De<Ue.za;++De){var Ge=de,je=Ue,yt=je.Ac,ht=je.Bc+4*De,Rt=je.zc,vt=je.ya[je.aa+De];if(je.Qa.Bb?vt.$b=ue(Ge,je.Pa.jb[0])?2+ue(Ge,je.Pa.jb[2]):ue(Ge,je.Pa.jb[1]):vt.$b=0,je.kc&&(vt.Ad=ue(Ge,je.Bd)),vt.Za=!ue(Ge,145)+0,vt.Za){var ln=vt.Ob,mn=0;for(je=0;4>je;++je){var an,Jt=Rt[0+je];for(an=0;4>an;++an){Jt=DS[yt[ht+an]][Jt];for(var kn=Qv[ue(Ge,Jt[0])];0<kn;)kn=Qv[2*kn+ue(Ge,Jt[kn])];Jt=-kn,yt[ht+an]=Jt}r(ln,mn,yt,ht,4),mn+=4,Rt[0+je]=Jt}}else Jt=ue(Ge,156)?ue(Ge,128)?1:3:ue(Ge,163)?2:0,vt.Ob[0]=Jt,i(yt,ht,Jt,4),i(Rt,0,Jt,4);vt.Dd=ue(Ge,142)?ue(Ge,114)?ue(Ge,183)?1:3:2:0}if(Ue.m.Ka)return On(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Ue=fe,Ge=(de=ve).rb[de.sb-1],yt=de.rb[de.sb+de.ja],De=de.ya[de.aa+de.ja],ht=de.kc?De.Ad:0)Ge.la=yt.la=0,De.Za||(Ge.Na=yt.Na=0),De.Hc=0,De.Gc=0,De.ia=0;else{var In,zt;if(Ge=yt,yt=Ue,ht=de.Pa.Xc,Rt=de.ya[de.aa+de.ja],vt=de.pb[Rt.$b],je=Rt.ad,ln=0,mn=de.rb[de.sb-1],Jt=an=0,i(je,ln,0,384),Rt.Za)var vr=0,Ui=ht[3];else{kn=s(16);var _r=Ge.Na+mn.Na;if(_r=Bh(yt,ht[1],_r,vt.Eb,0,kn,0),Ge.Na=mn.Na=(0<_r)+0,1<_r)Zu(kn,0,je,ln);else{var ji=kn[0]+3>>3;for(kn=0;256>kn;kn+=16)je[ln+kn]=ji}vr=1,Ui=ht[0]}var gn=15&Ge.la,as=15&mn.la;for(kn=0;4>kn;++kn){var os=1&as;for(ji=zt=0;4>ji;++ji)gn=gn>>1|(os=(_r=Bh(yt,Ui,_r=os+(1&gn),vt.Sc,vr,je,ln))>vr)<<7,zt=zt<<2|(3<_r?3:1<_r?2:je[ln+0]!=0),ln+=16;gn>>=4,as=as>>1|os<<7,an=(an<<8|zt)>>>0}for(Ui=gn,vr=as>>4,In=0;4>In;In+=2){for(zt=0,gn=Ge.la>>4+In,as=mn.la>>4+In,kn=0;2>kn;++kn){for(os=1&as,ji=0;2>ji;++ji)_r=os+(1&gn),gn=gn>>1|(os=0<(_r=Bh(yt,ht[2],_r,vt.Qc,0,je,ln)))<<3,zt=zt<<2|(3<_r?3:1<_r?2:je[ln+0]!=0),ln+=16;gn>>=2,as=as>>1|os<<5}Jt|=zt<<4*In,Ui|=gn<<4<<In,vr|=(240&as)<<In}Ge.la=Ui,mn.la=vr,Rt.Hc=an,Rt.Gc=Jt,Rt.ia=43690&Jt?0:vt.ia,ht=!(an|Jt)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[De.$b][De.Za],de.wa[de.Y+de.ja].La|=!ht),Ue.Ka)return On(ve,7,"Premature end-of-file encountered.")}if(Ac(ve),de=qe,Ue=1,De=(fe=ve).D,Ge=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(De.M=fe.M,De.uc=Ge,ra(fe,De),Ue=1,De=(zt=fe.D).Nb,Ge=(Jt=Wd[fe.L])*fe.R,yt=Jt/2*fe.B,kn=16*De*fe.R,ji=8*De*fe.B,ht=fe.sa,Rt=fe.ta-Ge+kn,vt=fe.qa,je=fe.ra-yt+ji,ln=fe.Ha,mn=fe.Ia-yt+ji,as=(gn=zt.M)==0,an=gn>=fe.Va-1,fe.Aa==2&&ra(fe,zt),zt.uc)for(os=(_r=fe).D.M,e(_r.D.uc),zt=_r.yb;zt<_r.Hb;++zt){vr=zt,Ui=os;var Rr=(Gr=(Qn=_r).D).Nb;In=Qn.R;var Gr=Gr.wa[Gr.Y+vr],Ti=Qn.sa,bs=Qn.ta+16*Rr*In+16*vr,sa=Gr.dd,Lr=Gr.tc;if(Lr!=0)if(e(3<=Lr),Qn.L==1)0<vr&&Ro(Ti,bs,In,Lr+4),Gr.La&&ws(Ti,bs,In,Lr),0<Ui&&Vc(Ti,bs,In,Lr+4),Gr.La&&Oh(Ti,bs,In,Lr);else{var Ua=Qn.B,Uc=Qn.qa,rl=Qn.ra+8*Rr*Ua+8*vr,Fo=Qn.Ha,Qn=Qn.Ia+8*Rr*Ua+8*vr;Rr=Gr.ld,0<vr&&(Dd(Ti,bs,In,Lr+4,sa,Rr),Oc(Uc,rl,Fo,Qn,Ua,Lr+4,sa,Rr)),Gr.La&&(Co(Ti,bs,In,Lr,sa,Rr),tl(Uc,rl,Fo,Qn,Ua,Lr,sa,Rr)),0<Ui&&(el(Ti,bs,In,Lr+4,sa,Rr),Fh(Uc,rl,Fo,Qn,Ua,Lr+4,sa,Rr)),Gr.La&&(Mc(Ti,bs,In,Lr,sa,Rr),Bc(Uc,rl,Fo,Qn,Ua,Lr,sa,Rr))}}if(fe.ia&&alert("todo:DitherRow"),de.put!=null){if(zt=16*gn,gn=16*(gn+1),as?(de.y=fe.sa,de.O=fe.ta+kn,de.f=fe.qa,de.N=fe.ra+ji,de.ea=fe.Ha,de.W=fe.Ia+ji):(zt-=Jt,de.y=ht,de.O=Rt,de.f=vt,de.N=je,de.ea=ln,de.W=mn),an||(gn-=Jt),gn>de.o&&(gn=de.o),de.F=null,de.J=null,fe.Fa!=null&&0<fe.Fa.length&&zt<gn&&(de.J=Po(fe,de,zt,gn-zt),de.F=fe.mb,de.F==null&&de.F.length==0)){Ue=On(fe,3,"Could not decode alpha data.");break e}zt<de.j&&(Jt=de.j-zt,zt=de.j,e(!(1&Jt)),de.O+=fe.R*Jt,de.N+=fe.B*(Jt>>1),de.W+=fe.B*(Jt>>1),de.F!=null&&(de.J+=de.width*Jt)),zt<gn&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=zt-de.j,de.U=de.va-de.v,de.T=gn-zt,Ue=de.put(de))}De+1!=fe.Ic||an||(r(fe.sa,fe.ta-Ge,ht,Rt+16*fe.R,Ge),r(fe.qa,fe.ra-yt,vt,je+8*fe.B,yt),r(fe.Ha,fe.Ia-yt,ln,mn+8*fe.B,yt))}if(!Ue)return On(ve,6,"Output aborted.")}return 1}(h,m)),m.bc!=null&&m.bc(m),y&=1}return y?(h.cb=0,y):0}function Mi(h,m,y,I,O){O=h[m+y+32*I]+(O>>3),h[m+y+32*I]=-256&O?0>O?0:255:O}function fo(h,m,y,I,O,q){Mi(h,m,0,y,I+O),Mi(h,m,1,y,I+q),Mi(h,m,2,y,I-q),Mi(h,m,3,y,I-O)}function Jn(h){return(20091*h>>16)+h}function wi(h,m,y,I){var O,q=0,z=s(16);for(O=0;4>O;++O){var H=h[m+0]+h[m+8],G=h[m+0]-h[m+8],Q=(35468*h[m+4]>>16)-Jn(h[m+12]),he=Jn(h[m+4])+(35468*h[m+12]>>16);z[q+0]=H+he,z[q+1]=G+Q,z[q+2]=G-Q,z[q+3]=H-he,q+=4,m++}for(O=q=0;4>O;++O)H=(h=z[q+0]+4)+z[q+8],G=h-z[q+8],Q=(35468*z[q+4]>>16)-Jn(z[q+12]),Mi(y,I,0,0,H+(he=Jn(z[q+4])+(35468*z[q+12]>>16))),Mi(y,I,1,0,G+Q),Mi(y,I,2,0,G-Q),Mi(y,I,3,0,H-he),q++,I+=32}function Pa(h,m,y,I){var O=h[m+0]+4,q=35468*h[m+4]>>16,z=Jn(h[m+4]),H=35468*h[m+1]>>16;fo(y,I,0,O+z,h=Jn(h[m+1]),H),fo(y,I,1,O+q,h,H),fo(y,I,2,O-q,h,H),fo(y,I,3,O-z,h,H)}function po(h,m,y,I,O){wi(h,m,y,I),O&&wi(h,m+16,y,I+4)}function Ic(h,m,y,I){Ma(h,m+0,y,I,1),Ma(h,m+32,y,I+128,1)}function pn(h,m,y,I){var O;for(h=h[m+0]+4,O=0;4>O;++O)for(m=0;4>m;++m)Mi(y,I,m,O,h)}function Na(h,m,y,I){h[m+0]&&Ei(h,m+0,y,I),h[m+16]&&Ei(h,m+16,y,I+4),h[m+32]&&Ei(h,m+32,y,I+128),h[m+48]&&Ei(h,m+48,y,I+128+4)}function ka(h,m,y,I){var O,q=s(16);for(O=0;4>O;++O){var z=h[m+0+O]+h[m+12+O],H=h[m+4+O]+h[m+8+O],G=h[m+4+O]-h[m+8+O],Q=h[m+0+O]-h[m+12+O];q[0+O]=z+H,q[8+O]=z-H,q[4+O]=Q+G,q[12+O]=Q-G}for(O=0;4>O;++O)z=(h=q[0+4*O]+3)+q[3+4*O],H=q[1+4*O]+q[2+4*O],G=q[1+4*O]-q[2+4*O],Q=h-q[3+4*O],y[I+0]=z+H>>3,y[I+16]=Q+G>>3,y[I+32]=z-H>>3,y[I+48]=Q-G>>3,I+=64}function Rs(h,m,y){var I,O=m-32,q=ss,z=255-h[O-1];for(I=0;I<y;++I){var H,G=q,Q=z+h[m-1];for(H=0;H<y;++H)h[m+H]=G[Q+h[O+H]];m+=32}}function Sh(h,m){Rs(h,m,4)}function qu(h,m){Rs(h,m,8)}function Ph(h,m){Rs(h,m,16)}function Ls(h,m){var y;for(y=0;16>y;++y)r(h,m+32*y,h,m-32,16)}function mo(h,m){var y;for(y=16;0<y;--y)i(h,m,h[m-1],16),m+=32}function go(h,m,y){var I;for(I=0;16>I;++I)i(m,y+32*I,h,16)}function Qs(h,m){var y,I=16;for(y=0;16>y;++y)I+=h[m-1+32*y]+h[m+y-32];go(I>>5,h,m)}function Mn(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m-1+32*y];go(I>>4,h,m)}function zu(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m+y-32];go(I>>4,h,m)}function Sc(h,m){go(128,h,m)}function Mt(h,m,y){return h+2*m+y+2>>2}function Zs(h,m){var y,I=m-32;for(I=new Uint8Array([Mt(h[I-1],h[I+0],h[I+1]),Mt(h[I+0],h[I+1],h[I+2]),Mt(h[I+1],h[I+2],h[I+3]),Mt(h[I+2],h[I+3],h[I+4])]),y=0;4>y;++y)r(h,m+32*y,I,0,I.length)}function Nh(h,m){var y=h[m-1],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96];xe(h,m+0,16843009*Mt(h[m-1-32],y,I)),xe(h,m+32,16843009*Mt(y,I,O)),xe(h,m+64,16843009*Mt(I,O,q)),xe(h,m+96,16843009*Mt(O,q,q))}function vs(h,m){var y,I=4;for(y=0;4>y;++y)I+=h[m+y-32]+h[m-1+32*y];for(I>>=3,y=0;4>y;++y)i(h,m+32*y,I,4)}function Wu(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1-32],z=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+96]=Mt(I,O,h[m-1+96]),h[m+1+96]=h[m+0+64]=Mt(y,I,O),h[m+2+96]=h[m+1+64]=h[m+0+32]=Mt(q,y,I),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Mt(z,q,y),h[m+3+64]=h[m+2+32]=h[m+1+0]=Mt(H,z,q),h[m+3+32]=h[m+2+0]=Mt(G,H,z),h[m+3+0]=Mt(Q,G,H)}function ns(h,m){var y=h[m+1-32],I=h[m+2-32],O=h[m+3-32],q=h[m+4-32],z=h[m+5-32],H=h[m+6-32],G=h[m+7-32];h[m+0+0]=Mt(h[m+0-32],y,I),h[m+1+0]=h[m+0+32]=Mt(y,I,O),h[m+2+0]=h[m+1+32]=h[m+0+64]=Mt(I,O,q),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Mt(O,q,z),h[m+3+32]=h[m+2+64]=h[m+1+96]=Mt(q,z,H),h[m+3+64]=h[m+2+96]=Mt(z,H,G),h[m+3+96]=Mt(H,G,G)}function vo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1-32],z=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+0]=h[m+1+64]=q+z+1>>1,h[m+1+0]=h[m+2+64]=z+H+1>>1,h[m+2+0]=h[m+3+64]=H+G+1>>1,h[m+3+0]=G+Q+1>>1,h[m+0+96]=Mt(O,I,y),h[m+0+64]=Mt(I,y,q),h[m+0+32]=h[m+1+96]=Mt(y,q,z),h[m+1+32]=h[m+2+96]=Mt(q,z,H),h[m+2+32]=h[m+3+96]=Mt(z,H,G),h[m+3+32]=Mt(H,G,Q)}function Pc(h,m){var y=h[m+0-32],I=h[m+1-32],O=h[m+2-32],q=h[m+3-32],z=h[m+4-32],H=h[m+5-32],G=h[m+6-32],Q=h[m+7-32];h[m+0+0]=y+I+1>>1,h[m+1+0]=h[m+0+64]=I+O+1>>1,h[m+2+0]=h[m+1+64]=O+q+1>>1,h[m+3+0]=h[m+2+64]=q+z+1>>1,h[m+0+32]=Mt(y,I,O),h[m+1+32]=h[m+0+96]=Mt(I,O,q),h[m+2+32]=h[m+1+96]=Mt(O,q,z),h[m+3+32]=h[m+2+96]=Mt(q,z,H),h[m+3+64]=Mt(z,H,G),h[m+3+96]=Mt(H,G,Q)}function _o(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96];h[m+0+0]=y+I+1>>1,h[m+2+0]=h[m+0+32]=I+O+1>>1,h[m+2+32]=h[m+0+64]=O+q+1>>1,h[m+1+0]=Mt(y,I,O),h[m+3+0]=h[m+1+32]=Mt(I,O,q),h[m+3+32]=h[m+1+64]=Mt(O,q,q),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=q}function yo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96],z=h[m-1-32],H=h[m+0-32],G=h[m+1-32],Q=h[m+2-32];h[m+0+0]=h[m+2+32]=y+z+1>>1,h[m+0+32]=h[m+2+64]=I+y+1>>1,h[m+0+64]=h[m+2+96]=O+I+1>>1,h[m+0+96]=q+O+1>>1,h[m+3+0]=Mt(H,G,Q),h[m+2+0]=Mt(z,H,G),h[m+1+0]=h[m+3+32]=Mt(y,z,H),h[m+1+32]=h[m+3+64]=Mt(I,y,z),h[m+1+64]=h[m+3+96]=Mt(O,I,y),h[m+1+96]=Mt(q,O,I)}function Hu(h,m){var y;for(y=0;8>y;++y)r(h,m+32*y,h,m-32,8)}function Ds(h,m){var y;for(y=0;8>y;++y)i(h,m,h[m-1],8),m+=32}function rs(h,m,y){var I;for(I=0;8>I;++I)i(m,y+32*I,h,8)}function Fs(h,m){var y,I=8;for(y=0;8>y;++y)I+=h[m+y-32]+h[m-1+32*y];rs(I>>4,h,m)}function Nc(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m+y-32];rs(I>>3,h,m)}function fn(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m-1+32*y];rs(I>>3,h,m)}function kc(h,m){rs(128,h,m)}function wo(h,m,y){var I=h[m-y],O=h[m+0],q=3*(O-I)+bm[1020+h[m-2*y]-h[m+y]],z=Od[112+(q+4>>3)];h[m-y]=ss[255+I+Od[112+(q+3>>3)]],h[m+0]=ss[255+O-z]}function Cc(h,m,y,I){var O=h[m+0],q=h[m+y];return Es[255+h[m-2*y]-h[m-y]]>I||Es[255+q-O]>I}function Rc(h,m,y,I){return 4*Es[255+h[m-y]-h[m+0]]+Es[255+h[m-2*y]-h[m+y]]<=I}function Lc(h,m,y,I,O){var q=h[m-3*y],z=h[m-2*y],H=h[m-y],G=h[m+0],Q=h[m+y],he=h[m+2*y],be=h[m+3*y];return 4*Es[255+H-G]+Es[255+z-Q]>I?0:Es[255+h[m-4*y]-q]<=O&&Es[255+q-z]<=O&&Es[255+z-H]<=O&&Es[255+be-he]<=O&&Es[255+he-Q]<=O&&Es[255+Q-G]<=O}function Ca(h,m,y,I){var O=2*I+1;for(I=0;16>I;++I)Rc(h,m+I,y,O)&&wo(h,m+I,y)}function is(h,m,y,I){var O=2*I+1;for(I=0;16>I;++I)Rc(h,m+I*y,1,O)&&wo(h,m+I*y,1)}function Ar(h,m,y,I){var O;for(O=3;0<O;--O)Ca(h,m+=4*y,y,I)}function $u(h,m,y,I){var O;for(O=3;0<O;--O)is(h,m+=4,y,I)}function ea(h,m,y,I,O,q,z,H){for(q=2*q+1;0<O--;){if(Lc(h,m,y,q,z))if(Cc(h,m,y,H))wo(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-2*he],Ae=G[Q-he],ve=G[Q+0],qe=G[Q+he],De=G[Q+2*he],fe=27*(Ue=bm[1020+3*(ve-Ae)+bm[1020+be-qe]])+63>>7,de=18*Ue+63>>7,Ue=9*Ue+63>>7;G[Q-3*he]=ss[255+G[Q-3*he]+Ue],G[Q-2*he]=ss[255+be+de],G[Q-he]=ss[255+Ae+fe],G[Q+0]=ss[255+ve-fe],G[Q+he]=ss[255+qe-de],G[Q+2*he]=ss[255+De-Ue]}m+=I}}function Wr(h,m,y,I,O,q,z,H){for(q=2*q+1;0<O--;){if(Lc(h,m,y,q,z))if(Cc(h,m,y,H))wo(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-he],Ae=G[Q+0],ve=G[Q+he],qe=Od[112+((De=3*(Ae-be))+4>>3)],De=Od[112+(De+3>>3)],fe=qe+1>>1;G[Q-2*he]=ss[255+G[Q-2*he]+fe],G[Q-he]=ss[255+be+De],G[Q+0]=ss[255+Ae-qe],G[Q+he]=ss[255+ve-fe]}m+=I}}function xo(h,m,y,I,O,q){ea(h,m,y,1,16,I,O,q)}function Os(h,m,y,I,O,q){ea(h,m,1,y,16,I,O,q)}function Eo(h,m,y,I,O,q){var z;for(z=3;0<z;--z)Wr(h,m+=4*y,y,1,16,I,O,q)}function Ra(h,m,y,I,O,q){var z;for(z=3;0<z;--z)Wr(h,m+=4,1,y,16,I,O,q)}function To(h,m,y,I,O,q,z,H){ea(h,m,O,1,8,q,z,H),ea(y,I,O,1,8,q,z,H)}function Dc(h,m,y,I,O,q,z,H){ea(h,m,1,O,8,q,z,H),ea(y,I,1,O,8,q,z,H)}function bo(h,m,y,I,O,q,z,H){Wr(h,m+4*O,O,1,8,q,z,H),Wr(y,I+4*O,O,1,8,q,z,H)}function ta(h,m,y,I,O,q,z,H){Wr(h,m+4,1,O,8,q,z,H),Wr(y,I+4,1,O,8,q,z,H)}function La(){this.ba=new br,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ao(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Da(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Io(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new S}function Gu(){this.xb=this.a=0,this.l=new ts,this.ca=new br,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Io,this.ab=0,this.gc=a(4,Da),this.Oc=0}function Ms(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function na(h,m,y,I,O,q,z){for(h=h==null?0:h[m+0],m=0;m<z;++m)O[q+m]=h+y[I+m]&255,h=O[q+m]}function So(h,m,y,I,O,q,z){var H;if(h==null)na(null,null,y,I,O,q,z);else for(H=0;H<z;++H)O[q+H]=h[m+H]+y[I+H]&255}function ai(h,m,y,I,O,q,z){if(h==null)na(null,null,y,I,O,q,z);else{var H,G=h[m+0],Q=G,he=G;for(H=0;H<z;++H)Q=he+(G=h[m+H])-Q,he=y[I+H]+(-256&Q?0>Q?0:255:Q)&255,Q=G,O[q+H]=he}}function Po(h,m,y,I){var O=m.width,q=m.o;if(e(h!=null&&m!=null),0>y||0>=I||y+I>q)return null;if(!h.Cc){if(h.ga==null){var z;if(h.ga=new Ms,(z=h.ga==null)||(z=m.width*m.o,e(h.Gb.length==0),h.Gb=s(z),h.Uc=0,h.Gb==null?z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,z=1),z=!z),!z){z=h.ga;var H=h.Fa,G=h.P,Q=h.qc,he=h.mb,be=h.nb,Ae=G+1,ve=Q-1,qe=z.l;if(e(H!=null&&he!=null&&m!=null),Do[0]=null,Do[1]=na,Do[2]=So,Do[3]=ai,z.ca=he,z.tb=be,z.c=m.width,z.i=m.height,e(0<z.c&&0<z.i),1>=Q)m=0;else if(z.$a=H[G+0]>>0&3,z.Z=H[G+0]>>2&3,z.Lc=H[G+0]>>4&3,G=H[G+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||G)m=0;else if(qe.put=Cr,qe.ac=Yn,qe.bc=_i,qe.ma=z,qe.width=m.width,qe.height=m.height,qe.Da=m.Da,qe.v=m.v,qe.va=m.va,qe.j=m.j,qe.o=m.o,z.$a)e:{e(z.$a==1),m=Ce();t:for(;;){if(m==null){m=0;break e}if(e(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,_e(m.m,H,Ae,ve),!we(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Y(m.s)?(z.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=Te(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=ve>=z.c*z.i;z=!m}if(z)return null;h.ga.Lc!=1?h.Ga=0:I=q-y}e(h.ga!=null),e(y+I<=q);e:{if(m=(H=h.ga).c,q=H.l.o,H.$a==0){if(Ae=h.rc,ve=h.Vc,qe=h.Fa,G=h.P+1+y*m,Q=h.mb,he=h.nb+y*m,e(G<=h.P+h.qc),H.Z!=0)for(e(Do[H.Z]!=null),z=0;z<I;++z)Do[H.Z](Ae,ve,qe,G,Q,he,m),Ae=Q,ve=he,he+=m,G+=m;else for(z=0;z<I;++z)r(Q,he,qe,G,m),Ae=Q,ve=he,he+=m,G+=m;h.rc=Ae,h.Vc=ve}else{if(e(H.mc!=null),m=y+I,e((z=H.mc)!=null),e(m<=z.i),z.C>=m)m=1;else if(H.ic||ge(),H.ic){H=z.V,Ae=z.Ba,ve=z.c;var De=z.i,fe=(qe=1,G=z.$/ve,Q=z.$%ve,he=z.m,be=z.s,z.$),de=ve*De,Ue=ve*m,Ge=be.wc,je=fe<Ue?jn(be,Q,G):null;e(fe<=de),e(m<=De),e(Y(be));t:for(;;){for(;!he.h&&fe<Ue;){if(Q&Ge||(je=jn(be,Q,G)),e(je!=null),J(he),256>(De=Xn(je.G[0],je.H[0],he)))H[Ae+fe]=De,++fe,++Q>=ve&&(Q=0,++G<=m&&!(G%16)&&Z(z,G));else{if(!(280>De)){qe=0;break t}De=si(De-256,he);var yt,ht=Xn(je.G[4],je.H[4],he);if(J(he),!(fe>=(ht=gr(ve,ht=si(ht,he)))&&de-fe>=De)){qe=0;break t}for(yt=0;yt<De;++yt)H[Ae+fe+yt]=H[Ae+fe+yt-ht];for(fe+=De,Q+=De;Q>=ve;)Q-=ve,++G<=m&&!(G%16)&&Z(z,G);fe<Ue&&Q&Ge&&(je=jn(be,Q,G))}e(he.h==V(he))}Z(z,G>m?m:G);break t}!qe||he.h&&fe<de?(qe=0,z.a=he.h?5:3):z.$=fe,m=qe}else m=te(z,z.V,z.Ba,z.c,z.i,m,Pe);if(!m){I=0;break e}}y+I>=q&&(h.Cc=1),I=1}if(!I)return null;if(h.Cc&&((I=h.ga)!=null&&(I.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+y*O}function v(h,m,y,I,O,q){for(;0<O--;){var z,H=h,G=m+(y?1:0),Q=h,he=m+(y?0:3);for(z=0;z<I;++z){var be=Q[he+4*z];be!=255&&(be*=32897,H[G+4*z+0]=H[G+4*z+0]*be>>23,H[G+4*z+1]=H[G+4*z+1]*be>>23,H[G+4*z+2]=H[G+4*z+2]*be>>23)}m+=q}}function F(h,m,y,I,O){for(;0<I--;){var q;for(q=0;q<y;++q){var z=h[m+2*q+0],H=15&(Q=h[m+2*q+1]),G=4369*H,Q=(240&Q|Q>>4)*G>>16;h[m+2*q+0]=(240&z|z>>4)*G>>16&240|(15&z|z<<4)*G>>16>>4&15,h[m+2*q+1]=240&Q|H}m+=O}}function ne(h,m,y,I,O,q,z,H){var G,Q,he=255;for(Q=0;Q<O;++Q){for(G=0;G<I;++G){var be=h[m+G];q[z+4*G]=be,he&=be}m+=y,z+=H}return he!=255}function ce(h,m,y,I,O){var q;for(q=0;q<O;++q)y[I+q]=h[m+q]>>8}function ge(){xs=v,Rn=F,Ln=ne,cr=ce}function Oe(h,m,y){A[h]=function(I,O,q,z,H,G,Q,he,be,Ae,ve,qe,De,fe,de,Ue,Ge){var je,yt=Ge-1>>1,ht=H[G+0]|Q[he+0]<<16,Rt=be[Ae+0]|ve[qe+0]<<16;e(I!=null);var vt=3*ht+Rt+131074>>2;for(m(I[O+0],255&vt,vt>>16,De,fe),q!=null&&(vt=3*Rt+ht+131074>>2,m(q[z+0],255&vt,vt>>16,de,Ue)),je=1;je<=yt;++je){var ln=H[G+je]|Q[he+je]<<16,mn=be[Ae+je]|ve[qe+je]<<16,an=ht+ln+Rt+mn+524296,Jt=an+2*(ln+Rt)>>3;vt=Jt+ht>>1,ht=(an=an+2*(ht+mn)>>3)+ln>>1,m(I[O+2*je-1],255&vt,vt>>16,De,fe+(2*je-1)*y),m(I[O+2*je-0],255&ht,ht>>16,De,fe+(2*je-0)*y),q!=null&&(vt=an+Rt>>1,ht=Jt+mn>>1,m(q[z+2*je-1],255&vt,vt>>16,de,Ue+(2*je-1)*y),m(q[z+2*je+0],255&ht,ht>>16,de,Ue+(2*je+0)*y)),ht=ln,Rt=mn}1&Ge||(vt=3*ht+Rt+131074>>2,m(I[O+Ge-1],255&vt,vt>>16,De,fe+(Ge-1)*y),q!=null&&(vt=3*Rt+ht+131074>>2,m(q[z+Ge-1],255&vt,vt>>16,de,Ue+(Ge-1)*y)))}}function Ye(){Ts[Md]=BS,Ts[Bd]=e_,Ts[Yv]=VS,Ts[Vd]=t_,Ts[Ud]=n_,Ts[Am]=r_,Ts[Xv]=US,Ts[Im]=e_,Ts[Sm]=t_,Ts[jd]=n_,Ts[Pm]=r_}function dt(h){return h&-16384?0>h?0:255:h>>jS}function f(h,m){return dt((19077*h>>8)+(26149*m>>8)-14234)}function w(h,m,y){return dt((19077*h>>8)-(6419*m>>8)-(13320*y>>8)+8708)}function k(h,m){return dt((19077*h>>8)+(33050*m>>8)-17685)}function W(h,m,y,I,O){I[O+0]=f(h,y),I[O+1]=w(h,m,y),I[O+2]=k(h,m)}function pe(h,m,y,I,O){I[O+0]=k(h,m),I[O+1]=w(h,m,y),I[O+2]=f(h,y)}function Ie(h,m,y,I,O){var q=w(h,m,y);m=q<<3&224|k(h,m)>>3,I[O+0]=248&f(h,y)|q>>5,I[O+1]=m}function Qe(h,m,y,I,O){var q=240&k(h,m)|15;I[O+0]=240&f(h,y)|w(h,m,y)>>4,I[O+1]=q}function Bt(h,m,y,I,O){I[O+0]=255,W(h,m,y,I,O+1)}function Xt(h,m,y,I,O){pe(h,m,y,I,O),I[O+3]=255}function Vt(h,m,y,I,O){W(h,m,y,I,O),I[O+3]=255}function dn(h,m){return 0>h?0:h>m?m:h}function Nn(h,m,y){A[h]=function(I,O,q,z,H,G,Q,he,be){for(var Ae=he+(-2&be)*y;he!=Ae;)m(I[O+0],q[z+0],H[G+0],Q,he),m(I[O+1],q[z+0],H[G+0],Q,he+y),O+=2,++z,++G,he+=2*y;1&be&&m(I[O+0],q[z+0],H[G+0],Q,he)}}function Bs(h,m,y){return y==0?h==0?m==0?6:5:m==0?4:0:y}function Hr(h,m,y,I,O){switch(h>>>30){case 3:Ma(m,y,I,O,0);break;case 2:or(m,y,I,O);break;case 1:Ei(m,y,I,O)}}function ra(h,m){var y,I,O=m.M,q=m.Nb,z=h.oc,H=h.pc+40,G=h.oc,Q=h.pc+584,he=h.oc,be=h.pc+600;for(y=0;16>y;++y)z[H+32*y-1]=129;for(y=0;8>y;++y)G[Q+32*y-1]=129,he[be+32*y-1]=129;for(0<O?z[H-1-32]=G[Q-1-32]=he[be-1-32]=129:(i(z,H-32-1,127,21),i(G,Q-32-1,127,9),i(he,be-32-1,127,9)),I=0;I<h.za;++I){var Ae=m.ya[m.aa+I];if(0<I){for(y=-1;16>y;++y)r(z,H+32*y-4,z,H+32*y+12,4);for(y=-1;8>y;++y)r(G,Q+32*y-4,G,Q+32*y+4,4),r(he,be+32*y-4,he,be+32*y+4,4)}var ve=h.Gd,qe=h.Hd+I,De=Ae.ad,fe=Ae.Hc;if(0<O&&(r(z,H-32,ve[qe].y,0,16),r(G,Q-32,ve[qe].f,0,8),r(he,be-32,ve[qe].ea,0,8)),Ae.Za){var de=z,Ue=H-32+16;for(0<O&&(I>=h.za-1?i(de,Ue,ve[qe].y[15],4):r(de,Ue,ve[qe+1].y,0,4)),y=0;4>y;y++)de[Ue+128+y]=de[Ue+256+y]=de[Ue+384+y]=de[Ue+0+y];for(y=0;16>y;++y,fe<<=2)de=z,Ue=H+s_[y],Vs[Ae.Ob[y]](de,Ue),Hr(fe,De,16*+y,de,Ue)}else if(de=Bs(I,O,Ae.Ob[0]),Lo[de](z,H),fe!=0)for(y=0;16>y;++y,fe<<=2)Hr(fe,De,16*+y,z,H+s_[y]);for(y=Ae.Gc,de=Bs(I,O,Ae.Dd),Va[de](G,Q),Va[de](he,be),fe=De,de=G,Ue=Q,255&(Ae=y>>0)&&(170&Ae?Dh(fe,256,de,Ue):ys(fe,256,de,Ue)),Ae=he,fe=be,255&(y>>=8)&&(170&y?Dh(De,320,Ae,fe):ys(De,320,Ae,fe)),O<h.Ub-1&&(r(ve[qe].y,0,z,H+480,16),r(ve[qe].f,0,G,Q+224,8),r(ve[qe].ea,0,he,be+224,8)),y=8*q*h.B,ve=h.sa,qe=h.ta+16*I+16*q*h.R,De=h.qa,Ae=h.ra+8*I+y,fe=h.Ha,de=h.Ia+8*I+y,y=0;16>y;++y)r(ve,qe+y*h.R,z,H+32*y,16);for(y=0;8>y;++y)r(De,Ae+y*h.B,G,Q+32*y,8),r(fe,de+y*h.B,he,be+32*y,8)}}function ia(h,m,y,I,O,q,z,H,G){var Q=[0],he=[0],be=0,Ae=G!=null?G.kd:0,ve=G??new Ao;if(h==null||12>y)return 7;ve.data=h,ve.w=m,ve.ha=y,m=[m],y=[y],ve.gb=[ve.gb];e:{var qe=m,De=y,fe=ve.gb;if(e(h!=null),e(De!=null),e(fe!=null),fe[0]=0,12<=De[0]&&!t(h,qe[0],"RIFF")){if(t(h,qe[0]+8,"WEBP")){fe=3;break e}var de=Ze(h,qe[0]+4);if(12>de||4294967286<de){fe=3;break e}if(Ae&&de>De[0]-8){fe=7;break e}fe[0]=de,qe[0]+=12,De[0]-=12}fe=0}if(fe!=0)return fe;for(de=0<ve.gb[0],y=y[0];;){e:{var Ue=h;De=m,fe=y;var Ge=Q,je=he,yt=qe=[0];if((vt=be=[be])[0]=0,8>fe[0])fe=7;else{if(!t(Ue,De[0],"VP8X")){if(Ze(Ue,De[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var ht=Ze(Ue,De[0]+8),Rt=1+ze(Ue,De[0]+12);if(2147483648<=Rt*(Ue=1+ze(Ue,De[0]+15))){fe=3;break e}yt!=null&&(yt[0]=ht),Ge!=null&&(Ge[0]=Rt),je!=null&&(je[0]=Ue),De[0]+=18,fe[0]-=18,vt[0]=1}fe=0}}if(be=be[0],qe=qe[0],fe!=0)return fe;if(De=!!(2&qe),!de&&be)return 3;if(q!=null&&(q[0]=!!(16&qe)),z!=null&&(z[0]=De),H!=null&&(H[0]=0),z=Q[0],qe=he[0],be&&De&&G==null){fe=0;break}if(4>y){fe=7;break}if(de&&be||!de&&!be&&!t(h,m[0],"ALPH")){y=[y],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{ht=h,fe=m,de=y;var vt=ve.gb;Ge=ve.na,je=ve.P,yt=ve.Sa,Rt=22,e(ht!=null),e(de!=null),Ue=fe[0];var ln=de[0];for(e(Ge!=null),e(yt!=null),Ge[0]=null,je[0]=null,yt[0]=0;;){if(fe[0]=Ue,de[0]=ln,8>ln){fe=7;break e}var mn=Ze(ht,Ue+4);if(4294967286<mn){fe=3;break e}var an=8+mn+1&-2;if(Rt+=an,0<vt&&Rt>vt){fe=3;break e}if(!t(ht,Ue,"VP8 ")||!t(ht,Ue,"VP8L")){fe=0;break e}if(ln[0]<an){fe=7;break e}t(ht,Ue,"ALPH")||(Ge[0]=ht,je[0]=Ue+8,yt[0]=mn),Ue+=an,ln-=an}}if(y=y[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],fe!=0)break}y=[y],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(vt=h,fe=m,de=y,Ge=ve.gb[0],je=ve.Ja,yt=ve.xa,ht=fe[0],Ue=!t(vt,ht,"VP8 "),Rt=!t(vt,ht,"VP8L"),e(vt!=null),e(de!=null),e(je!=null),e(yt!=null),8>de[0])fe=7;else{if(Ue||Rt){if(vt=Ze(vt,ht+4),12<=Ge&&vt>Ge-12){fe=3;break e}if(Ae&&vt>de[0]-8){fe=7;break e}je[0]=vt,fe[0]+=8,de[0]-=8,yt[0]=Rt}else yt[0]=5<=de[0]&&vt[ht+0]==47&&!(vt[ht+4]>>5),je[0]=de[0];fe=0}if(y=y[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],m=m[0],fe!=0)break;if(4294967286<ve.Ja)return 3;if(H==null||De||(H[0]=ve.xa?2:1),z=[z],qe=[qe],ve.xa){if(5>y){fe=7;break}H=z,Ae=qe,De=q,h==null||5>y?h=0:5<=y&&h[m+0]==47&&!(h[m+4]>>5)?(de=[0],vt=[0],Ge=[0],_e(je=new T,h,m,y),wt(je,de,vt,Ge)?(H!=null&&(H[0]=de[0]),Ae!=null&&(Ae[0]=vt[0]),De!=null&&(De[0]=Ge[0]),h=1):h=0):h=0}else{if(10>y){fe=7;break}H=qe,h==null||10>y||!Tc(h,m+3,y-3)?h=0:(Ae=h[m+0]|h[m+1]<<8|h[m+2]<<16,De=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&Ae||3<(Ae>>1&7)||!(Ae>>4&1)||Ae>>5>=ve.Ja||!De||!h?h=0:(z&&(z[0]=De),H&&(H[0]=h),h=1))}if(!h||(z=z[0],qe=qe[0],be&&(Q[0]!=z||he[0]!=qe)))return 3;G!=null&&(G[0]=ve,G.offset=m-G.w,e(4294967286>m-G.w),e(G.offset==G.ha-y));break}return fe==0||fe==7&&be&&G==null?(q!=null&&(q[0]|=ve.na!=null&&0<ve.na.length),I!=null&&(I[0]=z),O!=null&&(O[0]=qe),0):fe}function kh(h,m,y){var I=m.width,O=m.height,q=0,z=0,H=I,G=O;if(m.Da=h!=null&&0<h.Da,m.Da&&(H=h.cd,G=h.bd,q=h.v,z=h.j,11>y||(q&=-2,z&=-2),0>q||0>z||0>=H||0>=G||q+H>I||z+G>O))return 0;if(m.v=q,m.j=z,m.va=q+H,m.o=z+G,m.U=H,m.T=G,m.da=h!=null&&0<h.da,m.da){if(!We(H,G,y=[h.ib],q=[h.hb]))return 0;m.ib=y[0],m.hb=q[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*I/4&&m.hb<3*O/4,m.Kb=0),1}function Ch(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function Ku(h,m,y,I){if(I==null||0>=h||0>=m)return 2;if(y!=null){if(y.Da){var O=y.cd,q=y.bd,z=-2&y.v,H=-2&y.j;if(0>z||0>H||0>=O||0>=q||z+O>h||H+q>m)return 2;h=O,m=q}if(y.da){if(!We(h,m,O=[y.ib],q=[y.hb]))return 2;h=O[0],m=q[0]}}I.width=h,I.height=m;e:{var G=I.width,Q=I.height;if(h=I.S,0>=G||0>=Q||!(h>=Md&&13>h))h=2;else{if(0>=I.Rd&&I.sd==null){z=q=O=m=0;var he=(H=G*a_[h])*Q;if(11>h||(q=(Q+1)/2*(m=(G+1)/2),h==12&&(z=(O=G)*Q)),(Q=s(he+2*q+z))==null){h=1;break e}I.sd=Q,11>h?((G=I.f.RGBA).eb=Q,G.fb=0,G.A=H,G.size=he):((G=I.f.kb).y=Q,G.O=0,G.fa=H,G.Fd=he,G.f=Q,G.N=0+he,G.Ab=m,G.Cd=q,G.ea=Q,G.W=0+he+q,G.Db=m,G.Ed=q,h==12&&(G.F=Q,G.J=0+he+2*q),G.Tc=z,G.lb=O)}if(m=1,O=I.S,q=I.width,z=I.height,O>=Md&&13>O)if(11>O)h=I.f.RGBA,m&=(H=Math.abs(h.A))*(z-1)+q<=h.size,m&=H>=q*a_[O],m&=h.eb!=null;else{h=I.f.kb,H=(q+1)/2,he=(z+1)/2,G=Math.abs(h.fa),Q=Math.abs(h.Ab);var be=Math.abs(h.Db),Ae=Math.abs(h.lb),ve=Ae*(z-1)+q;m&=G*(z-1)+q<=h.Fd,m&=Q*(he-1)+H<=h.Cd,m=(m&=be*(he-1)+H<=h.Ed)&G>=q&Q>=H&be>=H,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,O==12&&(m&=Ae>=q,m&=ve<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||y!=null&&y.fd&&(h=Ch(I)),h}var $r=64,Yu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Xu=24,Ju=32,Rh=8,Bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(h){return h},A.Predictor2=function(h,m,y){return m[y+0]},A.Predictor3=function(h,m,y){return m[y+1]},A.Predictor4=function(h,m,y){return m[y-1]},A.Predictor5=function(h,m,y){return ut(ut(h,m[y+1]),m[y+0])},A.Predictor6=function(h,m,y){return ut(h,m[y-1])},A.Predictor7=function(h,m,y){return ut(h,m[y+0])},A.Predictor8=function(h,m,y){return ut(m[y-1],m[y+0])},A.Predictor9=function(h,m,y){return ut(m[y+0],m[y+1])},A.Predictor10=function(h,m,y){return ut(ut(h,m[y-1]),ut(m[y+0],m[y+1]))},A.Predictor11=function(h,m,y){var I=m[y+0];return 0>=Ft(I>>24&255,h>>24&255,(m=m[y-1])>>24&255)+Ft(I>>16&255,h>>16&255,m>>16&255)+Ft(I>>8&255,h>>8&255,m>>8&255)+Ft(255&I,255&h,255&m)?I:h},A.Predictor12=function(h,m,y){var I=m[y+0];return(Tt((h>>24&255)+(I>>24&255)-((m=m[y-1])>>24&255))<<24|Tt((h>>16&255)+(I>>16&255)-(m>>16&255))<<16|Tt((h>>8&255)+(I>>8&255)-(m>>8&255))<<8|Tt((255&h)+(255&I)-(255&m)))>>>0},A.Predictor13=function(h,m,y){var I=m[y-1];return(At((h=ut(h,m[y+0]))>>24&255,I>>24&255)<<24|At(h>>16&255,I>>16&255)<<16|At(h>>8&255,I>>8&255)<<8|At(h>>0&255,I>>0&255))>>>0};var Tm=A.PredictorAdd0;A.PredictorAdd1=It,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Lh=A.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Cd,_s=A.ColorIndexInverseTransform,Qu=A.MapARGB,Rd=A.VP8LColorIndexInverseTransformAlpha,Ld=A.MapAlpha,No=A.VP8LPredictorsAdd=[];No.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Fc,Vi,xi,ko,Fa,Oa,Zu,Ma,or,Dh,Ei,ys,el,Dd,Fh,Oc,Mc,Co,Bc,tl,Vc,Ro,Oh,ws,xs,Rn,Ln,cr,Ir=s(511),Ba=s(2041),Mh=s(225),nl=s(767),Fd=0,bm=Ba,Od=Mh,ss=nl,Es=Ir,Md=0,Bd=1,Yv=2,Vd=3,Ud=4,Am=5,Xv=6,Im=7,Sm=8,jd=9,Pm=10,bS=[2,3,7],AS=[3,3,11],Jv=[280,256,256,256,40],IS=[0,1,1,1,0],SS=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],PS=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],NS=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],kS=8,Nm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],km=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bh=null,CS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],RS=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Qv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],LS=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],DS=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],FS=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],OS=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Lo=[],Vs=[],Va=[],MS=1,Zv=2,Do=[],Ts=[];Oe("UpsampleRgbLinePair",W,3),Oe("UpsampleBgrLinePair",pe,3),Oe("UpsampleRgbaLinePair",Vt,4),Oe("UpsampleBgraLinePair",Xt,4),Oe("UpsampleArgbLinePair",Bt,4),Oe("UpsampleRgba4444LinePair",Qe,2),Oe("UpsampleRgb565LinePair",Ie,2);var BS=A.UpsampleRgbLinePair,VS=A.UpsampleBgrLinePair,e_=A.UpsampleRgbaLinePair,t_=A.UpsampleBgraLinePair,n_=A.UpsampleArgbLinePair,r_=A.UpsampleRgba4444LinePair,US=A.UpsampleRgb565LinePair,qd=16,zd=1<<qd-1,Vh=-227,Cm=482,jS=6,i_=0,qS=s(256),zS=s(256),WS=s(256),HS=s(256),$S=s(Cm-Vh),GS=s(Cm-Vh);Nn("YuvToRgbRow",W,3),Nn("YuvToBgrRow",pe,3),Nn("YuvToRgbaRow",Vt,4),Nn("YuvToBgraRow",Xt,4),Nn("YuvToArgbRow",Bt,4),Nn("YuvToRgba4444Row",Qe,2),Nn("YuvToRgb565Row",Ie,2);var s_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wd=[0,2,8],KS=[8,7,6,4,4,2,2,2,1,1,1,1],YS=1;this.WebPDecodeRGBA=function(h,m,y,I,O){var q=Bd,z=new La,H=new br;z.ba=H,H.S=q,H.width=[H.width],H.height=[H.height];var G=H.width,Q=H.height,he=new vi;if(he==null||h==null)var be=2;else e(he!=null),be=ia(h,m,y,he.width,he.height,he.Pd,he.Qd,he.format,null);if(be!=0?G=0:(G!=null&&(G[0]=he.width[0]),Q!=null&&(Q[0]=he.height[0]),G=1),G){H.width=H.width[0],H.height=H.height[0],I!=null&&(I[0]=H.width),O!=null&&(O[0]=H.height);e:{if(I=new ts,(O=new Ao).data=h,O.w=m,O.ha=y,O.kd=1,m=[0],e(O!=null),((h=ia(O.data,O.w,O.ha,null,null,null,m,null,O))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(z!=null),I.data=O.data,I.w=O.w+O.offset,I.ha=O.ha-O.offset,I.put=Cr,I.ac=Yn,I.bc=_i,I.ma=z,O.xa){if((h=Ce())==null){z=1;break e}if(function(Ae,ve){var qe=[0],De=[0],fe=[0];t:for(;;){if(Ae==null)return 0;if(ve==null)return Ae.a=2,0;if(Ae.l=ve,Ae.a=0,_e(Ae.m,ve.data,ve.w,ve.ha),!wt(Ae.m,qe,De,fe)){Ae.a=3;break t}if(Ae.xb=Zv,ve.width=qe[0],ve.height=De[0],!we(qe[0],De[0],1,Ae,null))break t;return 1}return e(Ae.a!=0),0}(h,I)){if(I=(m=Ku(I.width,I.height,z.Oa,z.ba))==0){t:{I=h;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((y=I.l)!=null),e((O=y.ma)!=null),I.xb!=0){if(I.ca=O.ba,I.tb=O.tb,e(I.ca!=null),!kh(O.Oa,y,Vd)){I.a=2;break n}if(!Te(I,y.width)||y.da)break n;if((y.da||Kt(I.ca.S))&&ge(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ge()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!at(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!te(I,I.V,I.Ba,I.c,I.i,y.o,ee))break n;O.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(m=h.a)}else m=h.a}else{if((h=new zr)==null){z=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,bc(h,I)){if((m=Ku(I.width,I.height,z.Oa,z.ba))==0){if(h.Aa=0,y=z.Oa,e((O=h)!=null),y!=null){if(0<(G=0>(G=y.Md)?0:100<G?255:255*G/100)){for(Q=he=0;4>Q;++Q)12>(be=O.pb[Q]).lc&&(be.ia=G*KS[0>be.lc?0:be.lc]>>3),he|=be.ia;he&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=y.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}ju(h,I)||(m=h.a)}}else m=h.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=Ch(z.ba))}z=m}q=z!=0?null:11>q?H.f.RGBA.eb:H.f.kb.y}else q=null;return q};var a_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,C){for(var B="",b=0;b<4;b++)B+=String.fromCharCode(A[C++]);return B}function l(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16)>>>0}function d(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16|A[C+3]<<24)>>>0}new c;var g=[0],p=[0],x=[],_=new c,E=n,P=function(A,C){var B={},b=0,S=!1,R=0,ie=0;if(B.frames=[],!function(D,V,U,J){for(var ae=0;ae<J;ae++)if(D[V+ae]!=U.charCodeAt(ae))return!0;return!1}(A,C,"RIFF",4)){var me,Ee;for(d(A,C+=4),C+=8;C<A.length;){var Ne=u(A,C),_e=d(A,C+=4);C+=4;var ke=_e+(1&_e);switch(Ne){case"VP8 ":case"VP8L":B.frames[b]===void 0&&(B.frames[b]={}),(T=B.frames[b]).src_off=S?ie:C-8,T.src_size=R+_e+8,b++,S&&(S=!1,R=0,ie=0);break;case"VP8X":(T=B.header={}).feature_flags=A[C];var Fe=C+4;T.canvas_width=1+l(A,Fe),Fe+=3,T.canvas_height=1+l(A,Fe),Fe+=3;break;case"ALPH":S=!0,R=ke+8,ie=C-8;break;case"ANIM":(T=B.header).bgcolor=d(A,C),Fe=C+4,T.loop_count=(me=A)[(Ee=Fe)+0]<<0|me[Ee+1]<<8,Fe+=2;break;case"ANMF":var rt,T;(T=B.frames[b]={}).offset_x=2*l(A,C),C+=3,T.offset_y=2*l(A,C),C+=3,T.width=1+l(A,C),C+=3,T.height=1+l(A,C),C+=3,T.duration=l(A,C),C+=3,rt=A[C++],T.dispose=1&rt,T.blend=rt>>1&1}Ne!="ANMF"&&(C+=ke)}return B}}(E,0);P.response=E,P.rgbaoutput=!0,P.dataurl=!1;var L=P.header?P.header:null,M=P.frames?P.frames:null;if(L){L.loop_counter=L.loop_count,g=[L.canvas_height],p=[L.canvas_width];for(var K=0;K<M.length&&M[K].blend!=0;K++);}var se=M[0],oe=_.WebPDecodeRGBA(E,se.src_off,se.src_size,p,g);se.rgba=oe,se.imgwidth=p[0],se.imgheight=g[0];for(var N=0;N<p[0]*g[0]*4;N++)x[N]=oe[N];return this.width=p,this.height=g,this.data=x,this}(function(n){var e=function(){return typeof E1=="function"},t=function(g,p,x,_){var E=4,P=a;switch(_){case n.image_compression.FAST:E=1,P=s;break;case n.image_compression.MEDIUM:E=6,P=o;break;case n.image_compression.SLOW:E=9,P=c}g=r(g,p,x,P);var L=E1(g,{level:E});return n.__addimage__.arrayBufferToBinaryString(L)},r=function(g,p,x,_){for(var E,P,L,M=g.length/p,K=new Uint8Array(g.length+M),se=l(),oe=0;oe<M;oe+=1){if(L=oe*p,E=g.subarray(L,L+p),_)K.set(_(E,x,P),L+oe);else{for(var N,A=se.length,C=[];N<A;N+=1)C[N]=se[N](E,x,P);var B=d(C.concat());K.set(C[B],L+oe)}P=E}return K},i=function(g){var p=Array.apply([],g);return p.unshift(0),p},s=function(g,p){var x,_=[],E=g.length;_[0]=1;for(var P=0;P<E;P+=1)x=g[P-p]||0,_[P+1]=g[P]-x+256&255;return _},a=function(g,p,x){var _,E=[],P=g.length;E[0]=2;for(var L=0;L<P;L+=1)_=x&&x[L]||0,E[L+1]=g[L]-_+256&255;return E},o=function(g,p,x){var _,E,P=[],L=g.length;P[0]=3;for(var M=0;M<L;M+=1)_=g[M-p]||0,E=x&&x[M]||0,P[M+1]=g[M]+256-(_+E>>>1)&255;return P},c=function(g,p,x){var _,E,P,L,M=[],K=g.length;M[0]=4;for(var se=0;se<K;se+=1)_=g[se-p]||0,E=x&&x[se]||0,P=x&&x[se-p]||0,L=u(_,E,P),M[se+1]=g[se]-L+256&255;return M},u=function(g,p,x){if(g===p&&p===x)return g;var _=Math.abs(p-x),E=Math.abs(g-x),P=Math.abs(g+p-x-x);return _<=E&&_<=P?g:E<=P?p:x},l=function(){return[i,s,a,o,c]},d=function(g){var p=g.map(function(x){return x.reduce(function(_,E){return _+Math.abs(E)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(g,p,x,_){var E,P,L,M,K,se,oe,N,A,C,B,b,S,R,ie,me=this.decode.FLATE_DECODE,Ee="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(L=new EW(g)).imgData,P=L.bits,E=L.colorSpace,K=L.colors,[4,6].indexOf(L.colorType)!==-1){if(L.bits===8){A=(N=L.pixelBitlength==32?new Uint32Array(L.decodePixels().buffer):L.pixelBitlength==16?new Uint16Array(L.decodePixels().buffer):new Uint8Array(L.decodePixels().buffer)).length,B=new Uint8Array(A*L.colors),C=new Uint8Array(A);var Ne,_e=L.pixelBitlength-L.bits;for(R=0,ie=0;R<A;R++){for(S=N[R],Ne=0;Ne<_e;)B[ie++]=S>>>Ne&255,Ne+=L.bits;C[R]=S>>>Ne&255}}if(L.bits===16){A=(N=new Uint32Array(L.decodePixels().buffer)).length,B=new Uint8Array(A*(32/L.pixelBitlength)*L.colors),C=new Uint8Array(A*(32/L.pixelBitlength)),b=L.colors>1,R=0,ie=0;for(var ke=0;R<A;)S=N[R++],B[ie++]=S>>>0&255,b&&(B[ie++]=S>>>16&255,S=N[R++],B[ie++]=S>>>0&255),C[ke++]=S>>>16&255;P=8}_!==n.image_compression.NONE&&e()?(g=t(B,L.width*L.colors,L.colors,_),oe=t(C,L.width,1,_)):(g=B,oe=C,me=void 0)}if(L.colorType===3&&(E=this.color_spaces.INDEXED,se=L.palette,L.transparency.indexed)){var Fe=L.transparency.indexed,rt=0;for(R=0,A=Fe.length;R<A;++R)rt+=Fe[R];if((rt/=255)===A-1&&Fe.indexOf(0)!==-1)M=[Fe.indexOf(0)];else if(rt!==A){for(N=L.decodePixels(),C=new Uint8Array(N.length),R=0,A=N.length;R<A;R++)C[R]=Fe[N[R]];oe=t(C,L.width,1)}}var T=function(D){var V;switch(D){case n.image_compression.FAST:V=11;break;case n.image_compression.MEDIUM:V=13;break;case n.image_compression.SLOW:V=14;break;default:V=12}return V}(_);return me===this.decode.FLATE_DECODE&&(Ee="/Predictor "+T+" "),Ee+="/Colors "+K+" /BitsPerComponent "+P+" /Columns "+L.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(oe&&this.__addimage__.isArrayBuffer(oe)||this.__addimage__.isArrayBufferView(oe))&&(oe=this.__addimage__.arrayBufferToBinaryString(oe)),{alias:x,data:g,index:p,filter:me,decodeParameters:Ee,transparency:M,palette:se,sMask:oe,predictor:T,width:L.width,height:L.height,bitsPerComponent:P,colorSpace:E}}}})(Dt.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new TW(e),a=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},l=new Pg(100).encode(u,100);return n.processJPEG.call(this,l,t,r,i)},n.processGIF87A=n.processGIF89A}(Dt.API),Ws.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ws.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Cn.log("bit decode error:"+t)}},Ws.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Ws.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ws.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Ws.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,l=r*this.width*4+4*i;this.data[l]=c,this.data[l+1]=o,this.data[l+2]=a,this.data[l+3]=u}this.pos+=n}},Ws.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,l=i*this.width*4+4*s;this.data[l]=u,this.data[l+1]=c,this.data[l+2]=o,this.data[l+3]=255}this.pos+=n}},Ws.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Ws.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Ws.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Ws(e,!1),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Pg(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(Dt.API),M5.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new M5(e),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Pg(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(Dt.API),Dt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var l=r[u],d=r[u+1],g=r[u+2],p=r[u+3];s[o++]=l,s[o++]=d,s[o++]=g,a[c++]=p}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Dt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},vl=Dt.API,w0=vl.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,l=u.fof?u.fof:1,d=e.doKerning!==!1,g=0,p=n.length,x=0,_=o[0]||c,E=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(g=d&&xn(u[r])==="object"&&!isNaN(parseInt(u[r][x],10))?u[r][x]/l:0,E.push((o[r]||_)/c+g)),x=r;return E},L5=vl.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return vl.processArabic&&(n=vl.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:w0.apply(this,arguments).reduce(function(s,a){return s+a},0)},D5=function(n,e,t,r){for(var i=[],s=0,a=n.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(n.slice(0,s));var c=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(n.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},F5=function(n,e,t){t||(t={});var r,i,s,a,o,c,u,l=[],d=[l],g=t.textIndent||0,p=0,x=0,_=n.split(" "),E=w0.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),L=[];_.map(function(K){(K=K.split(/\s*\n/)).length>1?L=L.concat(K.map(function(se,oe){return(oe&&se.length?`
`:"")+se})):L.push(K[0])}),_=L,c=L5.apply(this,[P,t])}for(s=0,a=_.length;s<a;s++){var M=0;if(r=_[s],c&&r[0]==`
`&&(r=r.substr(1),M=1),g+p+(x=(i=w0.apply(this,[r,t])).reduce(function(K,se){return K+se},0))>e||M){if(x>e){for(o=D5.apply(this,[r,i,e-(g+p),e]),l.push(o.shift()),l=[o.pop()];o.length;)d.push([o.shift()]);x=i.slice(r.length-(l[0]?l[0].length:0)).reduce(function(K,se){return K+se},0)}else l=[r];d.push(l),g=x+c,p=E}else l.push(r),g+=p+x,p=E}return u=c?function(K,se){return(se?P:"")+K.join(" ")}:function(K){return K.join(" ")},d.map(u)},vl.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(l){if(l.widths&&l.kerning)return{widths:l.widths,kerning:l.kerning};var d=this.internal.getFont(l.fontName,l.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=r.length;o<c;o++)u=u.concat(F5.apply(this,[r[o],a,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},a=n.__fontmetrics__.compress=function(d){var g,p,x,_,E=["{"];for(var P in d){if(g=d[P],isNaN(parseInt(P,10))?p="'"+P+"'":(P=parseInt(P,10),p=(p=s(P).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof g=="number")g<0?(x=s(g).slice(3),_="-"):(x=s(g).slice(2),_=""),x=_+x.slice(0,-1)+r[x.slice(-1)];else{if(xn(g)!=="object")throw new Error("Don't know what to do with value type "+xn(g)+".");x=a(g)}E.push(p+x)}return E.push("}"),E.join("")},o=n.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,x,_,E={},P=1,L=E,M=[],K="",se="",oe=d.length-1,N=1;N<oe;N+=1)(_=d[N])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(M.push([L,x]),L={},x=void 0):_=="}"?((p=M.pop())[0][p[1]]=L,x=void 0,L=p[0]):_=="-"?P=-1:x===void 0?t.hasOwnProperty(_)?(K+=t[_],x=parseInt(K,16)*P,P=1,K=""):K+=_:t.hasOwnProperty(_)?(se+=t[_],L[x]=parseInt(se,16)*P,P=1,x=void 0,se=""):se+=_;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},l={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(d){var g=d.font,p=l.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var x=u.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(Dt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Af(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Dt),function(n){function e(){return(Ot.canvg?Promise.resolve(Ot.canvg):v1(()=>import("./index.es-uAmx4b0l.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Dt.API.addSvgAsImage=function(t,r,i,s,a,o,c,u){if(isNaN(r)||isNaN(i))throw Cn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Cn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=s,l.height=a;var d=l.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,l.width,l.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(x){return x.fromString(d,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),r,i,s,a,c,u)})}}(),Dt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Dt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,l=0,d=0;function g(x,_){var E,P=!1;for(E=0;E<x.length;E+=1)x[E]===_&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=o.length;for(d=0;d<p;d+=1)t[o[d]].value=t[o[d]].defaultValue,t[o[d]].explicitSet=!1}if(xn(n)==="object"){for(i in n)if(s=n[i],g(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&g(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(l=0;l<s[u].length;l+=1)typeof s[u][l]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,_=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?_.push("/"+x+" /"+t[x].value):_.push("/"+x+" "+t[x].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],l=[""],d=0,g=s.length;d<g;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return l.join("");o=o.toString(16),l.push(u[4-o.length],o)}return l.join("")},r=function(s){var a,o,c,u,l,d,g;for(l=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,g=(o=Object.keys(s).sort(function(p,x){return p-x})).length;d<g;d++)a=o[d],c.length>=100&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),l+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",x=0;x<g.length;x++)p+=String.fromCharCode(g[x]);var _=u();l({data:p,addLength1:!0,objectId:_}),c("endobj");var E=u();l({data:r(o.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var P=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Al(o.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var L=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Al(o.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+n.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+Al(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+L+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,g="",p=0;p<d.length;p++)g+=String.fromCharCode(d[p]);var x=u();l({data:g,addLength1:!0,objectId:x}),c("endobj");var _=u();l({data:r(o.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var E=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Al(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var P=0;P<o.metadata.hmtx.widths.length;P++)o.metadata.hmtx.widths[P]=parseInt(o.metadata.hmtx.widths[P]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Al(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",c=s.x,u=s.y,l=s.options||{},d=s.mutex||{},g=d.pdfEscape,p=d.activeFontKey,x=d.fonts,_=p,E="",P=0,L="",M=x[_].encoding;if(x[_].encoding!=="Identity-H")return{text:o,x:c,y:u,options:l,mutex:d};for(L=o,_=p,Array.isArray(o)&&(L=o[0]),P=0;P<L.length;P+=1)x[_].metadata.hasOwnProperty("cmap")&&(a=x[_].metadata.cmap.unicode.codeMap[L[P].charCodeAt(0)]),a||L[P].charCodeAt(0)<256&&x[_].metadata.hasOwnProperty("Unicode")?E+=L[P]:E+="";var K="";return parseInt(_.slice(1))<14||M==="WinAnsiEncoding"?K=g(E,_).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(K=t(E,x[_])),d.isHex=!0,{text:K,x:c,y:u,options:l,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},c,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Dt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,o,c,u,l,d=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,M=0;this.__bidiEngine__={};var K=function(b){var S=b.charCodeAt(),R=S>>8,ie=_[R];return ie!==void 0?d[256*ie+(255&S)]:R===252||R===253?"AL":P.test(R)?"L":R===8?"R":"N"},se=function(b){for(var S,R=0;R<b.length;R++){if((S=K(b.charAt(R)))==="L")return!1;if(S==="R")return!0}return!1},oe=function(b,S,R,ie){var me,Ee,Ne,_e,ke=S[ie];switch(ke){case"L":case"R":L=!1;break;case"N":case"AN":break;case"EN":L&&(ke="AN");break;case"AL":L=!0,ke="R";break;case"WS":ke="N";break;case"CS":ie<1||ie+1>=S.length||(me=R[ie-1])!=="EN"&&me!=="AN"||(Ee=S[ie+1])!=="EN"&&Ee!=="AN"?ke="N":L&&(Ee="AN"),ke=Ee===me?Ee:"N";break;case"ES":ke=(me=ie>0?R[ie-1]:"B")==="EN"&&ie+1<S.length&&S[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&R[ie-1]==="EN"){ke="EN";break}if(L){ke="N";break}for(Ne=ie+1,_e=S.length;Ne<_e&&S[Ne]==="ET";)Ne++;ke=Ne<_e&&S[Ne]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(_e=S.length,Ne=ie+1;Ne<_e&&S[Ne]==="NSM";)Ne++;if(Ne<_e){var Fe=b[ie],rt=Fe>=1425&&Fe<=2303||Fe===64286;if(me=S[Ne],rt&&(me==="R"||me==="AL")){ke="R";break}}}ke=ie<1||(me=S[ie-1])==="B"?"N":R[ie-1];break;case"B":L=!1,i=!0,ke=M;break;case"S":s=!0,ke="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"BN":ke="N"}return ke},N=function(b,S,R){var ie=b.split("");return R&&A(ie,R,{hiLevel:M}),ie.reverse(),S&&S.reverse(),ie.join("")},A=function(b,S,R){var ie,me,Ee,Ne,_e,ke=-1,Fe=b.length,rt=0,T=[],D=M?p:g,V=[];for(L=!1,i=!1,s=!1,me=0;me<Fe;me++)V[me]=K(b[me]);for(Ee=0;Ee<Fe;Ee++){if(_e=rt,T[Ee]=oe(b,V,T,Ee),ie=240&(rt=D[_e][x[T[Ee]]]),rt&=15,S[Ee]=Ne=D[rt][5],ie>0)if(ie===16){for(me=ke;me<Ee;me++)S[me]=1;ke=-1}else ke=-1;if(D[rt][6])ke===-1&&(ke=Ee);else if(ke>-1){for(me=ke;me<Ee;me++)S[me]=Ne;ke=-1}V[Ee]==="B"&&(S[Ee]=0),R.hiLevel|=Ne}s&&function(U,J,ae){for(var le=0;le<ae;le++)if(U[le]==="S"){J[le]=M;for(var ue=le-1;ue>=0&&U[ue]==="WS";ue--)J[ue]=M}}(V,S,Fe)},C=function(b,S,R,ie,me){if(!(me.hiLevel<b)){if(b===1&&M===1&&!i)return S.reverse(),void(R&&R.reverse());for(var Ee,Ne,_e,ke,Fe=S.length,rt=0;rt<Fe;){if(ie[rt]>=b){for(_e=rt+1;_e<Fe&&ie[_e]>=b;)_e++;for(ke=rt,Ne=_e-1;ke<Ne;ke++,Ne--)Ee=S[ke],S[ke]=S[Ne],S[Ne]=Ee,R&&(Ee=R[ke],R[ke]=R[Ne],R[Ne]=Ee);rt=_e}rt++}}},B=function(b,S,R){var ie=b.split(""),me={hiLevel:M};return R||(R=[]),A(ie,R,me),function(Ee,Ne,_e){if(_e.hiLevel!==0&&l)for(var ke,Fe=0;Fe<Ee.length;Fe++)Ne[Fe]===1&&(ke=E.indexOf(Ee[Fe]))>=0&&(Ee[Fe]=E[ke+1])}(ie,R,me),C(2,ie,S,R,me),C(1,ie,S,R,me),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,R){if(function(me,Ee){if(Ee)for(var Ne=0;Ne<me.length;Ne++)Ee[Ne]=Ne;o===void 0&&(o=se(me)),u===void 0&&(u=se(me))}(b,S),a||!c||u)if(a&&c&&o^u)M=o?1:0,b=N(b,S,R);else if(!a&&c&&u)M=o?1:0,b=B(b,S,R),b=N(b,S);else if(!a||o||c||u){if(a&&!c&&o^u)b=N(b,S),o?(M=0,b=B(b,S,R)):(M=1,b=B(b,S,R),b=N(b,S));else if(a&&o&&!c&&u)M=1,b=B(b,S,R),b=N(b,S);else if(!a&&!c&&o^u){var ie=l;o?(M=1,b=B(b,S,R),M=0,l=!1,b=B(b,S,R),l=ie):(M=0,b=B(b,S,R),b=N(b,S),M=1,l=!1,b=B(b,S,R),l=ie,b=N(b,S))}}else M=0,b=B(b,S,R);else M=o?1:0,b=B(b,S,R);return b},this.__bidiEngine__.setOptions=function(b){b&&(a=b.isInputVisual,c=b.isOutputVisual,o=b.isInputRtl,u=b.isOutputRtl,l=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new mc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new BW(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new bW(this.contents),this.head=new IW(this),this.name=new CW(this),this.cmap=new ES(this),this.toUnicode={},this.hhea=new SW(this),this.maxp=new RW(this),this.hmtx=new LW(this),this.post=new NW(this),this.os2=new PW(this),this.loca=new MW(this),this.glyf=new DW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Js,mc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,o,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),bW=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,o,c,u,l,d,g,p,x,_;for(_ in p=Object.keys(t).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),a=Math.floor(d/c),l=16*p-d,(i=new mc).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(a),i.writeShort(l),s=16*p,u=i.pos+s,o=null,x=[],t)for(g=t[_],i.writeString(_),i.writeInt(n(g)),i.writeInt(u),i.writeInt(g.length),x=x.concat(g),_==="head"&&(o=u),u+=g.length;u%4;)x.push(0),u++;return i.write(x),r=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=TS.call(t);t.length%4;)t.push(0);for(s=new mc(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),AW={}.hasOwnProperty,Sa=function(n,e){for(var t in e)AW.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Js=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var IW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new mc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),B5=function(){function n(e,t){var r,i,s,a,o,c,u,l,d,g,p,x,_,E,P,L,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,s=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),e.pos+=2,_=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),u=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),l=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),i=(this.length-e.pos+this.offset)/2,o=function(){var K,se;for(se=[],c=K=0;0<=i?K<i:K>i;c=0<=i?++K:--K)se.push(e.readUInt16());return se}(),c=P=0,M=s.length;P<M;c=++P)for(E=s[c],r=L=x=_[c];x<=E?L<=E:L>=E;r=x<=E?++L:--L)l[c]===0?a=r+u[c]:(a=o[l[c]/2+(r-x)-(g-c)]||0)!==0&&(a+=u[c]),this.codeMap[r]=65535&a}e.pos=d}return n.encode=function(e,t){var r,i,s,a,o,c,u,l,d,g,p,x,_,E,P,L,M,K,se,oe,N,A,C,B,b,S,R,ie,me,Ee,Ne,_e,ke,Fe,rt,T,D,V,U,J,ae,le,ue,xe,Ve,ze;switch(ie=new mc,a=Object.keys(e).sort(function(Ze,at){return Ze-at}),t){case"macroman":for(_=0,E=function(){var Ze=[];for(x=0;x<256;++x)Ze.push(0);return Ze}(),L={0:0},s={},me=0,ke=a.length;me<ke;me++)L[ue=e[i=a[me]]]==null&&(L[ue]=++_),s[i]={old:e[i],new:L[e[i]]},E[i]=L[e[i]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(E),{charMap:s,subtable:ie.data,maxGlyphID:_+1};case"unicode":for(S=[],d=[],M=0,L={},r={},P=u=null,Ee=0,Fe=a.length;Ee<Fe;Ee++)L[se=e[i=a[Ee]]]==null&&(L[se]=++M),r[i]={old:se,new:L[se]},o=L[se]-i,P!=null&&o===u||(P&&d.push(P),S.push(i),u=o),P=i;for(P&&d.push(P),d.push(65535),S.push(65535),B=2*(C=S.length),A=2*Math.pow(Math.log(C)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,N=2*C-A,c=[],oe=[],p=[],x=Ne=0,rt=S.length;Ne<rt;x=++Ne){if(b=S[x],l=d[x],b===65535){c.push(0),oe.push(0);break}if(b-(R=r[b].new)>=32768)for(c.push(0),oe.push(2*(p.length+C-x)),i=_e=b;b<=l?_e<=l:_e>=l;i=b<=l?++_e:--_e)p.push(r[i].new);else c.push(R-b),oe.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*C+2*p.length),ie.writeUInt16(0),ie.writeUInt16(B),ie.writeUInt16(A),ie.writeUInt16(g),ie.writeUInt16(N),ae=0,T=d.length;ae<T;ae++)i=d[ae],ie.writeUInt16(i);for(ie.writeUInt16(0),le=0,D=S.length;le<D;le++)i=S[le],ie.writeUInt16(i);for(xe=0,V=c.length;xe<V;xe++)o=c[xe],ie.writeUInt16(o);for(Ve=0,U=oe.length;Ve<U;Ve++)K=oe[Ve],ie.writeUInt16(K);for(ze=0,J=p.length;ze<J;ze++)_=p[ze],ie.writeUInt16(_);return{charMap:r,subtable:ie.data,maxGlyphID:M+1}}},n}(),ES=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new B5(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=B5.encode(t,r),(s=new mc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),SW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),PW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),NW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),kW=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},CW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,o,c,u,l,d,g,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=d=0,g=i.length;d<g;a=++d)s=i[a],t.pos=s.offset,l=t.readString(s.length),o=new kW(l,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),RW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),LW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,o,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var l,d;for(d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(t.readInt16());return d}(),this.widths=(function(){var l,d,g,p;for(p=[],l=0,d=(g=this.metrics).length;l<d;l++)a=g[l],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),TS=[].slice,DW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,o,c,u,l,d,g;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,o=(c=new mc(r.read(s))).readShort(),l=c.readShort(),g=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[t]=o===-1?new OW(c,l,g,u,d):new FW(c,o,l,g,u,d),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,o,c,u;for(o=[],a=[],c=0,u=r.length;c<u;c++)s=t[r[c]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),FW=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),OW=function(){function n(e,t,r,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new mc(TS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),MW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var l=new Array(4*i.length),d=0;d<i.length;++d)l[4*d+3]=255&i[d],l[4*d+2]=(65280&i[d])>>8,l[4*d+1]=(16711680&i[d])>>16,l[4*d]=(4278190080&i[d])>>24;return l},e}(),BW=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,o,c,u,l,d,g,p,x,_,E,P;for(i in r=ES.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},P=r.charMap)p[(c=P[i]).old]=c.new;for(x in g=r.maxGlyphID,a)x in p||(p[x]=g++);return l=function(L){var M,K;for(M in K={},L)K[L[M]]=M;return K}(p),d=Object.keys(l).sort(function(L,M){return L-M}),_=function(){var L,M,K;for(K=[],L=0,M=d.length;L<M;L++)o=d[L],K.push(l[o]);return K}(),s=this.font.glyf.encode(a,_,p),u=this.font.loca.encode(s.offsets,_),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},n}();Dt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)r=t[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();function VW(){window.exportXLSX=zW,window.exportPDF=jW,window.exportCSV=WW,window.exportJSON=HW,window.importJSON=$W}function rd(){return new Date().toISOString().split("T")[0]}function UW(n,e){if(!n||!e)return 0;const[t,r]=n.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+r,o=i*60+s;return Math.round((o-a)/60*100)/100}function Em(){const n=document.getElementById("exportPeriod").value;let e=Me.entries;if(n!=="all"){const{start:t,end:r}=GW(n);e=e.filter(i=>i.datum>=t&&i.datum<=r)}return e}function jW(){const n=Em();if(n.length===0){alert("Keine Daten zum Exportieren");return}const e=qW(n),t=new Dt("l","mm","a4");t.setFontSize(18),t.text("Zeiterfassung",14,22),t.setFontSize(10),t.text(`Erstellt am: ${bu(rd())}`,14,30),t.text(`${e.length} Zeitblcke (aus ${n.length} Eintrgen)`,14,36);let r=50;t.setFontSize(9),t.setFont(void 0,"bold"),t.text("Datum",14,r),t.text("Projekte",40,r),t.text("Ttigkeiten",110,r),t.text("Start",195,r),t.text("Ende",212,r),t.text("Std",230,r),t.text("Ort",250,r),r+=2,t.setDrawColor(200,200,200),t.setLineWidth(.3),t.line(14,r,270,r),t.setFont(void 0,"normal"),r+=6;let i=null,s=0;e.forEach((N,A)=>{const C=(N.projekte||[]).join(", "),B=t.splitTextToSize(C,65);let b=(N.taetigkeiten||[]).join(", ");N.entryCount>1&&(b+=" und weitere Ttigkeiten");const S=t.splitTextToSize(b,80),R=Math.max(B.length,S.length,1),ie=Math.max(6,R*4+2);r+ie>190&&(t.addPage(),r=20,i=null);const me=N.datum!==i;me&&(i=N.datum,s++),s%2===0&&(t.setFillColor(240,255,240),t.rect(10,r-4,277,ie,"F")),me&&A>0&&(t.setDrawColor(180,180,180),t.setLineWidth(.4),t.line(14,r-3,270,r-3)),t.setTextColor(0,0,0),t.text(bu(N.datum),14,r),t.text(B,40,r),t.text(S,110,r),t.text(N.start||"",195,r),t.text(N.ende||"",212,r),t.text((N.stunden||0).toFixed(2),230,r),t.text(N.homeoffice?"HO":"Bro",250,r),r+=ie});const a=e.filter(N=>!N.projekte.includes("Pause")),o=a.reduce((N,A)=>N+(A.stunden||0),0),u=[...new Set(a.map(N=>N.datum))].length,l=u>0?o/u:0,g=l/7.8*100,p=a.filter(N=>N.homeoffice).reduce((N,A)=>N+(A.stunden||0),0),x=a.filter(N=>!N.homeoffice).reduce((N,A)=>N+(A.stunden||0),0),_=o>0?p/o*100:0,E=o>0?x/o*100:0,P=l*5,L=P/39*100;r+=5,t.setFont(void 0,"bold"),t.text(`Gesamt: ${o.toFixed(2)} Stunden`,14,r),r+=10,t.setFontSize(11),t.text("STATISTIK",14,r),t.setFontSize(9),t.setFont(void 0,"normal"),r+=6,t.text(`Arbeitstage: ${u}`,14,r),r+=5;const M=l<7.8?[255,0,0]:[0,170,0];t.setTextColor(M[0],M[1],M[2]),t.setFont(void 0,"bold"),t.text(` Stunden/Tag: ${l.toFixed(2)}h`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),r+=5;const K=g<100?[255,0,0]:[0,170,0];t.setTextColor(K[0],K[1],K[2]),t.setFont(void 0,"bold"),t.text(` % zur Regelarbeitszeit (7,8h): ${g.toFixed(1)}%`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),r+=5;const se=P<39?[255,0,0]:[0,170,0];t.setTextColor(se[0],se[1],se[2]),t.setFont(void 0,"bold"),t.text(`Hochrechnung Woche (5 Tage): ${P.toFixed(2)}h (${L.toFixed(1)}%)`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),r+=10,t.setFont(void 0,"bold"),t.text("ARBEITSORT-VERTEILUNG",14,r),t.setFont(void 0,"normal"),r+=6,t.text(`Homeoffice: ${p.toFixed(2)}h (${_.toFixed(1)}%)`,14,r),r+=5;const oe=E<50?[255,0,0]:[0,170,0];t.setTextColor(oe[0],oe[1],oe[2]),t.setFont(void 0,"bold"),t.text(`Bro: ${x.toFixed(2)}h (${E.toFixed(1)}%)`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),t.save(`Zeiterfassung_${rd()}.pdf`)}function qW(n){const e=[...n].sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||"")),t=[];let r=null;for(const i of e)r?r.datum===i.datum&&r.ende===i.start&&r.projekte.includes("Pause")===(i.projekt==="Pause")?(r.ende=i.ende,r.stunden=UW(r.start,r.ende),r.entryCount++,i.projekt&&!r.projekte.includes(i.projekt)&&r.projekte.push(i.projekt),i.taetigkeit&&!r.taetigkeiten.includes(i.taetigkeit)&&r.taetigkeiten.push(i.taetigkeit)):(t.push(r),r={datum:i.datum,start:i.start,ende:i.ende,projekte:[i.projekt||"Allgemein"],taetigkeiten:i.taetigkeit?[i.taetigkeit]:[],homeoffice:i.homeoffice,stunden:parseFloat(i.stunden)||0,entryCount:1}):r={datum:i.datum,start:i.start,ende:i.ende,projekte:[i.projekt||"Allgemein"],taetigkeiten:i.taetigkeit?[i.taetigkeit]:[],homeoffice:i.homeoffice,stunden:parseFloat(i.stunden)||0,entryCount:1};return r&&t.push(r),t}function zW(){const n=Em();n.sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||""));const e=n.map(i=>({Datum:bu(i.datum),Start:i.start,Ende:i.ende,Projekt:i.projekt||"",Ttigkeit:i.taetigkeit||"",Stunden:i.stunden,Ort:i.homeoffice?"Homeoffice":"Bro"})),t=yg.json_to_sheet(e),r=yg.book_new();yg.book_append_sheet(r,t,"Zeiten"),Sz(r,`Zeiterfassung_${rd()}.xlsx`)}function WW(){const n=Em();n.sort((s,a)=>s.datum!==a.datum?s.datum.localeCompare(a.datum):(s.start||"").localeCompare(a.start||""));const t=[["Datum","Start","Ende","Projekt","Ttigkeit","Stunden","Ort"].join(";"),...n.map(s=>[bu(s.datum),s.start,s.ende,s.projekt||"",s.taetigkeit||"",s.stunden,s.homeoffice?"Homeoffice":"Bro"].join(";"))].join(`
`),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=`Zeiterfassung_${rd()}.csv`,i.click()}function HW(){const n=Em();n.sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||""));const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=`Zeiterfassung_${rd()}.json`,r.click()}function $W(){const n=document.getElementById("importFile");if(!n.files||!n.files[0])return;const e=new FileReader;e.onload=function(t){try{const r=JSON.parse(t.target.result);Array.isArray(r)&&alert(`Backup enthlt ${r.length} Eintrge. Import ist in dieser Version noch nicht vollstndig implementiert.`)}catch{alert("Fehler beim Lesen der JSON-Datei")}},e.readAsText(n.files[0])}function GW(n){const e=new Date,t=e.toISOString().split("T")[0];let r=t,i=t;if(n==="custom")r=document.getElementById("exportFrom").value,i=document.getElementById("exportTo").value;else if(n==="week"){const s=e.getDay()||7,a=new Date(e);a.setDate(e.getDate()-s+1),r=a.toISOString().split("T")[0]}else n==="month"?(r=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],i=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0]):n==="year"&&(r=new Date(e.getFullYear(),0,1).toISOString().split("T")[0],i=new Date(e.getFullYear(),11,31).toISOString().split("T")[0]);return{start:r,end:i}}window.toggleCustomDates=function(){const n=document.getElementById("exportPeriod").value,e=document.getElementById("customDateRange");n==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")};document.addEventListener("DOMContentLoaded",()=>{O7(),b7(),t7(),u7(),v7(),p7(),VW(),z7()});export{xn as _};
