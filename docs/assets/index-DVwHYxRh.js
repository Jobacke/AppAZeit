(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var P_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},_4=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=n[t++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=n[t++],a=n[t++],o=n[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const s=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},K5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){const s=n[i],a=i+1<n.length,o=a?n[i+1]:0,c=i+2<n.length,u=c?n[i+2]:0,l=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(g=64)),r.push(t[l],t[d],t[g],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(G5(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):_4(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){const s=t[n.charAt(i++)],o=i<n.length?t[n.charAt(i)]:0;++i;const u=i<n.length?t[n.charAt(i)]:64;++i;const d=i<n.length?t[n.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new y4;const g=s<<2|o>>4;if(r.push(g),u!==64){const p=o<<4&240|u>>2;if(r.push(p),d!==64){const x=u<<6&192|d;r.push(x)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class y4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const w4=function(n){const e=G5(n);return K5.encodeByteArray(e,!0)},j0=function(n){return w4(n).replace(/\./g,"")},Y5=function(n){try{return K5.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function q0(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!x4(t)||(n[t]=q0(n[t],e[t]));return n}function x4(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E4=()=>X5().__FIREBASE_DEFAULTS__,T4=()=>{if(typeof process>"u"||typeof P_>"u")return;const n=P_.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},b4=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Y5(n[1]);return e&&JSON.parse(e)},F1=()=>{try{return E4()||T4()||b4()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},J5=()=>{var n;return(n=F1())===null||n===void 0?void 0:n.config},A4=n=>{var e;return(e=F1())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[j0(JSON.stringify(t)),j0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function P4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Jn())}function O1(){var n;const e=(n=F1())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function N4(){return typeof window<"u"||Q5()}function Q5(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function k4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Z5(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function M1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ex(){const n=Jn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function tx(){return!O1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function uu(){try{return typeof indexedDB=="object"}catch{return!1}}function C4(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function R4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4="FirebaseError";class kr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=L4,Object.setPrototypeOf(this,kr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Sa.prototype.create)}}class Sa{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?D4(s,r):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new kr(i,o,r)}}function D4(n,e){return n.replace(F4,(t,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const F4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N_(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function O4(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Nf(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const i of t){if(!r.includes(i))return!1;const s=n[i],a=e[i];if(k_(s)&&k_(a)){if(!Nf(s,a))return!1}else if(s!==a)return!1}for(const i of r)if(!t.includes(i))return!1;return!0}function k_(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Pl(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function rf(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function nx(n,e){const t=new M4(n,e);return t.subscribe.bind(t)}class M4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");B4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Gm),i.error===void 0&&(i.error=Gm),i.complete===void 0&&(i.complete=Gm);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function B4(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gm(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(n){return n&&n._delegate?n._delegate:n}class zr{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new I4;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(j4(e))try{this.getOrInitializeService({instanceIdentifier:Wc})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Wc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wc){return this.instances.has(e)}getOptions(e=Wc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);r===o&&a.resolve(i)}return i}onInit(e,t){var r;const i=this.normalizeInstanceIdentifier(t),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:U4(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wc){return this.component?this.component.multipleInstances?e:Wc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function U4(n){return n===Wc?void 0:n}function j4(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new V4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=[];var Yt;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Yt||(Yt={}));const ix={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},q4=Yt.INFO,z4={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},W4=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),i=z4[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=q4,this._logHandler=W4,this._userLogHandler=null,B1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ix[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}function H4(n){B1.forEach(e=>{e.setLogLevel(n)})}function $4(n,e){for(const t of B1){let r=null;e&&e.level&&(r=ix[e.level]),n===null?t.userLogHandler=null:t.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(r??i.logLevel)&&n({level:Yt[s].toLowerCase(),message:o,args:a,type:i.name})}}}const G4=(n,e)=>e.some(t=>n instanceof t);let C_,R_;function K4(){return C_||(C_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Y4(){return R_||(R_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sx=new WeakMap,Fg=new WeakMap,ax=new WeakMap,Km=new WeakMap,V1=new WeakMap;function X4(n){const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("success",s),n.removeEventListener("error",a)},s=()=>{t(Ja(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",s),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&sx.set(t,n)}).catch(()=>{}),V1.set(e,n),e}function J4(n){if(Fg.has(n))return;const e=new Promise((t,r)=>{const i=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",a),n.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",s),n.addEventListener("error",a),n.addEventListener("abort",a)});Fg.set(n,e)}let Og={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Fg.get(n);if(e==="objectStoreNames")return n.objectStoreNames||ax.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ja(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Q4(n){Og=n(Og)}function Z4(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(Ym(this),e,...t);return ax.set(r,e.sort?e.sort():[e]),Ja(r)}:Y4().includes(n)?function(...e){return n.apply(Ym(this),e),Ja(sx.get(this))}:function(...e){return Ja(n.apply(Ym(this),e))}}function e3(n){return typeof n=="function"?Z4(n):(n instanceof IDBTransaction&&J4(n),G4(n,K4())?new Proxy(n,Og):n)}function Ja(n){if(n instanceof IDBRequest)return X4(n);if(Km.has(n))return Km.get(n);const e=e3(n);return e!==n&&(Km.set(n,e),V1.set(e,n)),e}const Ym=n=>V1.get(n);function fh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:s}={}){const a=indexedDB.open(n,e),o=Ja(a);return r&&a.addEventListener("upgradeneeded",c=>{r(Ja(a.result),c.oldVersion,c.newVersion,Ja(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}function Cl(n,{blocked:e}={}){const t=indexedDB.deleteDatabase(n);return e&&t.addEventListener("blocked",r=>e(r.oldVersion,r)),Ja(t).then(()=>{})}const t3=["get","getKey","getAll","getAllKeys","count"],n3=["put","add","delete","clear"],Xm=new Map;function L_(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xm.get(e))return Xm.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,i=n3.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||t3.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&c.done]))[0]};return Xm.set(e,s),s}Q4(n=>({...n,get:(e,t,r)=>L_(e,t)||n.get(e,t,r),has:(e,t)=>!!L_(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(i3(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function i3(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const z0="@firebase/app",Mg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const no=new Cp("@firebase/app"),s3="@firebase/app-compat",a3="@firebase/analytics-compat",o3="@firebase/analytics",c3="@firebase/app-check-compat",u3="@firebase/app-check",l3="@firebase/auth",h3="@firebase/auth-compat",f3="@firebase/database",d3="@firebase/data-connect",p3="@firebase/database-compat",m3="@firebase/functions",g3="@firebase/functions-compat",v3="@firebase/installations",_3="@firebase/installations-compat",y3="@firebase/messaging",w3="@firebase/messaging-compat",x3="@firebase/performance",E3="@firebase/performance-compat",T3="@firebase/remote-config",b3="@firebase/remote-config-compat",A3="@firebase/storage",I3="@firebase/storage-compat",S3="@firebase/firestore",P3="@firebase/vertexai-preview",N3="@firebase/firestore-compat",k3="firebase",C3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc="[DEFAULT]",R3={[z0]:"fire-core",[s3]:"fire-core-compat",[o3]:"fire-analytics",[a3]:"fire-analytics-compat",[u3]:"fire-app-check",[c3]:"fire-app-check-compat",[l3]:"fire-auth",[h3]:"fire-auth-compat",[f3]:"fire-rtdb",[d3]:"fire-data-connect",[p3]:"fire-rtdb-compat",[m3]:"fire-fn",[g3]:"fire-fn-compat",[v3]:"fire-iid",[_3]:"fire-iid-compat",[y3]:"fire-fcm",[w3]:"fire-fcm-compat",[x3]:"fire-perf",[E3]:"fire-perf-compat",[T3]:"fire-rc",[b3]:"fire-rc-compat",[A3]:"fire-gcs",[I3]:"fire-gcs-compat",[S3]:"fire-fst",[N3]:"fire-fst-compat",[P3]:"fire-vertex","fire-js":"fire-js",[k3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,Gl=new Map,Kl=new Map;function kf(n,e){try{n.container.addComponent(e)}catch(t){no.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ox(n,e){n.container.addOrOverwriteComponent(e)}function Yi(n){const e=n.name;if(Kl.has(e))return no.debug(`There were multiple attempts to register component ${e}.`),!1;Kl.set(e,n);for(const t of ic.values())kf(t,n);for(const t of Gl.values())kf(t,n);return!0}function Rp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function L3(n,e,t=rc){Rp(n,e).clearInstance(t)}function cx(n){return n.options!==void 0}function ir(n){return n.settings!==void 0}function D3(){Kl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ps=new Sa("app","Firebase",F3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ux=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ps.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3 extends ux{constructor(e,t,r,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,a={name:r,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const o=e;super(o.options,a,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ni(z0,Mg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){j1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ps.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=C3;function U1(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:rc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Ps.create("bad-app-name",{appName:String(i)});if(t||(t=J5()),!t)throw Ps.create("no-options");const s=ic.get(i);if(s){if(Nf(t,s.options)&&Nf(r,s.config))return s;throw Ps.create("duplicate-app",{appName:i})}const a=new rx(i);for(const c of Kl.values())a.addComponent(c);const o=new ux(t,r,a);return ic.set(i,o),o}function M3(n,e){if(N4()&&!Q5())throw Ps.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;cx(n)?t=n.options:t=n;const r=Object.assign(Object.assign({},e),t);r.releaseOnDeref!==void 0&&delete r.releaseOnDeref;const i=u=>[...u].reduce((l,d)=>Math.imul(31,l)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ps.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(r)),a=Gl.get(s);if(a)return a.incRefCount(e.releaseOnDeref),a;const o=new rx(s);for(const u of Kl.values())o.addComponent(u);const c=new O3(t,e,s,o);return Gl.set(s,c),c}function B3(n=rc){const e=ic.get(n);if(!e&&n===rc&&J5())return U1();if(!e)throw Ps.create("no-app",{appName:n});return e}function V3(){return Array.from(ic.values())}async function j1(n){let e=!1;const t=n.name;ic.has(t)?(e=!0,ic.delete(t)):Gl.has(t)&&n.decRefCount()<=0&&(Gl.delete(t),e=!0),e&&(await Promise.all(n.container.getProviders().map(r=>r.delete())),n.isDeleted=!0)}function ni(n,e,t){var r;let i=(r=R3[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),no.warn(o.join(" "));return}Yi(new zr(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function lx(n,e){if(n!==null&&typeof n!="function")throw Ps.create("invalid-log-argument");$4(n,e)}function hx(n){H4(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3="firebase-heartbeat-database",j3=1,Cf="firebase-heartbeat-store";let Jm=null;function fx(){return Jm||(Jm=fh(U3,j3,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Cf)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ps.create("idb-open",{originalErrorMessage:n.message})})),Jm}async function q3(n){try{const t=(await fx()).transaction(Cf),r=await t.objectStore(Cf).get(dx(n));return await t.done,r}catch(e){if(e instanceof kr)no.warn(e.message);else{const t=Ps.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});no.warn(t.message)}}}async function D_(n,e){try{const r=(await fx()).transaction(Cf,"readwrite");await r.objectStore(Cf).put(e,dx(n)),await r.done}catch(t){if(t instanceof kr)no.warn(t.message);else{const r=Ps.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});no.warn(r.message)}}}function dx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3=1024,W3=30*24*60*60*1e3;class H3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new G3(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=F_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=W3}),this._storage.overwrite(this._heartbeatsCache))}catch(r){no.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=F_(),{heartbeatsToSend:r,unsentEntries:i}=$3(this._heartbeatsCache.heartbeats),s=j0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return no.warn(t),""}}}function F_(){return new Date().toISOString().substring(0,10)}function $3(n,e=z3){const t=[];let r=n.slice();for(const i of n){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),O_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),O_(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class G3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return uu()?C4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await q3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return D_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return D_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function O_(n){return j0(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K3(n){Yi(new zr("platform-logger",e=>new r3(e),"PRIVATE")),Yi(new zr("heartbeat",e=>new H3(e),"PRIVATE")),ni(z0,Mg,n),ni(z0,Mg,"esm2017"),ni("fire-js","")}K3("");const Y3=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:kr,SDK_VERSION:_c,_DEFAULT_ENTRY_NAME:rc,_addComponent:kf,_addOrOverwriteComponent:ox,_apps:ic,_clearComponents:D3,_components:Kl,_getProvider:Rp,_isFirebaseApp:cx,_isFirebaseServerApp:ir,_registerComponent:Yi,_removeServiceInstance:L3,_serverApps:Gl,deleteApp:j1,getApp:B3,getApps:V3,initializeApp:U1,initializeServerApp:M3,onLog:lx,registerVersion:ni,setLogLevel:hx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e,t){this._delegate=e,this.firebase=t,kf(e,new zr("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),j1(this._delegate)))}_getService(e,t=rc){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=rc){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){kf(this._delegate,e)}_addOrOverwriteComponent(e){ox(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},M_=new Sa("app-compat","Firebase",J3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3(n){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:ni,setLogLevel:hx,onLog:lx,apps:null,SDK_VERSION:_c,INTERNAL:{registerComponent:o,removeApp:r,useAsService:c,modularAPIs:Y3}};t.default=t,Object.defineProperty(t,"apps",{get:a});function r(u){delete e[u]}function i(u){if(u=u||rc,!N_(e,u))throw M_.create("no-app",{appName:u});return e[u]}i.App=n;function s(u,l={}){const d=U1(u,l);if(N_(e,d.name))return e[d.name];const g=new n(d,t);return e[d.name]=g,g}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const l=u.name,d=l.replace("-compat","");if(Yi(u)&&u.type==="PUBLIC"){const g=(p=i())=>{if(typeof p[d]!="function")throw M_.create("invalid-app-argument",{appName:l});return p[d]()};u.serviceProps!==void 0&&q0(g,u.serviceProps),t[d]=g,n.prototype[d]=function(...p){return this._getService.bind(this,l).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?t[d]:null}function c(u,l){return l==="serverAuth"?null:l}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(){const n=Q3(X3);n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:px,extendNamespace:e,createSubscribe:nx,ErrorFactory:Sa,deepExtend:q0});function e(t){q0(n,t)}return n}const Z3=px();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=new Cp("@firebase/app-compat"),eP="@firebase/app-compat",tP="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nP(n){ni(eP,tP,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const n=X5();if(n.firebase!==void 0){B_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=n.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&B_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const On=Z3;nP();var rP="firebase",iP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */On.registerVersion(rP,iP,"app-compat");function q1(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(t[r[i]]=n[r[i]]);return t}const $h={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ul={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sP(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function mx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const aP=sP,oP=mx,gx=new Sa("auth","Firebase",mx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W0=new Cp("@firebase/auth");function cP(n,...e){W0.logLevel<=Yt.WARN&&W0.warn(`Auth (${_c}): ${n}`,...e)}function A0(n,...e){W0.logLevel<=Yt.ERROR&&W0.error(`Auth (${_c}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(n,...e){throw W1(n,...e)}function Cr(n,...e){return W1(n,...e)}function z1(n,e,t){const r=Object.assign(Object.assign({},oP()),{[e]:t});return new Sa("auth","Firebase",r).create(e,{appName:n.name})}function qr(n){return z1(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function dh(n,e,t){const r=t;if(!(e instanceof r))throw r.name!==e.constructor.name&&si(n,"argument-error"),z1(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function W1(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return gx.create(n,...e)}function tt(n,e,...t){if(!n)throw W1(e,...t)}function pa(n){const e="INTERNAL ASSERTION FAILED: "+n;throw A0(e),new Error(e)}function Xs(n,e){n||pa(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function H1(){return V_()==="http:"||V_()==="https:"}function V_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(H1()||Z5()||"connection"in navigator)?navigator.onLine:!0}function lP(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xs(t>e,"Short delay should be less than long delay!"),this.isMobile=P4()||M1()}get(){return uP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(n,e){Xs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vx{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;pa("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;pa("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;pa("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP=new cd(3e4,6e4);function cr(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function ur(n,e,t,r,i={}){return _x(n,i,async()=>{let s={},a={};r&&(e==="GET"?a=r:s={body:JSON.stringify(r)});const o=hh(Object.assign({key:n.config.apiKey},a)).slice(1),c=await n._getAdditionalHeaders();c["Content-Type"]="application/json",n.languageCode&&(c["X-Firebase-Locale"]=n.languageCode);const u=Object.assign({method:e,headers:c},s);return k4()||(u.referrerPolicy="no-referrer"),vx.fetch()(yx(n,n.config.apiHost,t,o),u)})}async function _x(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},hP),e);try{const i=new pP(n),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw sf(n,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw sf(n,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw sf(n,"email-already-in-use",a);if(c==="USER_DISABLED")throw sf(n,"user-disabled",a);const l=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw z1(n,l,u);si(n,l)}}catch(i){if(i instanceof kr)throw i;si(n,"network-request-failed",{message:String(i)})}}async function co(n,e,t,r,i={}){const s=await ur(n,e,t,r,i);return"mfaPendingCredential"in s&&si(n,"multi-factor-auth-required",{_serverResponse:s}),s}function yx(n,e,t,r){const i=`${e}${t}?${r}`;return n.config.emulator?$1(n.config,i):`${n.config.apiScheme}://${i}`}function dP(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Cr(this.auth,"network-request-failed")),fP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sf(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const i=Cr(n,e,r);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(n){return n!==void 0&&n.getResponse!==void 0}function j_(n){return n!==void 0&&n.enterprise!==void 0}class mP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gP(n){return(await ur(n,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function vP(n,e){return ur(n,"GET","/v2/recaptchaConfig",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(n,e){return ur(n,"POST","/v1/accounts:delete",e)}async function yP(n,e){return ur(n,"POST","/v1/accounts:update",e)}async function wx(n,e){return ur(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ff(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wP(n,e=!1){const t=St(n),r=await t.getIdToken(e),i=Lp(r);tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ff(Qm(i.auth_time)),issuedAtTime:ff(Qm(i.iat)),expirationTime:ff(Qm(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Qm(n){return Number(n)*1e3}function Lp(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return A0("JWT malformed, contained fewer than 3 sections"),null;try{const i=Y5(t);return i?JSON.parse(i):(A0("Failed to decode base64 JWT payload"),null)}catch(i){return A0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function q_(n){const e=Lp(n);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof kr&&xP(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function xP({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ff(this.lastLoginAt),this.creationTime=ff(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(n){var e;const t=n.auth,r=await n.getIdToken(),i=await ro(n,wx(t,{idToken:r}));tt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?xx(s.providerUserInfo):[],o=bP(n.providerData,a),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Bg(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(n,d)}async function TP(n){const e=St(n);await Lf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function bP(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function xx(n){return n.map(e=>{var{providerId:t}=e,r=q1(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AP(n,e){const t=await _x(n,{},async()=>{const r=hh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=n.config,a=yx(n,i,"/v1/token",`key=${s}`),o=await n._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",vx.fetch()(a,{method:"POST",headers:o,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function IP(n,e){return ur(n,"POST","/v2/accounts:revokeToken",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const t=q_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:i,expiresIn:s}=await AP(e,t);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:i,expirationTime:s}=t,a=new Rl;return r&&(tt(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(tt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(tt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return pa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(n,e){tt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ka{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,s=q1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Bg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ro(this,this.stsTokenManager.getToken(this.auth,e));return tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return wP(this,e)}reload(){return TP(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ka(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Lf(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ir(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await ro(this,_P(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,s,a,o,c,u,l;const d=(r=t.displayName)!==null&&r!==void 0?r:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,E=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(u=t.createdAt)!==null&&u!==void 0?u:void 0,L=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:V,emailVerified:K,isAnonymous:ie,providerData:ae,stsTokenManager:N}=t;tt(V&&N,e,"internal-error");const A=Rl.fromJSON(this.name,N);tt(typeof V=="string",e,"internal-error"),qo(d,e.name),qo(g,e.name),tt(typeof K=="boolean",e,"internal-error"),tt(typeof ie=="boolean",e,"internal-error"),qo(p,e.name),qo(x,e.name),qo(_,e.name),qo(E,e.name),qo(P,e.name),qo(L,e.name);const C=new Ka({uid:V,auth:e,email:g,emailVerified:K,displayName:d,isAnonymous:ie,photoURL:x,phoneNumber:p,tenantId:_,stsTokenManager:A,createdAt:P,lastLoginAt:L});return ae&&Array.isArray(ae)&&(C.providerData=ae.map(B=>Object.assign({},B))),E&&(C._redirectEventId=E),C}static async _fromIdTokenResponse(e,t,r=!1){const i=new Rl;i.updateFromServerResponse(t);const s=new Ka({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Lf(s),s}static async _fromGetAccountInfoResponse(e,t,r){const i=t.users[0];tt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?xx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Rl;o.updateFromIdToken(r);const c=new Ka({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Bg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Map;function ds(n){Xs(n instanceof Function,"Expected a class definition");let e=z_.get(n);return e?(Xs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,z_.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Ex.type="NONE";const Yl=Ex;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(n,e,t){return`firebase:${n}:${e}:${t}`}class Ll{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=iu(this.userKey,i.apiKey,s),this.fullPersistenceKey=iu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ka._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ll(ds(Yl),e,r);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||ds(Yl);const a=iu(r,e.config.apiKey,e.name);let o=null;for(const u of t)try{const l=await u._get(a);if(l){const d=Ka._fromJSON(e,l);u!==s&&(o=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ll(s,e,r):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Ll(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Ix(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Sx(e))return"Blackberry";if(Px(e))return"Webos";if(bx(e))return"Safari";if((e.includes("chrome/")||Ax(e))&&!e.includes("edge/"))return"Chrome";if(ud(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Tx(n=Jn()){return/firefox\//i.test(n)}function bx(n=Jn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ax(n=Jn()){return/crios\//i.test(n)}function Ix(n=Jn()){return/iemobile/i.test(n)}function ud(n=Jn()){return/android/i.test(n)}function Sx(n=Jn()){return/blackberry/i.test(n)}function Px(n=Jn()){return/webos/i.test(n)}function ld(n=Jn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function SP(n=Jn()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(n)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(n)}function PP(n=Jn()){var e;return ld(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NP(){return ex()&&document.documentMode===10}function Nx(n=Jn()){return ld(n)||ud(n)||Px(n)||Sx(n)||/windows phone/i.test(n)||Ix(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(n,e=[]){let t;switch(n){case"Browser":t=W_(Jn());break;case"Worker":t=`${W_(Jn())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_c}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});r.onAbort=t,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CP(n,e={}){return ur(n,"GET","/v2/passwordPolicy",cr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=6;class LP{constructor(e){var t,r,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:RP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DP{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new H_(this),this.idTokenSubscription=new H_(this),this.beforeStateQueue=new kP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ds(t)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await wx(this,{idToken:e}),r=await Ka._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(ir(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=lP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ir(this.app))return Promise.reject(qr(this));const t=e?St(e):null;return t&&tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ir(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ir(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ds(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CP(this),t=new LP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Sa("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await IP(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ds(e)||this._popupRedirectResolver;tt(t,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[ds(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,r,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=kx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&cP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function ar(n){return St(n)}class H_{constructor(e){this.auth=e,this.observer=null,this.addObserver=nx(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hd={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FP(n){hd=n}function G1(n){return hd.loadJS(n)}function OP(){return hd.recaptchaV2Script}function MP(){return hd.recaptchaEnterpriseScript}function BP(){return hd.gapiScript}function Cx(n){return`__${n}${Math.floor(Math.random()*1e6)}`}const VP="recaptcha-enterprise",UP="NO_RECAPTCHA";class jP{constructor(e){this.type=VP,this.auth=ar(e)}async verify(e="verify",t=!1){async function r(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{vP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new mP(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;j_(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(UP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{r(this.auth).then(o=>{if(!t&&j_(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=MP();c.length!==0&&(c+=o),G1(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function $_(n,e,t,r=!1){const i=new jP(n);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return r?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Df(n,e,t,r){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await $_(n,e,t,t==="getOobCode");return r(n,s)}else return r(n,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await $_(n,e,t,t==="getOobCode");return r(n,a)}else return Promise.reject(s)})}function qP(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(ds);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zP(n,e,t){const r=ar(n);tt(r._canInitEmulator,r,"emulator-config-failed"),tt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=Rx(e),{host:a,port:o}=WP(e),c=o===null?"":`:${o}`;r.config.emulator={url:`${s}//${a}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||HP()}function Rx(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function WP(n){const e=Rx(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:G_(r.substr(s.length+1))}}else{const[s,a]=r.split(":");return{host:s,port:G_(a)}}}function G_(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function HP(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return pa("not implemented")}_getIdTokenResponse(e){return pa("not implemented")}_linkToIdToken(e,t){return pa("not implemented")}_getReauthenticationResolver(e){return pa("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lx(n,e){return ur(n,"POST","/v1/accounts:resetPassword",cr(n,e))}async function $P(n,e){return ur(n,"POST","/v1/accounts:update",e)}async function GP(n,e){return ur(n,"POST","/v1/accounts:signUp",e)}async function KP(n,e){return ur(n,"POST","/v1/accounts:update",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YP(n,e){return co(n,"POST","/v1/accounts:signInWithPassword",cr(n,e))}async function Dp(n,e){return ur(n,"POST","/v1/accounts:sendOobCode",cr(n,e))}async function XP(n,e){return Dp(n,e)}async function JP(n,e){return Dp(n,e)}async function QP(n,e){return Dp(n,e)}async function ZP(n,e){return Dp(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(n,e){return co(n,"POST","/v1/accounts:signInWithEmailLink",cr(n,e))}async function tN(n,e){return co(n,"POST","/v1/accounts:signInWithEmailLink",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff extends ph{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Ff(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Ff(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,t,"signInWithPassword",YP);case"emailLink":return eN(e,{email:this._email,oobCode:this._password});default:si(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Df(e,r,"signUpPassword",GP);case"emailLink":return tN(e,{idToken:t,email:this._email,oobCode:this._password});default:si(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qa(n,e){return co(n,"POST","/v1/accounts:signInWithIdp",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN="http://localhost";class Ea extends ph{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ea(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):si("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=t,s=q1(t,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Ea(r,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Qa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}buildRequest(){const e={requestUri:nN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(n,e){return ur(n,"POST","/v1/accounts:sendVerificationCode",cr(n,e))}async function iN(n,e){return co(n,"POST","/v1/accounts:signInWithPhoneNumber",cr(n,e))}async function sN(n,e){const t=await co(n,"POST","/v1/accounts:signInWithPhoneNumber",cr(n,e));if(t.temporaryProof)throw sf(n,"account-exists-with-different-credential",t);return t}const aN={USER_NOT_FOUND:"user-not-found"};async function oN(n,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return co(n,"POST","/v1/accounts:signInWithPhoneNumber",cr(n,t),aN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends ph{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new su({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new su({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return iN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return sN(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return oN(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:r,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s}=e;return!r&&!t&&!i&&!s?null:new su({verificationId:t,verificationCode:r,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cN(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function uN(n){const e=Pl(rf(n)).link,t=e?Pl(rf(e)).deep_link_id:null,r=Pl(rf(n)).deep_link_id;return(r?Pl(rf(r)).link:null)||r||t||e||n}class Fp{constructor(e){var t,r,i,s,a,o;const c=Pl(rf(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(r=c.oobCode)!==null&&r!==void 0?r:null,d=cN((i=c.mode)!==null&&i!==void 0?i:null);tt(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=uN(e);try{return new Fp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.providerId=yc.PROVIDER_ID}static credential(e,t){return Ff._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Fp.parseLink(t);return tt(r,"argument-error"),Ff._fromEmailAndCode(e,r.code,r.tenantId)}}yc.PROVIDER_ID="password";yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dl extends mh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return tt("providerId"in t&&"signInMethod"in t,"argument-error"),Ea._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tt(e.idToken||e.accessToken,"argument-error"),Ea._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Dl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!r&&!i&&!t&&!s||!o)return null;try{return new Dl(o)._credential({idToken:t,accessToken:r,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends mh{constructor(){super("facebook.com")}static credential(e){return Ea._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return la.credential(e.oauthAccessToken)}catch{return null}}}la.FACEBOOK_SIGN_IN_METHOD="facebook.com";la.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends mh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ea._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return ha.credential(t,r)}catch{return null}}}ha.GOOGLE_SIGN_IN_METHOD="google.com";ha.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends mh{constructor(){super("github.com")}static credential(e){return Ea._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return fa.credential(e.oauthAccessToken)}catch{return null}}}fa.GITHUB_SIGN_IN_METHOD="github.com";fa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN="http://localhost";class Xl extends ph{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Qa(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Qa(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Qa(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:s}=t;return!r||!i||!s||r!==i?null:new Xl(r,s)}static _create(e,t){return new Xl(e,t)}buildRequest(){return{requestUri:lN,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="saml.";class H0 extends uo{constructor(e){tt(e.startsWith(hN),"argument-error"),super(e)}static credentialFromResult(e){return H0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return H0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Xl.fromJSON(e);return tt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:r}=e;if(!t||!r)return null;try{return Xl._create(r,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da extends mh{constructor(){super("twitter.com")}static credential(e,t){return Ea._fromParams({providerId:da.PROVIDER_ID,signInMethod:da.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return da.credentialFromTaggedObject(e)}static credentialFromError(e){return da.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return da.credential(t,r)}catch{return null}}}da.TWITTER_SIGN_IN_METHOD="twitter.com";da.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dx(n,e){return co(n,"POST","/v1/accounts:signUp",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,i=!1){const s=await Ka._fromIdTokenResponse(e,r,i),a=K_(r);return new Ns({user:s,providerId:a,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const i=K_(r);return new Ns({user:e,providerId:i,_tokenResponse:r,operationType:t})}}function K_(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(n){var e;if(ir(n.app))return Promise.reject(qr(n));const t=ar(n);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ns({user:t.currentUser,providerId:null,operationType:"signIn"});const r=await Dx(t,{returnSecureToken:!0}),i=await Ns._fromIdTokenResponse(t,"signIn",r,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends kr{constructor(e,t,r,i){var s;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new $0(e,t,r,i)}}function Fx(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$0._fromErrorAndOperation(n,s,e,r):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(n){return new Set(n.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(n,e){const t=St(n);await Op(!0,t,e);const{providerUserInfo:r}=await yP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Ox(r||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function K1(n,e,t=!1){const r=await ro(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ns._forOperation(n,"link",r)}async function Op(n,e,t){await Lf(e);const r=Ox(e.providerData),i=n===!1?"provider-already-linked":"no-such-provider";tt(r.has(t)===n,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mx(n,e,t=!1){const{auth:r}=n;if(ir(r.app))return Promise.reject(qr(r));const i="reauthenticate";try{const s=await ro(n,Fx(r,i,e,n),t);tt(s.idToken,r,"internal-error");const a=Lp(s.idToken);tt(a,r,"internal-error");const{sub:o}=a;return tt(n.uid===o,r,"user-mismatch"),Ns._forOperation(n,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&si(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bx(n,e,t=!1){if(ir(n.app))return Promise.reject(qr(n));const r="signIn",i=await Fx(n,r,e),s=await Ns._fromIdTokenResponse(n,r,i);return t||await n._updateCurrentUser(s.user),s}async function Mp(n,e){return Bx(ar(n),e)}async function Vx(n,e){const t=St(n);return await Op(!1,t,e.providerId),K1(t,e)}async function Ux(n,e){return Mx(St(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(n,e){return co(n,"POST","/v1/accounts:signInWithCustomToken",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mN(n,e){if(ir(n.app))return Promise.reject(qr(n));const t=ar(n),r=await pN(t,{token:e,returnSecureToken:!0}),i=await Ns._fromIdTokenResponse(t,"signIn",r);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Y1._fromServerResponse(e,t):"totpInfo"in t?X1._fromServerResponse(e,t):si(e,"internal-error")}}class Y1 extends fd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Y1(t)}}class X1 extends fd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new X1(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(n,e,t){var r;tt(((r=t.url)===null||r===void 0?void 0:r.length)>0,n,"invalid-continue-uri"),tt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,n,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(tt(t.iOS.bundleId.length>0,n,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(tt(t.android.packageName.length>0,n,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J1(n){const e=ar(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function gN(n,e,t){const r=ar(n),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Bp(r,i,t),await Df(r,i,"getOobCode",JP)}async function vN(n,e,t){await Lx(St(n),{oobCode:e,newPassword:t}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J1(n),r})}async function _N(n,e){await KP(St(n),{oobCode:e})}async function jx(n,e){const t=St(n),r=await Lx(t,{oobCode:e}),i=r.requestType;switch(tt(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(r.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(r.mfaInfo,t,"internal-error");default:tt(r.email,t,"internal-error")}let s=null;return r.mfaInfo&&(s=fd._fromServerResponse(ar(t),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function yN(n,e){const{data:t}=await jx(St(n),e);return t.email}async function wN(n,e,t){if(ir(n.app))return Promise.reject(qr(n));const r=ar(n),a=await Df(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Dx).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&J1(n),c}),o=await Ns._fromIdTokenResponse(r,"signIn",a);return await r._updateCurrentUser(o.user),o}function xN(n,e,t){return ir(n.app)?Promise.reject(qr(n)):Mp(St(n),yc.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&J1(n),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EN(n,e,t){const r=ar(n),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){tt(o.handleCodeInApp,r,"argument-error"),o&&Bp(r,a,o)}s(i,t),await Df(r,i,"getOobCode",QP)}function TN(n,e){const t=Fp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function bN(n,e,t){if(ir(n.app))return Promise.reject(qr(n));const r=St(n),i=yc.credentialWithLink(e,t||Rf());return tt(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),Mp(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(n,e){return ur(n,"POST","/v1/accounts:createAuthUri",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IN(n,e){const t=H1()?Rf():"http://localhost",r={identifier:e,continueUri:t},{signinMethods:i}=await AN(St(n),r);return i||[]}async function SN(n,e){const t=St(n),i={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()};e&&Bp(t.auth,i,e);const{email:s}=await XP(t.auth,i);s!==n.email&&await n.reload()}async function PN(n,e,t){const r=St(n),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await n.getIdToken(),newEmail:e};t&&Bp(r.auth,s,t);const{email:a}=await ZP(r.auth,s);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(n,e){return ur(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kN(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const r=St(n),s={idToken:await r.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await ro(r,NN(r.auth,s));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const o=r.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=r.displayName,o.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function CN(n,e){const t=St(n);return ir(t.auth.app)?Promise.reject(qr(t.auth)):qx(t,e,null)}function RN(n,e){return qx(St(n),null,e)}async function qx(n,e,t){const{auth:r}=n,s={idToken:await n.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await ro(n,$P(r,s));await n._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(n){var e,t;if(!n)return null;const{providerId:r}=n,i=n.rawUserInfo?JSON.parse(n.rawUserInfo):{},s=n.isNewUser||n.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(n!=null&&n.idToken)){const a=(t=(e=Lp(n.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Fl(s,o)}}if(!r)return null;switch(r){case"facebook.com":return new DN(s,i);case"github.com":return new FN(s,i);case"google.com":return new ON(s,i);case"twitter.com":return new MN(s,i,n.screenName||null);case"custom":case"anonymous":return new Fl(s,null);default:return new Fl(s,r,i)}}class Fl{constructor(e,t,r={}){this.isNewUser=e,this.providerId=t,this.profile=r}}class zx extends Fl{constructor(e,t,r,i){super(e,t,r),this.username=i}}class DN extends Fl{constructor(e,t){super(e,"facebook.com",t)}}class FN extends zx{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class ON extends Fl{constructor(e,t){super(e,"google.com",t)}}class MN extends zx{constructor(e,t,r){super(e,"twitter.com",t,r)}}function BN(n){const{user:e,_tokenResponse:t}=n;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:LN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t,r){this.type=e,this.credential=t,this.user=r}static _fromIdtoken(e,t){return new eu("enroll",e,t)}static _fromMfaPendingCredential(e){return new eu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,r;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return eu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return eu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q1{constructor(e,t,r){this.session=e,this.hints=t,this.signInResolver=r}static _fromError(e,t){const r=ar(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>fd._fromServerResponse(r,o));tt(i.mfaPendingCredential,r,"internal-error");const a=eu._fromMfaPendingCredential(i.mfaPendingCredential);return new Q1(a,s,async o=>{const c=await o._process(r,a);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const l=await Ns._fromIdTokenResponse(r,t.operationType,u);return await r._updateCurrentUser(l.user),l;case"reauthenticate":return tt(t.user,r,"internal-error"),Ns._forOperation(t.user,t.operationType,u);default:si(r,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function VN(n,e){var t;const r=St(n),i=e;return tt(e.customData.operationType,r,"argument-error"),tt((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,r,"argument-error"),Q1._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UN(n,e){return ur(n,"POST","/v2/accounts/mfaEnrollment:start",cr(n,e))}function jN(n,e){return ur(n,"POST","/v2/accounts/mfaEnrollment:finalize",cr(n,e))}function qN(n,e){return ur(n,"POST","/v2/accounts/mfaEnrollment:withdraw",cr(n,e))}class Z1{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(r=>fd._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new Z1(e)}async getSession(){return eu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const r=e,i=await this.getSession(),s=await ro(this.user,r._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await ro(this.user,qN(this.user.auth,{idToken:r,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Zm=new WeakMap;function zN(n){const e=St(n);return Zm.has(e)||Zm.set(e,Z1._fromUser(e)),Zm.get(e)}const G0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(G0,"1"),this.storage.removeItem(G0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=1e3,HN=10;class Hx extends Wx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Nx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),i=this.localCache[t];r!==i&&e(t,i,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const r=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!t&&this.localCache[r]===a||this.notifyListeners(r,a)},s=this.storage.getItem(r);NP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,HN):i()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},WN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Hx.type="LOCAL";const e2=Hx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x extends Wx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}$x.type="SESSION";const lu=$x;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $N(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const r=new Vp(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),c=await $N(o);t.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=dd("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(){return window}function KN(n){Tr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(){return typeof Tr().WorkerGlobalScope<"u"&&typeof Tr().importScripts=="function"}async function YN(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XN(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function JN(){return t2()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gx="firebaseLocalStorageDb",QN=1,K0="firebaseLocalStorage",Kx="fbase_key";class pd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Up(n,e){return n.transaction([K0],e?"readwrite":"readonly").objectStore(K0)}function ZN(){const n=indexedDB.deleteDatabase(Gx);return new pd(n).toPromise()}function Vg(){const n=indexedDB.open(Gx,QN);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(K0,{keyPath:Kx})}catch(i){t(i)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(K0)?e(r):(r.close(),await ZN(),e(await Vg()))})})}async function Y_(n,e,t){const r=Up(n,!0).put({[Kx]:e,value:t});return new pd(r).toPromise()}async function ek(n,e){const t=Up(n,!1).get(e),r=await new pd(t).toPromise();return r===void 0?null:r.value}function X_(n,e){const t=Up(n,!0).delete(e);return new pd(t).toPromise()}const tk=800,nk=3;class Yx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>nk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return t2()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vp._getInstance(JN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await YN(),!this.activeServiceWorker)return;this.sender=new GN(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await Y_(e,G0,"1"),await X_(e,G0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Y_(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>ek(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>X_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Up(i,!1).getAll();return new pd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Yx.type="LOCAL";const Of=Yx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rk(n,e){return ur(n,"POST","/v2/accounts/mfaSignIn:start",cr(n,e))}function ik(n,e){return ur(n,"POST","/v2/accounts/mfaSignIn:finalize",cr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=500,ak=6e4,s0=1e12;class ok{constructor(e){this.auth=e,this.counter=s0,this._widgets=new Map}render(e,t){const r=this.counter;return this._widgets.set(r,new ck(e,this.auth.name,t||{})),this.counter++,r}reset(e){var t;const r=e||s0;(t=this._widgets.get(r))===null||t===void 0||t.delete(),this._widgets.delete(r)}getResponse(e){var t;const r=e||s0;return((t=this._widgets.get(r))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const r=e||s0;return(t=this._widgets.get(r))===null||t===void 0||t.execute(),""}}class ck{constructor(e,t,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;tt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=uk(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},ak)},sk))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function uk(n){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<n;r++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=Cx("rcb"),lk=new cd(3e4,6e4);class hk{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Tr().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return tt(fk(t),e,"argument-error"),this.shouldResolveImmediately(t)&&U_(Tr().grecaptcha)?Promise.resolve(Tr().grecaptcha):new Promise((r,i)=>{const s=Tr().setTimeout(()=>{i(Cr(e,"network-request-failed"))},lk.get());Tr()[eg]=()=>{Tr().clearTimeout(s),delete Tr()[eg];const o=Tr().grecaptcha;if(!o||!U_(o)){i(Cr(e,"internal-error"));return}const c=o.render;o.render=(u,l)=>{const d=c(u,l);return this.counter++,d},this.hostLanguage=t,r(o)};const a=`${OP()}?${hh({onload:eg,render:"explicit",hl:t})}`;G1(a).catch(()=>{clearTimeout(s),i(Cr(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=Tr().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function fk(n){return n.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n)}class dk{async load(e){return new ok(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="recaptcha",pk={theme:"light",type:"image"};let mk=class{constructor(e,t,r=Object.assign({},pk)){this.parameters=r,this.type=Xx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ar(e),this.isInvisible=this.parameters.size==="invisible",tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;tt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dk:new hk,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),r=t.getResponse(e);return r||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(r=>r(t)),typeof e=="function")e(t);else if(typeof e=="string"){const r=Tr()[e];typeof r=="function"&&r(t)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){tt(H1()&&!t2(),this.auth,"internal-error"),await gk(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await gP(this.auth);tt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function gk(){let n=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}n=()=>e(),window.addEventListener("load",n)}).catch(e=>{throw n&&window.removeEventListener("load",n),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=su._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function vk(n,e,t){if(ir(n.app))return Promise.reject(qr(n));const r=ar(n),i=await jp(r,e,St(t));return new n2(i,s=>Mp(r,s))}async function _k(n,e,t){const r=St(n);await Op(!1,r,"phone");const i=await jp(r.auth,e,St(t));return new n2(i,s=>Vx(r,s))}async function yk(n,e,t){const r=St(n);if(ir(r.auth.app))return Promise.reject(qr(r.auth));const i=await jp(r.auth,e,St(t));return new n2(i,s=>Ux(r,s))}async function jp(n,e,t){var r;const i=await t.verify();try{tt(typeof i=="string",n,"argument-error"),tt(t.type===Xx,n,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return tt(a.type==="enroll",n,"internal-error"),(await UN(n,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{tt(a.type==="signin",n,"internal-error");const o=((r=s.multiFactorHint)===null||r===void 0?void 0:r.uid)||s.multiFactorUid;return tt(o,n,"missing-multi-factor-info"),(await rk(n,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await rN(n,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function wk(n,e){const t=St(n);if(ir(t.auth.app))return Promise.reject(qr(t.auth));await K1(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu=class I0{constructor(e){this.providerId=I0.PROVIDER_ID,this.auth=ar(e)}verifyPhoneNumber(e,t){return jp(this.auth,e,St(t))}static credential(e,t){return su._fromVerification(e,t)}static credentialFromResult(e){const t=e;return I0.credentialFromTaggedObject(t)}static credentialFromError(e){return I0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:r}=e;return t&&r?su._fromTokenResponse(t,r):null}};hu.PROVIDER_ID="phone";hu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(n,e){return e?ds(e):(tt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2 extends ph{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Qa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Qa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function xk(n){return Bx(n.auth,new r2(n),n.bypassAuthState)}function Ek(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),Mx(t,new r2(n),n.bypassAuthState)}async function Tk(n){const{auth:e,user:t}=n;return tt(t,e,"internal-error"),K1(t,new r2(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,t,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return xk;case"linkViaPopup":case"linkViaRedirect":return Tk;case"reauthViaPopup":case"reauthViaRedirect":return Ek;default:si(this.auth,"internal-error")}}resolve(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=new cd(2e3,1e4);async function Ak(n,e,t){if(ir(n.app))return Promise.reject(Cr(n,"operation-not-supported-in-this-environment"));const r=ar(n);dh(n,e,uo);const i=ku(r,t);return new Ya(r,"signInViaPopup",e,i).executeNotNull()}async function Ik(n,e,t){const r=St(n);if(ir(r.auth.app))return Promise.reject(Cr(r.auth,"operation-not-supported-in-this-environment"));dh(r.auth,e,uo);const i=ku(r.auth,t);return new Ya(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function Sk(n,e,t){const r=St(n);dh(r.auth,e,uo);const i=ku(r.auth,t);return new Ya(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class Ya extends Jx{constructor(e,t,r,i,s){super(e,t,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Xs(this.filter.length===1,"Popup operations only handle one event");const e=dd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Cr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Cr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bk.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="pendingRedirect",df=new Map;class Nk extends Jx{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=df.get(this.auth._key());if(!e){try{const r=await kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}df.set(this.auth._key(),e)}return this.bypassAuthState||df.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kk(n,e){const t=Zx(e),r=Qx(n);if(!await r._isAvailable())return!1;const i=await r._get(t)==="true";return await r._remove(t),i}async function i2(n,e){return Qx(n)._set(Zx(e),"true")}function Ck(){df.clear()}function s2(n,e){df.set(n._key(),e)}function Qx(n){return ds(n._redirectPersistence)}function Zx(n){return iu(Pk,n.config.apiKey,n.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(n,e,t){return Lk(n,e,t)}async function Lk(n,e,t){if(ir(n.app))return Promise.reject(qr(n));const r=ar(n);dh(n,e,uo),await r._initializationPromise;const i=ku(r,t);return await i2(i,r),i._openRedirect(r,e,"signInViaRedirect")}function Dk(n,e,t){return Fk(n,e,t)}async function Fk(n,e,t){const r=St(n);if(dh(r.auth,e,uo),ir(r.auth.app))return Promise.reject(qr(r.auth));await r.auth._initializationPromise;const i=ku(r.auth,t);await i2(i,r.auth);const s=await eE(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",s)}function Ok(n,e,t){return Mk(n,e,t)}async function Mk(n,e,t){const r=St(n);dh(r.auth,e,uo),await r.auth._initializationPromise;const i=ku(r.auth,t);await Op(!1,r,e.providerId),await i2(i,r.auth);const s=await eE(r);return i._openRedirect(r.auth,e,"linkViaRedirect",s)}async function Bk(n,e){return await ar(n)._initializationPromise,qp(n,e,!1)}async function qp(n,e,t=!1){if(ir(n.app))return Promise.reject(qr(n));const r=ar(n),i=ku(r,e),a=await new Nk(r,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}async function eE(n){const e=dd(`${n.uid}:::`);return n._redirectEventId=e,await n.auth._setRedirectUser(n),await n.auth._persistUserIfCurrent(n),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=10*60*1e3;class tE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Uk(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!nE(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Cr(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vk&&this.cachedEventUids.clear(),this.cachedEventUids.has(J_(e))}saveEventToCache(e){this.cachedEventUids.add(J_(e)),this.lastProcessedEventTime=Date.now()}}function J_(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function nE({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Uk(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nE(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rE(n,e={}){return ur(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qk=/^https?/;async function zk(n){if(n.config.emulator)return;const{authorizedDomains:e}=await rE(n);for(const t of e)try{if(Wk(t))return}catch{}si(n,"unauthorized-domain")}function Wk(n){const e=Rf(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const a=new URL(n);return a.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===r}if(!qk.test(t))return!1;if(jk.test(n))return r===n;const i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=new cd(3e4,6e4);function Q_(){const n=Tr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function $k(n){return new Promise((e,t)=>{var r,i,s;function a(){Q_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Q_(),t(Cr(n,"network-request-failed"))},timeout:Hk.get()})}if(!((i=(r=Tr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Tr().gapi)===null||s===void 0)&&s.load)a();else{const o=Cx("iframefcb");return Tr()[o]=()=>{gapi.load?a():t(Cr(n,"network-request-failed"))},G1(`${BP()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw S0=null,e})}let S0=null;function Gk(n){return S0=S0||$k(n),S0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new cd(5e3,15e3),Yk="__/auth/iframe",Xk="emulator/auth/iframe",Jk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Qk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Zk(n){const e=n.config;tt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$1(e,Xk):`https://${n.config.authDomain}/${Yk}`,r={apiKey:e.apiKey,appName:n.name,v:_c},i=Qk.get(n.config.apiHost);i&&(r.eid=i);const s=n._getFrameworks();return s.length&&(r.fw=s.join(",")),`${t}?${hh(r).slice(1)}`}async function eC(n){const e=await Gk(n),t=Tr().gapi;return tt(t,n,"internal-error"),e.open({where:document.body,url:Zk(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Jk,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const a=Cr(n,"network-request-failed"),o=Tr().setTimeout(()=>{s(a)},Kk.get());function c(){Tr().clearTimeout(o),i(r)}r.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nC=500,rC=600,iC="_blank",sC="http://localhost";class Z_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aC(n,e,t,r=nC,i=rC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const c=Object.assign(Object.assign({},tC),{width:r.toString(),height:i.toString(),top:s,left:a}),u=Jn().toLowerCase();t&&(o=Ax(u)?iC:t),Tx(u)&&(e=e||sC,c.scrollbars="yes");const l=Object.entries(c).reduce((g,[p,x])=>`${g}${p}=${x},`,"");if(PP(u)&&o!=="_self")return oC(e||"",o),new Z_(null);const d=window.open(e||"",o,l);tt(d,n,"popup-blocked");try{d.focus()}catch{}return new Z_(d)}function oC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cC="__/auth/handler",uC="emulator/auth/handler",lC=encodeURIComponent("fac");async function Ug(n,e,t,r,i,s){tt(n.config.authDomain,n,"auth-domain-config-required"),tt(n.config.apiKey,n,"invalid-api-key");const a={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:_c,eventId:i};if(e instanceof uo){e.setDefaultLanguage(n.languageCode),a.providerId=e.providerId||"",O4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))a[l]=d}if(e instanceof mh){const l=e.getScopes().filter(d=>d!=="");l.length>0&&(a.scopes=l.join(","))}n.tenantId&&(a.tid=n.tenantId);const o=a;for(const l of Object.keys(o))o[l]===void 0&&delete o[l];const c=await n._getAppCheckToken(),u=c?`#${lC}=${encodeURIComponent(c)}`:"";return`${hC(n)}?${hh(o).slice(1)}${u}`}function hC({config:n}){return n.emulator?$1(n,uC):`https://${n.authDomain}/${cC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="webStorageSupport";class fC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=lu,this._completeRedirectFn=qp,this._overrideRedirectResult=s2}async _openPopup(e,t,r,i){var s;Xs((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Ug(e,t,r,Rf(),i);return aC(e,a,dd())}async _openRedirect(e,t,r,i){await this._originValidation(e);const s=await Ug(e,t,r,Rf(),i);return KN(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Xs(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await eC(e),r=new tE(e);return t.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(tg,{type:tg},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[tg];a!==void 0&&t(!!a),si(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zk(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Nx()||bx()||ld()}}const dC=fC;class pC{constructor(e){this.factorId=e}_process(e,t,r){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,r);case"signin":return this._finalizeSignIn(e,t.credential);default:return pa("unexpected MultiFactorSessionType")}}}class a2 extends pC{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new a2(e)}_finalizeEnroll(e,t,r){return jN(e,{idToken:t,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return ik(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class iE{constructor(){}static assertion(e){return a2._fromCredential(e)}}iE.FACTOR_ID="phone";var ey="@firebase/auth",ty="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function vC(n){Yi(new zr("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;tt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:o,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:kx(n)},u=new DP(r,i,s,c);return qP(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Yi(new zr("auth-internal",e=>{const t=ar(e.getProvider("auth").getImmediate());return(r=>new mC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(ey,ty,gC(n)),ni(ey,ty,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=5*60;A4("authIdTokenMaxAge");function yC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}FP({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{const s=Cr("internal-error");s.customData=i,t(s)},r.type="text/javascript",r.charset="UTF-8",yC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});vC("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=2e3;async function xC(n,e,t){var r;const{BuildInfo:i}=fu();Xs(e.sessionId,"AuthEvent did not contain a session ID");const s=await IC(e.sessionId),a={};return ld()?a.ibi=i.packageName:ud()?a.apn=i.packageName:si(n,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Ug(n,t,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,a)}async function EC(n){const{BuildInfo:e}=fu(),t={};ld()?t.iosBundleId=e.packageName:ud()?t.androidPackageName=e.packageName:si(n,"operation-not-supported-in-this-environment"),await rE(n,t)}function TC(n){const{cordova:e}=fu();return new Promise(t=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(n):i=e.InAppBrowser.open(n,SP()?"_blank":"_system","location=yes"),t(i)})})}async function bC(n,e,t){const{cordova:r}=fu();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var d;s();const g=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof g=="function"&&g(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function u(){o||(o=window.setTimeout(()=>{a(Cr(n,"redirect-cancelled-by-user"))},wC))}function l(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),ud()&&document.addEventListener("visibilitychange",l,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}})}finally{i()}}function AC(n){var e,t,r,i,s,a,o,c,u,l;const d=fu();tt(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt(typeof((s=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((c=(o=(a=d==null?void 0:d.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((l=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||l===void 0?void 0:l.open)=="function",n,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function IC(n){const e=SC(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function SC(n){if(Xs(/[0-9a-zA-Z]+/.test(n),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(n);const e=new ArrayBuffer(n.length),t=new Uint8Array(e);for(let r=0;r<n.length;r++)t[r]=n.charCodeAt(r);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=20;class NC extends tE{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function kC(n,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:LC(),postBody:null,tenantId:n.tenantId,error:Cr(n,"no-auth-event")}}function CC(n,e){return jg()._set(qg(n),e)}async function ny(n){const e=await jg()._get(qg(n));return e&&await jg()._remove(qg(n)),e}function RC(n,e){var t,r;const i=FC(e);if(i.includes("/__/auth/callback")){const s=P0(i),a=s.firebaseError?DC(decodeURIComponent(s.firebaseError)):null,o=(r=(t=a==null?void 0:a.code)===null||t===void 0?void 0:t.split("auth/"))===null||r===void 0?void 0:r[1],c=o?Cr(o):null;return c?{type:n.type,eventId:n.eventId,tenantId:n.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:n.type,eventId:n.eventId,tenantId:n.tenantId,sessionId:n.sessionId,urlResponse:i,postBody:null}}return null}function LC(){const n=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<PC;t++){const r=Math.floor(Math.random()*e.length);n.push(e.charAt(r))}return n.join("")}function jg(){return ds(e2)}function qg(n){return iu("authEvent",n.config.apiKey,n.name)}function DC(n){try{return JSON.parse(n)}catch{return null}}function FC(n){const e=P0(n),t=e.link?decodeURIComponent(e.link):void 0,r=P0(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return P0(i).link||i||r||t||n}function P0(n){if(!(n!=null&&n.includes("?")))return{};const[e,...t]=n.split("?");return Pl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=500;class MC{constructor(){this._redirectPersistence=lu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=qp,this._overrideRedirectResult=s2}async _initialize(e){const t=e._key();let r=this.eventManagers.get(t);return r||(r=new NC(e),this.eventManagers.set(t,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){si(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,r,i){AC(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),Ck(),await this._originValidation(e);const a=kC(e,r,i);await CC(e,a);const o=await xC(e,a,t),c=await TC(o);return bC(e,s,c)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=EC(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:r,handleOpenURL:i,BuildInfo:s}=fu(),a=setTimeout(async()=>{await ny(e),t.onEvent(ry())},OC),o=async l=>{clearTimeout(a);const d=await ny(e);let g=null;d&&(l!=null&&l.url)&&(g=RC(d,l.url)),t.onEvent(g||ry())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,o);const c=i,u=`${s.packageName.toLowerCase()}://`;fu().handleOpenURL=async l=>{if(l.toLowerCase().startsWith(u)&&o({url:l}),typeof c=="function")try{c(l)}catch(d){console.error(d)}}}}const BC=MC;function ry(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Cr("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(n,e){ar(n)._logFramework(e)}var UC="@firebase/auth-compat",jC="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=1e3;function pf(){var n;return((n=self==null?void 0:self.location)===null||n===void 0?void 0:n.protocol)||null}function zC(){return pf()==="http:"||pf()==="https:"}function sE(n=Jn()){return!!((pf()==="file:"||pf()==="ionic:"||pf()==="capacitor:")&&n.toLowerCase().match(/iphone|ipad|ipod|android/))}function WC(){return M1()||O1()}function HC(){return ex()&&(document==null?void 0:document.documentMode)===11}function $C(n=Jn()){return/Edge\/\d+/.test(n)}function GC(n=Jn()){return HC()||$C(n)}function aE(){try{const n=self.localStorage,e=dd();if(n)return n.setItem(e,"1"),n.removeItem(e),GC()?uu():!0}catch{return o2()&&uu()}return!1}function o2(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ng(){return(zC()||Z5()||sE())&&!WC()&&aE()&&!o2()}function oE(){return sE()&&typeof document<"u"}async function KC(){return oE()?new Promise(n=>{const e=setTimeout(()=>{n(!1)},qC);document.addEventListener("deviceready",()=>{clearTimeout(e),n(!0)})}):!1}function YC(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls={LOCAL:"local",NONE:"none",SESSION:"session"},Gh=tt,cE="persistence";function XC(n,e){if(Gh(Object.values(ls).includes(e),n,"invalid-persistence-type"),M1()){Gh(e!==ls.SESSION,n,"unsupported-persistence-type");return}if(O1()){Gh(e===ls.NONE,n,"unsupported-persistence-type");return}if(o2()){Gh(e===ls.NONE||e===ls.LOCAL&&uu(),n,"unsupported-persistence-type");return}Gh(e===ls.NONE||aE(),n,"unsupported-persistence-type")}async function zg(n){await n._initializationPromise;const e=uE(),t=iu(cE,n.config.apiKey,n.name);e&&e.setItem(t,n._getPersistence())}function JC(n,e){const t=uE();if(!t)return[];const r=iu(cE,n,e);switch(t.getItem(r)){case ls.NONE:return[Yl];case ls.LOCAL:return[Of,lu];case ls.SESSION:return[lu];default:return[]}}function uE(){var n;try{return((n=YC())===null||n===void 0?void 0:n.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC=tt;class Jo{constructor(){this.browserResolver=ds(dC),this.cordovaResolver=ds(BC),this.underlyingResolver=null,this._redirectPersistence=lu,this._completeRedirectFn=qp,this._overrideRedirectResult=s2}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,r,i)}async _openRedirect(e,t,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,r,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return oE()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return QC(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await KC();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(n){return n.unwrap()}function ZC(n){return n.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(n){return hE(n)}function tR(n,e){var t;const r=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new nR(n,VN(n,e))}else if(r){const i=hE(e),s=e;i&&(s.credential=i,s.tenantId=r.tenantId||void 0,s.email=r.email||void 0,s.phoneNumber=r.phoneNumber||void 0)}}function hE(n){const{_tokenResponse:e}=n instanceof kr?n.customData:n;if(!e)return null;if(!(n instanceof kr)&&"temporaryProof"in e&&"phoneNumber"in e)return hu.credentialFromResult(n);const t=e.providerId;if(!t||t===$h.PASSWORD)return null;let r;switch(t){case $h.GOOGLE:r=ha;break;case $h.FACEBOOK:r=la;break;case $h.GITHUB:r=fa;break;case $h.TWITTER:r=da;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?t.startsWith("saml.")?Xl._create(t,o):Ea._fromParams({providerId:t,signInMethod:t,pendingToken:o,idToken:i,accessToken:s}):new Dl(t).credential({idToken:i,accessToken:s,rawNonce:c})}return n instanceof kr?r.credentialFromError(n):r.credentialFromResult(n)}function qi(n,e){return e.catch(t=>{throw t instanceof kr&&tR(n,t),t}).then(t=>{const r=t.operationType,i=t.user;return{operationType:r,credential:eR(t),additionalUserInfo:BN(t),user:zp.getOrCreate(i)}})}async function Wg(n,e){const t=await e;return{verificationId:t.verificationId,confirm:r=>qi(n,t.confirm(r))}}class nR{constructor(e,t){this.resolver=t,this.auth=ZC(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return qi(lE(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zp=class af{constructor(e){this._delegate=e,this.multiFactor=zN(e)}static getOrCreate(e){return af.USER_MAP.has(e)||af.USER_MAP.set(e,new af(e)),af.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return qi(this.auth,Vx(this._delegate,e))}async linkWithPhoneNumber(e,t){return Wg(this.auth,_k(this._delegate,e,t))}async linkWithPopup(e){return qi(this.auth,Sk(this._delegate,e,Jo))}async linkWithRedirect(e){return await zg(ar(this.auth)),Ok(this._delegate,e,Jo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return qi(this.auth,Ux(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Wg(this.auth,yk(this._delegate,e,t))}reauthenticateWithPopup(e){return qi(this.auth,Ik(this._delegate,e,Jo))}async reauthenticateWithRedirect(e){return await zg(ar(this.auth)),Dk(this._delegate,e,Jo)}sendEmailVerification(e){return SN(this._delegate,e)}async unlink(e){return await dN(this._delegate,e),this}updateEmail(e){return CN(this._delegate,e)}updatePassword(e){return RN(this._delegate,e)}updatePhoneNumber(e){return wk(this._delegate,e)}updateProfile(e){return kN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return PN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};zp.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kh=tt;class Hg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;Kh(r,"invalid-api-key",{appName:e.name}),Kh(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Jo:void 0;this._delegate=t.initialize({options:{persistence:rR(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(aP),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?zp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){zP(this._delegate,e,t)}applyActionCode(e){return _N(this._delegate,e)}checkActionCode(e){return jx(this._delegate,e)}confirmPasswordReset(e,t){return vN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return qi(this._delegate,wN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return IN(this._delegate,e)}isSignInWithEmailLink(e){return TN(this._delegate,e)}async getRedirectResult(){Kh(ng(),this._delegate,"operation-not-supported-in-this-environment");const e=await Bk(this._delegate,Jo);return e?qi(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){VC(this._delegate,e)}onAuthStateChanged(e,t,r){const{next:i,error:s,complete:a}=iy(e,t,r);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,t,r){const{next:i,error:s,complete:a}=iy(e,t,r);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,t){return EN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return gN(this._delegate,e,t||void 0)}async setPersistence(e){XC(this._delegate,e);let t;switch(e){case ls.SESSION:t=lu;break;case ls.LOCAL:t=await ds(Of)._isAvailable()?Of:e2;break;case ls.NONE:t=Yl;break;default:return si("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return qi(this._delegate,fN(this._delegate))}signInWithCredential(e){return qi(this._delegate,Mp(this._delegate,e))}signInWithCustomToken(e){return qi(this._delegate,mN(this._delegate,e))}signInWithEmailAndPassword(e,t){return qi(this._delegate,xN(this._delegate,e,t))}signInWithEmailLink(e,t){return qi(this._delegate,bN(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Wg(this._delegate,vk(this._delegate,e,t))}async signInWithPopup(e){return Kh(ng(),this._delegate,"operation-not-supported-in-this-environment"),qi(this._delegate,Ak(this._delegate,e,Jo))}async signInWithRedirect(e){return Kh(ng(),this._delegate,"operation-not-supported-in-this-environment"),await zg(this._delegate),Rk(this._delegate,e,Jo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return yN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Hg.Persistence=ls;function iy(n,e,t){let r=n;typeof n!="function"&&({next:r,error:e,complete:t}=n);const i=r;return{next:a=>i(a&&zp.getOrCreate(a)),error:e,complete:t}}function rR(n,e){const t=JC(n,e);if(typeof self<"u"&&!t.includes(Of)&&t.push(Of),typeof window<"u")for(const r of[e2,lu])t.includes(r)||t.push(r);return t.includes(Yl)||t.push(Yl),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(){this.providerId="phone",this._delegate=new hu(lE(On.auth()))}static credential(e,t){return hu.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}c2.PHONE_SIGN_IN_METHOD=hu.PHONE_SIGN_IN_METHOD;c2.PROVIDER_ID=hu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR=tt;class sR{constructor(e,t,r=On.app()){var i;iR((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new mk(r.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="auth-compat";function oR(n){n.INTERNAL.registerComponent(new zr(aR,e=>{const t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Hg(t,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ul.EMAIL_SIGNIN,PASSWORD_RESET:ul.PASSWORD_RESET,RECOVER_EMAIL:ul.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ul.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ul.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ul.VERIFY_EMAIL}},EmailAuthProvider:yc,FacebookAuthProvider:la,GithubAuthProvider:fa,GoogleAuthProvider:ha,OAuthProvider:Dl,SAMLAuthProvider:H0,PhoneAuthProvider:c2,PhoneMultiFactorGenerator:iE,RecaptchaVerifier:sR,TwitterAuthProvider:da,Auth:Hg,AuthCredential:ph,Error:kr}).setInstantiationMode("LAZY").setMultipleInstances(!1)),n.registerVersion(UC,jC)}oR(On);var sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var au,fE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function C(){}C.prototype=A.prototype,N.D=A.prototype,N.prototype=new C,N.prototype.constructor=N,N.C=function(B,b,S){for(var R=Array(arguments.length-2),se=2;se<arguments.length;se++)R[se-2]=arguments[se];return A.prototype[b].apply(B,R)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,A,C){C||(C=0);var B=Array(16);if(typeof A=="string")for(var b=0;16>b;++b)B[b]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(b=0;16>b;++b)B[b]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=N.g[0],C=N.g[1],b=N.g[2];var S=N.g[3],R=A+(S^C&(b^S))+B[0]+3614090360&4294967295;A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[1]+3905402710&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[2]+606105819&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[3]+3250441966&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(S^C&(b^S))+B[4]+4118548399&4294967295,A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[5]+1200080426&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[6]+2821735955&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[7]+4249261313&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(S^C&(b^S))+B[8]+1770035416&4294967295,A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[9]+2336552879&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[10]+4294925233&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[11]+2304563134&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(S^C&(b^S))+B[12]+1804603682&4294967295,A=C+(R<<7&4294967295|R>>>25),R=S+(b^A&(C^b))+B[13]+4254626195&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(C^S&(A^C))+B[14]+2792965006&4294967295,b=S+(R<<17&4294967295|R>>>15),R=C+(A^b&(S^A))+B[15]+1236535329&4294967295,C=b+(R<<22&4294967295|R>>>10),R=A+(b^S&(C^b))+B[1]+4129170786&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[6]+3225465664&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[11]+643717713&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[0]+3921069994&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(C^b))+B[5]+3593408605&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[10]+38016083&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[15]+3634488961&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[4]+3889429448&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(C^b))+B[9]+568446438&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[14]+3275163606&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[3]+4107603335&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[8]+1163531501&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(C^b))+B[13]+2850285829&4294967295,A=C+(R<<5&4294967295|R>>>27),R=S+(C^b&(A^C))+B[2]+4243563512&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^C&(S^A))+B[7]+1735328473&4294967295,b=S+(R<<14&4294967295|R>>>18),R=C+(S^A&(b^S))+B[12]+2368359562&4294967295,C=b+(R<<20&4294967295|R>>>12),R=A+(C^b^S)+B[5]+4294588738&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[8]+2272392833&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[11]+1839030562&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[14]+4259657740&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^S)+B[1]+2763975236&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[4]+1272893353&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[7]+4139469664&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[10]+3200236656&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^S)+B[13]+681279174&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[0]+3936430074&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[3]+3572445317&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[6]+76029189&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(C^b^S)+B[9]+3654602809&4294967295,A=C+(R<<4&4294967295|R>>>28),R=S+(A^C^b)+B[12]+3873151461&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^C)+B[15]+530742520&4294967295,b=S+(R<<16&4294967295|R>>>16),R=C+(b^S^A)+B[2]+3299628645&4294967295,C=b+(R<<23&4294967295|R>>>9),R=A+(b^(C|~S))+B[0]+4096336452&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[7]+1126891415&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[14]+2878612391&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[5]+4237533241&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~S))+B[12]+1700485571&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[3]+2399980690&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[10]+4293915773&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[1]+2240044497&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~S))+B[8]+1873313359&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[15]+4264355552&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[6]+2734768916&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[13]+1309151649&4294967295,C=b+(R<<21&4294967295|R>>>11),R=A+(b^(C|~S))+B[4]+4149444226&4294967295,A=C+(R<<6&4294967295|R>>>26),R=S+(C^(A|~b))+B[11]+3174756917&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~C))+B[2]+718787259&4294967295,b=S+(R<<15&4294967295|R>>>17),R=C+(S^(b|~A))+B[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+b&4294967295,N.g[3]=N.g[3]+S&4294967295}r.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var C=A-this.blockSize,B=this.B,b=this.h,S=0;S<A;){if(b==0)for(;S<=C;)i(this,N,S),S+=this.blockSize;if(typeof N=="string"){for(;S<A;)if(B[b++]=N.charCodeAt(S++),b==this.blockSize){i(this,B),b=0;break}}else for(;S<A;)if(B[b++]=N[S++],b==this.blockSize){i(this,B),b=0;break}}this.h=b,this.o+=A},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var C=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=C&255,C/=256;for(this.u(N),N=Array(16),A=C=0;4>A;++A)for(var B=0;32>B;B+=8)N[C++]=this.g[A]>>>B&255;return N};function s(N,A){var C=o;return Object.prototype.hasOwnProperty.call(C,N)?C[N]:C[N]=A(N)}function a(N,A){this.h=A;for(var C=[],B=!0,b=N.length-1;0<=b;b--){var S=N[b]|0;B&&S==A||(C[b]=S,B=!1)}this.g=C}var o={};function c(N){return-128<=N&&128>N?s(N,function(A){return new a([A|0],0>A?-1:0)}):new a([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return d;if(0>N)return E(u(-N));for(var A=[],C=1,B=0;N>=C;B++)A[B]=N/C|0,C*=4294967296;return new a(A,0)}function l(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return E(l(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(A,8)),B=d,b=0;b<N.length;b+=8){var S=Math.min(8,N.length-b),R=parseInt(N.substring(b,b+S),A);8>S?(S=u(Math.pow(A,S)),B=B.j(S).add(u(R))):(B=B.j(C),B=B.add(u(R)))}return B}var d=c(0),g=c(1),p=c(16777216);n=a.prototype,n.m=function(){if(_(this))return-E(this).m();for(var N=0,A=1,C=0;C<this.g.length;C++){var B=this.i(C);N+=(0<=B?B:4294967296+B)*A,A*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(_(this))return"-"+E(this).toString(N);for(var A=u(Math.pow(N,6)),C=this,B="";;){var b=K(C,A).g;C=P(C,b.j(A));var S=((0<C.g.length?C.g[0]:C.h)>>>0).toString(N);if(C=b,x(C))return S+B;for(;6>S.length;)S="0"+S;B=S+B}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function _(N){return N.h==-1}n.l=function(N){return N=P(this,N),_(N)?-1:x(N)?0:1};function E(N){for(var A=N.g.length,C=[],B=0;B<A;B++)C[B]=~N.g[B];return new a(C,~N.h).add(g)}n.abs=function(){return _(this)?E(this):this},n.add=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0,b=0;b<=A;b++){var S=B+(this.i(b)&65535)+(N.i(b)&65535),R=(S>>>16)+(this.i(b)>>>16)+(N.i(b)>>>16);B=R>>>16,S&=65535,R&=65535,C[b]=R<<16|S}return new a(C,C[C.length-1]&-2147483648?-1:0)};function P(N,A){return N.add(E(A))}n.j=function(N){if(x(this)||x(N))return d;if(_(this))return _(N)?E(this).j(E(N)):E(E(this).j(N));if(_(N))return E(this.j(E(N)));if(0>this.l(p)&&0>N.l(p))return u(this.m()*N.m());for(var A=this.g.length+N.g.length,C=[],B=0;B<2*A;B++)C[B]=0;for(B=0;B<this.g.length;B++)for(var b=0;b<N.g.length;b++){var S=this.i(B)>>>16,R=this.i(B)&65535,se=N.i(b)>>>16,me=N.i(b)&65535;C[2*B+2*b]+=R*me,L(C,2*B+2*b),C[2*B+2*b+1]+=S*me,L(C,2*B+2*b+1),C[2*B+2*b+1]+=R*se,L(C,2*B+2*b+1),C[2*B+2*b+2]+=S*se,L(C,2*B+2*b+2)}for(B=0;B<A;B++)C[B]=C[2*B+1]<<16|C[2*B];for(B=A;B<2*A;B++)C[B]=0;return new a(C,0)};function L(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function V(N,A){this.g=N,this.h=A}function K(N,A){if(x(A))throw Error("division by zero");if(x(N))return new V(d,d);if(_(N))return A=K(E(N),A),new V(E(A.g),E(A.h));if(_(A))return A=K(N,E(A)),new V(E(A.g),A.h);if(30<N.g.length){if(_(N)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var C=g,B=A;0>=B.l(N);)C=ie(C),B=ie(B);var b=ae(C,1),S=ae(B,1);for(B=ae(B,2),C=ae(C,2);!x(B);){var R=S.add(B);0>=R.l(N)&&(b=b.add(C),S=R),B=ae(B,1),C=ae(C,1)}return A=P(N,b.j(A)),new V(b,A)}for(b=d;0<=N.l(A);){for(C=Math.max(1,Math.floor(N.m()/A.m())),B=Math.ceil(Math.log(C)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),S=u(C),R=S.j(A);_(R)||0<R.l(N);)C-=B,S=u(C),R=S.j(A);x(S)&&(S=g),b=b.add(S),N=P(N,R)}return new V(b,N)}n.A=function(N){return K(this,N).h},n.and=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0;B<A;B++)C[B]=this.i(B)&N.i(B);return new a(C,this.h&N.h)},n.or=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0;B<A;B++)C[B]=this.i(B)|N.i(B);return new a(C,this.h|N.h)},n.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),C=[],B=0;B<A;B++)C[B]=this.i(B)^N.i(B);return new a(C,this.h^N.h)};function ie(N){for(var A=N.g.length+1,C=[],B=0;B<A;B++)C[B]=N.i(B)<<1|N.i(B-1)>>>31;return new a(C,N.h)}function ae(N,A){var C=A>>5;A%=32;for(var B=N.g.length-C,b=[],S=0;S<B;S++)b[S]=0<A?N.i(S+C)>>>A|N.i(S+C+1)<<32-A:N.i(S+C);return new a(b,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fE=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=l,au=a}).apply(typeof sy<"u"?sy:typeof self<"u"?self:typeof window<"u"?window:{});var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var dE,of,pE,N0,$g,mE,gE,vE;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,k){return f==Array.prototype||f==Object.prototype||(f[w]=k.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof a0=="object"&&a0];for(var w=0;w<f.length;++w){var k=f[w];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var r=t(this);function i(f,w){if(w)e:{var k=r;f=f.split(".");for(var W=0;W<f.length-1;W++){var pe=f[W];if(!(pe in k))break e;k=k[pe]}f=f[f.length-1],W=k[f],w=w(W),w!=W&&w!=null&&e(k,f,{configurable:!0,writable:!0,value:w})}}function s(f,w){f instanceof String&&(f+="");var k=0,W=!1,pe={next:function(){if(!W&&k<f.length){var Ie=k++;return{value:w(Ie,f[Ie]),done:!1}}return W=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(f){return f||function(){return s(this,function(w,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function l(f,w,k){return f.call.apply(f.bind,arguments)}function d(f,w,k){if(!f)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,W),f.apply(w,pe)}}return function(){return f.apply(w,arguments)}}function g(f,w,k){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:d,g.apply(null,arguments)}function p(f,w){var k=Array.prototype.slice.call(arguments,1);return function(){var W=k.slice();return W.push.apply(W,arguments),f.apply(this,W)}}function x(f,w){function k(){}k.prototype=w.prototype,f.aa=w.prototype,f.prototype=new k,f.prototype.constructor=f,f.Qb=function(W,pe,Ie){for(var Qe=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Qe[Bt-2]=arguments[Bt];return w.prototype[pe].apply(W,Qe)}}function _(f){const w=f.length;if(0<w){const k=Array(w);for(let W=0;W<w;W++)k[W]=f[W];return k}return[]}function E(f,w){for(let k=1;k<arguments.length;k++){const W=arguments[k];if(c(W)){const pe=f.length||0,Ie=W.length||0;f.length=pe+Ie;for(let Qe=0;Qe<Ie;Qe++)f[pe+Qe]=W[Qe]}else f.push(W)}}class P{constructor(w,k){this.i=w,this.j=k,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function L(f){return/^[\s\xa0]*$/.test(f)}function V(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var ie=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function ae(f,w,k){for(const W in f)w.call(k,f[W],W,f)}function N(f,w){for(const k in f)w.call(void 0,f[k],k,f)}function A(f){const w={};for(const k in f)w[k]=f[k];return w}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,w){let k,W;for(let pe=1;pe<arguments.length;pe++){W=arguments[pe];for(k in W)f[k]=W[k];for(let Ie=0;Ie<C.length;Ie++)k=C[Ie],Object.prototype.hasOwnProperty.call(W,k)&&(f[k]=W[k])}}function b(f){var w=1;f=f.split(":");const k=[];for(;0<w&&f.length;)k.push(f.shift()),w--;return f.length&&k.push(f.join(":")),k}function S(f){o.setTimeout(()=>{throw f},0)}function R(){var f=ke;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class se{constructor(){this.h=this.g=null}add(w,k){const W=me.get();W.set(w,k),this.h?this.h.next=W:this.g=W,this.h=W}}var me=new P(()=>new Ee,f=>f.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(w,k){this.h=w,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let Pe,_e=!1,ke=new se,Oe=()=>{const f=o.Promise.resolve(void 0);Pe=()=>{f.then(rt)}};var rt=()=>{for(var f;f=R();){try{f.h.call(f.g)}catch(k){S(k)}var w=me;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}_e=!1};function T(){this.s=this.s,this.C=this.C}T.prototype.s=!1,T.prototype.ma=function(){this.s||(this.s=!0,this.N())},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const k=()=>{};o.addEventListener("test",k,w),o.removeEventListener("test",k,w)}catch{}return f}();function U(f,w){if(D.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var k=this.type=f.type,W=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(ie){e:{try{K(w.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(w=null)}}else k=="mouseover"?w=f.fromElement:k=="mouseout"&&(w=f.toElement);this.relatedTarget=w,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:J[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&U.aa.h.call(this)}}x(U,D);var J={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var oe="closure_listenable_"+(1e6*Math.random()|0),le=0;function ue(f,w,k,W,pe){this.listener=f,this.proxy=null,this.src=w,this.type=k,this.capture=!!W,this.ha=pe,this.key=++le,this.da=this.fa=!1}function xe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ve(f){this.src=f,this.g={},this.h=0}Ve.prototype.add=function(f,w,k,W,pe){var Ie=f.toString();f=this.g[Ie],f||(f=this.g[Ie]=[],this.h++);var Qe=Ze(f,w,W,pe);return-1<Qe?(w=f[Qe],k||(w.fa=!1)):(w=new ue(w,this.src,Ie,!!W,pe),w.fa=k,f.push(w)),w};function ze(f,w){var k=w.type;if(k in f.g){var W=f.g[k],pe=Array.prototype.indexOf.call(W,w,void 0),Ie;(Ie=0<=pe)&&Array.prototype.splice.call(W,pe,1),Ie&&(xe(w),f.g[k].length==0&&(delete f.g[k],f.h--))}}function Ze(f,w,k,W){for(var pe=0;pe<f.length;++pe){var Ie=f[pe];if(!Ie.da&&Ie.listener==w&&Ie.capture==!!k&&Ie.ha==W)return pe}return-1}var at="closure_lm_"+(1e6*Math.random()|0),Le={};function re(f,w,k,W,pe){if(Array.isArray(w)){for(var Ie=0;Ie<w.length;Ie++)re(f,w[Ie],k,W,pe);return null}return k=Ft(k),f&&f[oe]?f.K(w,k,u(W)?!!W.capture:!1,pe):We(f,w,k,!1,W,pe)}function We(f,w,k,W,pe,Ie){if(!w)throw Error("Invalid event type");var Qe=u(pe)?!!pe.capture:!!pe,Bt=Tt(f);if(Bt||(f[at]=Bt=new Ve(f)),k=Bt.add(w,k,W,Qe,Ie),k.proxy)return k;if(W=_t(),k.proxy=W,W.src=f,W.listener=k,f.addEventListener)M||(pe=Qe),pe===void 0&&(pe=!1),f.addEventListener(w.toString(),W,pe);else if(f.attachEvent)f.attachEvent(ct(w.toString()),W);else if(f.addListener&&f.removeListener)f.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return k}function _t(){function f(k){return w.call(f.src,f.listener,k)}const w=ut;return f}function $e(f,w,k,W,pe){if(Array.isArray(w))for(var Ie=0;Ie<w.length;Ie++)$e(f,w[Ie],k,W,pe);else W=u(W)?!!W.capture:!!W,k=Ft(k),f&&f[oe]?(f=f.i,w=String(w).toString(),w in f.g&&(Ie=f.g[w],k=Ze(Ie,k,W,pe),-1<k&&(xe(Ie[k]),Array.prototype.splice.call(Ie,k,1),Ie.length==0&&(delete f.g[w],f.h--)))):f&&(f=Tt(f))&&(w=f.g[w.toString()],f=-1,w&&(f=Ze(w,k,W,pe)),(k=-1<f?w[f]:null)&&nt(k))}function nt(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[oe])ze(w.i,f);else{var k=f.type,W=f.proxy;w.removeEventListener?w.removeEventListener(k,W,f.capture):w.detachEvent?w.detachEvent(ct(k),W):w.addListener&&w.removeListener&&w.removeListener(W),(k=Tt(w))?(ze(k,f),k.h==0&&(k.src=null,w[at]=null)):xe(f)}}}function ct(f){return f in Le?Le[f]:Le[f]="on"+f}function ut(f,w){if(f.da)f=!0;else{w=new U(w,this);var k=f.listener,W=f.ha||f.src;f.fa&&nt(f),f=k.call(W,w)}return f}function Tt(f){return f=f[at],f instanceof Ve?f:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(f){return typeof f=="function"?f:(f[At]||(f[At]=function(w){return f.handleEvent(w)}),f[At])}function It(){T.call(this),this.i=new Ve(this),this.M=this,this.F=null}x(It,T),It.prototype[oe]=!0,It.prototype.removeEventListener=function(f,w,k,W){$e(this,f,w,k,W)};function kt(f,w){var k,W=f.F;if(W)for(k=[];W;W=W.F)k.push(W);if(f=f.M,W=w.type||w,typeof w=="string")w=new D(w,f);else if(w instanceof D)w.target=w.target||f;else{var pe=w;w=new D(W,f),B(w,pe)}if(pe=!0,k)for(var Ie=k.length-1;0<=Ie;Ie--){var Qe=w.g=k[Ie];pe=Ht(Qe,W,!0,w)&&pe}if(Qe=w.g=f,pe=Ht(Qe,W,!0,w)&&pe,pe=Ht(Qe,W,!1,w)&&pe,k)for(Ie=0;Ie<k.length;Ie++)Qe=w.g=k[Ie],pe=Ht(Qe,W,!1,w)&&pe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var k=f.g[w],W=0;W<k.length;W++)xe(k[W]);delete f.g[w],f.h--}}this.F=null},It.prototype.K=function(f,w,k,W){return this.i.add(String(f),w,!1,k,W)},It.prototype.L=function(f,w,k,W){return this.i.add(String(f),w,!0,k,W)};function Ht(f,w,k,W){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var pe=!0,Ie=0;Ie<w.length;++Ie){var Qe=w[Ie];if(Qe&&!Qe.da&&Qe.capture==k){var Bt=Qe.listener,Xt=Qe.ha||Qe.src;Qe.fa&&ze(f.i,Qe),pe=Bt.call(Xt,W)!==!1&&pe}}return pe&&!W.defaultPrevented}function Ct(f,w,k){if(typeof f=="function")k&&(f=g(f,k));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:o.setTimeout(f,w||0)}function qt(f){f.g=Ct(()=>{f.g=null,f.i&&(f.i=!1,qt(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class pt extends T{constructor(w,k){super(),this.m=w,this.l=k,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bn(f){T.call(this),this.h=f,this.g={}}x(Bn,T);var Gt=[];function Wr(f){ae(f.g,function(w,k){this.g.hasOwnProperty(k)&&nt(w)},f),f.g={}}Bn.prototype.N=function(){Bn.aa.N.call(this),Wr(this)},Bn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tn=o.JSON.stringify,Tn=o.JSON.parse,Di=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Kt(){}Kt.prototype.h=null;function Zi(f){return f.h||(f.h=f.i())}function bn(){}var Ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _i(){D.call(this,"d")}x(_i,D);function un(){D.call(this,"c")}x(un,D);var Nt={},en=null;function Fi(){return en=en||new It}Nt.La="serverreachability";function Qn(f){D.call(this,Nt.La,f)}x(Qn,D);function Lr(f){const w=Fi();kt(w,new Qn(w))}Nt.STAT_EVENT="statevent";function yi(f,w){D.call(this,Nt.STAT_EVENT,f),this.stat=w}x(yi,D);function wt(f){const w=Fi();kt(w,new yi(w,f))}Nt.Ma="timingevent";function oi(f,w){D.call(this,Nt.Ma,f),this.size=w}x(oi,D);function _r(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},w)}function Zn(){this.g=!0}Zn.prototype.xa=function(){this.g=!1};function Yn(f,w,k,W,pe,Ie){f.info(function(){if(f.g)if(Ie)for(var Qe="",Bt=Ie.split("&"),Xt=0;Xt<Bt.length;Xt++){var Vt=Bt[Xt].split("=");if(1<Vt.length){var dn=Vt[0];Vt=Vt[1];var Nn=dn.split("_");Qe=2<=Nn.length&&Nn[1]=="type"?Qe+(dn+"="+Vt+"&"):Qe+(dn+"=redacted&")}}else Qe=null;else Qe=Ie;return"XMLHTTP REQ ("+W+") [attempt "+pe+"]: "+w+`
`+k+`
`+Qe})}function Wn(f,w,k,W,pe,Ie,Qe){f.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+pe+"]: "+w+`
`+k+`
`+Ie+" "+Qe})}function j(f,w,k,W){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Y(f,k)+(W?" "+W:"")})}function ee(f,w){f.info(function(){return"TIMEOUT: "+w})}Zn.prototype.info=function(){};function Y(f,w){if(!f.g)return w;if(!w)return null;try{var k=JSON.parse(w);if(k){for(f=0;f<k.length;f++)if(Array.isArray(k[f])){var W=k[f];if(!(2>W.length)){var pe=W[1];if(Array.isArray(pe)&&!(1>pe.length)){var Ie=pe[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var Qe=1;Qe<pe.length;Qe++)pe[Qe]=""}}}}return tn(k)}catch{return w}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},te;function ye(){}x(ye,Kt),ye.prototype.g=function(){return new XMLHttpRequest},ye.prototype.i=function(){return{}},te=new ye;function Re(f,w,k,W){this.j=f,this.i=w,this.l=k,this.R=W||1,this.U=new Bn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Te={},Ne={};function Ke(f,w,k){f.L=1,f.v=ka(xi(w)),f.m=k,f.P=!0,it(f,null)}function it(f,w){f.F=Date.now(),lt(f),f.A=xi(f.v);var k=f.A,W=f.R;Array.isArray(W)||(W=[String(W)]),Mt(k.i,"t",W),f.C=0,k=f.j.J,f.h=new we,f.g=F(f.j,k?w:null,!f.m),0<f.O&&(f.M=new pt(g(f.Y,f,f.g),f.O)),w=f.U,k=f.g,W=f.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Gt[0]=pe.toString()),pe=Gt);for(var Ie=0;Ie<pe.length;Ie++){var Qe=re(k,pe[Ie],W||w.handleEvent,!1,w.h||w);if(!Qe)break;w.g[Qe.key]=Qe}w=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),Lr(),Yn(f.i,f.u,f.A,f.l,f.R,f.m)}Re.prototype.ca=function(f){f=f.target;const w=this.M;w&&Sr(f)==3?w.j():this.Y(f)},Re.prototype.Y=function(f){try{if(f==this.g)e:{const Nn=Sr(this.g);var w=this.g.Ba();const Vs=this.g.Z();if(!(3>Nn)&&(Nn!=3||this.g&&(this.h.h||this.g.oa()||Ku(this.g)))){this.J||Nn!=4||w==7||(w==8||0>=Vs?Lr(3):Lr(2)),nn(this);var k=this.g.Z();this.X=k;t:if(mt(this)){var W=Ku(this.g);f="";var pe=W.length,Ie=Sr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),rn(this);var Qe="";break t}this.h.i=new o.TextDecoder}for(w=0;w<pe;w++)this.h.h=!0,f+=this.h.i.decode(W[w],{stream:!(Ie&&w==pe-1)});W.length=0,this.h.g+=f,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=k==200,Wn(this.i,this.u,this.A,this.l,this.R,Nn,k),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Xt=this.g;if((Bt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Bt)){var Vt=Bt;break t}}Vt=null}if(k=Vt)j(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wi(this,k);else{this.o=!1,this.s=3,wt(12),An(this),rn(this);break e}}if(this.P){k=!0;let Gr;for(;!this.J&&this.C<Qe.length;)if(Gr=et(this,Qe),Gr==Ne){Nn==4&&(this.s=4,wt(14),k=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(Gr==Te){this.s=4,wt(15),j(this.i,this.l,Qe,"[Invalid Chunk]"),k=!1;break}else j(this.i,this.l,Gr,null),wi(this,Gr);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Nn!=4||Qe.length!=0||this.h.h||(this.s=1,wt(16),k=!1),this.o=this.o&&k,!k)j(this.i,this.l,Qe,"[Invalid Chunked Response]"),An(this),rn(this);else if(0<Qe.length&&!this.W){this.W=!0;var dn=this.j;dn.g==this&&dn.ba&&!dn.M&&(dn.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),Po(dn),dn.M=!0,wt(11))}}else j(this.i,this.l,Qe,null),wi(this,Qe);Nn==4&&An(this),this.o&&!this.J&&(Nn==4?ra(this.j,this):(this.o=!1,lt(this)))}else ta(this.g),k==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),An(this),rn(this)}}}catch{}finally{}};function mt(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function et(f,w){var k=f.C,W=w.indexOf(`
`,k);return W==-1?Ne:(k=Number(w.substring(k,W)),isNaN(k)?Te:(W+=1,W+k>w.length?Ne:(w=w.slice(W,W+k),f.C=W+k,w)))}Re.prototype.cancel=function(){this.J=!0,An(this)};function lt(f){f.S=Date.now()+f.I,Lt(f,f.I)}function Lt(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=_r(g(f.ba,f),w)}function nn(f){f.B&&(o.clearTimeout(f.B),f.B=null)}Re.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ee(this.i,this.A),this.L!=2&&(Lr(),wt(17)),An(this),this.s=2,rn(this)):Lt(this,this.S-f)};function rn(f){f.j.G==0||f.J||ra(f.j,f)}function An(f){nn(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,Wr(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function wi(f,w){try{var k=f.j;if(k.G!=0&&(k.g==f||Hr(k.h,f))){if(!f.K&&Hr(k.h,f)&&k.G==3){try{var W=k.Da.g.parse(w)}catch{W=null}if(Array.isArray(W)&&W.length==3){var pe=W;if(pe[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<f.F)Bs(k),bo(k);else break e;Fa(k),wt(18)}}else k.za=pe[1],0<k.za-k.T&&37500>pe[2]&&k.F&&k.v==0&&!k.C&&(k.C=_r(g(k.Za,k),6e3));if(1>=ts(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else ci(k,11)}else if((f.K||k.g==f)&&Bs(k),!L(w))for(pe=k.Da.g.parse(w),w=0;w<pe.length;w++){let Vt=pe[w];if(k.T=Vt[0],Vt=Vt[1],k.G==2)if(Vt[0]=="c"){k.K=Vt[1],k.ia=Vt[2];const dn=Vt[3];dn!=null&&(k.la=dn,k.j.info("VER="+k.la));const Nn=Vt[4];Nn!=null&&(k.Aa=Nn,k.j.info("SVER="+k.Aa));const Vs=Vt[5];Vs!=null&&typeof Vs=="number"&&0<Vs&&(W=1.5*Vs,k.L=W,k.j.info("backChannelRequestTimeoutMs_="+W)),W=k;const Gr=f.g;if(Gr){const ia=Gr.g?Gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ia){var Ie=W.h;Ie.g||ia.indexOf("spdy")==-1&&ia.indexOf("quic")==-1&&ia.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Vn(Ie,Ie.h),Ie.h=null))}if(W.D){const sa=Gr.g?Gr.g.getResponseHeader("X-HTTP-Session-Id"):null;sa&&(W.ya=sa,pn(W.I,W.D,sa))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-f.F,k.j.info("Handshake RTT: "+k.R+"ms")),W=k;var Qe=f;if(W.qa=v(W,W.J?W.ia:null,W.W),Qe.K){Ac(W.h,Qe);var Bt=Qe,Xt=W.L;Xt&&(Bt.I=Xt),Bt.B&&(nn(Bt),lt(Bt)),W.g=Qe}else So(W);0<k.i.length&&Ao(k)}else Vt[0]!="stop"&&Vt[0]!="close"||ci(k,7);else k.G==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?ci(k,7):Ms(k):Vt[0]!="noop"&&k.l&&k.l.ta(Vt),k.v=0)}}Lr(4)}catch{}}var Rs=class{constructor(f,w){this.g=f,this.map=w}};function es(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Oi(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ts(f){return f.h?1:f.g?f.g.size:0}function Hr(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function Vn(f,w){f.g?f.g.add(w):f.h=w}function Ac(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}es.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ic(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const k of f.g.values())w=w.concat(k.D);return w}return _(f.i)}function qu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var w=[],k=f.length,W=0;W<k;W++)w.push(f[W]);return w}w=[],k=0;for(W in f)w[k++]=f[W];return w}function Sc(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var w=[];f=f.length;for(var k=0;k<f;k++)w.push(k);return w}w=[],k=0;for(const W in f)w[k++]=W;return w}}}function zu(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var k=Sc(f),W=qu(f),pe=W.length,Ie=0;Ie<pe;Ie++)w.call(void 0,W[Ie],k&&k[Ie],f)}var Mi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mo(f,w){if(f){f=f.split("&");for(var k=0;k<f.length;k++){var W=f[k].indexOf("="),pe=null;if(0<=W){var Ie=f[k].substring(0,W);pe=f[k].substring(W+1)}else Ie=f[k];w(Ie,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function er(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof er){this.h=f.h,Na(this,f.j),this.o=f.o,this.g=f.g,go(this,f.s),this.l=f.l;var w=f.i,k=new Zs;k.i=w.i,w.g&&(k.g=new Map(w.g),k.h=w.h),Pc(this,k),this.m=f.m}else f&&(w=String(f).match(Mi))?(this.h=!1,Na(this,w[1]||"",!0),this.o=Ca(w[2]||""),this.g=Ca(w[3]||"",!0),go(this,w[4]),this.l=Ca(w[5]||"",!0),Pc(this,w[6]||"",!0),this.m=Ca(w[7]||"")):(this.h=!1,this.i=new Zs(null,this.h))}er.prototype.toString=function(){var f=[],w=this.j;w&&f.push(Ls(w,Wu,!0),":");var k=this.g;return(k||w=="file")&&(f.push("//"),(w=this.o)&&f.push(Ls(w,Wu,!0),"@"),f.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&f.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&f.push("/"),f.push(Ls(k,k.charAt(0)=="/"?Ds:kh,!0))),(k=this.i.toString())&&f.push("?",k),(k=this.m)&&f.push("#",Ls(k,_o)),f.join("")};function xi(f){return new er(f)}function Na(f,w,k){f.j=k?Ca(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function go(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Pc(f,w,k){w instanceof Zs?(f.i=w,Ch(f.i,f.h)):(k||(w=Ls(w,vo)),f.i=new Zs(w,f.h))}function pn(f,w,k){f.i.set(w,k)}function ka(f){return pn(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ca(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Ls(f,w,k){return typeof f=="string"?(f=encodeURI(f).replace(w,Nh),k&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Nh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Wu=/[#\/\?@]/g,kh=/[#\?:]/g,Ds=/[#\?]/g,vo=/[#\?@]/g,_o=/#/g;function Zs(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Un(f){f.g||(f.g=new Map,f.h=0,f.i&&mo(f.i,function(w,k){f.add(decodeURIComponent(w.replace(/\+/g," ")),k)}))}n=Zs.prototype,n.add=function(f,w){Un(this),this.i=null,f=ea(this,f);var k=this.g.get(f);return k||this.g.set(f,k=[]),k.push(w),this.h+=1,this};function Hu(f,w){Un(f),w=ea(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Nc(f,w){return Un(f),w=ea(f,w),f.g.has(w)}n.forEach=function(f,w){Un(this),this.g.forEach(function(k,W){k.forEach(function(pe){f.call(w,pe,W,this)},this)},this)},n.na=function(){Un(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),k=[];for(let W=0;W<w.length;W++){const pe=f[W];for(let Ie=0;Ie<pe.length;Ie++)k.push(w[W])}return k},n.V=function(f){Un(this);let w=[];if(typeof f=="string")Nc(this,f)&&(w=w.concat(this.g.get(ea(this,f))));else{f=Array.from(this.g.values());for(let k=0;k<f.length;k++)w=w.concat(f[k])}return w},n.set=function(f,w){return Un(this),this.i=null,f=ea(this,f),Nc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},n.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Mt(f,w,k){Hu(f,w),0<k.length&&(f.i=null,f.g.set(ea(f,w),_(k)),f.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var k=0;k<w.length;k++){var W=w[k];const Ie=encodeURIComponent(String(W)),Qe=this.V(W);for(W=0;W<Qe.length;W++){var pe=Ie;Qe[W]!==""&&(pe+="="+encodeURIComponent(String(Qe[W]))),f.push(pe)}}return this.i=f.join("&")};function ea(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Ch(f,w){w&&!f.j&&(Un(f),f.i=null,f.g.forEach(function(k,W){var pe=W.toLowerCase();W!=pe&&(Hu(this,W),Mt(this,pe,k))},f)),f.j=w}function vs(f,w){const k=new Zn;if(o.Image){const W=new Image;W.onload=p(ns,k,"TestLoadImage: loaded",!0,w,W),W.onerror=p(ns,k,"TestLoadImage: error",!1,w,W),W.onabort=p(ns,k,"TestLoadImage: abort",!1,w,W),W.ontimeout=p(ns,k,"TestLoadImage: timeout",!1,w,W),o.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=f}else w(!1)}function $u(f,w){const k=new Zn,W=new AbortController,pe=setTimeout(()=>{W.abort(),ns(k,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:W.signal}).then(Ie=>{clearTimeout(pe),Ie.ok?ns(k,"TestPingServer: ok",!0,w):ns(k,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(pe),ns(k,"TestPingServer: error",!1,w)})}function ns(f,w,k,W,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),W(k)}catch{}}function yo(){this.g=new Di}function kc(f,w,k){const W=k||"";try{zu(f,function(pe,Ie){let Qe=pe;u(pe)&&(Qe=tn(pe)),w.push(W+Ie+"="+encodeURIComponent(Qe))})}catch(pe){throw w.push(W+"type="+encodeURIComponent("_badmap")),pe}}function wo(f){this.l=f.Ub||null,this.j=f.eb||!1}x(wo,Kt),wo.prototype.g=function(){return new xo(this.l,this.j)},wo.prototype.i=function(f){return function(){return f}}({});function xo(f,w){It.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(xo,It),n=xo.prototype,n.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,rs(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||o).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fs(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Fs(this):rs(this),this.readyState==3&&Gu(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,Fs(this))},n.Qa=function(f){this.g&&(this.response=f,Fs(this))},n.ga=function(){this.g&&Fs(this)};function Fs(f){f.readyState=4,f.l=null,f.j=null,f.v=null,rs(f)}n.setRequestHeader=function(f,w){this.u.append(f,w)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var k=w.next();!k.done;)k=k.value,f.push(k[0]+": "+k[1]),k=w.next();return f.join(`\r
`)};function rs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Os(f){let w="";return ae(f,function(k,W){w+=W,w+=":",w+=k,w+=`\r
`}),w}function Cc(f,w,k){e:{for(W in k){var W=!1;break e}W=!0}W||(k=Os(k),typeof f=="string"?k!=null&&encodeURIComponent(String(k)):pn(f,w,k))}function fn(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(fn,It);var Rc=/^https?$/i,Eo=["POST","PUT"];n=fn.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,w,k,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():te.g(),this.v=this.o?Zi(this.o):Zi(te),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(Ie){Lc(this,Ie);return}if(f=k||"",k=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var pe in W)k.set(pe,W[pe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ie of W.keys())k.set(Ie,W.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(k.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),pe=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(Eo,w,void 0))||W||pe||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,Qe]of k)this.g.setRequestHeader(Ie,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{is(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ie){Lc(this,Ie)}};function Lc(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Dc(f),Ra(f)}function Dc(f){f.A||(f.A=!0,kt(f,"complete"),kt(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,kt(this,"complete"),kt(this,"abort"),Ra(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),fn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Fc(this):this.bb())},n.bb=function(){Fc(this)};function Fc(f){if(f.h&&typeof a<"u"&&(!f.v[1]||Sr(f)!=4||f.Z()!=2)){if(f.u&&Sr(f)==4)Ct(f.Ea,0,f);else if(kt(f,"readystatechange"),Sr(f)==4){f.h=!1;try{const Qe=f.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var k;if(!(k=w)){var W;if(W=Qe===0){var pe=String(f.D).match(Mi)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),W=!Rc.test(pe?pe.toLowerCase():"")}k=W}if(k)kt(f,"complete"),kt(f,"success");else{f.m=6;try{var Ie=2<Sr(f)?f.g.statusText:""}catch{Ie=""}f.l=Ie+" ["+f.Z()+"]",Dc(f)}}finally{Ra(f)}}}}function Ra(f,w){if(f.g){is(f);const k=f.g,W=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||kt(f,"ready");try{k.onreadystatechange=W}catch{}}}function is(f){f.I&&(o.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Sr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Sr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Tn(w)}};function Ku(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ta(f){const w={};f=(f.g&&2<=Sr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<f.length;W++){if(L(f[W]))continue;var k=b(f[W]);const pe=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const Ie=w[pe]||[];w[pe]=Ie,Ie.push(k)}N(w,function(W){return W.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $r(f,w,k){return k&&k.internalChannelParams&&k.internalChannelParams[f]||w}function To(f){this.Aa=0,this.i=[],this.j=new Zn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$r("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$r("baseRetryDelayMs",5e3,f),this.cb=$r("retryDelaySeedMs",1e4,f),this.Wa=$r("forwardChannelMaxRetries",2,f),this.wa=$r("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new es(f&&f.concurrentRequestLimit),this.Da=new yo,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=To.prototype,n.la=8,n.G=1,n.connect=function(f,w,k,W){wt(0),this.W=f,this.H=w||{},k&&W!==void 0&&(this.H.OSID=k,this.H.OAID=W),this.F=this.X,this.I=v(this,null,this.W),Ao(this)};function Ms(f){if(La(f),f.G==3){var w=f.U++,k=xi(f.I);if(pn(k,"SID",f.K),pn(k,"RID",w),pn(k,"TYPE","terminate"),na(f,k),w=new Re(f,f.j,w),w.L=2,w.v=ka(xi(k)),k=!1,o.navigator&&o.navigator.sendBeacon)try{k=o.navigator.sendBeacon(w.v.toString(),"")}catch{}!k&&o.Image&&(new Image().src=w.v,k=!0),k||(w.g=F(w.j,null),w.g.ea(w.v)),w.F=Date.now(),lt(w)}ko(f)}function bo(f){f.g&&(Po(f),f.g.cancel(),f.g=null)}function La(f){bo(f),f.u&&(o.clearTimeout(f.u),f.u=null),Bs(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function Ao(f){if(!Oi(f.h)&&!f.s){f.s=!0;var w=f.Ga;Pe||Oe(),_e||(Pe(),_e=!0),ke.add(w,f),f.B=0}}function Oc(f,w){return ts(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=_r(g(f.Ga,f,w),No(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const pe=new Re(this,this.j,f);let Ie=this.o;if(this.S&&(Ie?(Ie=A(Ie),B(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(pe.H=Ie,Ie=null),this.P)e:{for(var w=0,k=0;k<this.i.length;k++){t:{var W=this.i[k];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(w+=W,4096<w){w=k;break e}if(w===4096||k===this.i.length-1){w=k+1;break e}}w=1e3}else w=1e3;w=Da(this,pe,w),k=xi(this.I),pn(k,"RID",f),pn(k,"CVER",22),this.D&&pn(k,"X-HTTP-Session-Id",this.D),na(this,k),Ie&&(this.O?w="headers="+encodeURIComponent(String(Os(Ie)))+"&"+w:this.m&&Cc(k,this.m,Ie)),Vn(this.h,pe),this.Ua&&pn(k,"TYPE","init"),this.P?(pn(k,"$req",w),pn(k,"SID","null"),pe.T=!0,Ke(pe,k,null)):Ke(pe,k,w),this.G=2}}else this.G==3&&(f?Io(this,f):this.i.length==0||Oi(this.h)||Io(this))};function Io(f,w){var k;w?k=w.l:k=f.U++;const W=xi(f.I);pn(W,"SID",f.K),pn(W,"RID",k),pn(W,"AID",f.T),na(f,W),f.m&&f.o&&Cc(W,f.m,f.o),k=new Re(f,f.j,k,f.B+1),f.m===null&&(k.H=f.o),w&&(f.i=w.D.concat(f.i)),w=Da(f,k,1e3),k.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Vn(f.h,k),Ke(k,W,w)}function na(f,w){f.H&&ae(f.H,function(k,W){pn(w,W,k)}),f.l&&zu({},function(k,W){pn(w,W,k)})}function Da(f,w,k){k=Math.min(f.i.length,k);var W=f.l?g(f.l.Na,f.l,f):null;e:{var pe=f.i;let Ie=-1;for(;;){const Qe=["count="+k];Ie==-1?0<k?(Ie=pe[0].g,Qe.push("ofs="+Ie)):Ie=0:Qe.push("ofs="+Ie);let Bt=!0;for(let Xt=0;Xt<k;Xt++){let Vt=pe[Xt].g;const dn=pe[Xt].map;if(Vt-=Ie,0>Vt)Ie=Math.max(0,pe[Xt].g-100),Bt=!1;else try{kc(dn,Qe,"req"+Vt+"_")}catch{W&&W(dn)}}if(Bt){W=Qe.join("&");break e}}}return f=f.i.splice(0,k),w.D=f,W}function So(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;Pe||Oe(),_e||(Pe(),_e=!0),ke.add(w,f),f.v=0}}function Fa(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=_r(g(f.Fa,f),No(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,Yu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=_r(g(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),bo(this),Yu(this))};function Po(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function Yu(f){f.g=new Re(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=xi(f.qa);pn(w,"RID","rpc"),pn(w,"SID",f.K),pn(w,"AID",f.T),pn(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&pn(w,"TO",f.ja),pn(w,"TYPE","xmlhttp"),na(f,w),f.m&&f.o&&Cc(w,f.m,f.o),f.L&&(f.g.I=f.L);var k=f.g;f=f.ia,k.L=1,k.v=ka(xi(w)),k.m=null,k.P=!0,it(k,f)}n.Za=function(){this.C!=null&&(this.C=null,bo(this),Fa(this),wt(19))};function Bs(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function ra(f,w){var k=null;if(f.g==w){Bs(f),Po(f),f.g=null;var W=2}else if(Hr(f.h,w))k=w.D,Ac(f.h,w),W=1;else return;if(f.G!=0){if(w.o)if(W==1){k=w.m?w.m.length:0,w=Date.now()-w.F;var pe=f.B;W=Fi(),kt(W,new oi(W,k)),Ao(f)}else So(f);else if(pe=w.s,pe==3||pe==0&&0<w.X||!(W==1&&Oc(f,w)||W==2&&Fa(f)))switch(k&&0<k.length&&(w=f.h,w.i=w.i.concat(k)),pe){case 1:ci(f,5);break;case 4:ci(f,10);break;case 3:ci(f,6);break;default:ci(f,2)}}}function No(f,w){let k=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(k*=2),k*w}function ci(f,w){if(f.j.info("Error code "+w),w==2){var k=g(f.fb,f),W=f.Xa;const pe=!W;W=new er(W||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Na(W,"https"),ka(W),pe?vs(W.toString(),k):$u(W.toString(),k)}else wt(2);f.G=0,f.l&&f.l.sa(w),ko(f),La(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function ko(f){if(f.G=0,f.ka=[],f.l){const w=Ic(f.h);(w.length!=0||f.i.length!=0)&&(E(f.ka,w),E(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function v(f,w,k){var W=k instanceof er?xi(k):new er(k);if(W.g!="")w&&(W.g=w+"."+W.g),go(W,W.s);else{var pe=o.location;W=pe.protocol,w=w?w+"."+pe.hostname:pe.hostname,pe=+pe.port;var Ie=new er(null);W&&Na(Ie,W),w&&(Ie.g=w),pe&&go(Ie,pe),k&&(Ie.l=k),W=Ie}return k=f.D,w=f.ya,k&&w&&pn(W,k,w),pn(W,"VER",f.la),na(f,W),W}function F(f,w,k){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new fn(new wo({eb:k})):new fn(f.pa),w.Ha(f.J),w}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function ne(){}n=ne.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function ce(){}ce.prototype.g=function(f,w){return new ge(f,w)};function ge(f,w){It.call(this),this.g=new To(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!L(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new dt(this)}x(ge,It),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Ms(this.g)},ge.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var k={};k.__data__=f,f=k}else this.u&&(k={},k.__data__=tn(f),f=k);w.i.push(new Rs(w.Ya++,f)),w.G==3&&Ao(w)},ge.prototype.N=function(){this.g.l=null,delete this.j,Ms(this.g),delete this.g,ge.aa.N.call(this)};function Me(f){_i.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const k in w){f=k;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}x(Me,_i);function Ye(){un.call(this),this.status=1}x(Ye,un);function dt(f){this.g=f}x(dt,ne),dt.prototype.ua=function(){kt(this.g,"a")},dt.prototype.ta=function(f){kt(this.g,new Me(f))},dt.prototype.sa=function(f){kt(this.g,new Ye)},dt.prototype.ra=function(){kt(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,vE=function(){return new ce},gE=function(){return Fi()},mE=Nt,$g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,N0=X,Z.COMPLETE="complete",pE=Z,bn.EventType=Ir,Ir.OPEN="a",Ir.CLOSE="b",Ir.ERROR="c",Ir.MESSAGE="d",It.prototype.listen=It.prototype.K,of=bn,fn.prototype.listenOnce=fn.prototype.L,fn.prototype.getLastError=fn.prototype.Ka,fn.prototype.getLastErrorCode=fn.prototype.Ba,fn.prototype.getStatus=fn.prototype.Z,fn.prototype.getResponseJson=fn.prototype.Oa,fn.prototype.getResponseText=fn.prototype.oa,fn.prototype.send=fn.prototype.ea,fn.prototype.setWithCredentials=fn.prototype.Ha,dE=fn}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});const ay="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Cp("@firebase/firestore");function wl(){return sc.logLevel}function cR(n){sc.setLogLevel(n)}function Je(n,...e){if(sc.logLevel<=Yt.DEBUG){const t=e.map(u2);sc.debug(`Firestore (${gh}): ${n}`,...t)}}function mr(n,...e){if(sc.logLevel<=Yt.ERROR){const t=e.map(u2);sc.error(`Firestore (${gh}): ${n}`,...t)}}function Ta(n,...e){if(sc.logLevel<=Yt.WARN){const t=e.map(u2);sc.warn(`Firestore (${gh}): ${n}`,...t)}}function u2(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n="Unexpected state"){const e=`FIRESTORE (${gh}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function bt(n,e){n||xt()}function uR(n,e){n||xt()}function gt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const De={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends kr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mr.UNAUTHENTICATED))}shutdown(){}}class hR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fR{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let r=this.i;const i=c=>this.i!==r?(r=this.i,t(c)):Promise.resolve();let s=new ri;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ri,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ri)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(bt(typeof r.accessToken=="string"),new _E(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new Mr(e)}}class dR{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pR{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new dR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);const r=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string"),this.R=t.token,new mR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vR(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=vR(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function Jl(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function wE(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xe(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xe(De.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xe(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(De.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Kn.fromMillis(Date.now())}static fromDate(e){return Kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Kn(0,0))}static max(){return new Pt(new Kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,t,r){t===void 0?t=0:t>e.length&&xt(),r===void 0?r=e.length-t:r>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Mf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Mf?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Mf{construct(e,t,r){return new Qt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Xe(De.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const _R=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $n extends Mf{construct(e,t,r){return new $n(e,t,r)}static isValidIdentifier(e){return _R.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new $n(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Xe(De.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Xe(De.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xe(De.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(r+=o,i++):(s(),i++)}if(s(),a)throw new Xe(De.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $n(t)}static emptyPath(){return new $n([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(Qt.fromString(e))}static fromName(e){return new ft(Qt.fromString(e).popFirst(5))}static empty(){return new ft(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Gg(n){return n.fields.find(e=>e.kind===2)}function Hc(n){return n.fields.filter(e=>e.kind!==2)}Y0.UNKNOWN_ID=-1;class k0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bf(0,ms.min())}}function xE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(r===1e9?new Kn(t+1,0):new Kn(t,r));return new ms(i,ft.empty(),e)}function EE(n){return new ms(n.readTime,n.key,-1)}class ms{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ms(Pt.min(),ft.empty(),-1)}static max(){return new ms(Pt.max(),ft.empty(),-1)}}function l2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ft.comparator(n.documentKey,e.documentKey),t!==0?t:jt(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(n){if(n.code!==De.FAILED_PRECONDITION||n.message!==TE)throw n;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,r)=>{t(e)})}static reject(e){return new Se((t,r)=>{r(e)})}static waitFor(e){return new Se((t,r)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},c=>r(c))}),a=!0,s===i&&t()})}static or(e){let t=Se.resolve(!1);for(const r of e)t=t.next(i=>i?Se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new Se((r,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(l=>{a[u]=l,++o,o===s&&r(a)},l=>i(l))}})}static doWhile(e,t){return new Se((r,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):r()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ri,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mf(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=h2(r.target.error);this.V.reject(new mf(e,i))}}static open(e,t,r,i){try{return new Wp(t,e.transaction(i,r))}catch(s){throw new mf(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new wR(t)}}class _a{constructor(e,t,r){this.name=e,this.version=t,this.p=r,_a.S(Jn())===12.2&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),Gc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!uu())return!1;if(_a.v())return!0;const e=Jn(),t=_a.S(e),r=0<t&&t<10,i=AE(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}async M(e){return this.db||(Je("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{r(new mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?r(new Xe(De.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?r(new Xe(De.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):r(new mf(e,a))},i.onupgradeneeded=s=>{Je("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{Je("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Wp.open(this.db,e,s?"readonly":"readwrite",r),c=i(o).next(u=>(o.g(),u)).catch(u=>(o.abort(u),Se.reject(u))).toPromise();return c.catch(()=>{}),await o.m,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(Je("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function AE(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class yR{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Gc(this.B.delete())}}class mf extends Xe{constructor(e,t){super(De.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xc(n){return n.name==="IndexedDbTransactionError"}class wR{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(Je("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Gc(r)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),Gc(this.store.add(e))}get(e){return Gc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),Gc(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),Gc(this.store.count())}U(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(r.range);return new Se((a,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{a(c.target.result)}})}{const s=this.cursor(r),a=[];return this.W(s,(o,c)=>{a.push(c)}).next(()=>a)}}G(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new Se((i,s)=>{r.onerror=a=>{s(a.target.error)},r.onsuccess=a=>{i(a.target.result)}})}j(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.H=!1;const i=this.cursor(r);return this.W(i,(s,a,o)=>o.delete())}J(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Y(e){const t=this.cursor({});return new Se((r,i)=>{t.onerror=s=>{const a=h2(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():r()}):r()}})}W(e,t){const r=[];return new Se((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new yR(o),u=t(o.primaryKey,o.value,c);if(u instanceof Se){const l=u.catch(d=>(c.done(),Se.reject(d)));r.push(l)}c.isDone?i():c.K===null?o.continue():o.continue(c.K)}}).next(()=>Se.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gc(n){return new Se((e,t)=>{n.onsuccess=r=>{const i=r.target.result;e(i)},n.onerror=r=>{const i=h2(r.target.error);t(i)}})}let oy=!1;function h2(n){const e=_a.S(Jn());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return oy||(oy=!0,setTimeout(()=>{throw r},0)),r}}return n}class xR{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Je("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){xc(t)?Je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await wc(t)}await this.X(6e4)})}}class ER{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const r=new Set;let i=t,s=!0;return Se.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!r.has(a))return Je("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(o=>{i-=o,r.add(a)});s=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(o=>(Je("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}re(e,t){let r=e;return t.changes.forEach((i,s)=>{const a=EE(s);l2(a,r)>0&&(r=a)}),new ms(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ie(r),this.se=r=>t.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Hi.oe=-1;function md(n){return n==null}function Vf(n){return n===0&&1/n==-1/0}function IE(n){return typeof n=="number"&&Number.isInteger(n)&&!Vf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=cy(e)),e=TR(n.get(t),e);return cy(e)}function TR(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function cy(n){return n+""}function ma(n){const e=n.length;if(bt(e>=2),e===2)return bt(n.charAt(0)===""&&n.charAt(1)===""),Qt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const a=n.indexOf("",s);switch((a<0||a>t)&&xt(),n.charAt(a+1)){case"":const o=n.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),r.push(c);break;case"":i+=n.substring(s,a),i+="\0";break;case"":i+=n.substring(s,a+1);break;default:xt()}s=a+2}return new Qt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(n,e){return[n,Ni(e)]}function SE(n,e,t){return[n,Ni(e),t]}const bR={},AR=["prefixPath","collectionGroup","readTime","documentId"],IR=["prefixPath","collectionGroup","documentId"],SR=["collectionGroup","readTime","prefixPath","documentId"],PR=["canonicalId","targetId"],NR=["targetId","path"],kR=["path","targetId"],CR=["collectionId","parent"],RR=["indexId","uid"],LR=["uid","sequenceNumber"],DR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],FR=["indexId","uid","orderedDocumentKey"],OR=["userId","collectionPath","documentId"],MR=["userId","collectionPath","largestBatchId"],BR=["userId","collectionGroup","largestBatchId"],PE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VR=[...PE,"documentOverlays"],NE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],kE=NE,f2=[...kE,"indexConfiguration","indexState","indexEntries"],UR=f2,jR=[...f2,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg extends bE{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Rr(n,e){const t=gt(n);return _a.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Cu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function CE(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,t){this.comparator=e,this.root=t||Qr.EMPTY}insert(e,t){return new Mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qr.BLACK,null,null))}remove(e){return new Mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new o0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new o0(this.root,e,this.comparator,!1)}getReverseIterator(){return new o0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new o0(this.root,e,this.comparator,!0)}}class o0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qr{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??Qr.RED,this.left=i??Qr.EMPTY,this.right=s??Qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new Qr(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Qr.EMPTY=null,Qr.RED=!0,Qr.BLACK=!1;Qr.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,t,r,i,s){return this}insert(e,t,r){return new Qr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.comparator=e,this.data=new Mn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new hy(this.data.getIterator())}getIteratorFrom(e){return new hy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Pn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Pn(this.comparator);return t.data=e,t}}class hy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ll(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.fields=e,e.sort($n.comparator)}static empty(){return new $i([])}unionWith(e){let t=new Pn($n.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new $i(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jl(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RE("Invalid base64 string: "+s):s}}(e);return new or(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}or.EMPTY_BYTE_STRING=new or("");const zR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function io(n){if(bt(!!n),typeof n=="string"){let e=0;const t=zR.exec(n);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Hn(n.seconds),nanos:Hn(n.nanos)}}function Hn(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ac(n){return typeof n=="string"?or.fromBase64String(n):or.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function d2(n){const e=n.mapValue.fields.__previous_value__;return Hp(e)?d2(e):e}function Uf(n){const e=io(n.mapValue.fields.__local_write_time__.timestampValue);return new Kn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,t,r,i,s,a,o,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class oc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},R0={nullValue:"NULL_VALUE"};function du(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hp(n)?4:LE(n)?9007199254740991:$p(n)?10:11:xt()}function ba(n,e){if(n===e)return!0;const t=du(n);if(t!==du(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Uf(n).isEqual(Uf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=io(i.timestampValue),o=io(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,s){return ac(i.bytesValue).isEqual(ac(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Hn(i.geoPointValue.latitude)===Hn(s.geoPointValue.latitude)&&Hn(i.geoPointValue.longitude)===Hn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Hn(i.integerValue)===Hn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=Hn(i.doubleValue),o=Hn(s.doubleValue);return a===o?Vf(a)===Vf(o):isNaN(a)&&isNaN(o)}return!1}(n,e);case 9:return Jl(n.arrayValue.values||[],e.arrayValue.values||[],ba);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(ly(a)!==ly(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!ba(a[c],o[c])))return!1;return!0}(n,e);default:return xt()}}function jf(n,e){return(n.values||[]).find(t=>ba(t,e))!==void 0}function cc(n,e){if(n===e)return 0;const t=du(n),r=du(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(s,a){const o=Hn(s.integerValue||s.doubleValue),c=Hn(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(n,e);case 3:return fy(n.timestampValue,e.timestampValue);case 4:return fy(Uf(n),Uf(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(s,a){const o=ac(s),c=ac(a);return o.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const l=jt(o[u],c[u]);if(l!==0)return l}return jt(o.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,a){const o=jt(Hn(s.latitude),Hn(a.latitude));return o!==0?o:jt(Hn(s.longitude),Hn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return dy(n.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,l;const d=s.fields||{},g=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,x=(c=g.value)===null||c===void 0?void 0:c.arrayValue,_=jt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((l=x==null?void 0:x.values)===null||l===void 0?void 0:l.length)||0);return _!==0?_:dy(p,x)}(n.mapValue,e.mapValue);case 11:return function(s,a){if(s===Qo.mapValue&&a===Qo.mapValue)return 0;if(s===Qo.mapValue)return 1;if(a===Qo.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){const g=jt(c[d],l[d]);if(g!==0)return g;const p=cc(o[c[d]],u[l[d]]);if(p!==0)return p}return jt(c.length,l.length)}(n.mapValue,e.mapValue);default:throw xt()}}function fy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return jt(n,e);const t=io(n),r=io(e),i=jt(t.seconds,r.seconds);return i!==0?i:jt(t.nanos,r.nanos)}function dy(n,e){const t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){const s=cc(t[i],r[i]);if(s)return s}return jt(t.length,r.length)}function Ql(n){return Yg(n)}function Yg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=io(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ac(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return ft.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=Yg(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of r)s?s=!1:i+=",",i+=`${a}:${Yg(t.fields[a])}`;return i+"}"}(n.mapValue):xt()}function pu(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xg(n){return!!n&&"integerValue"in n}function qf(n){return!!n&&"arrayValue"in n}function py(n){return!!n&&"nullValue"in n}function my(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function L0(n){return!!n&&"mapValue"in n}function $p(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function gf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Cu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gf(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function LE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const DE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function HR(n){return"nullValue"in n?R0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?pu(oc.empty(),ft.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?$p(n)?DE:{mapValue:{}}:xt()}function $R(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?pu(oc.empty(),ft.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?DE:"mapValue"in n?$p(n)?{mapValue:{}}:Qo:xt()}function gy(n,e){const t=cc(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function vy(n,e){const t=cc(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.value=e}static empty(){return new Zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!L0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gf(t)}setAll(e){let t=$n.emptyPath(),r={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,r,i),r={},i=[],t=o.popLast()}a?r[o.lastSegment()]=gf(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());L0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ba(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];L0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Cu(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Zr(gf(this.value))}}function FE(n){const e=[];return Cu(n.fields,(t,r)=>{const i=new $n([t]);if(L0(r)){const s=FE(r.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new $i(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e,t,r,i,s,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new jn(e,0,Pt.min(),Pt.min(),Pt.min(),Zr.empty(),0)}static newFoundDocument(e,t,r,i){return new jn(e,1,t,Pt.min(),r,i,0)}static newNoDocument(e,t){return new jn(e,2,t,Pt.min(),Pt.min(),Zr.empty(),0)}static newUnknownDocument(e,t){return new jn(e,3,t,Pt.min(),Pt.min(),Zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof jn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new jn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.position=e,this.inclusive=t}}function _y(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],a=n.position[i];if(s.field.isKeyField()?r=ft.comparator(ft.fromName(a.referenceValue),t.key):r=cc(a,t.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function yy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ba(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function GR(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OE{}class Zt extends OE{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new KR(e,t,r):t==="array-contains"?new JR(e,r):t==="in"?new qE(e,r):t==="not-in"?new QR(e,r):t==="array-contains-any"?new ZR(e,r):new Zt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new YR(e,r):new XR(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cc(t,this.value)):t!==null&&du(this.value)===du(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends OE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new yn(e,t)}matches(e){return Zl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Zl(n){return n.op==="and"}function Jg(n){return n.op==="or"}function p2(n){return ME(n)&&Zl(n)}function ME(n){for(const e of n.filters)if(e instanceof yn)return!1;return!0}function Qg(n){if(n instanceof Zt)return n.field.canonicalString()+n.op.toString()+Ql(n.value);if(p2(n))return n.filters.map(e=>Qg(e)).join(",");{const e=n.filters.map(t=>Qg(t)).join(",");return`${n.op}(${e})`}}function BE(n,e){return n instanceof Zt?function(r,i){return i instanceof Zt&&r.op===i.op&&r.field.isEqual(i.field)&&ba(r.value,i.value)}(n,e):n instanceof yn?function(r,i){return i instanceof yn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,a,o)=>s&&BE(a,i.filters[o]),!0):!1}(n,e):void xt()}function VE(n,e){const t=n.filters.concat(e);return yn.create(t,n.op)}function UE(n){return n instanceof Zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Ql(t.value)}`}(n):n instanceof yn?function(t){return t.op.toString()+" {"+t.getFilters().map(UE).join(" ,")+"}"}(n):"Filter"}class KR extends Zt{constructor(e,t,r){super(e,t,r),this.key=ft.fromName(r.referenceValue)}matches(e){const t=ft.comparator(e.key,this.key);return this.matchesComparison(t)}}class YR extends Zt{constructor(e,t){super(e,"in",t),this.keys=jE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class XR extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=jE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function jE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>ft.fromName(r.referenceValue))}class JR extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return qf(t)&&jf(t.arrayValue,this.value)}}class qE extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&jf(this.value.arrayValue,t)}}class QR extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(jf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!jf(this.value.arrayValue,t)}}class ZR extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!qf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>jf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t=null,r=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function Zg(n,e=null,t=[],r=[],i=null,s=null,a=null){return new e6(n,e,t,r,i,s,a)}function mu(n){const e=gt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qg(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),md(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Ql(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Ql(r)).join(",")),e.ue=t}return e.ue}function gd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GR(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!BE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!yy(n.startAt,e.startAt)&&yy(n.endAt,e.endAt)}function X0(n){return ft.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function J0(n,e){return n.filters.filter(t=>t instanceof Zt&&t.field.isEqual(e))}function wy(n,e,t){let r=R0,i=!0;for(const s of J0(n,e)){let a=R0,o=!0;switch(s.op){case"<":case"<=":a=HR(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=R0}gy({value:r,inclusive:i},{value:a,inclusive:o})<0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];gy({value:r,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}function xy(n,e,t){let r=Qo,i=!0;for(const s of J0(n,e)){let a=Qo,o=!0;switch(s.op){case">=":case">":a=$R(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Qo}vy({value:r,inclusive:i},{value:a,inclusive:o})>0&&(r=a,i=o)}if(t!==null){for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const a=t.position[s];vy({value:r,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(r=a,i=t.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t=null,r=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function zE(n,e,t,r,i,s,a,o){return new lo(n,e,t,r,i,s,a,o)}function vh(n){return new lo(n)}function Ey(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function m2(n){return n.collectionGroup!==null}function Ol(n){const e=gt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Pn($n.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zf(s,r))}),t.has($n.keyField().canonicalString())||e.ce.push(new zf($n.keyField(),r))}return e.ce}function ki(n){const e=gt(n);return e.le||(e.le=t6(e,Ol(n))),e.le}function t6(n,e){if(n.limitType==="F")return Zg(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zf(i.field,s)});const t=n.endAt?new uc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new uc(n.startAt.position,n.startAt.inclusive):null;return Zg(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function e1(n,e){const t=n.filters.concat([e]);return new lo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Q0(n,e,t){return new lo(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vd(n,e){return gd(ki(n),ki(e))&&n.limitType===e.limitType}function WE(n){return`${mu(ki(n))}|lt:${n.limitType}`}function xl(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>UE(i)).join(", ")}]`),md(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Ql(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Ql(i)).join(",")),`Target(${r})`}(ki(n))}; limitType=${n.limitType})`}function _d(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ft.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of Ol(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,o,c){const u=_y(a,o,c);return a.inclusive?u<=0:u<0}(r.startAt,Ol(r),i)||r.endAt&&!function(a,o,c){const u=_y(a,o,c);return a.inclusive?u>=0:u>0}(r.endAt,Ol(r),i))}(n,e)}function HE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $E(n){return(e,t)=>{let r=!1;for(const i of Ol(n)){const s=n6(i,e,t);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function n6(n,e,t){const r=n.field.isKeyField()?ft.comparator(e.key,t.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?cc(c,u):xt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ec{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Cu(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return CE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6=new Mn(ft.comparator);function Gi(){return r6}const GE=new Mn(ft.comparator);function cf(...n){let e=GE;for(const t of n)e=e.insert(t.key,t);return e}function KE(n){let e=GE;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ga(){return vf()}function YE(){return vf()}function vf(){return new Ec(n=>n.toString(),(n,e)=>n.isEqual(e))}const i6=new Mn(ft.comparator),s6=new Pn(ft.comparator);function Wt(...n){let e=s6;for(const t of n)e=e.add(t);return e}const a6=new Pn(jt);function g2(){return a6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v2(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vf(e)?"-0":e}}function XE(n){return{integerValue:""+n}}function JE(n,e){return IE(e)?XE(e):v2(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(){this._=void 0}}function o6(n,e,t){return n instanceof eh?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Hp(s)&&(s=d2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):n instanceof gu?ZE(n,e):n instanceof vu?eT(n,e):function(i,s){const a=QE(i,s),o=Ty(a)+Ty(i.Pe);return Xg(a)&&Xg(i.Pe)?XE(o):v2(i.serializer,o)}(n,e)}function c6(n,e,t){return n instanceof gu?ZE(n,e):n instanceof vu?eT(n,e):t}function QE(n,e){return n instanceof th?function(r){return Xg(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class eh extends Gp{}class gu extends Gp{constructor(e){super(),this.elements=e}}function ZE(n,e){const t=tT(e);for(const r of n.elements)t.some(i=>ba(i,r))||t.push(r);return{arrayValue:{values:t}}}class vu extends Gp{constructor(e){super(),this.elements=e}}function eT(n,e){let t=tT(e);for(const r of n.elements)t=t.filter(i=>!ba(i,r));return{arrayValue:{values:t}}}class th extends Gp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ty(n){return Hn(n.integerValue||n.doubleValue)}function tT(n){return qf(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t){this.field=e,this.transform=t}}function u6(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof gu&&i instanceof gu||r instanceof vu&&i instanceof vu?Jl(r.elements,i.elements,ba):r instanceof th&&i instanceof th?ba(r.Pe,i.Pe):r instanceof eh&&i instanceof eh}(n.transform,e.transform)}class l6{constructor(e,t){this.version=e,this.transformResults=t}}class Gn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Gn}static exists(e){return new Gn(void 0,e)}static updateTime(e){return new Gn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function D0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Kp{}function nT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new yh(n.key,Gn.none()):new _h(n.key,n.data,Gn.none());{const t=n.data,r=Zr.empty();let i=new Pn($n.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?r.delete(s):r.set(s,a),i=i.add(s)}return new ho(n.key,r,new $i(i.toArray()),Gn.none())}}function h6(n,e,t){n instanceof _h?function(i,s,a){const o=i.value.clone(),c=Ay(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(n,e,t):n instanceof ho?function(i,s,a){if(!D0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Ay(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(rT(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(n,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function _f(n,e,t,r){return n instanceof _h?function(s,a,o,c){if(!D0(s.precondition,a))return o;const u=s.value.clone(),l=Iy(s.fieldTransforms,c,a);return u.setAll(l),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(n,e,t,r):n instanceof ho?function(s,a,o,c){if(!D0(s.precondition,a))return o;const u=Iy(s.fieldTransforms,c,a),l=a.data;return l.setAll(rT(s)),l.setAll(u),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(s,a,o){return D0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(n,e,t)}function f6(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=QE(r.transform,i||null);s!=null&&(t===null&&(t=Zr.empty()),t.set(r.field,s))}return t||null}function by(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Jl(r,i,(s,a)=>u6(s,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class _h extends Kp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ho extends Kp{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function rT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Ay(n,e,t){const r=new Map;bt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],a=s.transform,o=e.data.field(s.field);r.set(s.field,c6(a,o,t[i]))}return r}function Iy(n,e,t){const r=new Map;for(const i of n){const s=i.transform,a=t.data.field(i.field);r.set(i.field,o6(s,a,e))}return r}class yh extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _2 extends Kp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&h6(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=_f(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=_f(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=YE();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const c=nT(a,o);c!==null&&r.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Pt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Jl(this.mutations,e.mutations,(t,r)=>by(t,r))&&Jl(this.baseMutations,e.baseMutations,(t,r)=>by(t,r))}}class w2{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){bt(e.mutations.length===r.length);let i=function(){return i6}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,r[a].version);return new w2(e,t,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Er,sn;function iT(n){switch(n){default:return xt();case De.CANCELLED:case De.UNKNOWN:case De.DEADLINE_EXCEEDED:case De.RESOURCE_EXHAUSTED:case De.INTERNAL:case De.UNAVAILABLE:case De.UNAUTHENTICATED:return!1;case De.INVALID_ARGUMENT:case De.NOT_FOUND:case De.ALREADY_EXISTS:case De.PERMISSION_DENIED:case De.FAILED_PRECONDITION:case De.ABORTED:case De.OUT_OF_RANGE:case De.UNIMPLEMENTED:case De.DATA_LOSS:return!0}}function sT(n){if(n===void 0)return mr("GRPC error has no .code"),De.UNKNOWN;switch(n){case Er.OK:return De.OK;case Er.CANCELLED:return De.CANCELLED;case Er.UNKNOWN:return De.UNKNOWN;case Er.DEADLINE_EXCEEDED:return De.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return De.RESOURCE_EXHAUSTED;case Er.INTERNAL:return De.INTERNAL;case Er.UNAVAILABLE:return De.UNAVAILABLE;case Er.UNAUTHENTICATED:return De.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return De.INVALID_ARGUMENT;case Er.NOT_FOUND:return De.NOT_FOUND;case Er.ALREADY_EXISTS:return De.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return De.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return De.FAILED_PRECONDITION;case Er.ABORTED:return De.ABORTED;case Er.OUT_OF_RANGE:return De.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return De.UNIMPLEMENTED;case Er.DATA_LOSS:return De.DATA_LOSS;default:return xt()}}(sn=Er||(Er={}))[sn.OK=0]="OK",sn[sn.CANCELLED=1]="CANCELLED",sn[sn.UNKNOWN=2]="UNKNOWN",sn[sn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",sn[sn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",sn[sn.NOT_FOUND=5]="NOT_FOUND",sn[sn.ALREADY_EXISTS=6]="ALREADY_EXISTS",sn[sn.PERMISSION_DENIED=7]="PERMISSION_DENIED",sn[sn.UNAUTHENTICATED=16]="UNAUTHENTICATED",sn[sn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",sn[sn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",sn[sn.ABORTED=10]="ABORTED",sn[sn.OUT_OF_RANGE=11]="OUT_OF_RANGE",sn[sn.UNIMPLEMENTED=12]="UNIMPLEMENTED",sn[sn.INTERNAL=13]="INTERNAL",sn[sn.UNAVAILABLE=14]="UNAVAILABLE",sn[sn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6=new au([4294967295,4294967295],0);function Sy(n){const e=aT().encode(n),t=new fE;return t.update(e),new Uint8Array(t.digest())}function Py(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new au([t,r],0),new au([i,s],0)]}class E2{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new uf(`Invalid padding: ${t}`);if(r<0)throw new uf(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new uf(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new uf(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=au.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(au.fromNumber(r)));return i.compare(p6)===1&&(i=new au([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Sy(e),[r,i]=Py(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);if(!this.de(a))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new E2(s,i,t);return r.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const t=Sy(e),[r,i]=Py(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(r,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class uf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,xd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wd(Pt.min(),i,new Mn(jt),Gi(),Wt())}}class xd{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new xd(r,t,Wt(),Wt(),Wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F0{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}}class oT{constructor(e,t){this.targetId=e,this.me=t}}class cT{constructor(e,t,r=or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ny{constructor(){this.fe=0,this.ge=Cy(),this.pe=or.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wt(),t=Wt(),r=Wt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:xt()}}),new xd(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=Cy()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m6{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gi(),this.qe=ky(),this.Qe=new Mn(jt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,r=e.me.count,i=this.Je(t);if(i){const s=i.target;if(X0(s))if(r===0){const a=new ft(s.path);this.Ue(t,a,jn.newNoDocument(a,Pt.min()))}else bt(r===1);else{const a=this.Ye(t);if(a!==r){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=ac(r).toUint8Array()}catch(c){if(c instanceof RE)return Ta("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new E2(a,i,s)}catch(c){return Ta(c instanceof uf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&X0(o.target)){const c=new ft(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,jn.newNoDocument(c,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let r=Wt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(r=r.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new wd(e,t,this.Qe,this.ke,r);return this.ke=Gi(),this.qe=ky(),this.Qe=new Mn(jt),i}$e(e,t){if(!this.ze(e))return;const r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ny,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Pn(jt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ny),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function ky(){return new Mn(ft.comparator)}function Cy(){return new Mn(ft.comparator)}const g6={asc:"ASCENDING",desc:"DESCENDING"},v6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_6={and:"AND",or:"OR"};class y6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function t1(n,e){return n.useProto3Json||md(e)?e:{value:e}}function nh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function uT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function w6(n,e){return nh(n,e.toTimestamp())}function gr(n){return bt(!!n),Pt.fromTimestamp(function(t){const r=io(t);return new Kn(r.seconds,r.nanos)}(n))}function T2(n,e){return n1(n,e).canonicalString()}function n1(n,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function lT(n){const e=Qt.fromString(n);return bt(wT(e)),e}function Wf(n,e){return T2(n.databaseId,e.path)}function ya(n,e){const t=lT(e);if(t.get(1)!==n.databaseId.projectId)throw new Xe(De.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Xe(De.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ft(dT(t))}function hT(n,e){return T2(n.databaseId,e)}function fT(n){const e=lT(n);return e.length===4?Qt.emptyPath():dT(e)}function r1(n){return new Qt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function dT(n){return bt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ry(n,e,t){return{name:Wf(n,e),fields:t.value.mapValue.fields}}function pT(n,e,t){const r=ya(n,e.name),i=gr(e.updateTime),s=e.createTime?gr(e.createTime):Pt.min(),a=new Zr({mapValue:{fields:e.fields}}),o=jn.newFoundDocument(r,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function x6(n,e){return"found"in e?function(r,i){bt(!!i.found),i.found.name,i.found.updateTime;const s=ya(r,i.found.name),a=gr(i.found.updateTime),o=i.found.createTime?gr(i.found.createTime):Pt.min(),c=new Zr({mapValue:{fields:i.found.fields}});return jn.newFoundDocument(s,a,o,c)}(n,e):"missing"in e?function(r,i){bt(!!i.missing),bt(!!i.readTime);const s=ya(r,i.missing),a=gr(i.readTime);return jn.newNoDocument(s,a)}(n,e):xt()}function E6(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(bt(l===void 0||typeof l=="string"),or.fromBase64String(l||"")):(bt(l===void 0||l instanceof Buffer||l instanceof Uint8Array),or.fromUint8Array(l||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const l=u.code===void 0?De.UNKNOWN:sT(u.code);return new Xe(l,u.message||"")}(a);t=new cT(r,i,s,o||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=ya(n,r.document.name),s=gr(r.document.updateTime),a=r.document.createTime?gr(r.document.createTime):Pt.min(),o=new Zr({mapValue:{fields:r.document.fields}}),c=jn.newFoundDocument(i,s,a,o),u=r.targetIds||[],l=r.removedTargetIds||[];t=new F0(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=ya(n,r.document),s=r.readTime?gr(r.readTime):Pt.min(),a=jn.newNoDocument(i,s),o=r.removedTargetIds||[];t=new F0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=ya(n,r.document),s=r.removedTargetIds||[];t=new F0([],s,i,null)}else{if(!("filter"in e))return xt();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,a=new d6(i,s),o=r.targetId;t=new oT(o,a)}}return t}function Hf(n,e){let t;if(e instanceof _h)t={update:Ry(n,e.key,e.value)};else if(e instanceof yh)t={delete:Wf(n,e.key)};else if(e instanceof ho)t={update:Ry(n,e.key,e.data),updateMask:P6(e.fieldMask)};else{if(!(e instanceof _2))return xt();t={verify:Wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,a){const o=a.transform;if(o instanceof eh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof gu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof vu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof th)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw xt()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:w6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt()}(n,e.precondition)),t}function i1(n,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Gn.updateTime(gr(s.updateTime)):s.exists!==void 0?Gn.exists(s.exists):Gn.none()}(e.currentDocument):Gn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let c=null;if("setToServerValue"in o)bt(o.setToServerValue==="REQUEST_TIME"),c=new eh;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];c=new gu(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];c=new vu(l)}else"increment"in o?c=new th(a,o.increment):xt();const u=$n.fromServerFormat(o.fieldPath);return new yd(u,c)}(n,i)):[];if(e.update){e.update.name;const i=ya(n,e.update.name),s=new Zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new $i(u.map(l=>$n.fromServerFormat(l)))}(e.updateMask);return new ho(i,s,a,t,r)}return new _h(i,s,t,r)}if(e.delete){const i=ya(n,e.delete);return new yh(i,t)}if(e.verify){const i=ya(n,e.verify);return new _2(i,t)}return xt()}function T6(n,e){return n&&n.length>0?(bt(e!==void 0),n.map(t=>function(i,s){let a=i.updateTime?gr(i.updateTime):gr(s);return a.isEqual(Pt.min())&&(a=gr(s)),new l6(a,i.transformResults||[])}(t,e))):[]}function mT(n,e){return{documents:[hT(n,e.path)]}}function gT(n,e){const t={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hT(n,i);const s=function(u){if(u.length!==0)return yT(yn.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(l=>function(g){return{field:El(g.field),direction:A6(g.dir)}}(l))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=t1(n,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function vT(n){let e=fT(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){bt(r===1);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=function(d){const g=_T(d);return g instanceof yn&&p2(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(d){return d.map(g=>function(x){return new zf(Tl(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(d){let g;return g=typeof d=="object"?d.value:d,md(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(d){const g=!!d.before,p=d.values||[];return new uc(p,g)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const g=!d.before,p=d.values||[];return new uc(p,g)}(t.endAt)),zE(e,i,a,s,o,"F",c,u)}function b6(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function _T(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Tl(t.unaryFilter.field);return Zt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Tl(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Tl(t.unaryFilter.field);return Zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Tl(t.unaryFilter.field);return Zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(n):n.fieldFilter!==void 0?function(t){return Zt.create(Tl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return yn.create(t.compositeFilter.filters.map(r=>_T(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt()}}(t.compositeFilter.op))}(n):xt()}function A6(n){return g6[n]}function I6(n){return v6[n]}function S6(n){return _6[n]}function El(n){return{fieldPath:n.canonicalString()}}function Tl(n){return $n.fromServerFormat(n.fieldPath)}function yT(n){return n instanceof Zt?function(t){if(t.op==="=="){if(my(t.value))return{unaryFilter:{field:El(t.field),op:"IS_NAN"}};if(py(t.value))return{unaryFilter:{field:El(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(my(t.value))return{unaryFilter:{field:El(t.field),op:"IS_NOT_NAN"}};if(py(t.value))return{unaryFilter:{field:El(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:El(t.field),op:I6(t.op),value:t.value}}}(n):n instanceof yn?function(t){const r=t.getFilters().map(i=>yT(i));return r.length===1?r[0]:{compositeFilter:{op:S6(t.op),filters:r}}}(n):xt()}function P6(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function wT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t,r,i,s=Pt.min(),a=Pt.min(),o=or.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Xa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Xa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.ct=e}}function N6(n,e){let t;if(e.document)t=pT(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ft.fromSegments(e.noDocument.path),i=yu(e.noDocument.readTime);t=jn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const r=ft.fromSegments(e.unknownDocument.path),i=yu(e.unknownDocument.version);t=jn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Kn(i[0],i[1]);return Pt.fromTimestamp(s)}(e.readTime)),t}function Ly(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Z0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,a){return{name:Wf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:nh(s,a.version.toTimestamp()),createTime:nh(s,a.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:_u(e.version)};else{if(!e.isUnknownDocument())return xt();r.unknownDocument={path:t.path.toArray(),version:_u(e.version)}}return r}function Z0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function _u(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function yu(n){const e=new Kn(n.seconds,n.nanoseconds);return Pt.fromTimestamp(e)}function Kc(n,e){const t=(e.baseMutations||[]).map(s=>i1(n.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const r=e.mutations.map(s=>i1(n.ct,s)),i=Kn.fromMillis(e.localWriteTimeMs);return new y2(e.batchId,i,t,r)}function lf(n){const e=yu(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?yu(n.lastLimboFreeSnapshotVersion):Pt.min();let r;return r=function(s){return s.documents!==void 0}(n.query)?function(s){return bt(s.documents.length===1),ki(vh(fT(s.documents[0])))}(n.query):function(s){return ki(vT(s))}(n.query),new Xa(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,or.fromBase64String(n.resumeToken))}function ET(n,e){const t=_u(e.snapshotVersion),r=_u(e.lastLimboFreeSnapshotVersion);let i;i=X0(e.target)?mT(n.ct,e.target):gT(n.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function b2(n){const e=vT({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Q0(e,e.limit,"L"):e}function rg(n,e){return new x2(e.largestBatchId,i1(n.ct,e.overlayMutation))}function Dy(n,e){const t=e.path.lastSegment();return[n,Ni(e.path.popLast()),t]}function Fy(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:_u(r.readTime),documentKey:Ni(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{getBundleMetadata(e,t){return Oy(e).get(t).next(r=>{if(r)return function(s){return{id:s.bundleId,createTime:yu(s.createTime),version:s.version}}(r)})}saveBundleMetadata(e,t){return Oy(e).put(function(i){return{bundleId:i.id,createTime:_u(gr(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return My(e).get(t).next(r=>{if(r)return function(s){return{name:s.name,query:b2(s.bundledQuery),readTime:yu(s.readTime)}}(r)})}saveNamedQuery(e,t){return My(e).put(function(i){return{name:i.name,readTime:_u(gr(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function Oy(n){return Rr(n,"bundles")}function My(n){return Rr(n,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const r=t.uid||"";return new Yp(e,r)}getOverlay(e,t){return Yh(e).get(Dy(this.userId,t)).next(r=>r?rg(this.serializer,r):null)}getOverlays(e,t){const r=ga();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,a)=>{const o=new x2(t,a);i.push(this.ht(e,o))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(a=>i.add(Ni(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,r+1],!1,!0);s.push(Yh(e).j("collectionPathOverlayIndex",o))}),Se.waitFor(s)}getOverlaysForCollection(e,t,r){const i=ga(),s=Ni(t),a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const c of o){const u=rg(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=ga();let a;const o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yh(e).J({index:"collectionGroupOverlayIndex",range:o},(c,u,l)=>{const d=rg(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):l.done()}).next(()=>s)}ht(e,t){return Yh(e).put(function(i,s,a){const[o,c,u]=Dy(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Hf(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Yh(n){return Rr(n,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C6{Pt(e){return Rr(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const r=t==null?void 0:t.value;return r?or.fromUint8Array(r):or.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Hn(e.integerValue));else if("doubleValue"in e){const r=Hn(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Vf(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=io(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ac(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?LE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):$p(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const r=e.fields||{};this.dt(t,55);for(const i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;const s=e.fields||{};this.dt(t,53);const a="value",o=((i=(r=s[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(Hn(o)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const r=e.values||[];this.dt(t,50);for(const i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),ft.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Yc.vt=new Yc;function R6(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function By(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const a=R6(255&r[s]);if(i+=a,a!==8)break}return i}(n);return Math.ceil(e/8)}class L6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),r=By(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),r=By(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class D6{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class F6{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Xh{constructor(){this.jt=new L6,this.Ht=new D6(this.jt),this.Jt=new F6(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Xc(this.indexId,this.documentKey,this.arrayValue,r)}}function zo(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=Vy(n.arrayValue,e.arrayValue),t!==0?t:(t=Vy(n.directionalValue,e.directionalValue),t!==0?t:ft.comparator(n.documentKey,e.documentKey)))}function Vy(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e){this.Xt=new Pn((t,r)=>$n.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(bt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Gg(e);if(t!==void 0&&!this.sn(t))return!1;const r=Hc(e);let i=new Set,s=0,a=0;for(;s<r.length&&this.sn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=r[s];if(!this.on(o,c)||!this._n(this.en[a++],c))return!1}++s}for(;s<r.length;++s){const o=r[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Pn($n.comparator);const t=[];for(const r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new k0(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new k0(r.field,0))}for(const r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new k0(r.field,r.dir==="asc"?0:1)));return new Y0(Y0.UNKNOWN_ID,this.collectionId,t,Bf.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(n){var e,t;if(bt(n instanceof Zt||n instanceof yn),n instanceof Zt){if(n instanceof qE){const i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Zt.create(n.field,"==",s)))||[];return yn.create(i,"or")}return n}const r=n.filters.map(i=>TT(i));return yn.create(r,n.op)}function O6(n){if(n.getFilters().length===0)return[];const e=o1(TT(n));return bt(bT(e)),s1(e)||a1(e)?[e]:e.getFilters()}function s1(n){return n instanceof Zt}function a1(n){return n instanceof yn&&p2(n)}function bT(n){return s1(n)||a1(n)||function(t){if(t instanceof yn&&Jg(t)){for(const r of t.getFilters())if(!s1(r)&&!a1(r))return!1;return!0}return!1}(n)}function o1(n){if(bt(n instanceof Zt||n instanceof yn),n instanceof Zt)return n;if(n.filters.length===1)return o1(n.filters[0]);const e=n.filters.map(r=>o1(r));let t=yn.create(e,n.op);return t=ep(t),bT(t)?t:(bt(t instanceof yn),bt(Zl(t)),bt(t.filters.length>1),t.filters.reduce((r,i)=>A2(r,i)))}function A2(n,e){let t;return bt(n instanceof Zt||n instanceof yn),bt(e instanceof Zt||e instanceof yn),t=n instanceof Zt?e instanceof Zt?function(i,s){return yn.create([i,s],"and")}(n,e):jy(n,e):e instanceof Zt?jy(e,n):function(i,s){if(bt(i.filters.length>0&&s.filters.length>0),Zl(i)&&Zl(s))return VE(i,s.getFilters());const a=Jg(i)?i:s,o=Jg(i)?s:i,c=a.filters.map(u=>A2(u,o));return yn.create(c,"or")}(n,e),ep(t)}function jy(n,e){if(Zl(e))return VE(e,n.getFilters());{const t=e.filters.map(r=>A2(n,r));return yn.create(t,"or")}}function ep(n){if(bt(n instanceof Zt||n instanceof yn),n instanceof Zt)return n;const e=n.getFilters();if(e.length===1)return ep(e[0]);if(ME(n))return n;const t=e.map(i=>ep(i)),r=[];return t.forEach(i=>{i instanceof Zt?r.push(i):i instanceof yn&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:yn.create(r,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.un=new I2}addToCollectionParentIndex(e,t){return this.un.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve(ms.min())}updateCollectionGroup(e,t,r){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class I2{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pn(Qt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pn(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c0=new Uint8Array(0);class B6{constructor(e,t){this.databaseId=t,this.cn=new I2,this.ln=new Ec(r=>mu(r),(r,i)=>gd(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:r,parent:Ni(i)};return qy(e).put(s)}return Se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[wE(t),""],!1,!0);return qy(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;r.push(ma(a.parent))}return r})}addFieldIndex(e,t){const r=Jh(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;const s=r.add(i);if(t.indexState){const a=fl(e);return s.next(o=>{a.put(Fy(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Jh(e),i=fl(e),s=hl(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Jh(e),r=hl(e),i=fl(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return Se.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const s=new Uy(r).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=hl(e);let i=!0;const s=new Map;return Se.forEach(this.hn(t),a=>this.Pn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=Wt();const o=[];return Se.forEach(s,(c,u)=>{Je("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${mu(t)}`);const l=function(V,K){const ie=Gg(K);if(ie===void 0)return null;for(const ae of J0(V,ie.fieldPath))switch(ae.op){case"array-contains-any":return ae.value.arrayValue.values||[];case"array-contains":return[ae.value]}return null}(u,c),d=function(V,K){const ie=new Map;for(const ae of Hc(K))for(const N of J0(V,ae.fieldPath))switch(N.op){case"==":case"in":ie.set(ae.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return ie.set(ae.fieldPath.canonicalString(),N.value),Array.from(ie.values())}return null}(u,c),g=function(V,K){const ie=[];let ae=!0;for(const N of Hc(K)){const A=N.kind===0?wy(V,N.fieldPath,V.startAt):xy(V,N.fieldPath,V.startAt);ie.push(A.value),ae&&(ae=A.inclusive)}return new uc(ie,ae)}(u,c),p=function(V,K){const ie=[];let ae=!0;for(const N of Hc(K)){const A=N.kind===0?xy(V,N.fieldPath,V.endAt):wy(V,N.fieldPath,V.endAt);ie.push(A.value),ae&&(ae=A.inclusive)}return new uc(ie,ae)}(u,c),x=this.In(c,u,g),_=this.In(c,u,p),E=this.Tn(c,u,d),P=this.En(c.indexId,l,x,g.inclusive,_,p.inclusive,E);return Se.forEach(P,L=>r.G(L,t.limit).next(V=>{V.forEach(K=>{const ie=ft.fromSegments(K.documentKey);a.has(ie)||(a=a.add(ie),o.push(ie))})}))}).next(()=>o)}return Se.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=O6(yn.create(e.filters,"and")).map(r=>Zg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,s,a,o){const c=(t!=null?t.length:1)*Math.max(r.length,s.length),u=c/(t!=null?t.length:1),l=[];for(let d=0;d<c;++d){const g=t?this.dn(t[d/u]):c0,p=this.An(e,g,r[d%u],i),x=this.Rn(e,g,s[d%u],a),_=o.map(E=>this.An(e,g,E,!0));l.push(...this.createRange(p,x,_))}return l}An(e,t,r,i){const s=new Xc(e,ft.empty(),t,r);return i?s:s.Zt()}Rn(e,t,r,i){const s=new Xc(e,ft.empty(),t,r);return i?s.Zt():s}Pn(e,t){const r=new Uy(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)r.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let r=2;const i=this.hn(t);return Se.forEach(i,s=>this.Pn(e,s).next(a=>{a?r!==0&&a.fields.length<function(c){let u=new Pn($n.comparator),l=!1;for(const d of c.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?l=!0:u=u.add(g.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(s)&&(r=1):r=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){const r=new Xh;for(const i of Hc(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=r.Yt(i.kind);Yc.vt.It(s,a)}return r.zt()}dn(e){const t=new Xh;return Yc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const r=new Xh;return Yc.vt.It(pu(this.databaseId,t),r.Yt(function(s){const a=Hc(s);return a.length===0?0:a[a.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new Xh);let s=0;for(const a of Hc(e)){const o=r[s++];for(const c of i)if(this.fn(t,a.fieldPath)&&qf(o))i=this.gn(i,a,o);else{const u=c.Yt(a.kind);Yc.vt.It(o,u)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){const i=[...e],s=[];for(const a of r.arrayValue.values||[])for(const o of i){const c=new Xh;c.seed(o.zt()),Yc.vt.It(a,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(r=>r instanceof Zt&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){const r=Jh(e),i=fl(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(s=>{const a=[];return Se.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(l,d){const g=d?new Bf(d.sequenceNumber,new ms(yu(d.readTime),new ft(ma(d.documentKey)),d.largestBatchId)):Bf.empty(),p=l.fields.map(([x,_])=>new k0($n.fromServerFormat(x),_));return new Y0(l.indexId,l.collectionGroup,p,g)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Jh(e),s=fl(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>Se.forEach(o,c=>s.put(Fy(c.indexId,this.uid,a,r)))))}updateIndexEntries(e,t){const r=new Map;return Se.forEach(t,(i,s)=>{const a=r.get(i.collectionGroup);return(a?Se.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(r.set(i.collectionGroup,o),Se.forEach(o,c=>this.wn(e,i,c).next(u=>{const l=this.Sn(s,c);return u.isEqual(l)?Se.resolve():this.bn(e,s,c,u,l)}))))})}Dn(e,t,r,i){return hl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return hl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=hl(e);let s=new Pn(zo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(a,o)=>{s=s.add(new Xc(r.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,t){let r=new Pn(zo);const i=this.Vn(t,e);if(i==null)return r;const s=Gg(t);if(s!=null){const a=e.data.field(s.fieldPath);if(qf(a))for(const o of a.arrayValue.values||[])r=r.add(new Xc(t.indexId,e.key,this.dn(o),i))}else r=r.add(new Xc(t.indexId,e.key,c0,i));return r}bn(e,t,r,i,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,u,l,d,g){const p=c.getIterator(),x=u.getIterator();let _=ll(p),E=ll(x);for(;_||E;){let P=!1,L=!1;if(_&&E){const V=l(_,E);V<0?L=!0:V>0&&(P=!0)}else _!=null?L=!0:P=!0;P?(d(E),E=ll(x)):L?(g(_),_=ll(p)):(_=ll(p),E=ll(x))}}(i,s,zo,o=>{a.push(this.Dn(e,t,r,o))},o=>{a.push(this.vn(e,t,r,o))}),Se.waitFor(a)}yn(e){let t=1;return fl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((a,o)=>zo(a,o)).filter((a,o,c)=>!o||zo(a,c[o-1])!==0);const i=[];i.push(e);for(const a of r){const o=zo(a,e),c=zo(a,t);if(o===0)i[0]=e.Zt();else if(o>0&&c<0)i.push(a),i.push(a.Zt());else if(c>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,c0,[]],c=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,c0,[]];s.push(IDBKeyRange.bound(o,c))}return s}Cn(e,t){return zo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(zy)}getMinOffset(e,t){return Se.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||xt())).next(zy)}}function qy(n){return Rr(n,"collectionParents")}function hl(n){return Rr(n,"indexEntries")}function Jh(n){return Rr(n,"indexConfiguration")}function fl(n){return Rr(n,"indexState")}function zy(n){bt(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;l2(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ms(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class zi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new zi(e,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AT(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const c=r.J({range:a},(l,d,g)=>(o++,g.delete()));s.push(c.next(()=>{bt(o===1)}));const u=[];for(const l of t.mutations){const d=SE(e,l.key.path,t.batchId);s.push(i.delete(d)),u.push(l.key)}return Se.waitFor(s).next(()=>u)}function tp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xt();e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi.DEFAULT_COLLECTION_PERCENTILE=10,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zi.DEFAULT=new zi(41943040,zi.DEFAULT_COLLECTION_PERCENTILE,zi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zi.DISABLED=new zi(-1,0,0);class Xp{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){bt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Xp(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Wo(e).J({index:"userMutationsIndex",range:r},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=bl(e),a=Wo(e);return a.add({}).next(o=>{bt(typeof o=="number");const c=new y2(o,t,r,i),u=function(p,x,_){const E=_.baseMutations.map(L=>Hf(p.ct,L)),P=_.mutations.map(L=>Hf(p.ct,L));return{userId:x,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:E,mutations:P}}(this.serializer,this.userId,c),l=[];let d=new Pn((g,p)=>jt(g.canonicalString(),p.canonicalString()));for(const g of i){const p=SE(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),l.push(a.put(u)),l.push(s.put(p,bR))}return d.forEach(g=>{l.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[o]=c.keys()}),Se.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return Wo(e).get(t).next(r=>r?(bt(r.userId===this.userId),Kc(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?Se.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Wo(e).J({index:"userMutationsIndex",range:i},(a,o,c)=>{o.userId===this.userId&&(bt(o.batchId>=r),s=Kc(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Wo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{r=s.batchId,a.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Wo(e).U("userMutationsIndex",t).next(r=>r.map(i=>Kc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=C0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return bl(e).J({range:i},(a,o,c)=>{const[u,l,d]=a,g=ma(l);if(u===this.userId&&t.path.isEqual(g))return Wo(e).get(d).next(p=>{if(!p)throw xt();bt(p.userId===this.userId),s.push(Kc(this.serializer,p))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(jt);const i=[];return t.forEach(s=>{const a=C0(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=bl(e).J({range:o},(u,l,d)=>{const[g,p,x]=u,_=ma(p);g===this.userId&&s.path.isEqual(_)?r=r.add(x):d.done()});i.push(c)}),Se.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=C0(this.userId,r),a=IDBKeyRange.lowerBound(s);let o=new Pn(jt);return bl(e).J({range:a},(c,u,l)=>{const[d,g,p]=c,x=ma(g);d===this.userId&&r.isPrefixOf(x)?x.length===i&&(o=o.add(p)):l.done()}).next(()=>this.xn(e,o))}xn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Wo(e).get(s).next(a=>{if(a===null)throw xt();bt(a.userId===this.userId),r.push(Kc(this.serializer,a))}))}),Se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return AT(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const r=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return bl(e).J({range:r},(s,a,o)=>{if(s[0]===this.userId){const c=ma(s[1]);i.push(c)}else o.done()}).next(()=>{bt(i.length===0)})})}containsKey(e,t){return IT(e,this.userId,t)}Nn(e){return ST(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function IT(n,e,t){const r=C0(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return bl(n).J({range:s,H:!0},(o,c,u)=>{const[l,d,g]=o;l===e&&d===i&&(a=!0),u.done()}).next(()=>a)}function Wo(n){return Rr(n,"mutations")}function bl(n){return Rr(n,"documentMutations")}function ST(n){return Rr(n,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new wu(0)}static kn(){return new wu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const r=new wu(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Pt.fromTimestamp(new Kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dl(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(bt(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return dl(e).J((a,o)=>{const c=lf(o);c.sequenceNumber<=t&&r.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return dl(e).J((r,i)=>{const s=lf(i);t(s)})}qn(e){return Hy(e).get("targetGlobalKey").next(t=>(bt(t!==null),t))}Qn(e,t){return Hy(e).put("targetGlobalKey",t)}Kn(e,t){return dl(e).put(ET(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=mu(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return dl(e).J({range:i,index:"queryTargetsIndex"},(a,o,c)=>{const u=lf(o);gd(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Yo(e);return t.forEach(a=>{const o=Ni(a.path);i.push(s.put({targetId:r,path:o})),i.push(this.referenceDelegate.addReference(e,r,a))}),Se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Yo(e);return Se.forEach(t,s=>{const a=Ni(s.path);return Se.waitFor([i.delete([r,a]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Yo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Yo(e);let s=Wt();return i.J({range:r,H:!0},(a,o,c)=>{const u=ma(a[1]),l=new ft(u);s=s.add(l)}).next(()=>s)}containsKey(e,t){const r=Ni(t.path),i=IDBKeyRange.bound([r],[wE(r)],!1,!0);let s=0;return Yo(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,o],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return dl(e).get(t).next(r=>r?lf(r):null)}}function dl(n){return Rr(n,"targets")}function Hy(n){return Rr(n,"targetGlobal")}function Yo(n){return Rr(n,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y([n,e],[t,r]){const i=jt(n,t);return i===0?jt(e,r):i}class U6{constructor(e){this.Un=e,this.buffer=new Pn($y),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();$y(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class j6{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xc(t)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await wc(t)}await this.Hn(3e5)})}}class q6{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(Hi.oe);const r=new U6(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(Wy)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wy):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,s,a,o,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,o=Date.now(),this.removeTargets(e,r,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(u=Date.now(),wl()<=Yt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-l}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function z6(n,e){return new q6(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(e,t){this.db=e,this.garbageCollector=z6(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return u0(e,r)}removeReference(e,t,r){return u0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return u0(e,t)}nr(e,t){return function(i,s){let a=!1;return ST(i).Y(o=>IT(i,o,s).next(c=>(c&&(a=!0),Se.resolve(!c)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,o)=>{if(o<=t){const c=this.nr(e,a).next(u=>{if(!u)return s++,r.getEntry(e,a).next(()=>(r.removeEntry(a,Pt.min()),Yo(e).delete(function(d){return[0,Ni(d.path)]}(a))))});i.push(c)}}).next(()=>Se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return u0(e,t)}tr(e,t){const r=Yo(e);let i,s=Hi.oe;return r.J({index:"documentTargetsIndex"},([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==Hi.oe&&t(new ft(ma(i)),s),s=u,i=c):s=Hi.oe}).next(()=>{s!==Hi.oe&&t(new ft(ma(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function u0(n,e){return Yo(n).put(function(r,i){return{targetId:0,path:Ni(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(){this.changes=new Ec(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,jn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?Se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return zc(e).put(r)}removeEntry(e,t,r){return zc(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],Z0(a),o[o.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=jn.newInvalidDocument(t);return zc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qh(t))},(i,s)=>{r=this.ir(t,s)}).next(()=>r)}sr(e,t){let r={size:0,document:jn.newInvalidDocument(t)};return zc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Qh(t))},(i,s)=>{r={document:this.ir(t,s),size:tp(s)}}).next(()=>r)}getEntries(e,t){let r=Gi();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);r=r.insert(i,a)}).next(()=>r)}ar(e,t){let r=Gi(),i=new Mn(ft.comparator);return this._r(e,t,(s,a)=>{const o=this.ir(s,a);r=r.insert(s,o),i=i.insert(s,tp(a))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return Se.resolve();let i=new Pn(Yy);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Qh(i.first()),Qh(i.last())),a=i.getIterator();let o=a.getNext();return zc(e).J({index:"documentKeyIndex",range:s},(c,u,l)=>{const d=ft.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&Yy(o,d)<0;)r(o,null),o=a.getNext();o&&o.isEqual(d)&&(r(o,u),o=a.hasNext()?a.getNext():null),o?l.$(Qh(o)):l.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Z0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zc(e).U(IDBKeyRange.bound(o,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let l=Gi();for(const d of u){const g=this.ir(ft.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(_d(t,g)||i.has(g.key))&&(l=l.insert(g.key,g))}return l})}getAllFromCollectionGroup(e,t,r,i){let s=Gi();const a=Ky(t,r),o=Ky(t,ms.max());return zc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(c,u,l)=>{const d=this.ir(ft.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new $6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Gy(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}rr(e,t){return Gy(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const r=N6(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Pt.min())))return r}return jn.newInvalidDocument(e)}}function NT(n){return new H6(n)}class $6 extends PT{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Ec(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Pn((s,a)=>jt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=Ly(this.cr.serializer,a);i=i.add(s.path.popLast());const u=tp(c);r+=u-o.size,t.push(this.cr.addEntry(e,s,c))}else if(r-=o.size,this.trackRemovals){const c=Ly(this.cr.serializer,a.convertToNoDocument(Pt.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,r)),Se.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:r.get(s).readTime})}),r))}}function Gy(n){return Rr(n,"remoteDocumentGlobal")}function zc(n){return Rr(n,"remoteDocumentsV14")}function Qh(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Ky(n,e){const t=e.documentKey.path.toArray();return[n,Z0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Yy(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=jt(t[s],r[s]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&_f(r.mutation,i,$i.empty(),Kn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let a=cf();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const r=ga();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,r,i){let s=Gi();const a=vf(),o=function(){return vf()}();return t.forEach((c,u)=>{const l=r.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof ho)?s=s.insert(u.key,u):l!==void 0?(a.set(u.key,l.mutation.getFieldMask()),_f(l.mutation,u,l.mutation.getFieldMask(),Kn.now())):a.set(u.key,$i.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>a.set(u,l)),t.forEach((u,l)=>{var d;return o.set(u,new G6(l,(d=a.get(u))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,t){const r=vf();let i=new Mn((a,o)=>a-o),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let l=r.get(c)||$i.empty();l=o.applyToLocalView(u,l),r.set(c,l);const d=(i.get(o.batchId)||Wt()).add(c);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,l=c.value,d=YE();l.forEach(g=>{if(!s.has(g)){const p=nT(t.get(g),r.get(g));p!==null&&d.set(g,p),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Se.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return ft.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):m2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):Se.resolve(ga());let o=-1,c=s;return a.next(u=>Se.forEach(u,(l,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(l)?Se.resolve():this.remoteDocumentCache.getEntry(e,l).next(g=>{c=c.insert(l,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Wt())).next(l=>({batchId:o,changes:KE(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ft(t)).next(r=>{let i=cf();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let a=cf();return this.indexManager.getCollectionParents(e,s).next(o=>Se.forEach(o,c=>{const u=function(d,g){return new lo(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,r,i).next(l=>{l.forEach((d,g)=>{a=a.insert(d,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(a=>{s.forEach((c,u)=>{const l=u.getKey();a.get(l)===null&&(a=a.insert(l,jn.newInvalidDocument(l)))});let o=cf();return a.forEach((c,u)=>{const l=s.get(c);l!==void 0&&_f(l.mutation,u,$i.empty(),Kn.now()),_d(t,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Se.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:gr(i.createTime)}}(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:b2(i.bundledQuery),readTime:gr(i.readTime)}}(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6{constructor(){this.overlays=new Mn(ft.comparator),this.Ir=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ga();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),Se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(r)),Se.resolve()}getOverlaysForCollection(e,t,r){const i=ga(),s=t.length+1,a=new ft(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>r&&i.set(c.getKey(),c)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new Mn((u,l)=>u-l);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>r){let l=s.get(u.largestBatchId);l===null&&(l=ga(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const o=ga(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>o.set(u,l)),!(o.size()>=i)););return Se.resolve(o)}ht(e,t,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new x2(t,r));let s=this.Ir.get(t);s===void 0&&(s=Wt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X6{constructor(){this.sessionToken=or.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(){this.Tr=new Pn(Or.Er),this.dr=new Pn(Or.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const r=new Or(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new Or(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){const t=new ft(new Qt([])),r=new Or(t,e),i=new Or(t,e+1),s=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ft(new Qt([])),r=new Or(t,e),i=new Or(t,e+1);let s=Wt();return this.dr.forEachInRange([r,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Or(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Or{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ft.comparator(e.key,t.key)||jt(e.wr,t.wr)}static Ar(e,t){return jt(e.wr,t.wr)||ft.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pn(Or.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new y2(s,t,r,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new Or(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Se.resolve(a)}lookupMutationBatch(e,t){return Se.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=this.vr(r),s=i<0?0:i;return Se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Or(t,0),i=new Or(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([r,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pn(jt);return t.forEach(i=>{const s=new Or(i,0),a=new Or(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{r=r.add(o.wr)})}),Se.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ft.isDocumentKey(s)||(s=s.child(""));const a=new Or(new ft(s),0);let o=new Pn(jt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),Se.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return Se.forEach(t.mutations,i=>{const s=new Or(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){const r=new Or(t,0),i=this.br.firstAfterOrEqual(r);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{constructor(e){this.Mr=e,this.docs=function(){return new Mn(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return Se.resolve(r?r.document.mutableCopy():jn.newInvalidDocument(t))}getEntries(e,t){let r=Gi();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():jn.newInvalidDocument(i))}),Se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Gi();const a=t.path,o=new ft(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||l2(EE(l),r)<=0||(i.has(l.key)||_d(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return Se.resolve(s)}getAllFromCollectionGroup(e,t,r,i){xt()}Or(e,t){return Se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Z6(this)}getSize(e){return Se.resolve(this.size)}}class Z6 extends PT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),Se.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eL{constructor(e){this.persistence=e,this.Nr=new Ec(t=>mu(t),gd),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new S2,this.targetCount=0,this.kr=wu.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new wu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Kn(t),Se.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&r.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Se.waitFor(s).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Nr.get(t)||null;return Se.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),Se.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Br.yr(t);return Se.resolve(r)}containsKey(e,t){return Se.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Hi(0),this.Kr=!1,this.Kr=!0,this.$r=new X6,this.referenceDelegate=e(this),this.Ur=new eL(this),this.indexManager=new M6,this.remoteDocumentCache=function(i){return new Q6(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new xT(t),this.Gr=new K6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Y6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new J6(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){Je("MemoryPersistence","Starting transaction:",e);const i=new tL(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Se.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}}class tL extends bE{constructor(e){super(),this.currentSequenceNumber=e}}class Jp{constructor(e){this.persistence=e,this.Jr=new S2,this.Yr=null}static Zr(e){return new Jp(e)}get Xr(){if(this.Yr)return this.Yr;throw xt()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),Se.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,r=>{const i=ft.fromPath(r);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Pt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Se.or([()=>Se.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL{constructor(e){this.serializer=e}O(e,t,r,i){const s=new Wp("createOrUpgrade",t);r<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uy,{unique:!0}),c.createObjectStore("documentMutations")}(e),Xy(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=Se.resolve();return r<3&&i>=3&&(r!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),Xy(e)),a=a.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),r<4&&i>=4&&(r!==0&&(a=a.next(()=>function(c,u){return u.store("mutations").U().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",uy,{unique:!0});const d=u.store("mutations"),g=l.map(p=>d.put(p));return Se.waitFor(g)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(a=a.next(()=>this.ni(s))),r<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),r<7&&i>=7&&(a=a.next(()=>this.ii(s))),r<8&&i>=8&&(a=a.next(()=>this.si(e,s))),r<9&&i>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(a=a.next(()=>this.oi(s))),r<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:OR});u.createIndex("collectionPathOverlayIndex",MR,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",BR,{unique:!1})})(e)})),r<13&&i>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:AR});u.createIndex("documentKeyIndex",IR),u.createIndex("collectionGroupIndex",SR)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),r<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:RR}).createIndex("sequenceNumberIndex",LR,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:DR}).createIndex("documentKeyIndex",FR,{unique:!1})}(e))),r<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(a=a.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=tp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>Se.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",a).next(o=>Se.forEach(o,c=>{bt(c.userId===s.userId);const u=Kc(this.serializer,c);return AT(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.J((a,o)=>{const c=new Qt(a),u=function(d){return[0,Ni(d)]}(c);s.push(t.get(u).next(l=>l?Se.resolve():(d=>t.put({targetId:0,path:Ni(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Se.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:CR});const r=t.store("collectionParents"),i=new I2,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return r.put({collectionId:o,parent:Ni(c)})}};return t.store("remoteDocuments").J({H:!0},(a,o)=>{const c=new Qt(a);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,o,c],u)=>{const l=ma(o);return s(l.popLast())}))}oi(e){const t=e.store("targets");return t.J((r,i)=>{const s=lf(i),a=ET(this.serializer,s);return t.put(a)})}_i(e,t){const r=t.store("remoteDocuments"),i=[];return r.J((s,a)=>{const o=t.store("remoteDocumentsV14"),c=function(d){return d.document?new ft(Qt.fromString(d.document.name).popFirst(5)):d.noDocument?ft.fromSegments(d.noDocument.path):d.unknownDocument?ft.fromSegments(d.unknownDocument.path):xt()}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))}).next(()=>Se.waitFor(i))}ai(e,t){const r=t.store("mutations"),i=NT(this.serializer),s=new CT(Jp.Zr,this.serializer.ct);return r.U().next(a=>{const o=new Map;return a.forEach(c=>{var u;let l=(u=o.get(c.userId))!==null&&u!==void 0?u:Wt();Kc(this.serializer,c).keys().forEach(d=>l=l.add(d)),o.set(c.userId,l)}),Se.forEach(o,(c,u)=>{const l=new Mr(u),d=Yp.lt(this.serializer,l),g=s.getIndexManager(l),p=Xp.lt(l,this.serializer,g,s.referenceDelegate);return new kT(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new Kg(t,Hi.oe),c).next()})})}}function Xy(n){n.createObjectStore("targetDocuments",{keyPath:NR}).createIndex("documentTargetsIndex",kR,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",PR,{unique:!0}),n.createObjectStore("targetGlobal")}const ig="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class P2{constructor(e,t,r,i,s,a,o,c,u,l,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=s,this.window=a,this.document=o,this.ci=u,this.li=l,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!P2.D())throw new Xe(De.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new W6(this,i),this.Ai=t+"main",this.serializer=new xT(c),this.Ri=new _a(this.Ai,this.hi,new nL(this.serializer)),this.$r=new C6,this.Ur=new V6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=NT(this.serializer),this.Gr=new k6,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,l===!1&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(De.FAILED_PRECONDITION,ig);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Hi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>l0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(xc(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Zh(e).get("owner").next(t=>Se.resolve(this.vi(t)))}Ci(e){return l0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const r=Rr(t,"clientMetadata");return r.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return Se.forEach(a,o=>r.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Se.resolve(!0):Zh(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Xe(De.FAILED_PRECONDITION,ig);return!1}}return!(!this.networkEnabled||!this.inForeground)||l0(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Kg(e,Hi.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>l0(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Xp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new B6(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Yp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){Je("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?jR:c===16?UR:c===15?f2:c===14?kE:c===13?NE:c===12?VR:c===11?PE:void xt()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,o=>(a=new Kg(o,this.Qr?this.Qr.next():Hi.oe),t==="readwrite-primary"?this.wi(a).next(c=>!!c||this.Si(a)).next(c=>{if(!c)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Xe(De.FAILED_PRECONDITION,TE);return r(a)}).next(c=>this.Di(a).next(()=>c)):this.Ki(a).next(()=>r(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Zh(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Xe(De.FAILED_PRECONDITION,ig)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zh(e).put("owner",t)}static D(){return _a.D()}bi(e){const t=Zh(e);return t.get("owner").next(r=>this.vi(r)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Se.resolve())}Mi(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(mr(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;tx()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Je("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Zh(n){return Rr(n,"owner")}function l0(n){return Rr(n,"clientMetadata")}function N2(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Wt(),i=Wt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new k2(e,t.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tx()?8:AE(Jn())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,r).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new rL;return this.Xi(e,t,a).next(o=>{if(s.result=o,this.zi)return this.es(e,t,a,o.size)})}).next(()=>s.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(wl()<=Yt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(wl()<=Yt.DEBUG&&Je("QueryEngine","Query:",xl(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(wl()<=Yt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ki(t))):Se.resolve())}Yi(e,t){if(Ey(t))return Se.resolve(null);let r=ki(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Q0(t,null,"F"),r=ki(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const a=Wt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.ts(t,o);return this.ns(t,u,a,c.readTime)?this.Yi(e,Q0(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,r,i){return Ey(t)||i.isEqual(Pt.min())?Se.resolve(null):this.Ji.getDocuments(e,r).next(s=>{const a=this.ts(t,s);return this.ns(t,a,r,i)?Se.resolve(null):(wl()<=Yt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xl(t)),this.rs(e,a,t,xE(i,-1)).next(o=>o))})}ts(e,t){let r=new Pn($E(e));return t.forEach((i,s)=>{_d(e,s)&&(r=r.add(s))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,r){return wl()<=Yt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",xl(t)),this.Ji.getDocumentsMatchingQuery(e,t,ms.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Mn(jt),this._s=new Ec(s=>mu(s),gd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function LT(n,e,t,r){return new iL(n,e,t,r)}async function DT(n,e){const t=gt(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const a=[],o=[];let c=Wt();for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(r,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function sL(n,e){const t=gt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,l){const d=u.batch,g=d.keys();let p=Se.resolve();return g.forEach(x=>{p=p.next(()=>l.getEntry(c,x)).next(_=>{const E=u.docVersions.get(x);bt(E!==null),_.version.compareTo(E)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,d))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let c=Wt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function FT(n){const e=gt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function aL(n,e){const t=gt(n),r=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const o=[];e.targetChanges.forEach((l,d)=>{const g=i.get(d);if(!g)return;o.push(t.Ur.removeMatchingKeys(s,l.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,l.addedDocuments,d)));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(or.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,r)),i=i.insert(d,p),function(_,E,P){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,p,l)&&o.push(t.Ur.updateTargetData(s,p))});let c=Gi(),u=Wt();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),o.push(OT(s,a,e.documentUpdates).next(l=>{c=l.Ps,u=l.Is})),!r.isEqual(Pt.min())){const l=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,r));o.push(l)}return Se.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function OT(n,e,t){let r=Wt(),i=Wt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let a=Gi();return t.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Pt.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Je("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function oL(n,e){const t=gt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rh(n,e){const t=gt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(s=>s?(i=s,Se.resolve(i)):t.Ur.allocateTargetId(r).next(a=>(i=new Xa(e,a,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}async function ih(n,e,t){const r=gt(n),i=r.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",s,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!xc(a))throw a;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function np(n,e,t){const r=gt(n);let i=Pt.min(),s=Wt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,l){const d=gt(c),g=d._s.get(l);return g!==void 0?Se.resolve(d.os.get(g)):d.Ur.getTargetData(u,l)}(r,a,ki(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,t?i:Pt.min(),t?s:Wt())).next(o=>(VT(r,HE(e),o),{documents:o,Ts:s})))}function MT(n,e){const t=gt(n),r=gt(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.ot(s,e).next(a=>a?a.target:null))}function BT(n,e){const t=gt(n),r=t.us.get(e)||Pt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,xE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(VT(t,e,i),i))}function VT(n,e,t){let r=n.us.get(e)||Pt.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.us.set(e,r)}async function cL(n,e,t,r){const i=gt(n);let s=Wt(),a=Gi();for(const u of t){const l=e.Es(u.metadata.name);u.document&&(s=s.add(l));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),a=a.insert(l,d)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),c=await rh(i,function(l){return ki(vh(Qt.fromString(`__bundle__/docs/${l}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>OT(u,o,a).next(l=>(o.apply(u),l)).next(l=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.Ps,l.Is)).next(()=>l.Ps)))}async function uL(n,e,t=Wt()){const r=await rh(n,ki(b2(e.bundledQuery))),i=gt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=gr(e.readTime);if(r.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=r.withResumeToken(or.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next(()=>i.Ur.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,r.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function Jy(n,e){return`firestore_clients_${n}_${e}`}function Qy(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function sg(n,e){return`firestore_targets_${n}_${e}`}class rp{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){const i=JSON.parse(r);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Xe(i.error.code,i.error.message))),a?new rp(e,t,i.state,s):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yf{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){const r=JSON.parse(t);let i,s=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(i=new Xe(r.error.code,r.error.message))),s?new yf(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ip{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const r=JSON.parse(t);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,s=g2();for(let a=0;i&&a<r.activeTargetIds.length;++a)i=IE(r.activeTargetIds[a]),s=s.add(r.activeTargetIds[a]);return i?new ip(e,s):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class C2{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new C2(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class c1{constructor(){this.activeTargetIds=g2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ag{constructor(e,t,r,i,s){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Mn(jt),this.started=!1,this.bs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Jy(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new c1),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const r of e){if(r===this.ps)continue;const i=this.getItem(Jy(this.persistenceKey,r));if(i){const s=ip.Rs(r,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const r=this.Ls(t);r&&this.Bs(r)}for(const r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(sg(this.persistenceKey,e));if(i){const s=yf.Rs(e,i);s&&(r=s.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sg(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Je("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const r=this.Gs(t.key);return this.zs(r,null)}{const r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){const r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){const r=function(s){let a=Hi.oe;if(s!=null)try{const o=JSON.parse(s);bt(typeof o=="number"),a=o}catch(o){mr("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(t.newValue);r!==Hi.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){const r=this.Xs(t.newValue);await Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){const i=new rp(this.currentUser,e,t,r),s=Qy(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=Qy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){const i=sg(this.persistenceKey,e),s=new yf(e,t,r);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const r=this.Gs(e);return ip.Rs(r,t)}Hs(e,t){const r=this.Fs.exec(e),i=Number(r[1]),s=r[2]!==void 0?r[2]:null;return rp.Rs(new Mr(s),i,t)}Ys(e,t){const r=this.Ms.exec(e),i=Number(r[1]);return yf.Rs(i,t)}Ls(e){return C2.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(r),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.io(a,o).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=g2();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class UT{constructor(){this.so=new c1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new c1,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let h0=null;function og(){return h0===null?h0=function(){return 268435456+Math.round(2147483648*Math.random())}():h0++,"0x"+h0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ui="WebChannelConnection";class dL extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,r,i,s,a){const o=og(),c=this.xo(t,r.toUriEncodedString());Je("RestConnection",`Sending RPC '${t}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(t,c,u,i).then(l=>(Je("RestConnection",`Received RPC '${t}' ${o}: `,l),l),l=>{throw Ta("RestConnection",`RPC '${t}' ${o} failed with error: `,l,"url: ",c,"request:",i),l})}Lo(t,r,i,s,a,o){return this.Mo(t,r,i,s,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+gh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,r){const i=hL[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){const s=og();return new Promise((a,o)=>{const c=new dE;c.setWithCredentials(!0),c.listenOnce(pE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case N0.NO_ERROR:const l=c.getResponseJson();Je(ui,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),a(l);break;case N0.TIMEOUT:Je(ui,`RPC '${e}' ${s} timed out`),o(new Xe(De.DEADLINE_EXCEEDED,"Request time out"));break;case N0.HTTP_ERROR:const d=c.getStatus();if(Je(ui,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const p=g==null?void 0:g.error;if(p&&p.status&&p.message){const x=function(E){const P=E.toLowerCase().replace(/_/g,"-");return Object.values(De).indexOf(P)>=0?P:De.UNKNOWN}(p.status);o(new Xe(x,p.message))}else o(new Xe(De.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new Xe(De.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Je(ui,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Je(ui,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,r,15)})}Bo(e,t,r){const i=og(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=vE(),o=gE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,r),c.encodeInitMessageHeaders=!0;const l=s.join("");Je(ui,`Creating RPC '${e}' stream ${i}: ${l}`,c);const d=a.createWebChannel(l,c);let g=!1,p=!1;const x=new fL({Io:E=>{p?Je(ui,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Je(ui,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),Je(ui,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},To:()=>d.close()}),_=(E,P,L)=>{E.listen(P,V=>{try{L(V)}catch(K){setTimeout(()=>{throw K},0)}})};return _(d,of.EventType.OPEN,()=>{p||(Je(ui,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),_(d,of.EventType.CLOSE,()=>{p||(p=!0,Je(ui,`RPC '${e}' stream ${i} transport closed`),x.So())}),_(d,of.EventType.ERROR,E=>{p||(p=!0,Ta(ui,`RPC '${e}' stream ${i} transport errored:`,E),x.So(new Xe(De.UNAVAILABLE,"The operation could not be completed")))}),_(d,of.EventType.MESSAGE,E=>{var P;if(!p){const L=E.data[0];bt(!!L);const V=L,K=V.error||((P=V[0])===null||P===void 0?void 0:P.error);if(K){Je(ui,`RPC '${e}' stream ${i} received error:`,K);const ie=K.status;let ae=function(C){const B=Er[C];if(B!==void 0)return sT(B)}(ie),N=K.message;ae===void 0&&(ae=De.INTERNAL,N="Unknown error status: "+ie+" with message "+K.message),p=!0,x.So(new Xe(ae,N)),d.close()}else Je(ui,`RPC '${e}' stream ${i} received:`,L),x.bo(L)}}),_(o,mE.STAT_EVENT,E=>{E.stat===$g.PROXY?Je(ui,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===$g.NOPROXY&&Je(ui,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return typeof window<"u"?window:null}function O0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ed(n){return new y6(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(e,t,r,i,s,a,o,c){this.ui=e,this.Ho=r,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new R2(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===De.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===De.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{const i=new Xe(De.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){const r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class pL extends qT{constructor(e,t,r,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=E6(this.serializer,e),r=function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?gr(a.readTime):Pt.min()}(e);return this.listener.d_(t,r)}A_(e){const t={};t.database=r1(this.serializer),t.addTarget=function(s,a){let o;const c=a.target;if(o=X0(c)?{documents:mT(s,c)}:{query:gT(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=uT(s,a.resumeToken);const u=t1(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=nh(s,a.snapshotVersion.toTimestamp());const u=t1(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const r=b6(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){const t={};t.database=r1(this.serializer),t.removeTarget=e,this.a_(t)}}class mL extends qT{constructor(e,t,r,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=T6(e.writeResults,e.commitTime),r=gr(e.commitTime);return this.listener.g_(r,t)}p_(){const e={};e.database=r1(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Hf(this.serializer,r))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Xe(De.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,n1(t,r),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xe(De.UNKNOWN,s.toString())})}Lo(e,t,r,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,n1(t,r),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===De.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xe(De.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class vL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(mr(t),this.D_=!1):Je("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(e,t,r,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{r.enqueueAndForget(async()=>{Tc(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=gt(c);u.L_.add(4),await wh(u),u.q_.set("Unknown"),u.L_.delete(4),await Td(u)}(this))})}),this.q_=new vL(r,i)}}async function Td(n){if(Tc(n))for(const e of n.B_)await e(!0)}async function wh(n){for(const e of n.B_)await e(!1)}function Qp(n,e){const t=gt(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),F2(t)?D2(t):Eh(t).r_()&&L2(t,e))}function sh(n,e){const t=gt(n),r=Eh(t);t.N_.delete(e),r.r_()&&zT(t,e),t.N_.size===0&&(r.r_()?r.o_():Tc(t)&&t.q_.set("Unknown"))}function L2(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Eh(n).A_(e)}function zT(n,e){n.Q_.xe(e),Eh(n).R_(e)}function D2(n){n.Q_=new m6({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Eh(n).start(),n.q_.v_()}function F2(n){return Tc(n)&&!Eh(n).n_()&&n.N_.size>0}function Tc(n){return gt(n).L_.size===0}function WT(n){n.Q_=void 0}async function yL(n){n.q_.set("Online")}async function wL(n){n.N_.forEach((e,t)=>{L2(n,e)})}async function xL(n,e){WT(n),F2(n)?(n.q_.M_(e),D2(n)):n.q_.set("Unknown")}async function EL(n,e,t){if(n.q_.set("Online"),e instanceof cT&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(n,e)}catch(r){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await sp(n,r)}else if(e instanceof F0?n.Q_.Ke(e):e instanceof oT?n.Q_.He(e):n.Q_.We(e),!t.isEqual(Pt.min()))try{const r=await FT(n.localStore);t.compareTo(r)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=s.N_.get(u);l&&s.N_.set(u,l.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const l=s.N_.get(c);if(!l)return;s.N_.set(c,l.withResumeToken(or.EMPTY_BYTE_STRING,l.snapshotVersion)),zT(s,c);const d=new Xa(l.target,c,u,l.sequenceNumber);L2(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(n,t)}catch(r){Je("RemoteStore","Failed to raise snapshot:",r),await sp(n,r)}}async function sp(n,e,t){if(!xc(e))throw e;n.L_.add(1),await wh(n),n.q_.set("Offline"),t||(t=()=>FT(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{Je("RemoteStore","Retrying IndexedDB access"),await t(),n.L_.delete(1),await Td(n)})}function HT(n,e){return e().catch(t=>sp(n,t,e))}async function xh(n){const e=gt(n),t=lc(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;TL(e);)try{const i=await oL(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,bL(e,i)}catch(i){await sp(e,i)}$T(e)&&GT(e)}function TL(n){return Tc(n)&&n.O_.length<10}function bL(n,e){n.O_.push(e);const t=lc(n);t.r_()&&t.V_&&t.m_(e.mutations)}function $T(n){return Tc(n)&&!lc(n).n_()&&n.O_.length>0}function GT(n){lc(n).start()}async function AL(n){lc(n).p_()}async function IL(n){const e=lc(n);for(const t of n.O_)e.m_(t.mutations)}async function SL(n,e,t){const r=n.O_.shift(),i=w2.from(r,e,t);await HT(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),await xh(n)}async function PL(n,e){e&&lc(n).V_&&await async function(r,i){if(function(a){return iT(a)&&a!==De.ABORTED}(i.code)){const s=r.O_.shift();lc(r).s_(),await HT(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await xh(r)}}(n,e),$T(n)&&GT(n)}async function ew(n,e){const t=gt(n);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const r=Tc(t);t.L_.add(3),await wh(t),r&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Td(t)}async function u1(n,e){const t=gt(n);e?(t.L_.delete(2),await Td(t)):e||(t.L_.add(2),await wh(t),t.q_.set("Unknown"))}function Eh(n){return n.K_||(n.K_=function(t,r,i){const s=gt(t);return s.w_(),new pL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:yL.bind(null,n),Ro:wL.bind(null,n),mo:xL.bind(null,n),d_:EL.bind(null,n)}),n.B_.push(async e=>{e?(n.K_.s_(),F2(n)?D2(n):n.q_.set("Unknown")):(await n.K_.stop(),WT(n))})),n.K_}function lc(n){return n.U_||(n.U_=function(t,r,i){const s=gt(t);return s.w_(),new mL(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:AL.bind(null,n),mo:PL.bind(null,n),f_:IL.bind(null,n),g_:SL.bind(null,n)}),n.B_.push(async e=>{e?(n.U_.s_(),await xh(n)):(await n.U_.stop(),n.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))})),n.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new ri,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const a=Date.now()+r,o=new O2(e,t,a,i,s);return o.start(r),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(De.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Th(n,e){if(mr("AsyncQueue",`${e}: ${n}`),xc(n))return new Xe(De.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ft.comparator(t.key,r.key):(t,r)=>ft.comparator(t.key,r.key),this.keyedMap=cf(),this.sortedSet=new Mn(this.comparator)}static emptySet(e){return new Ml(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ml;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{constructor(){this.W_=new Mn(ft.comparator)}track(e){const t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}}class ah{constructor(e,t,r,i,s,a,o,c,u){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,r,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new ah(e,t,Ml.emptySet(t),a,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class kL{constructor(){this.queries=nw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){const i=gt(t),s=i.queries;i.queries=nw(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(r)})})(this,new Xe(De.ABORTED,"Firestore shutting down"))}}function nw(){return new Ec(n=>WE(n),vd)}async function M2(n,e){const t=gt(n);let r=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(r=2):(s=new NL,r=e.J_()?0:1);try{switch(r){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=Th(a,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&V2(t)}async function B2(n,e){const t=gt(n),r=e.query;let i=3;const s=t.queries.get(r);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function CL(n,e){const t=gt(n);let r=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(r=!0);a.z_=i}}r&&V2(t)}function RL(n,e,t){const r=gt(n),i=r.queries.get(e);if(i)for(const s of i.j_)s.onError(t);r.queries.delete(e)}function V2(n){n.Y_.forEach(e=>{e.next()})}var l1,rw;(rw=l1||(l1={})).ea="default",rw.Cache="cache";class U2{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ah(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==l1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.serializer=e}Es(e){return ya(this.serializer,e)}ds(e){return e.metadata.exists?pT(this.serializer,e.document,!1):jn.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return gr(e)}}class DL{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=KT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const r=Qt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,r=new iw(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(t.get(a)||Wt()).add(s);t.set(a,o)}}return t}async complete(){const e=await cL(this.localStore,new iw(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const r of this.queries)await uL(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function KT(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e){this.key=e}}class XT{constructor(e){this.key=e}}class JT{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wt(),this.mutatedKeys=Wt(),this.Aa=$E(e),this.Ra=new Ml(this.Aa)}get Va(){return this.Ta}ma(e,t){const r=t?t.fa:new tw,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const g=i.get(l),p=_d(this.query,d)?d:null,x=!!g&&this.mutatedKeys.has(g.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;g&&p?g.data.isEqual(p.data)?x!==_&&(r.track({type:3,doc:p}),E=!0):this.ga(g,p)||(r.track({type:2,doc:p}),E=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!g&&p?(r.track({type:0,doc:p}),E=!0):g&&!p&&(r.track({type:1,doc:g}),E=!0,(c||u)&&(o=!0)),E&&(p?(a=a.add(p),s=_?s.add(l):s.delete(l)):(a=a.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),s=s.delete(l.key),r.track({type:1,doc:l})}return{Ra:a,fa:r,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((l,d)=>function(p,x){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return _(p)-_(x)}(l.type,d.type)||this.Aa(l.doc,d.doc)),this.pa(r),i=i!=null&&i;const o=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new ah(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new tw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Wt(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const t=[];return e.forEach(r=>{this.da.has(r)||t.push(new XT(r))}),this.da.forEach(r=>{e.has(r)||t.push(new YT(r))}),t}ba(e){this.Ta=e.Ts,this.da=Wt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return ah.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class OL{constructor(e){this.key=e,this.va=!1}}class ML{constructor(e,t,r,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Ec(o=>WE(o),vd),this.Ma=new Map,this.xa=new Set,this.Oa=new Mn(ft.comparator),this.Na=new Map,this.La=new S2,this.Ba={},this.ka=new Map,this.qa=wu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BL(n,e,t=!0){const r=Zp(n);let i;const s=r.Fa.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await QT(r,e,t,!0),i}async function VL(n,e){const t=Zp(n);await QT(t,e,!0,!1)}async function QT(n,e,t,r){const i=await rh(n.localStore,ki(e)),s=i.targetId,a=n.sharedClientState.addLocalQueryTarget(s,t);let o;return r&&(o=await j2(n,e,s,a==="current",i.resumeToken)),n.isPrimaryClient&&t&&Qp(n.remoteStore,i),o}async function j2(n,e,t,r,i){n.Ka=(d,g,p)=>async function(_,E,P,L){let V=E.view.ma(P);V.ns&&(V=await np(_.localStore,E.query,!1).then(({documents:N})=>E.view.ma(N,V)));const K=L&&L.targetChanges.get(E.targetId),ie=L&&L.targetMismatches.get(E.targetId)!=null,ae=E.view.applyChanges(V,_.isPrimaryClient,K,ie);return h1(_,E.targetId,ae.wa),ae.snapshot}(n,d,g,p);const s=await np(n.localStore,e,!0),a=new JT(e,s.Ts),o=a.ma(s.documents),c=xd.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),u=a.applyChanges(o,n.isPrimaryClient,c);h1(n,t,u.wa);const l=new FL(e,t,a);return n.Fa.set(e,l),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),u.snapshot}async function UL(n,e,t){const r=gt(n),i=r.Fa.get(e),s=r.Ma.get(i.targetId);if(s.length>1)return r.Ma.set(i.targetId,s.filter(a=>!vd(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ih(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&sh(r.remoteStore,i.targetId),oh(r,i.targetId)}).catch(wc)):(oh(r,i.targetId),await ih(r.localStore,i.targetId,!0))}async function jL(n,e){const t=gt(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),sh(t.remoteStore,r.targetId))}async function qL(n,e,t){const r=H2(n);try{const i=await function(a,o){const c=gt(a),u=Kn.now(),l=o.reduce((p,x)=>p.add(x.key),Wt());let d,g;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=Gi(),_=Wt();return c.cs.getEntries(p,l).next(E=>{x=E,x.forEach((P,L)=>{L.isValidDocument()||(_=_.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,x)).next(E=>{d=E;const P=[];for(const L of o){const V=f6(L,d.get(L.key).overlayedDocument);V!=null&&P.push(new ho(L.key,V,FE(V.value.mapValue),Gn.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,P,o)}).next(E=>{g=E;const P=E.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(p,E.batchId,P)})}).then(()=>({batchId:g.batchId,changes:KE(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Mn(jt)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(r,i.batchId,t),await fo(r,i.changes),await xh(r.remoteStore)}catch(i){const s=Th(i,"Failed to persist write");t.reject(s)}}async function ZT(n,e){const t=gt(n);try{const r=await aL(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?bt(a.va):i.removedDocuments.size>0&&(bt(a.va),a.va=!1))}),await fo(t,r,e)}catch(r){await wc(r)}}function sw(n,e,t){const r=gt(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const i=[];r.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=gt(a);c.onlineState=o;let u=!1;c.queries.forEach((l,d)=>{for(const g of d.j_)g.Z_(o)&&(u=!0)}),u&&V2(c)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function zL(n,e,t){const r=gt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Na.get(e),s=i&&i.key;if(s){let a=new Mn(ft.comparator);a=a.insert(s,jn.newNoDocument(s,Pt.min()));const o=Wt().add(s),c=new wd(Pt.min(),new Map,new Mn(jt),a,o);await ZT(r,c),r.Oa=r.Oa.remove(s),r.Na.delete(e),W2(r)}else await ih(r.localStore,e,!1).then(()=>oh(r,e,t)).catch(wc)}async function WL(n,e){const t=gt(n),r=e.batch.batchId;try{const i=await sL(t.localStore,e);z2(t,r,null),q2(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await fo(t,i)}catch(i){await wc(i)}}async function HL(n,e,t){const r=gt(n);try{const i=await function(a,o){const c=gt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,o).next(d=>(bt(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(r.localStore,e);z2(r,e,t),q2(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await fo(r,i)}catch(i){await wc(i)}}async function $L(n,e){const t=gt(n);Tc(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(a){const o=gt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(r===-1)return void e.resolve();const i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){const i=Th(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function q2(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function z2(n,e,t){const r=gt(n);let i=r.Ba[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function oh(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||eb(n,r)})}function eb(n,e){n.xa.delete(e.path.canonicalString());const t=n.Oa.get(e);t!==null&&(sh(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),W2(n))}function h1(n,e,t){for(const r of t)r instanceof YT?(n.La.addReference(r.key,e),GL(n,r)):r instanceof XT?(Je("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||eb(n,r.key)):xt()}function GL(n,e){const t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(Je("SyncEngine","New document in limbo: "+t),n.xa.add(r),W2(n))}function W2(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){const e=n.xa.values().next().value;n.xa.delete(e);const t=new ft(Qt.fromString(e)),r=n.qa.next();n.Na.set(r,new OL(t)),n.Oa=n.Oa.insert(t,r),Qp(n.remoteStore,new Xa(ki(vh(t.path)),r,"TargetPurposeLimboResolution",Hi.oe))}}async function fo(n,e,t){const r=gt(n),i=[],s=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((o,c)=>{a.push(r.Ka(c,e,t).then(u=>{var l;if((u||t)&&r.isPrimaryClient){const d=u?!u.fromCache:(l=t==null?void 0:t.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;r.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);const d=k2.Wi(c.targetId,u);s.push(d)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(c,u){const l=gt(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Se.forEach(u,g=>Se.forEach(g.$i,p=>l.persistence.referenceDelegate.addReference(d,g.targetId,p)).next(()=>Se.forEach(g.Ui,p=>l.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))}catch(d){if(!xc(d))throw d;Je("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=l.os.get(g),x=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(x);l.os=l.os.insert(g,_)}}}(r.localStore,s))}async function KL(n,e){const t=gt(n);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const r=await DT(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new Xe(De.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fo(t,r.hs)}}function YL(n,e){const t=gt(n),r=t.Na.get(e);if(r&&r.va)return Wt().add(r.key);{let i=Wt();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const o=t.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function XL(n,e){const t=gt(n),r=await np(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&h1(t,e.targetId,i.wa),i}async function JL(n,e){const t=gt(n);return BT(t.localStore,e).then(r=>fo(t,r))}async function QL(n,e,t,r){const i=gt(n),s=await function(o,c){const u=gt(o),l=gt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Mn(d,c).next(g=>g?u.localDocuments.getDocuments(d,g):Se.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await xh(i.remoteStore):t==="acknowledged"||t==="rejected"?(z2(i,e,r||null),q2(i,e),function(o,c){gt(gt(o).mutationQueue).On(c)}(i.localStore,e)):xt(),await fo(i,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}async function ZL(n,e){const t=gt(n);if(Zp(t),H2(t),e===!0&&t.Qa!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),i=await aw(t,r.toArray());t.Qa=!0,await u1(t.remoteStore,!0);for(const s of i)Qp(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const r=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?r.push(a):i=i.then(()=>(oh(t,a),ih(t.localStore,a,!0))),sh(t.remoteStore,a)}),await i,await aw(t,r),function(a){const o=gt(a);o.Na.forEach((c,u)=>{sh(o.remoteStore,u)}),o.La.pr(),o.Na=new Map,o.Oa=new Mn(ft.comparator)}(t),t.Qa=!1,await u1(t.remoteStore,!1)}}async function aw(n,e,t){const r=gt(n),i=[],s=[];for(const a of e){let o;const c=r.Ma.get(a);if(c&&c.length!==0){o=await rh(r.localStore,ki(c[0]));for(const u of c){const l=r.Fa.get(u),d=await XL(r,l);d.snapshot&&s.push(d.snapshot)}}else{const u=await MT(r.localStore,a);o=await rh(r.localStore,u),await j2(r,tb(u),a,!1,o.resumeToken)}i.push(o)}return r.Ca.d_(s),i}function tb(n){return zE(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function eD(n){return function(t){return gt(gt(t).persistence).Qi()}(gt(n).localStore)}async function tD(n,e,t,r){const i=gt(n);if(i.Qa)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await BT(i.localStore,HE(s[0])),o=wd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",or.EMPTY_BYTE_STRING);await fo(i,a,o);break}case"rejected":await ih(i.localStore,e,!0),oh(i,e,r);break;default:xt()}}async function nD(n,e,t){const r=Zp(n);if(r.Qa){for(const i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){Je("SyncEngine","Adding an already active target "+i);continue}const s=await MT(r.localStore,i),a=await rh(r.localStore,s);await j2(r,tb(s),a.targetId,!1,a.resumeToken),Qp(r.remoteStore,a)}for(const i of t)r.Ma.has(i)&&await ih(r.localStore,i,!1).then(()=>{sh(r.remoteStore,i),oh(r,i)}).catch(wc)}}function Zp(n){const e=gt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ZT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zL.bind(null,e),e.Ca.d_=CL.bind(null,e.eventManager),e.Ca.$a=RL.bind(null,e.eventManager),e}function H2(n){const e=gt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=WL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HL.bind(null,e),e}function rD(n,e,t){const r=gt(n);(async function(s,a,o){try{const c=await a.getMetadata();if(await function(p,x){const _=gt(p),E=gr(x.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",P=>_.Gr.getBundleMetadata(P,x.id)).then(P=>!!P&&P.createTime.compareTo(E)>=0)}(s.localStore,c))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress(KT(c));const u=new DL(c,s.localStore,a.serializer);let l=await a.Ua();for(;l;){const g=await u.la(l);g&&o._updateProgress(g),l=await a.Ua()}const d=await u.complete();return await fo(s,d.Ia,void 0),await function(p,x){const _=gt(p);return _.persistence.runTransaction("Save bundle","readwrite",E=>_.Gr.saveBundleMetadata(E,x))}(s.localStore,c),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(c){return Ta("SyncEngine",`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class $f{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ed(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return LT(this.persistence,new RT,e.initialUser,this.serializer)}Ga(e){return new CT(Jp.Zr,this.serializer)}Wa(e){return new UT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}$f.provider={build:()=>new $f};class nb extends $f{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await H2(this.Ja.syncEngine),await xh(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return LT(this.persistence,new RT,e.initialUser,this.serializer)}ja(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new j6(r,e.asyncQueue,t)}Ha(e,t){const r=new ER(t,this.persistence);return new xR(e.asyncQueue,r)}Ga(e){const t=N2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?zi.withCacheSize(this.cacheSizeBytes):zi.DEFAULT;return new P2(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,jT(),O0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new UT}}class iD extends nb{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof ag&&(this.sharedClientState.syncEngine={no:QL.bind(null,t),ro:tD.bind(null,t),io:nD.bind(null,t),Qi:eD.bind(null,t),eo:JL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async r=>{await ZL(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}Wa(e){const t=jT();if(!ag.D(t))throw new Xe(De.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=N2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new ag(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Gf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>sw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=KL.bind(null,this.syncEngine),await u1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new kL}()}createDatastore(e){const t=Ed(e.databaseInfo.databaseId),r=function(s){return new dL(s)}(e.databaseInfo);return function(s,a,o,c){return new gL(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,s,a,o){return new _L(r,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>sw(this.syncEngine,t,0),function(){return Zy.D()?new Zy:new lL}())}createSyncEngine(e,t){return function(i,s,a,o,c,u,l){const d=new ML(i,s,a,o,c,u);return l&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=gt(i);Je("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await wh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Gf.provider={build:()=>new Gf};function ow(n,e=10240){let t=0;return{async read(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ri,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(r);return new LL(JSON.parse(i),e.length+r)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Xe(De.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const a=gt(i),o={documents:s.map(d=>Wf(a.serializer,d))},c=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Qt.emptyPath(),o,s.length),u=new Map;c.forEach(d=>{const g=x6(a.serializer,d);u.set(g.key.toString(),g)});const l=[];return s.forEach(d=>{const g=u.get(d.toString());bt(!!g),l.push(g)}),l}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new yh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{const i=ft.fromPath(r);this.mutations.push(new _2(i,this.precondition(i)))}),await async function(r,i){const s=gt(r),a={writes:i.map(o=>Hf(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,Qt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt();t=Pt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Xe(De.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pt.min())?Gn.exists(!1):Gn.updateTime(t):Gn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new Xe(De.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Gn.updateTime(t)}return Gn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this._u=r.maxAttempts,this.t_=new R2(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new aD(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})})}cu(e){try{const t=this.updateFunction(e);return!md(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!iT(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e,t,r,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Mr.UNAUTHENTICATED,this.clientId=yE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async a=>{Je("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Je("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ri;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=Th(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function cg(n,e){n.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async i=>{r.isEqual(i)||(await DT(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function cw(n,e){n.asyncQueue.verifyOperationInProgress();const t=await $2(n);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>ew(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>ew(e.remoteStore,i)),n._onlineComponents=e}async function $2(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await cg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===De.FAILED_PRECONDITION||i.code===De.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),await cg(n,new $f)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await cg(n,new $f);return n._offlineComponents}async function tm(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await cw(n,n._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await cw(n,new Gf))),n._onlineComponents}function rb(n){return $2(n).then(e=>e.persistence)}function G2(n){return $2(n).then(e=>e.localStore)}function ib(n){return tm(n).then(e=>e.remoteStore)}function K2(n){return tm(n).then(e=>e.syncEngine)}function uD(n){return tm(n).then(e=>e.datastore)}async function ch(n){const e=await tm(n),t=e.eventManager;return t.onListen=BL.bind(null,e.syncEngine),t.onUnlisten=UL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=VL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=jL.bind(null,e.syncEngine),t}function lD(n){return n.asyncQueue.enqueue(async()=>{const e=await rb(n),t=await ib(n);return e.setNetworkEnabled(!0),function(i){const s=gt(i);return s.L_.delete(0),Td(s)}(t)})}function hD(n){return n.asyncQueue.enqueue(async()=>{const e=await rb(n),t=await ib(n);return e.setNetworkEnabled(!1),async function(i){const s=gt(i);s.L_.add(0),await wh(s),s.q_.set("Offline")}(t)})}function fD(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await function(u,l){const d=gt(u);return d.persistence.runTransaction("read document","readonly",g=>d.localDocuments.getDocument(g,l))}(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Xe(De.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=Th(o,`Failed to get document '${s} from cache`);a.reject(c)}}(await G2(n),e,t)),t.promise}function sb(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new em({next:g=>{l.Za(),a.enqueueAndForget(()=>B2(s,d));const p=g.docs.has(o);!p&&g.fromCache?u.reject(new Xe(De.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&c&&c.source==="server"?u.reject(new Xe(De.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new U2(vh(o.path),l,{includeMetadataChanges:!0,_a:!0});return M2(s,d)}(await ch(n),n.asyncQueue,e,t,r)),r.promise}function dD(n,e){const t=new ri;return n.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await np(i,s,!0),c=new JT(s,o.Ts),u=c.ma(o.documents),l=c.applyChanges(u,!1);a.resolve(l.snapshot)}catch(o){const c=Th(o,`Failed to execute query '${s} against cache`);a.reject(c)}}(await G2(n),e,t)),t.promise}function ab(n,e,t={}){const r=new ri;return n.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new em({next:g=>{l.Za(),a.enqueueAndForget(()=>B2(s,d)),g.fromCache&&c.source==="server"?u.reject(new Xe(De.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new U2(o,l,{includeMetadataChanges:!0,_a:!0});return M2(s,d)}(await ch(n),n.asyncQueue,e,t,r)),r.promise}function pD(n,e){const t=new em(e);return n.asyncQueue.enqueueAndForget(async()=>function(i,s){gt(i).Y_.add(s),s.next()}(await ch(n),t)),()=>{t.Za(),n.asyncQueue.enqueueAndForget(async()=>function(i,s){gt(i).Y_.delete(s)}(await ch(n),t))}}function mD(n,e,t,r){const i=function(a,o){let c;return c=typeof a=="string"?aT().encode(a):a,function(l,d){return new sD(l,d)}(function(l,d){if(l instanceof Uint8Array)return ow(l,d);if(l instanceof ArrayBuffer)return ow(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(t,Ed(e));n.asyncQueue.enqueueAndForget(async()=>{rD(await K2(n),i,r)})}function gD(n,e){return n.asyncQueue.enqueue(async()=>function(r,i){const s=gt(r);return s.persistence.runTransaction("Get named query","readonly",a=>s.Gr.getNamedQuery(a,i))}(await G2(n),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ob(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n,e,t){if(!t)throw new Xe(De.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cb(n,e,t,r){if(e===!0&&r===!0)throw new Xe(De.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function lw(n){if(!ft.isDocumentKey(n))throw new Xe(De.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function hw(n){if(ft.isDocumentKey(n))throw new Xe(De.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function nm(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Xe(De.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nm(n);throw new Xe(De.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ub(n,e){if(e<=0)throw new Xe(De.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(De.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Xe(De.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ob((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Xe(De.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Xe(De.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Xe(De.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class bd{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(De.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(De.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fw(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new lR;switch(r.type){case"firstParty":return new pR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Xe(De.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=uw.get(t);r&&(Je("ComponentProvider","Removing Datastore"),uw.delete(t),r.terminate())}(this),Promise.resolve()}}function vD(n,e,t,r={}){var i;const s=(n=cn(n,bd))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let o,c;if(typeof r.mockUserToken=="string")o=r.mockUserToken,c=Mr.MOCK_USER;else{o=S4(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);const u=r.mockUserToken.sub||r.mockUserToken.user_id;if(!u)throw new Xe(De.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Mr(u)}n._authCredentials=new hR(new _E(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Li=class lb{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lb(this.firestore,e,this._query)}},Xn=class hb{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new nc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new hb(this.firestore,e,this._key)}},nc=class fb extends Li{constructor(e,t,r){super(e,t,vh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Xn(this.firestore,null,new ft(e))}withConverter(e){return new fb(this.firestore,e,this._path)}};function db(n,e,...t){if(n=St(n),Y2("collection","path",e),n instanceof bd){const r=Qt.fromString(e,...t);return hw(r),new nc(n,null,r)}{if(!(n instanceof Xn||n instanceof nc))throw new Xe(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return hw(r),new nc(n.firestore,null,r)}}function _D(n,e){if(n=cn(n,bd),Y2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(De.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Li(n,null,function(r){return new lo(Qt.emptyPath(),r)}(e))}function ap(n,e,...t){if(n=St(n),arguments.length===1&&(e=yE.newId()),Y2("doc","path",e),n instanceof bd){const r=Qt.fromString(e,...t);return lw(r),new Xn(n,null,new ft(r))}{if(!(n instanceof Xn||n instanceof nc))throw new Xe(De.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Qt.fromString(e,...t));return lw(r),new Xn(n.firestore,n instanceof nc?n.converter:null,new ft(r))}}function pb(n,e){return n=St(n),e=St(e),(n instanceof Xn||n instanceof nc)&&(e instanceof Xn||e instanceof nc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mb(n,e){return n=St(n),e=St(e),n instanceof Li&&e instanceof Li&&n.firestore===e.firestore&&vd(n._query,e._query)&&n.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new R2(this,"async_queue_retry"),this.Vu=()=>{const r=O0();r&&Je("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const t=O0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=O0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ri;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xc(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(r);throw mr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=O2.createAndSchedule(this,e,t,r,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function f1(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(n,["next","error","complete"])}class yD{constructor(){this._progressObserver={},this._taskCompletionResolver=new ri,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=-1;let vr=class extends bd{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new dw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new dw(e),this._firestoreClient=void 0,await e}}};function vi(n){if(n._terminated)throw new Xe(De.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||gb(n),n._firestoreClient}function gb(n){var e,t,r;const i=n._freezeSettings(),s=function(o,c,u,l){return new WR(o,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,ob(l.experimentalLongPollingOptions),l.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new cD(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(n._componentsProvider))}function xD(n,e){Ta("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings();return vb(n,Gf.provider,{build:r=>new nb(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function ED(n){Ta("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=n._freezeSettings();vb(n,Gf.provider,{build:t=>new iD(t,e.cacheSizeBytes)})}function vb(n,e,t){if((n=cn(n,vr))._firestoreClient||n._terminated)throw new Xe(De.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new Xe(De.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},gb(n)}function TD(n){if(n._initialized&&!n._terminated)throw new Xe(De.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ri;return n._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!_a.D())return Promise.resolve();const i=r+"main";await _a.delete(i)}(N2(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function bD(n){return function(t){const r=new ri;return t.asyncQueue.enqueueAndForget(async()=>$L(await K2(t),r)),r.promise}(vi(n=cn(n,vr)))}function AD(n){return lD(vi(n=cn(n,vr)))}function ID(n){return hD(vi(n=cn(n,vr)))}function SD(n,e){const t=vi(n=cn(n,vr)),r=new yD;return mD(t,n._databaseId,e,r),r}function PD(n,e){return gD(vi(n=cn(n,vr)),e).then(t=>t?new Li(n,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(or.fromBase64String(e))}catch(t){throw new Xe(De.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Aa(or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xe(De.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $n(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ru=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xe(De.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xe(De.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ND=/^__.*__$/;class kD{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new _h(e,this.data,t,this.fieldTransforms)}}class _b{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class im{constructor(e,t,r,i,s,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new im(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return op(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(yb(this.Cu)&&ND.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class CD{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ed(e)}Qu(e,t,r,i=!1){return new im({Cu:e,methodName:t,qu:r,path:$n.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lu(n){const e=n._freezeSettings(),t=Ed(n._databaseId);return new CD(n._databaseId,!!e.ignoreUndefinedProperties,t)}function sm(n,e,t,r,i,s={}){const a=n.Qu(s.merge||s.mergeFields?2:0,e,t,i);rv("Data must be an object, but it was:",a,r);const o=Eb(r,a);let c,u;if(s.merge)c=new $i(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const g=d1(e,d,t);if(!a.contains(g))throw new Xe(De.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bb(l,g)||l.push(g)}c=new $i(l),u=a.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=a.fieldTransforms;return new kD(new Zr(o),c,u)}class Ad extends Ru{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ad}}function wb(n,e,t){return new im({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class J2 extends Ru{_toFieldTransform(e){return new yd(e.path,new eh)}isEqual(e){return e instanceof J2}}class Q2 extends Ru{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=wb(this,e,!0),r=this.Ku.map(s=>Du(s,t)),i=new gu(r);return new yd(e.path,i)}isEqual(e){return e instanceof Q2&&Nf(this.Ku,e.Ku)}}class Z2 extends Ru{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=wb(this,e,!0),r=this.Ku.map(s=>Du(s,t)),i=new vu(r);return new yd(e.path,i)}isEqual(e){return e instanceof Z2&&Nf(this.Ku,e.Ku)}}class ev extends Ru{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new th(e.serializer,JE(e.serializer,this.$u));return new yd(e.path,t)}isEqual(e){return e instanceof ev&&this.$u===e.$u}}function tv(n,e,t,r){const i=n.Qu(1,e,t);rv("Data must be an object, but it was:",i,r);const s=[],a=Zr.empty();Cu(r,(c,u)=>{const l=iv(e,c,t);u=St(u);const d=i.Nu(l);if(u instanceof Ad)s.push(l);else{const g=Du(u,d);g!=null&&(s.push(l),a.set(l,g))}});const o=new $i(s);return new _b(a,o,i.fieldTransforms)}function nv(n,e,t,r,i,s){const a=n.Qu(1,e,t),o=[d1(e,r,t)],c=[i];if(s.length%2!=0)throw new Xe(De.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(d1(e,s[g])),c.push(s[g+1]);const u=[],l=Zr.empty();for(let g=o.length-1;g>=0;--g)if(!bb(u,o[g])){const p=o[g];let x=c[g];x=St(x);const _=a.Nu(p);if(x instanceof Ad)u.push(p);else{const E=Du(x,_);E!=null&&(u.push(p),l.set(p,E))}}const d=new $i(u);return new _b(l,d,a.fieldTransforms)}function xb(n,e,t,r=!1){return Du(t,n.Qu(r?4:3,e))}function Du(n,e){if(Tb(n=St(n)))return rv("Unsupported field value:",e,n),Eb(n,e);if(n instanceof Ru)return function(r,i){if(!yb(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const s=[];let a=0;for(const o of r){let c=Du(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if((r=St(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return JE(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Kn.fromDate(r);return{timestampValue:nh(i.serializer,s)}}if(r instanceof Kn){const s=new Kn(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nh(i.serializer,s)}}if(r instanceof rm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:uT(i.serializer,r._byteString)};if(r instanceof Xn){const s=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:T2(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof X2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return v2(o.serializer,c)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${nm(r)}`)}(n,e)}function Eb(n,e){const t={};return CE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Cu(n,(r,i)=>{const s=Du(i,e.Mu(r));s!=null&&(t[r]=s)}),{mapValue:{fields:t}}}function Tb(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Kn||n instanceof rm||n instanceof Aa||n instanceof Xn||n instanceof Ru||n instanceof X2)}function rv(n,e,t){if(!Tb(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const r=nm(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function d1(n,e,t){if((e=St(e))instanceof hc)return e._internalPath;if(typeof e=="string")return iv(n,e);throw op("Field path arguments must be of type string or ",n,!1,void 0,t)}const RD=new RegExp("[~\\*/\\[\\]]");function iv(n,e,t){if(e.search(RD)>=0)throw op(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new hc(...e.split("."))._internalPath}catch{throw op(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function op(n,e,t,r,i){const s=r&&!r.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${r}`),a&&(c+=` in document ${i}`),c+=")"),new Xe(De.INVALID_ARGUMENT,o+n+c)}function bb(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(am("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class LD extends Kf{data(){return super.data()}}function am(n,e){return typeof e=="string"?iv(n,e):e instanceof hc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new Xe(De.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sv{}class Id extends sv{}function Ho(n,e,...t){let r=[];e instanceof sv&&r.push(e),r=r.concat(t),function(s){const a=s.filter(c=>c instanceof av).length,o=s.filter(c=>c instanceof om).length;if(a>1||a>0&&o>0)throw new Xe(De.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class om extends Id{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new om(e,t,r)}_apply(e){const t=this._parse(e);return Sb(e._query,t),new Li(e.firestore,e.converter,e1(e._query,t))}_parse(e){const t=Lu(e.firestore);return function(s,a,o,c,u,l,d){let g;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Xe(De.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){mw(d,l);const p=[];for(const x of d)p.push(pw(c,s,x));g={arrayValue:{values:p}}}else g=pw(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||mw(d,l),g=xb(o,a,d,l==="in"||l==="not-in");return Zt.create(u,l,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function DD(n,e,t){const r=e,i=am("where",n);return om._create(i,r,t)}class av extends sv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new av(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:yn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)Sb(a,c),a=e1(a,c)}(e._query,t),new Li(e.firestore,e.converter,e1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ov extends Id{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ov(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new Xe(De.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Xe(De.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zf(s,a)}(e._query,this._field,this._direction);return new Li(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new lo(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function FD(n,e="asc"){const t=e,r=am("orderBy",n);return ov._create(r,t)}class cm extends Id{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new cm(e,t,r)}_apply(e){return new Li(e.firestore,e.converter,Q0(e._query,this._limit,this._limitType))}}function OD(n){return ub("limit",n),cm._create("limit",n,"F")}function MD(n){return ub("limitToLast",n),cm._create("limitToLast",n,"L")}class um extends Id{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new um(e,t,r)}_apply(e){const t=Ib(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,function(i,s){return new lo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function BD(...n){return um._create("startAt",n,!0)}function VD(...n){return um._create("startAfter",n,!1)}class lm extends Id{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new lm(e,t,r)}_apply(e){const t=Ib(e,this.type,this._docOrFields,this._inclusive);return new Li(e.firestore,e.converter,function(i,s){return new lo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function UD(...n){return lm._create("endBefore",n,!1)}function jD(...n){return lm._create("endAt",n,!0)}function Ib(n,e,t,r){if(t[0]=St(t[0]),t[0]instanceof Kf)return function(s,a,o,c,u){if(!c)throw new Xe(De.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const d of Ol(s))if(d.field.isKeyField())l.push(pu(a,c.key));else{const g=c.data.field(d.field);if(Hp(g))throw new Xe(De.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const p=d.field.canonicalString();throw new Xe(De.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}l.push(g)}return new uc(l,u)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Lu(n.firestore);return function(a,o,c,u,l,d){const g=a.explicitOrderBy;if(l.length>g.length)throw new Xe(De.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let x=0;x<l.length;x++){const _=l[x];if(g[x].field.isKeyField()){if(typeof _!="string")throw new Xe(De.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!m2(a)&&_.indexOf("/")!==-1)throw new Xe(De.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const E=a.path.child(Qt.fromString(_));if(!ft.isDocumentKey(E))throw new Xe(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const P=new ft(E);p.push(pu(o,P))}else{const E=xb(c,u,_);p.push(E)}}return new uc(p,d)}(n._query,n.firestore._databaseId,i,e,t,r)}}function pw(n,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Xe(De.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!m2(e)&&t.indexOf("/")!==-1)throw new Xe(De.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Qt.fromString(t));if(!ft.isDocumentKey(r))throw new Xe(De.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return pu(n,new ft(r))}if(t instanceof Xn)return pu(n,t._key);throw new Xe(De.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nm(t)}.`)}function mw(n,e){if(!Array.isArray(n)||n.length===0)throw new Xe(De.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Sb(n,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Xe(De.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xe(De.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class cv{convertValue(e,t="none"){switch(du(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Cu(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertVectorValue(e){var t,r,i;const s=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>Hn(a.doubleValue));return new X2(s)}convertGeoPoint(e){return new rm(Hn(e.latitude),Hn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=d2(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Uf(e));default:return null}}convertTimestamp(e){const t=io(e);return new Kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Qt.fromString(e);bt(wT(r));const i=new oc(r.get(1),r.get(3)),s=new ft(r.popFirst(5));return i.isEqual(t)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class qD extends cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let so=class extends Kf{constructor(e,t,r,i,s,a){super(e,t,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new wf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(am("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},wf=class extends so{data(e={}){return super.data(e)}},fc=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tu(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new wf(this._firestore,this._userDataWriter,r.key,r,new tu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xe(De.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new wf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new wf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),l=a.indexOf(o.doc.key)),{type:zD(o.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function zD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}function Pb(n,e){return n instanceof so&&e instanceof so?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fc&&e instanceof fc&&n._firestore===e._firestore&&mb(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(n){n=cn(n,Xn);const e=cn(n.firestore,vr);return sb(vi(e),n._key).then(t=>uv(e,n,t))}class Fu extends cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xn(this.firestore,null,t)}}function HD(n){n=cn(n,Xn);const e=cn(n.firestore,vr),t=vi(e),r=new Fu(e);return fD(t,n._key).then(i=>new so(e,r,n._key,i,new tu(i!==null&&i.hasLocalMutations,!0),n.converter))}function $D(n){n=cn(n,Xn);const e=cn(n.firestore,vr);return sb(vi(e),n._key,{source:"server"}).then(t=>uv(e,n,t))}function GD(n){n=cn(n,Li);const e=cn(n.firestore,vr),t=vi(e),r=new Fu(e);return Ab(n._query),ab(t,n._query).then(i=>new fc(e,r,n,i))}function KD(n){n=cn(n,Li);const e=cn(n.firestore,vr),t=vi(e),r=new Fu(e);return dD(t,n._query).then(i=>new fc(e,r,n,i))}function YD(n){n=cn(n,Li);const e=cn(n.firestore,vr),t=vi(e),r=new Fu(e);return ab(t,n._query,{source:"server"}).then(i=>new fc(e,r,n,i))}function gw(n,e,t){n=cn(n,Xn);const r=cn(n.firestore,vr),i=hm(n.converter,e,t);return Sd(r,[sm(Lu(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Gn.none())])}function vw(n,e,t,...r){n=cn(n,Xn);const i=cn(n.firestore,vr),s=Lu(i);let a;return a=typeof(e=St(e))=="string"||e instanceof hc?nv(s,"updateDoc",n._key,e,t,r):tv(s,"updateDoc",n._key,e),Sd(i,[a.toMutation(n._key,Gn.exists(!0))])}function XD(n){return Sd(cn(n.firestore,vr),[new yh(n._key,Gn.none())])}function JD(n,e){const t=cn(n.firestore,vr),r=ap(n),i=hm(n.converter,e);return Sd(t,[sm(Lu(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Gn.exists(!1))]).then(()=>r)}function Nb(n,...e){var t,r,i;n=St(n);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||f1(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(f1(e[a])){const d=e[a];e[a]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[a+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(n instanceof Xn)u=cn(n.firestore,vr),l=vh(n._key.path),c={next:d=>{e[a]&&e[a](uv(u,n,d))},error:e[a+1],complete:e[a+2]};else{const d=cn(n,Li);u=cn(d.firestore,vr),l=d._query;const g=new Fu(u);c={next:p=>{e[a]&&e[a](new fc(u,g,d,p))},error:e[a+1],complete:e[a+2]},Ab(n._query)}return function(g,p,x,_){const E=new em(_),P=new U2(p,E,x);return g.asyncQueue.enqueueAndForget(async()=>M2(await ch(g),P)),()=>{E.Za(),g.asyncQueue.enqueueAndForget(async()=>B2(await ch(g),P))}}(vi(u),l,o,c)}function QD(n,e){return pD(vi(n=cn(n,vr)),f1(e)?e:{next:e})}function Sd(n,e){return function(r,i){const s=new ri;return r.asyncQueue.enqueueAndForget(async()=>qL(await K2(r),i,s)),s.promise}(vi(n),e)}function uv(n,e,t){const r=t.docs.get(e._key),i=new Fu(n);return new so(n,i,e._key,r,new tu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eF=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lu(e)}set(e,t,r){this._verifyNotCommitted();const i=Xo(e,this._firestore),s=hm(i.converter,t,r),a=sm(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(a.toMutation(i._key,Gn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Xo(e,this._firestore);let a;return a=typeof(t=St(t))=="string"||t instanceof hc?nv(this._dataReader,"WriteBatch.update",s._key,t,r,i):tv(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Gn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xo(e,this._firestore);return this._mutations=this._mutations.concat(new yh(t._key,Gn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(De.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xo(n,e){if((n=St(n)).firestore!==e)throw new Xe(De.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tF=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Lu(t)}get(t){const r=Xo(t,this._firestore),i=new qD(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||s.length!==1)return xt();const a=s[0];if(a.isFoundDocument())return new Kf(this._firestore,i,a.key,a,r.converter);if(a.isNoDocument())return new Kf(this._firestore,i,r._key,null,r.converter);throw xt()})}set(t,r,i){const s=Xo(t,this._firestore),a=hm(s.converter,r,i),o=sm(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(t,r,i,...s){const a=Xo(t,this._firestore);let o;return o=typeof(r=St(r))=="string"||r instanceof hc?nv(this._dataReader,"Transaction.update",a._key,r,i,s):tv(this._dataReader,"Transaction.update",a._key,r),this._transaction.update(a._key,o),this}delete(t){const r=Xo(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xo(e,this._firestore),r=new Fu(this._firestore);return super.get(e).then(i=>new so(this._firestore,r,t._key,i._document,new tu(!1,!1),t.converter))}};function nF(n,e,t){n=cn(n,vr);const r=Object.assign(Object.assign({},ZD),t);return function(s){if(s.maxAttempts<1)throw new Xe(De.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,a,o){const c=new ri;return s.asyncQueue.enqueueAndForget(async()=>{const u=await uD(s);new oD(s.asyncQueue,u,o,a,c).au()}),c.promise}(vi(n),i=>e(new tF(n,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rF(){return new Ad("deleteField")}function iF(){return new J2("serverTimestamp")}function sF(...n){return new Q2("arrayUnion",n)}function aF(...n){return new Z2("arrayRemove",n)}function oF(n){return new ev("increment",n)}(function(e,t=!0){(function(i){gh=i})(_c),Yi(new zr("firestore",(r,{instanceIdentifier:i,options:s})=>{const a=r.getProvider("app").getImmediate(),o=new vr(new fR(r.getProvider("auth-internal")),new gR(r.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xe(De.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(u.options.projectId,l)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ni(ay,"4.7.3",e),ni(ay,"4.7.3","esm2017")})();const cF="@firebase/firestore-compat",uF="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _w(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function yw(){if(!qR())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let kb=class p1{constructor(e){this._delegate=e}static fromBase64String(e){return yw(),new p1(Aa.fromBase64String(e))}static fromUint8Array(e){return _w(),new p1(Aa.fromUint8Array(e))}toBase64(){return yw(),this._delegate.toBase64()}toUint8Array(){return _w(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(n){return lF(n,["next","error","complete"])}function lF(n,e){if(typeof n!="object"||n===null)return!1;const t=n;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{enableIndexedDbPersistence(e,t){return xD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return ED(e._delegate)}clearIndexedDbPersistence(e){return TD(e._delegate)}}class Cb{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof oc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ta("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){vD(this._delegate,e,t,r)}enableNetwork(){return AD(this._delegate)}disableNetwork(){return ID(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,cb("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return bD(this._delegate)}onSnapshotsInSync(e){return QD(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new uh(this,db(this._delegate,e))}catch(t){throw Ii(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ss(this,ap(this._delegate,e))}catch(t){throw Ii(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ai(this,_D(this._delegate,e))}catch(t){throw Ii(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return nF(this._delegate,t=>e(new Rb(this,t)))}batch(){return vi(this._delegate),new Lb(new eF(this._delegate,e=>Sd(this._delegate,e)))}loadBundle(e){return SD(this._delegate,e)}namedQuery(e){return PD(this._delegate,e).then(t=>t?new Ai(this,t):null)}}class fm extends cv{constructor(e){super(),this.firestore=e}convertBytes(e){return new kb(new Aa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ss.forKey(t,this.firestore,null)}}function fF(n){cR(n)}class Rb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new fm(e)}get(e){const t=nu(e);return this._delegate.get(t).then(r=>new Yf(this._firestore,new so(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=nu(e);return r?(lv("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=nu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=nu(e);return this._delegate.delete(t),this}}class Lb{constructor(e){this._delegate=e}set(e,t,r){const i=nu(e);return r?(lv("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=nu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=nu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class xu{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new wf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Xf(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=xu.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new xu(e,new fm(e),t),i.set(t,s)),s}}xu.INSTANCES=new WeakMap;class Ss{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fm(e)}static forPath(e,t,r){if(e.length%2!==0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ss(t,new Xn(t._delegate,r,new ft(e)))}static forKey(e,t,r){return new Ss(t,new Xn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new uh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new uh(this.firestore,db(this._delegate,e))}catch(t){throw Ii(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=St(e),e instanceof Xn?pb(this._delegate,e):!1}set(e,t){t=lv("DocumentReference.set",t);try{return t?gw(this._delegate,e,t):gw(this._delegate,e)}catch(r){throw Ii(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?vw(this._delegate,e):vw(this._delegate,e,t,...r)}catch(i){throw Ii(i,"updateDoc()","DocumentReference.update()")}}delete(){return XD(this._delegate)}onSnapshot(...e){const t=Db(e),r=Fb(e,i=>new Yf(this.firestore,new so(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Nb(this._delegate,t,r)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=HD(this._delegate):(e==null?void 0:e.source)==="server"?t=$D(this._delegate):t=WD(this._delegate),t.then(r=>new Yf(this.firestore,new so(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ss(this.firestore,e?this._delegate.withConverter(xu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ii(n,e,t){return n.message=n.message.replace(e,t),n}function Db(n){for(const e of n)if(typeof e=="object"&&!m1(e))return e;return{}}function Fb(n,e){var t,r;let i;return m1(n[0])?i=n[0]:m1(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class Yf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ss(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Pb(this._delegate,e._delegate)}}class Xf extends Yf{data(e){const t=this._delegate.data(e);return this._delegate._converter||uR(t!==void 0),t}}class Ai{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new fm(e)}where(e,t,r){try{return new Ai(this.firestore,Ho(this._delegate,DD(e,t,r)))}catch(i){throw Ii(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ai(this.firestore,Ho(this._delegate,FD(e,t)))}catch(r){throw Ii(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ai(this.firestore,Ho(this._delegate,OD(e)))}catch(t){throw Ii(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ai(this.firestore,Ho(this._delegate,MD(e)))}catch(t){throw Ii(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ai(this.firestore,Ho(this._delegate,BD(...e)))}catch(t){throw Ii(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ai(this.firestore,Ho(this._delegate,VD(...e)))}catch(t){throw Ii(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ai(this.firestore,Ho(this._delegate,UD(...e)))}catch(t){throw Ii(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ai(this.firestore,Ho(this._delegate,jD(...e)))}catch(t){throw Ii(t,"endAt()","Query.endAt()")}}isEqual(e){return mb(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=KD(this._delegate):(e==null?void 0:e.source)==="server"?t=YD(this._delegate):t=GD(this._delegate),t.then(r=>new g1(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Db(e),r=Fb(e,i=>new g1(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Nb(this._delegate,t,r)}withConverter(e){return new Ai(this.firestore,e?this._delegate.withConverter(xu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class dF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Xf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class g1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ai(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Xf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new dF(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Xf(this._firestore,r))})}isEqual(e){return Pb(this._delegate,e._delegate)}}class uh extends Ai{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ss(this.firestore,e):null}doc(e){try{return e===void 0?new Ss(this.firestore,ap(this._delegate)):new Ss(this.firestore,ap(this._delegate,e))}catch(t){throw Ii(t,"doc()","CollectionReference.doc()")}}add(e){return JD(this._delegate,e).then(t=>new Ss(this.firestore,t))}isEqual(e){return pb(this._delegate,e._delegate)}withConverter(e){return new uh(this.firestore,e?this._delegate.withConverter(xu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function nu(n){return cn(n,Xn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(...e){this._delegate=new hc(...e)}static documentId(){return new hv($n.keyField().canonicalString())}isEqual(e){return e=St(e),e instanceof hc?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._delegate=e}static serverTimestamp(){const e=iF();return e._methodName="FieldValue.serverTimestamp",new Jc(e)}static delete(){const e=rF();return e._methodName="FieldValue.delete",new Jc(e)}static arrayUnion(...e){const t=sF(...e);return t._methodName="FieldValue.arrayUnion",new Jc(t)}static arrayRemove(...e){const t=aF(...e);return t._methodName="FieldValue.arrayRemove",new Jc(t)}static increment(e){const t=oF(e);return t._methodName="FieldValue.increment",new Jc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pF={Firestore:Cb,GeoPoint:rm,Timestamp:Kn,Blob:kb,Transaction:Rb,WriteBatch:Lb,DocumentReference:Ss,DocumentSnapshot:Yf,Query:Ai,QueryDocumentSnapshot:Xf,QuerySnapshot:g1,CollectionReference:uh,FieldPath:hv,FieldValue:Jc,setLogLevel:fF,CACHE_SIZE_UNLIMITED:wD};function mF(n,e){n.INTERNAL.registerComponent(new zr("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},pF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gF(n){mF(n,(e,t)=>new Cb(e,t,new hF)),n.registerVersion(cF,uF)}gF(On);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vF="type.googleapis.com/google.protobuf.Int64Value",_F="type.googleapis.com/google.protobuf.UInt64Value";function Ob(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function v1(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>v1(e));if(typeof n=="function"||typeof n=="object")return Ob(n,e=>v1(e));throw new Error("Data cannot be encoded in JSON: "+n)}function cp(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case vF:case _F:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>cp(e)):typeof n=="function"||typeof n=="object"?Ob(n,e=>cp(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ww={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bl extends kr{constructor(e,t,r){super(`${Mb}/${e}`,t||""),this.details=r}}function yF(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function wF(n,e){let t=yF(n),r=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!ww[a])return new Bl("internal","internal");t=ww[a],r=a}const o=s.message;typeof o=="string"&&(r=o),i=s.details,i!==void 0&&(i=cp(i))}}catch{}return t==="ok"?null:new Bl(t,r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e,t,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||r.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xw="us-central1";function EF(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Bl("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}let TF=class{constructor(e,t,r,i,s=xw,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new xF(t,r,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=xw}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function bF(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function AF(n,e,t){return r=>PF(n,e,r,t||{})}function IF(n,e,t){return r=>Bb(n,e,r,t||{})}async function SF(n,e,t,r){t["Content-Type"]="application/json";let i;try{i=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function PF(n,e,t,r){const i=n._url(e);return Bb(n,i,t,r)}async function Bb(n,e,t,r){t=v1(t);const i={data:t},s={},a=await n.contextProvider.getContext(r.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=r.timeout||7e4,c=EF(o),u=await Promise.race([SF(e,i,s,n.fetchImpl),c.promise,n.cancelAllRequests]);if(c.cancel(),!u)throw new Bl("cancelled","Firebase Functions instance was deleted.");const l=wF(u.status,u.json);if(l)throw l;if(!u.json)throw new Bl("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d>"u"&&(d=u.json.result),typeof d>"u")throw new Bl("internal","Response is missing data field.");return{data:cp(d)}}const Ew="@firebase/functions",Tw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NF="auth-internal",kF="app-check-internal",CF="messaging-internal";function RF(n,e){const t=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(NF),o=r.getProvider(CF),c=r.getProvider(kF);return new TF(s,a,o,c,i,n)};Yi(new zr(Mb,t,"PUBLIC").setMultipleInstances(!0)),ni(Ew,Tw,e),ni(Ew,Tw,"esm2017")}function bw(n,e,t){bF(St(n),e,t)}function LF(n,e,t){return AF(St(n),e,t)}function DF(n,e,t){return IF(St(n),e,t)}RF(fetch.bind(self));const FF="@firebase/functions-compat",OF="0.3.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return LF(this._delegate,e,t)}httpsCallableFromURL(e,t){return DF(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new kr("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new kr("functions","Port missing in origin provided to useFunctionsEmulator()");return bw(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return bw(this._delegate,e,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF="us-central1",BF=(n,{instanceIdentifier:e})=>{const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("functions").getImmediate({identifier:e??MF});return new Vb(t,r)};function VF(){const n={Functions:Vb};On.INTERNAL.registerComponent(new zr("functions-compat",BF,"PUBLIC").setServiceProps(n).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */VF();On.registerVersion(FF,OF);const Ub="@firebase/installations",fv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jb=1e4,qb=`w:${fv}`,zb="FIS_v2",UF="https://firebaseinstallations.googleapis.com/v1",jF=60*60*1e3,qF="installations",zF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Eu=new Sa(qF,zF,WF);function Wb(n){return n instanceof kr&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb({projectId:n}){return`${UF}/projects/${n}/installations`}function $b(n){return{token:n.token,requestStatus:2,expiresIn:$F(n.expiresIn),creationTime:Date.now()}}async function Gb(n,e){const r=(await e.json()).error;return Eu.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function Kb({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function HF(n,{refreshToken:e}){const t=Kb(n);return t.append("Authorization",GF(e)),t}async function Yb(n){const e=await n();return e.status>=500&&e.status<600?n():e}function $F(n){return Number(n.replace("s","000"))}function GF(n){return`${zb} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KF({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=Hb(n),i=Kb(n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={fid:t,authVersion:zb,appId:n.appId,sdkVersion:qb},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await Yb(()=>fetch(r,o));if(c.ok){const u=await c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:$b(u.authToken)}}else throw await Gb("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YF(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XF=/^[cdef][\w-]{21}$/,_1="";function JF(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=QF(n);return XF.test(t)?t:_1}catch{return _1}}function QF(n){return YF(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb=new Map;function Qb(n,e){const t=dm(n);Zb(t,e),ZF(t,e)}function Zb(n,e){const t=Jb.get(n);if(t)for(const r of t)r(e)}function ZF(n,e){const t=eO();t&&t.postMessage({key:n,fid:e}),tO()}let ru=null;function eO(){return!ru&&"BroadcastChannel"in self&&(ru=new BroadcastChannel("[Firebase] FID Change"),ru.onmessage=n=>{Zb(n.data.key,n.data.fid)}),ru}function tO(){Jb.size===0&&ru&&(ru.close(),ru=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nO="firebase-installations-database",rO=1,Tu="firebase-installations-store";let ug=null;function dv(){return ug||(ug=fh(nO,rO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Tu)}}})),ug}async function up(n,e){const t=dm(n),i=(await dv()).transaction(Tu,"readwrite"),s=i.objectStore(Tu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&Qb(n,e.fid),e}async function eA(n){const e=dm(n),r=(await dv()).transaction(Tu,"readwrite");await r.objectStore(Tu).delete(e),await r.done}async function pm(n,e){const t=dm(n),i=(await dv()).transaction(Tu,"readwrite"),s=i.objectStore(Tu),a=await s.get(t),o=e(a);return o===void 0?await s.delete(t):await s.put(o,t),await i.done,o&&(!a||a.fid!==o.fid)&&Qb(n,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(n){let e;const t=await pm(n.appConfig,r=>{const i=iO(r),s=sO(n,i);return e=s.registrationPromise,s.installationEntry});return t.fid===_1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function iO(n){const e=n||{fid:JF(),registrationStatus:0};return tA(e)}function sO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Eu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=aO(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:oO(n)}:{installationEntry:e}}async function aO(n,e){try{const t=await KF(n,e);return up(n.appConfig,t)}catch(t){throw Wb(t)&&t.customData.serverCode===409?await eA(n.appConfig):await up(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function oO(n){let e=await Aw(n.appConfig);for(;e.registrationStatus===1;)await Xb(100),e=await Aw(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await pv(n);return r||t}return e}function Aw(n){return pm(n,e=>{if(!e)throw Eu.create("installation-not-found");return tA(e)})}function tA(n){return cO(n)?{fid:n.fid,registrationStatus:0}:n}function cO(n){return n.registrationStatus===1&&n.registrationTime+jb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO({appConfig:n,heartbeatServiceProvider:e},t){const r=lO(n,t),i=HF(n,t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={installation:{sdkVersion:qb,appId:n.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await Yb(()=>fetch(r,o));if(c.ok){const u=await c.json();return $b(u)}else throw await Gb("Generate Auth Token",c)}function lO(n,{fid:e}){return`${Hb(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mv(n,e=!1){let t;const r=await pm(n.appConfig,s=>{if(!nA(s))throw Eu.create("not-registered");const a=s.authToken;if(!e&&dO(a))return s;if(a.requestStatus===1)return t=hO(n,e),s;{if(!navigator.onLine)throw Eu.create("app-offline");const o=mO(s);return t=fO(n,o),o}});return t?await t:r.authToken}async function hO(n,e){let t=await Iw(n.appConfig);for(;t.authToken.requestStatus===1;)await Xb(100),t=await Iw(n.appConfig);const r=t.authToken;return r.requestStatus===0?mv(n,e):r}function Iw(n){return pm(n,e=>{if(!nA(e))throw Eu.create("not-registered");const t=e.authToken;return gO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function fO(n,e){try{const t=await uO(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await up(n.appConfig,r),t}catch(t){if(Wb(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await eA(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await up(n.appConfig,r)}throw t}}function nA(n){return n!==void 0&&n.registrationStatus===2}function dO(n){return n.requestStatus===2&&!pO(n)}function pO(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+jF}function mO(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function gO(n){return n.requestStatus===1&&n.requestTime+jb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(n){const e=n,{installationEntry:t,registrationPromise:r}=await pv(e);return r?r.catch(console.error):mv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(n,e=!1){const t=n;return await yO(t),(await mv(t,e)).token}async function yO(n){const{registrationPromise:e}=await pv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(n){if(!n||!n.options)throw lg("App Configuration");if(!n.name)throw lg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw lg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function lg(n){return Eu.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="installations",xO="installations-internal",EO=n=>{const e=n.getProvider("app").getImmediate(),t=wO(e),r=Rp(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},TO=n=>{const e=n.getProvider("app").getImmediate(),t=Rp(e,rA).getImmediate();return{getId:()=>vO(t),getToken:i=>_O(t,i)}};function bO(){Yi(new zr(rA,EO,"PUBLIC")),Yi(new zr(xO,TO,"PRIVATE"))}bO();ni(Ub,fv);ni(Ub,fv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO="/firebase-messaging-sw.js",IO="/firebase-cloud-messaging-push-scope",iA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",SO="https://fcmregistrations.googleapis.com/v1",sA="google.c.a.c_id",PO="google.c.a.c_l",NO="google.c.a.ts",kO="google.c.a.e";var Sw;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Sw||(Sw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Jf;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(Jf||(Jf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function CO(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="fcm_token_details_db",RO=5,Pw="fcm_token_object_Store";async function LO(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(hg))return null;let e=null;return(await fh(hg,RO,{upgrade:async(r,i,s,a)=>{var o;if(i<2||!r.objectStoreNames.contains(Pw))return;const c=a.objectStore(Pw),u=await c.index("fcmSenderId").get(n);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Wa(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}}}})).close(),await Cl(hg),await Cl("fcm_vapid_details_db"),await Cl("undefined"),DO(e)?e:null}function DO(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO="firebase-messaging-database",OO=1,bu="firebase-messaging-store";let fg=null;function gv(){return fg||(fg=fh(FO,OO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(bu)}}})),fg}async function aA(n){const e=_v(n),r=await(await gv()).transaction(bu).objectStore(bu).get(e);if(r)return r;{const i=await LO(n.appConfig.senderId);if(i)return await vv(n,i),i}}async function vv(n,e){const t=_v(n),i=(await gv()).transaction(bu,"readwrite");return await i.objectStore(bu).put(e,t),await i.done,e}async function MO(n){const e=_v(n),r=(await gv()).transaction(bu,"readwrite");await r.objectStore(bu).delete(e),await r.done}function _v({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ci=new Sa("messaging","Messaging",BO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(n,e){const t=await wv(n),r=cA(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(yv(n.appConfig),i)).json()}catch(a){throw Ci.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw Ci.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw Ci.create("token-subscribe-no-token");return s.token}async function UO(n,e){const t=await wv(n),r=cA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${yv(n.appConfig)}/${e.token}`,i)).json()}catch(a){throw Ci.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw Ci.create("token-update-failed",{errorInfo:a})}if(!s.token)throw Ci.create("token-update-no-token");return s.token}async function oA(n,e){const r={method:"DELETE",headers:await wv(n)};try{const s=await(await fetch(`${yv(n.appConfig)}/${e}`,r)).json();if(s.error){const a=s.error.message;throw Ci.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw Ci.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function yv({projectId:n}){return`${SO}/projects/${n}/registrations`}async function wv({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function cA({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==iA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO=7*24*60*60*1e3;async function qO(n){const e=await HO(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Wa(e.getKey("auth")),p256dh:Wa(e.getKey("p256dh"))},r=await aA(n.firebaseDependencies);if(r){if($O(r.subscriptionOptions,t))return Date.now()>=r.createTime+jO?WO(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await oA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Nw(n.firebaseDependencies,t)}else return Nw(n.firebaseDependencies,t)}async function zO(n){const e=await aA(n.firebaseDependencies);e&&(await oA(n.firebaseDependencies,e.token),await MO(n.firebaseDependencies));const t=await n.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function WO(n,e){try{const t=await UO(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await vv(n.firebaseDependencies,r),t}catch(t){throw t}}async function Nw(n,e){const r={token:await VO(n,e),createTime:Date.now(),subscriptionOptions:e};return await vv(n,r),r.token}async function HO(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:CO(e)})}function $O(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return GO(e,n),KO(e,n),YO(e,n),e}function GO(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}function KO(n,e){e.data&&(n.data=e.data)}function YO(n,e){var t,r,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const o=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(n.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(n){return typeof n=="object"&&!!n&&sA in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JO(n){if(!n||!n.options)throw dg("App Configuration Object");if(!n.name)throw dg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw dg(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function dg(n){return Ci.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let QO=class{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=JO(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uA(n){try{n.swRegistration=await navigator.serviceWorker.register(AO,{scope:IO}),n.swRegistration.update().catch(()=>{})}catch(e){throw Ci.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(n,e){if(!e&&!n.swRegistration&&await uA(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ci.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e8(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=iA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lA(n,e){if(!navigator)throw Ci.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ci.create("permission-blocked");return await e8(n,e==null?void 0:e.vapidKey),await ZO(n,e==null?void 0:e.serviceWorkerRegistration),qO(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function t8(n,e,t){const r=n8(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[sA],message_name:t[PO],message_time:t[NO],message_device_time:Math.floor(Date.now()/1e3)})}function n8(n){switch(n){case Jf.NOTIFICATION_CLICKED:return"notification_open";case Jf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r8(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Jf.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(kw(t)):n.onMessageHandler.next(kw(t)));const r=t.data;XO(r)&&r[kO]==="1"&&await t8(n,t.messageType,r)}const Cw="@firebase/messaging",Rw="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i8=n=>{const e=new QO(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>r8(e,t)),e},s8=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>lA(e,r)}};function a8(){Yi(new zr("messaging",i8,"PUBLIC")),Yi(new zr("messaging-internal",s8,"PRIVATE")),ni(Cw,Rw),ni(Cw,Rw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8(n){if(!navigator)throw Ci.create("only-available-in-window");return n.swRegistration||await uA(n),zO(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c8(n,e){if(!navigator)throw Ci.create("only-available-in-window");return n.onMessageHandler=e,()=>{n.onMessageHandler=null}}async function u8(n,e){return n=St(n),lA(n,e)}function l8(n){return n=St(n),o8(n)}function h8(n,e){return n=St(n),c8(n,e)}a8();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",f8="https://fcmregistrations.googleapis.com/v1",fA="FCM_MSG",d8="google.c.a.c_id",p8=3,m8=1;var lp;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(lp||(lp={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var hp;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(hp||(hp={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function g8(n){const e="=".repeat((4-n.length%4)%4),t=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pg="fcm_token_details_db",v8=5,Lw="fcm_token_object_Store";async function _8(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(pg))return null;let e=null;return(await fh(pg,v8,{upgrade:async(r,i,s,a)=>{var o;if(i<2||!r.objectStoreNames.contains(Lw))return;const c=a.objectStore(Lw),u=await c.index("fcmSenderId").get(n);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Ha(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Ha(l.auth),p256dh:Ha(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Ha(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Ha(l.auth),p256dh:Ha(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Ha(l.vapidKey)}}}}}})).close(),await Cl(pg),await Cl("fcm_vapid_details_db"),await Cl("undefined"),y8(e)?e:null}function y8(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w8="firebase-messaging-database",x8=1,Au="firebase-messaging-store";let mg=null;function xv(){return mg||(mg=fh(w8,x8,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Au)}}})),mg}async function Ev(n){const e=bv(n),r=await(await xv()).transaction(Au).objectStore(Au).get(e);if(r)return r;{const i=await _8(n.appConfig.senderId);if(i)return await Tv(n,i),i}}async function Tv(n,e){const t=bv(n),i=(await xv()).transaction(Au,"readwrite");return await i.objectStore(Au).put(e,t),await i.done,e}async function E8(n){const e=bv(n),r=(await xv()).transaction(Au,"readwrite");await r.objectStore(Au).delete(e),await r.done}function bv({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},wa=new Sa("messaging","Messaging",T8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b8(n,e){const t=await Iv(n),r=pA(e),i={method:"POST",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(Av(n.appConfig),i)).json()}catch(a){throw wa.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw wa.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw wa.create("token-subscribe-no-token");return s.token}async function A8(n,e){const t=await Iv(n),r=pA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(r)};let s;try{s=await(await fetch(`${Av(n.appConfig)}/${e.token}`,i)).json()}catch(a){throw wa.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw wa.create("token-update-failed",{errorInfo:a})}if(!s.token)throw wa.create("token-update-no-token");return s.token}async function dA(n,e){const r={method:"DELETE",headers:await Iv(n)};try{const s=await(await fetch(`${Av(n.appConfig)}/${e}`,r)).json();if(s.error){const a=s.error.message;throw wa.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw wa.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function Av({projectId:n}){return`${f8}/projects/${n}/registrations`}async function Iv({appConfig:n,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function pA({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==hA&&(i.web.applicationPubKey=r),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=7*24*60*60*1e3;async function S8(n){const e=await N8(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:Ha(e.getKey("auth")),p256dh:Ha(e.getKey("p256dh"))},r=await Ev(n.firebaseDependencies);if(r){if(k8(r.subscriptionOptions,t))return Date.now()>=r.createTime+I8?P8(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{await dA(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Fw(n.firebaseDependencies,t)}else return Fw(n.firebaseDependencies,t)}async function Dw(n){const e=await Ev(n.firebaseDependencies);e&&(await dA(n.firebaseDependencies,e.token),await E8(n.firebaseDependencies));const t=await n.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function P8(n,e){try{const t=await A8(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await Tv(n.firebaseDependencies,r),t}catch(t){throw t}}async function Fw(n,e){const r={token:await b8(n,e),createTime:Date.now(),subscriptionOptions:e};return await Tv(n,r),r.token}async function N8(n,e){const t=await n.pushManager.getSubscription();return t||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:g8(e)})}function k8(n,e){const t=e.vapidKey===n.vapidKey,r=e.endpoint===n.endpoint,i=e.auth===n.auth,s=e.p256dh===n.p256dh;return t&&r&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return R8(e,n),L8(e,n),D8(e,n),e}function R8(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}function L8(n,e){e.data&&(n.data=e.data)}function D8(n,e){var t,r,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;n.fcmOptions={};const o=(i=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(n.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(n.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F8(n){return typeof n=="object"&&!!n&&d8 in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O8(n){return new Promise(e=>{setTimeout(e,n)})}async function M8(n,e){const t=B8(e,await n.firebaseDependencies.installations.getId());V8(n,t,e.productId)}function B8(n,e){var t,r;const i={};return n.from&&(i.project_number=n.from),n.fcmMessageId&&(i.message_id=n.fcmMessageId),i.instance_id=e,n.notification?i.message_type=lp.DISPLAY_NOTIFICATION.toString():i.message_type=lp.DATA_MESSAGE.toString(),i.sdk_platform=p8.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),n.collapse_key&&(i.collapse_key=n.collapse_key),i.event=m8.toString(),!((t=n.fcmOptions)===null||t===void 0)&&t.analytics_label&&(i.analytics_label=(r=n.fcmOptions)===null||r===void 0?void 0:r.analytics_label),i}function V8(n,e,t){const r={};r.event_time_ms=Math.floor(Date.now()).toString(),r.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),t&&(r.compliance_data=U8(t)),n.logEvents.push(r)}function U8(n){return{privacy_context:{prequest:{origin_associated_product_id:n}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j8(n,e){var t,r;const{newSubscription:i}=n;if(!i){await Dw(e);return}const s=await Ev(e.firebaseDependencies);await Dw(e),e.vapidKey=(r=(t=s==null?void 0:s.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&r!==void 0?r:hA,await S8(e)}async function q8(n,e){const t=H8(n);if(!t)return;e.deliveryMetricsExportedToBigQueryEnabled&&await M8(e,t);const r=await mA();if(G8(r))return K8(r,t);if(t.notification&&await Y8(W8(t)),!!e&&e.onBackgroundMessageHandler){const i=C8(t);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function z8(n){var e,t;const r=(t=(e=n.notification)===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t[fA];if(r){if(n.action)return}else return;n.stopImmediatePropagation(),n.notification.close();const i=X8(r);if(!i)return;const s=new URL(i,self.location.href),a=new URL(self.location.origin);if(s.host!==a.host)return;let o=await $8(s);if(o?o=await o.focus():(o=await self.clients.openWindow(i),await O8(3e3)),!!o)return r.messageType=hp.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,o.postMessage(r)}function W8(n){const e=Object.assign({},n.notification);return e.data={[fA]:n},e}function H8({data:n}){if(!n)return null;try{return n.json()}catch{return null}}async function $8(n){const e=await mA();for(const t of e){const r=new URL(t.url,self.location.href);if(n.host===r.host)return t}return null}function G8(n){return n.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function K8(n,e){e.isFirebaseMessaging=!0,e.messageType=hp.PUSH_RECEIVED;for(const t of n)t.postMessage(e)}function mA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Y8(n){var e;const{actions:t}=n,{maxActions:r}=Notification;return t&&r&&t.length>r&&console.warn(`This browser only supports ${r} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=n.title)!==null&&e!==void 0?e:"",n)}function X8(n){var e,t,r;const i=(t=(e=n.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&t!==void 0?t:(r=n.notification)===null||r===void 0?void 0:r.click_action;return i||(F8(n.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J8(n){if(!n||!n.options)throw gg("App Configuration Object");if(!n.name)throw gg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw gg(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function gg(n){return wa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q8{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=J8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z8=n=>{const e=new Q8(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return self.addEventListener("push",t=>{t.waitUntil(q8(t,e))}),self.addEventListener("pushsubscriptionchange",t=>{t.waitUntil(j8(t,e))}),self.addEventListener("notificationclick",t=>{t.waitUntil(z8(t))}),e};function e7(){Yi(new zr("messaging-sw",Z8,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t7(n,e){if(self.document!==void 0)throw wa.create("only-available-in-sw");return n.onBackgroundMessageHandler=e,()=>{n.onBackgroundMessageHandler=null}}function n7(n,e){return n=St(n),t7(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */e7();const r7="@firebase/messaging-compat",i7="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s7(){return self&&"ServiceWorkerGlobalScope"in self?o7():a7()}function a7(){return typeof window<"u"&&uu()&&R4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function o7(){return uu()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class Ow{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return u8(this._delegate,e)}async deleteToken(){return l8(this._delegate)}onMessage(e){return h8(this._delegate,e)}onBackgroundMessage(e){return n7(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c7=n=>self&&"ServiceWorkerGlobalScope"in self?new Ow(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging-sw").getImmediate()):new Ow(n.getProvider("app-compat").getImmediate(),n.getProvider("messaging").getImmediate()),u7={isSupported:s7};function l7(){On.INTERNAL.registerComponent(new zr("messaging-compat",c7,"PUBLIC").setServiceProps(u7))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */l7();On.registerVersion(r7,i7);const h7={apiKey:"AIzaSyDJcK71mE0pjol-2loS9q9XhXFwxnJMu6U",authDomain:"appazeit.firebaseapp.com",projectId:"appazeit",storageBucket:"appazeit.firebasestorage.app",messagingSenderId:"977328058000",appId:"1:977328058000:web:360b79579689552423b215"};On.apps.length||On.initializeApp(h7);const bh=On.auth(),Fn=On.firestore();On.functions();typeof window<"u"&&"Notification"in window&&On.messaging.isSupported()&&On.messaging();const Ce={currentUser:null,entries:[],projects:{},tasks:[],timerInterval:null,timerStart:null,timerSeconds:0,isRunning:!1,isHomeoffice:!0,entriesPageSize:50,entriesCurrentPage:1,sortOrderDescending:!0,dashboardPeriod:"week",unsubscribeEntries:null,unsubscribeProjects:null,unsubscribeTasks:null,tasksDashboardShown:!1};function f7(){window.addManualEntry=d7,window.editEntry=p7,window.saveEdit=m7,window.deleteEntry=g7,window.closeEditModal=vA,window.changeEntriesPage=v7,window.changeEntriesPageSize=_7,window.filterChanged=!0,window.filterEntries=Pd,window.toggleSortOrder=y7,window.fixVacationEntries=w7}const fp=7.8;function ks(n){if(!n)return!1;const e=n.toLowerCase();return e==="urlaub"||e==="feiertag"}function d7(){const n=document.getElementById("manualDate").value,e=document.getElementById("currentProject").value,t=ks(e);if(!n){alert("Bitte Datum eingeben!");return}if(!t){const a=document.getElementById("manualStart").value,o=document.getElementById("manualEnd").value;if(!a||!o){alert("Bitte Start und Ende eingeben!");return}if(gA(n,a,o))return}const r=Ce.entries.filter(a=>a.datum===n);if(t){if(r.length>0){alert("Urlaub kann nur fr einen leeren Tag eingetragen werden! Bitte lsche zuerst die anderen Eintrge.");return}}else if(r.some(o=>ks(o.projekt))){alert("An diesem Tag ist bereits Urlaub eingetragen. Keine weiteren Eintrge mglich.");return}const i=document.getElementById("currentActivity").value,s={datum:n,start:t?"00:00":document.getElementById("manualStart").value,ende:t?"00:00":document.getElementById("manualEnd").value,projekt:e,taetigkeit:t?i||"Urlaub":i,homeoffice:t?null:document.getElementById("manualLocation").value==="true",stunden:t?fp:_A(document.getElementById("manualStart").value,document.getElementById("manualEnd").value),pause:0,createdAt:On.firestore.FieldValue.serverTimestamp()};kA(s),Dn(" Eintrag hinzugefgt!"),document.getElementById("manualStart").value="",document.getElementById("manualEnd").value=""}function gA(n,e,t,r=null){if(!Ce.entries)return!1;const[i,s]=e.split(":").map(Number),[a,o]=t.split(":").map(Number),c=i*60+s,u=a*60+o,l=Ce.entries.find(d=>{if(d.id===r||d.datum!==n||ks(d.projekt))return!1;const[g,p]=(d.start||"00:00").split(":").map(Number),[x,_]=(d.ende||"00:00").split(":").map(Number),E=g*60+p,P=x*60+_;return c<P&&u>E});return l?!confirm(` Achtung: Dieser Eintrag berschneidet sich mit:
"${l.projekt}" (${l.start} - ${l.ende})

Trotzdem speichern?`):!1}function Pd(){const n=document.getElementById("filterDate").value,e=document.getElementById("filterProject").value;window.filterChanged&&(Ce.entriesCurrentPage=1,window.filterChanged=!1);let t=[...Ce.entries];n&&(t=t.filter(o=>o.datum===n)),e&&(t=t.filter(o=>o.projekt===e)),t.sort((o,c)=>Ce.sortOrderDescending?o.datum!==c.datum?c.datum.localeCompare(o.datum):(c.start||"").localeCompare(o.start||""):o.datum!==c.datum?o.datum.localeCompare(c.datum):(o.start||"").localeCompare(c.start||""));const r=document.getElementById("entriesList");if(!r)return;const i=Ce.entriesPageSize,s=Ce.entriesCurrentPage,a=t.slice((s-1)*i,s*i);t.length===0?r.innerHTML='<div class="p-8 text-br-300 text-center">Keine Eintrge gefunden</div>':r.innerHTML=a.map(o=>{var d;const c=ks(o.projekt),u=c?"Ganztgig":`${o.start} - ${o.ende}`;let l="";return c||o.homeoffice===null?l="":o.homeoffice&&(l=""),`
             <div class="bg-br-800 rounded-lg p-3 border border-br-600 flex items-center gap-3">
                <div class="w-1 h-12 rounded" style="background: ${o.projekt==="Pause"?"#60A5FA":((d=Ce.projects[o.projekt])==null?void 0:d.color)||"#6B7280"}"></div>
                <div class="flex-1">
                    <div class="text-sm font-medium">${Iu(o.datum)}</div>
                    <div class="text-xs text-br-200">${u}  ${o.projekt||"Allgemein"}</div>
                    ${o.taetigkeit?`<div class="text-xs text-br-300">${o.taetigkeit}</div>`:""}
                </div>
                <div class="text-right">
                    <div class="font-mono">${(o.stunden||0).toFixed(2)}h</div>
                    <div class="text-xs">${l}</div>
                </div>
                <button onclick="editEntry('${o.id}')" class="p-2 hover:bg-br-600 rounded"></button>
                <button onclick="deleteEntry('${o.id}')" class="p-2 hover:bg-red-900 rounded"></button>
            </div>
        `}).join(""),document.getElementById("entriesStats").textContent=`${t.length} Eintrge`}function p7(n){const e=Ce.entries.find(i=>i.id===n);if(!e)return;Ce.editingEntryId=n,document.getElementById("editDate").value=e.datum,document.getElementById("editStart").value=e.start,document.getElementById("editEnd").value=e.ende,document.getElementById("editProject").value=e.projekt||"",document.getElementById("editActivity").value=e.taetigkeit||"",document.getElementById("editLocation").value=e.homeoffice?"true":"false";const t=new Event("change");document.getElementById("editProject").dispatchEvent(t);const r=document.getElementById("editModal");r.classList.remove("hidden"),r.classList.add("flex")}function m7(){if(!Ce.editingEntryId)return;const n=document.getElementById("editProject").value,e=n==="Pause",t=ks(n),r=document.getElementById("editDate").value,i=Ce.entries.filter(o=>o.datum===r&&o.id!==Ce.editingEntryId);if(t){if(i.length>0){alert("Urlaub kann nur fr einen leeren Tag eingetragen werden! Bitte lsche zuerst die anderen Eintrge.");return}}else if(i.some(c=>ks(c.projekt))){alert("An diesem Tag ist bereits Urlaub eingetragen. Keine weiteren Eintrge mglich.");return}let s=0;if(e){const[o,c]=document.getElementById("editStart").value.split(":").map(Number),[u,l]=document.getElementById("editEnd").value.split(":").map(Number),d=o*60+c,g=u*60+l;s=Math.max(0,g-d)}let a;if(t)a={datum:r,start:"00:00",ende:"00:00",projekt:n,taetigkeit:document.getElementById("editActivity").value||"Urlaub",stunden:fp,pause:0,homeoffice:null};else{const o=document.getElementById("editStart").value,c=document.getElementById("editEnd").value;if(!o||!c){alert("Bitte Start und Ende eingeben!");return}if(a={datum:r,start:o,ende:c,projekt:n,taetigkeit:document.getElementById("editActivity").value,stunden:_A(o,c),pause:s,homeoffice:document.getElementById("editLocation").value==="true"},gA(a.datum,a.start,a.ende,Ce.editingEntryId))return}Z7(Ce.editingEntryId,a),vA(),Dn(" Gespeichert")}function vA(){const n=document.getElementById("editModal");n.classList.add("hidden"),n.classList.remove("flex"),Ce.editingEntryId=null}function g7(n){confirm("Lschen?")&&eM(n)}function v7(n){Ce.entriesCurrentPage=n,Pd()}function _7(n){Ce.entriesPageSize=parseInt(n),Ce.entriesCurrentPage=1,Pd()}function y7(){Ce.sortOrderDescending=!Ce.sortOrderDescending,Pd()}function _A(n,e){if(!n||!e)return 0;const[t,r]=n.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+r,o=i*60+s;return Math.round((o-a)/60*100)/100}async function w7(){const n=Ce.entries.filter(e=>ks(e.projekt));if(n.length===0){alert("Keine Urlaubseintrge gefunden.");return}if(confirm(`${n.length} Urlaubs - & Feiertagseintrge gefunden.

Sollen diese auf den neuen Standard(7.8h, Ganztgig, Nicht anwesend) aktualisiert werden ? `))try{const e=On.firestore().batch();let t=0;n.forEach(r=>{if(r.start!=="00:00"||r.ende!=="00:00"||r.stunden!==fp||r.homeoffice!==null){const i=On.firestore().collection("users").doc(Ce.currentUser.uid).collection("entries").doc(r.id);e.update(i,{start:"00:00",ende:"00:00",stunden:fp,homeoffice:null}),t++}}),t>0?(await e.commit(),Dn(` ${t} Eintrge aktualisiert.`),window.filterEntries&&window.filterEntries(),window.updateTodayView&&window.updateTodayView(),window.updateDashboard&&window.updateDashboard()):Dn("Alle Eintrge sind bereits aktuell.")}catch(e){console.error("Fix Check failed",e),alert("Fehler bei der Aktualisierung: "+e.message)}}function x7(){window.addProject=T7,window.editProject=b7,window.deleteProject=I7,window.renderProjects=yA,window.closeEditProjectModal=wA,window.saveProjectEdit=A7}function E7(){const n=Ce.projects,e=document.getElementById("currentProject"),t=document.getElementById("filterProject"),r=document.getElementById("dashProjectFilter"),i=document.getElementById("editProject");if(!e)return;const s=[...Object.keys(n),"Pause"];s.sort();const a=s.map(o=>`<option value="${o}">${o}</option>`).join("");if(e.innerHTML='<option value="">-- Kein Projekt --</option>'+a,t.innerHTML='<option value="">Alle Projekte</option>'+a,r){const o=r.value;r.innerHTML='<option value="">Alle Projekte</option>'+a,r.value=o}i&&(i.innerHTML='<option value="">-- Kein Projekt --</option>'+a)}function yA(){const n=document.getElementById("projectsList");if(!n)return;const e=Object.keys(Ce.projects).sort();n.innerHTML=e.map(t=>`
        <div class="bg-br-800 rounded-lg p-4 border border-br-600 flex items-center gap-3">
            <div class="w-4 h-4 rounded" style="background: ${Ce.projects[t].color}"></div>
            <div class="flex-1">
                <div class="font-medium">${t}</div>
            </div>
            <button onclick="editProject('${t}')" class="p-2 hover:bg-br-600 rounded"></button>
            <button onclick="deleteProject('${t}')" class="p-2 hover:bg-red-900 rounded"></button>
        </div>
    `).join("")}async function T7(){const n=document.getElementById("newProjectName").value.trim(),e=document.getElementById("newProjectColor").value;n&&(await Fn.collection("users").doc(Ce.currentUser.uid).collection("projects").doc(n).set({name:n,color:e,createdAt:On.firestore.FieldValue.serverTimestamp()}),document.getElementById("newProjectName").value="",Dn(" Projekt erstellt"))}function b7(n){const e=Ce.projects[n];if(!e)return;Ce.editingProjectName=n,document.getElementById("editProjectNameInput").value=n,document.getElementById("editProjectColorInput").value=e.color;const t=document.getElementById("editProjectModal");t.classList.remove("hidden"),t.classList.add("flex")}function wA(){const n=document.getElementById("editProjectModal");n.classList.add("hidden"),n.classList.remove("flex"),Ce.editingProjectName=null}async function A7(){const n=Ce.editingProjectName;if(!n)return;const e=document.getElementById("editProjectNameInput").value.trim(),t=document.getElementById("editProjectColorInput").value;if(!e){alert("Projektname darf nicht leer sein!");return}if(e.includes("/")||e.includes("\\")){alert(`Projektname darf keine Schrgstriche ('/' oder '\\') enthalten.
Bitte verwenden Sie Bindestriche oder Unterstriche.`);return}try{if(!Fn||!On)throw new Error("Database connection invalid");const r=Fn.batch(),i=Fn.collection("users").doc(Ce.currentUser.uid);if(e!==n){if(Ce.projects[e]&&!confirm(`Ein Projekt mit dem Namen "${e}" existiert bereits. Mchtest du die Projekte zusammenfhren?`))return;const s=i.collection("projects").doc(e);r.set(s,{name:e,color:t,createdAt:On.firestore.FieldValue.serverTimestamp()});let a=!1;try{if(n.includes("/")||n.includes("\\"))console.warn("Old project name has invalid characters, skipping delete to avoid crash:",n);else{const c=i.collection("projects").doc(n);r.delete(c),a=!0}}catch(c){console.warn("Could not create ref for old project:",c)}const o=await i.collection("entries").where("projekt","==",n).get();o.forEach(c=>{r.update(c.ref,{projekt:e})}),console.log(`Migrating ${o.size} entries.`),await r.commit(),!a&&(n.includes("/")||n.includes("\\"))?alert(` Projekt wurde kopiert und Eintrge verschoben.

Das alte Projekt konnte aufgrund des Sonderzeichens ('/') nicht automatisch gelscht werden. Es ist jetzt leer und kann ignoriert werden.`):Dn(" Projekt umbenannt & Eintrge migriert")}else{if(n.includes("/")||n.includes("\\")){alert(" Dieses Projekt hat einen ungltigen Namen ('/'). Bitte benennen Sie es erst um (ohne Sonderzeichen), bevor Sie die Farbe ndern.");return}const s=i.collection("projects").doc(n);r.update(s,{color:t}),await r.commit(),Dn(" Farbe aktualisiert")}wA()}catch(r){console.error("Error saving project:",r),alert("Fehler beim Speichern: "+r.message)}}async function I7(n){confirm(`Projekt "${n}" wirklich lschen?`)&&(await Fn.collection("users").doc(Ce.currentUser.uid).collection("projects").doc(n).delete(),Dn(" Projekt gelscht"))}function S7(){window.updateDashboard=Sv,window.setDashboardPeriod=P7,Ce.dashboardPeriod="week"}function P7(n){Ce.dashboardPeriod=n,["week","month","year","all","custom"].forEach(r=>{const i=document.getElementById(`dash-${r}`);i&&(r===n?(i.classList.remove("bg-br-700"),i.classList.add("bg-br-500")):(i.classList.remove("bg-br-500"),i.classList.add("bg-br-700")))});const t=document.getElementById("dashboardDateRange");t&&(n==="custom"?t.classList.remove("hidden"):t.classList.add("hidden")),Sv()}function Sv(){var V;const n=Ce.dashboardPeriod||"week",e=Ce.entries;if(!e)return;const{start:t,end:r}=N7(n),i=e.filter(K=>K.datum>=t&&K.datum<=r);let s=0,a=0,o=0;const c=new Set,u={},l=(V=document.getElementById("dashProjectFilter"))==null?void 0:V.value;i.forEach(K=>{const ie=K.projekt||"unknown";if(l&&l!==""&&ie!==l)return;const ae=parseFloat(K.stunden||0);if(ie==="Pause"){const N=parseFloat(K.stunden||0);l==="Pause"&&(s+=N,K.homeoffice===!0?a+=N:K.homeoffice===!1&&(o+=N),c.add(K.datum)),u[ie]||(u[ie]=0),u[ie]+=N;return}s+=ae,c.add(K.datum),K.homeoffice===!0?a+=ae:K.homeoffice===!1&&(o+=ae),u[ie]||(u[ie]=0),u[ie]+=ae});const d=c.size,g=d>0?s/d:0;pl("statTotalHours",s.toFixed(1)),pl("statAvgPerDay",g.toFixed(1)),pl("statWorkDays",d),pl("statEntries",i.length);const p=a+o,x=p>0?a/p*100:0,_=p>0?o/p*100:0;pl("statHomeoffice",`${Math.round(x)}%`),pl("statOffice",`${Math.round(_)}%`);const E=document.getElementById("hoBar"),P=document.getElementById("officeBar");E&&(E.style.width=`${x}%`),P&&(P.style.width=`${_}%`);const L=document.getElementById("projectStats");if(L){const K=Object.entries(u).sort((ie,ae)=>ae[1]-ie[1]);L.innerHTML=K.map(([ie,ae])=>{let N=Ce.projects[ie];ie==="Pause"?N={name:"Pause",color:"#60A5FA"}:N||(N={name:ie==="unknown"?"Ohne Projekt":ie,color:"#6B7280"});const A=N.name,C=s>0?ae/s*100:0;return`
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-br-200">${A}</span>
                        <span class="font-mono">${ae.toFixed(1)}h (${Math.round(C)}%)</span>
                    </div>
                    <div class="w-full h-2 bg-br-700 rounded-full overflow-hidden">
                        <div class="h-full rounded-full" style="width: ${C}%; background-color: ${N.color}"></div>
                    </div>
                </div>
            `}).join("")}}function N7(n){var r,i;const e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0];if(n==="custom"){const s=(r=document.getElementById("dashFrom"))==null?void 0:r.value,a=(i=document.getElementById("dashTo"))==null?void 0:i.value;return{start:s||"0000-00-00",end:a||"9999-99-99"}}if(n==="all")return{start:"0000-00-00",end:"9999-99-99"};if(n==="today")return{start:t,end:t};if(n==="week"){const s=new Date(e),a=s.getDay()||7;return s.setDate(s.getDate()-a+1),{start:s.toISOString().split("T")[0],end:t}}if(n==="month"){const s=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],a=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0];return{start:s,end:a}}if(n==="year"){const s=`${e.getFullYear()}-01-01`,a=`${e.getFullYear()}-12-31`;return{start:s,end:a}}return{start:t,end:t}}function pl(n,e){const t=document.getElementById(n);t&&(t.textContent=e)}function k7(){window.addTask=C7,window.toggleTaskStatus=R7,window.editTask=L7,window.saveTaskEdit=D7,window.closeEditTaskModal=Pv,window.renderTasks=xA}function xA(){var g,p,x;const n=Ce.tasks||[],e=(g=document.getElementById("hideCompleted"))==null?void 0:g.checked,t=(p=document.getElementById("filterTaskPriority"))==null?void 0:p.value,r=(x=document.getElementById("filterTaskStatus"))==null?void 0:x.value,i=new Date().toISOString().split("T")[0];let s=n.filter(_=>!(e&&_.status==="erledigt"||t&&_.prioritaet!==t||r&&(_.status||"offen")!==r));const a=[],o=[],c=[],u=[];s.forEach(_=>{if(_.status==="erledigt"){u.push(_);return}if(!_.faelligAm){c.push(_);return}_.faelligAm<i?a.push(_):_.faelligAm===i?o.push(_):c.push(_)}),f0("overdueTasksList",a,"overdueTasks","overdueCount"),f0("todayTasksList",o,"todayTasks","todayTasksCount"),f0("upcomingTasksList",c,null,"upcomingCount"),f0("completedTasksList",u,"completedTasksSection","completedCount");const l=a.length+o.length+c.length,d=document.getElementById("noTasksMessage");d&&(l===0&&s.length===0?d.classList.remove("hidden"):d.classList.add("hidden"))}function f0(n,e,t,r){const i=document.getElementById(n);if(!i)return;if(t){const a=document.getElementById(t);a&&(e.length>0?a.classList.remove("hidden"):a.classList.add("hidden"))}if(r){const a=document.getElementById(r);a&&(a.textContent=e.length)}const s=a=>a==="hoch"?"text-red-400":a==="mittel"?"text-yellow-400":"text-green-400";i.innerHTML=e.map(a=>`
        <div class="p-3 flex items-start gap-3 hover:bg-br-700/30 transition-colors">
             <input type="checkbox" ${a.status==="erledigt"?"checked":""} 
                onclick="toggleTaskStatus('${a.id}')" 
                class="mt-1 w-4 h-4 rounded border-gray-500 bg-gray-700 checked:bg-blue-500">
             <div class="flex-1 cursor-pointer" onclick="editTask('${a.id}')">
                <div class="flex justify-between items-start">
                    <span class="${a.status==="erledigt"?"line-through text-br-400":"text-white"}">
                        ${a.aufgabe}
                    </span>
                    ${a.prioritaet?`<span class="text-[10px] ${s(a.prioritaet)} border border-current px-1 rounded ml-2 uppercase">${a.prioritaet}</span>`:""}
                </div>
                <div class="flex gap-3 mt-1 text-xs text-br-300">
                    <span> ${a.faelligAm?Iu(a.faelligAm):"Kein Datum"}</span>
                    ${a.notizen?'<span title="Notizen vorhanden"></span>':""}
                </div>
             </div>
        </div>
    `).join("")}async function C7(){const n=document.getElementById("newTaskTitle").value.trim();if(!n){alert("Bitte eine Aufgabe eingeben");return}const e={aufgabe:n,faelligAm:document.getElementById("newTaskDue").value,prioritaet:document.getElementById("newTaskPriority").value,notizen:document.getElementById("newTaskNotes").value,status:"offen",createdAt:On.firestore.FieldValue.serverTimestamp()};try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("tasks").add(e),Dn(" Aufgabe hinzugefgt"),document.getElementById("newTaskTitle").value="",document.getElementById("newTaskNotes").value="",document.getElementById("newTaskDue").value=""}catch(t){console.error(t),Dn(" Fehler beim Speichern")}}async function R7(n){const e=Ce.tasks.find(r=>r.id===n);if(!e)return;const t=e.status==="erledigt"?"offen":"erledigt";await Fn.collection("users").doc(Ce.currentUser.uid).collection("tasks").doc(n).update({status:t})}function L7(n){const e=Ce.tasks.find(t=>t.id===n);e&&(Ce.editingTaskId=n,document.getElementById("editTaskTitle").value=e.aufgabe,document.getElementById("editTaskDue").value=e.faelligAm||"",document.getElementById("editTaskPriority").value=e.prioritaet||"mittel",document.getElementById("editTaskStatus").value=e.status||"offen",document.getElementById("editTaskNotes").value=e.notizen||"",document.getElementById("editTaskModal").style.display="flex")}async function D7(){if(!Ce.editingTaskId)return;const n={aufgabe:document.getElementById("editTaskTitle").value,faelligAm:document.getElementById("editTaskDue").value,prioritaet:document.getElementById("editTaskPriority").value,status:document.getElementById("editTaskStatus").value,notizen:document.getElementById("editTaskNotes").value};try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("tasks").doc(Ce.editingTaskId).update(n),Dn(" Gespeichert"),Pv()}catch{Dn(" Fehler")}}async function F7(){if(!(!Ce.editingTaskId||!confirm("Aufgabe wirklich lschen?")))try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("tasks").doc(Ce.editingTaskId).delete(),Dn(" Gelscht"),Pv()}catch{Dn(" Fehler")}}function Pv(){Ce.editingTaskId=null,document.getElementById("editTaskModal").style.display="none"}function O7(){var i,s,a,o,c;const n=Ce.tasks||[],e=new Date().toISOString().split("T")[0],t=n.filter(u=>u.status!=="erledigt"&&u.faelligAm&&u.faelligAm<e),r=n.filter(u=>u.status!=="erledigt"&&u.faelligAm===e);if(t.length>0||r.length>0){const u=(d,g)=>{const p=document.getElementById(g);p&&(p.innerHTML=d.map(x=>`
                <div class="bg-br-700/50 p-2 rounded flex justify-between items-center">
                    <span class="${x.faelligAm<e?"text-red-300 font-bold":""}">${x.aufgabe}</span>
                    <button onclick="closeTasksDashboard(); editTask('${x.id}')" class="text-xs bg-br-600 px-2 py-1 rounded"></button>
                </div>
            `).join(""))};t.length>0?((i=document.getElementById("dashOverdue"))==null||i.classList.remove("hidden"),u(t,"dashOverdueList")):(s=document.getElementById("dashOverdue"))==null||s.classList.add("hidden"),r.length>0?((a=document.getElementById("dashToday"))==null||a.classList.remove("hidden"),u(r,"dashTodayList")):(o=document.getElementById("dashToday"))==null||o.classList.add("hidden"),(c=document.getElementById("dashNoUrgent"))==null||c.classList.add("hidden"),Ce.tasksDashboardShown=!0;const l=document.getElementById("tasksDashboardModal");l&&(l.classList.remove("hidden"),l.classList.add("flex"))}}window.closeTasksDashboard=function(){document.getElementById("tasksDashboardModal").classList.add("hidden"),document.getElementById("tasksDashboardModal").classList.remove("flex")};window.deleteTask=F7;function M7(){window.toggleTimer=B7,window.startTimer=EA,window.stopTimer=mm,window.resetTimer=V7,window.toggleCountdownMode=U7,window.testAlarm=H7,window.activateNotifications=$7}function B7(){Ce.isRunning?mm():EA()}function EA(){const n=document.getElementById("useCountdown").checked;TA(),IA();const e=parseInt(document.getElementById("countdownMinutes").value)||60,t=document.getElementById("currentProject").value;if(n){Ce.timerSeconds=e*60;const r=Date.now()+e*60*1e3;tM(r,t)}else Ce.timerSeconds=0;Ce.timerStart=new Date,Ce.isRunning=!0,gm(!0,n),z7(),Ce.timerInterval=setInterval(()=>{const i=Math.floor((new Date-Ce.timerStart)/1e3);n?(Ce.timerSeconds=Math.max(0,e*60-i),Ce.timerSeconds<=0&&(Ce.timerSeconds=0,mm(),bA())):Ce.timerSeconds=i,Nv()},1e3)}function mm(){clearInterval(Ce.timerInterval),Ce.isRunning=!1,gm(!1),Ce.timerStart&&Math.floor((new Date-Ce.timerStart)/1e3)>60&&j7(),CA(),kv()}function V7(){clearInterval(Ce.timerInterval),Ce.isRunning=!1,Ce.timerSeconds=0,Ce.timerStart=null,gm(!1),document.getElementById("timerStatus").textContent="Bereit zum Starten",Nv(),CA(),kv()}function gm(n,e=!1){const t=document.getElementById("btnStartStop"),r=document.getElementById("timerDisplay"),i=document.getElementById("timerStatus");n?(t.innerHTML=" Stop",t.classList.replace("bg-green-600","bg-red-600"),t.classList.replace("hover:bg-green-500","hover:bg-red-500"),r.classList.add("timer-active"),i.textContent=e?" Countdown luft... (Cloud-Alarm aktiv )":"Timer luft..."):(t.innerHTML=" Start",t.classList.replace("bg-red-600","bg-green-600"),t.classList.replace("hover:bg-red-500","hover:bg-green-500"),r.classList.remove("timer-active"),i.textContent="Timer gestoppt")}function Nv(){const n=Math.floor(Ce.timerSeconds/3600),e=Math.floor(Ce.timerSeconds%3600/60),t=Ce.timerSeconds%60;document.getElementById("timerValue").textContent=`${String(n).padStart(2,"0")}:${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`}function U7(){const n=document.getElementById("useCountdown").checked;document.getElementById("countdownMinutes").disabled=!n}function j7(){const n=document.getElementById("useCountdown").checked,e=document.getElementById("currentProject").value,t=document.getElementById("currentActivity").value;let r;if(n){const c=parseInt(document.getElementById("countdownMinutes").value)||60;r=new Date(Ce.timerStart.getTime()+c*60*1e3)}else r=new Date;const i=r-Ce.timerStart,s=Math.round(i/6e4),a=e==="Pause",o={datum:Ce.timerStart.toISOString().split("T")[0],start:Ce.timerStart.toTimeString().slice(0,5),ende:r.toTimeString().slice(0,5),projekt:e,taetigkeit:t,homeoffice:Ce.isHomeoffice,stunden:a?0:q7(Ce.timerStart.toTimeString().slice(0,5),r.toTimeString().slice(0,5)),pause:a?s:0,createdAt:On.firestore.FieldValue.serverTimestamp()};kA(o),Ce.timerStart=null,Dn(" Zeiteintrag gespeichert!")}function q7(n,e){const t=Mw(n),r=Mw(e);return Math.round((r-t)/60*100)/100}function Mw(n){if(!n)return 0;const[e,t]=n.split(":").map(Number);return e*60+t}function z7(){var n;localStorage.setItem("zeiterfassung_timer",JSON.stringify({timerStart:(n=Ce.timerStart)==null?void 0:n.toISOString(),isRunning:Ce.isRunning,isCountdown:document.getElementById("useCountdown").checked,countdownMinutes:document.getElementById("countdownMinutes").value,project:document.getElementById("currentProject").value,activity:document.getElementById("currentActivity").value,homeoffice:Ce.isHomeoffice}))}function kv(){localStorage.removeItem("zeiterfassung_timer")}function W7(){const n=localStorage.getItem("zeiterfassung_timer");if(!n)return;const e=JSON.parse(n);if(!e.isRunning||!e.timerStart)return;const t=new Date(e.timerStart),r=Math.floor((Date.now()-t.getTime())/1e3),i=parseInt(e.countdownMinutes)||60;if(Ce.timerStart=t,document.getElementById("currentProject").value=e.project||"",document.getElementById("currentActivity").value=e.activity||"",window.setLocation(e.homeoffice),e.isCountdown){if(document.getElementById("useCountdown").checked=!0,document.getElementById("countdownMinutes").value=i,Ce.timerSeconds=Math.max(0,i*60-r),Ce.timerSeconds<=0){Ce.timerSeconds=0,kv();return}}else Ce.timerSeconds=r;Ce.isRunning=!0,gm(!0,e.isCountdown),Dn(" Timer wiederhergestellt!"),Ce.timerInterval=setInterval(()=>{const a=Math.floor((new Date-Ce.timerStart)/1e3);e.isCountdown?(Ce.timerSeconds=Math.max(0,i*60-a),Ce.timerSeconds<=0&&(Ce.timerSeconds=0,mm(),bA())):Ce.timerSeconds=a,Nv()},1e3)}let $a=null;function TA(){$a||($a=new(window.AudioContext||window.webkitAudioContext)),$a.state==="suspended"&&$a.resume()}function bA(){Dn(" Zeit abgelaufen!"),AA()}function AA(){if($a){const n=$a.createOscillator(),e=$a.createGain();n.connect(e),e.connect($a.destination),n.frequency.value=880,n.start(),n.stop($a.currentTime+1)}}function H7(){TA(),AA()}function IA(){"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()}function $7(){IA()}function Dn(n){const e=document.createElement("div");e.className="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg border border-gray-600 z-50 animate-bounce",e.textContent=n,document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}function G7(){var n,e,t,r;(n=document.getElementById("loginScreen"))==null||n.classList.remove("hidden"),(e=document.getElementById("app"))==null||e.classList.add("hidden"),(t=document.getElementById("registerForm"))==null||t.classList.add("hidden"),(r=document.getElementById("emailLoginForm"))==null||r.classList.remove("hidden")}function K7(){var i,s,a;(i=document.getElementById("loginScreen"))==null||i.classList.add("hidden"),(s=document.getElementById("app"))==null||s.classList.remove("hidden");const n=Ce.currentUser,e=document.getElementById("userPhoto"),t=document.getElementById("userAvatar");n&&n.photoURL?(e.src=n.photoURL,e.style.display="block"):(e.src="",e.style.display="none",t.innerHTML="");const r=n.displayName||((a=n.email)==null?void 0:a.split("@")[0])||"User";document.getElementById("userName").textContent=r,document.getElementById("userEmail").textContent=n.email||"",SA("tasks")}function Wi(n){const e=document.getElementById("syncStatus");if(e)switch(e.classList.remove("syncing"),n){case"syncing":e.innerHTML=" Sync...",e.className="sync-indicator syncing text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full";break;case"synced":e.innerHTML=" Sync",e.className="sync-indicator text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full";break;case"error":e.innerHTML=" Offline",e.className="sync-indicator text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full";break}}function SA(n){var e,t,r;["timer","tasks","calendar","entries","projects","dashboard","export"].forEach(i=>{var s,a,o;(s=document.getElementById(`content-${i}`))==null||s.classList.add("hidden"),(a=document.getElementById(`tab-${i}`))==null||a.classList.remove("tab-active"),(o=document.getElementById(`tab-${i}`))==null||o.classList.add("text-br-200")}),(e=document.getElementById(`content-${n}`))==null||e.classList.remove("hidden"),(t=document.getElementById(`tab-${n}`))==null||t.classList.add("tab-active"),(r=document.getElementById(`tab-${n}`))==null||r.classList.remove("text-br-200"),n==="entries"&&window.filterEntries&&window.filterEntries(),n==="projects"&&window.renderProjects&&window.renderProjects(),n==="dashboard"&&window.updateDashboard&&window.updateDashboard(),n==="tasks"&&window.renderTasks&&window.renderTasks(),n==="calendar"&&window.renderCalendar&&window.renderCalendar()}function Y7(){document.getElementById("manualDate").value=new Date().toISOString().split("T")[0],localStorage.getItem("zeiterfassung_sortOrder")==="asc"&&(Ce.sortOrderDescending=!1,document.getElementById("btnSortOrder").innerHTML="",document.getElementById("btnSortOrder").title="Sortierung: lteste zuerst"),window.showTab=SA;const e=(t,...r)=>{const i=document.getElementById(t);if(!i)return;const s=()=>{const a=ks(i.value);r.forEach(o=>{const c=document.getElementById(o);c&&c.parentElement&&(a?c.parentElement.classList.add("hidden"):c.parentElement.classList.remove("hidden"))})};i.addEventListener("change",s)};e("currentProject","manualStart","manualEnd","manualLocation"),e("editProject","editStart","editEnd","editLocation")}function PA(){const n=new Date,e=new Date(n.getTime()-n.getTimezoneOffset()*6e4).toISOString().split("T")[0],t=Ce.entries.filter(E=>E.datum===e);let r=0,i=0,s=0;t.forEach(E=>{const P=parseFloat(E.stunden||0);E.projekt!=="Pause"&&(r+=P,E.homeoffice?i+=P:s+=P)});const a=7.8,o=r/a*100,c=Math.round(o),u=Math.min(100,o);document.getElementById("todayWorkProgress").textContent=`${r.toFixed(2)}h / ${a}h`,document.getElementById("todayWorkPercentText").textContent=`${c}%`;const l=document.getElementById("todayWorkBar");l&&(l.style.width=`${u}%`);const d=document.getElementById("todayWorkPercent");d&&(d.textContent=c>10?`${c}%`:"");const g=i+s,p=g>0?i/g*100:50,x=g>0?s/g*100:50;document.getElementById("todayHoBar").style.width=`${p}%`,document.getElementById("todayOfficeBar").style.width=`${x}%`,document.getElementById("todayHoLabel").textContent=p>10?`${Math.round(p)}%`:"",document.getElementById("todayOfficeLabel").textContent=x>10?`${Math.round(x)}%`:"",document.getElementById("todayHoHours").textContent=`${i.toFixed(1)}h`,document.getElementById("todayOfficeHours").textContent=`${s.toFixed(1)}h`,document.getElementById("todayTotal").textContent=`${r.toFixed(2)} h`;const _=document.getElementById("todayEntries");_&&(t.length===0?_.innerHTML='<div class="p-4 text-center text-br-300 text-sm">Noch keine Eintrge heute</div>':(t.sort((E,P)=>(E.start||"").localeCompare(P.start||"")),_.innerHTML=t.map(E=>{var K;const P=ks(E.projekt),L=P?" Ganztgig":`${E.start} - ${E.ende}`;let V="";return P||E.homeoffice===null?V="":E.homeoffice&&(V=""),`
                <div class="p-3 border-b border-br-600 flex items-center justify-between hover:bg-br-700/50 transition-colors">
                    <div class="flex items-center gap-3">
                        <div class="w-1 h-8 rounded" style="background: ${((K=Ce.projects[E.projekt])==null?void 0:K.color)||"#6B7280"}"></div>
                        <div>
                            <div class="text-sm font-medium">${L}</div>
                            <div class="text-xs text-br-200">${E.projekt||"Allgemein"}  ${E.taetigkeit||"-"}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-mono text-sm">${(E.stunden||0).toFixed(2)}h</div>
                        <div class="text-xs">${V}</div>
                    </div>
                </div>
            `}).join("")))}function NA(){var n;(n=document.getElementById("userMenu"))==null||n.classList.add("hidden")}function Iu(n){if(!n)return"";try{const e=new Date(n);return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}catch{return n}}window.showUserMenu=()=>document.getElementById("userMenu").classList.toggle("hidden");window.hideUserMenu=NA;window.formatDate=Iu;window.updateTodayView=PA;window.setLocation=X7;function X7(n){Ce.isHomeoffice=n;const e=document.getElementById("btn-ho"),t=document.getElementById("btn-office");n?(e.classList.replace("bg-br-700","bg-br-500"),t.classList.replace("bg-br-500","bg-br-700")):(e.classList.replace("bg-br-500","bg-br-700"),t.classList.replace("bg-br-700","bg-br-500"))}function J7(){Ce.currentUser&&(Wi("syncing"),Ce.unsubscribeEntries=Fn.collection("users").doc(Ce.currentUser.uid).collection("entries").orderBy("datum","desc").onSnapshot(n=>{Ce.entries=[],n.forEach(e=>{Ce.entries.push({id:e.id,...e.data()})}),PA(),Pd(),Sv(),Wi("synced")},n=>{console.error("Entries sync error:",n),Wi("error")}),Ce.unsubscribeProjects=Fn.collection("users").doc(Ce.currentUser.uid).collection("projects").onSnapshot(n=>{n.empty||(Ce.projects={},n.forEach(e=>{Ce.projects[e.id]=e.data()}),E7(),yA())},n=>{console.error("Projects sync error:",n)}),Ce.unsubscribeTasks=Fn.collection("users").doc(Ce.currentUser.uid).collection("tasks").orderBy("faelligAm","asc").onSnapshot(n=>{Ce.tasks=[],n.forEach(e=>{Ce.tasks.push({id:e.id,...e.data()})}),xA(),Ce.tasksDashboardShown||O7(),Wi("synced")},n=>{console.error("Tasks sync error:",n),Wi("error")}))}function Q7(){Ce.unsubscribeEntries&&Ce.unsubscribeEntries(),Ce.unsubscribeProjects&&Ce.unsubscribeProjects(),Ce.unsubscribeTasks&&Ce.unsubscribeTasks()}async function kA(n){if(Ce.currentUser){Wi("syncing");try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("entries").add(n),Wi("synced")}catch(e){console.error("Add entry error:",e),Wi("error")}}}async function Z7(n,e){if(Ce.currentUser){Wi("syncing");try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("entries").doc(n).update(e),Wi("synced")}catch(t){console.error("Update entry error:",t),Wi("error")}}}async function eM(n){if(Ce.currentUser){Wi("syncing");try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("entries").doc(n).delete(),Wi("synced")}catch(e){console.error("Delete entry error:",e),Wi("error")}}}async function tM(n,e){if(Ce.currentUser)try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("timers").doc("current").set({alarmTime:n,project:e||"",active:!0,createdAt:On.firestore.FieldValue.serverTimestamp()}),console.log(" Cloud Timer gespeichert")}catch(t){console.error("Cloud Timer Fehler:",t)}}async function CA(){if(Ce.currentUser)try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("timers").doc("current").update({active:!1}),console.log(" Cloud Timer deaktiviert")}catch(n){console.error("Cloud Timer lschen Fehler:",n)}}function nM(){bh.onAuthStateChanged(n=>{console.log("Auth State:",n?n.email:"nicht angemeldet"),n?(Ce.currentUser=n,K7(),J7(),W7()):(Ce.currentUser=null,G7(),Q7())}),window.signInWithGoogle=rM,window.signInWithEmail=oM,window.registerWithEmail=cM,window.resetPassword=uM,window.signOut=iM,window.showRegisterForm=sM,window.showLoginForm=aM}async function rM(){const n=new On.auth.GoogleAuthProvider;n.setCustomParameters({prompt:"select_account"});try{const e=document.getElementById("loginBtn");e&&(e.disabled=!0,e.innerHTML=" Anmelden..."),await bh.signInWithPopup(n),console.log(" Login erfolgreich")}catch(e){console.error("Login Error:",e.code,e.message);const t=document.getElementById("loginBtn");t&&(t.disabled=!1,t.innerHTML='<svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Mit Google anmelden'),e.code==="auth/popup-blocked"?alert(" Popup wurde blockiert! Bitte erlaube Popups fr diese Seite."):e.code!=="auth/popup-closed-by-user"&&e.code!=="auth/cancelled-popup-request"&&alert(" Login fehlgeschlagen: "+e.message)}}function iM(){bh.signOut(),NA()}function sM(){document.getElementById("emailLoginForm").classList.add("hidden"),document.getElementById("registerForm").classList.remove("hidden")}function aM(){var n,e;(n=document.getElementById("registerForm"))==null||n.classList.add("hidden"),(e=document.getElementById("emailLoginForm"))==null||e.classList.remove("hidden")}async function oM(){const n=document.getElementById("loginEmail").value.trim(),e=document.getElementById("loginPassword").value;if(!n||!e){alert("Bitte E-Mail und Passwort eingeben.");return}const t=document.getElementById("emailLoginBtn");t.disabled=!0,t.innerHTML=" Anmelden...";try{await bh.signInWithEmailAndPassword(n,e),console.log(" E-Mail Login erfolgreich")}catch(r){switch(console.error("E-Mail Login Error:",r.code,r.message),t.disabled=!1,t.innerHTML=" Mit E-Mail anmelden",r.code){case"auth/user-not-found":alert(` Kein Konto mit dieser E-Mail gefunden.

Mchtest du dich registrieren?`);break;case"auth/wrong-password":alert(" Falsches Passwort.");break;case"auth/invalid-email":alert(" Ungltige E-Mail-Adresse.");break;case"auth/too-many-requests":alert(" Zu viele Versuche. Bitte warte einen Moment.");break;default:alert(" Login fehlgeschlagen: "+r.message)}}}async function cM(){const n=document.getElementById("registerEmail").value.trim(),e=document.getElementById("registerPassword").value,t=document.getElementById("registerPasswordConfirm").value;if(!n||!e){alert("Bitte E-Mail und Passwort eingeben.");return}if(e.length<6){alert("Das Passwort muss mindestens 6 Zeichen haben.");return}if(e!==t){alert("Die Passwrter stimmen nicht berein.");return}try{await bh.createUserWithEmailAndPassword(n,e),console.log(" Registrierung erfolgreich"),Dn(" Konto erstellt! Du bist jetzt angemeldet.")}catch(r){switch(console.error("Registrierung Error:",r.code,r.message),r.code){case"auth/email-already-in-use":alert(` Diese E-Mail ist bereits registriert.

Bitte melde dich an oder nutze "Passwort vergessen".`);break;default:alert(" Registrierung fehlgeschlagen: "+r.message)}}}async function uM(){const n=document.getElementById("loginEmail").value.trim();if(!n){alert("Bitte gib zuerst deine E-Mail-Adresse ein.");return}try{await bh.sendPasswordResetEmail(n),alert(` Passwort-Reset E-Mail gesendet!

Bitte prfe dein Postfach (auch Spam-Ordner).`)}catch(e){console.error("Password Reset Error:",e.code,e.message),alert(" Fehler: "+e.message)}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var dp={};dp.version="0.18.5";var RA=1252,lM=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],LA=function(n){lM.indexOf(n)!=-1&&(RA=n)};function hM(){LA(1252)}var Qf=function(n){LA(n)};function fM(){Qf(1200),hM()}var d0=function(e){return String.fromCharCode(e)},Bw=function(e){return String.fromCharCode(e)},pp,Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Zf(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0,c=0,u=0;u<n.length;)t=n.charCodeAt(u++),s=t>>2,r=n.charCodeAt(u++),a=(t&3)<<4|r>>4,i=n.charCodeAt(u++),o=(r&15)<<2|i>>6,c=i&63,isNaN(r)?o=c=64:isNaN(i)&&(c=64),e+=Zo.charAt(s)+Zo.charAt(a)+Zo.charAt(o)+Zo.charAt(c);return e}function ao(n){var e="",t=0,r=0,i=0,s=0,a=0,o=0,c=0;n=n.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<n.length;)s=Zo.indexOf(n.charAt(u++)),a=Zo.indexOf(n.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Zo.indexOf(n.charAt(u++)),r=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(r)),c=Zo.indexOf(n.charAt(u++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var hn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),po=function(){if(typeof Buffer<"u"){var n=!Buffer.from;if(!n)try{Buffer.from("foo","utf8")}catch{n=!0}return n?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Su(n){return hn?Buffer.alloc?Buffer.alloc(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}function Vw(n){return hn?Buffer.allocUnsafe?Buffer.allocUnsafe(n):new Buffer(n):typeof Uint8Array<"u"?new Uint8Array(n):new Array(n)}var Gs=function(e){return hn?po(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function vm(n){if(typeof ArrayBuffer>"u")return Gs(n);for(var e=new ArrayBuffer(n.length),t=new Uint8Array(e),r=0;r!=n.length;++r)t[r]=n.charCodeAt(r)&255;return e}function Nd(n){if(Array.isArray(n))return n.map(function(r){return String.fromCharCode(r)}).join("");for(var e=[],t=0;t<n.length;++t)e[t]=String.fromCharCode(n[t]);return e.join("")}function dM(n){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(n)}var ei=hn?function(n){return Buffer.concat(n.map(function(e){return Buffer.isBuffer(e)?e:po(e)}))}:function(n){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<n.length;++e)t+=n[e].length;var r=new Uint8Array(t),i=0;for(e=0,t=0;e<n.length;t+=i,++e)if(i=n[e].length,n[e]instanceof Uint8Array)r.set(n[e],t);else{if(typeof n[e]=="string")throw"wtf";r.set(new Uint8Array(n[e]),t)}return r}return[].concat.apply([],n.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function pM(n){for(var e=[],t=0,r=n.length+250,i=Su(n.length+255),s=0;s<n.length;++s){var a=n.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=n.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>r&&(e.push(i.slice(0,t)),t=0,i=Su(65535),r=65530)}return e.push(i.slice(0,t)),ei(e)}var xf=/\u0000/g,p0=/[\u0001-\u0006]/g;function Vl(n){for(var e="",t=n.length-1;t>=0;)e+=n.charAt(t--);return e}function Ks(n,e){var t=""+n;return t.length>=e?t:rr("0",e-t.length)+t}function Cv(n,e){var t=""+n;return t.length>=e?t:rr(" ",e-t.length)+t}function mp(n,e){var t=""+n;return t.length>=e?t:t+rr(" ",e-t.length)}function mM(n,e){var t=""+Math.round(n);return t.length>=e?t:rr("0",e-t.length)+t}function gM(n,e){var t=""+n;return t.length>=e?t:rr("0",e-t.length)+t}var Uw=Math.pow(2,32);function ml(n,e){if(n>Uw||n<-Uw)return mM(n,e);var t=Math.round(n);return gM(t,e)}function gp(n,e){return e=e||0,n.length>=7+e&&(n.charCodeAt(e)|32)===103&&(n.charCodeAt(e+1)|32)===101&&(n.charCodeAt(e+2)|32)===110&&(n.charCodeAt(e+3)|32)===101&&(n.charCodeAt(e+4)|32)===114&&(n.charCodeAt(e+5)|32)===97&&(n.charCodeAt(e+6)|32)===108}var jw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],vg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function vM(n){return n||(n={}),n[0]="General",n[1]="0",n[2]="0.00",n[3]="#,##0",n[4]="#,##0.00",n[9]="0%",n[10]="0.00%",n[11]="0.00E+00",n[12]="# ?/?",n[13]="# ??/??",n[14]="m/d/yy",n[15]="d-mmm-yy",n[16]="d-mmm",n[17]="mmm-yy",n[18]="h:mm AM/PM",n[19]="h:mm:ss AM/PM",n[20]="h:mm",n[21]="h:mm:ss",n[22]="m/d/yy h:mm",n[37]="#,##0 ;(#,##0)",n[38]="#,##0 ;[Red](#,##0)",n[39]="#,##0.00;(#,##0.00)",n[40]="#,##0.00;[Red](#,##0.00)",n[45]="mm:ss",n[46]="[h]:mm:ss",n[47]="mmss.0",n[48]="##0.0E+0",n[49]="@",n[56]='"/ "hh""mm""ss" "',n}var sr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},qw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},_M={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function vp(n,e,t){for(var r=n<0?-1:1,i=n*r,s=0,a=1,o=0,c=1,u=0,l=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,l=d*u+c,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,c=u,u=l;if(l>e&&(u>e?(l=c,o=s):(l=u,o=a)),!t)return[0,r*o,l];var g=Math.floor(r*o/l);return[g,r*o-g*l,l]}function m0(n,e,t){if(n>2958465||n<0)return null;var r=n|0,i=Math.floor(86400*(n-r)),s=0,a=[],o={D:r,T:i,u:86400*(n-r)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(r+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++r,++o.D)),r===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(r===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{r>60&&--r;var c=new Date(1900,0,1);c.setDate(c.getDate()+r-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),r<60&&(s=(s+6)%7),t&&(s=AM(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var DA=new Date(1899,11,31,0,0,0),yM=DA.getTime(),wM=new Date(1900,2,1,0,0,0);function FA(n,e){var t=n.getTime();return e?t-=1461*24*60*60*1e3:n>=wM&&(t+=24*60*60*1e3),(t-(yM+(n.getTimezoneOffset()-DA.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Rv(n){return n.indexOf(".")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function xM(n){return n.indexOf("E")==-1?n:n.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function EM(n){var e=n<0?12:11,t=Rv(n.toFixed(12));return t.length<=e||(t=n.toPrecision(10),t.length<=e)?t:n.toExponential(5)}function TM(n){var e=Rv(n.toFixed(11));return e.length>(n<0?12:11)||e==="0"||e==="-0"?n.toPrecision(6):e}function bM(n){var e=Math.floor(Math.log(Math.abs(n))*Math.LOG10E),t;return e>=-4&&e<=-1?t=n.toPrecision(10+e):Math.abs(e)<=9?t=EM(n):e===10?t=n.toFixed(10).substr(0,12):t=TM(n),Rv(xM(t.toUpperCase()))}function y1(n,e){switch(typeof n){case"string":return n;case"boolean":return n?"TRUE":"FALSE";case"number":return(n|0)===n?n.toString(10):bM(n);case"undefined":return"";case"object":if(n==null)return"";if(n instanceof Date)return dc(14,FA(n,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+n)}function AM(n,e){e[0]-=581;var t=n.getDay();return n<60&&(t=(t+6)%7),t}function IM(n,e,t,r){var i="",s=0,a=0,o=t.y,c,u=0;switch(n){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=t.m,u=e.length;break;case 3:return vg[t.m-1][1];case 5:return vg[t.m-1][0];default:return vg[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=t.d,u=e.length;break;case 3:return jw[t.q][0];default:return jw[t.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?Ks(t.S,e.length):(r>=2?a=r===3?1e3:100:a=r===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=Ks(s,2+r),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=t.D*24+t.H;break;case"[m]":case"[mm]":c=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":c=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var l=u>0?Ks(c,u):"";return l}function ec(n){var e=3;if(n.length<=e)return n;for(var t=n.length%e,r=n.substr(0,t);t!=n.length;t+=e)r+=(r.length>0?",":"")+n.substr(t,e);return r}var OA=/%/g;function SM(n,e,t){var r=e.replace(OA,""),i=e.length-r.length;return Za(n,r,t*Math.pow(10,2*i))+rr("%",i)}function PM(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Za(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function MA(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+MA(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var BA=/# (\?+)( ?)\/( ?)(\d+)/;function NM(n,e,t){var r=parseInt(n[4],10),i=Math.round(e*r),s=Math.floor(i/r),a=i-s*r,o=r;return t+(s===0?"":""+s)+" "+(a===0?rr(" ",n[1].length+1+n[4].length):Cv(a,n[1].length)+n[2]+"/"+n[3]+Ks(o,n[4].length))}function kM(n,e,t){return t+(e===0?"":""+e)+rr(" ",n[1].length+2+n[4].length)}var VA=/^#*0*\.([0#]+)/,UA=/\).*[0#]/,jA=/\(###\) ###\\?-####/;function Si(n){for(var e="",t,r=0;r!=n.length;++r)switch(t=n.charCodeAt(r)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function zw(n,e){var t=Math.pow(10,e);return""+Math.round(n*t)/t}function Ww(n,e){var t=n-Math.floor(n),r=Math.pow(10,e);return e<(""+Math.round(t*r)).length?0:Math.round(t*r)}function CM(n,e){return e<(""+Math.round((n-Math.floor(n))*Math.pow(10,e))).length?1:0}function RM(n){return n<2147483647&&n>-2147483648?""+(n>=0?n|0:n-1|0):""+Math.floor(n)}function As(n,e,t){if(n.charCodeAt(0)===40&&!e.match(UA)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?As("n",r,t):"("+As("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return PM(n,e,t);if(e.indexOf("%")!==-1)return SM(n,e,t);if(e.indexOf("E")!==-1)return MA(e,t);if(e.charCodeAt(0)===36)return"$"+As(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+ml(c,e.length);if(e.match(/^[#?]+$/))return i=ml(t,0),i==="0"&&(i=""),i.length>e.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(BA))return NM(s,c,u);if(e.match(/^#+0+$/))return u+ml(c,e.length-e.indexOf("0"));if(s=e.match(VA))return i=zw(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Si(s[1])).replace(/\.$/,"."+Si(s[1])).replace(/\.(\d*)$/,function(x,_){return"."+_+rr("0",Si(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+zw(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+ec(ml(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+As(n,e,-t):ec(""+(Math.floor(t)+CM(t,s[1].length)))+"."+Ks(Ww(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return As(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Vl(As(n,e.replace(/[\\-]/g,""),t)),a=0,Vl(Vl(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(jA))return i=As(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=vp(c,Math.pow(10,a)-1,!1),i=""+u,l=Za("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=mp(o[2],a),l.length<s[4].length&&(l=Si(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=vp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Cv(o[1],a)+s[2]+"/"+s[3]+mp(o[2],a):rr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=ml(t,0),e.length<=i.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Si(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=Ww(t,s[1].length),t<0?"-"+As(n,e,-t):ec(RM(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Ks(0,3-x.length):"")+x})+"."+Ks(a,s[1].length);switch(e){case"###,##0.00":return As(n,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=ec(ml(c,0));return p!=="0"?u+p:"";case"###,###.00":return As(n,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return As(n,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function LM(n,e,t){for(var r=e.length-1;e.charCodeAt(r-1)===44;)--r;return Za(n,e.substr(0,r),t/Math.pow(10,3*(e.length-r)))}function DM(n,e,t){var r=e.replace(OA,""),i=e.length-r.length;return Za(n,r,t*Math.pow(10,2*i))+rr("%",i)}function qA(n,e){var t,r=n.indexOf("E")-n.indexOf(".")-1;if(n.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+qA(n,-e);var i=n.indexOf(".");i===-1&&(i=n.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(r+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(r);return n.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),n.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function oa(n,e,t){if(n.charCodeAt(0)===40&&!e.match(UA)){var r=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?oa("n",r,t):"("+oa("n",r,-t)+")"}if(e.charCodeAt(e.length-1)===44)return LM(n,e,t);if(e.indexOf("%")!==-1)return DM(n,e,t);if(e.indexOf("E")!==-1)return qA(e,t);if(e.charCodeAt(0)===36)return"$"+oa(n,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+Ks(c,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(BA))return kM(s,c,u);if(e.match(/^#+0+$/))return u+Ks(c,e.length-e.indexOf("0"));if(s=e.match(VA))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Si(s[1])).replace(/\.$/,"."+Si(s[1])),i=i.replace(/\.(\d*)$/,function(x,_){return"."+_+rr("0",Si(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+ec(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+oa(n,e,-t):ec(""+t)+"."+rr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return oa(n,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Vl(oa(n,e.replace(/[\\-]/g,""),t)),a=0,Vl(Vl(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(jA))return i=oa(n,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=vp(c,Math.pow(10,a)-1,!1),i=""+u,l=Za("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=mp(o[2],a),l.length<s[4].length&&(l=Si(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=vp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?Cv(o[1],a)+s[2]+"/"+s[3]+mp(o[2],a):rr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Si(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Si(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+oa(n,e,-t):ec(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?Ks(0,3-x.length):"")+x})+"."+Ks(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=ec(""+c);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return oa(n,e.slice(0,e.lastIndexOf(".")),t)+Si(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Za(n,e,t){return(t|0)===t?oa(n,e,t):As(n,e,t)}function FM(n){for(var e=[],t=!1,r=0,i=0;r<n.length;++r)switch(n.charCodeAt(r)){case 34:t=!t;break;case 95:case 42:case 92:++r;break;case 59:e[e.length]=n.substr(i,r-i),i=r+1}if(e[e.length]=n.substr(i),t===!0)throw new Error("Format |"+n+"| unterminated string ");return e}var zA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function WA(n){for(var e=0,t="",r="";e<n.length;)switch(t=n.charAt(e)){case"G":gp(n,e)&&(e+=6),e++;break;case'"':for(;n.charCodeAt(++e)!==34&&e<n.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(n.charAt(e+1)==="1"||n.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(n.substr(e,3).toUpperCase()==="A/P"||n.substr(e,5).toUpperCase()==="AM/PM"||n.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(r=t;n.charAt(e++)!=="]"&&e<n.length;)r+=n.charAt(e);if(r.match(zA))return!0;break;case".":case"0":case"#":for(;e<n.length&&("0#?.,E+-%".indexOf(t=n.charAt(++e))>-1||t=="\\"&&n.charAt(e+1)=="-"&&"0#".indexOf(n.charAt(e+2))>-1););break;case"?":for(;n.charAt(++e)===t;);break;case"*":++e,(n.charAt(e)==" "||n.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<n.length&&"0123456789".indexOf(n.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function OM(n,e,t,r){for(var i=[],s="",a=0,o="",c="t",u,l,d,g="H";a<n.length;)switch(o=n.charAt(a)){case"G":if(!gp(n,a))throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=n.charCodeAt(++a))!==34&&a<n.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=n.charAt(++a),x=p==="("||p===")"?p:"t";i[i.length]={t:x,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(n.charAt(a+1)==="1"||n.charAt(a+1)==="2"){if(u==null&&(u=m0(e,t,n.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:n.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=m0(e,t),u==null))return"";for(s=o;++a<n.length&&n.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var _={t:o,v:o};if(u==null&&(u=m0(e,t)),n.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(_.v=u.H>=12?"P":"A"),_.t="T",g="h",a+=3):n.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(_.v=u.H>=12?"PM":"AM"),_.t="T",a+=5,g="h"):n.substr(a,5).toUpperCase()==="/"?(u!=null&&(_.v=u.H>=12?"":""),_.t="T",a+=5,g="h"):(_.t="t",++a),u==null&&_.t==="T")return"";i[i.length]=_,c=o;break;case"[":for(s=o;n.charAt(a++)!=="]"&&a<n.length;)s+=n.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(zA)){if(u==null&&(u=m0(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",WA(n)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<n.length&&(o=n.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<n.length&&"0#?.,E+-%".indexOf(o=n.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;n.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(n.charAt(a)==" "||n.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:r===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<n.length&&"0123456789".indexOf(n.charAt(++a))>-1;)s+=n.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+n);i[i.length]={t:"t",v:o},++a;break}var E=0,P=0,L;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,c="h",E<1&&(E=1);break;case"s":(L=i[a].v.match(/\.0+$/))&&(P=Math.max(P,L[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var V="",K;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=IM(i[a].t.charCodeAt(0),i[a].v,u,P),i[a].t="t";break;case"n":case"?":for(K=a+1;i[K]!=null&&((o=i[K].t)==="?"||o==="D"||(o===" "||o==="t")&&i[K+1]!=null&&(i[K+1].t==="?"||i[K+1].t==="t"&&i[K+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[K].v==="/"||i[K].v===" "&&i[K+1]!=null&&i[K+1].t=="?"));)i[a].v+=i[K].v,i[K]={v:"",t:";"},++K;V+=i[a].v,a=K-1;break;case"G":i[a].t="t",i[a].v=y1(e,t);break}var ie="",ae,N;if(V.length>0){V.charCodeAt(0)==40?(ae=e<0&&V.charCodeAt(0)===45?-e:e,N=Za("n",V,ae)):(ae=e<0&&r>1?-e:e,N=Za("n",V,ae),ae<0&&i[0]&&i[0].t=="t"&&(N=N.substr(1),i[0].v="-"+i[0].v)),K=N.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var C=i.length;if(A===i.length&&N.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(K>=i[a].v.length-1?(K-=i[a].v.length,i[a].v=N.substr(K+1,i[a].v.length)):K<0?i[a].v="":(i[a].v=N.substr(0,K+1),K=-1),i[a].t="t",C=a);K>=0&&C<i.length&&(i[C].v=N.substr(0,K+1)+i[C].v)}else if(A!==i.length&&N.indexOf("E")===-1){for(K=N.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,ie=i[a].v.substr(l+1);l>=0;--l)K>=0&&(i[a].v.charAt(l)==="0"||i[a].v.charAt(l)==="#")&&(ie=N.charAt(K--)+ie);i[a].v=ie,i[a].t="t",C=a}for(K>=0&&C<i.length&&(i[C].v=N.substr(0,K+1)+i[C].v),K=N.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,ie=i[a].v.substr(0,l);l<i[a].v.length;++l)K<N.length&&(ie+=N.charAt(K++));i[a].v=ie,i[a].t="t",C=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(ae=r>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Za(i[a].t,i[a].v,ae),i[a].t="t");var B="";for(a=0;a!==i.length;++a)i[a]!=null&&(B+=i[a].v);return B}var Hw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function $w(n,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(n==t)return!0;break;case">":if(n>t)return!0;break;case"<":if(n<t)return!0;break;case"<>":if(n!=t)return!0;break;case">=":if(n>=t)return!0;break;case"<=":if(n<=t)return!0;break}return!1}function MM(n,e){var t=FM(n),r=t.length,i=t[r-1].indexOf("@");if(r<4&&i>-1&&--r,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[r,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(Hw),o=t[1].match(Hw);return $w(e,a)?[r,t[0]]:$w(e,o)?[r,t[1]]:[r,t[a!=null&&o!=null?2:1]]}return[r,s]}function dc(n,e,t){t==null&&(t={});var r="";switch(typeof n){case"string":n=="m/d/yy"&&t.dateNF?r=t.dateNF:r=n;break;case"number":n==14&&t.dateNF?r=t.dateNF:r=(t.table!=null?t.table:sr)[n],r==null&&(r=t.table&&t.table[qw[n]]||sr[qw[n]]),r==null&&(r=_M[n]||"General");break}if(gp(r,0))return y1(e,t);e instanceof Date&&(e=FA(e,t.date1904));var i=MM(r,e);if(gp(i[1]))return y1(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return OM(i[1],e,t,i[0])}function HA(n,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(sr[t]==null){e<0&&(e=t);continue}if(sr[t]==n){e=t;break}}e<0&&(e=391)}return sr[e]=n,e}function _m(n){for(var e=0;e!=392;++e)n[e]!==void 0&&HA(n[e],e)}function ym(){sr=vM()}var $A=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function BM(n){var e=typeof n=="number"?sr[n]:n;return e=e.replace($A,"(\\d+)"),new RegExp("^"+e+"$")}function VM(n,e,t){var r=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match($A)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":r=p;break;case"d":s=p;break;case"h":a=p;break;case"s":c=p;break;case"m":a>=0?o=p:i=p;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(r>=0?r:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var l=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?u:r==-1&&i==-1&&s==-1?l:u+"T"+l}var UM=function(){var n={};n.version="1.2.0";function e(){for(var N=0,A=new Array(256),C=0;C!=256;++C)N=C,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,A[C]=N;return typeof Int32Array<"u"?new Int32Array(A):A}var t=e();function r(N){var A=0,C=0,B=0,b=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)b[B]=N[B];for(B=0;B!=256;++B)for(C=N[B],A=256+B;A<4096;A+=256)C=b[A]=C>>>8^N[C&255];var S=[];for(B=1;B!=16;++B)S[B-1]=typeof Int32Array<"u"?b.subarray(B*256,B*256+256):b.slice(B*256,B*256+256);return S}var i=r(t),s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],l=i[5],d=i[6],g=i[7],p=i[8],x=i[9],_=i[10],E=i[11],P=i[12],L=i[13],V=i[14];function K(N,A){for(var C=A^-1,B=0,b=N.length;B<b;)C=C>>>8^t[(C^N.charCodeAt(B++))&255];return~C}function ie(N,A){for(var C=A^-1,B=N.length-15,b=0;b<B;)C=V[N[b++]^C&255]^L[N[b++]^C>>8&255]^P[N[b++]^C>>16&255]^E[N[b++]^C>>>24]^_[N[b++]]^x[N[b++]]^p[N[b++]]^g[N[b++]]^d[N[b++]]^l[N[b++]]^u[N[b++]]^c[N[b++]]^o[N[b++]]^a[N[b++]]^s[N[b++]]^t[N[b++]];for(B+=15;b<B;)C=C>>>8^t[(C^N[b++])&255];return~C}function ae(N,A){for(var C=A^-1,B=0,b=N.length,S=0,R=0;B<b;)S=N.charCodeAt(B++),S<128?C=C>>>8^t[(C^S)&255]:S<2048?(C=C>>>8^t[(C^(192|S>>6&31))&255],C=C>>>8^t[(C^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,R=N.charCodeAt(B++)&1023,C=C>>>8^t[(C^(240|S>>8&7))&255],C=C>>>8^t[(C^(128|S>>2&63))&255],C=C>>>8^t[(C^(128|R>>6&15|(S&3)<<4))&255],C=C>>>8^t[(C^(128|R&63))&255]):(C=C>>>8^t[(C^(224|S>>12&15))&255],C=C>>>8^t[(C^(128|S>>6&63))&255],C=C>>>8^t[(C^(128|S&63))&255]);return~C}return n.table=t,n.bstr=K,n.buf=ie,n.str=ae,n}(),Sn=function(){var e={};e.version="1.2.1";function t(j,ee){for(var Y=j.split("/"),X=ee.split("/"),Z=0,te=0,ye=Math.min(Y.length,X.length);Z<ye;++Z){if(te=Y[Z].length-X[Z].length)return te;if(Y[Z]!=X[Z])return Y[Z]<X[Z]?-1:1}return Y.length-X.length}function r(j){if(j.charAt(j.length-1)=="/")return j.slice(0,-1).indexOf("/")===-1?j:r(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(0,ee+1)}function i(j){if(j.charAt(j.length-1)=="/")return i(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(ee+1)}function s(j,ee){typeof ee=="string"&&(ee=new Date(ee));var Y=ee.getHours();Y=Y<<6|ee.getMinutes(),Y=Y<<5|ee.getSeconds()>>>1,j.write_shift(2,Y);var X=ee.getFullYear()-1980;X=X<<4|ee.getMonth()+1,X=X<<5|ee.getDate(),j.write_shift(2,X)}function a(j){var ee=j.read_shift(2)&65535,Y=j.read_shift(2)&65535,X=new Date,Z=Y&31;Y>>>=5;var te=Y&15;Y>>>=4,X.setMilliseconds(0),X.setFullYear(Y+1980),X.setMonth(te-1),X.setDate(Z);var ye=ee&31;ee>>>=5;var Re=ee&63;return ee>>>=6,X.setHours(ee),X.setMinutes(Re),X.setSeconds(ye<<1),X}function o(j){us(j,0);for(var ee={},Y=0;j.l<=j.length-4;){var X=j.read_shift(2),Z=j.read_shift(2),te=j.l+Z,ye={};switch(X){case 21589:Y=j.read_shift(1),Y&1&&(ye.mtime=j.read_shift(4)),Z>5&&(Y&2&&(ye.atime=j.read_shift(4)),Y&4&&(ye.ctime=j.read_shift(4))),ye.mtime&&(ye.mt=new Date(ye.mtime*1e3));break}j.l=te,ee[X]=ye}return ee}var c;function u(){return c||(c={})}function l(j,ee){if(j[0]==80&&j[1]==75)return bn(j,ee);if((j[0]|32)==109&&(j[1]|32)==105)return yi(j,ee);if(j.length<512)throw new Error("CFB file size "+j.length+" < 512");var Y=3,X=512,Z=0,te=0,ye=0,Re=0,we=0,Te=[],Ne=j.slice(0,512);us(Ne,0);var Ke=d(Ne);switch(Y=Ke[0],Y){case 3:X=512;break;case 4:X=4096;break;case 0:if(Ke[1]==0)return bn(j,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+Y)}X!==512&&(Ne=j.slice(0,X),us(Ne,28));var it=j.slice(0,X);g(Ne,Y);var mt=Ne.read_shift(4,"i");if(Y===3&&mt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mt);Ne.l+=4,ye=Ne.read_shift(4,"i"),Ne.l+=4,Ne.chk("00100000","Mini Stream Cutoff Size: "),Re=Ne.read_shift(4,"i"),Z=Ne.read_shift(4,"i"),we=Ne.read_shift(4,"i"),te=Ne.read_shift(4,"i");for(var et=-1,lt=0;lt<109&&(et=Ne.read_shift(4,"i"),!(et<0));++lt)Te[lt]=et;var Lt=p(j,X);E(we,te,Lt,X,Te);var nn=L(Lt,ye,Te,X);nn[ye].name="!Directory",Z>0&&Re!==R&&(nn[Re].name="!MiniFAT"),nn[Te[0]].name="!FAT",nn.fat_addrs=Te,nn.ssz=X;var rn={},An=[],wi=[],Rs=[];V(ye,nn,Lt,An,Z,rn,wi,Re),x(wi,Rs,An),An.shift();var es={FileIndex:wi,FullPaths:Rs};return ee&&ee.raw&&(es.raw={header:it,sectors:Lt}),es}function d(j){if(j[j.l]==80&&j[j.l+1]==75)return[0,0];j.chk(se,"Header Signature: "),j.l+=16;var ee=j.read_shift(2,"u");return[j.read_shift(2,"u"),ee]}function g(j,ee){var Y=9;switch(j.l+=2,Y=j.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+Y);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+Y);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Y)}j.chk("0600","Mini Sector Shift: "),j.chk("000000000000","Reserved: ")}function p(j,ee){for(var Y=Math.ceil(j.length/ee)-1,X=[],Z=1;Z<Y;++Z)X[Z-1]=j.slice(Z*ee,(Z+1)*ee);return X[Y-1]=j.slice(Y*ee),X}function x(j,ee,Y){for(var X=0,Z=0,te=0,ye=0,Re=0,we=Y.length,Te=[],Ne=[];X<we;++X)Te[X]=Ne[X]=X,ee[X]=Y[X];for(;Re<Ne.length;++Re)X=Ne[Re],Z=j[X].L,te=j[X].R,ye=j[X].C,Te[X]===X&&(Z!==-1&&Te[Z]!==Z&&(Te[X]=Te[Z]),te!==-1&&Te[te]!==te&&(Te[X]=Te[te])),ye!==-1&&(Te[ye]=X),Z!==-1&&X!=Te[X]&&(Te[Z]=Te[X],Ne.lastIndexOf(Z)<Re&&Ne.push(Z)),te!==-1&&X!=Te[X]&&(Te[te]=Te[X],Ne.lastIndexOf(te)<Re&&Ne.push(te));for(X=1;X<we;++X)Te[X]===X&&(te!==-1&&Te[te]!==te?Te[X]=Te[te]:Z!==-1&&Te[Z]!==Z&&(Te[X]=Te[Z]));for(X=1;X<we;++X)if(j[X].type!==0){if(Re=X,Re!=Te[Re])do Re=Te[Re],ee[X]=ee[Re]+"/"+ee[X];while(Re!==0&&Te[Re]!==-1&&Re!=Te[Re]);Te[X]=-1}for(ee[0]+="/",X=1;X<we;++X)j[X].type!==2&&(ee[X]+="/")}function _(j,ee,Y){for(var X=j.start,Z=j.size,te=[],ye=X;Y&&Z>0&&ye>=0;)te.push(ee.slice(ye*S,ye*S+S)),Z-=S,ye=Qc(Y,ye*4);return te.length===0?Be(0):ei(te).slice(0,j.size)}function E(j,ee,Y,X,Z){var te=R;if(j===R){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(j!==-1){var ye=Y[j],Re=(X>>>2)-1;if(!ye)return;for(var we=0;we<Re&&(te=Qc(ye,we*4))!==R;++we)Z.push(te);E(Qc(ye,X-4),ee-1,Y,X,Z)}}function P(j,ee,Y,X,Z){var te=[],ye=[];Z||(Z=[]);var Re=X-1,we=0,Te=0;for(we=ee;we>=0;){Z[we]=!0,te[te.length]=we,ye.push(j[we]);var Ne=Y[Math.floor(we*4/X)];if(Te=we*4&Re,X<4+Te)throw new Error("FAT boundary crossed: "+we+" 4 "+X);if(!j[Ne])break;we=Qc(j[Ne],Te)}return{nodes:te,data:e5([ye])}}function L(j,ee,Y,X){var Z=j.length,te=[],ye=[],Re=[],we=[],Te=X-1,Ne=0,Ke=0,it=0,mt=0;for(Ne=0;Ne<Z;++Ne)if(Re=[],it=Ne+ee,it>=Z&&(it-=Z),!ye[it]){we=[];var et=[];for(Ke=it;Ke>=0;){et[Ke]=!0,ye[Ke]=!0,Re[Re.length]=Ke,we.push(j[Ke]);var lt=Y[Math.floor(Ke*4/X)];if(mt=Ke*4&Te,X<4+mt)throw new Error("FAT boundary crossed: "+Ke+" 4 "+X);if(!j[lt]||(Ke=Qc(j[lt],mt),et[Ke]))break}te[it]={nodes:Re,data:e5([we])}}return te}function V(j,ee,Y,X,Z,te,ye,Re){for(var we=0,Te=X.length?2:0,Ne=ee[j].data,Ke=0,it=0,mt;Ke<Ne.length;Ke+=128){var et=Ne.slice(Ke,Ke+128);us(et,64),it=et.read_shift(2),mt=Mv(et,0,it-Te),X.push(mt);var lt={name:mt,type:et.read_shift(1),color:et.read_shift(1),L:et.read_shift(4,"i"),R:et.read_shift(4,"i"),C:et.read_shift(4,"i"),clsid:et.read_shift(16),state:et.read_shift(4,"i"),start:0,size:0},Lt=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);Lt!==0&&(lt.ct=K(et,et.l-8));var nn=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);nn!==0&&(lt.mt=K(et,et.l-8)),lt.start=et.read_shift(4,"i"),lt.size=et.read_shift(4,"i"),lt.size<0&&lt.start<0&&(lt.size=lt.type=0,lt.start=R,lt.name=""),lt.type===5?(we=lt.start,Z>0&&we!==R&&(ee[we].name="!StreamData")):lt.size>=4096?(lt.storage="fat",ee[lt.start]===void 0&&(ee[lt.start]=P(Y,lt.start,ee.fat_addrs,ee.ssz)),ee[lt.start].name=lt.name,lt.content=ee[lt.start].data.slice(0,lt.size)):(lt.storage="minifat",lt.size<0?lt.size=0:we!==R&&lt.start!==R&&ee[we]&&(lt.content=_(lt,ee[we].data,(ee[Re]||{}).data))),lt.content&&us(lt.content,0),te[mt]=lt,ye.push(lt)}}function K(j,ee){return new Date((fs(j,ee+4)/1e7*Math.pow(2,32)+fs(j,ee)/1e7-11644473600)*1e3)}function ie(j,ee){return u(),l(c.readFileSync(j),ee)}function ae(j,ee){var Y=ee&&ee.type;switch(Y||hn&&Buffer.isBuffer(j)&&(Y="buffer"),Y||"base64"){case"file":return ie(j,ee);case"base64":return l(Gs(ao(j)),ee);case"binary":return l(Gs(j),ee)}return l(j,ee)}function N(j,ee){var Y=ee||{},X=Y.root||"Root Entry";if(j.FullPaths||(j.FullPaths=[]),j.FileIndex||(j.FileIndex=[]),j.FullPaths.length!==j.FileIndex.length)throw new Error("inconsistent CFB structure");j.FullPaths.length===0&&(j.FullPaths[0]=X+"/",j.FileIndex[0]={name:X,type:5}),Y.CLSID&&(j.FileIndex[0].clsid=Y.CLSID),A(j)}function A(j){var ee="Sh33tJ5";if(!Sn.find(j,"/"+ee)){var Y=Be(4);Y[0]=55,Y[1]=Y[3]=50,Y[2]=54,j.FileIndex.push({name:ee,type:2,content:Y,size:4,L:69,R:69,C:69}),j.FullPaths.push(j.FullPaths[0]+ee),C(j)}}function C(j,ee){N(j);for(var Y=!1,X=!1,Z=j.FullPaths.length-1;Z>=0;--Z){var te=j.FileIndex[Z];switch(te.type){case 0:X?Y=!0:(j.FileIndex.pop(),j.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(te.R*te.L*te.C)&&(Y=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(Y=!0);break;default:Y=!0;break}}if(!(!Y&&!ee)){var ye=new Date(1987,1,19),Re=0,we=Object.create?Object.create(null):{},Te=[];for(Z=0;Z<j.FullPaths.length;++Z)we[j.FullPaths[Z]]=!0,j.FileIndex[Z].type!==0&&Te.push([j.FullPaths[Z],j.FileIndex[Z]]);for(Z=0;Z<Te.length;++Z){var Ne=r(Te[Z][0]);X=we[Ne],X||(Te.push([Ne,{name:i(Ne).replace("/",""),type:1,clsid:Ee,ct:ye,mt:ye,content:null}]),we[Ne]=!0)}for(Te.sort(function(mt,et){return t(mt[0],et[0])}),j.FullPaths=[],j.FileIndex=[],Z=0;Z<Te.length;++Z)j.FullPaths[Z]=Te[Z][0],j.FileIndex[Z]=Te[Z][1];for(Z=0;Z<Te.length;++Z){var Ke=j.FileIndex[Z],it=j.FullPaths[Z];if(Ke.name=i(it).replace("/",""),Ke.L=Ke.R=Ke.C=-(Ke.color=1),Ke.size=Ke.content?Ke.content.length:0,Ke.start=0,Ke.clsid=Ke.clsid||Ee,Z===0)Ke.C=Te.length>1?1:-1,Ke.size=0,Ke.type=5;else if(it.slice(-1)=="/"){for(Re=Z+1;Re<Te.length&&r(j.FullPaths[Re])!=it;++Re);for(Ke.C=Re>=Te.length?-1:Re,Re=Z+1;Re<Te.length&&r(j.FullPaths[Re])!=r(it);++Re);Ke.R=Re>=Te.length?-1:Re,Ke.type=1}else r(j.FullPaths[Z+1]||"")==r(it)&&(Ke.R=Z+1),Ke.type=2}}}function B(j,ee){var Y=ee||{};if(Y.fileType=="mad")return wt(j,Y);switch(C(j),Y.fileType){case"zip":return _i(j,Y)}var X=function(mt){for(var et=0,lt=0,Lt=0;Lt<mt.FileIndex.length;++Lt){var nn=mt.FileIndex[Lt];if(nn.content){var rn=nn.content.length;rn>0&&(rn<4096?et+=rn+63>>6:lt+=rn+511>>9)}}for(var An=mt.FullPaths.length+3>>2,wi=et+7>>3,Rs=et+127>>7,es=wi+lt+An+Rs,Oi=es+127>>7,ts=Oi<=109?0:Math.ceil((Oi-109)/127);es+Oi+ts+127>>7>Oi;)ts=++Oi<=109?0:Math.ceil((Oi-109)/127);var Hr=[1,ts,Oi,Rs,An,lt,et,0];return mt.FileIndex[0].size=et<<6,Hr[7]=(mt.FileIndex[0].start=Hr[0]+Hr[1]+Hr[2]+Hr[3]+Hr[4]+Hr[5])+(Hr[6]+7>>3),Hr}(j),Z=Be(X[7]<<9),te=0,ye=0;{for(te=0;te<8;++te)Z.write_shift(1,me[te]);for(te=0;te<8;++te)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),te=0;te<3;++te)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:R),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:R),Z.write_shift(4,X[1]),te=0;te<109;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1)}if(X[1])for(ye=0;ye<X[1];++ye){for(;te<236+ye*127;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1);Z.write_shift(-4,ye===X[1]-1?R:ye+1)}var Re=function(mt){for(ye+=mt;te<ye-1;++te)Z.write_shift(-4,te+1);mt&&(++te,Z.write_shift(-4,R))};for(ye=te=0,ye+=X[1];te<ye;++te)Z.write_shift(-4,Pe.DIFSECT);for(ye+=X[2];te<ye;++te)Z.write_shift(-4,Pe.FATSECT);Re(X[3]),Re(X[4]);for(var we=0,Te=0,Ne=j.FileIndex[0];we<j.FileIndex.length;++we)Ne=j.FileIndex[we],Ne.content&&(Te=Ne.content.length,!(Te<4096)&&(Ne.start=ye,Re(Te+511>>9)));for(Re(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,Pe.ENDOFCHAIN);for(ye=te=0,we=0;we<j.FileIndex.length;++we)Ne=j.FileIndex[we],Ne.content&&(Te=Ne.content.length,!(!Te||Te>=4096)&&(Ne.start=ye,Re(Te+63>>6)));for(;Z.l&511;)Z.write_shift(-4,Pe.ENDOFCHAIN);for(te=0;te<X[4]<<2;++te){var Ke=j.FullPaths[te];if(!Ke||Ke.length===0){for(we=0;we<17;++we)Z.write_shift(4,0);for(we=0;we<3;++we)Z.write_shift(4,-1);for(we=0;we<12;++we)Z.write_shift(4,0);continue}Ne=j.FileIndex[te],te===0&&(Ne.start=Ne.size?Ne.start-1:R);var it=te===0&&Y.root||Ne.name;if(Te=2*(it.length+1),Z.write_shift(64,it,"utf16le"),Z.write_shift(2,Te),Z.write_shift(1,Ne.type),Z.write_shift(1,Ne.color),Z.write_shift(-4,Ne.L),Z.write_shift(-4,Ne.R),Z.write_shift(-4,Ne.C),Ne.clsid)Z.write_shift(16,Ne.clsid,"hex");else for(we=0;we<4;++we)Z.write_shift(4,0);Z.write_shift(4,Ne.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,Ne.start),Z.write_shift(4,Ne.size),Z.write_shift(4,0)}for(te=1;te<j.FileIndex.length;++te)if(Ne=j.FileIndex[te],Ne.size>=4096)if(Z.l=Ne.start+1<<9,hn&&Buffer.isBuffer(Ne.content))Ne.content.copy(Z,Z.l,0,Ne.size),Z.l+=Ne.size+511&-512;else{for(we=0;we<Ne.size;++we)Z.write_shift(1,Ne.content[we]);for(;we&511;++we)Z.write_shift(1,0)}for(te=1;te<j.FileIndex.length;++te)if(Ne=j.FileIndex[te],Ne.size>0&&Ne.size<4096)if(hn&&Buffer.isBuffer(Ne.content))Ne.content.copy(Z,Z.l,0,Ne.size),Z.l+=Ne.size+63&-64;else{for(we=0;we<Ne.size;++we)Z.write_shift(1,Ne.content[we]);for(;we&63;++we)Z.write_shift(1,0)}if(hn)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function b(j,ee){var Y=j.FullPaths.map(function(we){return we.toUpperCase()}),X=Y.map(function(we){var Te=we.split("/");return Te[Te.length-(we.slice(-1)=="/"?2:1)]}),Z=!1;ee.charCodeAt(0)===47?(Z=!0,ee=Y[0].slice(0,-1)+ee):Z=ee.indexOf("/")!==-1;var te=ee.toUpperCase(),ye=Z===!0?Y.indexOf(te):X.indexOf(te);if(ye!==-1)return j.FileIndex[ye];var Re=!te.match(p0);for(te=te.replace(xf,""),Re&&(te=te.replace(p0,"!")),ye=0;ye<Y.length;++ye)if((Re?Y[ye].replace(p0,"!"):Y[ye]).replace(xf,"")==te||(Re?X[ye].replace(p0,"!"):X[ye]).replace(xf,"")==te)return j.FileIndex[ye];return null}var S=64,R=-2,se="d0cf11e0a1b11ae1",me=[208,207,17,224,161,177,26,225],Ee="00000000000000000000000000000000",Pe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:se,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _e(j,ee,Y){u();var X=B(j,Y);c.writeFileSync(ee,X)}function ke(j){for(var ee=new Array(j.length),Y=0;Y<j.length;++Y)ee[Y]=String.fromCharCode(j[Y]);return ee.join("")}function Oe(j,ee){var Y=B(j,ee);switch(ee&&ee.type||"buffer"){case"file":return u(),c.writeFileSync(ee.filename,Y),Y;case"binary":return typeof Y=="string"?Y:ke(Y);case"base64":return Zf(typeof Y=="string"?Y:ke(Y));case"buffer":if(hn)return Buffer.isBuffer(Y)?Y:po(Y);case"array":return typeof Y=="string"?Gs(Y):Y}return Y}var rt;function T(j){try{var ee=j.InflateRaw,Y=new ee;if(Y._processChunk(new Uint8Array([3,0]),Y._finishFlushFlag),Y.bytesRead)rt=j;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function D(j,ee){if(!rt)return Kt(j,ee);var Y=rt.InflateRaw,X=new Y,Z=X._processChunk(j.slice(j.l),X._finishFlushFlag);return j.l+=X.bytesRead,Z}function M(j){return rt?rt.deflateRawSync(j):qt(j)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(j){var ee=(j<<1|j<<11)&139536|(j<<5|j<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var ue=typeof Uint8Array<"u",xe=ue?new Uint8Array(256):[],Ve=0;Ve<256;++Ve)xe[Ve]=le(Ve);function ze(j,ee){var Y=xe[j&255];return ee<=8?Y>>>8-ee:(Y=Y<<8|xe[j>>8&255],ee<=16?Y>>>16-ee:(Y=Y<<8|xe[j>>16&255],Y>>>24-ee))}function Ze(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=6?0:j[X+1]<<8))>>>Y&3}function at(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=5?0:j[X+1]<<8))>>>Y&7}function Le(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=4?0:j[X+1]<<8))>>>Y&15}function re(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=3?0:j[X+1]<<8))>>>Y&31}function We(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=1?0:j[X+1]<<8))>>>Y&127}function _t(j,ee,Y){var X=ee&7,Z=ee>>>3,te=(1<<Y)-1,ye=j[Z]>>>X;return Y<8-X||(ye|=j[Z+1]<<8-X,Y<16-X)||(ye|=j[Z+2]<<16-X,Y<24-X)||(ye|=j[Z+3]<<24-X),ye&te}function $e(j,ee,Y){var X=ee&7,Z=ee>>>3;return X<=5?j[Z]|=(Y&7)<<X:(j[Z]|=Y<<X&255,j[Z+1]=(Y&7)>>8-X),ee+3}function nt(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y=(Y&1)<<X,j[Z]|=Y,ee+1}function ct(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y,ee+8}function ut(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y&255,j[Z+2]=Y>>>8,ee+16}function Tt(j,ee){var Y=j.length,X=2*Y>ee?2*Y:ee+5,Z=0;if(Y>=ee)return j;if(hn){var te=Vw(X);if(j.copy)j.copy(te);else for(;Z<j.length;++Z)te[Z]=j[Z];return te}else if(ue){var ye=new Uint8Array(X);if(ye.set)ye.set(j);else for(;Z<Y;++Z)ye[Z]=j[Z];return ye}return j.length=X,j}function At(j){for(var ee=new Array(j),Y=0;Y<j;++Y)ee[Y]=0;return ee}function Ft(j,ee,Y){var X=1,Z=0,te=0,ye=0,Re=0,we=j.length,Te=ue?new Uint16Array(32):At(32);for(te=0;te<32;++te)Te[te]=0;for(te=we;te<Y;++te)j[te]=0;we=j.length;var Ne=ue?new Uint16Array(we):At(we);for(te=0;te<we;++te)Te[Z=j[te]]++,X<Z&&(X=Z),Ne[te]=0;for(Te[0]=0,te=1;te<=X;++te)Te[te+16]=Re=Re+Te[te-1]<<1;for(te=0;te<we;++te)Re=j[te],Re!=0&&(Ne[te]=Te[Re+16]++);var Ke=0;for(te=0;te<we;++te)if(Ke=j[te],Ke!=0)for(Re=ze(Ne[te],X)>>X-Ke,ye=(1<<X+4-Ke)-1;ye>=0;--ye)ee[Re|ye<<Ke]=Ke&15|te<<4;return X}var It=ue?new Uint16Array(512):At(512),kt=ue?new Uint16Array(32):At(32);if(!ue){for(var Ht=0;Ht<512;++Ht)It[Ht]=0;for(Ht=0;Ht<32;++Ht)kt[Ht]=0}(function(){for(var j=[],ee=0;ee<32;ee++)j.push(5);Ft(j,kt,32);var Y=[];for(ee=0;ee<=143;ee++)Y.push(8);for(;ee<=255;ee++)Y.push(9);for(;ee<=279;ee++)Y.push(7);for(;ee<=287;ee++)Y.push(8);Ft(Y,It,288)})();var Ct=function(){for(var ee=ue?new Uint8Array(32768):[],Y=0,X=0;Y<oe.length-1;++Y)for(;X<oe[Y+1];++X)ee[X]=Y;for(;X<32768;++X)ee[X]=29;var Z=ue?new Uint8Array(259):[];for(Y=0,X=0;Y<J.length-1;++Y)for(;X<J[Y+1];++X)Z[X]=Y;function te(Re,we){for(var Te=0;Te<Re.length;){var Ne=Math.min(65535,Re.length-Te),Ke=Te+Ne==Re.length;for(we.write_shift(1,+Ke),we.write_shift(2,Ne),we.write_shift(2,~Ne&65535);Ne-- >0;)we[we.l++]=Re[Te++]}return we.l}function ye(Re,we){for(var Te=0,Ne=0,Ke=ue?new Uint16Array(32768):[];Ne<Re.length;){var it=Math.min(65535,Re.length-Ne);if(it<10){for(Te=$e(we,Te,+(Ne+it==Re.length)),Te&7&&(Te+=8-(Te&7)),we.l=Te/8|0,we.write_shift(2,it),we.write_shift(2,~it&65535);it-- >0;)we[we.l++]=Re[Ne++];Te=we.l*8;continue}Te=$e(we,Te,+(Ne+it==Re.length)+2);for(var mt=0;it-- >0;){var et=Re[Ne];mt=(mt<<5^et)&32767;var lt=-1,Lt=0;if((lt=Ke[mt])&&(lt|=Ne&-32768,lt>Ne&&(lt-=32768),lt<Ne))for(;Re[lt+Lt]==Re[Ne+Lt]&&Lt<250;)++Lt;if(Lt>2){et=Z[Lt],et<=22?Te=ct(we,Te,xe[et+1]>>1)-1:(ct(we,Te,3),Te+=5,ct(we,Te,xe[et-23]>>5),Te+=3);var nn=et<8?0:et-4>>2;nn>0&&(ut(we,Te,Lt-J[et]),Te+=nn),et=ee[Ne-lt],Te=ct(we,Te,xe[et]>>3),Te-=3;var rn=et<4?0:et-2>>1;rn>0&&(ut(we,Te,Ne-lt-oe[et]),Te+=rn);for(var An=0;An<Lt;++An)Ke[mt]=Ne&32767,mt=(mt<<5^Re[Ne])&32767,++Ne;it-=Lt-1}else et<=143?et=et+48:Te=nt(we,Te,1),Te=ct(we,Te,xe[et]),Ke[mt]=Ne&32767,++Ne}Te=ct(we,Te,0)-1}return we.l=(Te+7)/8|0,we.l}return function(we,Te){return we.length<8?te(we,Te):ye(we,Te)}}();function qt(j){var ee=Be(50+Math.floor(j.length*1.1)),Y=Ct(j,ee);return ee.slice(0,Y)}var pt=ue?new Uint16Array(32768):At(32768),Bn=ue?new Uint16Array(32768):At(32768),Gt=ue?new Uint16Array(128):At(128),Wr=1,tn=1;function Tn(j,ee){var Y=re(j,ee)+257;ee+=5;var X=re(j,ee)+1;ee+=5;var Z=Le(j,ee)+4;ee+=4;for(var te=0,ye=ue?new Uint8Array(19):At(19),Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],we=1,Te=ue?new Uint8Array(8):At(8),Ne=ue?new Uint8Array(8):At(8),Ke=ye.length,it=0;it<Z;++it)ye[U[it]]=te=at(j,ee),we<te&&(we=te),Te[te]++,ee+=3;var mt=0;for(Te[0]=0,it=1;it<=we;++it)Ne[it]=mt=mt+Te[it-1]<<1;for(it=0;it<Ke;++it)(mt=ye[it])!=0&&(Re[it]=Ne[mt]++);var et=0;for(it=0;it<Ke;++it)if(et=ye[it],et!=0){mt=xe[Re[it]]>>8-et;for(var lt=(1<<7-et)-1;lt>=0;--lt)Gt[mt|lt<<et]=et&7|it<<3}var Lt=[];for(we=1;Lt.length<Y+X;)switch(mt=Gt[We(j,ee)],ee+=mt&7,mt>>>=3){case 16:for(te=3+Ze(j,ee),ee+=2,mt=Lt[Lt.length-1];te-- >0;)Lt.push(mt);break;case 17:for(te=3+at(j,ee),ee+=3;te-- >0;)Lt.push(0);break;case 18:for(te=11+We(j,ee),ee+=7;te-- >0;)Lt.push(0);break;default:Lt.push(mt),we<mt&&(we=mt);break}var nn=Lt.slice(0,Y),rn=Lt.slice(Y);for(it=Y;it<286;++it)nn[it]=0;for(it=X;it<30;++it)rn[it]=0;return Wr=Ft(nn,pt,286),tn=Ft(rn,Bn,30),ee}function Di(j,ee){if(j[0]==3&&!(j[1]&3))return[Su(ee),2];for(var Y=0,X=0,Z=Vw(ee||1<<18),te=0,ye=Z.length>>>0,Re=0,we=0;!(X&1);){if(X=at(j,Y),Y+=3,X>>>1)X>>1==1?(Re=9,we=5):(Y=Tn(j,Y),Re=Wr,we=tn);else{Y&7&&(Y+=8-(Y&7));var Te=j[Y>>>3]|j[(Y>>>3)+1]<<8;if(Y+=32,Te>0)for(!ee&&ye<te+Te&&(Z=Tt(Z,te+Te),ye=Z.length);Te-- >0;)Z[te++]=j[Y>>>3],Y+=8;continue}for(;;){!ee&&ye<te+32767&&(Z=Tt(Z,te+32767),ye=Z.length);var Ne=_t(j,Y,Re),Ke=X>>>1==1?It[Ne]:pt[Ne];if(Y+=Ke&15,Ke>>>=4,!(Ke>>>8&255))Z[te++]=Ke;else{if(Ke==256)break;Ke-=257;var it=Ke<8?0:Ke-4>>2;it>5&&(it=0);var mt=te+J[Ke];it>0&&(mt+=_t(j,Y,it),Y+=it),Ne=_t(j,Y,we),Ke=X>>>1==1?kt[Ne]:Bn[Ne],Y+=Ke&15,Ke>>>=4;var et=Ke<4?0:Ke-2>>1,lt=oe[Ke];for(et>0&&(lt+=_t(j,Y,et),Y+=et),!ee&&ye<mt&&(Z=Tt(Z,mt+100),ye=Z.length);te<mt;)Z[te]=Z[te-lt],++te}}}return ee?[Z,Y+7>>>3]:[Z.slice(0,te),Y+7>>>3]}function Kt(j,ee){var Y=j.slice(j.l||0),X=Di(Y,ee);return j.l+=X[1],X[0]}function Zi(j,ee){if(j)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function bn(j,ee){var Y=j;us(Y,0);var X=[],Z=[],te={FileIndex:X,FullPaths:Z};N(te,{root:ee.root});for(var ye=Y.length-4;(Y[ye]!=80||Y[ye+1]!=75||Y[ye+2]!=5||Y[ye+3]!=6)&&ye>=0;)--ye;Y.l=ye+4,Y.l+=4;var Re=Y.read_shift(2);Y.l+=6;var we=Y.read_shift(4);for(Y.l=we,ye=0;ye<Re;++ye){Y.l+=20;var Te=Y.read_shift(4),Ne=Y.read_shift(4),Ke=Y.read_shift(2),it=Y.read_shift(2),mt=Y.read_shift(2);Y.l+=8;var et=Y.read_shift(4),lt=o(Y.slice(Y.l+Ke,Y.l+Ke+it));Y.l+=Ke+it+mt;var Lt=Y.l;Y.l=et+4,Ir(Y,Te,Ne,te,lt),Y.l=Lt}return te}function Ir(j,ee,Y,X,Z){j.l+=2;var te=j.read_shift(2),ye=j.read_shift(2),Re=a(j);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var we=j.read_shift(4),Te=j.read_shift(4),Ne=j.read_shift(4),Ke=j.read_shift(2),it=j.read_shift(2),mt="",et=0;et<Ke;++et)mt+=String.fromCharCode(j[j.l++]);if(it){var lt=o(j.slice(j.l,j.l+it));(lt[21589]||{}).mt&&(Re=lt[21589].mt),((Z||{})[21589]||{}).mt&&(Re=Z[21589].mt)}j.l+=it;var Lt=j.slice(j.l,j.l+Te);switch(ye){case 8:Lt=D(j,Ne);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ye)}var nn=!1;te&8&&(we=j.read_shift(4),we==134695760&&(we=j.read_shift(4),nn=!0),Te=j.read_shift(4),Ne=j.read_shift(4)),Te!=ee&&Zi(nn,"Bad compressed size: "+ee+" != "+Te),Ne!=Y&&Zi(nn,"Bad uncompressed size: "+Y+" != "+Ne),_r(X,mt,Lt,{unsafe:!0,mt:Re})}function _i(j,ee){var Y=ee||{},X=[],Z=[],te=Be(1),ye=Y.compression?8:0,Re=0,we=0,Te=0,Ne=0,Ke=0,it=j.FullPaths[0],mt=it,et=j.FileIndex[0],lt=[],Lt=0;for(we=1;we<j.FullPaths.length;++we)if(mt=j.FullPaths[we].slice(it.length),et=j.FileIndex[we],!(!et.size||!et.content||mt=="Sh33tJ5")){var nn=Ne,rn=Be(mt.length);for(Te=0;Te<mt.length;++Te)rn.write_shift(1,mt.charCodeAt(Te)&127);rn=rn.slice(0,rn.l),lt[Ke]=UM.buf(et.content,0);var An=et.content;ye==8&&(An=M(An)),te=Be(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,Re),te.write_shift(2,ye),et.mt?s(te,et.mt):te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,An.length),te.write_shift(4,et.content.length),te.write_shift(2,rn.length),te.write_shift(2,0),Ne+=te.length,X.push(te),Ne+=rn.length,X.push(rn),Ne+=An.length,X.push(An),te=Be(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,Re),te.write_shift(2,ye),te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,An.length),te.write_shift(4,et.content.length),te.write_shift(2,rn.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,nn),Lt+=te.l,Z.push(te),Lt+=rn.length,Z.push(rn),++Ke}return te=Be(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,Ke),te.write_shift(2,Ke),te.write_shift(4,Lt),te.write_shift(4,Ne),te.write_shift(2,0),ei([ei(X),ei(Z),te])}var un={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Nt(j,ee){if(j.ctype)return j.ctype;var Y=j.name||"",X=Y.match(/\.([^\.]+)$/);return X&&un[X[1]]||ee&&(X=(Y=ee).match(/[\.\\]([^\.\\])+$/),X&&un[X[1]])?un[X[1]]:"application/octet-stream"}function en(j){for(var ee=Zf(j),Y=[],X=0;X<ee.length;X+=76)Y.push(ee.slice(X,X+76));return Y.join(`\r
`)+`\r
`}function Fi(j){var ee=j.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Te){var Ne=Te.charCodeAt(0).toString(16).toUpperCase();return"="+(Ne.length==1?"0"+Ne:Ne)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Y=[],X=ee.split(`\r
`),Z=0;Z<X.length;++Z){var te=X[Z];if(te.length==0){Y.push("");continue}for(var ye=0;ye<te.length;){var Re=76,we=te.slice(ye,ye+Re);we.charAt(Re-1)=="="?Re--:we.charAt(Re-2)=="="?Re-=2:we.charAt(Re-3)=="="&&(Re-=3),we=te.slice(ye,ye+Re),ye+=Re,ye<te.length&&(we+="="),Y.push(we)}}return Y.join(`\r
`)}function Qn(j){for(var ee=[],Y=0;Y<j.length;++Y){for(var X=j[Y];Y<=j.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+j[++Y];ee.push(X)}for(var Z=0;Z<ee.length;++Z)ee[Z]=ee[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return Gs(ee.join(`\r
`))}function Lr(j,ee,Y){for(var X="",Z="",te="",ye,Re=0;Re<10;++Re){var we=ee[Re];if(!we||we.match(/^\s*$/))break;var Te=we.match(/^(.*?):\s*([^\s].*)$/);if(Te)switch(Te[1].toLowerCase()){case"content-location":X=Te[2].trim();break;case"content-type":te=Te[2].trim();break;case"content-transfer-encoding":Z=Te[2].trim();break}}switch(++Re,Z.toLowerCase()){case"base64":ye=Gs(ao(ee.slice(Re).join("")));break;case"quoted-printable":ye=Qn(ee.slice(Re));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var Ne=_r(j,X.slice(Y.length),ye,{unsafe:!0});te&&(Ne.ctype=te)}function yi(j,ee){if(ke(j.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Y=ee&&ee.root||"",X=(hn&&Buffer.isBuffer(j)?j.toString("binary"):ke(j)).split(`\r
`),Z=0,te="";for(Z=0;Z<X.length;++Z)if(te=X[Z],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),Y||(Y=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,Y.length)!=Y))for(;Y.length>0&&(Y=Y.slice(0,Y.length-1),Y=Y.slice(0,Y.lastIndexOf("/")+1),te.slice(0,Y.length)!=Y););var ye=(X[1]||"").match(/boundary="(.*?)"/);if(!ye)throw new Error("MAD cannot find boundary");var Re="--"+(ye[1]||""),we=[],Te=[],Ne={FileIndex:we,FullPaths:Te};N(Ne);var Ke,it=0;for(Z=0;Z<X.length;++Z){var mt=X[Z];mt!==Re&&mt!==Re+"--"||(it++&&Lr(Ne,X.slice(Ke,Z),Y),Ke=Z)}return Ne}function wt(j,ee){var Y=ee||{},X=Y.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],te=j.FullPaths[0],ye=te,Re=j.FileIndex[0],we=1;we<j.FullPaths.length;++we)if(ye=j.FullPaths[we].slice(te.length),Re=j.FileIndex[we],!(!Re.size||!Re.content||ye=="Sh33tJ5")){ye=ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Lt){return"_x"+Lt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Lt){return"_u"+Lt.charCodeAt(0).toString(16)+"_"});for(var Te=Re.content,Ne=hn&&Buffer.isBuffer(Te)?Te.toString("binary"):ke(Te),Ke=0,it=Math.min(1024,Ne.length),mt=0,et=0;et<=it;++et)(mt=Ne.charCodeAt(et))>=32&&mt<128&&++Ke;var lt=Ke>=it*4/5;Z.push(X),Z.push("Content-Location: "+(Y.root||"file:///C:/SheetJS/")+ye),Z.push("Content-Transfer-Encoding: "+(lt?"quoted-printable":"base64")),Z.push("Content-Type: "+Nt(Re,ye)),Z.push(""),Z.push(lt?Fi(Ne):en(Ne))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function oi(j){var ee={};return N(ee,j),ee}function _r(j,ee,Y,X){var Z=X&&X.unsafe;Z||N(j);var te=!Z&&Sn.find(j,ee);if(!te){var ye=j.FullPaths[0];ee.slice(0,ye.length)==ye?ye=ee:(ye.slice(-1)!="/"&&(ye+="/"),ye=(ye+ee).replace("//","/")),te={name:i(ee),type:2},j.FileIndex.push(te),j.FullPaths.push(ye),Z||Sn.utils.cfb_gc(j)}return te.content=Y,te.size=Y?Y.length:0,X&&(X.CLSID&&(te.clsid=X.CLSID),X.mt&&(te.mt=X.mt),X.ct&&(te.ct=X.ct)),te}function Zn(j,ee){N(j);var Y=Sn.find(j,ee);if(Y){for(var X=0;X<j.FileIndex.length;++X)if(j.FileIndex[X]==Y)return j.FileIndex.splice(X,1),j.FullPaths.splice(X,1),!0}return!1}function Yn(j,ee,Y){N(j);var X=Sn.find(j,ee);if(X){for(var Z=0;Z<j.FileIndex.length;++Z)if(j.FileIndex[Z]==X)return j.FileIndex[Z].name=i(Y),j.FullPaths[Z]=Y,!0}return!1}function Wn(j){C(j,!0)}return e.find=b,e.read=ae,e.parse=l,e.write=Oe,e.writeFile=_e,e.utils={cfb_new:oi,cfb_add:_r,cfb_del:Zn,cfb_mov:Yn,cfb_gc:Wn,ReadShift:Tf,CheckField:lI,prep_blob:us,bconcat:ei,use_zlib:T,_deflateRaw:qt,_inflateRaw:Kt,consts:Pe},e}();function jM(n){return typeof n=="string"?vm(n):Array.isArray(n)?dM(n):n}function kd(n,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=vm(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(n,e)}var r=t=="utf8"?td(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(r,n);if(typeof Blob<"u"){var i=new Blob([jM(r)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,n);if(typeof saveAs<"u")return saveAs(i,n);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:n,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=n,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(n);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Nd(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+n)}function ai(n){for(var e=Object.keys(n),t=[],r=0;r<e.length;++r)Object.prototype.hasOwnProperty.call(n,e[r])&&t.push(e[r]);return t}function Gw(n,e){for(var t=[],r=ai(n),i=0;i!==r.length;++i)t[n[r[i]][e]]==null&&(t[n[r[i]][e]]=r[i]);return t}function Lv(n){for(var e=[],t=ai(n),r=0;r!==t.length;++r)e[n[t[r]]]=t[r];return e}function wm(n){for(var e=[],t=ai(n),r=0;r!==t.length;++r)e[n[t[r]]]=parseInt(t[r],10);return e}function qM(n){for(var e=[],t=ai(n),r=0;r!==t.length;++r)e[n[t[r]]]==null&&(e[n[t[r]]]=[]),e[n[t[r]]].push(t[r]);return e}var _p=new Date(1899,11,30,0,0,0);function Xi(n,e){var t=n.getTime(),r=_p.getTime()+(n.getTimezoneOffset()-_p.getTimezoneOffset())*6e4;return(t-r)/(24*60*60*1e3)}var GA=new Date,zM=_p.getTime()+(GA.getTimezoneOffset()-_p.getTimezoneOffset())*6e4,Kw=GA.getTimezoneOffset();function KA(n){var e=new Date;return e.setTime(n*24*60*60*1e3+zM),e.getTimezoneOffset()!==Kw&&e.setTime(e.getTime()+(e.getTimezoneOffset()-Kw)*6e4),e}var Yw=new Date("2017-02-19T19:06:09.000Z"),YA=isNaN(Yw.getFullYear())?new Date("2/19/17"):Yw,WM=YA.getFullYear()==2017;function Ri(n,e){var t=new Date(n);if(WM)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(n instanceof Date)return n;if(YA.getFullYear()==1917&&!isNaN(t.getFullYear())){var r=t.getFullYear();return n.indexOf(""+r)>-1||t.setFullYear(t.getFullYear()+100),t}var i=n.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return n.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function xm(n,e){if(hn&&Buffer.isBuffer(n))return n.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(n)&&(n=new Uint8Array(n)),new TextDecoder("latin1").decode(n).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var r=[],i=0;i!=n.length;++i)r.push(String.fromCharCode(n[i]));return r.join("")}function Ji(n){if(typeof JSON<"u"&&!Array.isArray(n))return JSON.parse(JSON.stringify(n));if(typeof n!="object"||n==null)return n;if(n instanceof Date)return new Date(n.getTime());var e={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=Ji(n[t]));return e}function rr(n,e){for(var t="";t.length<e;)t+=n;return t}function eo(n){var e=Number(n);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(n))return e;var t=1,r=n.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(r))||(r=r.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(r)))?e/t:e}var HM=["january","february","march","april","may","june","july","august","september","october","november","december"];function ed(n){var e=new Date(n),t=new Date(NaN),r=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=n.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&HM.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return r<0||r>8099?t:(i>0||s>1)&&r!=101?e:n.match(/[^-0-9:,\/\\]/)?t:e}function $t(n,e,t){if(n.FullPaths){if(typeof t=="string"){var r;return hn?r=po(t):r=pM(t),Sn.utils.cfb_add(n,e,r)}Sn.utils.cfb_add(n,e,t)}else n.file(e,t)}function Dv(){return Sn.utils.cfb_new()}var Ar=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,$M={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Fv=Lv($M),Ov=/[&<>'"]/g,GM=/[\u0000-\u0008\u000b-\u001f]/g;function wn(n){var e=n+"";return e.replace(Ov,function(t){return Fv[t]}).replace(GM,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function Xw(n){return wn(n).replace(/ /g,"_x0020_")}var XA=/[\u0000-\u001f]/g;function KM(n){var e=n+"";return e.replace(Ov,function(t){return Fv[t]}).replace(/\n/g,"<br/>").replace(XA,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function YM(n){var e=n+"";return e.replace(Ov,function(t){return Fv[t]}).replace(XA,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function XM(n){return n.replace(/(\r\n|[\r\n])/g,"&#10;")}function JM(n){switch(n){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function _g(n){for(var e="",t=0,r=0,i=0,s=0,a=0,o=0;t<n.length;){if(r=n.charCodeAt(t++),r<128){e+=String.fromCharCode(r);continue}if(i=n.charCodeAt(t++),r>191&&r<224){a=(r&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=n.charCodeAt(t++),r<240){e+=String.fromCharCode((r&15)<<12|(i&63)<<6|s&63);continue}a=n.charCodeAt(t++),o=((r&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Jw(n){var e=Su(2*n.length),t,r,i=1,s=0,a=0,o;for(r=0;r<n.length;r+=i)i=1,(o=n.charCodeAt(r))<128?t=o:o<224?(t=(o&31)*64+(n.charCodeAt(r+1)&63),i=2):o<240?(t=(o&15)*4096+(n.charCodeAt(r+1)&63)*64+(n.charCodeAt(r+2)&63),i=3):(i=4,t=(o&7)*262144+(n.charCodeAt(r+1)&63)*4096+(n.charCodeAt(r+2)&63)*64+(n.charCodeAt(r+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function Qw(n){return po(n,"binary").toString("utf8")}var g0="foo bar baz",Ef=hn&&(Qw(g0)==_g(g0)&&Qw||Jw(g0)==_g(g0)&&Jw)||_g,td=hn?function(n){return po(n,"utf8").toString("binary")}:function(n){for(var e=[],t=0,r=0,i=0;t<n.length;)switch(r=n.charCodeAt(t++),!0){case r<128:e.push(String.fromCharCode(r));break;case r<2048:e.push(String.fromCharCode(192+(r>>6))),e.push(String.fromCharCode(128+(r&63)));break;case(r>=55296&&r<57344):r-=55296,i=n.charCodeAt(t++)-56320+(r<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(r>>12))),e.push(String.fromCharCode(128+(r>>6&63))),e.push(String.fromCharCode(128+(r&63)))}return e.join("")},QM=function(){var n=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var r=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<n.length;++i)r=r.replace(n[i][0],n[i][1]);return r}}(),JA=/(^\s|\s$|\n)/;function ti(n,e){return"<"+n+(e.match(JA)?' xml:space="preserve"':"")+">"+e+"</"+n+">"}function nd(n){return ai(n).map(function(e){return" "+e+'="'+n[e]+'"'}).join("")}function st(n,e,t){return"<"+n+(t!=null?nd(t):"")+(e!=null?(e.match(JA)?' xml:space="preserve"':"")+">"+e+"</"+n:"/")+">"}function w1(n,e){try{return n.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function ZM(n,e){switch(typeof n){case"string":var t=st("vt:lpwstr",wn(n));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return st((n|0)==n?"vt:i4":"vt:r8",wn(String(n)));case"boolean":return st("vt:bool",n?"true":"false")}if(n instanceof Date)return st("vt:filetime",w1(n));throw new Error("Unable to serialize "+n)}var Vr={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ah=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],hs={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function e9(n,e){for(var t=1-2*(n[e+7]>>>7),r=((n[e+7]&127)<<4)+(n[e+6]>>>4&15),i=n[e+6]&15,s=5;s>=0;--s)i=i*256+n[e+s];return r==2047?i==0?t*(1/0):NaN:(r==0?r=-1022:(r-=1023,i+=Math.pow(2,52)),t*Math.pow(2,r-52)*i)}function t9(n,e,t){var r=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=r?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)n[t+o]=s&255;n[t+6]=(i&15)<<4|s&15,n[t+7]=i>>4|r}var Zw=function(n){for(var e=[],t=10240,r=0;r<n[0].length;++r)if(n[0][r])for(var i=0,s=n[0][r].length;i<s;i+=t)e.push.apply(e,n[0][r].slice(i,i+t));return e},e5=hn?function(n){return n[0].length>0&&Buffer.isBuffer(n[0][0])?Buffer.concat(n[0].map(function(e){return Buffer.isBuffer(e)?e:po(e)})):Zw(n)}:Zw,t5=function(n,e,t){for(var r=[],i=e;i<t;i+=2)r.push(String.fromCharCode(hf(n,i)));return r.join("").replace(xf,"")},Mv=hn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("utf16le",e,t).replace(xf,""):t5(n,e,t)}:t5,n5=function(n,e,t){for(var r=[],i=e;i<e+t;++i)r.push(("0"+n[i].toString(16)).slice(-2));return r.join("")},QA=hn?function(n,e,t){return Buffer.isBuffer(n)?n.toString("hex",e,e+t):n5(n,e,t)}:n5,r5=function(n,e,t){for(var r=[],i=e;i<t;i++)r.push(String.fromCharCode(Al(n,i)));return r.join("")},Cd=hn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf8",t,r):r5(e,t,r)}:r5,ZA=function(n,e){var t=fs(n,e);return t>0?Cd(n,e+4,e+4+t-1):""},eI=ZA,tI=function(n,e){var t=fs(n,e);return t>0?Cd(n,e+4,e+4+t-1):""},nI=tI,rI=function(n,e){var t=2*fs(n,e);return t>0?Cd(n,e+4,e+4+t-1):""},iI=rI,sI=function(e,t){var r=fs(e,t);return r>0?Mv(e,t+4,t+4+r):""},aI=sI,oI=function(n,e){var t=fs(n,e);return t>0?Cd(n,e+4,e+4+t):""},cI=oI,uI=function(n,e){return e9(n,e)},yp=uI,Bv=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};hn&&(eI=function(e,t){if(!Buffer.isBuffer(e))return ZA(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},nI=function(e,t){if(!Buffer.isBuffer(e))return tI(e,t);var r=e.readUInt32LE(t);return r>0?e.toString("utf8",t+4,t+4+r-1):""},iI=function(e,t){if(!Buffer.isBuffer(e))return rI(e,t);var r=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r-1)},aI=function(e,t){if(!Buffer.isBuffer(e))return sI(e,t);var r=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+r)},cI=function(e,t){if(!Buffer.isBuffer(e))return oI(e,t);var r=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+r)},yp=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):uI(e,t)},Bv=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Al=function(n,e){return n[e]},hf=function(n,e){return n[e+1]*256+n[e]},n9=function(n,e){var t=n[e+1]*256+n[e];return t<32768?t:(65535-t+1)*-1},fs=function(n,e){return n[e+3]*(1<<24)+(n[e+2]<<16)+(n[e+1]<<8)+n[e]},Qc=function(n,e){return n[e+3]<<24|n[e+2]<<16|n[e+1]<<8|n[e]},r9=function(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]};function Tf(n,e){var t="",r,i,s=[],a,o,c,u;switch(e){case"dbcs":if(u=this.l,hn&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*n).toString("utf16le");else for(c=0;c<n;++c)t+=String.fromCharCode(hf(this,u)),u+=2;n*=2;break;case"utf8":t=Cd(this,this.l,this.l+n);break;case"utf16le":n*=2,t=Mv(this,this.l,this.l+n);break;case"wstr":return Tf.call(this,n,"dbcs");case"lpstr-ansi":t=eI(this,this.l),n=4+fs(this,this.l);break;case"lpstr-cp":t=nI(this,this.l),n=4+fs(this,this.l);break;case"lpwstr":t=iI(this,this.l),n=4+2*fs(this,this.l);break;case"lpp4":n=4+fs(this,this.l),t=aI(this,this.l),n&2&&(n+=2);break;case"8lpp4":n=4+fs(this,this.l),t=cI(this,this.l),n&3&&(n+=4-(n&3));break;case"cstr":for(n=0,t="";(a=Al(this,this.l+n++))!==0;)s.push(d0(a));t=s.join("");break;case"_wstr":for(n=0,t="";(a=hf(this,this.l+n))!==0;)s.push(d0(a)),n+=2;n+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,c=0;c<n;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Al(this,u),this.l=u+1,o=Tf.call(this,n-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(d0(hf(this,u))),u+=2}t=s.join(""),n*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,c=0;c!=n;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Al(this,u),this.l=u+1,o=Tf.call(this,n-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(d0(Al(this,u))),u+=1}t=s.join("");break;default:switch(n){case 1:return r=Al(this,this.l),this.l++,r;case 2:return r=(e==="i"?n9:hf)(this,this.l),this.l+=2,r;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(r=(n>0?Qc:r9)(this,this.l),this.l+=4,r):(i=fs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return n==8?i=yp(this,this.l):i=yp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;n=8;case 16:t=QA(this,this.l,n);break}}return this.l+=n,t}var i9=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255,n[t+2]=e>>>16&255,n[t+3]=e>>>24&255},s9=function(n,e,t){n[t]=e&255,n[t+1]=e>>8&255,n[t+2]=e>>16&255,n[t+3]=e>>24&255},a9=function(n,e,t){n[t]=e&255,n[t+1]=e>>>8&255};function o9(n,e,t){var r=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)a9(this,e.charCodeAt(i),this.l+2*i);r=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;r=e.length}else if(t==="hex"){for(;i<n;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+n,this.length);for(i=0;i<Math.min(e.length,n);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(n){case 1:r=1,this[this.l]=e&255;break;case 2:r=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:r=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:r=4,i9(this,e,this.l);break;case 8:if(r=8,t==="f"){t9(this,e,this.l);break}case 16:break;case-4:r=4,s9(this,e,this.l);break}return this.l+=r,this}function lI(n,e){var t=QA(this,this.l,n.length>>1);if(t!==n)throw new Error(e+"Expected "+n+" saw "+t);this.l+=n.length>>1}function us(n,e){n.l=e,n.read_shift=Tf,n.chk=lI,n.write_shift=o9}function Ia(n,e){n.l+=e}function Be(n){var e=Su(n);return us(e,0),e}function Ki(){var n=[],e=hn?256:2048,t=function(u){var l=Be(u);return us(l,0),l},r=t(e),i=function(){r&&(r.length>r.l&&(r=r.slice(0,r.l),r.l=r.length),r.length>0&&n.push(r),r=null)},s=function(u){return r&&u<r.length-r.l?r:(i(),r=t(Math.max(u+1,e)))},a=function(){return i(),ei(n)},o=function(u){i(),r=u,r.l==null&&(r.l=r.length),s(e)};return{next:s,push:o,end:a,_bufs:n}}function He(n,e,t,r){var i=+e,s;if(!isNaN(i)){r||(r=ez[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,r>=128&&++s,r>=16384&&++s,r>=2097152&&++s;var a=n.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(r>=128)a.write_shift(1,(r&127)+128),r>>=7;else{a.write_shift(1,r);break}r>0&&Bv(t)&&n.push(t)}}function bf(n,e,t){var r=Ji(n);if(e.s?(r.cRel&&(r.c+=e.s.c),r.rRel&&(r.r+=e.s.r)):(r.cRel&&(r.c+=e.c),r.rRel&&(r.r+=e.r)),!t||t.biff<12){for(;r.c>=256;)r.c-=256;for(;r.r>=65536;)r.r-=65536}return r}function i5(n,e,t){var r=Ji(n);return r.s=bf(r.s,e.s,t),r.e=bf(r.e,e.s,t),r}function Af(n,e){if(n.cRel&&n.c<0)for(n=Ji(n);n.c<0;)n.c+=e>8?16384:256;if(n.rRel&&n.r<0)for(n=Ji(n);n.r<0;)n.r+=e>8?1048576:e>5?65536:16384;var t=En(n);return!n.cRel&&n.cRel!=null&&(t=l9(t)),!n.rRel&&n.rRel!=null&&(t=c9(t)),t}function yg(n,e){return n.s.r==0&&!n.s.rRel&&n.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!n.e.rRel?(n.s.cRel?"":"$")+mi(n.s.c)+":"+(n.e.cRel?"":"$")+mi(n.e.c):n.s.c==0&&!n.s.cRel&&n.e.c==(e.biff>=12?16383:255)&&!n.e.cRel?(n.s.rRel?"":"$")+ii(n.s.r)+":"+(n.e.rRel?"":"$")+ii(n.e.r):Af(n.s,e.biff)+":"+Af(n.e,e.biff)}function Vv(n){return parseInt(u9(n),10)-1}function ii(n){return""+(n+1)}function c9(n){return n.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function u9(n){return n.replace(/\$(\d+)$/,"$1")}function Uv(n){for(var e=h9(n),t=0,r=0;r!==e.length;++r)t=26*t+e.charCodeAt(r)-64;return t-1}function mi(n){if(n<0)throw new Error("invalid column "+n);var e="";for(++n;n;n=Math.floor((n-1)/26))e=String.fromCharCode((n-1)%26+65)+e;return e}function l9(n){return n.replace(/^([A-Z])/,"$$$1")}function h9(n){return n.replace(/^\$([A-Z])/,"$1")}function f9(n){return n.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ur(n){for(var e=0,t=0,r=0;r<n.length;++r){var i=n.charCodeAt(r);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function En(n){for(var e=n.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(n.r+1)}function gs(n){var e=n.indexOf(":");return e==-1?{s:Ur(n),e:Ur(n)}:{s:Ur(n.slice(0,e)),e:Ur(n.slice(e+1))}}function br(n,e){return typeof e>"u"||typeof e=="number"?br(n.s,n.e):(typeof n!="string"&&(n=En(n)),typeof e!="string"&&(e=En(e)),n==e?n:n+":"+e)}function zn(n){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,r=0,i=0,s=n.length;for(t=0;r<s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.s.c=--t,t=0;r<s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;if(e.s.r=--t,r===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++r,t=0;r!=s&&!((i=n.charCodeAt(r)-64)<1||i>26);++r)t=26*t+i;for(e.e.c=--t,t=0;r!=s&&!((i=n.charCodeAt(r)-48)<0||i>9);++r)t=10*t+i;return e.e.r=--t,e}function s5(n,e){var t=n.t=="d"&&e instanceof Date;if(n.z!=null)try{return n.w=dc(n.z,t?Xi(e):e)}catch{}try{return n.w=dc((n.XF||{}).numFmtId||(t?14:0),t?Xi(e):e)}catch{return""+e}}function oo(n,e,t){return n==null||n.t==null||n.t=="z"?"":n.w!==void 0?n.w:(n.t=="d"&&!n.z&&t&&t.dateNF&&(n.z=t.dateNF),n.t=="e"?Rd[n.v]||n.v:e==null?s5(n,n.v):s5(n,e))}function Ou(n,e){var t=e&&e.sheet?e.sheet:"Sheet1",r={};return r[t]=n,{SheetNames:[t],Sheets:r}}function hI(n,e,t){var r=t||{},i=n?Array.isArray(n):r.dense,s=n||(i?[]:{}),a=0,o=0;if(s&&r.origin!=null){if(typeof r.origin=="number")a=r.origin;else{var c=typeof r.origin=="string"?Ur(r.origin):r.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var l=zn(s["!ref"]);u.s.c=l.s.c,u.s.r=l.s.r,u.e.c=Math.max(u.e.c,l.e.c),u.e.r=Math.max(u.e.r,l.e.r),a==-1&&(u.e.r=a=l.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},x=a+d,_=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>_&&(u.s.c=_),u.e.r<x&&(u.e.r=x),u.e.c<_&&(u.e.c=_),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(r.nullError)p.t="e",p.v=0;else if(r.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=r.dateNF||sr[14],r.cellDates?(p.t="d",p.w=dc(p.z,Xi(p.v))):(p.t="n",p.v=Xi(p.v),p.w=dc(p.z,p.v))):p.t="s";if(i)s[x]||(s[x]=[]),s[x][_]&&s[x][_].z&&(p.z=s[x][_].z),s[x][_]=p;else{var E=En({c:_,r:x});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return u.s.c<1e7&&(s["!ref"]=br(u)),s}function Ih(n,e){return hI(null,n,e)}function d9(n){return n.read_shift(4,"i")}function Ys(n,e){return e||(e=Be(4)),e.write_shift(4,n),e}function gi(n){var e=n.read_shift(4);return e===0?"":n.read_shift(e,"dbcs")}function jr(n,e){var t=!1;return e==null&&(t=!0,e=Be(4+2*n.length)),e.write_shift(4,n.length),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}function p9(n){return{ich:n.read_shift(2),ifnt:n.read_shift(2)}}function m9(n,e){return e||(e=Be(4)),e.write_shift(2,0),e.write_shift(2,0),e}function jv(n,e){var t=n.l,r=n.read_shift(1),i=gi(n),s=[],a={t:i,h:i};if(r&1){for(var o=n.read_shift(4),c=0;c!=o;++c)s.push(p9(n));a.r=s}else a.r=[{ich:0,ifnt:0}];return n.l=t+e,a}function g9(n,e){var t=!1;return e==null&&(t=!0,e=Be(15+4*n.t.length)),e.write_shift(1,0),jr(n.t,e),t?e.slice(0,e.l):e}var v9=jv;function _9(n,e){var t=!1;return e==null&&(t=!0,e=Be(23+4*n.t.length)),e.write_shift(1,1),jr(n.t,e),e.write_shift(4,1),m9({},e),t?e.slice(0,e.l):e}function Cs(n){var e=n.read_shift(4),t=n.read_shift(2);return t+=n.read_shift(1)<<16,n.l++,{c:e,iStyleRef:t}}function Mu(n,e){return e==null&&(e=Be(8)),e.write_shift(-4,n.c),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}function Bu(n){var e=n.read_shift(2);return e+=n.read_shift(1)<<16,n.l++,{c:-1,iStyleRef:e}}function Vu(n,e){return e==null&&(e=Be(4)),e.write_shift(3,n.iStyleRef||n.s),e.write_shift(1,0),e}var y9=gi,fI=jr;function qv(n){var e=n.read_shift(4);return e===0||e===4294967295?"":n.read_shift(e,"dbcs")}function wp(n,e){var t=!1;return e==null&&(t=!0,e=Be(127)),e.write_shift(4,n.length>0?n.length:4294967295),n.length>0&&e.write_shift(0,n,"dbcs"),t?e.slice(0,e.l):e}var w9=gi,x1=qv,zv=wp;function dI(n){var e=n.slice(n.l,n.l+4),t=e[0]&1,r=e[0]&2;n.l+=4;var i=r===0?yp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Qc(e,0)>>2;return t?i/100:i}function pI(n,e){e==null&&(e=Be(4));var t=0,r=0,i=n*100;if(n==(n|0)&&n>=-536870912&&n<1<<29?r=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(r=1,t=1),r)e.write_shift(-4,((t?i:n)<<2)+(t+2));else throw new Error("unsupported RkNumber "+n)}function mI(n){var e={s:{},e:{}};return e.s.r=n.read_shift(4),e.e.r=n.read_shift(4),e.s.c=n.read_shift(4),e.e.c=n.read_shift(4),e}function x9(n,e){return e||(e=Be(16)),e.write_shift(4,n.s.r),e.write_shift(4,n.e.r),e.write_shift(4,n.s.c),e.write_shift(4,n.e.c),e}var Uu=mI,Sh=x9;function Ph(n){if(n.length-n.l<8)throw"XLS Xnum Buffer underflow";return n.read_shift(8,"f")}function Pu(n,e){return(e||Be(8)).write_shift(8,n,"f")}function E9(n){var e={},t=n.read_shift(1),r=t>>>1,i=n.read_shift(1),s=n.read_shift(2,"i"),a=n.read_shift(1),o=n.read_shift(1),c=n.read_shift(1);switch(n.l++,r){case 0:e.auto=1;break;case 1:e.index=i;var u=C9[i];u&&(e.rgb=g5(u));break;case 2:e.rgb=g5([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function xp(n,e){if(e||(e=Be(8)),!n||n.auto)return e.write_shift(4,0),e.write_shift(4,0),e;n.index!=null?(e.write_shift(1,2),e.write_shift(1,n.index)):n.theme!=null?(e.write_shift(1,6),e.write_shift(1,n.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=n.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!n.rgb||n.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var r=n.rgb||"FFFFFF";typeof r=="number"&&(r=("000000"+r.toString(16)).slice(-6)),e.write_shift(1,parseInt(r.slice(0,2),16)),e.write_shift(1,parseInt(r.slice(2,4),16)),e.write_shift(1,parseInt(r.slice(4,6),16)),e.write_shift(1,255)}return e}function T9(n){var e=n.read_shift(1);n.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function b9(n,e){e||(e=Be(2));var t=(n.italic?2:0)|(n.strike?8:0)|(n.outline?16:0)|(n.shadow?32:0)|(n.condense?64:0)|(n.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var gI=2,cs=3,v0=11,Ep=19,_0=64,A9=65,I9=71,S9=4108,P9=4126,Jr=80,a5={1:{n:"CodePage",t:gI},2:{n:"Category",t:Jr},3:{n:"PresentationFormat",t:Jr},4:{n:"ByteCount",t:cs},5:{n:"LineCount",t:cs},6:{n:"ParagraphCount",t:cs},7:{n:"SlideCount",t:cs},8:{n:"NoteCount",t:cs},9:{n:"HiddenCount",t:cs},10:{n:"MultimediaClipCount",t:cs},11:{n:"ScaleCrop",t:v0},12:{n:"HeadingPairs",t:S9},13:{n:"TitlesOfParts",t:P9},14:{n:"Manager",t:Jr},15:{n:"Company",t:Jr},16:{n:"LinksUpToDate",t:v0},17:{n:"CharacterCount",t:cs},19:{n:"SharedDoc",t:v0},22:{n:"HyperlinksChanged",t:v0},23:{n:"AppVersion",t:cs,p:"version"},24:{n:"DigSig",t:A9},26:{n:"ContentType",t:Jr},27:{n:"ContentStatus",t:Jr},28:{n:"Language",t:Jr},29:{n:"Version",t:Jr},255:{},2147483648:{n:"Locale",t:Ep},2147483651:{n:"Behavior",t:Ep},1919054434:{}},o5={1:{n:"CodePage",t:gI},2:{n:"Title",t:Jr},3:{n:"Subject",t:Jr},4:{n:"Author",t:Jr},5:{n:"Keywords",t:Jr},6:{n:"Comments",t:Jr},7:{n:"Template",t:Jr},8:{n:"LastAuthor",t:Jr},9:{n:"RevNumber",t:Jr},10:{n:"EditTime",t:_0},11:{n:"LastPrinted",t:_0},12:{n:"CreatedDate",t:_0},13:{n:"ModifiedDate",t:_0},14:{n:"PageCount",t:cs},15:{n:"WordCount",t:cs},16:{n:"CharCount",t:cs},17:{n:"Thumbnail",t:I9},18:{n:"Application",t:Jr},19:{n:"DocSecurity",t:cs},255:{},2147483648:{n:"Locale",t:Ep},2147483651:{n:"Behavior",t:Ep},1919054434:{}};function N9(n){return n.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var k9=N9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),C9=Ji(k9),Rd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},R9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},y0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function vI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _I(n,e){var t=qM(R9),r=[],i;r[r.length]=Ar,r[r.length]=st("Types",null,{xmlns:Vr.CT,"xmlns:xsd":Vr.xsd,"xmlns:xsi":Vr.xsi}),r=r.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return st("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){n[c]&&n[c].length>0&&(i=n[c][0],r[r.length]=st("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:y0[c][e.bookType]||y0[c].xlsx}))},a=function(c){(n[c]||[]).forEach(function(u){r[r.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:y0[c][e.bookType]||y0[c].xlsx})})},o=function(c){(n[c]||[]).forEach(function(u){r[r.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[c][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),r.length>2&&(r[r.length]="</Types>",r[1]=r[1].replace("/>",">")),r.join("")}var on={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function yI(n){var e=n.lastIndexOf("/");return n.slice(0,e+1)+"_rels/"+n.slice(e+1)+".rels"}function Ul(n){var e=[Ar,st("Relationships",null,{xmlns:Vr.RELS})];return ai(n["!id"]).forEach(function(t){e[e.length]=st("Relationship",null,n["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function _n(n,e,t,r,i,s){if(i||(i={}),n["!id"]||(n["!id"]={}),n["!idx"]||(n["!idx"]=1),e<0)for(e=n["!idx"];n["!id"]["rId"+e];++e);if(n["!idx"]=e+1,i.Id="rId"+e,i.Type=r,i.Target=t,[on.HLINK,on.XPATH,on.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),n["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return n["!id"][i.Id]=i,n[("/"+i.Target).replace("//","/")]=i,e}function L9(n){var e=[Ar];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<n.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+n[t][0]+'" manifest:media-type="'+n[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function c5(n,e,t){return['  <rdf:Description rdf:about="'+n+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function D9(n,e){return['  <rdf:Description rdf:about="'+n+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function F9(n){var e=[Ar];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=n.length;++t)e.push(c5(n[t][0],n[t][1])),e.push(D9("",n[t][0]));return e.push(c5("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function wI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+dp.version+"</meta:generator></office:meta></office:document-meta>"}var ou=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function wg(n,e,t,r,i){i[n]!=null||e==null||e===""||(i[n]=e,e=wn(e),r[r.length]=t?st(n,e,t):ti(n,e))}function xI(n,e){var t=e||{},r=[Ar,st("cp:coreProperties",null,{"xmlns:cp":Vr.CORE_PROPS,"xmlns:dc":Vr.dc,"xmlns:dcterms":Vr.dcterms,"xmlns:dcmitype":Vr.dcmitype,"xmlns:xsi":Vr.xsi})],i={};if(!n&&!t.Props)return r.join("");n&&(n.CreatedDate!=null&&wg("dcterms:created",typeof n.CreatedDate=="string"?n.CreatedDate:w1(n.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i),n.ModifiedDate!=null&&wg("dcterms:modified",typeof n.ModifiedDate=="string"?n.ModifiedDate:w1(n.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},r,i));for(var s=0;s!=ou.length;++s){var a=ou[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:n?n[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&wg(a[0],o,null,r,i)}return r.length>2&&(r[r.length]="</cp:coreProperties>",r[1]=r[1].replace("/>",">")),r.join("")}var jl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],EI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function TI(n){var e=[],t=st;return n||(n={}),n.Application="SheetJS",e[e.length]=Ar,e[e.length]=st("Properties",null,{xmlns:Vr.EXT_PROPS,"xmlns:vt":Vr.vt}),jl.forEach(function(r){if(n[r[1]]!==void 0){var i;switch(r[2]){case"string":i=wn(String(n[r[1]]));break;case"bool":i=n[r[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(r[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(n.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",n.SheetNames.map(function(r){return"<vt:lpstr>"+wn(r)+"</vt:lpstr>"}).join(""),{size:n.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function bI(n){var e=[Ar,st("Properties",null,{xmlns:Vr.CUST_PROPS,"xmlns:vt":Vr.vt})];if(!n)return e.join("");var t=1;return ai(n).forEach(function(i){++t,e[e.length]=st("property",ZM(n[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:wn(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var u5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function O9(n,e){var t=[];return ai(u5).map(function(r){for(var i=0;i<ou.length;++i)if(ou[i][1]==r)return ou[i];for(i=0;i<jl.length;++i)if(jl[i][1]==r)return jl[i];throw r}).forEach(function(r){if(n[r[1]]!=null){var i=e&&e.Props&&e.Props[r[1]]!=null?e.Props[r[1]]:n[r[1]];switch(r[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(ti(u5[r[1]]||r[1],i))}}),st("DocumentProperties",t.join(""),{xmlns:hs.o})}function M9(n,e){var t=["Worksheets","SheetNames"],r="CustomDocumentProperties",i=[];return n&&ai(n).forEach(function(s){if(Object.prototype.hasOwnProperty.call(n,s)){for(var a=0;a<ou.length;++a)if(s==ou[a][1])return;for(a=0;a<jl.length;++a)if(s==jl[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=n[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(st(Xw(s),o,{"dt:dt":c}))}}),e&&ai(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(n&&Object.prototype.hasOwnProperty.call(n,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(st(Xw(s),a,{"dt:dt":o}))}}),"<"+r+' xmlns="'+hs.o+'">'+i.join("")+"</"+r+">"}function B9(n){var e=typeof n=="string"?new Date(Date.parse(n)):n,t=e.getTime()/1e3+11644473600,r=t%Math.pow(2,32),i=(t-r)/Math.pow(2,32);r*=1e7,i*=1e7;var s=r/Math.pow(2,32)|0;s>0&&(r=r%Math.pow(2,32),i+=s);var a=Be(8);return a.write_shift(4,r),a.write_shift(4,i),a}function l5(n,e){var t=Be(4),r=Be(4);switch(t.write_shift(4,n==80?31:n),n){case 3:r.write_shift(-4,e);break;case 5:r=Be(8),r.write_shift(8,e,"f");break;case 11:r.write_shift(4,e?1:0);break;case 64:r=B9(e);break;case 31:case 80:for(r=Be(4+2*(e.length+1)+(e.length%2?0:2)),r.write_shift(4,e.length+1),r.write_shift(0,e,"dbcs");r.l!=r.length;)r.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+n+" "+e)}return ei([t,r])}var AI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function V9(n){switch(typeof n){case"boolean":return 11;case"number":return(n|0)==n?3:5;case"string":return 31;case"object":if(n instanceof Date)return 64;break}return-1}function h5(n,e,t){var r=Be(8),i=[],s=[],a=8,o=0,c=Be(8),u=Be(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),a+=8+c.length,!e){u=Be(8),u.write_shift(4,0),i.unshift(u);var l=[Be(4)];for(l[0].write_shift(4,n.length),o=0;o<n.length;++o){var d=n[o][0];for(c=Be(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);l.push(c)}c=ei(l),s.unshift(c),a+=8+c.length}for(o=0;o<n.length;++o)if(!(e&&!e[n[o][0]])&&!(AI.indexOf(n[o][0])>-1||EI.indexOf(n[o][0])>-1)&&n[o][1]!=null){var g=n[o][1],p=0;if(e){p=+e[n[o][0]];var x=t[p];if(x.p=="version"&&typeof g=="string"){var _=g.split(".");g=(+_[0]<<16)+(+_[1]||0)}c=l5(x.t,g)}else{var E=V9(g);E==-1&&(E=31,g=String(g)),c=l5(E,g)}s.push(c),u=Be(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+c.length}var P=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,P),P+=s[o].length;return r.write_shift(4,a),r.write_shift(4,s.length),ei([r].concat(i).concat(s))}function f5(n,e,t,r,i,s){var a=Be(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Sn.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=h5(n,t,r);if(o.push(c),i){var u=h5(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(u)}return ei(o)}function U9(n,e){e||(e=Be(n));for(var t=0;t<n;++t)e.write_shift(1,0);return e}function j9(n,e){return n.read_shift(e)===1}function Pi(n,e){return e||(e=Be(2)),e.write_shift(2,+!!n),e}function II(n){return n.read_shift(2,"u")}function Is(n,e){return e||(e=Be(2)),e.write_shift(2,n),e}function SI(n,e,t){return t||(t=Be(2)),t.write_shift(1,e=="e"?+n:+!!n),t.write_shift(1,e=="e"?1:0),t}function PI(n,e,t){var r=n.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=n.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=r?n.read_shift(r,i):"";return a}function q9(n){var e=n.t||"",t=Be(3);t.write_shift(2,e.length),t.write_shift(1,1);var r=Be(2*e.length);r.write_shift(2*e.length,e,"utf16le");var i=[t,r];return ei(i)}function z9(n,e,t){var r;if(t){if(t.biff>=2&&t.biff<=5)return n.read_shift(e,"cpstr");if(t.biff>=12)return n.read_shift(e,"dbcs-cont")}var i=n.read_shift(1);return i===0?r=n.read_shift(e,"sbcs-cont"):r=n.read_shift(e,"dbcs-cont"),r}function W9(n,e,t){var r=n.read_shift(t&&t.biff==2?1:2);return r===0?(n.l++,""):z9(n,r,t)}function H9(n,e,t){if(t.biff>5)return W9(n,e,t);var r=n.read_shift(1);return r===0?(n.l++,""):n.read_shift(r,t.biff<=4||!n.lens?"cpstr":"sbcs-cont")}function NI(n,e,t){return t||(t=Be(3+2*n.length)),t.write_shift(2,n.length),t.write_shift(1,1),t.write_shift(31,n,"utf16le"),t}function d5(n,e){e||(e=Be(6+n.length*2)),e.write_shift(4,1+n.length);for(var t=0;t<n.length;++t)e.write_shift(2,n.charCodeAt(t));return e.write_shift(2,0),e}function $9(n){var e=Be(512),t=0,r=n.Target;r.slice(0,7)=="file://"&&(r=r.slice(7));var i=r.indexOf("#"),s=i>-1?31:23;switch(r.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)r=r.slice(1),d5(r,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?r.slice(0,i):r;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&d5(i>-1?r.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var c=0;r.slice(c*3,c*3+3)=="../"||r.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,r.length-3*c+1),t=0;t<r.length-3*c;++t)e.write_shift(1,r.charCodeAt(t+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Nu(n,e,t,r){return r||(r=Be(6)),r.write_shift(2,n),r.write_shift(2,e),r.write_shift(2,t||0),r}function G9(n,e,t){var r=t.biff>8?4:2,i=n.read_shift(r),s=n.read_shift(r,"i"),a=n.read_shift(r,"i");return[i,s,a]}function K9(n){var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(2),i=n.read_shift(2);return{s:{c:r,r:e},e:{c:i,r:t}}}function kI(n,e){return e||(e=Be(8)),e.write_shift(2,n.s.r),e.write_shift(2,n.e.r),e.write_shift(2,n.s.c),e.write_shift(2,n.e.c),e}function Wv(n,e,t){var r=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":r=1280,i=8;break;case"biff4":r=4,i=6;break;case"biff3":r=3,i=6;break;case"biff2":r=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Be(i);return s.write_shift(2,r),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function Y9(n,e){var t=!e||e.biff==8,r=Be(t?112:54);for(r.write_shift(e.biff==8?2:1,7),t&&r.write_shift(1,0),r.write_shift(4,859007059),r.write_shift(4,5458548|(t?0:536870912));r.l<r.length;)r.write_shift(1,t?0:32);return r}function X9(n,e){var t=!e||e.biff>=8?2:1,r=Be(8+t*n.name.length);r.write_shift(4,n.pos),r.write_shift(1,n.hs||0),r.write_shift(1,n.dt),r.write_shift(1,n.name.length),e.biff>=8&&r.write_shift(1,1),r.write_shift(t*n.name.length,n.name,e.biff<8?"sbcs":"utf16le");var i=r.slice(0,r.l);return i.l=r.l,i}function J9(n,e){var t=Be(8);t.write_shift(4,n.Count),t.write_shift(4,n.Unique);for(var r=[],i=0;i<n.length;++i)r[i]=q9(n[i]);var s=ei([t].concat(r));return s.parts=[t.length].concat(r.map(function(a){return a.length})),s}function Q9(){var n=Be(18);return n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,29280),n.write_shift(2,17600),n.write_shift(2,56),n.write_shift(2,0),n.write_shift(2,0),n.write_shift(2,1),n.write_shift(2,500),n}function Z9(n){var e=Be(18),t=1718;return n&&n.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function eB(n,e){var t=n.name||"Arial",r=e&&e.biff==5,i=r?15+t.length:16+2*t.length,s=Be(i);return s.write_shift(2,n.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),r||s.write_shift(1,1),s.write_shift((r?1:2)*t.length,t,r?"sbcs":"utf16le"),s}function tB(n,e,t,r){var i=Be(10);return Nu(n,e,r,i),i.write_shift(4,t),i}function nB(n,e,t,r,i){var s=!i||i.biff==8,a=Be(8+ +s+(1+s)*t.length);return Nu(n,e,r,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function rB(n,e,t,r){var i=t&&t.biff==5;r||(r=Be(i?3+e.length:5+2*e.length)),r.write_shift(2,n),r.write_shift(i?1:2,e.length),i||r.write_shift(1,1),r.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=r.length>r.l?r.slice(0,r.l):r;return s.l==null&&(s.l=s.length),s}function iB(n,e){var t=e.biff==8||!e.biff?4:2,r=Be(2*t+6);return r.write_shift(t,n.s.r),r.write_shift(t,n.e.r+1),r.write_shift(2,n.s.c),r.write_shift(2,n.e.c+1),r.write_shift(2,0),r}function p5(n,e,t,r){var i=t&&t.biff==5;r||(r=Be(i?16:20)),r.write_shift(2,0),n.style?(r.write_shift(2,n.numFmtId||0),r.write_shift(2,65524)):(r.write_shift(2,n.numFmtId||0),r.write_shift(2,e<<4));var s=0;return n.numFmtId>0&&i&&(s|=1024),r.write_shift(4,s),r.write_shift(4,0),i||r.write_shift(4,0),r.write_shift(2,0),r}function sB(n){var e=Be(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function aB(n,e,t,r,i,s){var a=Be(8);return Nu(n,e,r,a),SI(t,s,a),a}function oB(n,e,t,r){var i=Be(14);return Nu(n,e,r,i),Pu(t,i),i}function cB(n,e,t){if(t.biff<8)return uB(n,e,t);for(var r=[],i=n.l+e,s=n.read_shift(t.biff>8?4:2);s--!==0;)r.push(G9(n,t.biff>8?12:6,t));if(n.l!=i)throw new Error("Bad ExternSheet: "+n.l+" != "+i);return r}function uB(n,e,t){n[n.l+1]==3&&n[n.l]++;var r=PI(n,e,t);return r.charCodeAt(0)==3?r.slice(1):r}function lB(n){var e=Be(2+n.length*8);e.write_shift(2,n.length);for(var t=0;t<n.length;++t)kI(n[t],e);return e}function hB(n){var e=Be(24),t=Ur(n[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var r="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(r[i],16));return ei([e,$9(n[1])])}function fB(n){var e=n[1].Tooltip,t=Be(10+2*(e.length+1));t.write_shift(2,2048);var r=Ur(n[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function dB(n){return n||(n=Be(4)),n.write_shift(2,1),n.write_shift(2,1),n}function pB(n,e,t){if(!t.cellStyles)return Ia(n,e);var r=t&&t.biff>=12?4:2,i=n.read_shift(r),s=n.read_shift(r),a=n.read_shift(r),o=n.read_shift(r),c=n.read_shift(2);r==2&&(n.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:c};return(t.biff>=5||!t.biff)&&(u.level=c>>8&7),u}function mB(n,e){var t=Be(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,n.width*256),t.write_shift(2,0);var r=0;return n.hidden&&(r|=1),t.write_shift(1,r),r=n.level||0,t.write_shift(1,r),t.write_shift(2,0),t}function gB(n){for(var e=Be(2*n),t=0;t<n;++t)e.write_shift(2,t+1);return e}function vB(n,e,t){var r=Be(15);return Dd(r,n,e),r.write_shift(8,t,"f"),r}function _B(n,e,t){var r=Be(9);return Dd(r,n,e),r.write_shift(2,t),r}var yB=function(){var n={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Lv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,c){var u=[],l=Su(1);switch(c.type){case"base64":l=Gs(ao(o));break;case"binary":l=Gs(o);break;case"buffer":case"array":l=o;break}us(l,0);var d=l.read_shift(1),g=!!(d&136),p=!1,x=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var _=0,E=521;d==2&&(_=l.read_shift(2)),l.l+=3,d!=2&&(_=l.read_shift(4)),_>1048576&&(_=1e6),d!=2&&(E=l.read_shift(2));var P=l.read_shift(2),L=c.codepage||1252;d!=2&&(l.l+=16,l.read_shift(1),l[l.l]!==0&&(L=n[l[l.l]]),l.l+=1,l.l+=2),x&&(l.l+=36);for(var V=[],K={},ie=Math.min(l.length,d==2?521:E-10-(p?264:0)),ae=x?32:11;l.l<ie&&l[l.l]!=13;)switch(K={},K.name=pp.utils.decode(L,l.slice(l.l,l.l+ae)).replace(/[\u0000\r\n].*$/g,""),l.l+=ae,K.type=String.fromCharCode(l.read_shift(1)),d!=2&&!x&&(K.offset=l.read_shift(4)),K.len=l.read_shift(1),d==2&&(K.offset=l.read_shift(2)),K.dec=l.read_shift(1),K.name.length&&V.push(K),d!=2&&(l.l+=x?13:14),K.type){case"B":(!p||K.len!=8)&&c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+K.type)}if(l[l.l]!==13&&(l.l=E-1),l.read_shift(1)!==13)throw new Error("DBF Terminator not found "+l.l+" "+l[l.l]);l.l=E;var N=0,A=0;for(u[0]=[],A=0;A!=V.length;++A)u[0][A]=V[A].name;for(;_-- >0;){if(l[l.l]===42){l.l+=P;continue}for(++l.l,u[++N]=[],A=0,A=0;A!=V.length;++A){var C=l.slice(l.l,l.l+V[A].len);l.l+=V[A].len,us(C,0);var B=pp.utils.decode(L,C);switch(V[A].type){case"C":B.trim().length&&(u[N][A]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[N][A]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[N][A]=B;break;case"F":u[N][A]=parseFloat(B.trim());break;case"+":case"I":u[N][A]=x?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[N][A]=!0;break;case"N":case"F":u[N][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[N][A]="##MEMO##"+(x?parseInt(B.trim(),10):C.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[N][A]=+B||0);break;case"@":u[N][A]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":u[N][A]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":u[N][A]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[N][A]=-C.read_shift(-8,"f");break;case"B":if(p&&V[A].len==8){u[N][A]=C.read_shift(8,"f");break}case"G":case"P":C.l+=V[A].len;break;case"0":if(V[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+V[A].type)}}}if(d!=2&&l.l<l.length&&l[l.l++]!=26)throw new Error("DBF EOF Marker missing "+(l.l-1)+" of "+l.length+" "+l[l.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=V,u}function r(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var l=Ih(t(o,u),u);return l["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,l}function i(o,c){try{return Ou(r(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var u=c||{};if(+u.codepage>=0&&Qf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var l=Ki(),d=Sp(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),x=o["!cols"]||[],_=0,E=0,P=0,L=1;for(_=0;_<g.length;++_){if(((x[_]||{}).DBF||{}).name){g[_]=x[_].DBF.name,++P;continue}if(g[_]!=null){if(++P,typeof g[_]=="number"&&(g[_]=g[_].toString(10)),typeof g[_]!="string")throw new Error("DBF Invalid column name "+g[_]+" |"+typeof g[_]+"|");if(g.indexOf(g[_])!==_){for(E=0;E<1024;++E)if(g.indexOf(g[_]+"_"+E)==-1){g[_]+="_"+E;break}}}}var V=zn(o["!ref"]),K=[],ie=[],ae=[];for(_=0;_<=V.e.c-V.s.c;++_){var N="",A="",C=0,B=[];for(E=0;E<p.length;++E)p[E][_]!=null&&B.push(p[E][_]);if(B.length==0||g[_]==null){K[_]="?";continue}for(E=0;E<B.length;++E){switch(typeof B[E]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=B[E]instanceof Date?"D":"C";break;default:A="C"}C=Math.max(C,String(B[E]).length),N=N&&N!=A?"C":A}C>250&&(C=250),A=((x[_]||{}).DBF||{}).type,A=="C"&&x[_].DBF.len>C&&(C=x[_].DBF.len),N=="B"&&A=="N"&&(N="N",ae[_]=x[_].DBF.dec,C=x[_].DBF.len),ie[_]=N=="C"||A=="N"?C:s[N]||0,L+=ie[_],K[_]=N}var b=l.next(32);for(b.write_shift(4,318902576),b.write_shift(4,p.length),b.write_shift(2,296+32*P),b.write_shift(2,L),_=0;_<4;++_)b.write_shift(4,0);for(b.write_shift(4,0|(+e[RA]||3)<<8),_=0,E=0;_<g.length;++_)if(g[_]!=null){var S=l.next(32),R=(g[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,R,"sbcs"),S.write_shift(1,K[_]=="?"?"C":K[_],"sbcs"),S.write_shift(4,E),S.write_shift(1,ie[_]||s[K[_]]||0),S.write_shift(1,ae[_]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),E+=ie[_]||s[K[_]]||0}var se=l.next(264);for(se.write_shift(4,13),_=0;_<65;++_)se.write_shift(4,0);for(_=0;_<p.length;++_){var me=l.next(L);for(me.write_shift(1,0),E=0;E<g.length;++E)if(g[E]!=null)switch(K[E]){case"L":me.write_shift(1,p[_][E]==null?63:p[_][E]?84:70);break;case"B":me.write_shift(8,p[_][E]||0,"f");break;case"N":var Ee="0";for(typeof p[_][E]=="number"&&(Ee=p[_][E].toFixed(ae[E]||0)),P=0;P<ie[E]-Ee.length;++P)me.write_shift(1,32);me.write_shift(1,Ee,"sbcs");break;case"D":p[_][E]?(me.write_shift(4,("0000"+p[_][E].getFullYear()).slice(-4),"sbcs"),me.write_shift(2,("00"+(p[_][E].getMonth()+1)).slice(-2),"sbcs"),me.write_shift(2,("00"+p[_][E].getDate()).slice(-2),"sbcs")):me.write_shift(8,"00000000","sbcs");break;case"C":var Pe=String(p[_][E]!=null?p[_][E]:"").slice(0,ie[E]);for(me.write_shift(1,Pe,"sbcs"),P=0;P<ie[E]-Pe.length;++P)me.write_shift(1,32);break}}return l.next(1).write_shift(1,26),l.end()}return{to_workbook:i,to_sheet:r,from_sheet:a}}(),wB=function(){var n={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ai(n).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var x=n[p];return typeof x=="number"?Bw(x):x},r=function(g,p,x){var _=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return _==59?g:Bw(_)};n["|"]=254;function i(g,p){switch(p.type){case"base64":return s(ao(g),p);case"binary":return s(g,p);case"buffer":return s(hn&&Buffer.isBuffer(g)?g.toString("binary"):Nd(g),p);case"array":return s(xm(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var x=g.split(/[\n\r]+/),_=-1,E=-1,P=0,L=0,V=[],K=[],ie=null,ae={},N=[],A=[],C=[],B=0,b;for(+p.codepage>=0&&Qf(+p.codepage);P!==x.length;++P){B=0;var S=x[P].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,r).replace(e,t),R=S.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),se=R[0],me;if(S.length>0)switch(se){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&K.push(S.slice(3).replace(/;;/g,";"));break;case"C":var Ee=!1,Pe=!1,_e=!1,ke=!1,Oe=-1,rt=-1;for(L=1;L<R.length;++L)switch(R[L].charAt(0)){case"A":break;case"X":E=parseInt(R[L].slice(1))-1,Pe=!0;break;case"Y":for(_=parseInt(R[L].slice(1))-1,Pe||(E=0),b=V.length;b<=_;++b)V[b]=[];break;case"K":me=R[L].slice(1),me.charAt(0)==='"'?me=me.slice(1,me.length-1):me==="TRUE"?me=!0:me==="FALSE"?me=!1:isNaN(eo(me))?isNaN(ed(me).getDate())||(me=Ri(me)):(me=eo(me),ie!==null&&WA(ie)&&(me=KA(me))),Ee=!0;break;case"E":ke=!0;var T=_V(R[L].slice(1),{r:_,c:E});V[_][E]=[V[_][E],T];break;case"S":_e=!0,V[_][E]=[V[_][E],"S5S"];break;case"G":break;case"R":Oe=parseInt(R[L].slice(1))-1;break;case"C":rt=parseInt(R[L].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}if(Ee&&(V[_][E]&&V[_][E].length==2?V[_][E][0]=me:V[_][E]=me,ie=null),_e){if(ke)throw new Error("SYLK shared formula cannot have own formula");var D=Oe>-1&&V[Oe][rt];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");V[_][E][1]=yV(D[1],{r:_-Oe,c:E-rt})}break;case"F":var M=0;for(L=1;L<R.length;++L)switch(R[L].charAt(0)){case"X":E=parseInt(R[L].slice(1))-1,++M;break;case"Y":for(_=parseInt(R[L].slice(1))-1,b=V.length;b<=_;++b)V[b]=[];break;case"M":B=parseInt(R[L].slice(1))/20;break;case"F":break;case"G":break;case"P":ie=K[parseInt(R[L].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=R[L].slice(1).split(" "),b=parseInt(C[0],10);b<=parseInt(C[1],10);++b)B=parseInt(C[2],10),A[b-1]=B===0?{hidden:!0}:{wch:B},Hv(A[b-1]);break;case"C":E=parseInt(R[L].slice(1))-1,A[E]||(A[E]={});break;case"R":_=parseInt(R[L].slice(1))-1,N[_]||(N[_]={}),B>0?(N[_].hpt=B,N[_].hpx=FI(B)):B===0&&(N[_].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}M<1&&(ie=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}}return N.length>0&&(ae["!rows"]=N),A.length>0&&(ae["!cols"]=A),p&&p.sheetRows&&(V=V.slice(0,p.sheetRows)),[V,ae]}function a(g,p){var x=i(g,p),_=x[0],E=x[1],P=Ih(_,p);return ai(E).forEach(function(L){P[L]=E[L]}),P}function o(g,p){return Ou(a(g,p),p)}function c(g,p,x,_){var E="C;Y"+(x+1)+";X"+(_+1)+";K";switch(g.t){case"n":E+=g.v||0,g.f&&!g.F&&(E+=";E"+Gv(g.f,{r:x,c:_}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||g.v;break;case"d":E+='"'+(g.w||g.v)+'"';break;case"s":E+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,p){p.forEach(function(x,_){var E="F;W"+(_+1)+" "+(_+1)+" ";x.hidden?E+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=Tp(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=bp(x.wpx)),typeof x.wch=="number"&&(E+=Math.round(x.wch))),E.charAt(E.length-1)!=" "&&g.push(E)})}function l(g,p){p.forEach(function(x,_){var E="F;";x.hidden?E+="M0;":x.hpt?E+="M"+20*x.hpt+";":x.hpx&&(E+="M"+20*Ap(x.hpx)+";"),E.length>2&&g.push(E+"R"+(_+1))})}function d(g,p){var x=["ID;PWXL;N;E"],_=[],E=zn(g["!ref"]),P,L=Array.isArray(g),V=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&l(x,g["!rows"]),x.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var K=E.s.r;K<=E.e.r;++K)for(var ie=E.s.c;ie<=E.e.c;++ie){var ae=En({r:K,c:ie});P=L?(g[K]||[])[ie]:g[ae],!(!P||P.v==null&&(!P.f||P.F))&&_.push(c(P,g,K,ie))}return x.join(V)+V+_.join(V)+V+"E"+V}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),xB=function(){function n(s,a){switch(a.type){case"base64":return e(ao(s),a);case"binary":return e(s,a);case"buffer":return e(hn&&Buffer.isBuffer(s)?s.toString("binary"):Nd(s),a);case"array":return e(xm(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),c=-1,u=-1,l=0,d=[];l!==o.length;++l){if(o[l].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var g=o[l].trim().split(","),p=g[0],x=g[1];++l;for(var _=o[l]||"";(_.match(/["]/g)||[]).length&1&&l<o.length-1;)_+=`
`+o[++l];switch(_=_.trim(),+p){case-1:if(_==="BOT"){d[++c]=[],u=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?d[c][u]=!0:_==="FALSE"?d[c][u]=!1:isNaN(eo(x))?isNaN(ed(x).getDate())?d[c][u]=x:d[c][u]=Ri(x):d[c][u]=eo(x),++u;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),d[c][u++]=_!==""?_:null;break}if(_==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return Ih(n(s,a),a)}function r(s,a){return Ou(t(s,a),a)}var i=function(){var s=function(c,u,l,d,g){c.push(u),c.push(l+","+d),c.push('"'+g.replace(/"/g,'""')+'"')},a=function(c,u,l,d){c.push(u+","+l),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],l=zn(c["!ref"]),d,g=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,l.e.r-l.s.r+1,""),s(u,"TUPLES",0,l.e.c-l.s.c+1,""),s(u,"DATA",0,0,"");for(var p=l.s.r;p<=l.e.r;++p){a(u,-1,0,"BOT");for(var x=l.s.c;x<=l.e.c;++x){var _=En({r:p,c:x});if(d=g?(c[p]||[])[x]:c[_],!d){a(u,1,0,"");continue}switch(d.t){case"n":var E=d.w;!E&&d.v!=null&&(E=d.v),E==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,E,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=dc(d.z||sr[14],Xi(Ri(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var P=`\r
`,L=u.join(P);return L}}();return{to_workbook:r,to_sheet:t,from_sheet:i}}(),CI=function(){function n(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),x=-1,_=-1,E=0,P=[];E!==p.length;++E){var L=p[E].trim().split(":");if(L[0]==="cell"){var V=Ur(L[1]);if(P.length<=V.r)for(x=P.length;x<=V.r;++x)P[x]||(P[x]=[]);switch(x=V.r,_=V.c,L[2]){case"t":P[x][_]=n(L[3]);break;case"v":P[x][_]=+L[3];break;case"vtf":var K=L[L.length-1];case"vtc":switch(L[3]){case"nl":P[x][_]=!!+L[4];break;default:P[x][_]=+L[4];break}L[2]=="vtf"&&(P[x][_]=[P[x][_],K])}}}return g&&g.sheetRows&&(P=P.slice(0,g.sheetRows)),P}function r(d,g){return Ih(t(d,g),g)}function i(d,g){return Ou(r(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],x,_="",E=gs(d["!ref"]),P=Array.isArray(d),L=E.s.r;L<=E.e.r;++L)for(var V=E.s.c;V<=E.e.c;++V)if(_=En({r:L,c:V}),x=P?(d[L]||[])[V]:d[_],!(!x||x.v==null||x.t==="z")){switch(p=["cell",_,"t"],x.t){case"s":case"str":p.push(e(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=e(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var K=Xi(Ri(x.v));p[2]="vtc",p[3]="nd",p[4]=""+K,p[5]=x.w||dc(x.z||sr[14],K);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function l(d){return[s,a,o,a,u(d),c].join(`
`)}return{to_workbook:i,to_sheet:r,from_sheet:l}}(),EB=function(){function n(l,d,g,p,x){x.raw?d[g][p]=l:l===""||(l==="TRUE"?d[g][p]=!0:l==="FALSE"?d[g][p]=!1:isNaN(eo(l))?isNaN(ed(l).getDate())?d[g][p]=l:d[g][p]=Ri(l):d[g][p]=eo(l))}function e(l,d){var g=d||{},p=[];if(!l||l.length===0)return p;for(var x=l.split(/[\r\n]/),_=x.length-1;_>=0&&x[_].length===0;)--_;for(var E=10,P=0,L=0;L<=_;++L)P=x[L].indexOf(" "),P==-1?P=x[L].length:P++,E=Math.max(E,P);for(L=0;L<=_;++L){p[L]=[];var V=0;for(n(x[L].slice(0,E).trim(),p,L,V,g),V=1;V<=(x[L].length-E)/10+1;++V)n(x[L].slice(E+(V-1)*10,E+V*10).trim(),p,L,V,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},r={44:3,9:2,59:1,124:0};function i(l){for(var d={},g=!1,p=0,x=0;p<l.length;++p)(x=l.charCodeAt(p))==34?g=!g:!g&&x in t&&(d[x]=(d[x]||0)+1);x=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p]);if(!x.length){d=r;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p])}return x.sort(function(_,E){return _[0]-E[0]||r[_[1]]-r[E[1]]}),t[x.pop()[1]]||44}function s(l,d){var g=d||{},p="",x=g.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};l.slice(0,4)=="sep="?l.charCodeAt(5)==13&&l.charCodeAt(6)==10?(p=l.charAt(4),l=l.slice(7)):l.charCodeAt(5)==13||l.charCodeAt(5)==10?(p=l.charAt(4),l=l.slice(6)):p=i(l.slice(0,1024)):g&&g.FS?p=g.FS:p=i(l.slice(0,1024));var E=0,P=0,L=0,V=0,K=0,ie=p.charCodeAt(0),ae=!1,N=0,A=l.charCodeAt(0);l=l.replace(/\r\n/mg,`
`);var C=g.dateNF!=null?BM(g.dateNF):null;function B(){var b=l.slice(V,K),S={};if(b.charAt(0)=='"'&&b.charAt(b.length-1)=='"'&&(b=b.slice(1,-1).replace(/""/g,'"')),b.length===0)S.t="z";else if(g.raw)S.t="s",S.v=b;else if(b.trim().length===0)S.t="s",S.v=b;else if(b.charCodeAt(0)==61)b.charCodeAt(1)==34&&b.charCodeAt(b.length-1)==34?(S.t="s",S.v=b.slice(2,-1).replace(/""/g,'"')):wV(b)?(S.t="n",S.f=b.slice(1)):(S.t="s",S.v=b);else if(b=="TRUE")S.t="b",S.v=!0;else if(b=="FALSE")S.t="b",S.v=!1;else if(!isNaN(L=eo(b)))S.t="n",g.cellText!==!1&&(S.w=b),S.v=L;else if(!isNaN(ed(b).getDate())||C&&b.match(C)){S.z=g.dateNF||sr[14];var R=0;C&&b.match(C)&&(b=VM(b,g.dateNF,b.match(C)||[]),R=1),g.cellDates?(S.t="d",S.v=Ri(b,R)):(S.t="n",S.v=Xi(Ri(b,R))),g.cellText!==!1&&(S.w=dc(S.z,S.v instanceof Date?Xi(S.v):S.v)),g.cellNF||delete S.z}else S.t="s",S.v=b;if(S.t=="z"||(g.dense?(x[E]||(x[E]=[]),x[E][P]=S):x[En({c:P,r:E})]=S),V=K+1,A=l.charCodeAt(V),_.e.c<P&&(_.e.c=P),_.e.r<E&&(_.e.r=E),N==ie)++P;else if(P=0,++E,g.sheetRows&&g.sheetRows<=E)return!0}e:for(;K<l.length;++K)switch(N=l.charCodeAt(K)){case 34:A===34&&(ae=!ae);break;case ie:case 10:case 13:if(!ae&&B())break e;break}return K-V>0&&B(),x["!ref"]=br(_),x}function a(l,d){return!(d&&d.PRN)||d.FS||l.slice(0,4)=="sep="||l.indexOf("	")>=0||l.indexOf(",")>=0||l.indexOf(";")>=0?s(l,d):Ih(e(l,d),d)}function o(l,d){var g="",p=d.type=="string"?[0,0,0,0]:Dz(l,d);switch(d.type){case"base64":g=ao(l);break;case"binary":g=l;break;case"buffer":d.codepage==65001?g=l.toString("utf8"):d.codepage&&typeof pp<"u"||(g=hn&&Buffer.isBuffer(l)?l.toString("binary"):Nd(l));break;case"array":g=xm(l);break;case"string":g=l;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Ef(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=Ef(g):d.type=="binary"&&typeof pp<"u",g.slice(0,19)=="socialcalc:version:"?CI.to_sheet(d.type=="string"?g:Ef(g),d):a(g,d)}function c(l,d){return Ou(o(l,d),d)}function u(l){for(var d=[],g=zn(l["!ref"]),p,x=Array.isArray(l),_=g.s.r;_<=g.e.r;++_){for(var E=[],P=g.s.c;P<=g.e.c;++P){var L=En({r:_,c:P});if(p=x?(l[_]||[])[P]:l[L],!p||p.v==null){E.push("          ");continue}for(var V=(p.w||(oo(p),p.w)||"").slice(0,10);V.length<10;)V+=" ";E.push(V+(P===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}(),m5=function(){function n(T,D,M){if(T){us(T,T.l||0);for(var U=M.Enum||Oe;T.l<T.length;){var J=T.read_shift(2),oe=U[J]||U[65535],le=T.read_shift(2),ue=T.l+le,xe=oe.f&&oe.f(T,le,M);if(T.l=ue,D(xe,oe,J))return}}}function e(T,D){switch(D.type){case"base64":return t(Gs(ao(T)),D);case"binary":return t(Gs(T),D);case"buffer":case"array":return t(T,D)}throw"Unsupported type "+D.type}function t(T,D){if(!T)return T;var M=D||{},U=M.dense?[]:{},J="Sheet1",oe="",le=0,ue={},xe=[],Ve=[],ze={s:{r:0,c:0},e:{r:0,c:0}},Ze=M.sheetRows||0;if(T[2]==0&&(T[3]==8||T[3]==9)&&T.length>=16&&T[14]==5&&T[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(T[2]==2)M.Enum=Oe,n(T,function(We,_t,$e){switch($e){case 0:M.vers=We,We>=4096&&(M.qpro=!0);break;case 6:ze=We;break;case 204:We&&(oe=We);break;case 222:oe=We;break;case 15:case 51:M.qpro||(We[1].v=We[1].v.slice(1));case 13:case 14:case 16:$e==14&&(We[2]&112)==112&&(We[2]&15)>1&&(We[2]&15)<15&&(We[1].z=M.dateNF||sr[14],M.cellDates&&(We[1].t="d",We[1].v=KA(We[1].v))),M.qpro&&We[3]>le&&(U["!ref"]=br(ze),ue[J]=U,xe.push(J),U=M.dense?[]:{},ze={s:{r:0,c:0},e:{r:0,c:0}},le=We[3],J=oe||"Sheet"+(le+1),oe="");var nt=M.dense?(U[We[0].r]||[])[We[0].c]:U[En(We[0])];if(nt){nt.t=We[1].t,nt.v=We[1].v,We[1].z!=null&&(nt.z=We[1].z),We[1].f!=null&&(nt.f=We[1].f);break}M.dense?(U[We[0].r]||(U[We[0].r]=[]),U[We[0].r][We[0].c]=We[1]):U[En(We[0])]=We[1];break}},M);else if(T[2]==26||T[2]==14)M.Enum=rt,T[2]==14&&(M.qpro=!0,T.l=0),n(T,function(We,_t,$e){switch($e){case 204:J=We;break;case 22:We[1].v=We[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(We[3]>le&&(U["!ref"]=br(ze),ue[J]=U,xe.push(J),U=M.dense?[]:{},ze={s:{r:0,c:0},e:{r:0,c:0}},le=We[3],J="Sheet"+(le+1)),Ze>0&&We[0].r>=Ze)break;M.dense?(U[We[0].r]||(U[We[0].r]=[]),U[We[0].r][We[0].c]=We[1]):U[En(We[0])]=We[1],ze.e.c<We[0].c&&(ze.e.c=We[0].c),ze.e.r<We[0].r&&(ze.e.r=We[0].r);break;case 27:We[14e3]&&(Ve[We[14e3][0]]=We[14e3][1]);break;case 1537:Ve[We[0]]=We[1],We[0]==le&&(J=We[1]);break}},M);else throw new Error("Unrecognized LOTUS BOF "+T[2]);if(U["!ref"]=br(ze),ue[oe||J]=U,xe.push(oe||J),!Ve.length)return{SheetNames:xe,Sheets:ue};for(var at={},Le=[],re=0;re<Ve.length;++re)ue[xe[re]]?(Le.push(Ve[re]||xe[re]),at[Ve[re]]=ue[Ve[re]]||ue[xe[re]]):(Le.push(Ve[re]),at[Ve[re]]={"!ref":"A1"});return{SheetNames:Le,Sheets:at}}function r(T,D){var M=D||{};if(+M.codepage>=0&&Qf(+M.codepage),M.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Ki(),J=zn(T["!ref"]),oe=Array.isArray(T),le=[];ot(U,0,s(1030)),ot(U,6,c(J));for(var ue=Math.min(J.e.r,8191),xe=J.s.r;xe<=ue;++xe)for(var Ve=ii(xe),ze=J.s.c;ze<=J.e.c;++ze){xe===J.s.r&&(le[ze]=mi(ze));var Ze=le[ze]+Ve,at=oe?(T[xe]||[])[ze]:T[Ze];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?ot(U,13,p(xe,ze,at.v)):ot(U,14,_(xe,ze,at.v));else{var Le=oo(at);ot(U,15,d(xe,ze,Le.slice(0,239)))}}return ot(U,1),U.end()}function i(T,D){var M=D||{};if(+M.codepage>=0&&Qf(+M.codepage),M.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Ki();ot(U,0,a(T));for(var J=0,oe=0;J<T.SheetNames.length;++J)(T.Sheets[T.SheetNames[J]]||{})["!ref"]&&ot(U,27,ke(T.SheetNames[J],oe++));var le=0;for(J=0;J<T.SheetNames.length;++J){var ue=T.Sheets[T.SheetNames[J]];if(!(!ue||!ue["!ref"])){for(var xe=zn(ue["!ref"]),Ve=Array.isArray(ue),ze=[],Ze=Math.min(xe.e.r,8191),at=xe.s.r;at<=Ze;++at)for(var Le=ii(at),re=xe.s.c;re<=xe.e.c;++re){at===xe.s.r&&(ze[re]=mi(re));var We=ze[re]+Le,_t=Ve?(ue[at]||[])[re]:ue[We];if(!(!_t||_t.t=="z"))if(_t.t=="n")ot(U,23,B(at,re,le,_t.v));else{var $e=oo(_t);ot(U,22,N(at,re,le,$e.slice(0,239)))}}++le}}return ot(U,1),U.end()}function s(T){var D=Be(2);return D.write_shift(2,T),D}function a(T){var D=Be(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var M=0,U=0,J=0,oe=0;oe<T.SheetNames.length;++oe){var le=T.SheetNames[oe],ue=T.Sheets[le];if(!(!ue||!ue["!ref"])){++J;var xe=gs(ue["!ref"]);M<xe.e.r&&(M=xe.e.r),U<xe.e.c&&(U=xe.e.c)}}return M>8191&&(M=8191),D.write_shift(2,M),D.write_shift(1,J),D.write_shift(1,U),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function o(T,D,M){var U={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&M.qpro?(U.s.c=T.read_shift(1),T.l++,U.s.r=T.read_shift(2),U.e.c=T.read_shift(1),T.l++,U.e.r=T.read_shift(2),U):(U.s.c=T.read_shift(2),U.s.r=T.read_shift(2),D==12&&M.qpro&&(T.l+=2),U.e.c=T.read_shift(2),U.e.r=T.read_shift(2),D==12&&M.qpro&&(T.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(T){var D=Be(8);return D.write_shift(2,T.s.c),D.write_shift(2,T.s.r),D.write_shift(2,T.e.c),D.write_shift(2,T.e.r),D}function u(T,D,M){var U=[{c:0,r:0},{t:"n",v:0},0,0];return M.qpro&&M.vers!=20768?(U[0].c=T.read_shift(1),U[3]=T.read_shift(1),U[0].r=T.read_shift(2),T.l+=2):(U[2]=T.read_shift(1),U[0].c=T.read_shift(2),U[0].r=T.read_shift(2)),U}function l(T,D,M){var U=T.l+D,J=u(T,D,M);if(J[1].t="s",M.vers==20768){T.l++;var oe=T.read_shift(1);return J[1].v=T.read_shift(oe,"utf8"),J}return M.qpro&&T.l++,J[1].v=T.read_shift(U-T.l,"cstr"),J}function d(T,D,M){var U=Be(7+M.length);U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(1,39);for(var J=0;J<U.length;++J){var oe=M.charCodeAt(J);U.write_shift(1,oe>=128?95:oe)}return U.write_shift(1,0),U}function g(T,D,M){var U=u(T,D,M);return U[1].v=T.read_shift(2,"i"),U}function p(T,D,M){var U=Be(7);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(2,M,"i"),U}function x(T,D,M){var U=u(T,D,M);return U[1].v=T.read_shift(8,"f"),U}function _(T,D,M){var U=Be(13);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(8,M,"f"),U}function E(T,D,M){var U=T.l+D,J=u(T,D,M);if(J[1].v=T.read_shift(8,"f"),M.qpro)T.l=U;else{var oe=T.read_shift(2);K(T.slice(T.l,T.l+oe),J),T.l+=oe}return J}function P(T,D,M){var U=D&32768;return D&=-32769,D=(U?T:0)+(D>=8192?D-16384:D),(U?"":"$")+(M?mi(D):ii(D))}var L={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},V=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function K(T,D){us(T,0);for(var M=[],U=0,J="",oe="",le="",ue="";T.l<T.length;){var xe=T[T.l++];switch(xe){case 0:M.push(T.read_shift(8,"f"));break;case 1:oe=P(D[0].c,T.read_shift(2),!0),J=P(D[0].r,T.read_shift(2),!1),M.push(oe+J);break;case 2:{var Ve=P(D[0].c,T.read_shift(2),!0),ze=P(D[0].r,T.read_shift(2),!1);oe=P(D[0].c,T.read_shift(2),!0),J=P(D[0].r,T.read_shift(2),!1),M.push(Ve+ze+":"+oe+J)}break;case 3:if(T.l<T.length){console.error("WK1 premature formula end");return}break;case 4:M.push("("+M.pop()+")");break;case 5:M.push(T.read_shift(2));break;case 6:{for(var Ze="";xe=T[T.l++];)Ze+=String.fromCharCode(xe);M.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:M.push("-"+M.pop());break;case 23:M.push("+"+M.pop());break;case 22:M.push("NOT("+M.pop()+")");break;case 20:case 21:ue=M.pop(),le=M.pop(),M.push(["AND","OR"][xe-20]+"("+le+","+ue+")");break;default:if(xe<32&&V[xe])ue=M.pop(),le=M.pop(),M.push(le+V[xe]+ue);else if(L[xe]){if(U=L[xe][1],U==69&&(U=T[T.l++]),U>M.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+M.join("|")+"|");return}var at=M.slice(-U);M.length-=U,M.push(L[xe][0]+"("+at.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}M.length==1?D[1].f=""+M[0]:console.error("WK1 bad formula parse |"+M.join("|")+"|")}function ie(T){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=T.read_shift(2),D[3]=T[T.l++],D[0].c=T[T.l++],D}function ae(T,D){var M=ie(T);return M[1].t="s",M[1].v=T.read_shift(D-4,"cstr"),M}function N(T,D,M,U){var J=Be(6+U.length);J.write_shift(2,T),J.write_shift(1,M),J.write_shift(1,D),J.write_shift(1,39);for(var oe=0;oe<U.length;++oe){var le=U.charCodeAt(oe);J.write_shift(1,le>=128?95:le)}return J.write_shift(1,0),J}function A(T,D){var M=ie(T);M[1].v=T.read_shift(2);var U=M[1].v>>1;if(M[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return M[1].v=U,M}function C(T,D){var M=ie(T),U=T.read_shift(4),J=T.read_shift(4),oe=T.read_shift(2);if(oe==65535)return U===0&&J===3221225472?(M[1].t="e",M[1].v=15):U===0&&J===3489660928?(M[1].t="e",M[1].v=42):M[1].v=0,M;var le=oe&32768;return oe=(oe&32767)-16446,M[1].v=(1-le*2)*(J*Math.pow(2,oe+32)+U*Math.pow(2,oe)),M}function B(T,D,M,U){var J=Be(14);if(J.write_shift(2,T),J.write_shift(1,M),J.write_shift(1,D),U==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var oe=0,le=0,ue=0,xe=0;return U<0&&(oe=1,U=-U),le=Math.log2(U)|0,U/=Math.pow(2,le-31),xe=U>>>0,xe&2147483648||(U/=2,++le,xe=U>>>0),U-=xe,xe|=2147483648,xe>>>=0,U*=Math.pow(2,32),ue=U>>>0,J.write_shift(4,ue),J.write_shift(4,xe),le+=16383+(oe?32768:0),J.write_shift(2,le),J}function b(T,D){var M=C(T);return T.l+=D-14,M}function S(T,D){var M=ie(T),U=T.read_shift(4);return M[1].v=U>>6,M}function R(T,D){var M=ie(T),U=T.read_shift(8,"f");return M[1].v=U,M}function se(T,D){var M=R(T);return T.l+=D-10,M}function me(T,D){return T[T.l+D-1]==0?T.read_shift(D,"cstr"):""}function Ee(T,D){var M=T[T.l++];M>D-1&&(M=D-1);for(var U="";U.length<M;)U+=String.fromCharCode(T[T.l++]);return U}function Pe(T,D,M){if(!(!M.qpro||D<21)){var U=T.read_shift(1);T.l+=17,T.l+=1,T.l+=2;var J=T.read_shift(D-21,"cstr");return[U,J]}}function _e(T,D){for(var M={},U=T.l+D;T.l<U;){var J=T.read_shift(2);if(J==14e3){for(M[J]=[0,""],M[J][0]=T.read_shift(2);T[T.l];)M[J][1]+=String.fromCharCode(T[T.l]),T.l++;T.l++}}return M}function ke(T,D){var M=Be(5+T.length);M.write_shift(2,14e3),M.write_shift(2,D);for(var U=0;U<T.length;++U){var J=T.charCodeAt(U);M[M.l++]=J>127?95:J}return M[M.l++]=0,M}var Oe={0:{n:"BOF",f:II},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:l},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:l},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:me},222:{n:"SHEETNAMELP",f:Ee},65535:{n:""}},rt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ae},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:b},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:_e},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:se},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:me},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Pe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:r,book_to_wk3:i,to_workbook:e}}(),TB=/^\s|\s$|[\t\n\r]/;function RI(n,e){if(!e.bookSST)return"";var t=[Ar];t[t.length]=st("sst",null,{xmlns:Ah[0],count:n.Count,uniqueCount:n.Unique});for(var r=0;r!=n.length;++r)if(n[r]!=null){var i=n[r],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(TB)&&(s+=' xml:space="preserve"'),s+=">"+wn(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function bB(n){return[n.read_shift(4),n.read_shift(4)]}function AB(n,e){return e||(e=Be(8)),e.write_shift(4,n.Count),e.write_shift(4,n.Unique),e}var IB=g9;function SB(n){var e=Ki();He(e,159,AB(n));for(var t=0;t<n.length;++t)He(e,19,IB(n[t]));return He(e,160),e.end()}function PB(n){for(var e=[],t=n.split(""),r=0;r<t.length;++r)e[r]=t[r].charCodeAt(0);return e}function LI(n){var e=0,t,r=PB(n),i=r.length+1,s,a,o,c,u;for(t=Su(i),t[0]=r.length,s=1;s!=i;++s)t[s]=r[s-1];for(s=i-1;s>=0;--s)a=t[s],o=e&16384?1:0,c=e<<1&32767,u=o|c,e=u^a;return e^52811}var NB=function(){function n(i,s){switch(s.type){case"base64":return e(ao(i),s);case"binary":return e(i,s);case"buffer":return e(hn&&Buffer.isBuffer(i)?i.toString("binary"):Nd(i),s);case"array":return e(xm(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(l,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,x,_=-1;x=g.exec(l);){switch(x[0]){case"\\cell":var E=l.slice(p,g.lastIndex-x[0].length);if(E[0]==" "&&(E=E.slice(1)),++_,E.length){var P={v:E,t:"s"};Array.isArray(o)?o[d][_]=P:o[En({r:d,c:_})]=P}break}p=g.lastIndex}_>u.e.c&&(u.e.c=_)}),o["!ref"]=br(u),o}function t(i,s){return Ou(n(i,s),s)}function r(i){for(var s=["{\\rtf1\\ansi"],a=zn(i["!ref"]),o,c=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var l=a.s.c;l<=a.e.c;++l)s.push("\\cellx"+(l+1));for(s.push("\\pard\\intbl"),l=a.s.c;l<=a.e.c;++l){var d=En({r:u,c:l});o=c?(i[u]||[])[l]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(oo(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:n,from_sheet:r}}();function g5(n){for(var e=0,t=1;e!=3;++e)t=t*256+(n[e]>255?255:n[e]<0?0:n[e]);return t.toString(16).toUpperCase().slice(1)}var kB=6,to=kB;function Tp(n){return Math.floor((n+Math.round(128/to)/256)*to)}function bp(n){return Math.floor((n-5)/to*100+.5)/100}function E1(n){return Math.round((n*to+5)/to*256)/256}function Hv(n){n.width?(n.wpx=Tp(n.width),n.wch=bp(n.wpx),n.MDW=to):n.wpx?(n.wch=bp(n.wpx),n.width=E1(n.wch),n.MDW=to):typeof n.wch=="number"&&(n.width=E1(n.wch),n.wpx=Tp(n.width),n.MDW=to),n.customWidth&&delete n.customWidth}var CB=96,DI=CB;function Ap(n){return n*96/DI}function FI(n){return n*DI/96}function RB(n){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var r=t[0];r<=t[1];++r)n[r]!=null&&(e[e.length]=st("numFmt",null,{numFmtId:r,formatCode:wn(n[r])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=st("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function LB(n){var e=[];return e[e.length]=st("cellXfs",null),n.forEach(function(t){e[e.length]=st("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=st("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function OI(n,e){var t=[Ar,st("styleSheet",null,{xmlns:Ah[0],"xmlns:vt":Vr.vt})],r;return n.SSF&&(r=RB(n.SSF))!=null&&(t[t.length]=r),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(r=LB(e.cellXfs))&&(t[t.length]=r),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function DB(n,e){var t=n.read_shift(2),r=gi(n);return[t,r]}function FB(n,e,t){t||(t=Be(6+4*e.length)),t.write_shift(2,n),jr(e,t);var r=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),r}function OB(n,e,t){var r={};r.sz=n.read_shift(2)/20;var i=T9(n);i.fItalic&&(r.italic=1),i.fCondense&&(r.condense=1),i.fExtend&&(r.extend=1),i.fShadow&&(r.shadow=1),i.fOutline&&(r.outline=1),i.fStrikeout&&(r.strike=1);var s=n.read_shift(2);switch(s===700&&(r.bold=1),n.read_shift(2)){case 1:r.vertAlign="superscript";break;case 2:r.vertAlign="subscript";break}var a=n.read_shift(1);a!=0&&(r.underline=a);var o=n.read_shift(1);o>0&&(r.family=o);var c=n.read_shift(1);switch(c>0&&(r.charset=c),n.l++,r.color=E9(n),n.read_shift(1)){case 1:r.scheme="major";break;case 2:r.scheme="minor";break}return r.name=gi(n),r}function MB(n,e){e||(e=Be(25+4*32)),e.write_shift(2,n.sz*20),b9(n,e),e.write_shift(2,n.bold?700:400);var t=0;n.vertAlign=="superscript"?t=1:n.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,n.underline||0),e.write_shift(1,n.family||0),e.write_shift(1,n.charset||0),e.write_shift(1,0),xp(n.color,e);var r=0;return r=2,e.write_shift(1,r),jr(n.name,e),e.length>e.l?e.slice(0,e.l):e}var BB=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],xg,VB=Ia;function v5(n,e){e||(e=Be(4*3+8*7+16*1)),xg||(xg=Lv(BB));var t=xg[n.patternType];t==null&&(t=40),e.write_shift(4,t);var r=0;if(t!=40)for(xp({auto:1},e),xp({auto:1},e);r<12;++r)e.write_shift(4,0);else{for(;r<4;++r)e.write_shift(4,0);for(;r<12;++r)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function UB(n,e){var t=n.l+e,r=n.read_shift(2),i=n.read_shift(2);return n.l=t,{ixfe:r,numFmtId:i}}function MI(n,e,t){t||(t=Be(16)),t.write_shift(2,e||0),t.write_shift(2,n.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var r=0;return t.write_shift(1,r),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function ef(n,e){return e||(e=Be(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var jB=Ia;function qB(n,e){return e||(e=Be(51)),e.write_shift(1,0),ef(null,e),ef(null,e),ef(null,e),ef(null,e),ef(null,e),e.length>e.l?e.slice(0,e.l):e}function zB(n,e){return e||(e=Be(12+4*10)),e.write_shift(4,n.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),wp(n.name||"",e),e.length>e.l?e.slice(0,e.l):e}function WB(n,e,t){var r=Be(2052);return r.write_shift(4,n),wp(e,r),wp(t,r),r.length>r.l?r.slice(0,r.l):r}function HB(n,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&++t}),t!=0&&(He(n,615,Ys(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&He(n,44,FB(i,e[i]))}),He(n,616))}}function $B(n){var e=1;He(n,611,Ys(e)),He(n,43,MB({sz:12,color:{theme:1},name:"Calibri",family:2})),He(n,612)}function GB(n){var e=2;He(n,603,Ys(e)),He(n,45,v5({patternType:"none"})),He(n,45,v5({patternType:"gray125"})),He(n,604)}function KB(n){var e=1;He(n,613,Ys(e)),He(n,46,qB()),He(n,614)}function YB(n){var e=1;He(n,626,Ys(e)),He(n,47,MI({numFmtId:0},65535)),He(n,627)}function XB(n,e){He(n,617,Ys(e.length)),e.forEach(function(t){He(n,47,MI(t,0))}),He(n,618)}function JB(n){var e=1;He(n,619,Ys(e)),He(n,48,zB({xfId:0,name:"Normal"})),He(n,620)}function QB(n){var e=0;He(n,505,Ys(e)),He(n,506)}function ZB(n){var e=0;He(n,508,WB(e,"TableStyleMedium9","PivotStyleMedium4")),He(n,509)}function eV(n,e){var t=Ki();return He(t,278),HB(t,n.SSF),$B(t),GB(t),KB(t),YB(t),XB(t,e.cellXfs),JB(t),QB(t),ZB(t),He(t,279),t.end()}function BI(n,e){if(e&&e.themeXLSX)return e.themeXLSX;if(n&&typeof n.raw=="string")return n.raw;var t=[Ar];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function tV(n,e){return{flags:n.read_shift(4),version:n.read_shift(4),name:gi(n)}}function nV(n){var e=Be(12+2*n.name.length);return e.write_shift(4,n.flags),e.write_shift(4,n.version),jr(n.name,e),e.slice(0,e.l)}function rV(n){for(var e=[],t=n.read_shift(4);t-- >0;)e.push([n.read_shift(4),n.read_shift(4)]);return e}function iV(n){var e=Be(4+8*n.length);e.write_shift(4,n.length);for(var t=0;t<n.length;++t)e.write_shift(4,n[t][0]),e.write_shift(4,n[t][1]);return e}function sV(n,e){var t=Be(8+2*e.length);return t.write_shift(4,n),jr(e,t),t.slice(0,t.l)}function aV(n){return n.l+=4,n.read_shift(4)!=0}function oV(n,e){var t=Be(8);return t.write_shift(4,n),t.write_shift(4,1),t}function cV(){var n=Ki();return He(n,332),He(n,334,Ys(1)),He(n,335,nV({name:"XLDAPR",version:12e4,flags:3496657072})),He(n,336),He(n,339,sV(1,"XLDAPR")),He(n,52),He(n,35,Ys(514)),He(n,4096,Ys(0)),He(n,4097,Is(1)),He(n,36),He(n,53),He(n,340),He(n,337,oV(1)),He(n,51,iV([[1,0]])),He(n,338),He(n,333),n.end()}function VI(){var n=[Ar];return n.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),n.join("")}function uV(n){var e={};e.i=n.read_shift(4);var t={};t.r=n.read_shift(4),t.c=n.read_shift(4),e.r=En(t);var r=n.read_shift(1);return r&2&&(e.l="1"),r&8&&(e.a="1"),e}var Nl=1024;function UI(n,e){for(var t=[21600,21600],r=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[st("xml",null,{"xmlns:v":hs.v,"xmlns:o":hs.o,"xmlns:x":hs.x,"xmlns:mv":hs.mv}).replace(/\/>/,">"),st("o:shapelayout",st("o:idmap",null,{"v:ext":"edit",data:n}),{"v:ext":"edit"}),st("v:shapetype",[st("v:stroke",null,{joinstyle:"miter"}),st("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:r})];Nl<n*1e3;)Nl+=1e3;return e.forEach(function(s){var a=Ur(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?st("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=st("v:fill",c,o),l={on:"t",obscured:"t"};++Nl,i=i.concat(["<v:shape"+nd({id:"_x0000_s"+Nl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,st("v:shadow",null,l),st("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",ti("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),ti("x:AutoFill","False"),ti("x:Row",String(a.r)),ti("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function jI(n){var e=[Ar,st("comments",null,{xmlns:Ah[0]})],t=[];return e.push("<authors>"),n.forEach(function(r){r[1].forEach(function(i){var s=wn(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),n.forEach(function(r){var i=0,s=[];if(r[1][0]&&r[1][0].T&&r[1][0].ID?i=t.indexOf("tc="+r[1][0].ID):r[1].forEach(function(c){c.a&&(i=t.indexOf(wn(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+r[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(ti("t",wn(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(ti("t",wn(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function lV(n,e,t){var r=[Ar,st("ThreadedComments",null,{xmlns:Vr.TCMNT}).replace(/[\/]>/,">")];return n.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),r.push(st("threadedComment",ti("text",a.t||""),c))})}),r.push("</ThreadedComments>"),r.join("")}function hV(n){var e=[Ar,st("personList",null,{xmlns:Vr.TCMNT,"xmlns:x":Ah[0]}).replace(/[\/]>/,">")];return n.forEach(function(t,r){e.push(st("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+r).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function fV(n){var e={};e.iauthor=n.read_shift(4);var t=Uu(n);return e.rfx=t.s,e.ref=En(t.s),n.l+=16,e}function dV(n,e){return e==null&&(e=Be(36)),e.write_shift(4,n[1].iauthor),Sh(n[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var pV=gi;function mV(n){return jr(n.slice(0,54))}function gV(n){var e=Ki(),t=[];return He(e,628),He(e,630),n.forEach(function(r){r[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),He(e,632,mV(i.a)))})}),He(e,631),He(e,633),n.forEach(function(r){r[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Ur(r[0]),e:Ur(r[0])};He(e,635,dV([s,i])),i.t&&i.t.length>0&&He(e,637,_9(i)),He(e,636),delete i.iauthor})}),He(e,634),He(e,629),e.end()}function vV(n,e){e.FullPaths.forEach(function(t,r){if(r!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Sn.utils.cfb_add(n,i,e.FileIndex[r].content)}})}var qI=["xlsb","xlsm","xlam","biff8","xla"],_V=function(){var n=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(r,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,l=a.length>0?parseInt(a,10)|0:0;return o?l+=e.c:--l,c?u+=e.r:--u,i+(o?"":"$")+mi(l)+(c?"":"$")+ii(u)}return function(i,s){return e=s,i.replace(n,t)}}(),$v=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Gv=function(){return function(e,t){return e.replace($v,function(r,i,s,a,o,c){var u=Uv(a)-(s?0:t.c),l=Vv(c)-(o?0:t.r),d=l==0?"":o?l+1:"["+l+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}}();function yV(n,e){return n.replace($v,function(t,r,i,s,a,o){return r+(i=="$"?i+s:mi(Uv(s)+e.c))+(a=="$"?a+o:ii(Vv(o)+e.r))})}function wV(n){return n.length!=1}function xr(n){n.l+=1}function pc(n,e){var t=n.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function zI(n,e,t){var r=2;if(t){if(t.biff>=2&&t.biff<=5)return WI(n);t.biff==12&&(r=4)}var i=n.read_shift(r),s=n.read_shift(r),a=pc(n),o=pc(n);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function WI(n){var e=pc(n),t=pc(n),r=n.read_shift(1),i=n.read_shift(1);return{s:{r:e[0],c:r,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function xV(n,e,t){if(t.biff<8)return WI(n);var r=n.read_shift(t.biff==12?4:2),i=n.read_shift(t.biff==12?4:2),s=pc(n),a=pc(n);return{s:{r,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function HI(n,e,t){if(t&&t.biff>=2&&t.biff<=5)return EV(n);var r=n.read_shift(t&&t.biff==12?4:2),i=pc(n);return{r,c:i[0],cRel:i[1],rRel:i[2]}}function EV(n){var e=pc(n),t=n.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function TV(n){var e=n.read_shift(2),t=n.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function bV(n,e,t){var r=t&&t.biff?t.biff:8;if(r>=2&&r<=5)return AV(n);var i=n.read_shift(r>=12?4:2),s=n.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function AV(n){var e=n.read_shift(2),t=n.read_shift(1),r=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,r==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:r}}function IV(n,e,t){var r=(n[n.l++]&96)>>5,i=zI(n,t.biff>=2&&t.biff<=5?6:8,t);return[r,i]}function SV(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}var a=zI(n,s,t);return[r,i,a]}function PV(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t&&t.biff>8?12:t.biff<8?6:8,[r]}function NV(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=8;if(t)switch(t.biff){case 5:n.l+=12,s=6;break;case 12:s=12;break}return n.l+=s,[r,i]}function kV(n,e,t){var r=(n[n.l++]&96)>>5,i=xV(n,e-1,t);return[r,i]}function CV(n,e,t){var r=(n[n.l++]&96)>>5;return n.l+=t.biff==2?6:t.biff==12?14:7,[r]}function _5(n){var e=n[n.l+1]&1,t=1;return n.l+=4,[e,t]}function RV(n,e,t){n.l+=2;for(var r=n.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=r;++s)i.push(n.read_shift(t&&t.biff==2?1:2));return i}function LV(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function DV(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=2,[r,n.read_shift(t&&t.biff==2?1:2)]}function FV(n){var e=n[n.l+1]&255?1:0;return n.l+=2,[e,n.read_shift(2)]}function OV(n,e,t){var r=n[n.l+1]&255?1:0;return n.l+=t&&t.biff==2?3:4,[r]}function $I(n){var e=n.read_shift(1),t=n.read_shift(1);return[e,t]}function MV(n){return n.read_shift(2),$I(n)}function BV(n){return n.read_shift(2),$I(n)}function VV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=HI(n,0,t);return[r,i]}function UV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=bV(n,0,t);return[r,i]}function jV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(2);t&&t.biff==5&&(n.l+=12);var s=HI(n,0,t);return[r,i,s]}function qV(n,e,t){var r=(n[n.l]&96)>>5;n.l+=1;var i=n.read_shift(t&&t.biff<=3?1:2);return[qU[i],YI[i],r]}function zV(n,e,t){var r=n[n.l++],i=n.read_shift(1),s=t&&t.biff<=3?[r==88?-1:0,n.read_shift(1)]:WV(n);return[i,(s[0]===0?YI:jU)[s[1]]]}function WV(n){return[n[n.l+1]>>7,n.read_shift(2)&32767]}function HV(n,e,t){n.l+=t&&t.biff==2?3:4}function $V(n,e,t){if(n.l++,t&&t.biff==12)return[n.read_shift(4,"i"),0];var r=n.read_shift(2),i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function GV(n){return n.l++,Rd[n.read_shift(1)]}function KV(n){return n.l++,n.read_shift(2)}function YV(n){return n.l++,n.read_shift(1)!==0}function XV(n){return n.l++,Ph(n)}function JV(n,e,t){return n.l++,PI(n,e-1,t)}function QV(n,e){var t=[n.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=j9(n,1)?"TRUE":"FALSE",e!=12&&(n.l+=7);break;case 37:case 16:t[1]=Rd[n[n.l]],n.l+=e==12?4:8;break;case 0:n.l+=8;break;case 1:t[1]=Ph(n);break;case 2:t[1]=H9(n,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function ZV(n,e,t){for(var r=n.read_shift(t.biff==12?4:2),i=[],s=0;s!=r;++s)i.push((t.biff==12?Uu:K9)(n));return i}function eU(n,e,t){var r=0,i=0;t.biff==12?(r=n.read_shift(4),i=n.read_shift(4)):(i=1+n.read_shift(1),r=1+n.read_shift(2)),t.biff>=2&&t.biff<8&&(--r,--i==0&&(i=256));for(var s=0,a=[];s!=r&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=QV(n,t.biff);return a}function tU(n,e,t){var r=n.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=n.read_shift(i);switch(t.biff){case 2:n.l+=5;break;case 3:case 4:n.l+=8;break;case 5:n.l+=12;break}return[r,0,s]}function nU(n,e,t){if(t.biff==5)return rU(n);var r=n.read_shift(1)>>>5&3,i=n.read_shift(2),s=n.read_shift(4);return[r,i,s]}function rU(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2,"i");n.l+=8;var r=n.read_shift(2);return n.l+=12,[e,t,r]}function iU(n,e,t){var r=n.read_shift(1)>>>5&3;n.l+=t&&t.biff==2?3:4;var i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function sU(n,e,t){var r=n.read_shift(1)>>>5&3,i=n.read_shift(t&&t.biff==2?1:2);return[r,i]}function aU(n,e,t){var r=n.read_shift(1)>>>5&3;return n.l+=4,t.biff<8&&n.l--,t.biff==12&&(n.l+=2),[r]}function oU(n,e,t){var r=(n[n.l++]&96)>>5,i=n.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return n.l+=s,[r,i]}var cU=Ia,uU=Ia,lU=Ia;function Ld(n,e,t){return n.l+=2,[TV(n)]}function Kv(n){return n.l+=6,[]}var hU=Ld,fU=Kv,dU=Kv,pU=Ld;function GI(n){return n.l+=2,[II(n),n.read_shift(2)&1]}var mU=Ld,gU=GI,vU=Kv,_U=Ld,yU=Ld,wU=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function xU(n){n.l+=2;var e=n.read_shift(2),t=n.read_shift(2),r=n.read_shift(4),i=n.read_shift(2),s=n.read_shift(2),a=wU[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:r,c:i,C:s}}function EU(n){return n.l+=2,[n.read_shift(4)]}function TU(n,e,t){return n.l+=5,n.l+=2,n.l+=t.biff==2?1:4,["PTGSHEET"]}function bU(n,e,t){return n.l+=t.biff==2?4:5,["PTGENDSHEET"]}function AU(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function IU(n){var e=n.read_shift(1)>>>5&3,t=n.read_shift(2);return[e,t]}function SU(n){return n.l+=4,[0,0]}var y5={1:{n:"PtgExp",f:$V},2:{n:"PtgTbl",f:lU},3:{n:"PtgAdd",f:xr},4:{n:"PtgSub",f:xr},5:{n:"PtgMul",f:xr},6:{n:"PtgDiv",f:xr},7:{n:"PtgPower",f:xr},8:{n:"PtgConcat",f:xr},9:{n:"PtgLt",f:xr},10:{n:"PtgLe",f:xr},11:{n:"PtgEq",f:xr},12:{n:"PtgGe",f:xr},13:{n:"PtgGt",f:xr},14:{n:"PtgNe",f:xr},15:{n:"PtgIsect",f:xr},16:{n:"PtgUnion",f:xr},17:{n:"PtgRange",f:xr},18:{n:"PtgUplus",f:xr},19:{n:"PtgUminus",f:xr},20:{n:"PtgPercent",f:xr},21:{n:"PtgParen",f:xr},22:{n:"PtgMissArg",f:xr},23:{n:"PtgStr",f:JV},26:{n:"PtgSheet",f:TU},27:{n:"PtgEndSheet",f:bU},28:{n:"PtgErr",f:GV},29:{n:"PtgBool",f:YV},30:{n:"PtgInt",f:KV},31:{n:"PtgNum",f:XV},32:{n:"PtgArray",f:CV},33:{n:"PtgFunc",f:qV},34:{n:"PtgFuncVar",f:zV},35:{n:"PtgName",f:tU},36:{n:"PtgRef",f:VV},37:{n:"PtgArea",f:IV},38:{n:"PtgMemArea",f:iU},39:{n:"PtgMemErr",f:cU},40:{n:"PtgMemNoMem",f:uU},41:{n:"PtgMemFunc",f:sU},42:{n:"PtgRefErr",f:aU},43:{n:"PtgAreaErr",f:PV},44:{n:"PtgRefN",f:UV},45:{n:"PtgAreaN",f:kV},46:{n:"PtgMemAreaN",f:AU},47:{n:"PtgMemNoMemN",f:IU},57:{n:"PtgNameX",f:nU},58:{n:"PtgRef3d",f:jV},59:{n:"PtgArea3d",f:SV},60:{n:"PtgRefErr3d",f:oU},61:{n:"PtgAreaErr3d",f:NV},255:{}},PU={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},NU={1:{n:"PtgElfLel",f:GI},2:{n:"PtgElfRw",f:_U},3:{n:"PtgElfCol",f:hU},6:{n:"PtgElfRwV",f:yU},7:{n:"PtgElfColV",f:pU},10:{n:"PtgElfRadical",f:mU},11:{n:"PtgElfRadicalS",f:vU},13:{n:"PtgElfColS",f:fU},15:{n:"PtgElfColSV",f:dU},16:{n:"PtgElfRadicalLel",f:gU},25:{n:"PtgList",f:xU},29:{n:"PtgSxName",f:EU},255:{}},kU={0:{n:"PtgAttrNoop",f:SU},1:{n:"PtgAttrSemi",f:OV},2:{n:"PtgAttrIf",f:DV},4:{n:"PtgAttrChoose",f:RV},8:{n:"PtgAttrGoto",f:LV},16:{n:"PtgAttrSum",f:HV},32:{n:"PtgAttrBaxcel",f:_5},33:{n:"PtgAttrBaxcel",f:_5},64:{n:"PtgAttrSpace",f:MV},65:{n:"PtgAttrSpaceSemi",f:BV},128:{n:"PtgAttrIfError",f:FV},255:{}};function CU(n,e,t,r){if(r.biff<8)return Ia(n,e);for(var i=n.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=eU(n,0,r),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=ZV(n,t[a][1],r),s.push(t[a][2]);break;case"PtgExp":r&&r.biff==12&&(t[a][1][1]=n.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-n.l,e!==0&&s.push(Ia(n,e)),s}function RU(n,e,t){for(var r=n.l+e,i,s,a=[];r!=n.l;)e=r-n.l,s=n[n.l],i=y5[s]||y5[PU[s]],(s===24||s===25)&&(i=(s===24?NU:kU)[n[n.l+1]]),!i||!i.f?Ia(n,e):a.push([i.n,i.f(n,e,t)]);return a}function LU(n){for(var e=[],t=0;t<n.length;++t){for(var r=n[t],i=[],s=0;s<r.length;++s){var a=r[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var DU={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function FU(n,e){if(!n&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(n)?"'"+n+"'":n}function KI(n,e,t){if(!n)return"SH33TJSERR0";if(t.biff>8&&(!n.XTI||!n.XTI[e]))return n.SheetNames[e];if(!n.XTI)return"SH33TJSERR6";var r=n.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":n.XTI[e-1];if(!r)return"SH33TJSERR1";var i="";if(t.biff>8)switch(n[r[0]][0]){case 357:return i=r[1]==-1?"#REF":n.SheetNames[r[1]],r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 358:return t.SID!=null?n.SheetNames[t.SID]:"SH33TJSSAME"+n[r[0]][0];case 355:default:return"SH33TJSSRC"+n[r[0]][0]}switch(n[r[0]][0][0]){case 1025:return i=r[1]==-1?"#REF":n.SheetNames[r[1]]||"SH33TJSERR3",r[1]==r[2]?i:i+":"+n.SheetNames[r[2]];case 14849:return n[r[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return n[r[0]][0][3]?(i=r[1]==-1?"#REF":n[r[0]][0][3][r[1]]||"SH33TJSERR4",r[1]==r[2]?i:i+":"+n[r[0]][0][3][r[2]]):"SH33TJSERR2"}}function w5(n,e,t){var r=KI(n,e,t);return r=="#REF"?r:FU(r,t)}function lh(n,e,t,r,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],c,u,l,d=0,g=0,p,x="";if(!n[0]||!n[0][0])return"";for(var _=-1,E="",P=0,L=n[0].length;P<L;++P){var V=n[0][P];switch(V[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),_>=0){switch(n[0][_][1][0]){case 0:E=rr(" ",n[0][_][1][1]);break;case 1:E=rr("\r",n[0][_][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][_][1][0])}u=u+E,_=-1}o.push(u+DU[V[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":l=bf(V[1][1],a,i),o.push(Af(l,s));break;case"PtgRefN":l=t?bf(V[1][1],t,i):V[1][1],o.push(Af(l,s));break;case"PtgRef3d":d=V[1][1],l=bf(V[1][2],a,i),x=w5(r,d,i),o.push(x+"!"+Af(l,s));break;case"PtgFunc":case"PtgFuncVar":var K=V[1][0],ie=V[1][1];K||(K=0),K&=127;var ae=K==0?[]:o.slice(-K);o.length-=K,ie==="User"&&(ie=ae.shift()),o.push(ie+"("+ae.join(",")+")");break;case"PtgBool":o.push(V[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(V[1]);break;case"PtgNum":o.push(String(V[1]));break;case"PtgStr":o.push('"'+V[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(V[1]);break;case"PtgAreaN":p=i5(V[1][1],t?{s:t}:a,i),o.push(yg(p,i));break;case"PtgArea":p=i5(V[1][1],a,i),o.push(yg(p,i));break;case"PtgArea3d":d=V[1][1],p=V[1][2],x=w5(r,d,i),o.push(x+"!"+yg(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=V[1][2];var N=(r.names||[])[g-1]||(r[0]||[])[g],A=N?N.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var C=V[1][1];g=V[1][2];var B;if(i.biff<=5)C<0&&(C=-C),r[C]&&(B=r[C][g]);else{var b="";if(((r[C]||[])[0]||[])[0]==14849||(((r[C]||[])[0]||[])[0]==1025?r[C][g]&&r[C][g].itab>0&&(b=r.SheetNames[r[C][g].itab-1]+"!"):b=r.SheetNames[g-1]+"!"),r[C]&&r[C][g])b+=r[C][g].Name;else if(r[0]&&r[0][g])b+=r[0][g].Name;else{var S=(KI(r,C,i)||"").split(";;");S[g-1]?b=S[g-1]:b+="SH33TJSERRX"}o.push(b);break}B||(B={Name:"SH33TJSERRY"}),o.push(B.Name);break;case"PtgParen":var R="(",se=")";if(_>=0){switch(E="",n[0][_][1][0]){case 2:R=rr(" ",n[0][_][1][1])+R;break;case 3:R=rr("\r",n[0][_][1][1])+R;break;case 4:se=rr(" ",n[0][_][1][1])+se;break;case 5:se=rr("\r",n[0][_][1][1])+se;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+n[0][_][1][0])}_=-1}o.push(R+o.pop()+se);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":l={c:V[1][1],r:V[1][0]};var me={c:t.c,r:t.r};if(r.sharedf[En(l)]){var Ee=r.sharedf[En(l)];o.push(lh(Ee,a,me,r,i))}else{var Pe=!1;for(c=0;c!=r.arrayf.length;++c)if(u=r.arrayf[c],!(l.c<u[0].s.c||l.c>u[0].e.c)&&!(l.r<u[0].s.r||l.r>u[0].e.r)){o.push(lh(u[1],a,me,r,i)),Pe=!0;break}Pe||o.push(V[1])}break;case"PtgArray":o.push("{"+LU(V[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=P;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+V[1].idx+"[#"+V[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(V));default:throw new Error("Unrecognized Formula Token: "+String(V))}var _e=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&_e.indexOf(n[0][P][0])==-1){V=n[0][_];var ke=!0;switch(V[1][0]){case 4:ke=!1;case 0:E=rr(" ",V[1][1]);break;case 5:ke=!1;case 1:E=rr("\r",V[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+V[1][0])}o.push((ke?E:"")+o.pop()+(ke?"":E)),_=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function OU(n){if(n==null){var e=Be(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof n=="number")return Pu(n);return Pu(0)}function MU(n,e,t,r,i){var s=Nu(e,t,i),a=OU(n.v),o=Be(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Be(n.bf.length),l=0;l<n.bf.length;++l)u[l]=n.bf[l];var d=ei([s,a,o,u]);return d}function Em(n,e,t){var r=n.read_shift(4),i=RU(n,r,t),s=n.read_shift(4),a=s>0?CU(n,s,i,t):null;return[i,a]}var BU=Em,Tm=Em,VU=Em,UU=Em,jU={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},YI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qU={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function zU(n){var e="of:="+n.replace($v,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function WU(n){return n.replace(/\./,"!")}var If=typeof Map<"u";function Yv(n,e,t){var r=0,i=n.length;if(t){if(If?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=If?t.get(e):t[e];r<s.length;++r)if(n[s[r]].t===e)return n.Count++,s[r]}}else for(;r<i;++r)if(n[r].t===e)return n.Count++,r;return n[i]={t:e},n.Count++,n.Unique++,t&&(If?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function bm(n,e){var t={min:n+1,max:n+1},r=-1;return e.MDW&&(to=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?r=bp(e.wpx):e.wch!=null&&(r=e.wch),r>-1?(t.width=E1(r),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function XI(n,e){if(n){var t=[.7,.7,.75,.75,.3,.3];n.left==null&&(n.left=t[0]),n.right==null&&(n.right=t[1]),n.top==null&&(n.top=t[2]),n.bottom==null&&(n.bottom=t[3]),n.header==null&&(n.header=t[4]),n.footer==null&&(n.footer=t[5])}}function bc(n,e,t){var r=t.revssf[e.z!=null?e.z:"General"],i=60,s=n.length;if(r==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){HA(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=r=i;break}}for(i=0;i!=s;++i)if(n[i].numFmtId===r)return i;return n[s]={numFmtId:r,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function HU(n,e,t){if(n&&n["!ref"]){var r=zn(n["!ref"]);if(r.e.c<r.s.c||r.e.r<r.s.r)throw new Error("Bad range ("+t+"): "+n["!ref"])}}function $U(n){if(n.length===0)return"";for(var e='<mergeCells count="'+n.length+'">',t=0;t!=n.length;++t)e+='<mergeCell ref="'+br(n[t])+'"/>';return e+"</mergeCells>"}function GU(n,e,t,r,i){var s=!1,a={},o=null;if(r.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[t];try{e.Workbook&&(c=e.Workbook.Sheets[t].CodeName||c)}catch{}s=!0,a.codeName=td(wn(c))}if(n&&n["!outline"]){var u={summaryBelow:1,summaryRight:1};n["!outline"].above&&(u.summaryBelow=0),n["!outline"].left&&(u.summaryRight=0),o=(o||"")+st("outlinePr",null,u)}!s&&!o||(i[i.length]=st("sheetPr",o,a))}var KU=["objects","scenarios","selectLockedCells","selectUnlockedCells"],YU=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function XU(n){var e={sheet:1};return KU.forEach(function(t){n[t]!=null&&n[t]&&(e[t]="1")}),YU.forEach(function(t){n[t]!=null&&!n[t]&&(e[t]="0")}),n.password&&(e.password=LI(n.password).toString(16).toUpperCase()),st("sheetProtection",null,e)}function JU(n){return XI(n),st("pageMargins",null,n)}function QU(n,e){for(var t=["<cols>"],r,i=0;i!=e.length;++i)(r=e[i])&&(t[t.length]=st("col",null,bm(i,r)));return t[t.length]="</cols>",t.join("")}function ZU(n,e,t,r){var i=typeof n.ref=="string"?n.ref:br(n.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=gs(i);a.s.r==a.e.r&&(a.e.r=gs(e["!ref"]).e.r,i=br(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==r){c.Ref="'"+t.SheetNames[r]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+i}),st("autoFilter",null,{ref:i})}function ej(n,e,t,r){var i={workbookViewId:"0"};return(((r||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=r.Workbook.Views[0].RTL?"1":"0"),st("sheetViews",st("sheetView",null,i),{})}function tj(n,e,t,r){if(n.c&&t["!comments"].push([e,n.c]),n.v===void 0&&typeof n.f!="string"||n.t==="z"&&!n.f)return"";var i="",s=n.t,a=n.v;if(n.t!=="z")switch(n.t){case"b":i=n.v?"1":"0";break;case"n":i=""+n.v;break;case"e":i=Rd[n.v];break;case"d":r&&r.cellDates?i=Ri(n.v,-1).toISOString():(n=Ji(n),n.t="n",i=""+(n.v=Xi(Ri(n.v)))),typeof n.z>"u"&&(n.z=sr[14]);break;default:i=n.v;break}var o=ti("v",wn(i)),c={r:e},u=bc(r.cellXfs,n,r);switch(u!==0&&(c.s=u),n.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(n.v==null){delete n.t;break}if(n.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(r&&r.bookSST){o=ti("v",""+Yv(r.Strings,n.v,r.revStrings)),c.t="s";break}c.t="str";break}if(n.t!=s&&(n.t=s,n.v=a),typeof n.f=="string"&&n.f){var l=n.F&&n.F.slice(0,e.length)==e?{t:"array",ref:n.F}:null;o=st("f",wn(n.f),l)+(n.v!=null?o:"")}return n.l&&t["!links"].push([e,n.l]),n.D&&(c.cm=1),st("c",o,c)}function nj(n,e,t,r){var i=[],s=[],a=zn(n["!ref"]),o="",c,u="",l=[],d=0,g=0,p=n["!rows"],x=Array.isArray(n),_={r:u},E,P=-1;for(g=a.s.c;g<=a.e.c;++g)l[g]=mi(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=ii(d),g=a.s.c;g<=a.e.c;++g){c=l[g]+u;var L=x?(n[d]||[])[g]:n[c];L!==void 0&&(o=tj(L,c,n,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(_={r:u},p&&p[d]&&(E=p[d],E.hidden&&(_.hidden=1),P=-1,E.hpx?P=Ap(E.hpx):E.hpt&&(P=E.hpt),P>-1&&(_.ht=P,_.customHeight=1),E.level&&(_.outlineLevel=E.level)),i[i.length]=st("row",s.join(""),_))}if(p)for(;d<p.length;++d)p&&p[d]&&(_={r:d+1},E=p[d],E.hidden&&(_.hidden=1),P=-1,E.hpx?P=Ap(E.hpx):E.hpt&&(P=E.hpt),P>-1&&(_.ht=P,_.customHeight=1),E.level&&(_.outlineLevel=E.level),i[i.length]=st("row","",_));return i.join("")}function JI(n,e,t,r){var i=[Ar,st("worksheet",null,{xmlns:Ah[0],"xmlns:r":Vr.r})],s=t.SheetNames[n],a=0,o="",c=t.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",l=zn(u);if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575),u=br(l)}r||(r={}),c["!comments"]=[];var d=[];GU(c,t,n,e,i),i[i.length]=st("dimension",null,{ref:u}),i[i.length]=ej(c,e,n,t),e.sheetFormat&&(i[i.length]=st("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=QU(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=nj(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=XU(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=ZU(c["!autofilter"],c,t,n)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=$U(c["!merges"]));var g=-1,p,x=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(_){_[1].Target&&(p={ref:_[0]},_[1].Target.charAt(0)!="#"&&(x=_n(r,-1,wn(_[1].Target).replace(/#.*$/,""),on.HLINK),p["r:id"]="rId"+x),(g=_[1].Target.indexOf("#"))>-1&&(p.location=wn(_[1].Target.slice(g+1))),_[1].Tooltip&&(p.tooltip=wn(_[1].Tooltip)),i[i.length]=st("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=JU(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=ti("ignoredErrors",st("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(x=_n(r,-1,"../drawings/drawing"+(n+1)+".xml",on.DRAW),i[i.length]=st("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=d),c["!comments"].length>0&&(x=_n(r,-1,"../drawings/vmlDrawing"+(n+1)+".vml",on.VML),i[i.length]=st("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function rj(n,e){var t={},r=n.l+e;t.r=n.read_shift(4),n.l+=4;var i=n.read_shift(2);n.l+=1;var s=n.read_shift(1);return n.l=r,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function ij(n,e,t){var r=Be(145),i=(t["!rows"]||[])[n]||{};r.write_shift(4,n),r.write_shift(4,0);var s=320;i.hpx?s=Ap(i.hpx)*20:i.hpt&&(s=i.hpt*20),r.write_shift(2,s),r.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),r.write_shift(1,a),r.write_shift(1,0);var o=0,c=r.l;r.l+=4;for(var u={r:n,c:0},l=0;l<16;++l)if(!(e.s.c>l+1<<10||e.e.c<l<<10)){for(var d=-1,g=-1,p=l<<10;p<l+1<<10;++p){u.c=p;var x=Array.isArray(t)?(t[u.r]||[])[u.c]:t[En(u)];x&&(d<0&&(d=p),g=p)}d<0||(++o,r.write_shift(4,d),r.write_shift(4,g))}var _=r.l;return r.l=c,r.write_shift(4,o),r.l=_,r.length>r.l?r.slice(0,r.l):r}function sj(n,e,t,r){var i=ij(r,t,e);(i.length>17||(e["!rows"]||[])[r])&&He(n,0,i)}var aj=Uu,oj=Sh;function cj(){}function uj(n,e){var t={},r=n[n.l];return++n.l,t.above=!(r&64),t.left=!(r&128),n.l+=18,t.name=y9(n),t}function lj(n,e,t){t==null&&(t=Be(84+4*n.length));var r=192;e&&(e.above&&(r&=-65),e.left&&(r&=-129)),t.write_shift(1,r);for(var i=1;i<3;++i)t.write_shift(1,0);return xp({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),fI(n,t),t.slice(0,t.l)}function hj(n){var e=Cs(n);return[e]}function fj(n,e,t){return t==null&&(t=Be(8)),Mu(e,t)}function dj(n){var e=Bu(n);return[e]}function pj(n,e,t){return t==null&&(t=Be(4)),Vu(e,t)}function mj(n){var e=Cs(n),t=n.read_shift(1);return[e,t,"b"]}function gj(n,e,t){return t==null&&(t=Be(9)),Mu(e,t),t.write_shift(1,n.v?1:0),t}function vj(n){var e=Bu(n),t=n.read_shift(1);return[e,t,"b"]}function _j(n,e,t){return t==null&&(t=Be(5)),Vu(e,t),t.write_shift(1,n.v?1:0),t}function yj(n){var e=Cs(n),t=n.read_shift(1);return[e,t,"e"]}function wj(n,e,t){return t==null&&(t=Be(9)),Mu(e,t),t.write_shift(1,n.v),t}function xj(n){var e=Bu(n),t=n.read_shift(1);return[e,t,"e"]}function Ej(n,e,t){return t==null&&(t=Be(8)),Vu(e,t),t.write_shift(1,n.v),t.write_shift(2,0),t.write_shift(1,0),t}function Tj(n){var e=Cs(n),t=n.read_shift(4);return[e,t,"s"]}function bj(n,e,t){return t==null&&(t=Be(12)),Mu(e,t),t.write_shift(4,e.v),t}function Aj(n){var e=Bu(n),t=n.read_shift(4);return[e,t,"s"]}function Ij(n,e,t){return t==null&&(t=Be(8)),Vu(e,t),t.write_shift(4,e.v),t}function Sj(n){var e=Cs(n),t=Ph(n);return[e,t,"n"]}function Pj(n,e,t){return t==null&&(t=Be(16)),Mu(e,t),Pu(n.v,t),t}function Nj(n){var e=Bu(n),t=Ph(n);return[e,t,"n"]}function kj(n,e,t){return t==null&&(t=Be(12)),Vu(e,t),Pu(n.v,t),t}function Cj(n){var e=Cs(n),t=dI(n);return[e,t,"n"]}function Rj(n,e,t){return t==null&&(t=Be(12)),Mu(e,t),pI(n.v,t),t}function Lj(n){var e=Bu(n),t=dI(n);return[e,t,"n"]}function Dj(n,e,t){return t==null&&(t=Be(8)),Vu(e,t),pI(n.v,t),t}function Fj(n){var e=Cs(n),t=jv(n);return[e,t,"is"]}function Oj(n){var e=Cs(n),t=gi(n);return[e,t,"str"]}function Mj(n,e,t){return t==null&&(t=Be(12+4*n.v.length)),Mu(e,t),jr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Bj(n){var e=Bu(n),t=gi(n);return[e,t,"str"]}function Vj(n,e,t){return t==null&&(t=Be(8+4*n.v.length)),Vu(e,t),jr(n.v,t),t.length>t.l?t.slice(0,t.l):t}function Uj(n,e,t){var r=n.l+e,i=Cs(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"b"];if(t.cellFormula){n.l+=2;var o=Tm(n,r-n.l,t);a[3]=lh(o,null,i,t.supbooks,t)}else n.l=r;return a}function jj(n,e,t){var r=n.l+e,i=Cs(n);i.r=t["!row"];var s=n.read_shift(1),a=[i,s,"e"];if(t.cellFormula){n.l+=2;var o=Tm(n,r-n.l,t);a[3]=lh(o,null,i,t.supbooks,t)}else n.l=r;return a}function qj(n,e,t){var r=n.l+e,i=Cs(n);i.r=t["!row"];var s=Ph(n),a=[i,s,"n"];if(t.cellFormula){n.l+=2;var o=Tm(n,r-n.l,t);a[3]=lh(o,null,i,t.supbooks,t)}else n.l=r;return a}function zj(n,e,t){var r=n.l+e,i=Cs(n);i.r=t["!row"];var s=gi(n),a=[i,s,"str"];if(t.cellFormula){n.l+=2;var o=Tm(n,r-n.l,t);a[3]=lh(o,null,i,t.supbooks,t)}else n.l=r;return a}var Wj=Uu,Hj=Sh;function $j(n,e){return e==null&&(e=Be(4)),e.write_shift(4,n),e}function Gj(n,e){var t=n.l+e,r=Uu(n),i=qv(n),s=gi(n),a=gi(n),o=gi(n);n.l=t;var c={rfx:r,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function Kj(n,e){var t=Be(50+4*(n[1].Target.length+(n[1].Tooltip||"").length));Sh({s:Ur(n[0]),e:Ur(n[0])},t),zv("rId"+e,t);var r=n[1].Target.indexOf("#"),i=r==-1?"":n[1].Target.slice(r+1);return jr(i||"",t),jr(n[1].Tooltip||"",t),jr("",t),t.slice(0,t.l)}function Yj(){}function Xj(n,e,t){var r=n.l+e,i=mI(n),s=n.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=BU(n,r-n.l,t);a[1]=o}else n.l=r;return a}function Jj(n,e,t){var r=n.l+e,i=Uu(n),s=[i];if(t.cellFormula){var a=UU(n,r-n.l,t);s[1]=a,n.l=r}else n.l=r;return s}function Qj(n,e,t){t==null&&(t=Be(18));var r=bm(n,e);t.write_shift(-4,n),t.write_shift(-4,n),t.write_shift(4,(r.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof r.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var QI=["left","right","top","bottom","header","footer"];function Zj(n){var e={};return QI.forEach(function(t){e[t]=Ph(n)}),e}function eq(n,e){return e==null&&(e=Be(6*8)),XI(n),QI.forEach(function(t){Pu(n[t],e)}),e}function tq(n){var e=n.read_shift(2);return n.l+=28,{RTL:e&32}}function nq(n,e,t){t==null&&(t=Be(30));var r=924;return(((e||{}).Views||[])[0]||{}).RTL&&(r|=32),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function rq(n){var e=Be(24);return e.write_shift(4,4),e.write_shift(4,1),Sh(n,e),e}function iq(n,e){return e==null&&(e=Be(16*4+2)),e.write_shift(2,n.password?LI(n.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,n[t[0]]!=null&&!n[t[0]]?1:0):e.write_shift(4,n[t[0]]!=null&&n[t[0]]?0:1)}),e}function sq(){}function aq(){}function oq(n,e,t,r,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Ji(e),e.z=e.z||sr[14],e.v=Xi(Ri(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r:t,c:r};switch(c.s=bc(i.cellXfs,e,i),e.l&&s["!links"].push([En(c),e.l]),e.c&&s["!comments"].push([En(c),e.c]),e.t){case"s":case"str":return i.bookSST?(o=Yv(i.Strings,e.v,i.revStrings),c.t="s",c.v=o,a?He(n,18,Ij(e,c)):He(n,7,bj(e,c))):(c.t="str",a?He(n,17,Vj(e,c)):He(n,6,Mj(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?He(n,13,Dj(e,c)):He(n,2,Rj(e,c)):a?He(n,16,kj(e,c)):He(n,5,Pj(e,c)),!0;case"b":return c.t="b",a?He(n,15,_j(e,c)):He(n,4,gj(e,c)),!0;case"e":return c.t="e",a?He(n,14,Ej(e,c)):He(n,3,wj(e,c)),!0}return a?He(n,12,pj(e,c)):He(n,1,fj(e,c)),!0}function cq(n,e,t,r){var i=zn(e["!ref"]||"A1"),s,a="",o=[];He(n,145);var c=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var l=i.s.r;l<=u;++l){a=ii(l),sj(n,e,i,l);var d=!1;if(l<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){l===i.s.r&&(o[g]=mi(g)),s=o[g]+a;var p=c?(e[l]||[])[g]:e[s];if(!p){d=!1;continue}d=oq(n,p,l,g,r,e,d)}}He(n,146)}function uq(n,e){!e||!e["!merges"]||(He(n,177,$j(e["!merges"].length)),e["!merges"].forEach(function(t){He(n,176,Hj(t))}),He(n,178))}function lq(n,e){!e||!e["!cols"]||(He(n,390),e["!cols"].forEach(function(t,r){t&&He(n,60,Qj(r,t))}),He(n,391))}function hq(n,e){!e||!e["!ref"]||(He(n,648),He(n,649,rq(zn(e["!ref"]))),He(n,650))}function fq(n,e,t){e["!links"].forEach(function(r){if(r[1].Target){var i=_n(t,-1,r[1].Target.replace(/#.*$/,""),on.HLINK);He(n,494,Kj(r,i))}}),delete e["!links"]}function dq(n,e,t,r){if(e["!comments"].length>0){var i=_n(r,-1,"../drawings/vmlDrawing"+(t+1)+".vml",on.VML);He(n,551,zv("rId"+i)),e["!legacy"]=i}}function pq(n,e,t,r){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:br(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=gs(s);o.s.r==o.e.r&&(o.e.r=gs(e["!ref"]).e.r,s=br(o));for(var c=0;c<a.length;++c){var u=a[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==r){u.Ref="'"+t.SheetNames[r]+"'!"+s;break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:r,Ref:"'"+t.SheetNames[r]+"'!"+s}),He(n,161,Sh(zn(s))),He(n,162)}}function mq(n,e,t){He(n,133),He(n,137,nq(e,t)),He(n,138),He(n,134)}function gq(n,e){e["!protect"]&&He(n,535,iq(e["!protect"]))}function vq(n,e,t,r){var i=Ki(),s=t.SheetNames[n],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[n].CodeName||o)}catch{}var c=zn(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],He(i,129),(t.vbaraw||a["!outline"])&&He(i,147,lj(o,a["!outline"])),He(i,148,oj(c)),mq(i,a,t.Workbook),lq(i,a),cq(i,a,n,e),gq(i,a),pq(i,a,t,n),uq(i,a),fq(i,a,r),a["!margins"]&&He(i,476,eq(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&hq(i,a),dq(i,a,n,r),He(i,130),i.end()}function _q(n,e){n.l+=10;var t=gi(n);return{name:t}}var yq=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function wq(n){return!n.Workbook||!n.Workbook.WBProps?"false":JM(n.Workbook.WBProps.date1904)?"true":"false"}var xq="][*?/\\".split("");function ZI(n,e){if(n.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return xq.forEach(function(r){if(n.indexOf(r)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function Eq(n,e,t){n.forEach(function(r,i){ZI(r);for(var s=0;s<i;++s)if(r==n[s])throw new Error("Duplicate Sheet Name: "+r);if(t){var a=e&&e[i]&&e[i].CodeName||r;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function Tq(n){if(!n||!n.SheetNames||!n.Sheets)throw new Error("Invalid Workbook");if(!n.SheetNames.length)throw new Error("Workbook is empty");var e=n.Workbook&&n.Workbook.Sheets||[];Eq(n.SheetNames,e,!!n.vbaraw);for(var t=0;t<n.SheetNames.length;++t)HU(n.Sheets[n.SheetNames[t]],n.SheetNames[t],t)}function eS(n){var e=[Ar];e[e.length]=st("workbook",null,{xmlns:Ah[0],"xmlns:r":Vr.r});var t=n.Workbook&&(n.Workbook.Names||[]).length>0,r={codeName:"ThisWorkbook"};n.Workbook&&n.Workbook.WBProps&&(yq.forEach(function(o){n.Workbook.WBProps[o[0]]!=null&&n.Workbook.WBProps[o[0]]!=o[1]&&(r[o[0]]=n.Workbook.WBProps[o[0]])}),n.Workbook.WBProps.CodeName&&(r.codeName=n.Workbook.WBProps.CodeName,delete r.CodeName)),e[e.length]=st("workbookPr",null,r);var i=n.Workbook&&n.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=n.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==n.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=n.SheetNames.length;++s){var a={name:wn(n.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=st("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",n.Workbook&&n.Workbook.Names&&n.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=st("definedName",wn(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function bq(n,e){var t={};return t.Hidden=n.read_shift(4),t.iTabID=n.read_shift(4),t.strRelID=x1(n),t.name=gi(n),t}function Aq(n,e){return e||(e=Be(127)),e.write_shift(4,n.Hidden),e.write_shift(4,n.iTabID),zv(n.strRelID,e),jr(n.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Iq(n,e){var t={},r=n.read_shift(4);t.defaultThemeVersion=n.read_shift(4);var i=e>8?gi(n):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(r&65536),t.backupFile=!!(r&64),t.checkCompatibility=!!(r&4096),t.date1904=!!(r&1),t.filterPrivacy=!!(r&8),t.hidePivotFieldList=!!(r&1024),t.promptedSolutions=!!(r&16),t.publishItems=!!(r&2048),t.refreshAllConnections=!!(r&262144),t.saveExternalLinkValues=!!(r&128),t.showBorderUnselectedTables=!!(r&4),t.showInkAnnotation=!!(r&32),t.showObjects=["all","placeholders","none"][r>>13&3],t.showPivotChartFilter=!!(r&32768),t.updateLinks=["userSet","never","always"][r>>8&3],t}function Sq(n,e){e||(e=Be(72));var t=0;return n&&n.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),fI(n&&n.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Pq(n,e,t){var r=n.l+e;n.l+=4,n.l+=1;var i=n.read_shift(4),s=w9(n),a=VU(n,0,t),o=qv(n);n.l=r;var c={Name:s,Ptg:a};return i<268435455&&(c.Sheet=i),o&&(c.Comment=o),c}function Nq(n,e){He(n,143);for(var t=0;t!=e.SheetNames.length;++t){var r=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:r,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};He(n,156,Aq(i))}He(n,144)}function kq(n,e){e||(e=Be(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return jr("SheetJS",e),jr(dp.version,e),jr(dp.version,e),jr("7262",e),e.length>e.l?e.slice(0,e.l):e}function Cq(n,e){e||(e=Be(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,n),e.write_shift(4,n);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function Rq(n,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,r=0,i=-1,s=-1;r<t.length;++r)!t[r]||!t[r].Hidden&&i==-1?i=r:t[r].Hidden==1&&s==-1&&(s=r);s>i||(He(n,135),He(n,158,Cq(i)),He(n,136))}}function Lq(n,e){var t=Ki();return He(t,131),He(t,128,kq()),He(t,153,Sq(n.Workbook&&n.Workbook.WBProps||null)),Rq(t,n),Nq(t,n),He(t,132),t.end()}function Dq(n,e,t){return(e.slice(-4)===".bin"?Lq:eS)(n)}function Fq(n,e,t,r,i){return(e.slice(-4)===".bin"?vq:JI)(n,t,r,i)}function Oq(n,e,t){return(e.slice(-4)===".bin"?eV:OI)(n,t)}function Mq(n,e,t){return(e.slice(-4)===".bin"?SB:RI)(n,t)}function Bq(n,e,t){return(e.slice(-4)===".bin"?gV:jI)(n)}function Vq(n){return(n.slice(-4)===".bin"?cV:VI)()}function Uq(n,e){var t=[];return n.Props&&t.push(O9(n.Props,e)),n.Custprops&&t.push(M9(n.Props,n.Custprops)),t.join("")}function jq(){return""}function qq(n,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(r,i){var s=[];s.push(st("NumberFormat",null,{"ss:Format":wn(sr[r.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(st("Style",s.join(""),a))}),st("Styles",t.join(""))}function tS(n){return st("NamedRange",null,{"ss:Name":n.Name,"ss:RefersTo":"="+Gv(n.Ref,{r:0,c:0})})}function zq(n){if(!((n||{}).Workbook||{}).Names)return"";for(var e=n.Workbook.Names,t=[],r=0;r<e.length;++r){var i=e[r];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(tS(i)))}return st("Names",t.join(""))}function Wq(n,e,t,r){if(!n||!((r||{}).Workbook||{}).Names)return"";for(var i=r.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(tS(o)))}return s.join("")}function Hq(n,e,t,r){if(!n)return"";var i=[];if(n["!margins"]&&(i.push("<PageSetup>"),n["!margins"].header&&i.push(st("Header",null,{"x:Margin":n["!margins"].header})),n["!margins"].footer&&i.push(st("Footer",null,{"x:Margin":n["!margins"].footer})),i.push(st("PageMargins",null,{"x:Bottom":n["!margins"].bottom||"0.75","x:Left":n["!margins"].left||"0.7","x:Right":n["!margins"].right||"0.7","x:Top":n["!margins"].top||"0.75"})),i.push("</PageSetup>")),r&&r.Workbook&&r.Workbook.Sheets&&r.Workbook.Sheets[t])if(r.Workbook.Sheets[t].Hidden)i.push(st("Visible",r.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(r.Workbook.Sheets[s]&&!r.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((r||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),n["!protect"]&&(i.push(ti("ProtectContents","True")),n["!protect"].objects&&i.push(ti("ProtectObjects","True")),n["!protect"].scenarios&&i.push(ti("ProtectScenarios","True")),n["!protect"].selectLockedCells!=null&&!n["!protect"].selectLockedCells?i.push(ti("EnableSelection","NoSelection")):n["!protect"].selectUnlockedCells!=null&&!n["!protect"].selectUnlockedCells&&i.push(ti("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){n["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":st("WorksheetOptions",i.join(""),{xmlns:hs.x})}function $q(n){return n.map(function(e){var t=XM(e.t||""),r=st("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return st("Comment",r,{"ss:Author":e.a})}).join("")}function Gq(n,e,t,r,i,s,a){if(!n||n.v==null&&n.f==null)return"";var o={};if(n.f&&(o["ss:Formula"]="="+wn(Gv(n.f,a))),n.F&&n.F.slice(0,e.length)==e){var c=Ur(n.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(n.l&&n.l.Target&&(o["ss:HRef"]=wn(n.l.Target),n.l.Tooltip&&(o["x:HRefScreenTip"]=wn(n.l.Tooltip))),t["!merges"])for(var u=t["!merges"],l=0;l!=u.length;++l)u[l].s.c!=a.c||u[l].s.r!=a.r||(u[l].e.c>u[l].s.c&&(o["ss:MergeAcross"]=u[l].e.c-u[l].s.c),u[l].e.r>u[l].s.r&&(o["ss:MergeDown"]=u[l].e.r-u[l].s.r));var d="",g="";switch(n.t){case"z":if(!r.sheetStubs)return"";break;case"n":d="Number",g=String(n.v);break;case"b":d="Boolean",g=n.v?"1":"0";break;case"e":d="Error",g=Rd[n.v];break;case"d":d="DateTime",g=new Date(n.v).toISOString(),n.z==null&&(n.z=n.z||sr[14]);break;case"s":d="String",g=YM(n.v||"");break}var p=bc(r.cellXfs,n,r);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var x=n.v!=null?g:"",_=n.t=="z"?"":'<Data ss:Type="'+d+'">'+x+"</Data>";return(n.c||[]).length>0&&(_+=$q(n.c)),st("Cell",_,o)}function Kq(n,e){var t='<Row ss:Index="'+(n+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=FI(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Yq(n,e,t,r){if(!n["!ref"])return"";var i=zn(n["!ref"]),s=n["!merges"]||[],a=0,o=[];n["!cols"]&&n["!cols"].forEach(function(E,P){Hv(E);var L=!!E.width,V=bm(P,E),K={"ss:Index":P+1};L&&(K["ss:Width"]=Tp(V.width)),E.hidden&&(K["ss:Hidden"]="1"),o.push(st("Column",null,K))});for(var c=Array.isArray(n),u=i.s.r;u<=i.e.r;++u){for(var l=[Kq(u,(n["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},x=En(p),_=c?(n[u]||[])[d]:n[x];l.push(Gq(_,x,n,e,t,r,p))}}l.push("</Row>"),l.length>2&&o.push(l.join(""))}return o.join("")}function Xq(n,e,t){var r=[],i=t.SheetNames[n],s=t.Sheets[i],a=s?Wq(s,e,n,t):"";return a.length>0&&r.push("<Names>"+a+"</Names>"),a=s?Yq(s,e,n,t):"",a.length>0&&r.push("<Table>"+a+"</Table>"),r.push(Hq(s,e,n,t)),r.join("")}function Jq(n,e){e||(e={}),n.SSF||(n.SSF=Ji(sr)),n.SSF&&(ym(),_m(n.SSF),e.revssf=wm(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF,e.cellXfs=[],bc(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(Uq(n,e)),t.push(jq()),t.push(""),t.push("");for(var r=0;r<n.SheetNames.length;++r)t.push(st("Worksheet",Xq(r,e,n),{"ss:Name":wn(n.SheetNames[r])}));return t[2]=qq(n,e),t[3]=zq(n),Ar+st("Workbook",t.join(""),{xmlns:hs.ss,"xmlns:o":hs.o,"xmlns:x":hs.x,"xmlns:ss":hs.ss,"xmlns:dt":hs.dt,"xmlns:html":hs.html})}var Eg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Qq(n,e){var t=[],r=[],i=[],s=0,a,o=Gw(a5,"n"),c=Gw(o5,"n");if(n.Props)for(a=ai(n.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?r:i).push([a[s],n.Props[a[s]]]);if(n.Custprops)for(a=ai(n.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(n.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?r:i).push([a[s],n.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)AI.indexOf(i[s][0])>-1||EI.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);r.length&&Sn.utils.cfb_add(e,"/SummaryInformation",f5(r,Eg.SI,c,o5)),(t.length||u.length)&&Sn.utils.cfb_add(e,"/DocumentSummaryInformation",f5(t,Eg.DSI,o,a5,u.length?u:null,Eg.UDI))}function Zq(n,e){var t=e||{},r=Sn.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Sn.utils.cfb_add(r,i,nS(n,t)),t.biff==8&&(n.Props||n.Custprops)&&Qq(n,r),t.biff==8&&n.vbaraw&&vV(r,Sn.read(n.vbaraw,{type:typeof n.vbaraw=="string"?"binary":"buffer"})),r}var ez={0:{f:rj},1:{f:hj},2:{f:Cj},3:{f:yj},4:{f:mj},5:{f:Sj},6:{f:Oj},7:{f:Tj},8:{f:zj},9:{f:qj},10:{f:Uj},11:{f:jj},12:{f:dj},13:{f:Lj},14:{f:xj},15:{f:vj},16:{f:Nj},17:{f:Bj},18:{f:Aj},19:{f:jv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Pq},40:{},42:{},43:{f:OB},44:{f:DB},45:{f:VB},46:{f:jB},47:{f:UB},48:{},49:{f:d9},50:{},51:{f:rV},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:pB},62:{f:Fj},63:{f:uV},64:{f:sq},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Ia,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:tq},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:uj},148:{f:aj,p:16},151:{f:Yj},152:{},153:{f:Iq},154:{},155:{},156:{f:bq},157:{},158:{},159:{T:1,f:bB},160:{T:-1},161:{T:1,f:Uu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Wj},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:tV},336:{T:-1},337:{f:aV,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:x1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:cB},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Xj},427:{f:Jj},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Zj},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:cj},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:Gj},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:x1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:pV},633:{T:1},634:{T:-1},635:{T:1,f:fV},636:{T:-1},637:{f:v9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_q},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:aq},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ot(n,e,t,r){var i=e;if(!isNaN(i)){var s=r||(t||[]).length||0,a=n.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&Bv(t)&&n.push(t)}}function tz(n,e,t,r){var i=(t||[]).length||0;if(i<=8224)return ot(n,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,c=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var l=n.next(4);for(l.write_shift(2,s),l.write_shift(2,u),n.push(t.slice(c,c+u)),c+=u;c<i;){for(l=n.next(4),l.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;l.write_shift(2,u),n.push(t.slice(c,c+u)),c+=u}}}function Dd(n,e,t){return n||(n=Be(7)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,0),n.write_shift(1,0),n}function nz(n,e,t,r){var i=Be(9);return Dd(i,n,e),SI(t,r||"b",i),i}function rz(n,e,t){var r=Be(8+2*t.length);return Dd(r,n,e),r.write_shift(1,t.length),r.write_shift(t.length,t,"sbcs"),r.l<r.length?r.slice(0,r.l):r}function iz(n,e,t,r){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Xi(Ri(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?ot(n,2,_B(t,r,i)):ot(n,3,vB(t,r,i));return;case"b":case"e":ot(n,5,nz(t,r,e.v,e.t));return;case"s":case"str":ot(n,4,rz(t,r,(e.v||"").slice(0,255)));return}ot(n,1,Dd(null,t,r))}function sz(n,e,t,r){var i=Array.isArray(e),s=zn(e["!ref"]||"A1"),a,o="",c=[];if(s.e.c>255||s.e.r>16383){if(r.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=br(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ii(u);for(var l=s.s.c;l<=s.e.c;++l){u===s.s.r&&(c[l]=mi(l)),a=c[l]+o;var d=i?(e[u]||[])[l]:e[a];d&&iz(n,d,u,l)}}}function az(n,e){for(var t=e||{},r=Ki(),i=0,s=0;s<n.SheetNames.length;++s)n.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&n.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return ot(r,t.biff==4?1033:t.biff==3?521:9,Wv(n,16,t)),sz(r,n.Sheets[n.SheetNames[i]],i,t),ot(r,10),r.end()}function oz(n,e,t){ot(n,49,eB({sz:12,name:"Arial"},t))}function cz(n,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var i=r[0];i<=r[1];++i)e[i]!=null&&ot(n,1054,rB(i,e[i],t))})}function uz(n,e){var t=Be(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),ot(n,2151,t),t=Be(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),kI(zn(e["!ref"]||"A1"),t),t.write_shift(4,4),ot(n,2152,t)}function lz(n,e){for(var t=0;t<16;++t)ot(n,224,p5({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(r){ot(n,224,p5(r,0,e))})}function hz(n,e){for(var t=0;t<e["!links"].length;++t){var r=e["!links"][t];ot(n,440,hB(r)),r[1].Tooltip&&ot(n,2048,fB(r))}delete e["!links"]}function fz(n,e){if(e){var t=0;e.forEach(function(r,i){++t<=256&&r&&ot(n,125,mB(bm(i,r),i))})}}function dz(n,e,t,r,i){var s=16+bc(i.cellXfs,e,i);if(e.v==null&&!e.bf){ot(n,513,Nu(t,r,s));return}if(e.bf)ot(n,6,MU(e,t,r,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Xi(Ri(e.v)):e.v;ot(n,515,oB(t,r,a,s));break;case"b":case"e":ot(n,517,aB(t,r,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=Yv(i.Strings,e.v,i.revStrings);ot(n,253,tB(t,r,o,s))}else ot(n,516,nB(t,r,(e.v||"").slice(0,255),s,i));break;default:ot(n,513,Nu(t,r,s))}}function pz(n,e,t){var r=Ki(),i=t.SheetNames[n],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[n]||{},c=Array.isArray(s),u=e.biff==8,l,d="",g=[],p=zn(s["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}ot(r,2057,Wv(t,16,e)),ot(r,13,Is(1)),ot(r,12,Is(100)),ot(r,15,Pi(!0)),ot(r,17,Pi(!1)),ot(r,16,Pu(.001)),ot(r,95,Pi(!0)),ot(r,42,Pi(!1)),ot(r,43,Pi(!1)),ot(r,130,Is(1)),ot(r,128,sB()),ot(r,131,Pi(!1)),ot(r,132,Pi(!1)),u&&fz(r,s["!cols"]),ot(r,512,iB(p,e)),u&&(s["!links"]=[]);for(var _=p.s.r;_<=p.e.r;++_){d=ii(_);for(var E=p.s.c;E<=p.e.c;++E){_===p.s.r&&(g[E]=mi(E)),l=g[E]+d;var P=c?(s[_]||[])[E]:s[l];P&&(dz(r,P,_,E,e),u&&P.l&&s["!links"].push([l,P.l]))}}var L=o.CodeName||o.name||i;return u&&ot(r,574,Z9((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&ot(r,229,lB(s["!merges"])),u&&hz(r,s),ot(r,442,NI(L)),u&&uz(r,s),ot(r,10),r.end()}function mz(n,e,t){var r=Ki(),i=(n||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,c=t.biff==5;if(ot(r,2057,Wv(n,5,t)),t.bookType=="xla"&&ot(r,135),ot(r,225,o?Is(1200):null),ot(r,193,U9(2)),c&&ot(r,191),c&&ot(r,192),ot(r,226),ot(r,92,Y9("SheetJS",t)),ot(r,66,Is(o?1200:1252)),o&&ot(r,353,Is(0)),o&&ot(r,448),ot(r,317,gB(n.SheetNames.length)),o&&n.vbaraw&&ot(r,211),o&&n.vbaraw){var u=a.CodeName||"ThisWorkbook";ot(r,442,NI(u))}ot(r,156,Is(17)),ot(r,25,Pi(!1)),ot(r,18,Pi(!1)),ot(r,19,Is(0)),o&&ot(r,431,Pi(!1)),o&&ot(r,444,Is(0)),ot(r,61,Q9()),ot(r,64,Pi(!1)),ot(r,141,Is(0)),ot(r,34,Pi(wq(n)=="true")),ot(r,14,Pi(!0)),o&&ot(r,439,Pi(!1)),ot(r,218,Is(0)),oz(r,n,t),cz(r,n.SSF,t),lz(r,t),o&&ot(r,352,Pi(!1));var l=r.end(),d=Ki();o&&ot(d,140,dB()),o&&t.Strings&&tz(d,252,J9(t.Strings)),ot(d,10);var g=d.end(),p=Ki(),x=0,_=0;for(_=0;_<n.SheetNames.length;++_)x+=(o?12:11)+(o?2:1)*n.SheetNames[_].length;var E=l.length+x+g.length;for(_=0;_<n.SheetNames.length;++_){var P=s[_]||{};ot(p,133,X9({pos:E,hs:P.Hidden||0,dt:0,name:n.SheetNames[_]},t)),E+=e[_].length}var L=p.end();if(x!=L.length)throw new Error("BS8 "+x+" != "+L.length);var V=[];return l.length&&V.push(l),L.length&&V.push(L),g.length&&V.push(g),ei(V)}function gz(n,e){var t=e||{},r=[];n&&!n.SSF&&(n.SSF=Ji(sr)),n&&n.SSF&&(ym(),_m(n.SSF),t.revssf=wm(n.SSF),t.revssf[n.SSF[65535]]=0,t.ssf=n.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Xv(t),t.cellXfs=[],bc(t.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={});for(var i=0;i<n.SheetNames.length;++i)r[r.length]=pz(i,t,n);return r.unshift(mz(n,r,t)),ei(r)}function nS(n,e){for(var t=0;t<=n.SheetNames.length;++t){var r=n.Sheets[n.SheetNames[t]];if(!(!r||!r["!ref"])){var i=gs(r["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+n.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return gz(n,e);case 4:case 3:case 2:return az(n,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function vz(n,e,t,r){for(var i=n["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,c=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,c=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var l=En({r:t,c:a}),d=r.dense?(n[t]||[])[a]:n[l],g=d&&d.v!=null&&(d.h||KM(d.w||(oo(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),r.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(r.id||"sjs")+"-"+l,s.push(st("td",g,p))}}var x="<tr>";return x+s.join("")+"</tr>"}var _z='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yz="</body></html>";function wz(n,e,t){var r=[];return r.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function rS(n,e){var t=e||{},r=t.header!=null?t.header:_z,i=t.footer!=null?t.footer:yz,s=[r],a=gs(n["!ref"]);t.dense=Array.isArray(n),s.push(wz(n,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(vz(n,a,o,t));return s.push("</table>"+i),s.join("")}function iS(n,e,t){var r=t||{},i=0,s=0;if(r.origin!=null)if(typeof r.origin=="number")i=r.origin;else{var a=typeof r.origin=="string"?Ur(r.origin):r.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),c=Math.min(r.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(n["!ref"]){var l=gs(n["!ref"]);u.s.r=Math.min(u.s.r,l.s.r),u.s.c=Math.min(u.s.c,l.s.c),u.e.r=Math.max(u.e.r,l.e.r),u.e.c=Math.max(u.e.c,l.e.c),i==-1&&(u.e.r=i=l.e.r+1)}var d=[],g=0,p=n["!rows"]||(n["!rows"]=[]),x=0,_=0,E=0,P=0,L=0,V=0;for(n["!cols"]||(n["!cols"]=[]);x<o.length&&_<c;++x){var K=o[x];if(x5(K)){if(r.display)continue;p[_]={hidden:!0}}var ie=K.children;for(E=P=0;E<ie.length;++E){var ae=ie[E];if(!(r.display&&x5(ae))){var N=ae.hasAttribute("data-v")?ae.getAttribute("data-v"):ae.hasAttribute("v")?ae.getAttribute("v"):QM(ae.innerHTML),A=ae.getAttribute("data-z")||ae.getAttribute("z");for(g=0;g<d.length;++g){var C=d[g];C.s.c==P+s&&C.s.r<_+i&&_+i<=C.e.r&&(P=C.e.c+1-s,g=-1)}V=+ae.getAttribute("colspan")||1,((L=+ae.getAttribute("rowspan")||1)>1||V>1)&&d.push({s:{r:_+i,c:P+s},e:{r:_+i+(L||1)-1,c:P+s+(V||1)-1}});var B={t:"s",v:N},b=ae.getAttribute("data-t")||ae.getAttribute("t")||"";N!=null&&(N.length==0?B.t=b||"z":r.raw||N.trim().length==0||b=="s"||(N==="TRUE"?B={t:"b",v:!0}:N==="FALSE"?B={t:"b",v:!1}:isNaN(eo(N))?isNaN(ed(N).getDate())||(B={t:"d",v:Ri(N)},r.cellDates||(B={t:"n",v:Xi(B.v)}),B.z=r.dateNF||sr[14]):B={t:"n",v:eo(N)})),B.z===void 0&&A!=null&&(B.z=A);var S="",R=ae.getElementsByTagName("A");if(R&&R.length)for(var se=0;se<R.length&&!(R[se].hasAttribute("href")&&(S=R[se].getAttribute("href"),S.charAt(0)!="#"));++se);S&&S.charAt(0)!="#"&&(B.l={Target:S}),r.dense?(n[_+i]||(n[_+i]=[]),n[_+i][P+s]=B):n[En({c:P+s,r:_+i})]=B,u.e.c<P+s&&(u.e.c=P+s),P+=V}}++_}return d.length&&(n["!merges"]=(n["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,_-1+i),n["!ref"]=br(u),_>=c&&(n["!fullref"]=br((u.e.r=o.length-x+_-1+i,u))),n}function sS(n,e){var t=e||{},r=t.dense?[]:{};return iS(r,n,e)}function xz(n,e){return Ou(sS(n,e),e)}function x5(n){var e="",t=Ez(n);return t&&(e=t(n).getPropertyValue("display")),e||(e=n.style&&n.style.display),e==="none"}function Ez(n){return n.ownerDocument.defaultView&&typeof n.ownerDocument.defaultView.getComputedStyle=="function"?n.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var Tz=function(){var n=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+n+"</office:document-styles>";return function(){return Ar+e}}(),E5=function(){var n=function(s){return wn(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,r=function(s,a,o){var c=[];c.push('      <table:table table:name="'+wn(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,l=0,d=gs(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,x=Array.isArray(s);if(s["!cols"])for(l=0;l<=d.e.c;++l)c.push("        <table:table-column"+(s["!cols"][l]?' table:style-name="co'+s["!cols"][l].ods+'"':"")+`></table:table-column>
`);var _="",E=s["!rows"]||[];for(u=0;u<d.s.r;++u)_=E[u]?' table:style-name="ro'+E[u].ods+'"':"",c.push("        <table:table-row"+_+`></table:table-row>
`);for(;u<=d.e.r;++u){for(_=E[u]?' table:style-name="ro'+E[u].ods+'"':"",c.push("        <table:table-row"+_+`>
`),l=0;l<d.s.c;++l)c.push(e);for(;l<=d.e.c;++l){var P=!1,L={},V="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>l)&&!(g[p].s.r>u)&&!(g[p].e.c<l)&&!(g[p].e.r<u)){(g[p].s.c!=l||g[p].s.r!=u)&&(P=!0),L["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,L["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(P){c.push(t);continue}var K=En({r:u,c:l}),ie=x?(s[u]||[])[l]:s[K];if(ie&&ie.f&&(L["table:formula"]=wn(zU(ie.f)),ie.F&&ie.F.slice(0,K.length)==K)){var ae=gs(ie.F);L["table:number-matrix-columns-spanned"]=ae.e.c-ae.s.c+1,L["table:number-matrix-rows-spanned"]=ae.e.r-ae.s.r+1}if(!ie){c.push(e);continue}switch(ie.t){case"b":V=ie.v?"TRUE":"FALSE",L["office:value-type"]="boolean",L["office:boolean-value"]=ie.v?"true":"false";break;case"n":V=ie.w||String(ie.v||0),L["office:value-type"]="float",L["office:value"]=ie.v||0;break;case"s":case"str":V=ie.v==null?"":ie.v,L["office:value-type"]="string";break;case"d":V=ie.w||Ri(ie.v).toISOString(),L["office:value-type"]="date",L["office:date-value"]=Ri(ie.v).toISOString(),L["table:style-name"]="ce1";break;default:c.push(e);continue}var N=n(V);if(ie.l&&ie.l.Target){var A=ie.l.Target;A=A.charAt(0)=="#"?"#"+WU(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),N=st("text:a",N,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+st("table:table-cell",st("text:p",N,{}),L)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var l=0;l<u["!cols"].length;++l)if(u["!cols"][l]){var d=u["!cols"][l];if(d.width==null&&d.wpx==null&&d.wch==null)continue;Hv(d),d.ods=o;var g=u["!cols"][l].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var l=0;l<u["!rows"].length;++l)if(u["!rows"][l]){u["!rows"][l].ods=c;var d=u["!rows"][l].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var c=[Ar],u=nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),l=nd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+l+`>
`),c.push(wI().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),i(c,a),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)c.push(r(a.Sheets[a.SheetNames[d]],a,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function aS(n,e){if(e.bookType=="fods")return E5(n,e);var t=Dv(),r="",i=[],s=[];return r="mimetype",$t(t,r,"application/vnd.oasis.opendocument.spreadsheet"),r="content.xml",$t(t,r,E5(n,e)),i.push([r,"text/xml"]),s.push([r,"ContentFile"]),r="styles.xml",$t(t,r,Tz(n,e)),i.push([r,"text/xml"]),s.push([r,"StylesFile"]),r="meta.xml",$t(t,r,Ar+wI()),i.push([r,"text/xml"]),s.push([r,"MetadataFile"]),r="manifest.rdf",$t(t,r,F9(s)),i.push([r,"application/rdf+xml"]),r="META-INF/manifest.xml",$t(t,r,L9(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ip(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function bz(n){return typeof TextEncoder<"u"?new TextEncoder().encode(n):Gs(td(n))}function Az(n,e){e:for(var t=0;t<=n.length-e.length;++t){for(var r=0;r<e.length;++r)if(n[t+r]!=e[r])continue e;return!0}return!1}function mc(n){var e=n.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),r=0;return n.forEach(function(i){t.set(i,r),r+=i.length}),t}function Iz(n,e,t){var r=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,r-6176);n[e+15]|=r>>7,n[e+14]|=(r&127)<<1;for(var s=0;i>=1;++s,i/=256)n[e+s]=i&255;n[e+15]|=t>=0?0:128}function rd(n,e){var t=e?e[0]:0,r=n[t]&127;e:if(n[t++]>=128&&(r|=(n[t]&127)<<7,n[t++]<128||(r|=(n[t]&127)<<14,n[t++]<128)||(r|=(n[t]&127)<<21,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,28),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,35),++t,n[t++]<128)||(r+=(n[t]&127)*Math.pow(2,42),++t,n[t++]<128)))break e;return e&&(e[0]=t),r}function vn(n){var e=new Uint8Array(7);e[0]=n&127;var t=1;e:if(n>127){if(e[t-1]|=128,e[t]=n>>7&127,++t,n<=16383||(e[t-1]|=128,e[t]=n>>14&127,++t,n<=2097151)||(e[t-1]|=128,e[t]=n>>21&127,++t,n<=268435455)||(e[t-1]|=128,e[t]=n/256>>>21&127,++t,n<=34359738367)||(e[t-1]|=128,e[t]=n/65536>>>21&127,++t,n<=4398046511103))break e;e[t-1]|=128,e[t]=n/16777216>>>21&127,++t}return e.slice(0,t)}function ql(n){var e=0,t=n[e]&127;e:if(n[e++]>=128){if(t|=(n[e]&127)<<7,n[e++]<128||(t|=(n[e]&127)<<14,n[e++]<128)||(t|=(n[e]&127)<<21,n[e++]<128))break e;t|=(n[e]&127)<<28}return t}function Nr(n){for(var e=[],t=[0];t[0]<n.length;){var r=t[0],i=rd(n,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var c=t[0];n[t[0]++]>=128;);o=n.slice(c,t[0])}break;case 5:a=4,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=rd(n,t),o=n.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(r))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Xr(n){var e=[];return n.forEach(function(t,r){t.forEach(function(i){i.data&&(e.push(vn(r*8+i.type)),i.type==2&&e.push(vn(i.data.length)),e.push(i.data))})}),mc(e)}function qs(n){for(var e,t=[],r=[0];r[0]<n.length;){var i=rd(n,r),s=Nr(n.slice(r[0],r[0]+i));r[0]+=i;var a={id:ql(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Nr(o.data),u=ql(c[3][0].data);a.messages.push({meta:c,data:n.slice(r[0],r[0]+u)}),r[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=ql(s[3][0].data)>>>0>0),t.push(a)}return t}function gl(n){var e=[];return n.forEach(function(t){var r=[];r[1]=[{data:vn(t.id),type:0}],r[2]=[],t.merge!=null&&(r[3]=[{data:vn(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:vn(a.data.length)}],r[2].push({data:Xr(a.meta),type:2})});var s=Xr(r);e.push(vn(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),mc(e)}function Sz(n,e){if(n!=0)throw new Error("Unexpected Snappy chunk type ".concat(n));for(var t=[0],r=rd(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var c=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,c=(e[t[0]++]&224)<<3,c|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(c=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(c=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[mc(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(i.push(i[0].slice(-c)),u-=c;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-c,-c+u))}}var l=mc(i);if(l.length!=r)throw new Error("Unexpected length: ".concat(l.length," != ").concat(r));return l}function zs(n){for(var e=[],t=0;t<n.length;){var r=n[t++],i=n[t]|n[t+1]<<8|n[t+2]<<16;t+=3,e.push(Sz(r,n.slice(t,t+i))),t+=i}if(t!==n.length)throw new Error("data is not a valid framed stream!");return mc(e)}function vl(n){for(var e=[],t=0;t<n.length;){var r=Math.min(n.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=vn(r),a=s.length;e.push(s),r<=60?(a++,e.push(new Uint8Array([r-1<<2]))):r<=256?(a+=2,e.push(new Uint8Array([240,r-1&255]))):r<=65536?(a+=3,e.push(new Uint8Array([244,r-1&255,r-1>>8&255]))):r<=16777216?(a+=4,e.push(new Uint8Array([248,r-1&255,r-1>>8&255,r-1>>16&255]))):r<=4294967296&&(a+=5,e.push(new Uint8Array([252,r-1&255,r-1>>8&255,r-1>>16&255,r-1>>>24&255]))),e.push(n.slice(t,t+r)),a+=r,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=r}return mc(e)}function Tg(n,e){var t=new Uint8Array(32),r=Ip(t),i=12,s=0;switch(t[0]=5,n.t){case"n":t[1]=2,Iz(t,i,n.v),s|=1,i+=16;break;case"b":t[1]=6,r.setFloat64(i,n.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[1]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(8,s,!0),t.slice(0,i)}function bg(n,e){var t=new Uint8Array(32),r=Ip(t),i=12,s=0;switch(t[0]=3,n.t){case"n":t[2]=2,r.setFloat64(i,n.v,!0),s|=32,i+=8;break;case"b":t[2]=6,r.setFloat64(i,n.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(n.v)==-1)throw new Error("Value ".concat(n.v," missing from SST!"));t[2]=3,r.setUint32(i,e.indexOf(n.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+n.t}return r.setUint32(4,s,!0),t.slice(0,i)}function $o(n){var e=Nr(n);return rd(e[1][0].data)}function Pz(n,e,t){var r,i,s,a;if(!((r=n[6])!=null&&r[0])||!((i=n[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=n[8])==null?void 0:s[0])==null?void 0:a.data)&&ql(n[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Ip(n[7][0].data),l=0,d=[],g=Ip(n[4][0].data),p=0,x=[],_=0;_<e.length;++_){if(e[_]==null){u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535);continue}u.setUint16(_*2,l,!0),g.setUint16(_*2,p,!0);var E,P;switch(typeof e[_]){case"string":E=Tg({t:"s",v:e[_]},t),P=bg({t:"s",v:e[_]},t);break;case"number":E=Tg({t:"n",v:e[_]},t),P=bg({t:"n",v:e[_]},t);break;case"boolean":E=Tg({t:"b",v:e[_]},t),P=bg({t:"b",v:e[_]},t);break;default:throw new Error("Unsupported value "+e[_])}d.push(E),l+=E.length,x.push(P),p+=P.length,++c}for(n[2][0].data=vn(c);_<n[7][0].data.length/2;++_)u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535,!0);return n[6][0].data=mc(d),n[3][0].data=mc(x),c}function Nz(n,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=n.Sheets[n.SheetNames[0]];n.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var r=gs(t["!ref"]);r.s.r=r.s.c=0;var i=!1;r.e.c>9&&(i=!0,r.e.c=9),r.e.r>49&&(i=!0,r.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(br(r)));var s=Sp(t,{range:r,header:1}),a=["~Sh33tJ5~"];s.forEach(function(D){return D.forEach(function(M){typeof M=="string"&&a.push(M)})});var o={},c=[],u=Sn.read(e.numbers,{type:"base64"});u.FileIndex.map(function(D,M){return[D,u.FullPaths[M]]}).forEach(function(D){var M=D[0],U=D[1];if(M.type==2&&M.name.match(/\.iwa/)){var J=M.content,oe=zs(J),le=qs(oe);le.forEach(function(ue){c.push(ue.id),o[ue.id]={deps:[],location:U,type:ql(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(D,M){return D-M});var l=c.filter(function(D){return D>1}).map(function(D){return[D,vn(D)]});u.FileIndex.map(function(D,M){return[D,u.FullPaths[M]]}).forEach(function(D){var M=D[0];if(D[1],!!M.name.match(/\.iwa/)){var U=qs(zs(M.content));U.forEach(function(J){J.messages.forEach(function(oe){l.forEach(function(le){J.messages.some(function(ue){return ql(ue.meta[1][0].data)!=11006&&Az(ue.data,le[1])})&&o[le[0]].deps.push(J.id)})})})}});for(var d=Sn.find(u,o[1].location),g=qs(zs(d.content)),p,x=0;x<g.length;++x){var _=g[x];_.id==1&&(p=_)}var E=$o(Nr(p.messages[0].data)[1][0].data);for(d=Sn.find(u,o[E].location),g=qs(zs(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);for(E=$o(Nr(p.messages[0].data)[2][0].data),d=Sn.find(u,o[E].location),g=qs(zs(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);for(E=$o(Nr(p.messages[0].data)[2][0].data),d=Sn.find(u,o[E].location),g=qs(zs(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);var P=Nr(p.messages[0].data);{P[6][0].data=vn(r.e.r+1),P[7][0].data=vn(r.e.c+1);var L=$o(P[46][0].data),V=Sn.find(u,o[L].location),K=qs(zs(V.content));{for(var ie=0;ie<K.length&&K[ie].id!=L;++ie);if(K[ie].id!=L)throw"Bad ColumnRowUIDMapArchive";var ae=Nr(K[ie].messages[0].data);ae[1]=[],ae[2]=[],ae[3]=[];for(var N=0;N<=r.e.c;++N){var A=[];A[1]=A[2]=[{type:0,data:vn(N+420690)}],ae[1].push({type:2,data:Xr(A)}),ae[2].push({type:0,data:vn(N)}),ae[3].push({type:0,data:vn(N)})}ae[4]=[],ae[5]=[],ae[6]=[];for(var C=0;C<=r.e.r;++C)A=[],A[1]=A[2]=[{type:0,data:vn(C+726270)}],ae[4].push({type:2,data:Xr(A)}),ae[5].push({type:0,data:vn(C)}),ae[6].push({type:0,data:vn(C)});K[ie].messages[0].data=Xr(ae)}V.content=vl(gl(K)),V.size=V.content.length,delete P[46];var B=Nr(P[4][0].data);{B[7][0].data=vn(r.e.r+1);var b=Nr(B[1][0].data),S=$o(b[2][0].data);V=Sn.find(u,o[S].location),K=qs(zs(V.content));{if(K[0].id!=S)throw"Bad HeaderStorageBucket";var R=Nr(K[0].messages[0].data);for(C=0;C<s.length;++C){var se=Nr(R[2][0].data);se[1][0].data=vn(C),se[4][0].data=vn(s[C].length),R[2][C]={type:R[2][0].type,data:Xr(se)}}K[0].messages[0].data=Xr(R)}V.content=vl(gl(K)),V.size=V.content.length;var me=$o(B[2][0].data);V=Sn.find(u,o[me].location),K=qs(zs(V.content));{if(K[0].id!=me)throw"Bad HeaderStorageBucket";for(R=Nr(K[0].messages[0].data),N=0;N<=r.e.c;++N)se=Nr(R[2][0].data),se[1][0].data=vn(N),se[4][0].data=vn(r.e.r+1),R[2][N]={type:R[2][0].type,data:Xr(se)};K[0].messages[0].data=Xr(R)}V.content=vl(gl(K)),V.size=V.content.length;var Ee=$o(B[4][0].data);(function(){for(var D=Sn.find(u,o[Ee].location),M=qs(zs(D.content)),U,J=0;J<M.length;++J){var oe=M[J];oe.id==Ee&&(U=oe)}var le=Nr(U.messages[0].data);{le[3]=[];var ue=[];a.forEach(function(ze,Ze){ue[1]=[{type:0,data:vn(Ze)}],ue[2]=[{type:0,data:vn(1)}],ue[3]=[{type:2,data:bz(ze)}],le[3].push({type:2,data:Xr(ue)})})}U.messages[0].data=Xr(le);var xe=gl(M),Ve=vl(xe);D.content=Ve,D.size=D.content.length})();var Pe=Nr(B[3][0].data);{var _e=Pe[1][0];delete Pe[2];var ke=Nr(_e.data);{var Oe=$o(ke[2][0].data);(function(){for(var D=Sn.find(u,o[Oe].location),M=qs(zs(D.content)),U,J=0;J<M.length;++J){var oe=M[J];oe.id==Oe&&(U=oe)}var le=Nr(U.messages[0].data);{delete le[6],delete Pe[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var xe=0,Ve=0;Ve<=r.e.r;++Ve){var ze=Nr(ue);xe+=Pz(ze,s[Ve],a),ze[1][0].data=vn(Ve),le[5].push({data:Xr(ze),type:2})}le[1]=[{type:0,data:vn(r.e.c+1)}],le[2]=[{type:0,data:vn(r.e.r+1)}],le[3]=[{type:0,data:vn(xe)}],le[4]=[{type:0,data:vn(r.e.r+1)}]}U.messages[0].data=Xr(le);var Ze=gl(M),at=vl(Ze);D.content=at,D.size=D.content.length})()}_e.data=Xr(ke)}B[3][0].data=Xr(Pe)}P[4][0].data=Xr(B)}p.messages[0].data=Xr(P);var rt=gl(g),T=vl(rt);return d.content=T,d.size=d.content.length,u}function kz(n){return function(t){for(var r=0;r!=n.length;++r){var i=n[r];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function Xv(n){kz([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(n)}function Cz(n,e){return e.bookType=="ods"?aS(n,e):e.bookType=="numbers"?Nz(n,e):e.bookType=="xlsb"?Rz(n,e):Lz(n,e)}function Rz(n,e){Nl=1024,n&&!n.SSF&&(n.SSF=Ji(sr)),n&&n.SSF&&(ym(),_m(n.SSF),e.revssf=wm(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,If?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",r=qI.indexOf(e.bookType)>-1,i=vI();Xv(e=e||{});var s=Dv(),a="",o=0;if(e.cellXfs=[],bc(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",$t(s,a,xI(n.Props,e)),i.coreprops.push(a),_n(e.rels,2,a,on.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(n.SheetNames[u]);n.Props.SheetNames=c}for(n.Props.Worksheets=n.Props.SheetNames.length,$t(s,a,TI(n.Props)),i.extprops.push(a),_n(e.rels,3,a,on.EXT_PROPS),n.Custprops!==n.Props&&ai(n.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,bI(n.Custprops)),i.custprops.push(a),_n(e.rels,4,a,on.CUST_PROPS)),o=1;o<=n.SheetNames.length;++o){var l={"!id":{}},d=n.Sheets[n.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,Fq(o-1,a,e,n,l)),i.sheets.push(a),_n(e.wbrels,-1,"worksheets/sheet"+o+"."+t,on.WS[0])}if(d){var p=d["!comments"],x=!1,_="";p&&p.length>0&&(_="xl/comments"+o+"."+t,$t(s,_,Bq(p,_)),i.comments.push(_),_n(l,-1,"../comments"+o+"."+t,on.CMNT),x=!0),d["!legacy"]&&x&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",UI(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}l["!id"].rId1&&$t(s,yI(a),Ul(l))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,Mq(e.Strings,a,e)),i.strs.push(a),_n(e.wbrels,-1,"sharedStrings."+t,on.SST)),a="xl/workbook."+t,$t(s,a,Dq(n,a)),i.workbooks.push(a),_n(e.rels,1,a,on.WB),a="xl/theme/theme1.xml",$t(s,a,BI(n.Themes,e)),i.themes.push(a),_n(e.wbrels,-1,"theme/theme1.xml",on.THEME),a="xl/styles."+t,$t(s,a,Oq(n,a,e)),i.styles.push(a),_n(e.wbrels,-1,"styles."+t,on.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",$t(s,a,n.vbaraw),i.vba.push(a),_n(e.wbrels,-1,"vbaProject.bin",on.VBA)),a="xl/metadata."+t,$t(s,a,Vq(a)),i.metadata.push(a),_n(e.wbrels,-1,"metadata."+t,on.XLMETA),$t(s,"[Content_Types].xml",_I(i,e)),$t(s,"_rels/.rels",Ul(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Ul(e.wbrels)),delete e.revssf,delete e.ssf,s}function Lz(n,e){Nl=1024,n&&!n.SSF&&(n.SSF=Ji(sr)),n&&n.SSF&&(ym(),_m(n.SSF),e.revssf=wm(n.SSF),e.revssf[n.SSF[65535]]=0,e.ssf=n.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,If?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",r=qI.indexOf(e.bookType)>-1,i=vI();Xv(e=e||{});var s=Dv(),a="",o=0;if(e.cellXfs=[],bc(e.cellXfs,{},{revssf:{General:0}}),n.Props||(n.Props={}),a="docProps/core.xml",$t(s,a,xI(n.Props,e)),i.coreprops.push(a),_n(e.rels,2,a,on.CORE_PROPS),a="docProps/app.xml",!(n.Props&&n.Props.SheetNames))if(!n.Workbook||!n.Workbook.Sheets)n.Props.SheetNames=n.SheetNames;else{for(var c=[],u=0;u<n.SheetNames.length;++u)(n.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(n.SheetNames[u]);n.Props.SheetNames=c}n.Props.Worksheets=n.Props.SheetNames.length,$t(s,a,TI(n.Props)),i.extprops.push(a),_n(e.rels,3,a,on.EXT_PROPS),n.Custprops!==n.Props&&ai(n.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,bI(n.Custprops)),i.custprops.push(a),_n(e.rels,4,a,on.CUST_PROPS));var l=["SheetJ5"];for(e.tcid=0,o=1;o<=n.SheetNames.length;++o){var d={"!id":{}},g=n.Sheets[n.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,JI(o-1,e,n,d)),i.sheets.push(a),_n(e.wbrels,-1,"worksheets/sheet"+o+"."+t,on.WS[0])}if(g){var x=g["!comments"],_=!1,E="";if(x&&x.length>0){var P=!1;x.forEach(function(L){L[1].forEach(function(V){V.T==!0&&(P=!0)})}),P&&(E="xl/threadedComments/threadedComment"+o+"."+t,$t(s,E,lV(x,l,e)),i.threadedcomments.push(E),_n(d,-1,"../threadedComments/threadedComment"+o+"."+t,on.TCMNT)),E="xl/comments"+o+"."+t,$t(s,E,jI(x)),i.comments.push(E),_n(d,-1,"../comments"+o+"."+t,on.CMNT),_=!0}g["!legacy"]&&_&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",UI(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&$t(s,yI(a),Ul(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,RI(e.Strings,e)),i.strs.push(a),_n(e.wbrels,-1,"sharedStrings."+t,on.SST)),a="xl/workbook."+t,$t(s,a,eS(n)),i.workbooks.push(a),_n(e.rels,1,a,on.WB),a="xl/theme/theme1.xml",$t(s,a,BI(n.Themes,e)),i.themes.push(a),_n(e.wbrels,-1,"theme/theme1.xml",on.THEME),a="xl/styles."+t,$t(s,a,OI(n,e)),i.styles.push(a),_n(e.wbrels,-1,"styles."+t,on.STY),n.vbaraw&&r&&(a="xl/vbaProject.bin",$t(s,a,n.vbaraw),i.vba.push(a),_n(e.wbrels,-1,"vbaProject.bin",on.VBA)),a="xl/metadata."+t,$t(s,a,VI()),i.metadata.push(a),_n(e.wbrels,-1,"metadata."+t,on.XLMETA),l.length>1&&(a="xl/persons/person.xml",$t(s,a,hV(l)),i.people.push(a),_n(e.wbrels,-1,"persons/person.xml",on.PEOPLE)),$t(s,"[Content_Types].xml",_I(i,e)),$t(s,"_rels/.rels",Ul(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Ul(e.wbrels)),delete e.revssf,delete e.ssf,s}function Dz(n,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];case"base64":t=ao(n.slice(0,12));break;case"binary":t=n;break;case"array":return[n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function oS(n,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return kd(e.file,Sn.write(n,{type:hn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Sn.write(n,e)}function Fz(n,e){var t=Ji(e||{}),r=Cz(n,t);return Oz(r,t)}function Oz(n,e){var t={},r=hn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=r;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=r;break;default:throw new Error("Unrecognized type "+e.type)}var i=n.FullPaths?Sn.write(n,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):n.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(vm(i))}return e.password&&typeof encrypt_agile<"u"?oS(encrypt_agile(i,e.password),e):e.type==="file"?kd(e.file,i):e.type=="string"?Ef(i):i}function Mz(n,e){var t=e||{},r=Zq(n,t);return oS(r,t)}function ca(n,e,t){t||(t="");var r=t+n;switch(e.type){case"base64":return Zf(td(r));case"binary":return td(r);case"string":return n;case"file":return kd(e.file,r,"utf8");case"buffer":return hn?po(r,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(r):ca(r,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Bz(n,e){switch(e.type){case"base64":return Zf(n);case"binary":return n;case"string":return n;case"file":return kd(e.file,n,"binary");case"buffer":return hn?po(n,"binary"):n.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function w0(n,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",r=0;r<n.length;++r)t+=String.fromCharCode(n[r]);return e.type=="base64"?Zf(t):e.type=="string"?Ef(t):t;case"file":return kd(e.file,n);case"buffer":return n;default:throw new Error("Unrecognized type "+e.type)}}function cS(n,e){fM(),Tq(n);var t=Ji(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var r=cS(n,t);return t.type="array",vm(r)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=n.SheetNames.indexOf(t.sheet),!n.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return ca(Jq(n,t),t);case"slk":case"sylk":return ca(wB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"htm":case"html":return ca(rS(n.Sheets[n.SheetNames[i]],t),t);case"txt":return Bz(uS(n.Sheets[n.SheetNames[i]],t),t);case"csv":return ca(Jv(n.Sheets[n.SheetNames[i]],t),t,"\uFEFF");case"dif":return ca(xB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"dbf":return w0(yB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"prn":return ca(EB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"rtf":return ca(NB.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"eth":return ca(CI.from_sheet(n.Sheets[n.SheetNames[i]],t),t);case"fods":return ca(aS(n,t),t);case"wk1":return w0(m5.sheet_to_wk1(n.Sheets[n.SheetNames[i]],t),t);case"wk3":return w0(m5.book_to_wk3(n,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),w0(nS(n,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),Mz(n,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return Fz(n,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Vz(n){if(!n.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=n.file.slice(n.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(n.bookType=t.slice(1)),n.bookType=e[n.bookType]||n.bookType}}function Uz(n,e,t){var r={};return r.type="file",r.file=e,Vz(r),cS(n,r)}function jz(n,e,t,r,i,s,a,o){var c=ii(t),u=o.defval,l=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||n[t])for(var p=e.s.c;p<=e.e.c;++p){var x=a?n[t][p]:n[r[p]+c];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var _=x.v;switch(x.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[p]!=null){if(_==null)if(x.t=="e"&&_===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(l&&_===null)g[s[p]]=null;else continue;else g[s[p]]=l&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?_:oo(x,_,o);_!=null&&(d=!1)}}return{row:g,isempty:d}}function Sp(n,e){if(n==null||n["!ref"]==null)return[];var t={t:"n",v:0},r=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},l=u.range!=null?u.range:n["!ref"];switch(u.header===1?r=1:u.header==="A"?r=2:Array.isArray(u.header)?r=3:u.header==null&&(r=0),typeof l){case"string":c=zn(l);break;case"number":c=zn(n["!ref"]),c.s.r=l;break;default:c=l}r>0&&(i=0);var d=ii(c.s.r),g=[],p=[],x=0,_=0,E=Array.isArray(n),P=c.s.r,L=0,V={};E&&!n[P]&&(n[P]=[]);var K=u.skipHidden&&n["!cols"]||[],ie=u.skipHidden&&n["!rows"]||[];for(L=c.s.c;L<=c.e.c;++L)if(!(K[L]||{}).hidden)switch(g[L]=mi(L),t=E?n[P][L]:n[g[L]+d],r){case 1:s[L]=L-c.s.c;break;case 2:s[L]=g[L];break;case 3:s[L]=u.header[L-c.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=oo(t,null,u),_=V[a]||0,!_)V[a]=1;else{do o=a+"_"+_++;while(V[o]);V[a]=_,V[o]=1}s[L]=o}for(P=c.s.r+i;P<=c.e.r;++P)if(!(ie[P]||{}).hidden){var ae=jz(n,c,P,g,r,s,E,u);(ae.isempty===!1||(r===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=ae.row)}return p.length=x,p}var T5=/"/g;function qz(n,e,t,r,i,s,a,o){for(var c=!0,u=[],l="",d=ii(t),g=e.s.c;g<=e.e.c;++g)if(r[g]){var p=o.dense?(n[t]||[])[g]:n[r[g]+d];if(p==null)l="";else if(p.v!=null){c=!1,l=""+(o.rawNumbers&&p.t=="n"?p.v:oo(p,null,o));for(var x=0,_=0;x!==l.length;++x)if((_=l.charCodeAt(x))===i||_===s||_===34||o.forceQuotes){l='"'+l.replace(T5,'""')+'"';break}l=="ID"&&(l='"ID"')}else p.f!=null&&!p.F?(c=!1,l="="+p.f,l.indexOf(",")>=0&&(l='"'+l.replace(T5,'""')+'"')):l="";u.push(l)}return o.blankrows===!1&&c?null:u.join(a)}function Jv(n,e){var t=[],r=e??{};if(n==null||n["!ref"]==null)return"";var i=zn(n["!ref"]),s=r.FS!==void 0?r.FS:",",a=s.charCodeAt(0),o=r.RS!==void 0?r.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),l="",d=[];r.dense=Array.isArray(n);for(var g=r.skipHidden&&n["!cols"]||[],p=r.skipHidden&&n["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(g[x]||{}).hidden||(d[x]=mi(x));for(var _=0,E=i.s.r;E<=i.e.r;++E)(p[E]||{}).hidden||(l=qz(n,i,E,d,a,c,s,r),l!=null&&(r.strip&&(l=l.replace(u,"")),(l||r.blankrows!==!1)&&t.push((_++?o:"")+l)));return delete r.dense,t.join("")}function uS(n,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Jv(n,e);return t}function zz(n){var e="",t,r="";if(n==null||n["!ref"]==null)return[];var i=zn(n["!ref"]),s="",a=[],o,c=[],u=Array.isArray(n);for(o=i.s.c;o<=i.e.c;++o)a[o]=mi(o);for(var l=i.s.r;l<=i.e.r;++l)for(s=ii(l),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(n[l]||[])[o]:n[e],r="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;r=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)r=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)r=""+t.v;else if(t.t=="b")r=t.v?"TRUE":"FALSE";else if(t.w!==void 0)r="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?r="'"+t.v:r=""+t.v}}c[c.length]=e+"="+r}return c}function lS(n,e,t){var r=t||{},i=+!r.skipHeader,s=n||{},a=0,o=0;if(s&&r.origin!=null)if(typeof r.origin=="number")a=r.origin;else{var c=typeof r.origin=="string"?Ur(r.origin):r.origin;a=c.r,o=c.c}var u,l={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=zn(s["!ref"]);l.e.c=Math.max(l.e.c,d.e.c),l.e.r=Math.max(l.e.r,d.e.r),a==-1&&(a=d.e.r+1,l.e.r=a+e.length-1+i)}else a==-1&&(a=0,l.e.r=e.length-1+i);var g=r.header||[],p=0;e.forEach(function(_,E){ai(_).forEach(function(P){(p=g.indexOf(P))==-1&&(g[p=g.length]=P);var L=_[P],V="z",K="",ie=En({c:o+p,r:a+E+i});u=id(s,ie),L&&typeof L=="object"&&!(L instanceof Date)?s[ie]=L:(typeof L=="number"?V="n":typeof L=="boolean"?V="b":typeof L=="string"?V="s":L instanceof Date?(V="d",r.cellDates||(V="n",L=Xi(L)),K=r.dateNF||sr[14]):L===null&&r.nullError&&(V="e",L=0),u?(u.t=V,u.v=L,delete u.w,delete u.R,K&&(u.z=K)):s[ie]=u={t:V,v:L},K&&(u.z=K))})}),l.e.c=Math.max(l.e.c,o+g.length-1);var x=ii(a);if(i)for(p=0;p<g.length;++p)s[mi(p+o)+x]={t:"s",v:g[p]};return s["!ref"]=br(l),s}function Wz(n,e){return lS(null,n,e)}function id(n,e,t){if(typeof e=="string"){if(Array.isArray(n)){var r=Ur(e);return n[r.r]||(n[r.r]=[]),n[r.r][r.c]||(n[r.r][r.c]={t:"z"})}return n[e]||(n[e]={t:"z"})}return typeof e!="number"?id(n,En(e)):id(n,En({r:e,c:t||0}))}function Hz(n,e){if(typeof e=="number"){if(e>=0&&n.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=n.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function $z(){return{SheetNames:[],Sheets:{}}}function Gz(n,e,t,r){var i=1;if(!t)for(;i<=65535&&n.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||n.SheetNames.length>=65535)throw new Error("Too many worksheets");if(r&&n.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&n.SheetNames.indexOf(t=a+i)!=-1;++i);}if(ZI(t),n.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return n.SheetNames.push(t),n.Sheets[t]=e,t}function Kz(n,e,t){n.Workbook||(n.Workbook={}),n.Workbook.Sheets||(n.Workbook.Sheets=[]);var r=Hz(n,e);switch(n.Workbook.Sheets[r]||(n.Workbook.Sheets[r]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}n.Workbook.Sheets[r].Hidden=t}function Yz(n,e){return n.z=e,n}function hS(n,e,t){return e?(n.l={Target:e},t&&(n.l.Tooltip=t)):delete n.l,n}function Xz(n,e,t){return hS(n,"#"+e,t)}function Jz(n,e,t){n.c||(n.c=[]),n.c.push({t:e,a:t||"SheetJS"})}function Qz(n,e,t,r){for(var i=typeof e!="string"?e:zn(e),s=typeof e=="string"?e:br(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=id(n,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=t,r&&(c.D=!0))}return n}var Ag={encode_col:mi,encode_row:ii,encode_cell:En,encode_range:br,decode_col:Uv,decode_row:Vv,split_cell:f9,decode_cell:Ur,decode_range:gs,format_cell:oo,sheet_add_aoa:hI,sheet_add_json:lS,sheet_add_dom:iS,aoa_to_sheet:Ih,json_to_sheet:Wz,table_to_sheet:sS,table_to_book:xz,sheet_to_csv:Jv,sheet_to_txt:uS,sheet_to_json:Sp,sheet_to_html:rS,sheet_to_formulae:zz,sheet_to_row_object_array:Sp,sheet_get_cell:id,book_new:$z,book_append_sheet:Gz,book_set_sheet_visibility:Kz,cell_set_number_format:Yz,cell_set_hyperlink:hS,cell_set_internal_link:Xz,cell_add_comment:Jz,sheet_set_array_formula:Qz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Zz="modulepreload",eW=function(n,e){return new URL(n,e).href},b5={},T1=function(e,t,r){let i=Promise.resolve();if(t&&t.length>0){const a=document.getElementsByTagName("link"),o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(t.map(u=>{if(u=eW(u,r),u in b5)return;b5[u]=!0;const l=u.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(!!r)for(let x=a.length-1;x>=0;x--){const _=a[x];if(_.href===u&&(!l||_.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${d}`))return;const p=document.createElement("link");if(p.rel=l?"stylesheet":Zz,l||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),l)return new Promise((x,_)=>{p.addEventListener("load",x),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function xn(n){"@babel/helpers - typeof";return xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xn(n)}var pi=Uint8Array,ps=Uint16Array,Qv=Int32Array,Am=new pi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Im=new pi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),b1=new pi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),fS=function(n,e){for(var t=new ps(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new Qv(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},dS=fS(Am,2),pS=dS.b,A1=dS.r;pS[28]=258,A1[258]=28;var mS=fS(Im,0),tW=mS.b,A5=mS.r,I1=new ps(32768);for(var qn=0;qn<32768;++qn){var Go=(qn&43690)>>1|(qn&21845)<<1;Go=(Go&52428)>>2|(Go&13107)<<2,Go=(Go&61680)>>4|(Go&3855)<<4,I1[qn]=((Go&65280)>>8|(Go&255)<<8)>>1}var xa=function(n,e,t){for(var r=n.length,i=0,s=new ps(e);i<r;++i)n[i]&&++s[n[i]-1];var a=new ps(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ps(1<<e);var c=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],l=e-n[i],d=a[n[i]-1]++<<l,g=d|(1<<l)-1;d<=g;++d)o[I1[d]>>c]=u}else for(o=new ps(r),i=0;i<r;++i)n[i]&&(o[i]=I1[a[n[i]-1]++]>>15-n[i]);return o},gc=new pi(288);for(var qn=0;qn<144;++qn)gc[qn]=8;for(var qn=144;qn<256;++qn)gc[qn]=9;for(var qn=256;qn<280;++qn)gc[qn]=7;for(var qn=280;qn<288;++qn)gc[qn]=8;var sd=new pi(32);for(var qn=0;qn<32;++qn)sd[qn]=5;var nW=xa(gc,9,0),rW=xa(gc,9,1),iW=xa(sd,5,0),sW=xa(sd,5,1),Ig=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Ws=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Sg=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Zv=function(n){return(n+7)/8|0},gS=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new pi(n.subarray(e,t))},aW=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],$s=function(n,e,t){var r=new Error(e||aW[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,$s),!t)throw r;return r},oW=function(n,e,t,r){var i=n.length,s=0;if(!i||e.f&&!e.l)return t||new pi(0);var a=!t,o=a||e.i!=2,c=e.i;a&&(t=new pi(i*3));var u=function(Ve){var ze=t.length;if(Ve>ze){var Ze=new pi(Math.max(ze*2,Ve));Ze.set(t),t=Ze}},l=e.f||0,d=e.p||0,g=e.b||0,p=e.l,x=e.d,_=e.m,E=e.n,P=i*8;do{if(!p){l=Ws(n,d,1);var L=Ws(n,d+1,3);if(d+=3,L)if(L==1)p=rW,x=sW,_=9,E=5;else if(L==2){var ae=Ws(n,d,31)+257,N=Ws(n,d+10,15)+4,A=ae+Ws(n,d+5,31)+1;d+=14;for(var C=new pi(A),B=new pi(19),b=0;b<N;++b)B[b1[b]]=Ws(n,d+b*3,7);d+=N*3;for(var S=Ig(B),R=(1<<S)-1,se=xa(B,S,1),b=0;b<A;){var me=se[Ws(n,d,R)];d+=me&15;var V=me>>4;if(V<16)C[b++]=V;else{var Ee=0,Pe=0;for(V==16?(Pe=3+Ws(n,d,3),d+=2,Ee=C[b-1]):V==17?(Pe=3+Ws(n,d,7),d+=3):V==18&&(Pe=11+Ws(n,d,127),d+=7);Pe--;)C[b++]=Ee}}var _e=C.subarray(0,ae),ke=C.subarray(ae);_=Ig(_e),E=Ig(ke),p=xa(_e,_,1),x=xa(ke,E,1)}else $s(1);else{var V=Zv(d)+4,K=n[V-4]|n[V-3]<<8,ie=V+K;if(ie>i){c&&$s(0);break}o&&u(g+K),t.set(n.subarray(V,ie),g),e.b=g+=K,e.p=d=ie*8,e.f=l;continue}if(d>P){c&&$s(0);break}}o&&u(g+131072);for(var Oe=(1<<_)-1,rt=(1<<E)-1,T=d;;T=d){var Ee=p[Sg(n,d)&Oe],D=Ee>>4;if(d+=Ee&15,d>P){c&&$s(0);break}if(Ee||$s(2),D<256)t[g++]=D;else if(D==256){T=d,p=null;break}else{var M=D-254;if(D>264){var b=D-257,U=Am[b];M=Ws(n,d,(1<<U)-1)+pS[b],d+=U}var J=x[Sg(n,d)&rt],oe=J>>4;J||$s(3),d+=J&15;var ke=tW[oe];if(oe>3){var U=Im[oe];ke+=Sg(n,d)&(1<<U)-1,d+=U}if(d>P){c&&$s(0);break}o&&u(g+131072);var le=g+M;if(g<ke){var ue=s-ke,xe=Math.min(ke,le);for(ue+g<0&&$s(3);g<xe;++g)t[g]=r[ue+g]}for(;g<le;++g)t[g]=t[g-ke]}}e.l=p,e.p=T,e.b=g,e.f=l,p&&(l=1,e.m=_,e.d=x,e.n=E)}while(!l);return g!=t.length&&a?gS(t,0,g):t.subarray(0,g)},za=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},tf=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Pg=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:_S,l:0};if(i==1){var a=new pi(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(ie,ae){return ie.f-ae.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,l=1,d=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};l!=i-1;)o=t[t[u].f<t[d].f?u++:d++],c=t[u!=l&&t[u].f<t[d].f?u++:d++],t[l++]={s:-1,f:o.f+c.f,l:o,r:c};for(var g=s[0].s,r=1;r<i;++r)s[r].s>g&&(g=s[r].s);var p=new ps(g+1),x=S1(t[l-1],p,0);if(x>e){var r=0,_=0,E=x-e,P=1<<E;for(s.sort(function(ae,N){return p[N.s]-p[ae.s]||ae.f-N.f});r<i;++r){var L=s[r].s;if(p[L]>e)_+=P-(1<<x-p[L]),p[L]=e;else break}for(_>>=E;_>0;){var V=s[r].s;p[V]<e?_-=1<<e-p[V]++-1:++r}for(;r>=0&&_;--r){var K=s[r].s;p[K]==e&&(--p[K],++_)}x=e}return{t:new pi(p),l:x}},S1=function(n,e,t){return n.s==-1?Math.max(S1(n.l,e,t+1),S1(n.r,e,t+1)):e[n.s]=t},I5=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ps(++e),r=0,i=n[0],s=1,a=function(c){t[r++]=c},o=1;o<=e;++o)if(n[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=n[o]}return{c:t.subarray(0,r),n:e}},nf=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},vS=function(n,e,t){var r=t.length,i=Zv(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},S5=function(n,e,t,r,i,s,a,o,c,u,l){za(e,l++,t),++i[256];for(var d=Pg(i,15),g=d.t,p=d.l,x=Pg(s,15),_=x.t,E=x.l,P=I5(g),L=P.c,V=P.n,K=I5(_),ie=K.c,ae=K.n,N=new ps(19),A=0;A<L.length;++A)++N[L[A]&31];for(var A=0;A<ie.length;++A)++N[ie[A]&31];for(var C=Pg(N,7),B=C.t,b=C.l,S=19;S>4&&!B[b1[S-1]];--S);var R=u+5<<3,se=nf(i,gc)+nf(s,sd)+a,me=nf(i,g)+nf(s,_)+a+14+3*S+nf(N,B)+2*N[16]+3*N[17]+7*N[18];if(c>=0&&R<=se&&R<=me)return vS(e,l,n.subarray(c,c+u));var Ee,Pe,_e,ke;if(za(e,l,1+(me<se)),l+=2,me<se){Ee=xa(g,p,0),Pe=g,_e=xa(_,E,0),ke=_;var Oe=xa(B,b,0);za(e,l,V-257),za(e,l+5,ae-1),za(e,l+10,S-4),l+=14;for(var A=0;A<S;++A)za(e,l+3*A,B[b1[A]]);l+=3*S;for(var rt=[L,ie],T=0;T<2;++T)for(var D=rt[T],A=0;A<D.length;++A){var M=D[A]&31;za(e,l,Oe[M]),l+=B[M],M>15&&(za(e,l,D[A]>>5&127),l+=D[A]>>12)}}else Ee=nW,Pe=gc,_e=iW,ke=sd;for(var A=0;A<o;++A){var U=r[A];if(U>255){var M=U>>18&31;tf(e,l,Ee[M+257]),l+=Pe[M+257],M>7&&(za(e,l,U>>23&31),l+=Am[M]);var J=U&31;tf(e,l,_e[J]),l+=ke[J],J>3&&(tf(e,l,U>>5&8191),l+=Im[J])}else tf(e,l,Ee[U]),l+=Pe[U]}return tf(e,l,Ee[256]),l+Pe[256]},cW=new Qv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),_S=new pi(0),uW=function(n,e,t,r,i,s){var a=s.z||n.length,o=new pi(r+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(r,o.length-i),u=s.l,l=(s.r||0)&7;if(e){l&&(c[0]=s.r>>3);for(var d=cW[e-1],g=d>>13,p=d&8191,x=(1<<t)-1,_=s.p||new ps(32768),E=s.h||new ps(x+1),P=Math.ceil(t/3),L=2*P,V=function(at){return(n[at]^n[at+1]<<P^n[at+2]<<L)&x},K=new Qv(25e3),ie=new ps(288),ae=new ps(32),N=0,A=0,C=s.i||0,B=0,b=s.w||0,S=0;C+2<a;++C){var R=V(C),se=C&32767,me=E[R];if(_[se]=me,E[R]=se,b<=C){var Ee=a-C;if((N>7e3||B>24576)&&(Ee>423||!u)){l=S5(n,c,0,K,ie,ae,A,B,S,C-S,l),B=N=A=0,S=C;for(var Pe=0;Pe<286;++Pe)ie[Pe]=0;for(var Pe=0;Pe<30;++Pe)ae[Pe]=0}var _e=2,ke=0,Oe=p,rt=se-me&32767;if(Ee>2&&R==V(C-rt))for(var T=Math.min(g,Ee)-1,D=Math.min(32767,C),M=Math.min(258,Ee);rt<=D&&--Oe&&se!=me;){if(n[C+_e]==n[C+_e-rt]){for(var U=0;U<M&&n[C+U]==n[C+U-rt];++U);if(U>_e){if(_e=U,ke=rt,U>T)break;for(var J=Math.min(rt,U-2),oe=0,Pe=0;Pe<J;++Pe){var le=C-rt+Pe&32767,ue=_[le],xe=le-ue&32767;xe>oe&&(oe=xe,me=le)}}}se=me,me=_[se],rt+=se-me&32767}if(ke){K[B++]=268435456|A1[_e]<<18|A5[ke];var Ve=A1[_e]&31,ze=A5[ke]&31;A+=Am[Ve]+Im[ze],++ie[257+Ve],++ae[ze],b=C+_e,++N}else K[B++]=n[C],++ie[n[C]]}}for(C=Math.max(C,b);C<a;++C)K[B++]=n[C],++ie[n[C]];l=S5(n,c,u,K,ie,ae,A,B,S,C-S,l),u||(s.r=l&7|c[l/8|0]<<3,l-=7,s.h=E,s.p=_,s.i=C,s.w=b)}else{for(var C=s.w||0;C<a+u;C+=65535){var Ze=C+65535;Ze>=a&&(c[l/8|0]=u,Ze=a),l=vS(c,l+1,n.subarray(C,Ze))}s.i=a}return gS(o,0,r+Zv(l)+i)},yS=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=r+=t[a];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},lW=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new pi(s.length+n.length);a.set(s),a.set(n,s.length),n=a,i.w=s.length}return uW(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},wS=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},hW=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=yS();i.p(e.dictionary),wS(n,2,i.d())}},fW=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&$s(6,"invalid zlib data"),(n[1]>>5&1)==1&&$s(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function P1(n,e){e||(e={});var t=yS();t.p(n);var r=lW(n,e,e.dictionary?6:2,4);return hW(r,e),wS(r,r.length-4,t.d()),r}function dW(n,e){return oW(n.subarray(fW(n),-4),{i:2},e,e)}var pW=typeof TextDecoder<"u"&&new TextDecoder,mW=0;try{pW.decode(_S,{stream:!0}),mW=1}catch{}var Ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Ng(){Ot.console&&typeof Ot.console.log=="function"&&Ot.console.log.apply(Ot.console,arguments)}var Cn={log:Ng,warn:function(n){Ot.console&&(typeof Ot.console.warn=="function"?Ot.console.warn.apply(Ot.console,arguments):Ng.call(null,arguments))},error:function(n){Ot.console&&(typeof Ot.console.error=="function"?Ot.console.error.apply(Ot.console,arguments):Ng(n))}};function kg(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){$c(r.response,e,t)},r.onerror=function(){Cn.error("could not download file")},r.send()}function P5(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function x0(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var Sf,N1,$c=Ot.saveAs||((typeof window>"u"?"undefined":xn(window))!=="object"||window!==Ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Ot.URL||Ot.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?P5(i.href)?kg(n,e,t):x0(i,i.target="_blank"):x0(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){x0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(P5(n))kg(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){x0(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:xn(s)!=="object"&&(Cn.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return kg(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Ot.HTMLElement)||Ot.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":xn(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var l=o.result;l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=l:location=l,r=null},o.readAsDataURL(n)}else{var c=Ot.URL||Ot.webkitURL,u=c.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function xS(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,a=i.exec(n);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Cg(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=li(t,r,i,s,e[0],7,-680876936),s=li(s,t,r,i,e[1],12,-389564586),i=li(i,s,t,r,e[2],17,606105819),r=li(r,i,s,t,e[3],22,-1044525330),t=li(t,r,i,s,e[4],7,-176418897),s=li(s,t,r,i,e[5],12,1200080426),i=li(i,s,t,r,e[6],17,-1473231341),r=li(r,i,s,t,e[7],22,-45705983),t=li(t,r,i,s,e[8],7,1770035416),s=li(s,t,r,i,e[9],12,-1958414417),i=li(i,s,t,r,e[10],17,-42063),r=li(r,i,s,t,e[11],22,-1990404162),t=li(t,r,i,s,e[12],7,1804603682),s=li(s,t,r,i,e[13],12,-40341101),i=li(i,s,t,r,e[14],17,-1502002290),t=hi(t,r=li(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=hi(s,t,r,i,e[6],9,-1069501632),i=hi(i,s,t,r,e[11],14,643717713),r=hi(r,i,s,t,e[0],20,-373897302),t=hi(t,r,i,s,e[5],5,-701558691),s=hi(s,t,r,i,e[10],9,38016083),i=hi(i,s,t,r,e[15],14,-660478335),r=hi(r,i,s,t,e[4],20,-405537848),t=hi(t,r,i,s,e[9],5,568446438),s=hi(s,t,r,i,e[14],9,-1019803690),i=hi(i,s,t,r,e[3],14,-187363961),r=hi(r,i,s,t,e[8],20,1163531501),t=hi(t,r,i,s,e[13],5,-1444681467),s=hi(s,t,r,i,e[2],9,-51403784),i=hi(i,s,t,r,e[7],14,1735328473),t=fi(t,r=hi(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=fi(s,t,r,i,e[8],11,-2022574463),i=fi(i,s,t,r,e[11],16,1839030562),r=fi(r,i,s,t,e[14],23,-35309556),t=fi(t,r,i,s,e[1],4,-1530992060),s=fi(s,t,r,i,e[4],11,1272893353),i=fi(i,s,t,r,e[7],16,-155497632),r=fi(r,i,s,t,e[10],23,-1094730640),t=fi(t,r,i,s,e[13],4,681279174),s=fi(s,t,r,i,e[0],11,-358537222),i=fi(i,s,t,r,e[3],16,-722521979),r=fi(r,i,s,t,e[6],23,76029189),t=fi(t,r,i,s,e[9],4,-640364487),s=fi(s,t,r,i,e[12],11,-421815835),i=fi(i,s,t,r,e[15],16,530742520),t=di(t,r=fi(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=di(s,t,r,i,e[7],10,1126891415),i=di(i,s,t,r,e[14],15,-1416354905),r=di(r,i,s,t,e[5],21,-57434055),t=di(t,r,i,s,e[12],6,1700485571),s=di(s,t,r,i,e[3],10,-1894986606),i=di(i,s,t,r,e[10],15,-1051523),r=di(r,i,s,t,e[1],21,-2054922799),t=di(t,r,i,s,e[8],6,1873313359),s=di(s,t,r,i,e[15],10,-30611744),i=di(i,s,t,r,e[6],15,-1560198380),r=di(r,i,s,t,e[13],21,1309151649),t=di(t,r,i,s,e[4],6,-145523070),s=di(s,t,r,i,e[11],10,-1120210379),i=di(i,s,t,r,e[2],15,718787259),r=di(r,i,s,t,e[9],21,-343485551),n[0]=tc(t,n[0]),n[1]=tc(r,n[1]),n[2]=tc(i,n[2]),n[3]=tc(s,n[3])}function Sm(n,e,t,r,i,s){return e=tc(tc(e,n),tc(r,s)),tc(e<<i|e>>>32-i,t)}function li(n,e,t,r,i,s,a){return Sm(e&t|~e&r,n,e,i,s,a)}function hi(n,e,t,r,i,s,a){return Sm(e&r|t&~r,n,e,i,s,a)}function fi(n,e,t,r,i,s,a){return Sm(e^t^r,n,e,i,s,a)}function di(n,e,t,r,i,s,a){return Sm(t^(e|~r),n,e,i,s,a)}function ES(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Cg(r,gW(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Cg(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Cg(r,i),r}function gW(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}Sf=Ot.atob.bind(Ot),N1=Ot.btoa.bind(Ot);var N5="0123456789abcdef".split("");function vW(n){for(var e="",t=0;t<4;t++)e+=N5[n>>8*t+4&15]+N5[n>>8*t&15];return e}function _W(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function k1(n){return ES(n).map(_W).join("")}var yW=function(n){for(var e=0;e<n.length;e++)n[e]=vW(n[e]);return n.join("")}(ES("hello"))!="5d41402abc4b2a76b9719d911017c592";function tc(n,e){if(yW){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function C1(n,e){var t,r,i,s;if(n!==t){for(var a=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var l=o[c];u=(u+l+a.charCodeAt(c))%256,o[c]=o[u],o[u]=l}t=n,r=o}else o=r;var d=e.length,g=0,p=0,x="";for(c=0;c<d;c++)p=(p+(l=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=l,a=o[(o[g]+o[p])%256],x+=String.fromCharCode(e.charCodeAt(c)^a);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k5={print:4,modify:8,copy:16,"annot-forms":32};function Il(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(o){if(k5.perm!==void 0)throw new Error("Invalid permission: "+o);i+=k5[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=k1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=C1(this.encryptionKey,this.padding)}function Sl(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function C5(n){if(xn(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(n,r)}catch(o){Ot.console&&Cn.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Pp(n){if(!(this instanceof Pp))return new Pp(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function TS(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Zc(n,e,t,r,i){if(!(this instanceof Zc))return new Zc(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,TS.call(this,r,i)}function kl(n,e,t,r,i){if(!(this instanceof kl))return new kl(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,TS.call(this,r,i)}function Dt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,c=16,u="S",l=null;xn(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(l=n.encryption||null)!==null&&(l.userPassword=l.userPassword||"",l.ownerPassword=l.ownerPassword||"",l.userPermissions=l.userPermissions||[]),o=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),u=n.defaultPathOperation||"S"),a=n.filters||(s===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var d=n.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=C5;var x="1.3",_=p.__private__.getPdfVersion=function(){return x};p.__private__.setPdfVersion=function(v){x=v};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return E};var P=p.__private__.getPageFormat=function(v){return E[v]};i=i||"a4";var L={COMPAT:"compat",ADVANCED:"advanced"},V=L.COMPAT;function K(){this.saveGraphicsState(),re(new wt(pt,0,0,-pt,0,ci()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),u="n",V=L.ADVANCED}function ie(){this.restoreGraphicsState(),u="S",V=L.COMPAT}var ae=p.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};p.advancedAPI=function(v){var F=V===L.COMPAT;return F&&K.call(this),typeof v!="function"||(v(this),F&&ie.call(this)),this},p.compatAPI=function(v){var F=V===L.ADVANCED;return F&&ie.call(this),typeof v!="function"||(v(this),F&&K.call(this)),this},p.isAdvancedAPI=function(){return V===L.ADVANCED};var N,A=function(v){if(V!==L.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=p.roundToPrecision=p.__private__.roundToPrecision=function(v,F){var ne=e||F;if(isNaN(v)||isNaN(ne))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(ne).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,16)};var B=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return C(v,2)},b=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return C(v,3)},S=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return V===L.COMPAT?v*pt:V===L.ADVANCED?v:void 0},R=function(v){return V===L.COMPAT?ci()-v:V===L.ADVANCED?v:void 0},se=function(v){return S(R(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var me,Ee="00000000000000000000000000000000",Pe=p.__private__.getFileId=function(){return Ee},_e=p.__private__.setFileId=function(v){return Ee=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),l!==null&&(Un=new Il(l.userPermissions,l.userPassword,l.ownerPassword,Ee)),Ee};p.setFileId=function(v){return _e(v),this},p.getFileId=function(){return Pe()};var ke=p.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),ne=F<0?"+":"-",ce=Math.floor(Math.abs(F/60)),ge=Math.abs(F%60),Me=[ne,M(ce),"'",M(ge),"'"].join("");return["D:",v.getFullYear(),M(v.getMonth()+1),M(v.getDate()),M(v.getHours()),M(v.getMinutes()),M(v.getSeconds()),Me].join("")},Oe=p.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),ne=parseInt(v.substr(6,2),10)-1,ce=parseInt(v.substr(8,2),10),ge=parseInt(v.substr(10,2),10),Me=parseInt(v.substr(12,2),10),Ye=parseInt(v.substr(14,2),10);return new Date(F,ne,ce,ge,Me,Ye,0)},rt=p.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=ke(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return me=F},T=p.__private__.getCreationDate=function(v){var F=me;return v==="jsDate"&&(F=Oe(me)),F};p.setCreationDate=function(v){return rt(v),this},p.getCreationDate=function(v){return T(v)};var D,M=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},U=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},J=0,oe=[],le=[],ue=0,xe=[],Ve=[],ze=!1,Ze=le,at=function(){J=0,ue=0,le=[],oe=[],xe=[],Y=Wn(),X=Wn()};p.__private__.setCustomOutputDestination=function(v){ze=!0,Ze=v};var Le=function(v){ze||(Ze=v)};p.__private__.resetCustomOutputDestination=function(){ze=!1,Ze=le};var re=p.__private__.out=function(v){return v=v.toString(),ue+=v.length+1,Ze.push(v),Ze},We=p.__private__.write=function(v){return re(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},_t=p.__private__.getArrayBuffer=function(v){for(var F=v.length,ne=new ArrayBuffer(F),ce=new Uint8Array(ne);F--;)ce[F]=v.charCodeAt(F);return ne},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return $e};var nt=n.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return nt=V===L.ADVANCED?v/pt:v,this};var ct,ut=p.__private__.getFontSize=p.getFontSize=function(){return V===L.COMPAT?nt:nt*pt},Tt=n.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return Tt=v,this},p.__private__.getR2L=p.getR2L=function(){return Tt};var At,Ft=p.__private__.setZoomMode=function(v){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ct=v;else if(isNaN(v)){if(F.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ct=v}else ct=parseInt(v,10)};p.__private__.getZoomMode=function(){return ct};var It,kt=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');At=v};p.__private__.getPageMode=function(){return At};var Ht=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');It=v};p.__private__.getLayoutMode=function(){return It},p.__private__.setDisplayMode=p.setDisplayMode=function(v,F,ne){return Ft(v),Ht(F),kt(ne),this};var Ct={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Ct).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ct[v]},p.__private__.getDocumentProperties=function(){return Ct},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var F in Ct)Ct.hasOwnProperty(F)&&v[F]&&(Ct[F]=v[F]);return this},p.__private__.setDocumentProperty=function(v,F){if(Object.keys(Ct).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ct[v]=F};var qt,pt,Bn,Gt,Wr,tn={},Tn={},Di=[],Kt={},Zi={},bn={},Ir={},_i=null,un=0,Nt=[],en=new C5(p),Fi=n.hotfixes||[],Qn={},Lr={},yi=[],wt=function v(F,ne,ce,ge,Me,Ye){if(!(this instanceof v))return new v(F,ne,ce,ge,Me,Ye);isNaN(F)&&(F=1),isNaN(ne)&&(ne=0),isNaN(ce)&&(ce=0),isNaN(ge)&&(ge=1),isNaN(Me)&&(Me=0),isNaN(Ye)&&(Ye=0),this._matrix=[F,ne,ce,ge,Me,Ye]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(v)},wt.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,ne=v.sx*this.shy+v.shy*this.sy,ce=v.shx*this.sx+v.sy*this.shx,ge=v.shx*this.shy+v.sy*this.sy,Me=v.tx*this.sx+v.ty*this.shx+this.tx,Ye=v.tx*this.shy+v.ty*this.sy+this.ty;return new wt(F,ne,ce,ge,Me,Ye)},wt.prototype.decompose=function(){var v=this.sx,F=this.shy,ne=this.shx,ce=this.sy,ge=this.tx,Me=this.ty,Ye=Math.sqrt(v*v+F*F),dt=(v/=Ye)*ne+(F/=Ye)*ce;ne-=v*dt,ce-=F*dt;var f=Math.sqrt(ne*ne+ce*ce);return dt/=f,v*(ce/=f)<F*(ne/=f)&&(v=-v,F=-F,dt=-dt,Ye=-Ye),{scale:new wt(Ye,0,0,f,0,0),translate:new wt(1,0,0,1,ge,Me),rotate:new wt(v,F,-F,v,0,0),skew:new wt(1,0,dt,1,0,0)}},wt.prototype.toString=function(v){return this.join(" ")},wt.prototype.inversed=function(){var v=this.sx,F=this.shy,ne=this.shx,ce=this.sy,ge=this.tx,Me=this.ty,Ye=1/(v*ce-F*ne),dt=ce*Ye,f=-F*Ye,w=-ne*Ye,k=v*Ye;return new wt(dt,f,w,k,-dt*ge-w*Me,-f*ge-k*Me)},wt.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,ne=v.x*this.shy+v.y*this.sy+this.ty;return new Da(F,ne)},wt.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),ne=this.applyToPoint(new Da(v.x+v.w,v.y+v.h));return new So(F.x,F.y,ne.x-F.x,ne.y-F.y)},wt.prototype.clone=function(){var v=this.sx,F=this.shy,ne=this.shx,ce=this.sy,ge=this.tx,Me=this.ty;return new wt(v,F,ne,ce,ge,Me)},p.Matrix=wt;var oi=p.matrixMult=function(v,F){return F.multiply(v)},_r=new wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=_r;var Zn=function(v,F){if(!Zi[v]){var ne=(F instanceof Zc?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);F.id=ne,Zi[v]=ne,Kt[ne]=F,en.publish("addPattern",F)}};p.ShadingPattern=Zc,p.TilingPattern=kl,p.addShadingPattern=function(v,F){return A("addShadingPattern()"),Zn(v,F),this},p.beginTilingPattern=function(v){A("beginTilingPattern()"),Po(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,F){A("endTilingPattern()"),F.stream=Ve[D].join(`
`),Zn(v,F),en.publish("endTilingPattern",F),yi.pop().restore()};var Yn=p.__private__.newObject=function(){var v=Wn();return j(v,!0),v},Wn=p.__private__.newObjectDeferred=function(){return J++,oe[J]=function(){return ue},J},j=function(v,F){return F=typeof F=="boolean"&&F,oe[v]=ue,F&&re(v+" 0 obj"),v},ee=p.__private__.newAdditionalObject=function(){var v={objId:Wn(),content:""};return xe.push(v),v},Y=Wn(),X=Wn(),Z=p.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var ne=parseFloat(F[0]);F=[ne,ne,ne,"r"]}for(var ce="#",ge=0;ge<3;ge++)ce+=("0"+Math.floor(255*parseFloat(F[ge])).toString(16)).slice(-2);return ce},te=p.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var ne=v.ch1,ce=v.ch2,ge=v.ch3,Me=v.ch4,Ye=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ne=="string"&&ne.charAt(0)!=="#"){var dt=new xS(ne);if(dt.ok)ne=dt.toHex();else if(!/^\d*\.?\d*$/.test(ne))throw new Error('Invalid color "'+ne+'" passed to jsPDF.encodeColorString.')}if(typeof ne=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ne)&&(ne="#"+ne[1]+ne[1]+ne[2]+ne[2]+ne[3]+ne[3]),typeof ne=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ne)){var f=parseInt(ne.substr(1),16);ne=f>>16&255,ce=f>>8&255,ge=255&f}if(ce===void 0||Me===void 0&&ne===ce&&ce===ge)if(typeof ne=="string")F=ne+" "+Ye[0];else switch(v.precision){case 2:F=B(ne/255)+" "+Ye[0];break;case 3:default:F=b(ne/255)+" "+Ye[0]}else if(Me===void 0||xn(Me)==="object"){if(Me&&!isNaN(Me.a)&&Me.a===0)return F=["1.","1.","1.",Ye[1]].join(" ");if(typeof ne=="string")F=[ne,ce,ge,Ye[1]].join(" ");else switch(v.precision){case 2:F=[B(ne/255),B(ce/255),B(ge/255),Ye[1]].join(" ");break;default:case 3:F=[b(ne/255),b(ce/255),b(ge/255),Ye[1]].join(" ")}}else if(typeof ne=="string")F=[ne,ce,ge,Me,Ye[2]].join(" ");else switch(v.precision){case 2:F=[B(ne),B(ce),B(ge),B(Me),Ye[2]].join(" ");break;case 3:default:F=[b(ne),b(ce),b(ge),b(Me),Ye[2]].join(" ")}return F},ye=p.__private__.getFilters=function(){return a},Re=p.__private__.putStream=function(v){var F=(v=v||{}).data||"",ne=v.filters||ye(),ce=v.alreadyAppliedFilters||[],ge=v.addLength1||!1,Me=F.length,Ye=v.objectId,dt=function(Bt){return Bt};if(l!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");l!==null&&(dt=Un.encryptor(Ye,0));var f={};ne===!0&&(ne=["FlateEncode"]);var w=v.additionalKeyValues||[],k=(f=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(F,ne):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(f.data.length!==0&&(w.push({key:"Length",value:f.data.length}),ge===!0&&w.push({key:"Length1",value:Me})),k.length!=0)if(k.split("/").length-1==1)w.push({key:"Filter",value:k});else{w.push({key:"Filter",value:"["+k+"]"});for(var W=0;W<w.length;W+=1)if(w[W].key==="DecodeParms"){for(var pe=[],Ie=0;Ie<f.reverseChain.split("/").length-1;Ie+=1)pe.push("null");pe.push(w[W].value),w[W].value="["+pe.join(" ")+"]"}}re("<<");for(var Qe=0;Qe<w.length;Qe++)re("/"+w[Qe].key+" "+w[Qe].value);re(">>"),f.data.length!==0&&(re("stream"),re(dt(f.data)),re("endstream"))},we=p.__private__.putPage=function(v){var F=v.number,ne=v.data,ce=v.objId,ge=v.contentsObjId;j(ce,!0),re("<</Type /Page"),re("/Parent "+v.rootDictionaryObjId+" 0 R"),re("/Resources "+v.resourceDictionaryObjId+" 0 R"),re("/MediaBox ["+parseFloat(N(v.mediaBox.bottomLeftX))+" "+parseFloat(N(v.mediaBox.bottomLeftY))+" "+N(v.mediaBox.topRightX)+" "+N(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&re("/CropBox ["+N(v.cropBox.bottomLeftX)+" "+N(v.cropBox.bottomLeftY)+" "+N(v.cropBox.topRightX)+" "+N(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&re("/BleedBox ["+N(v.bleedBox.bottomLeftX)+" "+N(v.bleedBox.bottomLeftY)+" "+N(v.bleedBox.topRightX)+" "+N(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&re("/TrimBox ["+N(v.trimBox.bottomLeftX)+" "+N(v.trimBox.bottomLeftY)+" "+N(v.trimBox.topRightX)+" "+N(v.trimBox.topRightY)+"]"),v.artBox!==null&&re("/ArtBox ["+N(v.artBox.bottomLeftX)+" "+N(v.artBox.bottomLeftY)+" "+N(v.artBox.topRightX)+" "+N(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&re("/UserUnit "+v.userUnit),en.publish("putPage",{objId:ce,pageContext:Nt[F],pageNumber:F,page:ne}),re("/Contents "+ge+" 0 R"),re(">>"),re("endobj");var Me=ne.join(`
`);return V===L.ADVANCED&&(Me+=`
Q`),j(ge,!0),Re({data:Me,filters:ye(),objectId:ge}),re("endobj"),ce},Te=p.__private__.putPages=function(){var v,F,ne=[];for(v=1;v<=un;v++)Nt[v].objId=Wn(),Nt[v].contentsObjId=Wn();for(v=1;v<=un;v++)ne.push(we({number:v,data:Ve[v],objId:Nt[v].objId,contentsObjId:Nt[v].contentsObjId,mediaBox:Nt[v].mediaBox,cropBox:Nt[v].cropBox,bleedBox:Nt[v].bleedBox,trimBox:Nt[v].trimBox,artBox:Nt[v].artBox,userUnit:Nt[v].userUnit,rootDictionaryObjId:Y,resourceDictionaryObjId:X}));j(Y,!0),re("<</Type /Pages");var ce="/Kids [";for(F=0;F<un;F++)ce+=ne[F]+" 0 R ";re(ce+"]"),re("/Count "+un),re(">>"),re("endobj"),en.publish("postPutPages")},Ne=function(v){en.publish("putFont",{font:v,out:re,newObject:Yn,putStream:Re}),v.isAlreadyPutted!==!0&&(v.objectNumber=Yn(),re("<<"),re("/Type /Font"),re("/BaseFont /"+Sl(v.postScriptName)),re("/Subtype /Type1"),typeof v.encoding=="string"&&re("/Encoding /"+v.encoding),re("/FirstChar 32"),re("/LastChar 255"),re(">>"),re("endobj"))},Ke=function(){for(var v in tn)tn.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&Ne(tn[v])},it=function(v){v.objectNumber=Yn();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[N(v.x),N(v.y),N(v.x+v.width),N(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var ne=v.pages[1].join(`
`);Re({data:ne,additionalKeyValues:F,objectId:v.objectNumber}),re("endobj")},mt=function(){for(var v in Qn)Qn.hasOwnProperty(v)&&it(Qn[v])},et=function(v,F){var ne,ce=[],ge=1/(F-1);for(ne=0;ne<1;ne+=ge)ce.push(ne);if(ce.push(1),v[0].offset!=0){var Me={offset:0,color:v[0].color};v.unshift(Me)}if(v[v.length-1].offset!=1){var Ye={offset:1,color:v[v.length-1].color};v.push(Ye)}for(var dt="",f=0,w=0;w<ce.length;w++){for(ne=ce[w];ne>v[f+1].offset;)f++;var k=v[f].offset,W=(ne-k)/(v[f+1].offset-k),pe=v[f].color,Ie=v[f+1].color;dt+=U(Math.round((1-W)*pe[0]+W*Ie[0]).toString(16))+U(Math.round((1-W)*pe[1]+W*Ie[1]).toString(16))+U(Math.round((1-W)*pe[2]+W*Ie[2]).toString(16))}return dt.trim()},lt=function(v,F){F||(F=21);var ne=Yn(),ce=et(v.colors,F),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+F+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re({data:ce,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ne}),re("endobj"),v.objectNumber=Yn(),re("<< /ShadingType "+v.type),re("/ColorSpace /DeviceRGB");var Me="/Coords ["+N(parseFloat(v.coords[0]))+" "+N(parseFloat(v.coords[1]))+" ";v.type===2?Me+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3])):Me+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3]))+" "+N(parseFloat(v.coords[4]))+" "+N(parseFloat(v.coords[5])),re(Me+="]"),v.matrix&&re("/Matrix ["+v.matrix.toString()+"]"),re("/Function "+ne+" 0 R"),re("/Extend [true true]"),re(">>"),re("endobj")},Lt=function(v,F){var ne=Wn(),ce=Yn();F.push({resourcesOid:ne,objectOid:ce}),v.objectNumber=ce;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+v.boundingBox.map(N).join(" ")+"]"}),ge.push({key:"XStep",value:N(v.xStep)}),ge.push({key:"YStep",value:N(v.yStep)}),ge.push({key:"Resources",value:ne+" 0 R"}),v.matrix&&ge.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Re({data:v.stream,additionalKeyValues:ge,objectId:v.objectNumber}),re("endobj")},nn=function(v){var F;for(F in Kt)Kt.hasOwnProperty(F)&&(Kt[F]instanceof Zc?lt(Kt[F]):Kt[F]instanceof kl&&Lt(Kt[F],v))},rn=function(v){for(var F in v.objectNumber=Yn(),re("<<"),v)switch(F){case"opacity":re("/ca "+B(v[F]));break;case"stroke-opacity":re("/CA "+B(v[F]))}re(">>"),re("endobj")},An=function(){var v;for(v in bn)bn.hasOwnProperty(v)&&rn(bn[v])},wi=function(){for(var v in re("/XObject <<"),Qn)Qn.hasOwnProperty(v)&&Qn[v].objectNumber>=0&&re("/"+v+" "+Qn[v].objectNumber+" 0 R");en.publish("putXobjectDict"),re(">>")},Rs=function(){Un.oid=Yn(),re("<<"),re("/Filter /Standard"),re("/V "+Un.v),re("/R "+Un.r),re("/U <"+Un.toHexString(Un.U)+">"),re("/O <"+Un.toHexString(Un.O)+">"),re("/P "+Un.P),re(">>"),re("endobj")},es=function(){for(var v in re("/Font <<"),tn)tn.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&re("/"+v+" "+tn[v].objectNumber+" 0 R");re(">>")},Oi=function(){if(Object.keys(Kt).length>0){for(var v in re("/Shading <<"),Kt)Kt.hasOwnProperty(v)&&Kt[v]instanceof Zc&&Kt[v].objectNumber>=0&&re("/"+v+" "+Kt[v].objectNumber+" 0 R");en.publish("putShadingPatternDict"),re(">>")}},ts=function(v){if(Object.keys(Kt).length>0){for(var F in re("/Pattern <<"),Kt)Kt.hasOwnProperty(F)&&Kt[F]instanceof p.TilingPattern&&Kt[F].objectNumber>=0&&Kt[F].objectNumber<v&&re("/"+F+" "+Kt[F].objectNumber+" 0 R");en.publish("putTilingPatternDict"),re(">>")}},Hr=function(){if(Object.keys(bn).length>0){var v;for(v in re("/ExtGState <<"),bn)bn.hasOwnProperty(v)&&bn[v].objectNumber>=0&&re("/"+v+" "+bn[v].objectNumber+" 0 R");en.publish("putGStateDict"),re(">>")}},Vn=function(v){j(v.resourcesOid,!0),re("<<"),re("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),es(),Oi(),ts(v.objectOid),Hr(),wi(),re(">>"),re("endobj")},Ac=function(){var v=[];Ke(),An(),mt(),nn(v),en.publish("putResources"),v.forEach(Vn),Vn({resourcesOid:X,objectOid:Number.MAX_SAFE_INTEGER}),en.publish("postPutResources")},Ic=function(){en.publish("putAdditionalObjects");for(var v=0;v<xe.length;v++){var F=xe[v];j(F.objId,!0),re(F.content),re("endobj")}en.publish("postPutAdditionalObjects")},qu=function(v){Tn[v.fontName]=Tn[v.fontName]||{},Tn[v.fontName][v.fontStyle]=v.id},Sc=function(v,F,ne,ce,ge){var Me={id:"F"+(Object.keys(tn).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:ne,encoding:ce,isStandardFont:ge||!1,metadata:{}};return en.publish("addFont",{font:Me,instance:this}),tn[Me.id]=Me,qu(Me),Me.id},zu=function(v){for(var F=0,ne=$e.length;F<ne;F++){var ce=Sc.call(this,v[F][0],v[F][1],v[F][2],$e[F][3],!0);d===!1&&(g[ce]=!0);var ge=v[F][0].split("-");qu({id:ce,fontName:ge[0],fontStyle:ge[1]||""})}en.publish("addFonts",{fonts:tn,dictionary:Tn})},Mi=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ce){var F=ce.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var ne="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Ot.console)throw new Error(ne);Ot.console.error(ne,ce),Ot.alert&&alert(ne)}},v.foo.bar=v,v.foo},mo=function(v,F){var ne,ce,ge,Me,Ye,dt,f,w,k;if(ge=(F=F||{}).sourceEncoding||"Unicode",Ye=F.outputEncoding,(F.autoencode||Ye)&&tn[qt].metadata&&tn[qt].metadata[ge]&&tn[qt].metadata[ge].encoding&&(Me=tn[qt].metadata[ge].encoding,!Ye&&tn[qt].encoding&&(Ye=tn[qt].encoding),!Ye&&Me.codePages&&(Ye=Me.codePages[0]),typeof Ye=="string"&&(Ye=Me[Ye]),Ye)){for(f=!1,dt=[],ne=0,ce=v.length;ne<ce;ne++)(w=Ye[v.charCodeAt(ne)])?dt.push(String.fromCharCode(w)):dt.push(v[ne]),dt[ne].charCodeAt(0)>>8&&(f=!0);v=dt.join("")}for(ne=v.length;f===void 0&&ne!==0;)v.charCodeAt(ne-1)>>8&&(f=!0),ne--;if(!f)return v;for(dt=F.noBOM?[]:[254,255],ne=0,ce=v.length;ne<ce;ne++){if((k=(w=v.charCodeAt(ne))>>8)>>8)throw new Error("Character at position "+ne+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dt.push(k),dt.push(w-(k<<8))}return String.fromCharCode.apply(void 0,dt)},er=p.__private__.pdfEscape=p.pdfEscape=function(v,F){return mo(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},xi=p.__private__.beginPage=function(v){Ve[++un]=[],Nt[un]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Pc(un),Le(Ve[D])},Na=function(v,F){var ne,ce,ge;switch(t=F||t,typeof v=="string"&&(ne=P(v.toLowerCase()),Array.isArray(ne)&&(ce=ne[0],ge=ne[1])),Array.isArray(v)&&(ce=v[0]*pt,ge=v[1]*pt),isNaN(ce)&&(ce=i[0],ge=i[1]),(ce>14400||ge>14400)&&(Cn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),ge=Math.min(14400,ge)),i=[ce,ge],t.substr(0,1)){case"l":ge>ce&&(i=[ge,ce]);break;case"p":ce>ge&&(i=[ge,ce])}xi(i),Lc(Rc),re($r),Oc!==0&&re(Oc+" J"),Io!==0&&re(Io+" j"),en.publish("addPage",{pageNumber:un})},go=function(v){v>0&&v<=un&&(Ve.splice(v,1),Nt.splice(v,1),un--,D>un&&(D=un),this.setPage(D))},Pc=function(v){v>0&&v<=un&&(D=v)},pn=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Ve.length-1},ka=function(v,F,ne){var ce,ge=void 0;return ne=ne||{},v=v!==void 0?v:tn[qt].fontName,F=F!==void 0?F:tn[qt].fontStyle,ce=v.toLowerCase(),Tn[ce]!==void 0&&Tn[ce][F]!==void 0?ge=Tn[ce][F]:Tn[v]!==void 0&&Tn[v][F]!==void 0?ge=Tn[v][F]:ne.disableWarning===!1&&Cn.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),ge||ne.noFallback||(ge=Tn.times[F])==null&&(ge=Tn.times.normal),ge},Ca=p.__private__.putInfo=function(){var v=Yn(),F=function(ce){return ce};for(var ne in l!==null&&(F=Un.encryptor(v,0)),re("<<"),re("/Producer ("+er(F("jsPDF "+Dt.version))+")"),Ct)Ct.hasOwnProperty(ne)&&Ct[ne]&&re("/"+ne.substr(0,1).toUpperCase()+ne.substr(1)+" ("+er(F(Ct[ne]))+")");re("/CreationDate ("+er(F(me))+")"),re(">>"),re("endobj")},Ls=p.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||Y;switch(Yn(),re("<<"),re("/Type /Catalog"),re("/Pages "+F+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":re("/OpenAction [3 0 R /FitH null]");break;case"fullheight":re("/OpenAction [3 0 R /FitV null]");break;case"fullpage":re("/OpenAction [3 0 R /Fit]");break;case"original":re("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ne=""+ct;ne.substr(ne.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&re("/OpenAction [3 0 R /XYZ null null "+B(ct)+"]")}switch(It||(It="continuous"),It){case"continuous":re("/PageLayout /OneColumn");break;case"single":re("/PageLayout /SinglePage");break;case"two":case"twoleft":re("/PageLayout /TwoColumnLeft");break;case"tworight":re("/PageLayout /TwoColumnRight")}At&&re("/PageMode /"+At),en.publish("putCatalog"),re(">>"),re("endobj")},Nh=p.__private__.putTrailer=function(){re("trailer"),re("<<"),re("/Size "+(J+1)),re("/Root "+J+" 0 R"),re("/Info "+(J-1)+" 0 R"),l!==null&&re("/Encrypt "+Un.oid+" 0 R"),re("/ID [ <"+Ee+"> <"+Ee+"> ]"),re(">>")},Wu=p.__private__.putHeader=function(){re("%PDF-"+x),re("%")},kh=p.__private__.putXRef=function(){var v="0000000000";re("xref"),re("0 "+(J+1)),re("0000000000 65535 f ");for(var F=1;F<=J;F++)typeof oe[F]=="function"?re((v+oe[F]()).slice(-10)+" 00000 n "):oe[F]!==void 0?re((v+oe[F]).slice(-10)+" 00000 n "):re("0000000000 00000 n ")},Ds=p.__private__.buildDocument=function(){at(),Le(le),en.publish("buildDocument"),Wu(),Te(),Ic(),Ac(),l!==null&&Rs(),Ca(),Ls();var v=ue;return kh(),Nh(),re("startxref"),re(""+v),re("%%EOF"),Le(Ve[D]),le.join(`
`)},vo=p.__private__.getBlob=function(v){return new Blob([_t(v)],{type:"application/pdf"})},_o=p.output=p.__private__.output=Mi(function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return Ds();case"save":p.save(F.filename);break;case"arraybuffer":return _t(Ds());case"blob":return vo(Ds());case"bloburi":case"bloburl":if(Ot.URL!==void 0&&typeof Ot.URL.createObjectURL=="function")return Ot.URL&&Ot.URL.createObjectURL(vo(Ds()))||void 0;Cn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ne="",ce=Ds();try{ne=N1(ce)}catch{ne=N1(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+F.filename+";base64,"+ne;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Me=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(ge=F.pdfObjectUrl,Me="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Me+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",dt=Ot.open();return dt!==null&&dt.document.write(Ye),dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',w=Ot.open();if(w!==null){w.document.write(f);var k=this;w.document.documentElement.querySelector("#pdfViewer").onload=function(){w.document.title=F.filename,w.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(k.output("bloburl"))}}return w}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var W='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',pe=Ot.open();if(pe!==null&&(pe.document.write(W),pe.document.title=F.filename),pe||typeof safari>"u")return pe;break;case"datauri":case"dataurl":return Ot.document.location.href=this.output("datauristring",F);default:return null}}),Zs=function(v){return Array.isArray(Fi)===!0&&Fi.indexOf(v)>-1};switch(r){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Zs("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);pt=r}var Un=null;rt(),_e();var Hu=function(v){return l!==null?Un.encryptor(v,0):function(F){return F}},Nc=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[v].objId,pageNumber:v,pageContext:Nt[v]}},Mt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Nt)if(Nt[F].objId===v)break;return Nc(F)},ea=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Nt[D].objId,pageNumber:D,pageContext:Nt[D]}};p.addPage=function(){return Na.apply(this,arguments),this},p.setPage=function(){return Pc.apply(this,arguments),Le.call(this,Ve[D]),this},p.insertPage=function(v){return this.addPage(),this.movePage(D,v),this},p.movePage=function(v,F){var ne,ce;if(v>F){ne=Ve[v],ce=Nt[v];for(var ge=v;ge>F;ge--)Ve[ge]=Ve[ge-1],Nt[ge]=Nt[ge-1];Ve[F]=ne,Nt[F]=ce,this.setPage(F)}else if(v<F){ne=Ve[v],ce=Nt[v];for(var Me=v;Me<F;Me++)Ve[Me]=Ve[Me+1],Nt[Me]=Nt[Me+1];Ve[F]=ne,Nt[F]=ce,this.setPage(F)}return this},p.deletePage=function(){return go.apply(this,arguments),this},p.__private__.text=p.text=function(v,F,ne,ce,ge){var Me,Ye,dt,f,w,k,W,pe,Ie,Qe=(ce=ce||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof ne=="string"||Array.isArray(ne))){var Bt=ne;ne=F,F=v,v=Bt}if(arguments[3]instanceof wt?(A("The transform parameter of text() with a Matrix value"),Ie=ge):(dt=arguments[4],f=arguments[5],xn(W=arguments[3])==="object"&&W!==null||(typeof dt=="string"&&(f=dt,dt=null),typeof W=="string"&&(f=W,W=null),typeof W=="number"&&(dt=W,W=null),ce={flags:W,angle:dt,align:f})),isNaN(F)||isNaN(ne)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Qe;var Xt="",Vt=!1,dn=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:fn,Nn=Qe.internal.scaleFactor;function Vs(Rn){return Rn=Rn.split("	").join(Array(ce.TabLen||9).join(" ")),er(Rn,W)}function Gr(Rn){for(var Ln,hr=Rn.concat(),Pr=[],Va=hr.length;Va--;)typeof(Ln=hr.shift())=="string"?Pr.push(Ln):Array.isArray(Rn)&&(Ln.length===1||Ln[1]===void 0&&Ln[2]===void 0)?Pr.push(Ln[0]):Pr.push([Ln[0],Ln[1],Ln[2]]);return Pr}function ia(Rn,Ln){var hr;if(typeof Rn=="string")hr=Ln(Rn)[0];else if(Array.isArray(Rn)){for(var Pr,Va,Vh=Rn.concat(),il=[],Vd=Vh.length;Vd--;)typeof(Pr=Vh.shift())=="string"?il.push(Ln(Pr)[0]):Array.isArray(Pr)&&typeof Pr[0]=="string"&&(Va=Ln(Pr[0],Pr[1],Pr[2]),il.push([Va[0],Va[1],Va[2]]));hr=il}return hr}var sa=!1,Rh=!0;if(typeof v=="string")sa=!0;else if(Array.isArray(v)){var Lh=v.concat();Ye=[];for(var Xu,Kr=Lh.length;Kr--;)(typeof(Xu=Lh.shift())!="string"||Array.isArray(Xu)&&typeof Xu[0]!="string")&&(Rh=!1);sa=Rh}if(sa===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ju=nt/Qe.internal.scaleFactor,Qu=Ju*(dn-1);switch(ce.baseline){case"bottom":ne-=Qu;break;case"top":ne+=Ju-Qu;break;case"hanging":ne+=Ju-2*Qu;break;case"middle":ne+=Ju/2-Qu}if((k=ce.maxWidth||0)>0&&(typeof v=="string"?v=Qe.splitTextToSize(v,k):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Rn,Ln){return Rn.concat(Qe.splitTextToSize(Ln,k))},[]))),Me={text:v,x:F,y:ne,options:ce,mutex:{pdfEscape:er,activeFontKey:qt,fonts:tn,activeFontSize:nt}},en.publish("preProcessText",Me),v=Me.text,dt=(ce=Me.options).angle,!(Ie instanceof wt)&&dt&&typeof dt=="number"){dt*=Math.PI/180,ce.rotationDirection===0&&(dt=-dt),V===L.ADVANCED&&(dt=-dt);var Zu=Math.cos(dt),Dh=Math.sin(dt);Ie=new wt(Zu,Dh,-Dh,Zu,0,0)}else dt&&dt instanceof wt&&(Ie=dt);V!==L.ADVANCED||Ie||(Ie=_r),(w=ce.charSpace||La)!==void 0&&(Xt+=N(S(w))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pe=ce.horizontalScale)!==void 0&&(Xt+=N(100*pe)+` Tz
`),ce.lang;var Bi=-1,Nm=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,Fh=Qe.internal.getCurrentPageInfo().pageContext;switch(Nm){case 0:case!1:case"fill":Bi=0;break;case 1:case!0:case"stroke":Bi=1;break;case 2:case"fillThenStroke":Bi=2;break;case 3:case"invisible":Bi=3;break;case 4:case"fillAndAddForClipping":Bi=4;break;case 5:case"strokeAndAddPathForClipping":Bi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bi=6;break;case 7:case"addToPathForClipping":Bi=7}var Fd=Fh.usedRenderingMode!==void 0?Fh.usedRenderingMode:-1;Bi!==-1?Xt+=Bi+` Tr
`:Fd!==-1&&(Xt+=`0 Tr
`),Bi!==-1&&(Fh.usedRenderingMode=Bi),f=ce.align||"left";var _s,el=nt*dn,Od=Qe.internal.pageSize.getWidth(),Md=tn[qt];w=ce.charSpace||La,k=ce.maxWidth||0,W=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var Co=[],Mc=function(Rn){return Qe.getStringUnitWidth(Rn,{font:Md,charSpace:w,fontSize:nt,doKerning:!1})*nt/Nn};if(Object.prototype.toString.call(v)==="[object Array]"){var Vi;Ye=Gr(v),f!=="left"&&(_s=Ye.map(Mc));var Ei,Ro=0;if(f==="right"){F-=_s[0],v=[],Kr=Ye.length;for(var Oa=0;Oa<Kr;Oa++)Oa===0?(Ei=is(F),Vi=Sr(ne)):(Ei=S(Ro-_s[Oa]),Vi=-el),v.push([Ye[Oa],Ei,Vi]),Ro=_s[Oa]}else if(f==="center"){F-=_s[0]/2,v=[],Kr=Ye.length;for(var Ma=0;Ma<Kr;Ma++)Ma===0?(Ei=is(F),Vi=Sr(ne)):(Ei=S((Ro-_s[Ma])/2),Vi=-el),v.push([Ye[Ma],Ei,Vi]),Ro=_s[Ma]}else if(f==="left"){v=[],Kr=Ye.length;for(var tl=0;tl<Kr;tl++)v.push(Ye[tl])}else if(f==="justify"&&Md.encoding==="Identity-H"){v=[],Kr=Ye.length,k=k!==0?k:Od;for(var Ba=0,lr=0;lr<Kr;lr++)if(Vi=lr===0?Sr(ne):-el,Ei=lr===0?is(F):Ba,lr<Kr-1){var Oh=S((k-_s[lr])/(Ye[lr].split(" ").length-1)),Ti=Ye[lr].split(" ");v.push([Ti[0]+" ",Ei,Vi]),Ba=0;for(var ys=1;ys<Ti.length;ys++){var nl=(Mc(Ti[ys-1]+" "+Ti[ys])-Mc(Ti[ys]))*Nn+Oh;ys==Ti.length-1?v.push([Ti[ys],nl,0]):v.push([Ti[ys]+" ",nl,0]),Ba-=nl}}else v.push([Ye[lr],Ei,Vi]);v.push(["",Ba,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],Kr=Ye.length,k=k!==0?k:Od,lr=0;lr<Kr;lr++)Vi=lr===0?Sr(ne):-el,Ei=lr===0?is(F):0,lr<Kr-1?Co.push(N(S((k-_s[lr])/(Ye[lr].split(" ").length-1)))):Co.push(0),v.push([Ye[lr],Ei,Vi])}}var Bd=typeof ce.R2L=="boolean"?ce.R2L:Tt;Bd===!0&&(v=ia(v,function(Rn,Ln,hr){return[Rn.split("").reverse().join(""),Ln,hr]})),Me={text:v,x:F,y:ne,options:ce,mutex:{pdfEscape:er,activeFontKey:qt,fonts:tn,activeFontSize:nt}},en.publish("postProcessText",Me),v=Me.text,Vt=Me.mutex.isHex||!1;var Mh=tn[qt].encoding;Mh!=="WinAnsiEncoding"&&Mh!=="StandardEncoding"||(v=ia(v,function(Rn,Ln,hr){return[Vs(Rn),Ln,hr]})),Ye=Gr(v),v=[];for(var Bc,Vc,Lo,Uc=0,rl=1,jc=Array.isArray(Ye[0])?rl:Uc,Do="",Bh=function(Rn,Ln,hr){var Pr="";return hr instanceof wt?(hr=typeof ce.angle=="number"?oi(hr,new wt(1,0,0,1,Rn,Ln)):oi(new wt(1,0,0,1,Rn,Ln),hr),V===L.ADVANCED&&(hr=oi(new wt(1,0,0,-1,0,0),hr)),Pr=hr.join(" ")+` Tm
`):Pr=N(Rn)+" "+N(Ln)+` Td
`,Pr},ws=0;ws<Ye.length;ws++){switch(Do="",jc){case rl:Lo=(Vt?"<":"(")+Ye[ws][0]+(Vt?">":")"),Bc=parseFloat(Ye[ws][1]),Vc=parseFloat(Ye[ws][2]);break;case Uc:Lo=(Vt?"<":"(")+Ye[ws]+(Vt?">":")"),Bc=is(F),Vc=Sr(ne)}Co!==void 0&&Co[ws]!==void 0&&(Do=Co[ws]+` Tw
`),ws===0?v.push(Do+Bh(Bc,Vc,Ie)+Lo):jc===Uc?v.push(Do+Lo):jc===rl&&v.push(Do+Bh(Bc,Vc,Ie)+Lo)}v=jc===Uc?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var xs=`BT
/`;return xs+=qt+" "+nt+` Tf
`,xs+=N(nt*dn)+` TL
`,xs+=Ms+`
`,xs+=Xt,xs+=v,re(xs+="ET"),g[qt]=!0,Qe};var Ch=p.__private__.clip=p.clip=function(v){return re(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Ch("evenodd")},p.__private__.discardPath=p.discardPath=function(){return re("n"),this};var vs=p.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return vs(v)&&(u=v),this};var $u=p.__private__.getStyle=p.getStyle=function(v){var F=u;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},ns=p.close=function(){return re("h"),this};p.stroke=function(){return re("S"),this},p.fill=function(v){return yo("f",v),this},p.fillEvenOdd=function(v){return yo("f*",v),this},p.fillStroke=function(v){return yo("B",v),this},p.fillStrokeEvenOdd=function(v){return yo("B*",v),this};var yo=function(v,F){xn(F)==="object"?xo(F,v):re(v)},kc=function(v){v===null||V===L.ADVANCED&&v===void 0||(v=$u(v),re(v))};function wo(v,F,ne,ce,ge){var Me=new kl(F||this.boundingBox,ne||this.xStep,ce||this.yStep,this.gState,ge||this.matrix);Me.stream=this.stream;var Ye=v+"$$"+this.cloneIndex+++"$$";return Zn(Ye,Me),Me}var xo=function(v,F){var ne=Zi[v.key],ce=Kt[ne];if(ce instanceof Zc)re("q"),re(Gu(F)),ce.gState&&p.setGState(ce.gState),re(v.matrix.toString()+" cm"),re("/"+ne+" sh"),re("Q");else if(ce instanceof kl){var ge=new wt(1,0,0,-1,0,ci());v.matrix&&(ge=ge.multiply(v.matrix||_r),ne=wo.call(ce,v.key,v.boundingBox,v.xStep,v.yStep,ge).id),re("q"),re("/Pattern cs"),re("/"+ne+" scn"),ce.gState&&p.setGState(ce.gState),re(F),re("Q")}},Gu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Fs=p.moveTo=function(v,F){return re(N(S(v))+" "+N(se(F))+" m"),this},rs=p.lineTo=function(v,F){return re(N(S(v))+" "+N(se(F))+" l"),this},Os=p.curveTo=function(v,F,ne,ce,ge,Me){return re([N(S(v)),N(se(F)),N(S(ne)),N(se(ce)),N(S(ge)),N(se(Me)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,F,ne,ce,ge){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||!vs(ge))throw new Error("Invalid arguments passed to jsPDF.line");return V===L.COMPAT?this.lines([[ne-v,ce-F]],v,F,[1,1],ge||"S"):this.lines([[ne-v,ce-F]],v,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,F,ne,ce,ge,Me){var Ye,dt,f,w,k,W,pe,Ie,Qe,Bt,Xt,Vt;if(typeof v=="number"&&(Vt=ne,ne=F,F=v,v=Vt),ce=ce||[1,1],Me=Me||!1,isNaN(F)||isNaN(ne)||!Array.isArray(v)||!Array.isArray(ce)||!vs(ge)||typeof Me!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Fs(F,ne),Ye=ce[0],dt=ce[1],w=v.length,Bt=F,Xt=ne,f=0;f<w;f++)(k=v[f]).length===2?(Bt=k[0]*Ye+Bt,Xt=k[1]*dt+Xt,rs(Bt,Xt)):(W=k[0]*Ye+Bt,pe=k[1]*dt+Xt,Ie=k[2]*Ye+Bt,Qe=k[3]*dt+Xt,Bt=k[4]*Ye+Bt,Xt=k[5]*dt+Xt,Os(W,pe,Ie,Qe,Bt,Xt));return Me&&ns(),kc(ge),this},p.path=function(v){for(var F=0;F<v.length;F++){var ne=v[F],ce=ne.c;switch(ne.op){case"m":Fs(ce[0],ce[1]);break;case"l":rs(ce[0],ce[1]);break;case"c":Os.apply(this,ce);break;case"h":ns()}}return this},p.__private__.rect=p.rect=function(v,F,ne,ce,ge){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||!vs(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return V===L.COMPAT&&(ce=-ce),re([N(S(v)),N(se(F)),N(S(ne)),N(S(ce)),"re"].join(" ")),kc(ge),this},p.__private__.triangle=p.triangle=function(v,F,ne,ce,ge,Me,Ye){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||isNaN(ge)||isNaN(Me)||!vs(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ne-v,ce-F],[ge-ne,Me-ce],[v-ge,F-Me]],v,F,[1,1],Ye,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,F,ne,ce,ge,Me,Ye){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||isNaN(ge)||isNaN(Me)||!vs(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dt=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*ne),Me=Math.min(Me,.5*ce),this.lines([[ne-2*ge,0],[ge*dt,0,ge,Me-Me*dt,ge,Me],[0,ce-2*Me],[0,Me*dt,-ge*dt,Me,-ge,Me],[2*ge-ne,0],[-ge*dt,0,-ge,-Me*dt,-ge,-Me],[0,2*Me-ce],[0,-Me*dt,ge*dt,-Me,ge,-Me]],v+ge,F,[1,1],Ye,!0),this},p.__private__.ellipse=p.ellipse=function(v,F,ne,ce,ge){if(isNaN(v)||isNaN(F)||isNaN(ne)||isNaN(ce)||!vs(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Me=4/3*(Math.SQRT2-1)*ne,Ye=4/3*(Math.SQRT2-1)*ce;return Fs(v+ne,F),Os(v+ne,F-Ye,v+Me,F-ce,v,F-ce),Os(v-Me,F-ce,v-ne,F-Ye,v-ne,F),Os(v-ne,F+Ye,v-Me,F+ce,v,F+ce),Os(v+Me,F+ce,v+ne,F+Ye,v+ne,F),kc(ge),this},p.__private__.circle=p.circle=function(v,F,ne,ce){if(isNaN(v)||isNaN(F)||isNaN(ne)||!vs(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,ne,ne,ce)},p.setFont=function(v,F,ne){return ne&&(F=ae(F,ne)),qt=ka(v,F,{disableWarning:!1}),this};var Cc=p.__private__.getFont=p.getFont=function(){return tn[ka.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,F,ne={};for(v in Tn)if(Tn.hasOwnProperty(v))for(F in ne[v]=[],Tn[v])Tn[v].hasOwnProperty(F)&&ne[v].push(F);return ne},p.addFont=function(v,F,ne,ce,ge){var Me=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Me.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Me.indexOf(arguments[3])==-1&&(ne=ae(ne,ce)),ge=ge||"Identity-H",Sc.call(this,v,F,ne,ge)};var fn,Rc=n.lineWidth||.200025,Eo=p.__private__.getLineWidth=p.getLineWidth=function(){return Rc},Lc=p.__private__.setLineWidth=p.setLineWidth=function(v){return Rc=v,re(N(S(v))+" w"),this};p.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(ne){return N(S(ne))}).join(" "),F=N(S(F)),re("["+v+"] "+F+" d"),this};var Dc=p.__private__.getLineHeight=p.getLineHeight=function(){return nt*fn};p.__private__.getLineHeight=p.getLineHeight=function(){return nt*fn};var Fc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(fn=v),this},Ra=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return fn};Fc(n.lineHeight);var is=p.__private__.getHorizontalCoordinate=function(v){return S(v)},Sr=p.__private__.getVerticalCoordinate=function(v){return V===L.ADVANCED?v:Nt[D].mediaBox.topRightY-Nt[D].mediaBox.bottomLeftY-S(v)},Ku=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return N(is(v))},ta=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return N(Sr(v))},$r=n.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Z($r)},p.__private__.setStrokeColor=p.setDrawColor=function(v,F,ne,ce){return $r=te({ch1:v,ch2:F,ch3:ne,ch4:ce,pdfColorType:"draw",precision:2}),re($r),this};var To=n.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Z(To)},p.__private__.setFillColor=p.setFillColor=function(v,F,ne,ce){return To=te({ch1:v,ch2:F,ch3:ne,ch4:ce,pdfColorType:"fill",precision:2}),re(To),this};var Ms=n.textColor||"0 g",bo=p.__private__.getTextColor=p.getTextColor=function(){return Z(Ms)};p.__private__.setTextColor=p.setTextColor=function(v,F,ne,ce){return Ms=te({ch1:v,ch2:F,ch3:ne,ch4:ce,pdfColorType:"text",precision:3}),this};var La=n.charSpace,Ao=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(La||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return La=v,this};var Oc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Oc=F,re(F+" J"),this};var Io=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Io=F,re(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return re(N(S(v))+" M"),this},p.GState=Pp,p.setGState=function(v){(v=typeof v=="string"?bn[Ir[v]]:na(null,v)).equals(_i)||(re("/"+v.id+" gs"),_i=v)};var na=function(v,F){if(!v||!Ir[v]){var ne=!1;for(var ce in bn)if(bn.hasOwnProperty(ce)&&bn[ce].equals(F)){ne=!0;break}if(ne)F=bn[ce];else{var ge="GS"+(Object.keys(bn).length+1).toString(10);bn[ge]=F,F.id=ge}return v&&(Ir[v]=F.id),en.publish("addGState",F),F}};p.addGState=function(v,F){return na(v,F),this},p.saveGraphicsState=function(){return re("q"),Di.push({key:qt,size:nt,color:Ms}),this},p.restoreGraphicsState=function(){re("Q");var v=Di.pop();return qt=v.key,nt=v.size,Ms=v.color,_i=null,this},p.setCurrentTransformationMatrix=function(v){return re(v.toString()+" cm"),this},p.comment=function(v){return re("#"+v),this};var Da=function(v,F){var ne=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ne},set:function(Me){isNaN(Me)||(ne=parseFloat(Me))}});var ce=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Me){isNaN(Me)||(ce=parseFloat(Me))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Me){ge=Me.toString()}}),this},So=function(v,F,ne,ce){Da.call(this,v,F),this.type="rect";var ge=ne||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Ye){isNaN(Ye)||(ge=parseFloat(Ye))}});var Me=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Me},set:function(Ye){isNaN(Ye)||(Me=parseFloat(Ye))}}),this},Fa=function(){this.page=un,this.currentPage=D,this.pages=Ve.slice(0),this.pagesContext=Nt.slice(0),this.x=Bn,this.y=Gt,this.matrix=Wr,this.width=ra(D),this.height=ci(D),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Fa.prototype.restore=function(){un=this.page,D=this.currentPage,Nt=this.pagesContext,Ve=this.pages,Bn=this.x,Gt=this.y,Wr=this.matrix,No(D,this.width),ko(D,this.height),Ze=this.outputDestination};var Po=function(v,F,ne,ce,ge){yi.push(new Fa),un=D=0,Ve=[],Bn=v,Gt=F,Wr=ge,xi([ne,ce])},Yu=function(v){if(Lr[v])yi.pop().restore();else{var F=new Fa,ne="Xo"+(Object.keys(Qn).length+1).toString(10);F.id=ne,Lr[v]=ne,Qn[ne]=F,en.publish("addFormObject",F),yi.pop().restore()}};for(var Bs in p.beginFormObject=function(v,F,ne,ce,ge){return Po(v,F,ne,ce,ge),this},p.endFormObject=function(v){return Yu(v),this},p.doFormObject=function(v,F){var ne=Qn[Lr[v]];return re("q"),re(F.toString()+" cm"),re("/"+ne.id+" Do"),re("Q"),this},p.getFormObject=function(v){var F=Qn[Lr[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?($c(vo(Ds()),v),typeof $c.unload=="function"&&Ot.setTimeout&&setTimeout($c.unload,911),this):new Promise(function(ne,ce){try{var ge=$c(vo(Ds()),v);typeof $c.unload=="function"&&Ot.setTimeout&&setTimeout($c.unload,911),ne(ge)}catch(Me){ce(Me.message)}})},Dt.API)Dt.API.hasOwnProperty(Bs)&&(Bs==="events"&&Dt.API.events.length?function(v,F){var ne,ce,ge;for(ge=F.length-1;ge!==-1;ge--)ne=F[ge][0],ce=F[ge][1],v.subscribe.apply(v,[ne].concat(typeof ce=="function"?[ce]:ce))}(en,Dt.API.events):p[Bs]=Dt.API[Bs]);var ra=p.getPageWidth=function(v){return(Nt[v=v||D].mediaBox.topRightX-Nt[v].mediaBox.bottomLeftX)/pt},No=p.setPageWidth=function(v,F){Nt[v].mediaBox.topRightX=F*pt+Nt[v].mediaBox.bottomLeftX},ci=p.getPageHeight=function(v){return(Nt[v=v||D].mediaBox.topRightY-Nt[v].mediaBox.bottomLeftY)/pt},ko=p.setPageHeight=function(v,F){Nt[v].mediaBox.topRightY=F*pt+Nt[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:er,getStyle:$u,getFont:Cc,getFontSize:ut,getCharSpace:Ao,getTextColor:bo,getLineHeight:Dc,getLineHeightFactor:Ra,getLineWidth:Eo,write:We,getHorizontalCoordinate:is,getVerticalCoordinate:Sr,getCoordinateString:Ku,getVerticalCoordinateString:ta,collections:{},newObject:Yn,newAdditionalObject:ee,newObjectDeferred:Wn,newObjectDeferredBegin:j,getFilters:ye,putStream:Re,events:en,scaleFactor:pt,pageSize:{getWidth:function(){return ra(D)},setWidth:function(v){No(D,v)},getHeight:function(){return ci(D)},setHeight:function(v){ko(D,v)}},encryptionOptions:l,encryption:Un,getEncryptor:Hu,output:_o,getNumberOfPages:pn,pages:Ve,out:re,f2:B,f3:b,getPageInfo:Nc,getPageInfoByObjId:Mt,getCurrentPageInfo:ea,getPDFVersion:_,Point:Da,Rectangle:So,Matrix:wt,hasHotfix:Zs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ra(D)},set:function(v){No(D,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ci(D)},set:function(v){ko(D,v)},enumerable:!0,configurable:!0}),zu.call(p,$e),qt="F1",Na(i,t),en.publish("initialized"),p}Il.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Il.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Il.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},Il.prototype.processOwnerPassword=function(n,e){return C1(k1(e).substr(0,5),n)},Il.prototype.encryptor=function(n,e){var t=k1(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return C1(t,r)}},Pp.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||xn(n)!==xn(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},Dt.API={events:[]},Dt.version="2.5.2";var nr=Dt.API,e_=1,ju=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_l=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ut=function(n){return n.toFixed(2)},Ko=function(n){return n.toFixed(5)};nr.__acroform__={};var Qi=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},R5=function(n){return n*e_},ua=function(n){var e=new AS,t=Et.internal.getHeight(n)||0,r=Et.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Ut(r)),Number(Ut(t))],e},wW=nr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},xW=nr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},EW=nr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},fr=nr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return EW(n,e-1)},dr=nr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wW(n,e-1)},pr=nr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return xW(n,e-1)},TW=nr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],a=n[2],o=n[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=r(s+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=r(s)||0,[Number(Ut(c.lowerLeft_X)),Number(Ut(c.lowerLeft_Y)),Number(Ut(c.upperRight_X)),Number(Ut(c.upperRight_Y))]},bW=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=R1(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Ut(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ua(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},R1=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var s=t,a=Et.internal.getHeight(n)||0;a=a<0?-a:a;var o=Et.internal.getWidth(n)||0;o=o<0?-o:o;var c=function(b,S,R){if(b+1<i.length){var se=S+" "+i[b+1][0];return E0(se,n,R).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,l,d=E0("3",n,s).height,g=n.multiline?a-s:(a-d)/2,p=g+=2,x=0,_=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+E0(e,n,s=12).width+", FieldWidth:"+o+`
`;break}for(var P="",L=0,V=0;V<i.length;V++)if(i.hasOwnProperty(V)){var K=!1;if(i[V].length!==1&&E!==i[V].length-1){if((d+2)*(L+2)+2>a)continue e;P+=i[V][E],K=!0,_=V,V--}else{P=(P+=i[V][E]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var ie=parseInt(V),ae=c(ie,P,s),N=V>=i.length-1;if(ae&&!N){P+=" ",E=0;continue}if(ae||N){if(N)_=ie;else if(n.multiline&&(d+2)*(L+2)+2>a)continue e}else{if(!n.multiline||(d+2)*(L+2)+2>a)continue e;_=ie}}for(var A="",C=x;C<=_;C++){var B=i[C];if(n.multiline){if(C===_){A+=B[E]+" ",E=(E+1)%B.length;continue}if(C===x){A+=B[B.length-1]+" ";continue}}A+=B[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,l=E0(A,n,s).width,n.textAlign){case"right":u=o-l-2;break;case"center":u=(o-l)/2;break;case"left":default:u=2}e+=Ut(u)+" "+Ut(p)+` Td
`,e+="("+ju(A)+`) Tj
`,e+=-Ut(u)+` 0 Td
`,p=-(s+2),l=0,x=K?_:_+1,L++,P=""}break}return r.text=e,r.fontSize=s,r},E0=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},AW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},IW=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},SW=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),xn(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},PW=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(Js.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(AW)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");e_=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new IS,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&IW(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var a in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var o=r[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=TW(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Et.createDefaultAppearanceStream(o),xn(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=bW(o);c.push({key:"AP",value:"<</N "+l+">>"}),i.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var d="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(d+="/"+g+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var x=p[a];typeof x=="function"&&(x=x.call(i,o)),d+="/"+a+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=p)=="function"&&(x=x.call(i,o)),d+="/"+a+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&SW(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},bS=nr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),xn(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+ju(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rg=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+ju(r(n))+")"},va=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};va.prototype.toString=function(){return this.objId+" 0 R"},va.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},va.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:bS(i,this.objId,this.scope)}):i instanceof va?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var AS=function(){va.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Qi(AS,va);var IS=function(){va.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ju(t(n))+")"}},set:function(t){n=t}})};Qi(IS,va);var Js=function n(){va.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!fr(e,3)},set:function(P){P?this.F=dr(e,3):this.F=pr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(P){r=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(P){r[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(P){r[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(P){r[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(P){r[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Np)return;s="FieldObject"+n.FieldNum++}var P=function(L){return L};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+ju(P(s))+")"},set:function(P){s=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(P){s=P}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(P){o=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/e_:u},set:function(P){u=P}});var l="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return l},set:function(P){l=P}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Np||this instanceof cu))return Rg(d,this.objId,this.scope)},set:function(P){P=P.toString(),d=P}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof Br?g:Rg(g,this.objId,this.scope)},set:function(P){P=P.toString(),g=this instanceof Br?P:P.substr(0,1)==="("?_l(P.substr(1,P.length-2)):_l(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Br?_l(g.substr(1,g.length-1)):g},set:function(P){P=P.toString(),g=this instanceof Br?"/"+P:P}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Br?p:Rg(p,this.objId,this.scope)},set:function(P){P=P.toString(),p=this instanceof Br?P:P.substr(0,1)==="("?_l(P.substr(1,P.length-2)):_l(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Br?_l(p.substr(1,p.length-1)):p},set:function(P){P=P.toString(),p=this instanceof Br?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(P){P=!!P,_=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(P){x=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,1)},set:function(P){P?this.Ff=dr(this.Ff,1):this.Ff=pr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,2)},set:function(P){P?this.Ff=dr(this.Ff,2):this.Ff=pr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,3)},set:function(P){P?this.Ff=dr(this.Ff,3):this.Ff=pr(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');E=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(E){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Qi(Js,va);var zl=function(){Js.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return bS(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,a,o){o||(o=1);for(var c,u=[];c=a.exec(s);)u.push(c[o]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,18)},set:function(t){t?this.Ff=dr(this.Ff,18):this.Ff=pr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=dr(this.Ff,19):this.Ff=pr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,20)},set:function(t){t?(this.Ff=dr(this.Ff,20),e.sort()):this.Ff=pr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,22)},set:function(t){t?this.Ff=dr(this.Ff,22):this.Ff=pr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,23)},set:function(t){t?this.Ff=dr(this.Ff,23):this.Ff=pr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,27)},set:function(t){t?this.Ff=dr(this.Ff,27):this.Ff=pr(this.Ff,27)}}),this.hasAppearanceStream=!1};Qi(zl,Js);var Wl=function(){zl.call(this),this.fontName="helvetica",this.combo=!1};Qi(Wl,zl);var Hl=function(){Wl.call(this),this.combo=!0};Qi(Hl,Wl);var M0=function(){Hl.call(this),this.edit=!0};Qi(M0,Hl);var Br=function(){Js.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,15)},set:function(t){t?this.Ff=dr(this.Ff,15):this.Ff=pr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,16)},set:function(t){t?this.Ff=dr(this.Ff,16):this.Ff=pr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,17)},set:function(t){t?this.Ff=dr(this.Ff,17):this.Ff=pr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,26)},set:function(t){t?this.Ff=dr(this.Ff,26):this.Ff=pr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ju(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){xn(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Qi(Br,Js);var B0=function(){Br.call(this),this.pushButton=!0};Qi(B0,Br);var $l=function(){Br.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Qi($l,Br);var Np=function(){var n,e;Js.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),r)a.push("/"+s+" ("+ju(i(r[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){xn(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Qi(Np,Js),$l.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},$l.prototype.createOption=function(n){var e=new Np;return e.Parent=this,e.optionName=n,this.Kids.push(e),NW.call(this.scope,e),e};var V0=function(){Br.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Et.CheckBox.createAppearanceStream()};Qi(V0,Br);var cu=function(){Js.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,13)},set:function(e){e?this.Ff=dr(this.Ff,13):this.Ff=pr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,21)},set:function(e){e?this.Ff=dr(this.Ff,21):this.Ff=pr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,23)},set:function(e){e?this.Ff=dr(this.Ff,23):this.Ff=pr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,24)},set:function(e){e?this.Ff=dr(this.Ff,24):this.Ff=pr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,25)},set:function(e){e?this.Ff=dr(this.Ff,25):this.Ff=pr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,26)},set:function(e){e?this.Ff=dr(this.Ff,26):this.Ff=pr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Qi(cu,Js);var U0=function(){cu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!fr(this.Ff,14)},set:function(n){n?this.Ff=dr(this.Ff,14):this.Ff=pr(this.Ff,14)}}),this.password=!0};Qi(U0,cu);var Et={CheckBox:{createAppearanceStream:function(){return{N:{On:Et.CheckBox.YesNormal},D:{On:Et.CheckBox.YesPushDown,Off:Et.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=ua(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=R1(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Ut(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=ua(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Et.internal.getHeight(n),a=Et.internal.getWidth(n),o=R1(n,n.caption);return i.push("1 g"),i.push("0 0 "+Ut(a)+" "+Ut(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ut(a-1)+" "+Ut(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Ut(o.fontSize)+" Tf "+r),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=ua(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Et.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Et.RadioButton.Circle.YesNormal,e.D[n]=Et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=ua(n);e.scope=n.scope;var t=[],r=Et.internal.getWidth(n)<=Et.internal.getHeight(n)?Et.internal.getWidth(n)/4:Et.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Et.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ko(Et.internal.getWidth(n)/2)+" "+Ko(Et.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ua(n);e.scope=n.scope;var t=[],r=Et.internal.getWidth(n)<=Et.internal.getHeight(n)?Et.internal.getWidth(n)/4:Et.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Et.internal.Bezier_C).toFixed(5)),a=Number((r*Et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(Et.internal.getWidth(n)/2)+" "+Ko(Et.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ko(Et.internal.getWidth(n)/2)+" "+Ko(Et.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=ua(n);e.scope=n.scope;var t=[],r=Et.internal.getWidth(n)<=Et.internal.getHeight(n)?Et.internal.getWidth(n)/4:Et.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(Et.internal.getWidth(n)/2)+" "+Ko(Et.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Et.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Et.RadioButton.Cross.YesNormal,e.D[n]=Et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=ua(n);e.scope=n.scope;var t=[],r=Et.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Ut(Et.internal.getWidth(n)-2)+" "+Ut(Et.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Ut(r.x1.x)+" "+Ut(r.x1.y)+" m"),t.push(Ut(r.x2.x)+" "+Ut(r.x2.y)+" l"),t.push(Ut(r.x4.x)+" "+Ut(r.x4.y)+" m"),t.push(Ut(r.x3.x)+" "+Ut(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=ua(n);e.scope=n.scope;var t=Et.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Ut(Et.internal.getWidth(n)-2)+" "+Ut(Et.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Ut(t.x1.x)+" "+Ut(t.x1.y)+" m"),r.push(Ut(t.x2.x)+" "+Ut(t.x2.y)+" l"),r.push(Ut(t.x4.x)+" "+Ut(t.x4.y)+" m"),r.push(Ut(t.x3.x)+" "+Ut(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=ua(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(n))+" "+Ut(Et.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Et.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Et.internal.getWidth(n),t=Et.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Et.internal.getWidth=function(n){var e=0;return xn(n)==="object"&&(e=R5(n.Rect[2])),e},Et.internal.getHeight=function(n){var e=0;return xn(n)==="object"&&(e=R5(n.Rect[3])),e};var NW=nr.addField=function(n){if(PW(this,n),!(n instanceof Js))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};nr.AcroFormChoiceField=zl,nr.AcroFormListBox=Wl,nr.AcroFormComboBox=Hl,nr.AcroFormEditBox=M0,nr.AcroFormButton=Br,nr.AcroFormPushButton=B0,nr.AcroFormRadioButton=$l,nr.AcroFormCheckBox=V0,nr.AcroFormTextField=cu,nr.AcroFormPasswordField=U0,nr.AcroFormAppearance=Et,nr.AcroForm={ChoiceField:zl,ListBox:Wl,ComboBox:Hl,EditBox:M0,Button:Br,PushButton:B0,RadioButton:$l,CheckBox:V0,TextField:cu,PasswordField:U0,Appearance:Et},Dt.AcroForm={ChoiceField:zl,ListBox:Wl,ComboBox:Hl,EditBox:M0,Button:Br,PushButton:B0,RadioButton:$l,CheckBox:V0,TextField:cu,PasswordField:U0,Appearance:Et};Dt.AcroForm;function SS(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(b,S){var R,se,me,Ee,Pe,_e=e;if((S=S||e)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(ae(b))for(Pe in t)for(me=t[Pe],R=0;R<me.length;R+=1){for(Ee=!0,se=0;se<me[R].length;se+=1)if(me[R][se]!==void 0&&me[R][se]!==b[se]){Ee=!1;break}if(Ee===!0){_e=Pe;break}}else for(Pe in t)for(me=t[Pe],R=0;R<me.length;R+=1){for(Ee=!0,se=0;se<me[R].length;se+=1)if(me[R][se]!==void 0&&me[R][se]!==b.charCodeAt(se)){Ee=!1;break}if(Ee===!0){_e=Pe;break}}return _e===e&&S!==e&&(_e=S),_e},i=function b(S){for(var R=this.internal.write,se=this.internal.putStream,me=(0,this.internal.getFilters)();me.indexOf("FlateEncode")!==-1;)me.splice(me.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Ee=[];if(Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Image"}),Ee.push({key:"Width",value:S.width}),Ee.push({key:"Height",value:S.height}),S.colorSpace===E.INDEXED?Ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Ee.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===E.DEVICE_CMYK&&Ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ee.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Ee.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var Pe="",_e=0,ke=S.transparency.length;_e<ke;_e++)Pe+=S.transparency[_e]+" "+S.transparency[_e]+" ";Ee.push({key:"Mask",value:"["+Pe+"]"})}S.sMask!==void 0&&Ee.push({key:"SMask",value:S.objectId+1+" 0 R"});var Oe=S.filter!==void 0?["/"+S.filter]:void 0;if(se({data:S.data,additionalKeyValues:Ee,alreadyAppliedFilters:Oe,objectId:S.objectId}),R("endobj"),"sMask"in S&&S.sMask!==void 0){var rt="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,T={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:rt,data:S.sMask};"filter"in S&&(T.filter=S.filter),b.call(this,T)}if(S.colorSpace===E.INDEXED){var D=this.internal.newObject();se({data:A(new Uint8Array(S.palette)),objectId:D}),R("endobj")}},s=function(){var b=this.internal.collections.addImage_images;for(var S in b)i.call(this,b[S])},a=function(){var b,S=this.internal.collections.addImage_images,R=this.internal.write;for(var se in S)R("/I"+(b=S[se]).index,b.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var b=this.internal.collections.addImage_images;return o.call(this),b},u=function(){return Object.keys(this.internal.collections.addImage_images).length},l=function(b){return typeof n["process"+b.toUpperCase()]=="function"},d=function(b){return xn(b)==="object"&&b.nodeType===1},g=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var R=""+b.getAttribute("src");if(R.indexOf("data:image/")===0)return Sf(unescape(R).split("base64,").pop());var se=n.loadFile(R,!0);if(se!==void 0)return se}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var me;switch(S){case"PNG":me="image/png";break;case"WEBP":me="image/webp";break;case"JPEG":case"JPG":default:me="image/jpeg"}return Sf(b.toDataURL(me,1).split("base64,").pop())}},p=function(b){var S=this.internal.collections.addImage_images;if(S){for(var R in S)if(b===S[R].alias)return S[R]}},x=function(b,S,R){return b||S||(b=-96,S=-96),b<0&&(b=-1*R.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*R.height*72/S/this.internal.scaleFactor),b===0&&(b=S*R.width/R.height),S===0&&(S=b*R.height/R.width),[b,S]},_=function(b,S,R,se,me,Ee){var Pe=x.call(this,R,se,me),_e=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Oe=c.call(this);if(R=Pe[0],se=Pe[1],Oe[me.index]=me,Ee){Ee*=Math.PI/180;var rt=Math.cos(Ee),T=Math.sin(Ee),D=function(U){return U.toFixed(4)},M=[D(rt),D(T),D(-1*T),D(rt),0,0,"cm"]}this.internal.write("q"),Ee?(this.internal.write([1,"0","0",1,_e(b),ke(S+se),"cm"].join(" ")),this.internal.write(M.join(" ")),this.internal.write([_e(R),"0","0",_e(se),"0","0","cm"].join(" "))):this.internal.write([_e(R),"0","0",_e(se),_e(b),ke(S+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+me.index+" Do"),this.internal.write("Q")},E=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=n.__addimage__.sHashCode=function(b){var S,R,se=0;if(typeof b=="string")for(R=b.length,S=0;S<R;S++)se=(se<<5)-se+b.charCodeAt(S),se|=0;else if(ae(b))for(R=b.byteLength/2,S=0;S<R;S++)se=(se<<5)-se+b[S],se|=0;return se},V=n.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},K=n.__addimage__.extractImageFromDataUrl=function(b){var S=(b=b||"").split("base64,"),R=null;if(S.length===2){var se=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(se)&&(R={mimeType:se[1],charset:se[2],data:S[1]})}return R},ie=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(b){return ie()&&b instanceof ArrayBuffer};var ae=n.__addimage__.isArrayBufferView=function(b){return ie()&&typeof Uint32Array<"u"&&(b instanceof Int8Array||b instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)},N=n.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,R=new Uint8Array(S),se=0;se<S;se++)R[se]=b.charCodeAt(se);return R},A=n.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",R=ae(b)?b:new Uint8Array(b),se=0;se<R.length;se+=8192)S+=String.fromCharCode.apply(null,R.subarray(se,se+8192));return S};n.addImage=function(){var b,S,R,se,me,Ee,Pe,_e,ke;if(typeof arguments[1]=="number"?(S=e,R=arguments[1],se=arguments[2],me=arguments[3],Ee=arguments[4],Pe=arguments[5],_e=arguments[6],ke=arguments[7]):(S=arguments[1],R=arguments[2],se=arguments[3],me=arguments[4],Ee=arguments[5],Pe=arguments[6],_e=arguments[7],ke=arguments[8]),xn(b=arguments[0])==="object"&&!d(b)&&"imageData"in b){var Oe=b;b=Oe.imageData,S=Oe.format||S||e,R=Oe.x||R||0,se=Oe.y||se||0,me=Oe.w||Oe.width||me,Ee=Oe.h||Oe.height||Ee,Pe=Oe.alias||Pe,_e=Oe.compression||_e,ke=Oe.rotation||Oe.angle||ke}var rt=this.internal.getFilters();if(_e===void 0&&rt.indexOf("FlateEncode")!==-1&&(_e="SLOW"),isNaN(R)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var T=C.call(this,b,S,Pe,_e);return _.call(this,R,se,me,Ee,T,ke),this};var C=function(b,S,R,se){var me,Ee,Pe;if(typeof b=="string"&&r(b)===e){b=unescape(b);var _e=B(b,!1);(_e!==""||(_e=n.loadFile(b,!0))!==void 0)&&(b=_e)}if(d(b)&&(b=g(b,S)),S=r(b,S),!l(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((Pe=R)==null||Pe.length===0)&&(R=function(ke){return typeof ke=="string"||ae(ke)?L(ke):ae(ke.data)?L(ke.data):null}(b)),(me=p.call(this,R))||(ie()&&(b instanceof Uint8Array||S==="RGBA"||(Ee=b,b=N(b))),me=this["process"+S.toUpperCase()](b,u.call(this),R,function(ke){return ke&&typeof ke=="string"&&(ke=ke.toUpperCase()),ke in n.image_compression?ke:P.NONE}(se),Ee)),!me)throw new Error("An unknown error occurred whilst processing the image.");return me},B=n.__addimage__.convertBase64ToBinaryString=function(b,S){var R;S=typeof S!="boolean"||S;var se,me="";if(typeof b=="string"){se=(R=K(b))!==null?R.data:b;try{me=Sf(se)}catch(Ee){if(S)throw V(se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return me};n.getImageProperties=function(b){var S,R,se="";if(d(b)&&(b=g(b)),typeof b=="string"&&r(b)===e&&((se=B(b,!1))===""&&(se=n.loadFile(b)||""),b=se),R=r(b),!l(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!ie()||b instanceof Uint8Array||(b=N(b)),!(S=this["process"+R.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=R,S}})(Dt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};Dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,l=!1,d=0;d<u.length&&!l;d++)switch((r=u[d]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(l!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){r=u[g];var p=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(_.objId),L=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y)+"] ")+"/Contents ("+p(P(r.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(P(L))+") >>",_.content=s;var V=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(r.bounds.x+30)+" "+o(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+o(r.bounds.y)+"] ")+" /Parent "+V,r.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(_.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+a(r.bounds.x)+" "+o(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+o(r.bounds.y+r.bounds.h)+"] ";var K=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(x(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var ie=this.annotations._nameMap[r.options.name];r.options.pageNumber=ie.page,r.options.top=ie.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(x(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var ae=o(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+ae+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(r),w:c(t+i),h:u(r+s)},options:a,type:"link"})},n.textWithLink=function(t,r,i,s){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var l=this.splitTextToSize(t,o).length;a=Math.ceil(u*l)}else o=c,a=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=c/2),s.align==="right"&&(r-=c),this.link(r,i-u,o,a,s),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(Dt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=n.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&i.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var l=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length==4},d=n.__arabicParser__.resolveLigatures=function(_){var E=0,P=t,L="",V=0;for(E=0;E<_.length;E+=1)P[_.charCodeAt(E)]!==void 0?(V++,typeof(P=P[_.charCodeAt(E)])=="number"&&(L+=String.fromCharCode(P),P=t,V=0),E===_.length-1&&(P=t,L+=_.charAt(E-(V-1)),E-=V-1,V=0)):(P=t,L+=_.charAt(E-V),E-=V,V=0);return L};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var g=n.__arabicParser__.getCorrectForm=function(_,E,P){return a(_)?s(_)===!1?-1:!u(_)||!a(E)&&!a(P)||!a(P)&&o(E)||o(_)&&!a(E)||o(_)&&c(E)||o(_)&&o(E)?0:l(_)&&a(E)&&!o(E)&&a(P)&&u(P)?3:o(_)||!a(P)?1:2:-1},p=function(_){var E=0,P=0,L=0,V="",K="",ie="",ae=(_=_||"").split("\\s+"),N=[];for(E=0;E<ae.length;E+=1){for(N.push(""),P=0;P<ae[E].length;P+=1)V=ae[E][P],K=ae[E][P-1],ie=ae[E][P+1],a(V)?(L=g(V,K,ie),N[E]+=L!==-1?String.fromCharCode(e[V.charCodeAt(0)][L]):V):N[E]+=V;N[E]=d(N[E])}return N.join(" ")},x=n.__arabicParser__.processArabic=n.processArabic=function(){var _,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(E)){var L=0;for(P=[],L=0;L<E.length;L+=1)Array.isArray(E[L])?P.push([p(E[L][0]),E[L][1],E[L][2]]):P.push([p(E[L])]);_=P}else _=p(E);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",x])}(Dt.API),Dt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(o){r=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var l=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(_){x=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,u){r.call(this);var l=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,p=0,x=0,_=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=u.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(V,K){return V.concat(E.splitTextToSize(K,P))},[])):c=Array.isArray(c)?c:[c];for(var L=0;L<c.length;L++)p<(_=this.getStringUnitWidth(c[L],{font:d})*l)&&(p=_);return p!==0&&(x=c.length),{w:p/=g,h:Math.max((x*l*this.getLineHeightFactor()-l*(this.getLineHeightFactor()-1))/g,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,l=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-l,c.y+l,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+l,{align:"center",baseline:"top",maxWidth:c.width-l-l}):this.text(c.text,c.x+l,c.y+l,{align:"left",baseline:"top",maxWidth:c.width-l-l})),this.internal.__cell__.lastCell=c,this};n.table=function(c,u,l,d,g){if(r.call(this),!l)throw new Error("No data for PDF table.");var p,x,_,E,P=[],L=[],V=[],K={},ie={},ae=[],N=[],A=(g=g||{}).autoSize||!1,C=g.printHeaders!==!1,B=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,b=g.margins||Object.assign({width:this.getPageWidth()},e),S=typeof g.padding=="number"?g.padding:3,R=g.headerBackgroundColor||"#c8c8c8",se=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=se,this.setFontSize(B),d==null)L=P=Object.keys(l[0]),V=P.map(function(){return"left"});else if(Array.isArray(d)&&xn(d[0])==="object")for(P=d.map(function(Oe){return Oe.name}),L=d.map(function(Oe){return Oe.prompt||Oe.name||""}),V=d.map(function(Oe){return Oe.align||"left"}),p=0;p<d.length;p+=1)ie[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(L=P=d,V=P.map(function(){return"left"}));if(A||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<P.length;p+=1){for(K[E=P[p]]=l.map(function(Oe){return Oe[E]}),this.setFont(void 0,"bold"),ae.push(this.getTextDimensions(L[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=K[E],this.setFont(void 0,"normal"),_=0;_<x.length;_+=1)ae.push(this.getTextDimensions(x[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ie[E]=Math.max.apply(null,ae)+S+S,ae=[]}if(C){var me={};for(p=0;p<P.length;p+=1)me[P[p]]={},me[P[p]].text=L[p],me[P[p]].align=V[p];var Ee=o.call(this,me,ie);N=P.map(function(Oe){return new s(c,u,ie[Oe],Ee,me[Oe].text,void 0,me[Oe].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var Pe=d.reduce(function(Oe,rt){return Oe[rt.name]=rt.align,Oe},{});for(p=0;p<l.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:l[p]},this);var _e=o.call(this,l[p],ie);for(_=0;_<P.length;_+=1){var ke=l[p][P[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:_,data:ke},this),a.call(this,new s(c,u,ie[P[_]],_e,ke,p+2,Pe[P[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var l=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var x=c[p];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[p]-l-l)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/g+l+l},this).reduce(function(p,x){return Math.max(p,x)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var l;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){l=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(l.y=this.internal.__cell__.margins.top||0,g.push(l)),l.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,l),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Dt.API);var PS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},NS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],L1=SS(NS),kS=[100,200,300,400,500,600,700,800,900],kW=SS(kS);function D1(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return PS[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof L1[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function L5(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var CW={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},D5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function F5(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function RW(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},CW,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=D1(e[o])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){a=n[s.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+F5(s)+"' and default family '"+r+"'.");if(a=function(c,u){if(u[c])return u[c];var l=L1[c],d=l<=L1.normal?-1:1,g=L5(u,NS,l,d);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,a),a=function(c,u){if(u[c])return u[c];for(var l=PS[c],d=0;d<l.length;++d)if(u[l[d]])return u[l[d]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var l=kW[c],d=L5(u,kS,l,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+F5(s)+"'.");return a}function O5(n){return n.trimLeft()}function LW(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function DW(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var T0,M5,B5,Lg=["times"];(function(n){var e,t,r,i,s,a,o,c,u,l=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new a,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new a,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new l}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=T;Object.defineProperty(this,"pdf",{get:function(){return D}});var M=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return M},set:function(Le){M=!!Le}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(Le){U=!!Le}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(Le){isNaN(Le)||(J=Le)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(Le){isNaN(Le)||(oe=Le)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Le){var re;typeof Le=="number"?re=[Le,Le,Le,Le]:((re=new Array(4))[0]=Le[0],re[1]=Le.length>=2?Le[1]:re[0],re[2]=Le.length>=3?Le[2]:re[0],re[3]=Le.length>=4?Le[3]:re[1]),u.margin=re}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(Le){le=Le}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Le){ue=Le}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(Le){xe=Le}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Le){Le instanceof l&&(u=Le)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Le){u.path=Le}});var Ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ve},set:function(Le){Ve=Le}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Le){var re;re=g(Le),this.ctx.fillStyle=re.style,this.ctx.isFillTransparent=re.a===0,this.ctx.fillOpacity=re.a,this.pdf.setFillColor(re.r,re.g,re.b,{a:re.a}),this.pdf.setTextColor(re.r,re.g,re.b,{a:re.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Le){var re=g(Le);this.ctx.strokeStyle=re.style,this.ctx.isStrokeTransparent=re.a===0,this.ctx.strokeOpacity=re.a,re.a===0?this.pdf.setDrawColor(255,255,255):(re.a,this.pdf.setDrawColor(re.r,re.g,re.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Le){["butt","round","square"].indexOf(Le)!==-1&&(this.ctx.lineCap=Le,this.pdf.setLineCap(Le))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Le){isNaN(Le)||(this.ctx.lineWidth=Le,this.pdf.setLineWidth(Le))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Le){["bevel","round","miter"].indexOf(Le)!==-1&&(this.ctx.lineJoin=Le,this.pdf.setLineJoin(Le))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Le){isNaN(Le)||(this.ctx.miterLimit=Le,this.pdf.setMiterLimit(Le))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Le){this.ctx.textBaseline=Le}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Le){["right","end","center","left","start"].indexOf(Le)!==-1&&(this.ctx.textAlign=Le)}});var ze=null;function Ze(Le,re){if(ze===null){var We=function(_t){var $e=[];return Object.keys(_t).forEach(function(nt){_t[nt].forEach(function(ct){var ut=null;switch(ct){case"bold":ut={family:nt,weight:"bold"};break;case"italic":ut={family:nt,style:"italic"};break;case"bolditalic":ut={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:nt}}ut!==null&&(ut.ref={name:nt,style:ct},$e.push(ut))})}),$e}(Le.getFontList());ze=function(_t){for(var $e={},nt=0;nt<_t.length;++nt){var ct=D1(_t[nt]),ut=ct.family,Tt=ct.stretch,At=ct.style,Ft=ct.weight;$e[ut]=$e[ut]||{},$e[ut][Tt]=$e[ut][Tt]||{},$e[ut][Tt][At]=$e[ut][Tt][At]||{},$e[ut][Tt][At][Ft]=ct}return $e}(We.concat(re))}return ze}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(Le){ze=null,at=Le}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Le){var re;if(this.ctx.font=Le,(re=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Le))!==null){var We=re[1],_t=(re[2],re[3]),$e=re[4],nt=(re[5],re[6]),ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(ct==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ut=function(Ct){var qt,pt,Bn=[],Gt=Ct.trim();if(Gt==="")return Lg;if(Gt in D5)return[D5[Gt]];for(;Gt!=="";){switch(pt=null,qt=(Gt=O5(Gt)).charAt(0)){case'"':case"'":pt=LW(Gt.substring(1),qt);break;default:pt=DW(Gt)}if(pt===null||(Bn.push(pt[0]),(Gt=O5(pt[1]))!==""&&Gt.charAt(0)!==","))return Lg;Gt=Gt.replace(/^,/,"")}return Bn}(nt);if(this.fontFaces){var Tt=RW(Ze(this.pdf,this.fontFaces),ut.map(function(Ct){return{family:Ct,stretch:"normal",weight:_t,style:We}}));this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var At="";(_t==="bold"||parseInt(_t,10)>=700||We==="bold")&&(At="bold"),We==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Ft="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<ut.length;kt++){if(this.pdf.internal.getFont(ut[kt],At,{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[kt];break}if(At==="bolditalic"&&this.pdf.internal.getFont(ut[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=ut[kt],At="bold";else if(this.pdf.internal.getFont(ut[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[kt],At="normal";break}}if(Ft===""){for(var Ht=0;Ht<ut.length;Ht++)if(It[ut[Ht]]){Ft=It[ut[Ht]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Le){this.ctx.globalCompositeOperation=Le}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Le){this.ctx.globalAlpha=Le}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Le){this.ctx.lineDashOffset=Le,rt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Le){this.ctx.lineDash=Le,rt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Le){this.ctx.ignoreClearRect=!!Le}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){K.call(this,"fill",!1)},d.prototype.stroke=function(){K.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var M=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"mt",x:M.x,y:M.y}),this.ctx.lastPoint=new a(T,D)},d.prototype.closePath=function(){var T=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&xn(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){T=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(T.x,T.y)},d.prototype.lineTo=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var M=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"lt",x:M.x,y:M.y}),this.ctx.lastPoint=new a(M.x,M.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,D,M,U){if(isNaN(M)||isNaN(U)||isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new a(M,U)),oe=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},d.prototype.bezierCurveTo=function(T,D,M,U,J,oe){if(isNaN(J)||isNaN(oe)||isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U))throw Cn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new a(J,oe)),ue=this.ctx.transform.applyToPoint(new a(T,D)),xe=this.ctx.transform.applyToPoint(new a(M,U));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new a(le.x,le.y)},d.prototype.arc=function(T,D,M,U,J,oe){if(isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U)||isNaN(J))throw Cn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new a(T,D));T=le.x,D=le.y;var ue=this.ctx.transform.applyToPoint(new a(0,M)),xe=this.ctx.transform.applyToPoint(new a(0,0));M=Math.sqrt(Math.pow(ue.x-xe.x,2)+Math.pow(ue.y-xe.y,2))}Math.abs(J-U)>=2*Math.PI&&(U=0,J=2*Math.PI),this.path.push({type:"arc",x:T,y:D,radius:M,startAngle:U,endAngle:J,counterclockwise:oe})},d.prototype.arcTo=function(T,D,M,U,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,D,M,U){if(isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U))throw Cn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,D),this.lineTo(T+M,D),this.lineTo(T+M,D+U),this.lineTo(T,D+U),this.lineTo(T,D),this.lineTo(T+M,D),this.lineTo(T,D)},d.prototype.fillRect=function(T,D,M,U){if(isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U))throw Cn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,D,M,U),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(T,D,M,U){if(isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U))throw Cn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(T,D,M,U),this.stroke())},d.prototype.clearRect=function(T,D,M,U){if(isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U))throw Cn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,D,M,U))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,M=0;M<this.pdf.internal.getNumberOfPages();M++)this.pdf.setPage(M+1),this.pdf.internal.out("Q");this.pdf.setPage(D),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(T){var D,M,U,J;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))D=0,M=0,U=0,J=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(oe!==null)D=parseInt(oe[1]),M=parseInt(oe[2]),U=parseInt(oe[3]),J=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)D=parseInt(oe[1]),M=parseInt(oe[2]),U=parseInt(oe[3]),J=parseFloat(oe[4]);else{if(J=1,typeof T=="string"&&T.charAt(0)!=="#"){var le=new xS(T);T=le.ok?le.toHex():"#000000"}T.length===4?(D=T.substring(1,2),D+=D,M=T.substring(2,3),M+=M,U=T.substring(3,4),U+=U):(D=T.substring(1,3),M=T.substring(3,5),U=T.substring(5,7)),D=parseInt(D,16),M=parseInt(M,16),U=parseInt(U,16)}}return{r:D,g:M,b:U,a:J,style:T}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,D,M,U){if(isNaN(D)||isNaN(M)||typeof T!="string")throw Cn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!p.call(this)){var J=_e(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;S.call(this,{text:T,x:D,y:M,scale:oe,angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.strokeText=function(T,D,M,U){if(isNaN(D)||isNaN(M)||typeof T!="string")throw Cn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){U=isNaN(U)?void 0:U;var J=_e(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;S.call(this,{text:T,x:D,y:M,scale:oe,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.measureText=function(T){if(typeof T!="string")throw Cn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,M=this.pdf.internal.scaleFactor,U=D.internal.getFontSize(),J=D.getStringUnitWidth(T)*U/D.internal.scaleFactor,oe=function(le){var ue=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new oe({width:J*=Math.round(96*M/72*1e4)/1e4})},d.prototype.scale=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var M=new c(T,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(M)},d.prototype.rotate=function(T){if(isNaN(T))throw Cn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.translate=function(T,D){if(isNaN(T)||isNaN(D))throw Cn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var M=new c(1,0,0,1,T,D);this.ctx.transform=this.ctx.transform.multiply(M)},d.prototype.transform=function(T,D,M,U,J,oe){if(isNaN(T)||isNaN(D)||isNaN(M)||isNaN(U)||isNaN(J)||isNaN(oe))throw Cn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(T,D,M,U,J,oe);this.ctx.transform=this.ctx.transform.multiply(le)},d.prototype.setTransform=function(T,D,M,U,J,oe){T=isNaN(T)?1:T,D=isNaN(D)?0:D,M=isNaN(M)?0:M,U=isNaN(U)?1:U,J=isNaN(J)?0:J,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(T,D,M,U,J,oe)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,D,M,U,J,oe,le,ue,xe){var Ve=this.pdf.getImageProperties(T),ze=1,Ze=1,at=1,Le=1;U!==void 0&&ue!==void 0&&(at=ue/U,Le=xe/J,ze=Ve.width/U*ue/U,Ze=Ve.height/J*xe/J),oe===void 0&&(oe=D,le=M,D=0,M=0),U!==void 0&&ue===void 0&&(ue=U,xe=J),U===void 0&&ue===void 0&&(ue=Ve.width,xe=Ve.height);for(var re,We=this.ctx.transform.decompose(),_t=_e(We.rotate.shx),$e=new c,nt=($e=($e=($e=$e.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new o(oe-D*at,le-M*Le,U*ze,J*Ze)),ct=E.call(this,nt),ut=[],Tt=0;Tt<ct.length;Tt+=1)ut.indexOf(ct[Tt])===-1&&ut.push(ct[Tt]);if(V(ut),this.autoPaging)for(var At=ut[0],Ft=ut[ut.length-1],It=At;It<Ft+1;It++){this.pdf.setPage(It);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=It===1?this.posY+this.margin[0]:this.margin[0],Ct=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=It===1?0:Ct+(It-2)*qt;if(this.ctx.clip_path.length!==0){var Bn=this.path;re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(re,this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset),ie.call(this,"fill",!0),this.path=Bn}var Gt=JSON.parse(JSON.stringify(nt));Gt=L([Gt],this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset)[0];var Wr=(It>At||It<Ft)&&_.call(this);Wr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,qt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,_t),Wr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,_t)};var E=function(T,D,M){var U=[];D=D||this.pdf.internal.pageSize.width,M=M||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":U.push(Math.floor((T.y+J)/M)+1);break;case"arc":U.push(Math.floor((T.y+J-T.radius)/M)+1),U.push(Math.floor((T.y+J+T.radius)/M)+1);break;case"qct":var oe=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);U.push(Math.floor((oe.y+J)/M)+1),U.push(Math.floor((oe.y+oe.h+J)/M)+1);break;case"bct":var le=Oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);U.push(Math.floor((le.y+J)/M)+1),U.push(Math.floor((le.y+le.h+J)/M)+1);break;case"rect":U.push(Math.floor((T.y+J)/M)+1),U.push(Math.floor((T.y+T.h+J)/M)+1)}for(var ue=0;ue<U.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<U[ue];)P.call(this);return U},P=function(){var T=this.fillStyle,D=this.strokeStyle,M=this.font,U=this.lineCap,J=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=D,this.font=M,this.lineCap=U,this.lineWidth=J,this.lineJoin=oe},L=function(T,D,M){for(var U=0;U<T.length;U++)switch(T[U].type){case"bct":T[U].x2+=D,T[U].y2+=M;case"qct":T[U].x1+=D,T[U].y1+=M;case"mt":case"lt":case"arc":default:T[U].x+=D,T[U].y+=M}return T},V=function(T){return T.sort(function(D,M){return D-M})},K=function(T,D){for(var M,U,J=this.fillStyle,oe=this.strokeStyle,le=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Ve=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),at=[],Le=0;Le<Ze.length;Le++)if(Ze[Le].x!==void 0)for(var re=E.call(this,Ze[Le]),We=0;We<re.length;We+=1)at.indexOf(re[We])===-1&&at.push(re[We]);for(var _t=0;_t<at.length;_t++)for(;this.pdf.internal.getNumberOfPages()<at[_t];)P.call(this);if(V(at),this.autoPaging)for(var $e=at[0],nt=at[at.length-1],ct=$e;ct<nt+1;ct++){this.pdf.setPage(ct),this.fillStyle=J,this.strokeStyle=oe,this.lineCap=le,this.lineWidth=xe,this.lineJoin=Ve;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=ct===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=ct===1?0:At+(ct-2)*Ft;if(this.ctx.clip_path.length!==0){var kt=this.path;M=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(M,this.posX+this.margin[3],-It+Tt+this.ctx.prevPageLastElemOffset),ie.call(this,T,!0),this.path=kt}if(U=JSON.parse(JSON.stringify(ze)),this.path=L(U,this.posX+this.margin[3],-It+Tt+this.ctx.prevPageLastElemOffset),D===!1||ct===0){var Ht=(ct>$e||ct<nt)&&_.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ft,null).clip().discardPath()),ie.call(this,T,D),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=xe,ie.call(this,T,D),this.lineWidth=ue;this.path=ze},ie=function(T,D){if((T!=="stroke"||D||!x.call(this))&&(T==="stroke"||D||!p.call(this))){for(var M,U,J=[],oe=this.path,le=0;le<oe.length;le++){var ue=oe[le];switch(ue.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:ue,deltas:[],abs:[]});break;case"lt":var xe=J.length;if(oe[le-1]&&!isNaN(oe[le-1].x)&&(M=[ue.x-oe[le-1].x,ue.y-oe[le-1].y],xe>0)){for(;xe>=0;xe--)if(J[xe-1].close!==!0&&J[xe-1].begin!==!0){J[xe-1].deltas.push(M),J[xe-1].abs.push(ue);break}}break;case"bct":M=[ue.x1-oe[le-1].x,ue.y1-oe[le-1].y,ue.x2-oe[le-1].x,ue.y2-oe[le-1].y,ue.x-oe[le-1].x,ue.y-oe[le-1].y],J[J.length-1].deltas.push(M);break;case"qct":var Ve=oe[le-1].x+2/3*(ue.x1-oe[le-1].x),ze=oe[le-1].y+2/3*(ue.y1-oe[le-1].y),Ze=ue.x+2/3*(ue.x1-ue.x),at=ue.y+2/3*(ue.y1-ue.y),Le=ue.x,re=ue.y;M=[Ve-oe[le-1].x,ze-oe[le-1].y,Ze-oe[le-1].x,at-oe[le-1].y,Le-oe[le-1].x,re-oe[le-1].y],J[J.length-1].deltas.push(M);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(ue)}}U=D?null:T==="stroke"?"stroke":"fill";for(var We=!1,_t=0;_t<J.length;_t++)if(J[_t].arc)for(var $e=J[_t].abs,nt=0;nt<$e.length;nt++){var ct=$e[nt];ct.type==="arc"?A.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,D,!We):R.call(this,ct.x,ct.y),We=!0}else if(J[_t].close===!0)this.pdf.internal.out("h"),We=!1;else if(J[_t].begin!==!0){var ut=J[_t].start.x,Tt=J[_t].start.y;se.call(this,J[_t].deltas,ut,Tt),We=!0}U&&C.call(this,U),D&&B.call(this)}},ae=function(T){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,M=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-M;case"top":return T+D-M;case"hanging":return T+D-2*M;case"middle":return T+D/2-M;case"ideographic":return T;case"alphabetic":default:return T}},N=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(D,M){this.colorStops.push([D,M])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(T,D,M,U,J,oe,le,ue,xe){for(var Ve=Ee.call(this,M,U,J,oe),ze=0;ze<Ve.length;ze++){var Ze=Ve[ze];ze===0&&(xe?b.call(this,Ze.x1+T,Ze.y1+D):R.call(this,Ze.x1+T,Ze.y1+D)),me.call(this,T,D,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ue?B.call(this):C.call(this,le)},C=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(T,D){this.pdf.internal.out(t(T)+" "+r(D)+" m")},S=function(T){var D;switch(T.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var M=this.pdf.getTextDimensions(T.text),U=ae.call(this,T.y),J=N.call(this,U)-M.h,oe=this.ctx.transform.applyToPoint(new a(T.x,U)),le=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var xe,Ve,ze,Ze=this.ctx.transform.applyToRectangle(new o(T.x,U,M.w,M.h)),at=ue.applyToRectangle(new o(T.x,J,M.w,M.h)),Le=E.call(this,at),re=[],We=0;We<Le.length;We+=1)re.indexOf(Le[We])===-1&&re.push(Le[We]);if(V(re),this.autoPaging)for(var _t=re[0],$e=re[re.length-1],nt=_t;nt<$e+1;nt++){this.pdf.setPage(nt);var ct=nt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[2],At=Tt-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],It=Ft-this.margin[3],kt=nt===1?0:ut+(nt-2)*At;if(this.ctx.clip_path.length!==0){var Ht=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(xe,this.posX+this.margin[3],-1*kt+ct),ie.call(this,"fill",!0),this.path=Ht}var Ct=L([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-kt+ct+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*T.scale),ze=this.lineWidth,this.lineWidth=ze*T.scale);var qt=this.autoPaging!=="text";if(qt||Ct.y+Ct.h<=Tt){if(qt||Ct.y>=ct&&Ct.x<=Ft){var pt=qt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Ft-Ct.x)[0],Bn=L([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-kt+ct+this.ctx.prevPageLastElemOffset)[0],Gt=qt&&(nt>_t||nt<$e)&&_.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,At,null).clip().discardPath()),this.pdf.text(pt,Bn.x,Bn.y,{angle:T.angle,align:D,renderingMode:T.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else Ct.y<Tt&&(this.ctx.prevPageLastElemOffset+=Tt-Ct.y);T.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=ze)}else T.scale>=.01&&(Ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ve*T.scale),ze=this.lineWidth,this.lineWidth=ze*T.scale),this.pdf.text(T.text,oe.x+this.posX,oe.y+this.posY,{angle:T.angle,align:D,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Ve),this.lineWidth=ze)},R=function(T,D,M,U){M=M||0,U=U||0,this.pdf.internal.out(t(T+M)+" "+r(D+U)+" l")},se=function(T,D,M){return this.pdf.lines(T,D,M,null,null)},me=function(T,D,M,U,J,oe,le,ue){this.pdf.internal.out([e(i(M+T)),e(s(U+D)),e(i(J+T)),e(s(oe+D)),e(i(le+T)),e(s(ue+D)),"c"].join(" "))},Ee=function(T,D,M,U){for(var J=2*Math.PI,oe=Math.PI/2;D>M;)D-=J;var le=Math.abs(M-D);le<J&&U&&(le=J-le);for(var ue=[],xe=U?-1:1,Ve=D;le>1e-5;){var ze=Ve+xe*Math.min(le,oe);ue.push(Pe.call(this,T,Ve,ze)),le-=Math.abs(ze-Ve),Ve=ze}return ue},Pe=function(T,D,M){var U=(M-D)/2,J=T*Math.cos(U),oe=T*Math.sin(U),le=J,ue=-oe,xe=le*le+ue*ue,Ve=xe+le*J+ue*oe,ze=4/3*(Math.sqrt(2*xe*Ve)-Ve)/(le*oe-ue*J),Ze=le-ze*ue,at=ue+ze*le,Le=Ze,re=-at,We=U+D,_t=Math.cos(We),$e=Math.sin(We);return{x1:T*Math.cos(D),y1:T*Math.sin(D),x2:Ze*_t-at*$e,y2:Ze*$e+at*_t,x3:Le*_t-re*$e,y3:Le*$e+re*_t,x4:T*Math.cos(M),y4:T*Math.sin(M)}},_e=function(T){return 180*T/Math.PI},ke=function(T,D,M,U,J,oe){var le=T+.5*(M-T),ue=D+.5*(U-D),xe=J+.5*(M-J),Ve=oe+.5*(U-oe),ze=Math.min(T,J,le,xe),Ze=Math.max(T,J,le,xe),at=Math.min(D,oe,ue,Ve),Le=Math.max(D,oe,ue,Ve);return new o(ze,at,Ze-ze,Le-at)},Oe=function(T,D,M,U,J,oe,le,ue){var xe,Ve,ze,Ze,at,Le,re,We,_t,$e,nt,ct,ut,Tt,At=M-T,Ft=U-D,It=J-M,kt=oe-U,Ht=le-J,Ct=ue-oe;for(Ve=0;Ve<41;Ve++)_t=(re=(ze=T+(xe=Ve/40)*At)+xe*((at=M+xe*It)-ze))+xe*(at+xe*(J+xe*Ht-at)-re),$e=(We=(Ze=D+xe*Ft)+xe*((Le=U+xe*kt)-Ze))+xe*(Le+xe*(oe+xe*Ct-Le)-We),Ve==0?(nt=_t,ct=$e,ut=_t,Tt=$e):(nt=Math.min(nt,_t),ct=Math.min(ct,$e),ut=Math.max(ut,_t),Tt=Math.max(Tt,$e));return new o(Math.round(nt),Math.round(ct),Math.round(ut-nt),Math.round(Tt-ct))},rt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,D,M=(T=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:D}));this.prevLineDash!==M&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=M)}}})(Dt.API),function(n){var e=function(s){var a,o,c,u,l,d,g,p,x,_;for(o=[],c=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(l=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(l=((l=((l=((l=(l-(_=l%85))/85)-(x=l%85))/85)-(p=l%85))/85)-(g=l%85))/85)%85,o.push(d+33,g+33,p+33,x+33,_+33)):o.push(122);return function(E,P){for(var L=P;L>0;L--)E.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,c,u,l,d=String,g="length",p=255,x="charCodeAt",_="slice",E="replace";for(s[_](-2),s=s[_](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],u=0,l=(s+=a="uuuuu"[_](s[g]%5||5))[g];l>u;u+=5)o=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(P,L){for(var V=L;V>0;V--)P.pop()}(c,a[g]),d.fromCharCode.apply(d,c)},r=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=P1(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,a){var o=0,c=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Dt.API),function(n){n.loadFile=function(e,t,r){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(c,u,l){var d=new XMLHttpRequest,g=0,p=function(x){var _=x.length,E=[],P=String.fromCharCode;for(g=0;g<_;g+=1)E.push(P(255&x.charCodeAt(g)));return E.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?l(p(this.responseText)):l(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)}(i,s,a)}catch{}return o}(e,t,r)},n.loadImageFile=n.loadFile}(Dt.API),function(n){function e(){return(Ot.html2canvas?Promise.resolve(Ot.html2canvas):T1(()=>import("./html2canvas.esm-CBrSDip1.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Ot.DOMPurify?Promise.resolve(Ot.DOMPurify):T1(()=>import("./purify.es-C_uT9hQ1.js"),[],import.meta.url)).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var o=xn(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,l){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)l!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(c(g,l));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,l=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:l,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var p=u[g],x=p.src.find(function(_){return _.format==="truetype"});x&&c.addFont(x.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(r(a)!=="object")return this;var o=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,function(u,l){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,l).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),l=c.call(u,a,o);return s.convert(l,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,o,c){if(xn(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var l,d=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":l=1;break;case"mm":l=72/25.4;break;case"cm":l=72/2.54;break;case"in":l=72;break;case"px":l=.75;break;case"pc":case"em":l=12;break;case"ex":l=6;break;default:throw"Invalid unit: "+o}var p,x=0,_=0;if(g.hasOwnProperty(d))x=g[d][1]/l,_=g[d][0]/l;else try{x=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",_>x&&(p=_,_=x,x=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>_&&(p=_,_=x,x=p)}return{width:_,height:x,unit:o,k:l,orientation:a}},n.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(D1):null;var c=new s(o);return o.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(n){return B5=n,this.internal.events.subscribe("postPutResources",function(){T0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(T0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),M5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+B5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){T0!==void 0&&M5!==void 0&&this.internal.out("/Names <</JavaScript "+T0+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=r.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,l=[];for(s=0;s<u;s++){var d=t.internal.newObject();l.push(d);var g=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<l.length;s++)t.internal.write("(page_"+(s+1)+")"+l[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var a={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var a=r.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(Dt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,a,o){var c,u=this.decode.DCT_DECODE,l=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(d){for(var g,p=256*d.charCodeAt(4)+d.charCodeAt(5),x=d.length,_={width:0,height:0,numcomponents:1},E=4;E<x;E+=2){if(E+=p,e.indexOf(d.charCodeAt(E+1))!==-1){g=256*d.charCodeAt(E+5)+d.charCodeAt(E+6),_={width:256*d.charCodeAt(E+7)+d.charCodeAt(E+8),height:g,numcomponents:d.charCodeAt(E+9)};break}p=256*d.charCodeAt(E+2)+d.charCodeAt(E+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}l={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:r,alias:i}}return l}}(Dt.API);var yl,b0,V5,U5,j5,FW=function(){var n,e,t;function r(s){var a,o,c,u,l,d,g,p,x,_,E,P,L,V;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),x=(function(){var K,ie;for(ie=[],K=0;K<4;++K)ie.push(String.fromCharCode(this.data[this.pos++]));return ie}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},l=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*l/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),s=(d!=null?d.data:void 0)||this.imgData,P=0;0<=a?P<a:P>a;0<=a?++P:--P)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(L=0;0<=_?L<_:L>_;0<=_?++L:--L)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(E=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,E.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,E.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function l(d,g,p,x){var _,E,P,L,V,K,ie,ae,N,A,C,B,b,S,R,se,me,Ee,Pe,_e,ke,Oe=Math.ceil((u.width-d)/p),rt=Math.ceil((u.height-g)/x),T=u.width==Oe&&u.height==rt;for(S=a*Oe,B=T?o:new Uint8Array(S*rt),K=s.length,b=0,E=0;b<rt&&c<K;){switch(s[c++]){case 0:for(L=me=0;me<S;L=me+=1)B[E++]=s[c++];break;case 1:for(L=Ee=0;Ee<S;L=Ee+=1)_=s[c++],V=L<a?0:B[E-a],B[E++]=(_+V)%256;break;case 2:for(L=Pe=0;Pe<S;L=Pe+=1)_=s[c++],P=(L-L%a)/a,R=b&&B[(b-1)*S+P*a+L%a],B[E++]=(R+_)%256;break;case 3:for(L=_e=0;_e<S;L=_e+=1)_=s[c++],P=(L-L%a)/a,V=L<a?0:B[E-a],R=b&&B[(b-1)*S+P*a+L%a],B[E++]=(_+Math.floor((V+R)/2))%256;break;case 4:for(L=ke=0;ke<S;L=ke+=1)_=s[c++],P=(L-L%a)/a,V=L<a?0:B[E-a],b===0?R=se=0:(R=B[(b-1)*S+P*a+L%a],se=P&&B[(b-1)*S+(P-1)*a+L%a]),ie=V+R-se,ae=Math.abs(ie-V),A=Math.abs(ie-R),C=Math.abs(ie-se),N=ae<=A&&ae<=C?V:A<=C?R:se,B[E++]=(_+N)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!T){var D=((g+b*x)*u.width+d)*a,M=b*S;for(L=0;L<Oe;L+=1){for(var U=0;U<a;U+=1)o[D++]=B[M++];D+=(p-1)*a}}b++}}return s=dW(s),u.interlaceMethod==1?(l(0,0,8,8),l(4,0,8,8),l(0,4,4,8),l(2,0,4,4),l(0,2,2,4),l(1,0,2,2),l(0,1,1,2)):l(0,0,1,1),o},r.prototype.decodePalette=function(){var s,a,o,c,u,l,d,g,p;for(o=this.palette,l=this.transparency.indexed||[],u=new Uint8Array((l.length||0)+o.length),c=0,s=0,a=d=0,g=o.length;d<g;a=d+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(p=l[s++])!=null?p:255;return u},r.prototype.copyToImageData=function(s,a){var o,c,u,l,d,g,p,x,_,E,P;if(c=this.colors,_=null,o=this.hasAlphaChannel,this.palette.length&&(_=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),c=4,o=!0),x=(u=s.data||s).length,d=_||a,l=g=0,c===1)for(;l<x;)p=_?4*a[l/4]:g,E=d[p++],u[l++]=E,u[l++]=E,u[l++]=E,u[l++]=o?d[p++]:255,g=p;else for(;l<x;)p=_?4*a[l/4]:g,u[l++]=d[p++],u[l++]=d[p++],u[l++]=d[p++],u[l++]=o?d[p++]:255,g=p},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ot)==="[object Window]"){try{e=Ot.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var a,o,c,u,l,d,g,p;if(this.animation){for(p=[],o=l=0,d=(g=this.animation.frames).length;l<d;o=++l)a=g[o],c=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,p.push(a.image=n(c));return p}},r.prototype.renderFrame=function(s,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},r.prototype.animate=function(s){var a,o,c,u,l,d,g=this;return o=0,d=this.animation,u=d.numFrames,c=d.frames,l=d.numPlays,(a=function(){var p,x;if(p=o++%u,x=c[p],g.renderFrame(s,p),u>1&&o/u<l)return g.animation._timeout=setTimeout(a,x.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function OW(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,a=1<<(7&i)+1;n[e++],n[e++];var o=null,c=null;s&&(o=e,c=a,e+=3*a);var u=!0,l=[],d=0,g=null,p=0,x=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,x=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];d=n[e++]|n[e++]<<8,g=n[e++],!(1&_)&&(g=null),p=_>>2&7,e++;break;case 254:for(;;){if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var E=n[e++]|n[e++]<<8,P=n[e++]|n[e++]<<8,L=n[e++]|n[e++]<<8,V=n[e++]|n[e++]<<8,K=n[e++],ie=K>>6&1,ae=1<<(7&K)+1,N=o,A=c,C=!1;K>>7&&(C=!0,N=e,A=ae,e+=3*ae);var B=e;for(e++;;){var b;if(!((b=n[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}l.push({x:E,y:P,width:L,height:V,has_local_palette:C,palette_offset:N,palette_size:A,data_offset:B,data_length:e-B,transparent_index:g,interlaced:!!ie,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return x},this.frameInfo=function(S){if(S<0||S>=l.length)throw new Error("Frame index out of range.");return l[S]},this.decodeAndBlitFrameBGRA=function(S,R){var se=this.frameInfo(S),me=se.width*se.height,Ee=new Uint8Array(me);q5(n,se.data_offset,Ee,me);var Pe=se.palette_offset,_e=se.transparent_index;_e===null&&(_e=256);var ke=se.width,Oe=t-ke,rt=ke,T=4*(se.y*t+se.x),D=4*((se.y+se.height)*t+se.x),M=T,U=4*Oe;se.interlaced===!0&&(U+=4*t*7);for(var J=8,oe=0,le=Ee.length;oe<le;++oe){var ue=Ee[oe];if(rt===0&&(rt=ke,(M+=U)>=D&&(U=4*Oe+4*t*(J-1),M=T+(ke+Oe)*(J<<1),J>>=1)),ue===_e)M+=4;else{var xe=n[Pe+3*ue],Ve=n[Pe+3*ue+1],ze=n[Pe+3*ue+2];R[M++]=ze,R[M++]=Ve,R[M++]=xe,R[M++]=255}--rt}},this.decodeAndBlitFrameRGBA=function(S,R){var se=this.frameInfo(S),me=se.width*se.height,Ee=new Uint8Array(me);q5(n,se.data_offset,Ee,me);var Pe=se.palette_offset,_e=se.transparent_index;_e===null&&(_e=256);var ke=se.width,Oe=t-ke,rt=ke,T=4*(se.y*t+se.x),D=4*((se.y+se.height)*t+se.x),M=T,U=4*Oe;se.interlaced===!0&&(U+=4*t*7);for(var J=8,oe=0,le=Ee.length;oe<le;++oe){var ue=Ee[oe];if(rt===0&&(rt=ke,(M+=U)>=D&&(U=4*Oe+4*t*(J-1),M=T+(ke+Oe)*(J<<1),J>>=1)),ue===_e)M+=4;else{var xe=n[Pe+3*ue],Ve=n[Pe+3*ue+1],ze=n[Pe+3*ue+2];R[M++]=xe,R[M++]=Ve,R[M++]=ze,R[M++]=255}--rt}}}function q5(n,e,t,r){for(var i=n[e++],s=1<<i,a=s+1,o=a+1,c=i+1,u=(1<<c)-1,l=0,d=0,g=0,p=n[e++],x=new Int32Array(4096),_=null;;){for(;l<16&&p!==0;)d|=n[e++]<<l,l+=8,p===1?p=n[e++]:--p;if(l<c)break;var E=d&u;if(d>>=c,l-=c,E!==s){if(E===a)break;for(var P=E<o?E:_,L=0,V=P;V>s;)V=x[V]>>8,++L;var K=V;if(g+L+(P!==E?1:0)>r)return void Cn.log("Warning, gif stream longer than expected.");t[g++]=K;var ie=g+=L;for(P!==E&&(t[g++]=K),V=P;L--;)V=x[V],t[--ie]=255&V,V>>=8;_!==null&&o<4096&&(x[o++]=_<<8|K,o>=u+1&&c<12&&(++c,u=u<<1|1)),_=E}else o=a+1,u=(1<<(c=i+1))-1,_=null}return g!==r&&Cn.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Dg(n){var e,t,r,i,s,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),d=new Array(65535),g=new Array(65535),p=new Array(64),x=new Array(64),_=[],E=0,P=7,L=new Array(64),V=new Array(64),K=new Array(64),ie=new Array(256),ae=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],me=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ee(T,D){for(var M=0,U=0,J=new Array,oe=1;oe<=16;oe++){for(var le=1;le<=T[oe];le++)J[D[U]]=[],J[D[U]][0]=M,J[D[U]][1]=oe,U++,M++;M*=2}return J}function Pe(T){for(var D=T[0],M=T[1]-1;M>=0;)D&1<<M&&(E|=1<<P),M--,--P<0&&(E==255?(_e(255),_e(0)):_e(E),P=7,E=0)}function _e(T){_.push(T)}function ke(T){_e(T>>8&255),_e(255&T)}function Oe(T,D,M,U,J){for(var oe,le=J[0],ue=J[240],xe=function($e,nt){var ct,ut,Tt,At,Ft,It,kt,Ht,Ct,qt,pt=0;for(Ct=0;Ct<8;++Ct){ct=$e[pt],ut=$e[pt+1],Tt=$e[pt+2],At=$e[pt+3],Ft=$e[pt+4],It=$e[pt+5],kt=$e[pt+6];var Bn=ct+(Ht=$e[pt+7]),Gt=ct-Ht,Wr=ut+kt,tn=ut-kt,Tn=Tt+It,Di=Tt-It,Kt=At+Ft,Zi=At-Ft,bn=Bn+Kt,Ir=Bn-Kt,_i=Wr+Tn,un=Wr-Tn;$e[pt]=bn+_i,$e[pt+4]=bn-_i;var Nt=.707106781*(un+Ir);$e[pt+2]=Ir+Nt,$e[pt+6]=Ir-Nt;var en=.382683433*((bn=Zi+Di)-(un=tn+Gt)),Fi=.5411961*bn+en,Qn=1.306562965*un+en,Lr=.707106781*(_i=Di+tn),yi=Gt+Lr,wt=Gt-Lr;$e[pt+5]=wt+Fi,$e[pt+3]=wt-Fi,$e[pt+1]=yi+Qn,$e[pt+7]=yi-Qn,pt+=8}for(pt=0,Ct=0;Ct<8;++Ct){ct=$e[pt],ut=$e[pt+8],Tt=$e[pt+16],At=$e[pt+24],Ft=$e[pt+32],It=$e[pt+40],kt=$e[pt+48];var oi=ct+(Ht=$e[pt+56]),_r=ct-Ht,Zn=ut+kt,Yn=ut-kt,Wn=Tt+It,j=Tt-It,ee=At+Ft,Y=At-Ft,X=oi+ee,Z=oi-ee,te=Zn+Wn,ye=Zn-Wn;$e[pt]=X+te,$e[pt+32]=X-te;var Re=.707106781*(ye+Z);$e[pt+16]=Z+Re,$e[pt+48]=Z-Re;var we=.382683433*((X=Y+j)-(ye=Yn+_r)),Te=.5411961*X+we,Ne=1.306562965*ye+we,Ke=.707106781*(te=j+Yn),it=_r+Ke,mt=_r-Ke;$e[pt+40]=mt+Te,$e[pt+24]=mt-Te,$e[pt+8]=it+Ne,$e[pt+56]=it-Ne,pt++}for(Ct=0;Ct<64;++Ct)qt=$e[Ct]*nt[Ct],p[Ct]=qt>0?qt+.5|0:qt-.5|0;return p}(T,D),Ve=0;Ve<64;++Ve)x[N[Ve]]=xe[Ve];var ze=x[0]-M;M=x[0],ze==0?Pe(U[0]):(Pe(U[g[oe=32767+ze]]),Pe(d[oe]));for(var Ze=63;Ze>0&&x[Ze]==0;)Ze--;if(Ze==0)return Pe(le),M;for(var at,Le=1;Le<=Ze;){for(var re=Le;x[Le]==0&&Le<=Ze;)++Le;var We=Le-re;if(We>=16){at=We>>4;for(var _t=1;_t<=at;++_t)Pe(ue);We&=15}oe=32767+x[Le],Pe(J[(We<<4)+g[oe]]),Pe(d[oe]),Le++}return Ze!=63&&Pe(le),M}function rt(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(D){for(var M=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var J=a((M[U]*D+50)/100);J=Math.min(Math.max(J,1),255),o[N[U]]=J}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var ue=a((oe[le]*D+50)/100);ue=Math.min(Math.max(ue,1),255),c[N[le]]=ue}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ve=0,ze=0;ze<8;ze++)for(var Ze=0;Ze<8;Ze++)u[Ve]=1/(o[N[Ve]]*xe[ze]*xe[Ze]*8),l[Ve]=1/(c[N[Ve]]*xe[ze]*xe[Ze]*8),Ve++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,D){D&&rt(D),_=new Array,E=0,P=7,ke(65496),ke(65504),ke(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),ke(1),ke(1),_e(0),_e(0),function(){ke(65499),ke(132),_e(0);for(var ut=0;ut<64;ut++)_e(o[ut]);_e(1);for(var Tt=0;Tt<64;Tt++)_e(c[Tt])}(),function(ut,Tt){ke(65472),ke(17),_e(8),ke(Tt),ke(ut),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1)}(T.width,T.height),function(){ke(65476),ke(418),_e(0);for(var ut=0;ut<16;ut++)_e(A[ut+1]);for(var Tt=0;Tt<=11;Tt++)_e(C[Tt]);_e(16);for(var At=0;At<16;At++)_e(B[At+1]);for(var Ft=0;Ft<=161;Ft++)_e(b[Ft]);_e(1);for(var It=0;It<16;It++)_e(S[It+1]);for(var kt=0;kt<=11;kt++)_e(R[kt]);_e(17);for(var Ht=0;Ht<16;Ht++)_e(se[Ht+1]);for(var Ct=0;Ct<=161;Ct++)_e(me[Ct])}(),ke(65498),ke(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var M=0,U=0,J=0;E=0,P=7,this.encode.displayName="_encode_";for(var oe,le,ue,xe,Ve,ze,Ze,at,Le,re=T.data,We=T.width,_t=T.height,$e=4*We,nt=0;nt<_t;){for(oe=0;oe<$e;){for(Ve=$e*nt+oe,Ze=-1,at=0,Le=0;Le<64;Le++)ze=Ve+(at=Le>>3)*$e+(Ze=4*(7&Le)),nt+at>=_t&&(ze-=$e*(nt+1+at-_t)),oe+Ze>=$e&&(ze-=oe+Ze-$e+4),le=re[ze++],ue=re[ze++],xe=re[ze++],L[Le]=(ae[le]+ae[ue+256>>0]+ae[xe+512>>0]>>16)-128,V[Le]=(ae[le+768>>0]+ae[ue+1024>>0]+ae[xe+1280>>0]>>16)-128,K[Le]=(ae[le+1280>>0]+ae[ue+1536>>0]+ae[xe+1792>>0]>>16)-128;M=Oe(L,u,M,e,r),U=Oe(V,l,U,t,i),J=Oe(K,l,J,t,i),oe+=32}nt+=8}if(P>=0){var ct=[];ct[1]=P+1,ct[0]=(1<<P+1)-1,Pe(ct)}return ke(65497),new Uint8Array(_)},n=n||50,function(){for(var T=String.fromCharCode,D=0;D<256;D++)ie[D]=T(D)}(),e=Ee(A,C),t=Ee(S,R),r=Ee(B,b),i=Ee(se,me),function(){for(var T=1,D=2,M=1;M<=15;M++){for(var U=T;U<D;U++)g[32767+U]=M,d[32767+U]=[],d[32767+U][1]=M,d[32767+U][0]=U;for(var J=-(D-1);J<=-T;J++)g[32767+J]=M,d[32767+J]=[],d[32767+J][1]=M,d[32767+J][0]=D-1+J;T<<=1,D<<=1}}(),function(){for(var T=0;T<256;T++)ae[T]=19595*T,ae[T+256>>0]=38470*T,ae[T+512>>0]=7471*T+32768,ae[T+768>>0]=-11059*T,ae[T+1024>>0]=-21709*T,ae[T+1280>>0]=32768*T+8421375,ae[T+1536>>0]=-27439*T,ae[T+1792>>0]=-5329*T}(),rt(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Hs(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function z5(n){function e(A){if(!A)throw Error("assert :P")}function t(A,C,B){for(var b=0;4>b;b++)if(A[C+b]!=B.charCodeAt(b))return!0;return!1}function r(A,C,B,b,S){for(var R=0;R<S;R++)A[C+R]=B[b+R]}function i(A,C,B,b){for(var S=0;S<b;S++)A[C+S]=B}function s(A){return new Int32Array(A)}function a(A,C){for(var B=[],b=0;b<A;b++)B.push(new C);return B}function o(A,C){var B=[];return function b(S,R,se){for(var me=se[R],Ee=0;Ee<me&&(S.push(se.length>R+1?[]:new C),!(se.length<R+1));Ee++)b(S[Ee],R+1,se)}(B,0,A),B}var c=function(){var A=this;function C(h,m){for(var y=1<<m-1>>>0;h&y;)y>>>=1;return y?(h&y-1)+y:h}function B(h,m,y,I,O){e(!(I%y));do h[m+(I-=y)]=O;while(0<I)}function b(h,m,y,I,O){if(e(2328>=O),512>=O)var q=s(512);else if((q=s(O))==null)return 0;return function(z,H,G,Q,he,be){var Ae,ve,qe=H,Fe=1<<G,fe=s(16),de=s(16);for(e(he!=0),e(Q!=null),e(z!=null),e(0<G),ve=0;ve<he;++ve){if(15<Q[ve])return 0;++fe[Q[ve]]}if(fe[0]==he)return 0;for(de[1]=0,Ae=1;15>Ae;++Ae){if(fe[Ae]>1<<Ae)return 0;de[Ae+1]=de[Ae]+fe[Ae]}for(ve=0;ve<he;++ve)Ae=Q[ve],0<Q[ve]&&(be[de[Ae]++]=ve);if(de[15]==1)return(Q=new S).g=0,Q.value=be[0],B(z,qe,1,Fe,Q),Fe;var Ue,Ge=-1,je=Fe-1,yt=0,ht=1,Rt=1,vt=1<<G;for(ve=0,Ae=1,he=2;Ae<=G;++Ae,he<<=1){if(ht+=Rt<<=1,0>(Rt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae])(Q=new S).g=Ae,Q.value=be[ve++],B(z,qe+yt,he,vt,Q),yt=C(yt,Ae)}for(Ae=G+1,he=2;15>=Ae;++Ae,he<<=1){if(ht+=Rt<<=1,0>(Rt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae]){if(Q=new S,(yt&je)!=Ge){for(qe+=vt,Ue=1<<(Ge=Ae)-G;15>Ge&&!(0>=(Ue-=fe[Ge]));)++Ge,Ue<<=1;Fe+=vt=1<<(Ue=Ge-G),z[H+(Ge=yt&je)].g=Ue+G,z[H+Ge].value=qe-H-Ge}Q.g=Ae-G,Q.value=be[ve++],B(z,qe+(yt>>G),he,vt,Q),yt=C(yt,Ae)}}return ht!=2*de[15]-1?0:Fe}(h,m,y,I,O,q)}function S(){this.value=this.g=0}function R(){this.value=this.g=0}function se(){this.G=a(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Kr,R)}function me(h,m,y,I){e(h!=null),e(m!=null),e(2147483648>I),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=y,h.Jd=m,h.Yc=y+I,h.Zc=4<=I?y+I-4+1:y,oe(h)}function Ee(h,m){for(var y=0;0<m--;)y|=ue(h,128)<<m;return y}function Pe(h,m){var y=Ee(h,m);return le(h)?-y:y}function _e(h,m,y,I){var O,q=0;for(e(h!=null),e(m!=null),e(4294967288>I),h.Sb=I,h.Ra=0,h.u=0,h.h=0,4<I&&(I=4),O=0;O<I;++O)q+=m[y+O]<<8*O;h.Ra=q,h.bb=I,h.oa=m,h.pa=y}function ke(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Zu-8>>>0,++h.bb,h.u-=8;M(h)&&(h.h=1,h.u=0)}function Oe(h,m){if(e(0<=m),!h.h&&m<=Qu){var y=D(h)&Ju[m];return h.u+=m,ke(h),y}return h.h=1,h.u=0}function rt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(h){return h.Ra>>>(h.u&Zu-1)>>>0}function M(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Zu}function U(h,m){h.u=m,h.h=M(h)}function J(h){h.u>=Dh&&(e(h.u>=Dh),ke(h))}function oe(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function le(h){return Ee(h,1)}function ue(h,m){var y=h.Ca;0>h.b&&oe(h);var I=h.b,O=y*m>>>8,q=(h.I>>>I>O)+0;for(q?(y-=O,h.I-=O+1<<I>>>0):y=O+1,I=y,O=0;256<=I;)O+=8,I>>=8;return I=7^O+Bi[I],h.b-=I,h.Ca=(y<<I)-1,q}function xe(h,m,y){h[m+0]=y>>24&255,h[m+1]=y>>16&255,h[m+2]=y>>8&255,h[m+3]=y>>0&255}function Ve(h,m){return h[m+0]<<0|h[m+1]<<8}function ze(h,m){return Ve(h,m)|h[m+2]<<16}function Ze(h,m){return Ve(h,m)|Ve(h,m+2)<<16}function at(h,m){var y=1<<m;return e(h!=null),e(0<m),h.X=s(y),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Le(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),r(m.X,0,h.X,0,1<<m.Xa)}function re(){this.X=[],this.Xa=this.Mb=0}function We(h,m,y,I){e(y!=null),e(I!=null);var O=y[0],q=I[0];return O==0&&(O=(h*q+m/2)/m),q==0&&(q=(m*O+h/2)/h),0>=O||0>=q?0:(y[0]=O,I[0]=q,1)}function _t(h,m){return h+(1<<m)-1>>>m}function $e(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function nt(h,m){A[m]=function(y,I,O,q,z,H,G){var Q;for(Q=0;Q<z;++Q){var he=A[h](H[G+Q-1],O,q+Q);H[G+Q]=$e(y[I+Q],he)}}}function ct(){this.ud=this.hd=this.jd=0}function ut(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function Tt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function At(h,m){return Tt(h+(h-m+.5>>1))}function Ft(h,m,y){return Math.abs(m-y)-Math.abs(h-y)}function It(h,m,y,I,O,q,z){for(I=q[z-1],y=0;y<O;++y)q[z+y]=I=$e(h[m+y],I)}function kt(h,m,y,I,O){var q;for(q=0;q<y;++q){var z=h[m+q],H=z>>8&255,G=16711935&(G=(G=16711935&z)+((H<<16)+H));I[O+q]=(4278255360&z)+G>>>0}}function Ht(h,m){m.jd=h>>0&255,m.hd=h>>8&255,m.ud=h>>16&255}function Ct(h,m,y,I,O,q){var z;for(z=0;z<I;++z){var H=m[y+z],G=H>>>8,Q=H,he=255&(he=(he=H>>>16)+((h.jd<<24>>24)*(G<<24>>24)>>>5));Q=255&(Q=(Q=Q+((h.hd<<24>>24)*(G<<24>>24)>>>5))+((h.ud<<24>>24)*(he<<24>>24)>>>5)),O[q+z]=(4278255360&H)+(he<<16)+Q}}function qt(h,m,y,I,O){A[m]=function(q,z,H,G,Q,he,be,Ae,ve){for(G=be;G<Ae;++G)for(be=0;be<ve;++be)Q[he++]=O(H[I(q[z++])])},A[h]=function(q,z,H,G,Q,he,be){var Ae=8>>q.b,ve=q.Ea,qe=q.K[0],Fe=q.w;if(8>Ae)for(q=(1<<q.b)-1,Fe=(1<<Ae)-1;z<H;++z){var fe,de=0;for(fe=0;fe<ve;++fe)fe&q||(de=I(G[Q++])),he[be++]=O(qe[de&Fe]),de>>=Ae}else A["VP8LMapColor"+y](G,Q,qe,Fe,he,be,z,H,ve)}}function pt(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>16&255,I[O++]=q>>8&255,I[O++]=q>>0&255}}function Bn(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>16&255,I[O++]=q>>8&255,I[O++]=q>>0&255,I[O++]=q>>24&255}}function Gt(h,m,y,I,O){for(y=m+y;m<y;){var q=(z=h[m++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;I[O++]=q,I[O++]=z}}function Wr(h,m,y,I,O){for(y=m+y;m<y;){var q=(z=h[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;I[O++]=q,I[O++]=z}}function tn(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>0&255,I[O++]=q>>8&255,I[O++]=q>>16&255}}function Tn(h,m,y,I,O,q){if(q==0)for(y=m+y;m<y;)xe(I,((q=h[m++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),O+=32;else r(I,O,h,m,y)}function Di(h,m){A[m][0]=A[h+"0"],A[m][1]=A[h+"1"],A[m][2]=A[h+"2"],A[m][3]=A[h+"3"],A[m][4]=A[h+"4"],A[m][5]=A[h+"5"],A[m][6]=A[h+"6"],A[m][7]=A[h+"7"],A[m][8]=A[h+"8"],A[m][9]=A[h+"9"],A[m][10]=A[h+"10"],A[m][11]=A[h+"11"],A[m][12]=A[h+"12"],A[m][13]=A[h+"13"],A[m][14]=A[h+"0"],A[m][15]=A[h+"0"]}function Kt(h){return h==Rm||h==Lm||h==Hd||h==Dm}function Zi(){this.eb=[],this.size=this.A=this.fb=0}function bn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ir(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Zi,this.f.kb=new bn,this.sd=null}function _i(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function un(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function en(h,m){var y=h.T,I=m.ba.f.RGBA,O=I.eb,q=I.fb+h.ka*I.A,z=Ts[m.ba.S],H=h.y,G=h.O,Q=h.f,he=h.N,be=h.ea,Ae=h.W,ve=m.cc,qe=m.dc,Fe=m.Mc,fe=m.Nc,de=h.ka,Ue=h.ka+h.T,Ge=h.U,je=Ge+1>>1;for(de==0?z(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,O,q,null,null,Ge):(z(m.ec,m.fc,H,G,ve,qe,Fe,fe,Q,he,be,Ae,O,q-I.A,O,q,Ge),++y);de+2<Ue;de+=2)ve=Q,qe=he,Fe=be,fe=Ae,he+=h.Rc,Ae+=h.Rc,q+=2*I.A,z(H,(G+=2*h.fa)-h.fa,H,G,ve,qe,Fe,fe,Q,he,be,Ae,O,q-I.A,O,q,Ge);return G+=h.fa,h.j+Ue<h.o?(r(m.ec,m.fc,H,G,Ge),r(m.cc,m.dc,Q,he,je),r(m.Mc,m.Nc,be,Ae,je),y--):1&Ue||z(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,O,q+I.A,null,null,Ge),y}function Fi(h,m,y){var I=h.F,O=[h.J];if(I!=null){var q=h.U,z=m.ba.S,H=z==Wd||z==Hd;m=m.ba.f.RGBA;var G=[0],Q=h.ka;G[0]=h.T,h.Kb&&(Q==0?--G[0]:(--Q,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(G[0]=h.o-h.j-Q));var he=m.eb;Q=m.fb+Q*m.A,h=Ln(I,O[0],h.width,q,G,he,Q+(H?0:3),m.A),e(y==G),h&&Kt(z)&&xs(he,Q,H,q,G,m.A)}return 0}function Qn(h){var m=h.ma,y=m.ba.S,I=11>y,O=y==qd||y==zd||y==Wd||y==Cm||y==12||Kt(y);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Rh(m.Oa,h,O?11:12))return 0;if(O&&Kt(y)&&Ye(),h.da)alert("todo:use_scaling");else{if(I){if(m.Ib=Nt,h.Kb){if(y=h.U+1>>1,m.memory=s(h.U+2*y),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+y,m.Ib=en,Ye()}}else alert("todo:EmitYUV");O&&(m.Jb=Fi,I&&ge())}if(I&&!l_){for(h=0;256>h;++h)ZS[h]=89858*(h-128)+Gd>>$d,n4[h]=-22014*(h-128)+Gd,t4[h]=-45773*(h-128),e4[h]=113618*(h-128)+Gd>>$d;for(h=jh;h<Mm;++h)m=76283*(h-16)+Gd>>$d,r4[h-jh]=dn(m,255),i4[h-jh]=dn(m+8>>4,15);l_=1}return 1}function Lr(h){var m=h.ma,y=h.U,I=h.T;return e(!(1&h.ka)),0>=y||0>=I?0:(y=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,y),m.Dc+=y,1)}function yi(h){h.ma.memory=null}function wt(h,m,y,I){return Oe(h,8)!=47?0:(m[0]=Oe(h,14)+1,y[0]=Oe(h,14)+1,I[0]=Oe(h,1),Oe(h,3)!=0?0:!h.h)}function oi(h,m){if(4>h)return h+1;var y=h-2>>1;return(2+(1&h)<<y)+Oe(m,y)+1}function _r(h,m){return 120<m?m-120:1<=(y=((y=VS[m-1])>>4)*h+(8-(15&y)))?y:1;var y}function Zn(h,m,y){var I=D(y),O=h[m+=255&I].g-8;return 0<O&&(U(y,y.u+8),I=D(y),m+=h[m].value,m+=I&(1<<O)-1),U(y,y.u+h[m].g),h[m].value}function Yn(h,m,y){return y.g+=h.g,y.value+=h.value<<m>>>0,e(8>=y.g),h.g}function Wn(h,m,y){var I=h.xc;return e((m=I==0?0:h.vc[h.md*(y>>I)+(m>>I)])<h.Wb),h.Ya[m]}function j(h,m,y,I){var O=h.ab,q=h.c*m,z=h.C;m=z+m;var H=y,G=I;for(I=h.Ta,y=h.Ua;0<O--;){var Q=h.gc[O],he=z,be=m,Ae=H,ve=G,qe=(G=I,H=y,Q.Ea);switch(e(he<be),e(be<=Q.nc),Q.hc){case 2:Fd(Ae,ve,(be-he)*qe,G,H);break;case 0:var Fe=he,fe=be,de=G,Ue=H,Ge=(vt=Q).Ea;Fe==0&&(Nm(Ae,ve,null,null,1,de,Ue),It(Ae,ve+1,0,0,Ge-1,de,Ue+1),ve+=Ge,Ue+=Ge,++Fe);for(var je=1<<vt.b,yt=je-1,ht=_t(Ge,vt.b),Rt=vt.K,vt=vt.w+(Fe>>vt.b)*ht;Fe<fe;){var ln=Rt,mn=vt,an=1;for(Fh(Ae,ve,de,Ue-Ge,1,de,Ue);an<Ge;){var Jt=(an&~yt)+je;Jt>Ge&&(Jt=Ge),(0,Co[ln[mn++]>>8&15])(Ae,ve+ +an,de,Ue+an-Ge,Jt-an,de,Ue+an),an=Jt}ve+=Ge,Ue+=Ge,++Fe&yt||(vt+=ht)}be!=Q.nc&&r(G,H-qe,G,H+(be-he-1)*qe,qe);break;case 1:for(qe=Ae,fe=ve,Ge=(Ae=Q.Ea)-(Ue=Ae&~(de=(ve=1<<Q.b)-1)),Fe=_t(Ae,Q.b),je=Q.K,Q=Q.w+(he>>Q.b)*Fe;he<be;){for(yt=je,ht=Q,Rt=new ct,vt=fe+Ue,ln=fe+Ae;fe<vt;)Ht(yt[ht++],Rt),Mc(Rt,qe,fe,ve,G,H),fe+=ve,H+=ve;fe<ln&&(Ht(yt[ht++],Rt),Mc(Rt,qe,fe,Ge,G,H),fe+=Ge,H+=Ge),++he&de||(Q+=Fe)}break;case 3:if(Ae==G&&ve==H&&0<Q.b){for(fe=G,Ae=qe=H+(be-he)*qe-(Ue=(be-he)*_t(Q.Ea,Q.b)),ve=G,de=H,Fe=[],Ue=(Ge=Ue)-1;0<=Ue;--Ue)Fe[Ue]=ve[de+Ue];for(Ue=Ge-1;0<=Ue;--Ue)fe[Ae+Ue]=Fe[Ue];_s(Q,he,be,G,qe,G,H)}else _s(Q,he,be,Ae,ve,G,H)}H=I,G=y}G!=y&&r(I,y,H,G,q)}function ee(h,m){var y=h.V,I=h.Ba+h.c*h.C,O=m-h.C;if(e(m<=h.l.o),e(16>=O),0<O){var q=h.l,z=h.Ta,H=h.Ua,G=q.width;if(j(h,O,y,I),O=H=[H],e((y=h.C)<(I=m)),e(q.v<q.va),I>q.o&&(I=q.o),y<q.j){var Q=q.j-y;y=q.j,O[0]+=Q*G}if(y>=I?y=0:(O[0]+=4*q.v,q.ka=y-q.j,q.U=q.va-q.v,q.T=I-y,y=1),y){if(H=H[0],11>(y=h.ca).S){var he=y.f.RGBA,be=(I=y.S,O=q.U,q=q.T,Q=he.eb,he.A),Ae=q;for(he=he.fb+h.Ma*he.A;0<Ae--;){var ve=z,qe=H,Fe=O,fe=Q,de=he;switch(I){case jd:Vi(ve,qe,Fe,fe,de);break;case qd:Ei(ve,qe,Fe,fe,de);break;case Rm:Ei(ve,qe,Fe,fe,de),xs(fe,de,0,Fe,1,0);break;case t_:Ma(ve,qe,Fe,fe,de);break;case zd:Tn(ve,qe,Fe,fe,de,1);break;case Lm:Tn(ve,qe,Fe,fe,de,1),xs(fe,de,0,Fe,1,0);break;case Wd:Tn(ve,qe,Fe,fe,de,0);break;case Hd:Tn(ve,qe,Fe,fe,de,0),xs(fe,de,1,Fe,1,0);break;case Cm:Ro(ve,qe,Fe,fe,de);break;case Dm:Ro(ve,qe,Fe,fe,de),Rn(fe,de,Fe,1,0);break;case n_:Oa(ve,qe,Fe,fe,de);break;default:e(0)}H+=G,he+=be}h.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=y.height)}}h.C=m,e(h.C<=h.i)}function Y(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var y=h.Ya[m].G,I=h.Ya[m].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function X(h,m,y,I,O,q){if(h.Z!=0){var z=h.qd,H=h.rd;for(e(Oo[h.Z]!=null);m<y;++m)Oo[h.Z](z,H,I,O,I,O,q),z=I,H=O,O+=q;h.qd=z,h.rd=H}}function Z(h,m){var y=h.l.ma,I=y.Z==0||y.Z==1?h.l.j:h.C;if(I=h.C<I?I:h.C,e(m<=h.l.o),m>I){var O=h.l.width,q=y.ca,z=y.tb+O*I,H=h.V,G=h.Ba+h.c*I,Q=h.gc;e(h.ab==1),e(Q[0].hc==3),Od(Q[0],I,m,H,G,q,z),X(y,I,m,q,z,O)}h.C=h.Ma=m}function te(h,m,y,I,O,q,z){var H=h.$/I,G=h.$%I,Q=h.m,he=h.s,be=y+h.$,Ae=be;O=y+I*O;var ve=y+I*q,qe=280+he.ua,Fe=h.Pb?H:16777216,fe=0<he.ua?he.Wa:null,de=he.wc,Ue=be<ve?Wn(he,G,H):null;e(h.C<q),e(ve<=O);var Ge=!1;e:for(;;){for(;Ge||be<ve;){var je=0;if(H>=Fe){var yt=be-y;e((Fe=h).Pb),Fe.wd=Fe.m,Fe.xd=yt,0<Fe.s.ua&&Le(Fe.s.Wa,Fe.s.vb),Fe=H+jS}if(G&de||(Ue=Wn(he,G,H)),e(Ue!=null),Ue.Qb&&(m[be]=Ue.qb,Ge=!0),!Ge)if(J(Q),Ue.jc){je=Q,yt=m;var ht=be,Rt=Ue.pd[D(je)&Kr-1];e(Ue.jc),256>Rt.g?(U(je,je.u+Rt.g),yt[ht]=Rt.value,je=0):(U(je,je.u+Rt.g-256),e(256<=Rt.value),je=Rt.value),je==0&&(Ge=!0)}else je=Zn(Ue.G[0],Ue.H[0],Q);if(Q.h)break;if(Ge||256>je){if(!Ge)if(Ue.nd)m[be]=(Ue.qb|je<<8)>>>0;else{if(J(Q),Ge=Zn(Ue.G[1],Ue.H[1],Q),J(Q),yt=Zn(Ue.G[2],Ue.H[2],Q),ht=Zn(Ue.G[3],Ue.H[3],Q),Q.h)break;m[be]=(ht<<24|Ge<<16|je<<8|yt)>>>0}if(Ge=!1,++be,++G>=I&&(G=0,++H,z!=null&&H<=q&&!(H%16)&&z(h,H),fe!=null))for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else if(280>je){if(je=oi(je-256,Q),yt=Zn(Ue.G[4],Ue.H[4],Q),J(Q),yt=_r(I,yt=oi(yt,Q)),Q.h)break;if(be-y<yt||O-be<je)break e;for(ht=0;ht<je;++ht)m[be+ht]=m[be+ht-yt];for(be+=je,G+=je;G>=I;)G-=I,++H,z!=null&&H<=q&&!(H%16)&&z(h,H);if(e(be<=O),G&de&&(Ue=Wn(he,G,H)),fe!=null)for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else{if(!(je<qe))break e;for(Ge=je-280,e(fe!=null);Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je;je=be,e(!(Ge>>>(yt=fe).Xa)),m[je]=yt.X[Ge],Ge=!0}Ge||e(Q.h==M(Q))}if(h.Pb&&Q.h&&be<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Le(h.s.vb,h.s.Wa);else{if(Q.h)break e;z!=null&&z(h,H>q?q:H),h.a=0,h.$=be-y}return 1}return h.a=3,0}function ye(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function Re(){var h=new Yu;return h==null?null:(h.a=0,h.xb=s_,Di("Predictor","VP8LPredictors"),Di("Predictor","VP8LPredictors_C"),Di("PredictorAdd","VP8LPredictorsAdd"),Di("PredictorAdd","VP8LPredictorsAdd_C"),Fd=kt,Mc=Ct,Vi=pt,Ei=Bn,Ro=Gt,Oa=Wr,Ma=tn,A.VP8LMapColor32b=el,A.VP8LMapColor8b=Md,h)}function we(h,m,y,I,O){var q=1,z=[h],H=[m],G=I.m,Q=I.s,he=null,be=0;e:for(;;){if(y)for(;q&&Oe(G,1);){var Ae=z,ve=H,qe=I,Fe=1,fe=qe.m,de=qe.gc[qe.ab],Ue=Oe(fe,2);if(qe.Oc&1<<Ue)q=0;else{switch(qe.Oc|=1<<Ue,de.hc=Ue,de.Ea=Ae[0],de.nc=ve[0],de.K=[null],++qe.ab,e(4>=qe.ab),Ue){case 0:case 1:de.b=Oe(fe,3)+2,Fe=we(_t(de.Ea,de.b),_t(de.nc,de.b),0,qe,de.K),de.K=de.K[0];break;case 3:var Ge,je=Oe(fe,8)+1,yt=16<je?0:4<je?1:2<je?2:3;if(Ae[0]=_t(de.Ea,yt),de.b=yt,Ge=Fe=we(je,1,0,qe,de.K)){var ht,Rt=je,vt=de,ln=1<<(8>>vt.b),mn=s(ln);if(mn==null)Ge=0;else{var an=vt.K[0],Jt=vt.w;for(mn[0]=vt.K[0][0],ht=1;ht<1*Rt;++ht)mn[ht]=$e(an[Jt+ht],mn[ht-1]);for(;ht<4*ln;++ht)mn[ht]=0;vt.K[0]=null,vt.K[0]=mn,Ge=1}}Fe=Ge;break;case 2:break;default:e(0)}q=Fe}}if(z=z[0],H=H[0],q&&Oe(G,1)&&!(q=1<=(be=Oe(G,4))&&11>=be)){I.a=3;break e}var kn;if(kn=q)t:{var In,zt,yr,Ui=I,wr=z,ji=H,gn=be,as=y,os=Ui.m,Dr=Ui.s,Yr=[null],bi=1,bs=0,aa=US[gn];n:for(;;){if(as&&Oe(os,1)){var Fr=Oe(os,3)+2,ja=_t(wr,Fr),qc=_t(ji,Fr),sl=ja*qc;if(!we(ja,qc,0,Ui,Yr))break n;for(Yr=Yr[0],Dr.xc=Fr,In=0;In<sl;++In){var Mo=Yr[In]>>8&65535;Yr[In]=Mo,Mo>=bi&&(bi=Mo+1)}}if(os.h)break n;for(zt=0;5>zt;++zt){var tr=r_[zt];!zt&&0<gn&&(tr+=1<<gn),bs<tr&&(bs=tr)}var Bm=a(bi*aa,S),d_=bi,p_=a(d_,se);if(p_==null)var Yd=null;else e(65536>=d_),Yd=p_;var qh=s(bs);if(Yd==null||qh==null||Bm==null){Ui.a=1;break n}var Xd=Bm;for(In=yr=0;In<bi;++In){var js=Yd[In],al=js.G,ol=js.H,m_=0,Jd=1,g_=0;for(zt=0;5>zt;++zt){tr=r_[zt],al[zt]=Xd,ol[zt]=yr,!zt&&0<gn&&(tr+=1<<gn);i:{var Qd,Vm=tr,Zd=Ui,zh=qh,o4=Xd,c4=yr,Um=0,Bo=Zd.m,u4=Oe(Bo,1);if(i(zh,0,0,Vm),u4){var l4=Oe(Bo,1)+1,h4=Oe(Bo,1),v_=Oe(Bo,h4==0?1:8);zh[v_]=1,l4==2&&(zh[v_=Oe(Bo,8)]=1);var e0=1}else{var __=s(19),y_=Oe(Bo,4)+4;if(19<y_){Zd.a=3;var t0=0;break i}for(Qd=0;Qd<y_;++Qd)__[BS[Qd]]=Oe(Bo,3);var jm=void 0,Wh=void 0,w_=Zd,f4=__,n0=Vm,x_=zh,qm=0,Vo=w_.m,E_=8,T_=a(128,S);r:for(;b(T_,0,7,f4,19);){if(Oe(Vo,1)){var d4=2+2*Oe(Vo,3);if((jm=2+Oe(Vo,d4))>n0)break r}else jm=n0;for(Wh=0;Wh<n0&&jm--;){J(Vo);var b_=T_[0+(127&D(Vo))];U(Vo,Vo.u+b_.g);var cl=b_.value;if(16>cl)x_[Wh++]=cl,cl!=0&&(E_=cl);else{var p4=cl==16,A_=cl-16,m4=OS[A_],I_=Oe(Vo,FS[A_])+m4;if(Wh+I_>n0)break r;for(var g4=p4?E_:0;0<I_--;)x_[Wh++]=g4}}qm=1;break r}qm||(w_.a=3),e0=qm}(e0=e0&&!Bo.h)&&(Um=b(o4,c4,8,zh,Vm)),e0&&Um!=0?t0=Um:(Zd.a=3,t0=0)}if(t0==0)break n;if(Jd&&MS[zt]==1&&(Jd=Xd[yr].g==0),m_+=Xd[yr].g,yr+=t0,3>=zt){var Hh,zm=qh[0];for(Hh=1;Hh<tr;++Hh)qh[Hh]>zm&&(zm=qh[Hh]);g_+=zm}}if(js.nd=Jd,js.Qb=0,Jd&&(js.qb=(al[3][ol[3]+0].value<<24|al[1][ol[1]+0].value<<16|al[2][ol[2]+0].value)>>>0,m_==0&&256>al[0][ol[0]+0].value&&(js.Qb=1,js.qb+=al[0][ol[0]+0].value<<8)),js.jc=!js.Qb&&6>g_,js.jc){var r0,qa=js;for(r0=0;r0<Kr;++r0){var Uo=r0,jo=qa.pd[Uo],i0=qa.G[0][qa.H[0]+Uo];256<=i0.value?(jo.g=i0.g+256,jo.value=i0.value):(jo.g=0,jo.value=0,Uo>>=Yn(i0,8,jo),Uo>>=Yn(qa.G[1][qa.H[1]+Uo],16,jo),Uo>>=Yn(qa.G[2][qa.H[2]+Uo],0,jo),Yn(qa.G[3][qa.H[3]+Uo],24,jo))}}}Dr.vc=Yr,Dr.Wb=bi,Dr.Ya=Yd,Dr.yc=Bm,kn=1;break t}kn=0}if(!(q=kn)){I.a=3;break e}if(0<be){if(Q.ua=1<<be,!at(Q.Wa,be)){I.a=1,q=0;break e}}else Q.ua=0;var Wm=I,S_=z,v4=H,Hm=Wm.s,$m=Hm.xc;if(Wm.c=S_,Wm.i=v4,Hm.md=_t(S_,$m),Hm.wc=$m==0?-1:(1<<$m)-1,y){I.xb=KS;break e}if((he=s(z*H))==null){I.a=1,q=0;break e}q=(q=te(I,he,0,z,H,H,null))&&!G.h;break e}return q?(O!=null?O[0]=he:(e(he==null),e(y)),I.$=0,y||ye(Q)):ye(Q),q}function Te(h,m){var y=h.c*h.i,I=y+m+16*m;return e(h.c<=m),h.V=s(I),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+y+m,1)}function Ne(h,m){var y=h.C,I=m-y,O=h.V,q=h.Ba+h.c*y;for(e(m<=h.l.o);0<I;){var z=16<I?16:I,H=h.l.ma,G=h.l.width,Q=G*z,he=H.ca,be=H.tb+G*y,Ae=h.Ta,ve=h.Ua;j(h,z,O,q),hr(Ae,ve,he,be,Q),X(H,y,y+z,he,be,G),I-=z,O+=z*h.c,y+=z}e(y==m),h.C=h.Ma=m}function Ke(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function et(){this.Yb=function(){var h=[];return function m(y,I,O){for(var q=O[I],z=0;z<q&&(y.push(O.length>I+1?[]:0),!(O.length<I+1));z++)m(y[z],I+1,O)}(h,0,[3,11]),h}()}function lt(){this.jb=s(3),this.Wc=o([4,8],et),this.Xc=o([4,17],et)}function Lt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function nn(){this.ld=this.La=this.dd=this.tc=0}function rn(){this.Na=this.la=0}function An(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function wi(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Rs(){this.uc=this.M=this.Nb=0,this.wa=Array(new nn),this.Y=0,this.ya=Array(new wi),this.aa=0,this.l=new ts}function es(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Oi(){this.cb=this.a=0,this.sc="",this.m=new rt,this.Od=new Ke,this.Kc=new it,this.ed=new Lt,this.Qa=new mt,this.Ic=this.$c=this.Aa=0,this.D=new Rs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,rt),this.ia=0,this.pb=a(4,An),this.Pa=new lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new es),this.Hd=0,this.rb=Array(new rn),this.sb=0,this.wa=Array(new nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new wi),this.L=this.aa=0,this.gd=o([4,2],nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ts(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Hr(){var h=new Oi;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Uh||(Uh=qu)),h}function Vn(h,m,y){return h.a==0&&(h.a=m,h.sc=y,h.cb=0),0}function Ac(h,m,y){return 3<=y&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function Ic(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Vn(h,2,"null VP8Io passed to VP8GetHeaders()");var y=m.data,I=m.w,O=m.ha;if(4>O)return Vn(h,7,"Truncated header.");var q=y[I+0]|y[I+1]<<8|y[I+2]<<16,z=h.Od;if(z.Rb=!(1&q),z.td=q>>1&7,z.yd=q>>4&1,z.ub=q>>5,3<z.td)return Vn(h,3,"Incorrect keyframe parameters.");if(!z.yd)return Vn(h,4,"Frame not displayable.");I+=3,O-=3;var H=h.Kc;if(z.Rb){if(7>O)return Vn(h,7,"cannot parse picture header");if(!Ac(y,I,O))return Vn(h,3,"Bad code word");H.c=16383&(y[I+4]<<8|y[I+3]),H.Td=y[I+4]>>6,H.i=16383&(y[I+6]<<8|y[I+5]),H.Ud=y[I+6]>>6,I+=7,O-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((q=h.Pa).jb,0,255,q.jb.length),e((q=h.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,i(q.Zb,0,0,q.Zb.length),i(q.Lb,0,0,q.Lb)}if(z.ub>O)return Vn(h,7,"bad partition length");me(q=h.m,y,I,z.ub),I+=z.ub,O-=z.ub,z.Rb&&(H.Ld=le(q),H.Kd=le(q)),H=h.Qa;var G,Q=h.Pa;if(e(q!=null),e(H!=null),H.Cb=le(q),H.Cb){if(H.Bb=le(q),le(q)){for(H.Fb=le(q),G=0;4>G;++G)H.Zb[G]=le(q)?Pe(q,7):0;for(G=0;4>G;++G)H.Lb[G]=le(q)?Pe(q,6):0}if(H.Bb)for(G=0;3>G;++G)Q.jb[G]=le(q)?Ee(q,8):255}else H.Bb=0;if(q.Ka)return Vn(h,3,"cannot parse segment header");if((H=h.ed).zd=le(q),H.Tb=Ee(q,6),H.wb=Ee(q,3),H.Pc=le(q),H.Pc&&le(q)){for(Q=0;4>Q;++Q)le(q)&&(H.vd[Q]=Pe(q,6));for(Q=0;4>Q;++Q)le(q)&&(H.od[Q]=Pe(q,6))}if(h.L=H.Tb==0?0:H.zd?1:2,q.Ka)return Vn(h,3,"cannot parse filter header");var he=O;if(O=G=I,I=G+he,H=he,h.Xb=(1<<Ee(h.m,2))-1,he<3*(Q=h.Xb))y=7;else{for(G+=3*Q,H-=3*Q,he=0;he<Q;++he){var be=y[O+0]|y[O+1]<<8|y[O+2]<<16;be>H&&(be=H),me(h.Jc[+he],y,G,be),G+=be,H-=be,O+=3}me(h.Jc[+Q],y,G,H),y=G<I?0:5}if(y!=0)return Vn(h,y,"cannot parse partitions");for(y=Ee(G=h.m,7),O=le(G)?Pe(G,4):0,I=le(G)?Pe(G,4):0,H=le(G)?Pe(G,4):0,Q=le(G)?Pe(G,4):0,G=le(G)?Pe(G,4):0,he=h.Qa,be=0;4>be;++be){if(he.Cb){var Ae=he.Zb[be];he.Fb||(Ae+=y)}else{if(0<be){h.pb[be]=h.pb[0];continue}Ae=y}var ve=h.pb[be];ve.Sc[0]=Fm[dn(Ae+O,127)],ve.Sc[1]=Om[dn(Ae+0,127)],ve.Eb[0]=2*Fm[dn(Ae+I,127)],ve.Eb[1]=101581*Om[dn(Ae+H,127)]>>16,8>ve.Eb[1]&&(ve.Eb[1]=8),ve.Qc[0]=Fm[dn(Ae+Q,117)],ve.Qc[1]=Om[dn(Ae+G,127)],ve.lc=Ae+G}if(!z.Rb)return Vn(h,4,"Not a key frame.");for(le(q),z=h.Pa,y=0;4>y;++y){for(O=0;8>O;++O)for(I=0;3>I;++I)for(H=0;11>H;++H)Q=ue(q,$S[y][O][I][H])?Ee(q,8):WS[y][O][I][H],z.Wc[y][O].Yb[I][H]=Q;for(O=0;17>O;++O)z.Xc[y][O]=z.Wc[y][GS[O]]}return h.kc=le(q),h.kc&&(h.Bd=Ee(q,8)),h.cb=1}function qu(h,m,y,I,O,q,z){var H=m[O].Yb[y];for(y=0;16>O;++O){if(!ue(h,H[y+0]))return O;for(;!ue(h,H[y+1]);)if(H=m[++O].Yb[0],y=0,O==16)return 16;var G=m[O+1].Yb;if(ue(h,H[y+2])){var Q=h,he=0;if(ue(Q,(Ae=H)[(be=y)+3]))if(ue(Q,Ae[be+6])){for(H=0,be=2*(he=ue(Q,Ae[be+8]))+(Ae=ue(Q,Ae[be+9+he])),he=0,Ae=qS[be];Ae[H];++H)he+=he+ue(Q,Ae[H]);he+=3+(8<<be)}else ue(Q,Ae[be+7])?(he=7+2*ue(Q,165),he+=ue(Q,145)):he=5+ue(Q,159);else he=ue(Q,Ae[be+4])?3+ue(Q,Ae[be+5]):2;H=G[2]}else he=1,H=G[1];G=z+zS[O],0>(Q=h).b&&oe(Q);var be,Ae=Q.b,ve=(be=Q.Ca>>1)-(Q.I>>Ae)>>31;--Q.b,Q.Ca+=ve,Q.Ca|=1,Q.I-=(be+1&ve)<<Ae,q[G]=((he^ve)-ve)*I[(0<O)+0]}return 16}function Sc(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function zu(h,m){if(h==null)return 0;if(m==null)return Vn(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Ic(h,m))return 0;if(e(h.cb),m.ac==null||m.ac(m)){m.ob&&(h.L=0);var y=Kd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=m.v-y>>4,h.zb=m.j-y>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=m.o+15+y>>4,h.Hb=m.va+15+y>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var I=h.ed;for(y=0;4>y;++y){var O;if(h.Qa.Cb){var q=h.Qa.Lb[y];h.Qa.Fb||(q+=I.Tb)}else q=I.Tb;for(O=0;1>=O;++O){var z=h.gd[y][O],H=q;if(I.Pc&&(H+=I.vd[0],O&&(H+=I.od[0])),0<(H=0>H?0:63<H?63:H)){var G=H;0<I.wb&&(G=4<I.wb?G>>2:G>>1)>9-I.wb&&(G=9-I.wb),1>G&&(G=1),z.dd=G,z.tc=2*H+G,z.ld=40<=H?2:15<=H?1:0}else z.tc=0;z.La=O}}}y=0}else Vn(h,6,"Frame setup failed"),y=h.a;if(y=y==0){if(y){h.$c=0,0<h.Aa||(h.Ic=a4);e:{y=h.Ic,I=4*(G=h.za);var Q=32*G,he=G+1,be=0<h.L?G*(0<h.Aa?2:1):0,Ae=(h.Aa==2?2:1)*G;if((z=I+832+(O=3*(16*y+Kd[h.L])/2*Q)+(q=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=z)y=0;else{if(z>h.Vb){if(h.Vb=0,h.Ec=s(z),h.Fc=0,h.Ec==null){y=Vn(h,1,"no memory during frame initialization.");break e}h.Vb=z}z=h.Ec,H=h.Fc,h.Ac=z,h.Bc=H,H+=I,h.Gd=a(Q,es),h.Hd=0,h.rb=a(he+1,rn),h.sb=1,h.wa=be?a(be,nn):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=G),e(!0),h.oc=z,h.pc=H,H+=832,h.ya=a(Ae,wi),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=G),h.R=16*G,h.B=8*G,G=(Q=Kd[h.L])*h.R,Q=Q/2*h.B,h.sa=z,h.ta=H+G,h.qa=h.sa,h.ra=h.ta+16*y*h.R+Q,h.Ha=h.qa,h.Ia=h.ra+8*y*h.B+Q,h.$c=0,H+=O,h.mb=q?z:null,h.nb=q?H:null,e(H+q<=h.Fc+h.Vb),Sc(h),i(h.Ac,h.Bc,0,I),y=1}}if(y){if(m.ka=0,m.y=h.sa,m.O=h.ta,m.f=h.qa,m.N=h.ra,m.ea=h.Ha,m.Vd=h.Ia,m.fa=h.R,m.Rc=h.B,m.F=null,m.J=0,!Vd){for(y=-255;255>=y;++y)Pr[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Va[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Vh[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)il[255+y]=0>y?0:255<y?255:y;Vd=1}tl=Ca,Ba=go,Oh=Pc,Ti=pn,ys=ka,lr=Na,nl=To,Bd=Ms,Mh=Ao,Bc=Oc,Vc=bo,Lo=La,Uc=Io,rl=na,jc=Ra,Do=is,Bh=Sr,ws=Ku,Us[0]=vs,Us[1]=Nh,Us[2]=ea,Us[3]=Ch,Us[4]=$u,Us[5]=yo,Us[6]=ns,Us[7]=kc,Us[8]=xo,Us[9]=wo,Fo[0]=Zs,Fo[1]=kh,Fo[2]=Ds,Fo[3]=vo,Fo[4]=Un,Fo[5]=Hu,Fo[6]=Nc,Ua[0]=Os,Ua[1]=Wu,Ua[2]=Gu,Ua[3]=Fs,Ua[4]=fn,Ua[5]=Cc,Ua[6]=Rc,y=1}else y=0}y&&(y=function(ve,qe){for(ve.M=0;ve.M<ve.Va;++ve.M){var Fe,fe=ve.Jc[ve.M&ve.Xb],de=ve.m,Ue=ve;for(Fe=0;Fe<Ue.za;++Fe){var Ge=de,je=Ue,yt=je.Ac,ht=je.Bc+4*Fe,Rt=je.zc,vt=je.ya[je.aa+Fe];if(je.Qa.Bb?vt.$b=ue(Ge,je.Pa.jb[0])?2+ue(Ge,je.Pa.jb[2]):ue(Ge,je.Pa.jb[1]):vt.$b=0,je.kc&&(vt.Ad=ue(Ge,je.Bd)),vt.Za=!ue(Ge,145)+0,vt.Za){var ln=vt.Ob,mn=0;for(je=0;4>je;++je){var an,Jt=Rt[0+je];for(an=0;4>an;++an){Jt=HS[yt[ht+an]][Jt];for(var kn=i_[ue(Ge,Jt[0])];0<kn;)kn=i_[2*kn+ue(Ge,Jt[kn])];Jt=-kn,yt[ht+an]=Jt}r(ln,mn,yt,ht,4),mn+=4,Rt[0+je]=Jt}}else Jt=ue(Ge,156)?ue(Ge,128)?1:3:ue(Ge,163)?2:0,vt.Ob[0]=Jt,i(yt,ht,Jt,4),i(Rt,0,Jt,4);vt.Dd=ue(Ge,142)?ue(Ge,114)?ue(Ge,183)?1:3:2:0}if(Ue.m.Ka)return Vn(ve,7,"Premature end-of-partition0 encountered.");for(;ve.ja<ve.za;++ve.ja){if(Ue=fe,Ge=(de=ve).rb[de.sb-1],yt=de.rb[de.sb+de.ja],Fe=de.ya[de.aa+de.ja],ht=de.kc?Fe.Ad:0)Ge.la=yt.la=0,Fe.Za||(Ge.Na=yt.Na=0),Fe.Hc=0,Fe.Gc=0,Fe.ia=0;else{var In,zt;if(Ge=yt,yt=Ue,ht=de.Pa.Xc,Rt=de.ya[de.aa+de.ja],vt=de.pb[Rt.$b],je=Rt.ad,ln=0,mn=de.rb[de.sb-1],Jt=an=0,i(je,ln,0,384),Rt.Za)var yr=0,Ui=ht[3];else{kn=s(16);var wr=Ge.Na+mn.Na;if(wr=Uh(yt,ht[1],wr,vt.Eb,0,kn,0),Ge.Na=mn.Na=(0<wr)+0,1<wr)tl(kn,0,je,ln);else{var ji=kn[0]+3>>3;for(kn=0;256>kn;kn+=16)je[ln+kn]=ji}yr=1,Ui=ht[0]}var gn=15&Ge.la,as=15&mn.la;for(kn=0;4>kn;++kn){var os=1&as;for(ji=zt=0;4>ji;++ji)gn=gn>>1|(os=(wr=Uh(yt,Ui,wr=os+(1&gn),vt.Sc,yr,je,ln))>yr)<<7,zt=zt<<2|(3<wr?3:1<wr?2:je[ln+0]!=0),ln+=16;gn>>=4,as=as>>1|os<<7,an=(an<<8|zt)>>>0}for(Ui=gn,yr=as>>4,In=0;4>In;In+=2){for(zt=0,gn=Ge.la>>4+In,as=mn.la>>4+In,kn=0;2>kn;++kn){for(os=1&as,ji=0;2>ji;++ji)wr=os+(1&gn),gn=gn>>1|(os=0<(wr=Uh(yt,ht[2],wr,vt.Qc,0,je,ln)))<<3,zt=zt<<2|(3<wr?3:1<wr?2:je[ln+0]!=0),ln+=16;gn>>=2,as=as>>1|os<<5}Jt|=zt<<4*In,Ui|=gn<<4<<In,yr|=(240&as)<<In}Ge.la=Ui,mn.la=yr,Rt.Hc=an,Rt.Gc=Jt,Rt.ia=43690&Jt?0:vt.ia,ht=!(an|Jt)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[Fe.$b][Fe.Za],de.wa[de.Y+de.ja].La|=!ht),Ue.Ka)return Vn(ve,7,"Premature end-of-file encountered.")}if(Sc(ve),de=qe,Ue=1,Fe=(fe=ve).D,Ge=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(Fe.M=fe.M,Fe.uc=Ge,ia(fe,Fe),Ue=1,Fe=(zt=fe.D).Nb,Ge=(Jt=Kd[fe.L])*fe.R,yt=Jt/2*fe.B,kn=16*Fe*fe.R,ji=8*Fe*fe.B,ht=fe.sa,Rt=fe.ta-Ge+kn,vt=fe.qa,je=fe.ra-yt+ji,ln=fe.Ha,mn=fe.Ia-yt+ji,as=(gn=zt.M)==0,an=gn>=fe.Va-1,fe.Aa==2&&ia(fe,zt),zt.uc)for(os=(wr=fe).D.M,e(wr.D.uc),zt=wr.yb;zt<wr.Hb;++zt){yr=zt,Ui=os;var Dr=(Yr=(tr=wr).D).Nb;In=tr.R;var Yr=Yr.wa[Yr.Y+yr],bi=tr.sa,bs=tr.ta+16*Dr*In+16*yr,aa=Yr.dd,Fr=Yr.tc;if(Fr!=0)if(e(3<=Fr),tr.L==1)0<yr&&Do(bi,bs,In,Fr+4),Yr.La&&ws(bi,bs,In,Fr),0<Ui&&jc(bi,bs,In,Fr+4),Yr.La&&Bh(bi,bs,In,Fr);else{var ja=tr.B,qc=tr.qa,sl=tr.ra+8*Dr*ja+8*yr,Mo=tr.Ha,tr=tr.Ia+8*Dr*ja+8*yr;Dr=Yr.ld,0<yr&&(Bd(bi,bs,In,Fr+4,aa,Dr),Bc(qc,sl,Mo,tr,ja,Fr+4,aa,Dr)),Yr.La&&(Lo(bi,bs,In,Fr,aa,Dr),rl(qc,sl,Mo,tr,ja,Fr,aa,Dr)),0<Ui&&(nl(bi,bs,In,Fr+4,aa,Dr),Mh(qc,sl,Mo,tr,ja,Fr+4,aa,Dr)),Yr.La&&(Vc(bi,bs,In,Fr,aa,Dr),Uc(qc,sl,Mo,tr,ja,Fr,aa,Dr))}}if(fe.ia&&alert("todo:DitherRow"),de.put!=null){if(zt=16*gn,gn=16*(gn+1),as?(de.y=fe.sa,de.O=fe.ta+kn,de.f=fe.qa,de.N=fe.ra+ji,de.ea=fe.Ha,de.W=fe.Ia+ji):(zt-=Jt,de.y=ht,de.O=Rt,de.f=vt,de.N=je,de.ea=ln,de.W=mn),an||(gn-=Jt),gn>de.o&&(gn=de.o),de.F=null,de.J=null,fe.Fa!=null&&0<fe.Fa.length&&zt<gn&&(de.J=ko(fe,de,zt,gn-zt),de.F=fe.mb,de.F==null&&de.F.length==0)){Ue=Vn(fe,3,"Could not decode alpha data.");break e}zt<de.j&&(Jt=de.j-zt,zt=de.j,e(!(1&Jt)),de.O+=fe.R*Jt,de.N+=fe.B*(Jt>>1),de.W+=fe.B*(Jt>>1),de.F!=null&&(de.J+=de.width*Jt)),zt<gn&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=zt-de.j,de.U=de.va-de.v,de.T=gn-zt,Ue=de.put(de))}Fe+1!=fe.Ic||an||(r(fe.sa,fe.ta-Ge,ht,Rt+16*fe.R,Ge),r(fe.qa,fe.ra-yt,vt,je+8*fe.B,yt),r(fe.Ha,fe.Ia-yt,ln,mn+8*fe.B,yt))}if(!Ue)return Vn(ve,6,"Output aborted.")}return 1}(h,m)),m.bc!=null&&m.bc(m),y&=1}return y?(h.cb=0,y):0}function Mi(h,m,y,I,O){O=h[m+y+32*I]+(O>>3),h[m+y+32*I]=-256&O?0>O?0:255:O}function mo(h,m,y,I,O,q){Mi(h,m,0,y,I+O),Mi(h,m,1,y,I+q),Mi(h,m,2,y,I-q),Mi(h,m,3,y,I-O)}function er(h){return(20091*h>>16)+h}function xi(h,m,y,I){var O,q=0,z=s(16);for(O=0;4>O;++O){var H=h[m+0]+h[m+8],G=h[m+0]-h[m+8],Q=(35468*h[m+4]>>16)-er(h[m+12]),he=er(h[m+4])+(35468*h[m+12]>>16);z[q+0]=H+he,z[q+1]=G+Q,z[q+2]=G-Q,z[q+3]=H-he,q+=4,m++}for(O=q=0;4>O;++O)H=(h=z[q+0]+4)+z[q+8],G=h-z[q+8],Q=(35468*z[q+4]>>16)-er(z[q+12]),Mi(y,I,0,0,H+(he=er(z[q+4])+(35468*z[q+12]>>16))),Mi(y,I,1,0,G+Q),Mi(y,I,2,0,G-Q),Mi(y,I,3,0,H-he),q++,I+=32}function Na(h,m,y,I){var O=h[m+0]+4,q=35468*h[m+4]>>16,z=er(h[m+4]),H=35468*h[m+1]>>16;mo(y,I,0,O+z,h=er(h[m+1]),H),mo(y,I,1,O+q,h,H),mo(y,I,2,O-q,h,H),mo(y,I,3,O-z,h,H)}function go(h,m,y,I,O){xi(h,m,y,I),O&&xi(h,m+16,y,I+4)}function Pc(h,m,y,I){Ba(h,m+0,y,I,1),Ba(h,m+32,y,I+128,1)}function pn(h,m,y,I){var O;for(h=h[m+0]+4,O=0;4>O;++O)for(m=0;4>m;++m)Mi(y,I,m,O,h)}function ka(h,m,y,I){h[m+0]&&Ti(h,m+0,y,I),h[m+16]&&Ti(h,m+16,y,I+4),h[m+32]&&Ti(h,m+32,y,I+128),h[m+48]&&Ti(h,m+48,y,I+128+4)}function Ca(h,m,y,I){var O,q=s(16);for(O=0;4>O;++O){var z=h[m+0+O]+h[m+12+O],H=h[m+4+O]+h[m+8+O],G=h[m+4+O]-h[m+8+O],Q=h[m+0+O]-h[m+12+O];q[0+O]=z+H,q[8+O]=z-H,q[4+O]=Q+G,q[12+O]=Q-G}for(O=0;4>O;++O)z=(h=q[0+4*O]+3)+q[3+4*O],H=q[1+4*O]+q[2+4*O],G=q[1+4*O]-q[2+4*O],Q=h-q[3+4*O],y[I+0]=z+H>>3,y[I+16]=Q+G>>3,y[I+32]=z-H>>3,y[I+48]=Q-G>>3,I+=64}function Ls(h,m,y){var I,O=m-32,q=ss,z=255-h[O-1];for(I=0;I<y;++I){var H,G=q,Q=z+h[m-1];for(H=0;H<y;++H)h[m+H]=G[Q+h[O+H]];m+=32}}function Nh(h,m){Ls(h,m,4)}function Wu(h,m){Ls(h,m,8)}function kh(h,m){Ls(h,m,16)}function Ds(h,m){var y;for(y=0;16>y;++y)r(h,m+32*y,h,m-32,16)}function vo(h,m){var y;for(y=16;0<y;--y)i(h,m,h[m-1],16),m+=32}function _o(h,m,y){var I;for(I=0;16>I;++I)i(m,y+32*I,h,16)}function Zs(h,m){var y,I=16;for(y=0;16>y;++y)I+=h[m-1+32*y]+h[m+y-32];_o(I>>5,h,m)}function Un(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m-1+32*y];_o(I>>4,h,m)}function Hu(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m+y-32];_o(I>>4,h,m)}function Nc(h,m){_o(128,h,m)}function Mt(h,m,y){return h+2*m+y+2>>2}function ea(h,m){var y,I=m-32;for(I=new Uint8Array([Mt(h[I-1],h[I+0],h[I+1]),Mt(h[I+0],h[I+1],h[I+2]),Mt(h[I+1],h[I+2],h[I+3]),Mt(h[I+2],h[I+3],h[I+4])]),y=0;4>y;++y)r(h,m+32*y,I,0,I.length)}function Ch(h,m){var y=h[m-1],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96];xe(h,m+0,16843009*Mt(h[m-1-32],y,I)),xe(h,m+32,16843009*Mt(y,I,O)),xe(h,m+64,16843009*Mt(I,O,q)),xe(h,m+96,16843009*Mt(O,q,q))}function vs(h,m){var y,I=4;for(y=0;4>y;++y)I+=h[m+y-32]+h[m-1+32*y];for(I>>=3,y=0;4>y;++y)i(h,m+32*y,I,4)}function $u(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1-32],z=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+96]=Mt(I,O,h[m-1+96]),h[m+1+96]=h[m+0+64]=Mt(y,I,O),h[m+2+96]=h[m+1+64]=h[m+0+32]=Mt(q,y,I),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Mt(z,q,y),h[m+3+64]=h[m+2+32]=h[m+1+0]=Mt(H,z,q),h[m+3+32]=h[m+2+0]=Mt(G,H,z),h[m+3+0]=Mt(Q,G,H)}function ns(h,m){var y=h[m+1-32],I=h[m+2-32],O=h[m+3-32],q=h[m+4-32],z=h[m+5-32],H=h[m+6-32],G=h[m+7-32];h[m+0+0]=Mt(h[m+0-32],y,I),h[m+1+0]=h[m+0+32]=Mt(y,I,O),h[m+2+0]=h[m+1+32]=h[m+0+64]=Mt(I,O,q),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Mt(O,q,z),h[m+3+32]=h[m+2+64]=h[m+1+96]=Mt(q,z,H),h[m+3+64]=h[m+2+96]=Mt(z,H,G),h[m+3+96]=Mt(H,G,G)}function yo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1-32],z=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+0]=h[m+1+64]=q+z+1>>1,h[m+1+0]=h[m+2+64]=z+H+1>>1,h[m+2+0]=h[m+3+64]=H+G+1>>1,h[m+3+0]=G+Q+1>>1,h[m+0+96]=Mt(O,I,y),h[m+0+64]=Mt(I,y,q),h[m+0+32]=h[m+1+96]=Mt(y,q,z),h[m+1+32]=h[m+2+96]=Mt(q,z,H),h[m+2+32]=h[m+3+96]=Mt(z,H,G),h[m+3+32]=Mt(H,G,Q)}function kc(h,m){var y=h[m+0-32],I=h[m+1-32],O=h[m+2-32],q=h[m+3-32],z=h[m+4-32],H=h[m+5-32],G=h[m+6-32],Q=h[m+7-32];h[m+0+0]=y+I+1>>1,h[m+1+0]=h[m+0+64]=I+O+1>>1,h[m+2+0]=h[m+1+64]=O+q+1>>1,h[m+3+0]=h[m+2+64]=q+z+1>>1,h[m+0+32]=Mt(y,I,O),h[m+1+32]=h[m+0+96]=Mt(I,O,q),h[m+2+32]=h[m+1+96]=Mt(O,q,z),h[m+3+32]=h[m+2+96]=Mt(q,z,H),h[m+3+64]=Mt(z,H,G),h[m+3+96]=Mt(H,G,Q)}function wo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96];h[m+0+0]=y+I+1>>1,h[m+2+0]=h[m+0+32]=I+O+1>>1,h[m+2+32]=h[m+0+64]=O+q+1>>1,h[m+1+0]=Mt(y,I,O),h[m+3+0]=h[m+1+32]=Mt(I,O,q),h[m+3+32]=h[m+1+64]=Mt(O,q,q),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=q}function xo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96],z=h[m-1-32],H=h[m+0-32],G=h[m+1-32],Q=h[m+2-32];h[m+0+0]=h[m+2+32]=y+z+1>>1,h[m+0+32]=h[m+2+64]=I+y+1>>1,h[m+0+64]=h[m+2+96]=O+I+1>>1,h[m+0+96]=q+O+1>>1,h[m+3+0]=Mt(H,G,Q),h[m+2+0]=Mt(z,H,G),h[m+1+0]=h[m+3+32]=Mt(y,z,H),h[m+1+32]=h[m+3+64]=Mt(I,y,z),h[m+1+64]=h[m+3+96]=Mt(O,I,y),h[m+1+96]=Mt(q,O,I)}function Gu(h,m){var y;for(y=0;8>y;++y)r(h,m+32*y,h,m-32,8)}function Fs(h,m){var y;for(y=0;8>y;++y)i(h,m,h[m-1],8),m+=32}function rs(h,m,y){var I;for(I=0;8>I;++I)i(m,y+32*I,h,8)}function Os(h,m){var y,I=8;for(y=0;8>y;++y)I+=h[m+y-32]+h[m-1+32*y];rs(I>>4,h,m)}function Cc(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m+y-32];rs(I>>3,h,m)}function fn(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m-1+32*y];rs(I>>3,h,m)}function Rc(h,m){rs(128,h,m)}function Eo(h,m,y){var I=h[m-y],O=h[m+0],q=3*(O-I)+km[1020+h[m-2*y]-h[m+y]],z=Ud[112+(q+4>>3)];h[m-y]=ss[255+I+Ud[112+(q+3>>3)]],h[m+0]=ss[255+O-z]}function Lc(h,m,y,I){var O=h[m+0],q=h[m+y];return Es[255+h[m-2*y]-h[m-y]]>I||Es[255+q-O]>I}function Dc(h,m,y,I){return 4*Es[255+h[m-y]-h[m+0]]+Es[255+h[m-2*y]-h[m+y]]<=I}function Fc(h,m,y,I,O){var q=h[m-3*y],z=h[m-2*y],H=h[m-y],G=h[m+0],Q=h[m+y],he=h[m+2*y],be=h[m+3*y];return 4*Es[255+H-G]+Es[255+z-Q]>I?0:Es[255+h[m-4*y]-q]<=O&&Es[255+q-z]<=O&&Es[255+z-H]<=O&&Es[255+be-he]<=O&&Es[255+he-Q]<=O&&Es[255+Q-G]<=O}function Ra(h,m,y,I){var O=2*I+1;for(I=0;16>I;++I)Dc(h,m+I,y,O)&&Eo(h,m+I,y)}function is(h,m,y,I){var O=2*I+1;for(I=0;16>I;++I)Dc(h,m+I*y,1,O)&&Eo(h,m+I*y,1)}function Sr(h,m,y,I){var O;for(O=3;0<O;--O)Ra(h,m+=4*y,y,I)}function Ku(h,m,y,I){var O;for(O=3;0<O;--O)is(h,m+=4,y,I)}function ta(h,m,y,I,O,q,z,H){for(q=2*q+1;0<O--;){if(Fc(h,m,y,q,z))if(Lc(h,m,y,H))Eo(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-2*he],Ae=G[Q-he],ve=G[Q+0],qe=G[Q+he],Fe=G[Q+2*he],fe=27*(Ue=km[1020+3*(ve-Ae)+km[1020+be-qe]])+63>>7,de=18*Ue+63>>7,Ue=9*Ue+63>>7;G[Q-3*he]=ss[255+G[Q-3*he]+Ue],G[Q-2*he]=ss[255+be+de],G[Q-he]=ss[255+Ae+fe],G[Q+0]=ss[255+ve-fe],G[Q+he]=ss[255+qe-de],G[Q+2*he]=ss[255+Fe-Ue]}m+=I}}function $r(h,m,y,I,O,q,z,H){for(q=2*q+1;0<O--;){if(Fc(h,m,y,q,z))if(Lc(h,m,y,H))Eo(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-he],Ae=G[Q+0],ve=G[Q+he],qe=Ud[112+((Fe=3*(Ae-be))+4>>3)],Fe=Ud[112+(Fe+3>>3)],fe=qe+1>>1;G[Q-2*he]=ss[255+G[Q-2*he]+fe],G[Q-he]=ss[255+be+Fe],G[Q+0]=ss[255+Ae-qe],G[Q+he]=ss[255+ve-fe]}m+=I}}function To(h,m,y,I,O,q){ta(h,m,y,1,16,I,O,q)}function Ms(h,m,y,I,O,q){ta(h,m,1,y,16,I,O,q)}function bo(h,m,y,I,O,q){var z;for(z=3;0<z;--z)$r(h,m+=4*y,y,1,16,I,O,q)}function La(h,m,y,I,O,q){var z;for(z=3;0<z;--z)$r(h,m+=4,1,y,16,I,O,q)}function Ao(h,m,y,I,O,q,z,H){ta(h,m,O,1,8,q,z,H),ta(y,I,O,1,8,q,z,H)}function Oc(h,m,y,I,O,q,z,H){ta(h,m,1,O,8,q,z,H),ta(y,I,1,O,8,q,z,H)}function Io(h,m,y,I,O,q,z,H){$r(h,m+4*O,O,1,8,q,z,H),$r(y,I+4*O,O,1,8,q,z,H)}function na(h,m,y,I,O,q,z,H){$r(h,m+4,1,O,8,q,z,H),$r(y,I+4,1,O,8,q,z,H)}function Da(){this.ba=new Ir,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new un,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function So(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Fa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Po(){this.ua=0,this.Wa=new re,this.vb=new re,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new S}function Yu(){this.xb=this.a=0,this.l=new ts,this.ca=new Ir,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Po,this.ab=0,this.gc=a(4,Fa),this.Oc=0}function Bs(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ts,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ra(h,m,y,I,O,q,z){for(h=h==null?0:h[m+0],m=0;m<z;++m)O[q+m]=h+y[I+m]&255,h=O[q+m]}function No(h,m,y,I,O,q,z){var H;if(h==null)ra(null,null,y,I,O,q,z);else for(H=0;H<z;++H)O[q+H]=h[m+H]+y[I+H]&255}function ci(h,m,y,I,O,q,z){if(h==null)ra(null,null,y,I,O,q,z);else{var H,G=h[m+0],Q=G,he=G;for(H=0;H<z;++H)Q=he+(G=h[m+H])-Q,he=y[I+H]+(-256&Q?0>Q?0:255:Q)&255,Q=G,O[q+H]=he}}function ko(h,m,y,I){var O=m.width,q=m.o;if(e(h!=null&&m!=null),0>y||0>=I||y+I>q)return null;if(!h.Cc){if(h.ga==null){var z;if(h.ga=new Bs,(z=h.ga==null)||(z=m.width*m.o,e(h.Gb.length==0),h.Gb=s(z),h.Uc=0,h.Gb==null?z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,z=1),z=!z),!z){z=h.ga;var H=h.Fa,G=h.P,Q=h.qc,he=h.mb,be=h.nb,Ae=G+1,ve=Q-1,qe=z.l;if(e(H!=null&&he!=null&&m!=null),Oo[0]=null,Oo[1]=ra,Oo[2]=No,Oo[3]=ci,z.ca=he,z.tb=be,z.c=m.width,z.i=m.height,e(0<z.c&&0<z.i),1>=Q)m=0;else if(z.$a=H[G+0]>>0&3,z.Z=H[G+0]>>2&3,z.Lc=H[G+0]>>4&3,G=H[G+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||G)m=0;else if(qe.put=Lr,qe.ac=Qn,qe.bc=yi,qe.ma=z,qe.width=m.width,qe.height=m.height,qe.Da=m.Da,qe.v=m.v,qe.va=m.va,qe.j=m.j,qe.o=m.o,z.$a)e:{e(z.$a==1),m=Re();t:for(;;){if(m==null){m=0;break e}if(e(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,_e(m.m,H,Ae,ve),!we(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Y(m.s)?(z.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=Te(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=ve>=z.c*z.i;z=!m}if(z)return null;h.ga.Lc!=1?h.Ga=0:I=q-y}e(h.ga!=null),e(y+I<=q);e:{if(m=(H=h.ga).c,q=H.l.o,H.$a==0){if(Ae=h.rc,ve=h.Vc,qe=h.Fa,G=h.P+1+y*m,Q=h.mb,he=h.nb+y*m,e(G<=h.P+h.qc),H.Z!=0)for(e(Oo[H.Z]!=null),z=0;z<I;++z)Oo[H.Z](Ae,ve,qe,G,Q,he,m),Ae=Q,ve=he,he+=m,G+=m;else for(z=0;z<I;++z)r(Q,he,qe,G,m),Ae=Q,ve=he,he+=m,G+=m;h.rc=Ae,h.Vc=ve}else{if(e(H.mc!=null),m=y+I,e((z=H.mc)!=null),e(m<=z.i),z.C>=m)m=1;else if(H.ic||ge(),H.ic){H=z.V,Ae=z.Ba,ve=z.c;var Fe=z.i,fe=(qe=1,G=z.$/ve,Q=z.$%ve,he=z.m,be=z.s,z.$),de=ve*Fe,Ue=ve*m,Ge=be.wc,je=fe<Ue?Wn(be,Q,G):null;e(fe<=de),e(m<=Fe),e(Y(be));t:for(;;){for(;!he.h&&fe<Ue;){if(Q&Ge||(je=Wn(be,Q,G)),e(je!=null),J(he),256>(Fe=Zn(je.G[0],je.H[0],he)))H[Ae+fe]=Fe,++fe,++Q>=ve&&(Q=0,++G<=m&&!(G%16)&&Z(z,G));else{if(!(280>Fe)){qe=0;break t}Fe=oi(Fe-256,he);var yt,ht=Zn(je.G[4],je.H[4],he);if(J(he),!(fe>=(ht=_r(ve,ht=oi(ht,he)))&&de-fe>=Fe)){qe=0;break t}for(yt=0;yt<Fe;++yt)H[Ae+fe+yt]=H[Ae+fe+yt-ht];for(fe+=Fe,Q+=Fe;Q>=ve;)Q-=ve,++G<=m&&!(G%16)&&Z(z,G);fe<Ue&&Q&Ge&&(je=Wn(be,Q,G))}e(he.h==M(he))}Z(z,G>m?m:G);break t}!qe||he.h&&fe<de?(qe=0,z.a=he.h?5:3):z.$=fe,m=qe}else m=te(z,z.V,z.Ba,z.c,z.i,m,Ne);if(!m){I=0;break e}}y+I>=q&&(h.Cc=1),I=1}if(!I)return null;if(h.Cc&&((I=h.ga)!=null&&(I.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+y*O}function v(h,m,y,I,O,q){for(;0<O--;){var z,H=h,G=m+(y?1:0),Q=h,he=m+(y?0:3);for(z=0;z<I;++z){var be=Q[he+4*z];be!=255&&(be*=32897,H[G+4*z+0]=H[G+4*z+0]*be>>23,H[G+4*z+1]=H[G+4*z+1]*be>>23,H[G+4*z+2]=H[G+4*z+2]*be>>23)}m+=q}}function F(h,m,y,I,O){for(;0<I--;){var q;for(q=0;q<y;++q){var z=h[m+2*q+0],H=15&(Q=h[m+2*q+1]),G=4369*H,Q=(240&Q|Q>>4)*G>>16;h[m+2*q+0]=(240&z|z>>4)*G>>16&240|(15&z|z<<4)*G>>16>>4&15,h[m+2*q+1]=240&Q|H}m+=O}}function ne(h,m,y,I,O,q,z,H){var G,Q,he=255;for(Q=0;Q<O;++Q){for(G=0;G<I;++G){var be=h[m+G];q[z+4*G]=be,he&=be}m+=y,z+=H}return he!=255}function ce(h,m,y,I,O){var q;for(q=0;q<O;++q)y[I+q]=h[m+q]>>8}function ge(){xs=v,Rn=F,Ln=ne,hr=ce}function Me(h,m,y){A[h]=function(I,O,q,z,H,G,Q,he,be,Ae,ve,qe,Fe,fe,de,Ue,Ge){var je,yt=Ge-1>>1,ht=H[G+0]|Q[he+0]<<16,Rt=be[Ae+0]|ve[qe+0]<<16;e(I!=null);var vt=3*ht+Rt+131074>>2;for(m(I[O+0],255&vt,vt>>16,Fe,fe),q!=null&&(vt=3*Rt+ht+131074>>2,m(q[z+0],255&vt,vt>>16,de,Ue)),je=1;je<=yt;++je){var ln=H[G+je]|Q[he+je]<<16,mn=be[Ae+je]|ve[qe+je]<<16,an=ht+ln+Rt+mn+524296,Jt=an+2*(ln+Rt)>>3;vt=Jt+ht>>1,ht=(an=an+2*(ht+mn)>>3)+ln>>1,m(I[O+2*je-1],255&vt,vt>>16,Fe,fe+(2*je-1)*y),m(I[O+2*je-0],255&ht,ht>>16,Fe,fe+(2*je-0)*y),q!=null&&(vt=an+Rt>>1,ht=Jt+mn>>1,m(q[z+2*je-1],255&vt,vt>>16,de,Ue+(2*je-1)*y),m(q[z+2*je+0],255&ht,ht>>16,de,Ue+(2*je+0)*y)),ht=ln,Rt=mn}1&Ge||(vt=3*ht+Rt+131074>>2,m(I[O+Ge-1],255&vt,vt>>16,Fe,fe+(Ge-1)*y),q!=null&&(vt=3*Rt+ht+131074>>2,m(q[z+Ge-1],255&vt,vt>>16,de,Ue+(Ge-1)*y)))}}function Ye(){Ts[jd]=YS,Ts[qd]=a_,Ts[t_]=XS,Ts[zd]=o_,Ts[Wd]=c_,Ts[Cm]=u_,Ts[n_]=JS,Ts[Rm]=a_,Ts[Lm]=o_,Ts[Hd]=c_,Ts[Dm]=u_}function dt(h){return h&-16384?0>h?0:255:h>>QS}function f(h,m){return dt((19077*h>>8)+(26149*m>>8)-14234)}function w(h,m,y){return dt((19077*h>>8)-(6419*m>>8)-(13320*y>>8)+8708)}function k(h,m){return dt((19077*h>>8)+(33050*m>>8)-17685)}function W(h,m,y,I,O){I[O+0]=f(h,y),I[O+1]=w(h,m,y),I[O+2]=k(h,m)}function pe(h,m,y,I,O){I[O+0]=k(h,m),I[O+1]=w(h,m,y),I[O+2]=f(h,y)}function Ie(h,m,y,I,O){var q=w(h,m,y);m=q<<3&224|k(h,m)>>3,I[O+0]=248&f(h,y)|q>>5,I[O+1]=m}function Qe(h,m,y,I,O){var q=240&k(h,m)|15;I[O+0]=240&f(h,y)|w(h,m,y)>>4,I[O+1]=q}function Bt(h,m,y,I,O){I[O+0]=255,W(h,m,y,I,O+1)}function Xt(h,m,y,I,O){pe(h,m,y,I,O),I[O+3]=255}function Vt(h,m,y,I,O){W(h,m,y,I,O),I[O+3]=255}function dn(h,m){return 0>h?0:h>m?m:h}function Nn(h,m,y){A[h]=function(I,O,q,z,H,G,Q,he,be){for(var Ae=he+(-2&be)*y;he!=Ae;)m(I[O+0],q[z+0],H[G+0],Q,he),m(I[O+1],q[z+0],H[G+0],Q,he+y),O+=2,++z,++G,he+=2*y;1&be&&m(I[O+0],q[z+0],H[G+0],Q,he)}}function Vs(h,m,y){return y==0?h==0?m==0?6:5:m==0?4:0:y}function Gr(h,m,y,I,O){switch(h>>>30){case 3:Ba(m,y,I,O,0);break;case 2:lr(m,y,I,O);break;case 1:Ti(m,y,I,O)}}function ia(h,m){var y,I,O=m.M,q=m.Nb,z=h.oc,H=h.pc+40,G=h.oc,Q=h.pc+584,he=h.oc,be=h.pc+600;for(y=0;16>y;++y)z[H+32*y-1]=129;for(y=0;8>y;++y)G[Q+32*y-1]=129,he[be+32*y-1]=129;for(0<O?z[H-1-32]=G[Q-1-32]=he[be-1-32]=129:(i(z,H-32-1,127,21),i(G,Q-32-1,127,9),i(he,be-32-1,127,9)),I=0;I<h.za;++I){var Ae=m.ya[m.aa+I];if(0<I){for(y=-1;16>y;++y)r(z,H+32*y-4,z,H+32*y+12,4);for(y=-1;8>y;++y)r(G,Q+32*y-4,G,Q+32*y+4,4),r(he,be+32*y-4,he,be+32*y+4,4)}var ve=h.Gd,qe=h.Hd+I,Fe=Ae.ad,fe=Ae.Hc;if(0<O&&(r(z,H-32,ve[qe].y,0,16),r(G,Q-32,ve[qe].f,0,8),r(he,be-32,ve[qe].ea,0,8)),Ae.Za){var de=z,Ue=H-32+16;for(0<O&&(I>=h.za-1?i(de,Ue,ve[qe].y[15],4):r(de,Ue,ve[qe+1].y,0,4)),y=0;4>y;y++)de[Ue+128+y]=de[Ue+256+y]=de[Ue+384+y]=de[Ue+0+y];for(y=0;16>y;++y,fe<<=2)de=z,Ue=H+h_[y],Us[Ae.Ob[y]](de,Ue),Gr(fe,Fe,16*+y,de,Ue)}else if(de=Vs(I,O,Ae.Ob[0]),Fo[de](z,H),fe!=0)for(y=0;16>y;++y,fe<<=2)Gr(fe,Fe,16*+y,z,H+h_[y]);for(y=Ae.Gc,de=Vs(I,O,Ae.Dd),Ua[de](G,Q),Ua[de](he,be),fe=Fe,de=G,Ue=Q,255&(Ae=y>>0)&&(170&Ae?Oh(fe,256,de,Ue):ys(fe,256,de,Ue)),Ae=he,fe=be,255&(y>>=8)&&(170&y?Oh(Fe,320,Ae,fe):ys(Fe,320,Ae,fe)),O<h.Ub-1&&(r(ve[qe].y,0,z,H+480,16),r(ve[qe].f,0,G,Q+224,8),r(ve[qe].ea,0,he,be+224,8)),y=8*q*h.B,ve=h.sa,qe=h.ta+16*I+16*q*h.R,Fe=h.qa,Ae=h.ra+8*I+y,fe=h.Ha,de=h.Ia+8*I+y,y=0;16>y;++y)r(ve,qe+y*h.R,z,H+32*y,16);for(y=0;8>y;++y)r(Fe,Ae+y*h.B,G,Q+32*y,8),r(fe,de+y*h.B,he,be+32*y,8)}}function sa(h,m,y,I,O,q,z,H,G){var Q=[0],he=[0],be=0,Ae=G!=null?G.kd:0,ve=G??new So;if(h==null||12>y)return 7;ve.data=h,ve.w=m,ve.ha=y,m=[m],y=[y],ve.gb=[ve.gb];e:{var qe=m,Fe=y,fe=ve.gb;if(e(h!=null),e(Fe!=null),e(fe!=null),fe[0]=0,12<=Fe[0]&&!t(h,qe[0],"RIFF")){if(t(h,qe[0]+8,"WEBP")){fe=3;break e}var de=Ze(h,qe[0]+4);if(12>de||4294967286<de){fe=3;break e}if(Ae&&de>Fe[0]-8){fe=7;break e}fe[0]=de,qe[0]+=12,Fe[0]-=12}fe=0}if(fe!=0)return fe;for(de=0<ve.gb[0],y=y[0];;){e:{var Ue=h;Fe=m,fe=y;var Ge=Q,je=he,yt=qe=[0];if((vt=be=[be])[0]=0,8>fe[0])fe=7;else{if(!t(Ue,Fe[0],"VP8X")){if(Ze(Ue,Fe[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var ht=Ze(Ue,Fe[0]+8),Rt=1+ze(Ue,Fe[0]+12);if(2147483648<=Rt*(Ue=1+ze(Ue,Fe[0]+15))){fe=3;break e}yt!=null&&(yt[0]=ht),Ge!=null&&(Ge[0]=Rt),je!=null&&(je[0]=Ue),Fe[0]+=18,fe[0]-=18,vt[0]=1}fe=0}}if(be=be[0],qe=qe[0],fe!=0)return fe;if(Fe=!!(2&qe),!de&&be)return 3;if(q!=null&&(q[0]=!!(16&qe)),z!=null&&(z[0]=Fe),H!=null&&(H[0]=0),z=Q[0],qe=he[0],be&&Fe&&G==null){fe=0;break}if(4>y){fe=7;break}if(de&&be||!de&&!be&&!t(h,m[0],"ALPH")){y=[y],ve.na=[ve.na],ve.P=[ve.P],ve.Sa=[ve.Sa];e:{ht=h,fe=m,de=y;var vt=ve.gb;Ge=ve.na,je=ve.P,yt=ve.Sa,Rt=22,e(ht!=null),e(de!=null),Ue=fe[0];var ln=de[0];for(e(Ge!=null),e(yt!=null),Ge[0]=null,je[0]=null,yt[0]=0;;){if(fe[0]=Ue,de[0]=ln,8>ln){fe=7;break e}var mn=Ze(ht,Ue+4);if(4294967286<mn){fe=3;break e}var an=8+mn+1&-2;if(Rt+=an,0<vt&&Rt>vt){fe=3;break e}if(!t(ht,Ue,"VP8 ")||!t(ht,Ue,"VP8L")){fe=0;break e}if(ln[0]<an){fe=7;break e}t(ht,Ue,"ALPH")||(Ge[0]=ht,je[0]=Ue+8,yt[0]=mn),Ue+=an,ln-=an}}if(y=y[0],ve.na=ve.na[0],ve.P=ve.P[0],ve.Sa=ve.Sa[0],fe!=0)break}y=[y],ve.Ja=[ve.Ja],ve.xa=[ve.xa];e:if(vt=h,fe=m,de=y,Ge=ve.gb[0],je=ve.Ja,yt=ve.xa,ht=fe[0],Ue=!t(vt,ht,"VP8 "),Rt=!t(vt,ht,"VP8L"),e(vt!=null),e(de!=null),e(je!=null),e(yt!=null),8>de[0])fe=7;else{if(Ue||Rt){if(vt=Ze(vt,ht+4),12<=Ge&&vt>Ge-12){fe=3;break e}if(Ae&&vt>de[0]-8){fe=7;break e}je[0]=vt,fe[0]+=8,de[0]-=8,yt[0]=Rt}else yt[0]=5<=de[0]&&vt[ht+0]==47&&!(vt[ht+4]>>5),je[0]=de[0];fe=0}if(y=y[0],ve.Ja=ve.Ja[0],ve.xa=ve.xa[0],m=m[0],fe!=0)break;if(4294967286<ve.Ja)return 3;if(H==null||Fe||(H[0]=ve.xa?2:1),z=[z],qe=[qe],ve.xa){if(5>y){fe=7;break}H=z,Ae=qe,Fe=q,h==null||5>y?h=0:5<=y&&h[m+0]==47&&!(h[m+4]>>5)?(de=[0],vt=[0],Ge=[0],_e(je=new T,h,m,y),wt(je,de,vt,Ge)?(H!=null&&(H[0]=de[0]),Ae!=null&&(Ae[0]=vt[0]),Fe!=null&&(Fe[0]=Ge[0]),h=1):h=0):h=0}else{if(10>y){fe=7;break}H=qe,h==null||10>y||!Ac(h,m+3,y-3)?h=0:(Ae=h[m+0]|h[m+1]<<8|h[m+2]<<16,Fe=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&Ae||3<(Ae>>1&7)||!(Ae>>4&1)||Ae>>5>=ve.Ja||!Fe||!h?h=0:(z&&(z[0]=Fe),H&&(H[0]=h),h=1))}if(!h||(z=z[0],qe=qe[0],be&&(Q[0]!=z||he[0]!=qe)))return 3;G!=null&&(G[0]=ve,G.offset=m-G.w,e(4294967286>m-G.w),e(G.offset==G.ha-y));break}return fe==0||fe==7&&be&&G==null?(q!=null&&(q[0]|=ve.na!=null&&0<ve.na.length),I!=null&&(I[0]=z),O!=null&&(O[0]=qe),0):fe}function Rh(h,m,y){var I=m.width,O=m.height,q=0,z=0,H=I,G=O;if(m.Da=h!=null&&0<h.Da,m.Da&&(H=h.cd,G=h.bd,q=h.v,z=h.j,11>y||(q&=-2,z&=-2),0>q||0>z||0>=H||0>=G||q+H>I||z+G>O))return 0;if(m.v=q,m.j=z,m.va=q+H,m.o=z+G,m.U=H,m.T=G,m.da=h!=null&&0<h.da,m.da){if(!We(H,G,y=[h.ib],q=[h.hb]))return 0;m.ib=y[0],m.hb=q[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*I/4&&m.hb<3*O/4,m.Kb=0),1}function Lh(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function Xu(h,m,y,I){if(I==null||0>=h||0>=m)return 2;if(y!=null){if(y.Da){var O=y.cd,q=y.bd,z=-2&y.v,H=-2&y.j;if(0>z||0>H||0>=O||0>=q||z+O>h||H+q>m)return 2;h=O,m=q}if(y.da){if(!We(h,m,O=[y.ib],q=[y.hb]))return 2;h=O[0],m=q[0]}}I.width=h,I.height=m;e:{var G=I.width,Q=I.height;if(h=I.S,0>=G||0>=Q||!(h>=jd&&13>h))h=2;else{if(0>=I.Rd&&I.sd==null){z=q=O=m=0;var he=(H=G*f_[h])*Q;if(11>h||(q=(Q+1)/2*(m=(G+1)/2),h==12&&(z=(O=G)*Q)),(Q=s(he+2*q+z))==null){h=1;break e}I.sd=Q,11>h?((G=I.f.RGBA).eb=Q,G.fb=0,G.A=H,G.size=he):((G=I.f.kb).y=Q,G.O=0,G.fa=H,G.Fd=he,G.f=Q,G.N=0+he,G.Ab=m,G.Cd=q,G.ea=Q,G.W=0+he+q,G.Db=m,G.Ed=q,h==12&&(G.F=Q,G.J=0+he+2*q),G.Tc=z,G.lb=O)}if(m=1,O=I.S,q=I.width,z=I.height,O>=jd&&13>O)if(11>O)h=I.f.RGBA,m&=(H=Math.abs(h.A))*(z-1)+q<=h.size,m&=H>=q*f_[O],m&=h.eb!=null;else{h=I.f.kb,H=(q+1)/2,he=(z+1)/2,G=Math.abs(h.fa),Q=Math.abs(h.Ab);var be=Math.abs(h.Db),Ae=Math.abs(h.lb),ve=Ae*(z-1)+q;m&=G*(z-1)+q<=h.Fd,m&=Q*(he-1)+H<=h.Cd,m=(m&=be*(he-1)+H<=h.Ed)&G>=q&Q>=H&be>=H,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,O==12&&(m&=Ae>=q,m&=ve<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||y!=null&&y.fd&&(h=Lh(I)),h}var Kr=64,Ju=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qu=24,Zu=32,Dh=8,Bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(h){return h},A.Predictor2=function(h,m,y){return m[y+0]},A.Predictor3=function(h,m,y){return m[y+1]},A.Predictor4=function(h,m,y){return m[y-1]},A.Predictor5=function(h,m,y){return ut(ut(h,m[y+1]),m[y+0])},A.Predictor6=function(h,m,y){return ut(h,m[y-1])},A.Predictor7=function(h,m,y){return ut(h,m[y+0])},A.Predictor8=function(h,m,y){return ut(m[y-1],m[y+0])},A.Predictor9=function(h,m,y){return ut(m[y+0],m[y+1])},A.Predictor10=function(h,m,y){return ut(ut(h,m[y-1]),ut(m[y+0],m[y+1]))},A.Predictor11=function(h,m,y){var I=m[y+0];return 0>=Ft(I>>24&255,h>>24&255,(m=m[y-1])>>24&255)+Ft(I>>16&255,h>>16&255,m>>16&255)+Ft(I>>8&255,h>>8&255,m>>8&255)+Ft(255&I,255&h,255&m)?I:h},A.Predictor12=function(h,m,y){var I=m[y+0];return(Tt((h>>24&255)+(I>>24&255)-((m=m[y-1])>>24&255))<<24|Tt((h>>16&255)+(I>>16&255)-(m>>16&255))<<16|Tt((h>>8&255)+(I>>8&255)-(m>>8&255))<<8|Tt((255&h)+(255&I)-(255&m)))>>>0},A.Predictor13=function(h,m,y){var I=m[y-1];return(At((h=ut(h,m[y+0]))>>24&255,I>>24&255)<<24|At(h>>16&255,I>>16&255)<<16|At(h>>8&255,I>>8&255)<<8|At(h>>0&255,I>>0&255))>>>0};var Nm=A.PredictorAdd0;A.PredictorAdd1=It,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var Fh=A.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Fd,_s=A.ColorIndexInverseTransform,el=A.MapARGB,Od=A.VP8LColorIndexInverseTransformAlpha,Md=A.MapAlpha,Co=A.VP8LPredictorsAdd=[];Co.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Mc,Vi,Ei,Ro,Oa,Ma,tl,Ba,lr,Oh,Ti,ys,nl,Bd,Mh,Bc,Vc,Lo,Uc,rl,jc,Do,Bh,ws,xs,Rn,Ln,hr,Pr=s(511),Va=s(2041),Vh=s(225),il=s(767),Vd=0,km=Va,Ud=Vh,ss=il,Es=Pr,jd=0,qd=1,t_=2,zd=3,Wd=4,Cm=5,n_=6,Rm=7,Lm=8,Hd=9,Dm=10,FS=[2,3,7],OS=[3,3,11],r_=[280,256,256,256,40],MS=[0,1,1,1,0],BS=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],VS=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],US=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jS=8,Fm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Om=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Uh=null,qS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],zS=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],i_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],WS=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],HS=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],$S=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],GS=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fo=[],Us=[],Ua=[],KS=1,s_=2,Oo=[],Ts=[];Me("UpsampleRgbLinePair",W,3),Me("UpsampleBgrLinePair",pe,3),Me("UpsampleRgbaLinePair",Vt,4),Me("UpsampleBgraLinePair",Xt,4),Me("UpsampleArgbLinePair",Bt,4),Me("UpsampleRgba4444LinePair",Qe,2),Me("UpsampleRgb565LinePair",Ie,2);var YS=A.UpsampleRgbLinePair,XS=A.UpsampleBgrLinePair,a_=A.UpsampleRgbaLinePair,o_=A.UpsampleBgraLinePair,c_=A.UpsampleArgbLinePair,u_=A.UpsampleRgba4444LinePair,JS=A.UpsampleRgb565LinePair,$d=16,Gd=1<<$d-1,jh=-227,Mm=482,QS=6,l_=0,ZS=s(256),e4=s(256),t4=s(256),n4=s(256),r4=s(Mm-jh),i4=s(Mm-jh);Nn("YuvToRgbRow",W,3),Nn("YuvToBgrRow",pe,3),Nn("YuvToRgbaRow",Vt,4),Nn("YuvToBgraRow",Xt,4),Nn("YuvToArgbRow",Bt,4),Nn("YuvToRgba4444Row",Qe,2),Nn("YuvToRgb565Row",Ie,2);var h_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Kd=[0,2,8],s4=[8,7,6,4,4,2,2,2,1,1,1,1],a4=1;this.WebPDecodeRGBA=function(h,m,y,I,O){var q=qd,z=new Da,H=new Ir;z.ba=H,H.S=q,H.width=[H.width],H.height=[H.height];var G=H.width,Q=H.height,he=new _i;if(he==null||h==null)var be=2;else e(he!=null),be=sa(h,m,y,he.width,he.height,he.Pd,he.Qd,he.format,null);if(be!=0?G=0:(G!=null&&(G[0]=he.width[0]),Q!=null&&(Q[0]=he.height[0]),G=1),G){H.width=H.width[0],H.height=H.height[0],I!=null&&(I[0]=H.width),O!=null&&(O[0]=H.height);e:{if(I=new ts,(O=new So).data=h,O.w=m,O.ha=y,O.kd=1,m=[0],e(O!=null),((h=sa(O.data,O.w,O.ha,null,null,null,m,null,O))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(z!=null),I.data=O.data,I.w=O.w+O.offset,I.ha=O.ha-O.offset,I.put=Lr,I.ac=Qn,I.bc=yi,I.ma=z,O.xa){if((h=Re())==null){z=1;break e}if(function(Ae,ve){var qe=[0],Fe=[0],fe=[0];t:for(;;){if(Ae==null)return 0;if(ve==null)return Ae.a=2,0;if(Ae.l=ve,Ae.a=0,_e(Ae.m,ve.data,ve.w,ve.ha),!wt(Ae.m,qe,Fe,fe)){Ae.a=3;break t}if(Ae.xb=s_,ve.width=qe[0],ve.height=Fe[0],!we(qe[0],Fe[0],1,Ae,null))break t;return 1}return e(Ae.a!=0),0}(h,I)){if(I=(m=Xu(I.width,I.height,z.Oa,z.ba))==0){t:{I=h;n:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((y=I.l)!=null),e((O=y.ma)!=null),I.xb!=0){if(I.ca=O.ba,I.tb=O.tb,e(I.ca!=null),!Rh(O.Oa,y,zd)){I.a=2;break n}if(!Te(I,y.width)||y.da)break n;if((y.da||Kt(I.ca.S))&&ge(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ge()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!at(I.s.vb,I.s.Wa.Xa)){I.a=1;break n}I.xb=0}if(!te(I,I.V,I.Ba,I.c,I.i,y.o,ee))break n;O.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(m=h.a)}else m=h.a}else{if((h=new Hr)==null){z=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,Ic(h,I)){if((m=Xu(I.width,I.height,z.Oa,z.ba))==0){if(h.Aa=0,y=z.Oa,e((O=h)!=null),y!=null){if(0<(G=0>(G=y.Md)?0:100<G?255:255*G/100)){for(Q=he=0;4>Q;++Q)12>(be=O.pb[Q]).lc&&(be.ia=G*s4[0>be.lc?0:be.lc]>>3),he|=be.ia;he&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=y.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}zu(h,I)||(m=h.a)}}else m=h.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=Lh(z.ba))}z=m}q=z!=0?null:11>q?H.f.RGBA.eb:H.f.kb.y}else q=null;return q};var f_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,C){for(var B="",b=0;b<4;b++)B+=String.fromCharCode(A[C++]);return B}function l(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16)>>>0}function d(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16|A[C+3]<<24)>>>0}new c;var g=[0],p=[0],x=[],_=new c,E=n,P=function(A,C){var B={},b=0,S=!1,R=0,se=0;if(B.frames=[],!function(D,M,U,J){for(var oe=0;oe<J;oe++)if(D[M+oe]!=U.charCodeAt(oe))return!0;return!1}(A,C,"RIFF",4)){var me,Ee;for(d(A,C+=4),C+=8;C<A.length;){var Pe=u(A,C),_e=d(A,C+=4);C+=4;var ke=_e+(1&_e);switch(Pe){case"VP8 ":case"VP8L":B.frames[b]===void 0&&(B.frames[b]={}),(T=B.frames[b]).src_off=S?se:C-8,T.src_size=R+_e+8,b++,S&&(S=!1,R=0,se=0);break;case"VP8X":(T=B.header={}).feature_flags=A[C];var Oe=C+4;T.canvas_width=1+l(A,Oe),Oe+=3,T.canvas_height=1+l(A,Oe),Oe+=3;break;case"ALPH":S=!0,R=ke+8,se=C-8;break;case"ANIM":(T=B.header).bgcolor=d(A,C),Oe=C+4,T.loop_count=(me=A)[(Ee=Oe)+0]<<0|me[Ee+1]<<8,Oe+=2;break;case"ANMF":var rt,T;(T=B.frames[b]={}).offset_x=2*l(A,C),C+=3,T.offset_y=2*l(A,C),C+=3,T.width=1+l(A,C),C+=3,T.height=1+l(A,C),C+=3,T.duration=l(A,C),C+=3,rt=A[C++],T.dispose=1&rt,T.blend=rt>>1&1}Pe!="ANMF"&&(C+=ke)}return B}}(E,0);P.response=E,P.rgbaoutput=!0,P.dataurl=!1;var L=P.header?P.header:null,V=P.frames?P.frames:null;if(L){L.loop_counter=L.loop_count,g=[L.canvas_height],p=[L.canvas_width];for(var K=0;K<V.length&&V[K].blend!=0;K++);}var ie=V[0],ae=_.WebPDecodeRGBA(E,ie.src_off,ie.src_size,p,g);ie.rgba=ae,ie.imgwidth=p[0],ie.imgheight=g[0];for(var N=0;N<p[0]*g[0]*4;N++)x[N]=ae[N];return this.width=p,this.height=g,this.data=x,this}(function(n){var e=function(){return typeof P1=="function"},t=function(g,p,x,_){var E=4,P=a;switch(_){case n.image_compression.FAST:E=1,P=s;break;case n.image_compression.MEDIUM:E=6,P=o;break;case n.image_compression.SLOW:E=9,P=c}g=r(g,p,x,P);var L=P1(g,{level:E});return n.__addimage__.arrayBufferToBinaryString(L)},r=function(g,p,x,_){for(var E,P,L,V=g.length/p,K=new Uint8Array(g.length+V),ie=l(),ae=0;ae<V;ae+=1){if(L=ae*p,E=g.subarray(L,L+p),_)K.set(_(E,x,P),L+ae);else{for(var N,A=ie.length,C=[];N<A;N+=1)C[N]=ie[N](E,x,P);var B=d(C.concat());K.set(C[B],L+ae)}P=E}return K},i=function(g){var p=Array.apply([],g);return p.unshift(0),p},s=function(g,p){var x,_=[],E=g.length;_[0]=1;for(var P=0;P<E;P+=1)x=g[P-p]||0,_[P+1]=g[P]-x+256&255;return _},a=function(g,p,x){var _,E=[],P=g.length;E[0]=2;for(var L=0;L<P;L+=1)_=x&&x[L]||0,E[L+1]=g[L]-_+256&255;return E},o=function(g,p,x){var _,E,P=[],L=g.length;P[0]=3;for(var V=0;V<L;V+=1)_=g[V-p]||0,E=x&&x[V]||0,P[V+1]=g[V]+256-(_+E>>>1)&255;return P},c=function(g,p,x){var _,E,P,L,V=[],K=g.length;V[0]=4;for(var ie=0;ie<K;ie+=1)_=g[ie-p]||0,E=x&&x[ie]||0,P=x&&x[ie-p]||0,L=u(_,E,P),V[ie+1]=g[ie]-L+256&255;return V},u=function(g,p,x){if(g===p&&p===x)return g;var _=Math.abs(p-x),E=Math.abs(g-x),P=Math.abs(g+p-x-x);return _<=E&&_<=P?g:E<=P?p:x},l=function(){return[i,s,a,o,c]},d=function(g){var p=g.map(function(x){return x.reduce(function(_,E){return _+Math.abs(E)},0)});return p.indexOf(Math.min.apply(null,p))};n.processPNG=function(g,p,x,_){var E,P,L,V,K,ie,ae,N,A,C,B,b,S,R,se,me=this.decode.FLATE_DECODE,Ee="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(L=new FW(g)).imgData,P=L.bits,E=L.colorSpace,K=L.colors,[4,6].indexOf(L.colorType)!==-1){if(L.bits===8){A=(N=L.pixelBitlength==32?new Uint32Array(L.decodePixels().buffer):L.pixelBitlength==16?new Uint16Array(L.decodePixels().buffer):new Uint8Array(L.decodePixels().buffer)).length,B=new Uint8Array(A*L.colors),C=new Uint8Array(A);var Pe,_e=L.pixelBitlength-L.bits;for(R=0,se=0;R<A;R++){for(S=N[R],Pe=0;Pe<_e;)B[se++]=S>>>Pe&255,Pe+=L.bits;C[R]=S>>>Pe&255}}if(L.bits===16){A=(N=new Uint32Array(L.decodePixels().buffer)).length,B=new Uint8Array(A*(32/L.pixelBitlength)*L.colors),C=new Uint8Array(A*(32/L.pixelBitlength)),b=L.colors>1,R=0,se=0;for(var ke=0;R<A;)S=N[R++],B[se++]=S>>>0&255,b&&(B[se++]=S>>>16&255,S=N[R++],B[se++]=S>>>0&255),C[ke++]=S>>>16&255;P=8}_!==n.image_compression.NONE&&e()?(g=t(B,L.width*L.colors,L.colors,_),ae=t(C,L.width,1,_)):(g=B,ae=C,me=void 0)}if(L.colorType===3&&(E=this.color_spaces.INDEXED,ie=L.palette,L.transparency.indexed)){var Oe=L.transparency.indexed,rt=0;for(R=0,A=Oe.length;R<A;++R)rt+=Oe[R];if((rt/=255)===A-1&&Oe.indexOf(0)!==-1)V=[Oe.indexOf(0)];else if(rt!==A){for(N=L.decodePixels(),C=new Uint8Array(N.length),R=0,A=N.length;R<A;R++)C[R]=Oe[N[R]];ae=t(C,L.width,1)}}var T=function(D){var M;switch(D){case n.image_compression.FAST:M=11;break;case n.image_compression.MEDIUM:M=13;break;case n.image_compression.SLOW:M=14;break;default:M=12}return M}(_);return me===this.decode.FLATE_DECODE&&(Ee="/Predictor "+T+" "),Ee+="/Colors "+K+" /BitsPerComponent "+P+" /Columns "+L.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(ae&&this.__addimage__.isArrayBuffer(ae)||this.__addimage__.isArrayBufferView(ae))&&(ae=this.__addimage__.arrayBufferToBinaryString(ae)),{alias:x,data:g,index:p,filter:me,decodeParameters:Ee,transparency:V,palette:ie,sMask:ae,predictor:T,width:L.width,height:L.height,bitsPerComponent:P,colorSpace:E}}}})(Dt.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new OW(e),a=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},l=new Dg(100).encode(u,100);return n.processJPEG.call(this,l,t,r,i)},n.processGIF87A=n.processGIF89A}(Dt.API),Hs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Hs.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Cn.log("bit decode error:"+t)}},Hs.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Hs.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*i*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Hs.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},Hs.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,l=r*this.width*4+4*i;this.data[l]=c,this.data[l+1]=o,this.data[l+2]=a,this.data[l+3]=u}this.pos+=n}},Hs.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,l=i*this.width*4+4*s;this.data[l]=u,this.data[l+1]=c,this.data[l+2]=o,this.data[l+3]=255}this.pos+=n}},Hs.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Hs.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=a}},Hs.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new Hs(e,!1),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Dg(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(Dt.API),z5.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new z5(e),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Dg(100).encode(c,100);return n.processJPEG.call(this,u,t,r,i)}}(Dt.API),Dt.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var l=r[u],d=r[u+1],g=r[u+2],p=r[u+3];s[o++]=l,s[o++]=d,s[o++]=g,a[c++]=p}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Dt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yl=Dt.API,b0=yl.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,l=u.fof?u.fof:1,d=e.doKerning!==!1,g=0,p=n.length,x=0,_=o[0]||c,E=[];for(t=0;t<p;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+a*(1e3/s)||0)/1e3):(g=d&&xn(u[r])==="object"&&!isNaN(parseInt(u[r][x],10))?u[r][x]/l:0,E.push((o[r]||_)/c+g)),x=r;return E},V5=yl.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return yl.processArabic&&(n=yl.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:b0.apply(this,arguments).reduce(function(s,a){return s+a},0)},U5=function(n,e,t,r){for(var i=[],s=0,a=n.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(n.slice(0,s));var c=s;for(o=0;s!==a;)o+e[s]>r&&(i.push(n.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&i.push(n.slice(c,s)),i},j5=function(n,e,t){t||(t={});var r,i,s,a,o,c,u,l=[],d=[l],g=t.textIndent||0,p=0,x=0,_=n.split(" "),E=b0.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),L=[];_.map(function(K){(K=K.split(/\s*\n/)).length>1?L=L.concat(K.map(function(ie,ae){return(ae&&ie.length?`
`:"")+ie})):L.push(K[0])}),_=L,c=V5.apply(this,[P,t])}for(s=0,a=_.length;s<a;s++){var V=0;if(r=_[s],c&&r[0]==`
`&&(r=r.substr(1),V=1),g+p+(x=(i=b0.apply(this,[r,t])).reduce(function(K,ie){return K+ie},0))>e||V){if(x>e){for(o=U5.apply(this,[r,i,e-(g+p),e]),l.push(o.shift()),l=[o.pop()];o.length;)d.push([o.shift()]);x=i.slice(r.length-(l[0]?l[0].length:0)).reduce(function(K,ie){return K+ie},0)}else l=[r];d.push(l),g=x+c,p=E}else l.push(r),g+=p+x,p=E}return u=c?function(K,ie){return(ie?P:"")+K.join(" ")}:function(K){return K.join(" ")},d.map(u)},yl.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(l){if(l.widths&&l.kerning)return{widths:l.widths,kerning:l.kerning};var d=this.internal.getFont(l.fontName,l.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=r.length;o<c;o++)u=u.concat(j5.apply(this,[r[o],a,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},a=n.__fontmetrics__.compress=function(d){var g,p,x,_,E=["{"];for(var P in d){if(g=d[P],isNaN(parseInt(P,10))?p="'"+P+"'":(P=parseInt(P,10),p=(p=s(P).slice(2)).slice(0,-1)+r[p.slice(-1)]),typeof g=="number")g<0?(x=s(g).slice(3),_="-"):(x=s(g).slice(2),_=""),x=_+x.slice(0,-1)+r[x.slice(-1)];else{if(xn(g)!=="object")throw new Error("Don't know what to do with value type "+xn(g)+".");x=a(g)}E.push(p+x)}return E.push("}"),E.join("")},o=n.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,x,_,E={},P=1,L=E,V=[],K="",ie="",ae=d.length-1,N=1;N<ae;N+=1)(_=d[N])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(V.push([L,x]),L={},x=void 0):_=="}"?((p=V.pop())[0][p[1]]=L,x=void 0,L=p[0]):_=="-"?P=-1:x===void 0?t.hasOwnProperty(_)?(K+=t[_],x=parseInt(K,16)*P,P=1,K=""):K+=_:t.hasOwnProperty(_)?(ie+=t[_],L[x]=parseInt(ie,16)*P,P=1,x=void 0,ie=""):ie+=_;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},l={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(d){var g=d.font,p=l.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var x=u.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(Dt.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Sf(o)),a.metadata=n.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,r)}}])}(Dt),function(n){function e(){return(Ot.canvg?Promise.resolve(Ot.canvg):T1(()=>import("./index.es-BuLZNbG9.js"),[],import.meta.url)).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Dt.API.addSvgAsImage=function(t,r,i,s,a,o,c,u){if(isNaN(r)||isNaN(i))throw Cn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Cn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=s,l.height=a;var d=l.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,l.width,l.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(x){return x.fromString(d,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),r,i,s,a,c,u)})}}(),Dt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},Dt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,l=0,d=0;function g(x,_){var E,P=!1;for(E=0;E<x.length;E+=1)x[E]===_&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var p=o.length;for(d=0;d<p;d+=1)t[o[d]].value=t[o[d]].defaultValue,t[o[d]].explicitSet=!1}if(xn(n)==="object"){for(i in n)if(s=n[i],g(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&g(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(l=0;l<s[u].length;l+=1)typeof s[u][l]!="number"&&(r=!1);r===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,_=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?_.push("/"+x+" /"+t[x].value):_.push("/"+x+" "+t[x].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],l=[""],d=0,g=s.length;d<g;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return l.join("");o=o.toString(16),l.push(u[4-o.length],o)}return l.join("")},r=function(s){var a,o,c,u,l,d,g;for(l=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,g=(o=Object.keys(s).sort(function(p,x){return p-x})).length;d<g;d++)a=o[d],c.length>=100&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),l+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",x=0;x<g.length;x++)p+=String.fromCharCode(g[x]);var _=u();l({data:p,addLength1:!0,objectId:_}),c("endobj");var E=u();l({data:r(o.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var P=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Sl(o.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var L=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Sl(o.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+n.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+Sl(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+L+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof n.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,g="",p=0;p<d.length;p++)g+=String.fromCharCode(d[p]);var x=u();l({data:g,addLength1:!0,objectId:x}),c("endobj");var _=u();l({data:r(o.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var E=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Sl(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var P=0;P<o.metadata.hmtx.widths.length;P++)o.metadata.hmtx.widths[P]=parseInt(o.metadata.hmtx.widths[P]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Sl(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",c=s.x,u=s.y,l=s.options||{},d=s.mutex||{},g=d.pdfEscape,p=d.activeFontKey,x=d.fonts,_=p,E="",P=0,L="",V=x[_].encoding;if(x[_].encoding!=="Identity-H")return{text:o,x:c,y:u,options:l,mutex:d};for(L=o,_=p,Array.isArray(o)&&(L=o[0]),P=0;P<L.length;P+=1)x[_].metadata.hasOwnProperty("cmap")&&(a=x[_].metadata.cmap.unicode.codeMap[L[P].charCodeAt(0)]),a||L[P].charCodeAt(0)<256&&x[_].metadata.hasOwnProperty("Unicode")?E+=L[P]:E+="";var K="";return parseInt(_.slice(1))<14||V==="WinAnsiEncoding"?K=g(E,_).split("").map(function(ie){return ie.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(K=t(E,x[_])),d.isHex=!0,{text:K,x:c,y:u,options:l,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},c,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Dt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,a,o,c,u,l,d=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,V=0;this.__bidiEngine__={};var K=function(b){var S=b.charCodeAt(),R=S>>8,se=_[R];return se!==void 0?d[256*se+(255&S)]:R===252||R===253?"AL":P.test(R)?"L":R===8?"R":"N"},ie=function(b){for(var S,R=0;R<b.length;R++){if((S=K(b.charAt(R)))==="L")return!1;if(S==="R")return!0}return!1},ae=function(b,S,R,se){var me,Ee,Pe,_e,ke=S[se];switch(ke){case"L":case"R":L=!1;break;case"N":case"AN":break;case"EN":L&&(ke="AN");break;case"AL":L=!0,ke="R";break;case"WS":ke="N";break;case"CS":se<1||se+1>=S.length||(me=R[se-1])!=="EN"&&me!=="AN"||(Ee=S[se+1])!=="EN"&&Ee!=="AN"?ke="N":L&&(Ee="AN"),ke=Ee===me?Ee:"N";break;case"ES":ke=(me=se>0?R[se-1]:"B")==="EN"&&se+1<S.length&&S[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&R[se-1]==="EN"){ke="EN";break}if(L){ke="N";break}for(Pe=se+1,_e=S.length;Pe<_e&&S[Pe]==="ET";)Pe++;ke=Pe<_e&&S[Pe]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(_e=S.length,Pe=se+1;Pe<_e&&S[Pe]==="NSM";)Pe++;if(Pe<_e){var Oe=b[se],rt=Oe>=1425&&Oe<=2303||Oe===64286;if(me=S[Pe],rt&&(me==="R"||me==="AL")){ke="R";break}}}ke=se<1||(me=S[se-1])==="B"?"N":R[se-1];break;case"B":L=!1,i=!0,ke=V;break;case"S":s=!0,ke="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"BN":ke="N"}return ke},N=function(b,S,R){var se=b.split("");return R&&A(se,R,{hiLevel:V}),se.reverse(),S&&S.reverse(),se.join("")},A=function(b,S,R){var se,me,Ee,Pe,_e,ke=-1,Oe=b.length,rt=0,T=[],D=V?p:g,M=[];for(L=!1,i=!1,s=!1,me=0;me<Oe;me++)M[me]=K(b[me]);for(Ee=0;Ee<Oe;Ee++){if(_e=rt,T[Ee]=ae(b,M,T,Ee),se=240&(rt=D[_e][x[T[Ee]]]),rt&=15,S[Ee]=Pe=D[rt][5],se>0)if(se===16){for(me=ke;me<Ee;me++)S[me]=1;ke=-1}else ke=-1;if(D[rt][6])ke===-1&&(ke=Ee);else if(ke>-1){for(me=ke;me<Ee;me++)S[me]=Pe;ke=-1}M[Ee]==="B"&&(S[Ee]=0),R.hiLevel|=Pe}s&&function(U,J,oe){for(var le=0;le<oe;le++)if(U[le]==="S"){J[le]=V;for(var ue=le-1;ue>=0&&U[ue]==="WS";ue--)J[ue]=V}}(M,S,Oe)},C=function(b,S,R,se,me){if(!(me.hiLevel<b)){if(b===1&&V===1&&!i)return S.reverse(),void(R&&R.reverse());for(var Ee,Pe,_e,ke,Oe=S.length,rt=0;rt<Oe;){if(se[rt]>=b){for(_e=rt+1;_e<Oe&&se[_e]>=b;)_e++;for(ke=rt,Pe=_e-1;ke<Pe;ke++,Pe--)Ee=S[ke],S[ke]=S[Pe],S[Pe]=Ee,R&&(Ee=R[ke],R[ke]=R[Pe],R[Pe]=Ee);rt=_e}rt++}}},B=function(b,S,R){var se=b.split(""),me={hiLevel:V};return R||(R=[]),A(se,R,me),function(Ee,Pe,_e){if(_e.hiLevel!==0&&l)for(var ke,Oe=0;Oe<Ee.length;Oe++)Pe[Oe]===1&&(ke=E.indexOf(Ee[Oe]))>=0&&(Ee[Oe]=E[ke+1])}(se,R,me),C(2,se,S,R,me),C(1,se,S,R,me),se.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,R){if(function(me,Ee){if(Ee)for(var Pe=0;Pe<me.length;Pe++)Ee[Pe]=Pe;o===void 0&&(o=ie(me)),u===void 0&&(u=ie(me))}(b,S),a||!c||u)if(a&&c&&o^u)V=o?1:0,b=N(b,S,R);else if(!a&&c&&u)V=o?1:0,b=B(b,S,R),b=N(b,S);else if(!a||o||c||u){if(a&&!c&&o^u)b=N(b,S),o?(V=0,b=B(b,S,R)):(V=1,b=B(b,S,R),b=N(b,S));else if(a&&o&&!c&&u)V=1,b=B(b,S,R),b=N(b,S);else if(!a&&!c&&o^u){var se=l;o?(V=1,b=B(b,S,R),V=0,l=!1,b=B(b,S,R),l=se):(V=0,b=B(b,S,R),b=N(b,S),V=1,l=!1,b=B(b,S,R),l=se,b=N(b,S))}}else V=0,b=B(b,S,R);else V=o?1:0,b=B(b,S,R);return b},this.__bidiEngine__.setOptions=function(b){b&&(a=b.isInputVisual,c=b.isOutputVisual,o=b.isInputRtl,u=b.isOutputRtl,l=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text,s=(r.x,r.y,r.options||{}),a=(r.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);r.text=a}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new vc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new JW(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new MW(this.contents),this.head=new VW(this),this.name=new WW(this),this.cmap=new CS(this),this.toUnicode={},this.hhea=new UW(this),this.maxp=new HW(this),this.hmtx=new $W(this),this.post=new qW(this),this.os2=new jW(this),this.loca=new XW(this),this.glyf=new GW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Qs,vc=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,a,o,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*a+256*o+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),MW=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,a,o,c,u,l,d,g,p,x,_;for(_ in p=Object.keys(t).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),a=Math.floor(d/c),l=16*p-d,(i=new vc).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(a),i.writeShort(l),s=16*p,u=i.pos+s,o=null,x=[],t)for(g=t[_],i.writeString(_),i.writeInt(n(g)),i.writeInt(u),i.writeInt(g.length),x=x.concat(g),_==="head"&&(o=u),u+=g.length;u%4;)x.push(0),u++;return i.write(x),r=2981146554-n(i.data),i.pos=o+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,a;for(t=RS.call(t);t.length%4;)t.push(0);for(s=new vc(t),i=0,r=0,a=t.length;r<a;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),BW={}.hasOwnProperty,Pa=function(n,e){for(var t in e)BW.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Qs=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var VW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new vc).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),W5=function(){function n(e,t){var r,i,s,a,o,c,u,l,d,g,p,x,_,E,P,L,V;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,s=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),e.pos+=2,_=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),u=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),l=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),i=(this.length-e.pos+this.offset)/2,o=function(){var K,ie;for(ie=[],c=K=0;0<=i?K<i:K>i;c=0<=i?++K:--K)ie.push(e.readUInt16());return ie}(),c=P=0,V=s.length;P<V;c=++P)for(E=s[c],r=L=x=_[c];x<=E?L<=E:L>=E;r=x<=E?++L:--L)l[c]===0?a=r+u[c]:(a=o[l[c]/2+(r-x)-(g-c)]||0)!==0&&(a+=u[c]),this.codeMap[r]=65535&a}e.pos=d}return n.encode=function(e,t){var r,i,s,a,o,c,u,l,d,g,p,x,_,E,P,L,V,K,ie,ae,N,A,C,B,b,S,R,se,me,Ee,Pe,_e,ke,Oe,rt,T,D,M,U,J,oe,le,ue,xe,Ve,ze;switch(se=new vc,a=Object.keys(e).sort(function(Ze,at){return Ze-at}),t){case"macroman":for(_=0,E=function(){var Ze=[];for(x=0;x<256;++x)Ze.push(0);return Ze}(),L={0:0},s={},me=0,ke=a.length;me<ke;me++)L[ue=e[i=a[me]]]==null&&(L[ue]=++_),s[i]={old:e[i],new:L[e[i]]},E[i]=L[e[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(E),{charMap:s,subtable:se.data,maxGlyphID:_+1};case"unicode":for(S=[],d=[],V=0,L={},r={},P=u=null,Ee=0,Oe=a.length;Ee<Oe;Ee++)L[ie=e[i=a[Ee]]]==null&&(L[ie]=++V),r[i]={old:ie,new:L[ie]},o=L[ie]-i,P!=null&&o===u||(P&&d.push(P),S.push(i),u=o),P=i;for(P&&d.push(P),d.push(65535),S.push(65535),B=2*(C=S.length),A=2*Math.pow(Math.log(C)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,N=2*C-A,c=[],ae=[],p=[],x=Pe=0,rt=S.length;Pe<rt;x=++Pe){if(b=S[x],l=d[x],b===65535){c.push(0),ae.push(0);break}if(b-(R=r[b].new)>=32768)for(c.push(0),ae.push(2*(p.length+C-x)),i=_e=b;b<=l?_e<=l:_e>=l;i=b<=l?++_e:--_e)p.push(r[i].new);else c.push(R-b),ae.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*C+2*p.length),se.writeUInt16(0),se.writeUInt16(B),se.writeUInt16(A),se.writeUInt16(g),se.writeUInt16(N),oe=0,T=d.length;oe<T;oe++)i=d[oe],se.writeUInt16(i);for(se.writeUInt16(0),le=0,D=S.length;le<D;le++)i=S[le],se.writeUInt16(i);for(xe=0,M=c.length;xe<M;xe++)o=c[xe],se.writeUInt16(o);for(Ve=0,U=ae.length;Ve<U;Ve++)K=ae[Ve],se.writeUInt16(K);for(ze=0,J=p.length;ze<J;ze++)_=p[ze],se.writeUInt16(_);return{charMap:r,subtable:se.data,maxGlyphID:V+1}}},n}(),CS=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new W5(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=W5.encode(t,r),(s=new vc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),UW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),jW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),qW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),zW=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},WW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,a,o,c,u,l,d,g,p;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),i=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=d=0,g=i.length;d<g;a=++d)s=i[a],t.pos=s.offset,l=t.readString(s.length),o=new zW(l,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),HW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),$W=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,a,o,c,u;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var l,d;for(d=[],r=l=0;0<=s?l<s:l>s;r=0<=s?++l:--l)d.push(t.readInt16());return d}(),this.widths=(function(){var l,d,g,p;for(p=[],l=0,d=(g=this.metrics).length;l<d;l++)a=g[l],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),RS=[].slice,GW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,a,o,c,u,l,d,g;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,o=(c=new vc(r.read(s))).readShort(),l=c.readShort(),g=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[t]=o===-1?new YW(c,l,g,u,d):new KW(c,o,l,g,u,d),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,a,o,c,u;for(o=[],a=[],c=0,u=r.length;c<u;c++)s=t[r[c]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),KW=function(){function n(e,t,r,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),YW=function(){function n(e,t,r,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new vc(RS.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),XW=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Pa(e,Qs),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<r.length&&r[a]==o){++a,i[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var l=new Array(4*i.length),d=0;d<i.length;++d)l[4*d+3]=255&i[d],l[4*d+2]=(65280&i[d])>>8,l[4*d+1]=(16711680&i[d])>>16,l[4*d]=(4278190080&i[d])>>24;return l},e}(),JW=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))r=c[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,a,o,c,u,l,d,g,p,x,_,E,P;for(i in r=CS.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},P=r.charMap)p[(c=P[i]).old]=c.new;for(x in g=r.maxGlyphID,a)x in p||(p[x]=g++);return l=function(L){var V,K;for(V in K={},L)K[L[V]]=V;return K}(p),d=Object.keys(l).sort(function(L,V){return L-V}),_=function(){var L,V,K;for(K=[],L=0,V=d.length;L<V;L++)o=d[L],K.push(l[o]);return K}(),s=this.font.glyf.encode(a,_,p),u=this.font.loca.encode(s.offsets,_),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},n}();Dt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,a;if(Array.isArray(t))return"["+function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)r=t[o],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();function QW(){window.exportXLSX=nH,window.exportPDF=eH,window.exportCSV=rH,window.exportJSON=iH,window.importJSON=sH}function ad(){return new Date().toISOString().split("T")[0]}function ZW(n,e){if(!n||!e)return 0;const[t,r]=n.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+r,o=i*60+s;return Math.round((o-a)/60*100)/100}function Pm(){const n=document.getElementById("exportPeriod").value;let e=Ce.entries;if(n!=="all"){const{start:t,end:r}=aH(n);e=e.filter(i=>i.datum>=t&&i.datum<=r)}return e}function eH(){const n=Pm();if(n.length===0){alert("Keine Daten zum Exportieren");return}const e=tH(n),t=new Dt("l","mm","a4");t.setFontSize(18),t.text("Zeiterfassung",14,22),t.setFontSize(10),t.text(`Erstellt am: ${Iu(ad())}`,14,30),t.text(`${e.length} Zeitblcke (aus ${n.length} Eintrgen)`,14,36);let r=50;t.setFontSize(9),t.setFont(void 0,"bold"),t.text("Datum",14,r),t.text("Projekte",40,r),t.text("Ttigkeiten",110,r),t.text("Start",195,r),t.text("Ende",212,r),t.text("Std",230,r),t.text("Ort",250,r),r+=2,t.setDrawColor(200,200,200),t.setLineWidth(.3),t.line(14,r,270,r),t.setFont(void 0,"normal"),r+=6;let i=null,s=0;e.forEach((N,A)=>{const C=(N.projekte||[]).join(", "),B=t.splitTextToSize(C,65);let b=(N.taetigkeiten||[]).join(", ");N.entryCount>1&&(b+=" und weitere Ttigkeiten");const S=t.splitTextToSize(b,80),R=Math.max(B.length,S.length,1),se=Math.max(6,R*4+2);r+se>190&&(t.addPage(),r=20,i=null);const me=N.datum!==i;me&&(i=N.datum,s++),s%2===0&&(t.setFillColor(255,240,240),t.rect(10,r-4,277,se,"F")),me&&A>0&&(t.setDrawColor(180,180,180),t.setLineWidth(.4),t.line(14,r-3,270,r-3)),t.setTextColor(0,0,0),t.text(Iu(N.datum),14,r),t.text(B,40,r),t.text(S,110,r),t.text(N.start||"",195,r),t.text(N.ende||"",212,r),t.text((N.stunden||0).toFixed(2),230,r);let Ee=N.homeoffice?"HO":"Bro";(N.homeoffice===null||N.projekte&&N.projekte.some(Pe=>ks(Pe)))&&(Ee="Abwesend"),t.text(Ee,250,r),r+=se});const a=e.filter(N=>!N.projekte.includes("Pause")),o=a.reduce((N,A)=>N+(A.stunden||0),0),u=[...new Set(a.map(N=>N.datum))].length,l=u>0?o/u:0,g=l/7.8*100,p=a.filter(N=>N.homeoffice).reduce((N,A)=>N+(A.stunden||0),0),x=a.filter(N=>!N.homeoffice).reduce((N,A)=>N+(A.stunden||0),0),_=o>0?p/o*100:0,E=o>0?x/o*100:0,P=l*5,L=P/39*100;r+=5,t.setFont(void 0,"bold"),t.text(`Gesamt: ${o.toFixed(2)} Stunden`,14,r),r+=10,t.setFontSize(11),t.text("STATISTIK",14,r),t.setFontSize(9),t.setFont(void 0,"normal"),r+=6,t.text(`Arbeitstage: ${u}`,14,r),r+=5;const V=l<7.8?[255,0,0]:[0,170,0];t.setTextColor(V[0],V[1],V[2]),t.setFont(void 0,"bold"),t.text(` Stunden/Tag: ${l.toFixed(2)}h`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),r+=5;const K=g<100?[255,0,0]:[0,170,0];t.setTextColor(K[0],K[1],K[2]),t.setFont(void 0,"bold"),t.text(` % zur Regelarbeitszeit (7,8h): ${g.toFixed(1)}%`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),r+=5;const ie=P<39?[255,0,0]:[0,170,0];t.setTextColor(ie[0],ie[1],ie[2]),t.setFont(void 0,"bold"),t.text(`Hochrechnung Woche (5 Tage): ${P.toFixed(2)}h (${L.toFixed(1)}%)`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),r+=10,t.setFont(void 0,"bold"),t.text("ARBEITSORT-VERTEILUNG",14,r),t.setFont(void 0,"normal"),r+=6,t.text(`Homeoffice: ${p.toFixed(2)}h (${_.toFixed(1)}%)`,14,r),r+=5;const ae=E<50?[255,0,0]:[0,170,0];t.setTextColor(ae[0],ae[1],ae[2]),t.setFont(void 0,"bold"),t.text(`Bro: ${x.toFixed(2)}h (${E.toFixed(1)}%)`,14,r),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),t.save(`Zeiterfassung_${ad()}.pdf`)}function tH(n){const e=[...n].sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||"")),t=[];let r=null;for(const i of e)r?r.datum===i.datum&&r.ende===i.start&&r.projekte.includes("Pause")===(i.projekt==="Pause")?(r.ende=i.ende,r.stunden=ZW(r.start,r.ende),r.entryCount++,i.projekt&&!r.projekte.includes(i.projekt)&&r.projekte.push(i.projekt),i.taetigkeit&&!r.taetigkeiten.includes(i.taetigkeit)&&r.taetigkeiten.push(i.taetigkeit)):(t.push(r),r={datum:i.datum,start:i.start,ende:i.ende,projekte:[i.projekt||"Allgemein"],taetigkeiten:i.taetigkeit?[i.taetigkeit]:[],homeoffice:i.homeoffice,stunden:parseFloat(i.stunden)||0,entryCount:1}):r={datum:i.datum,start:i.start,ende:i.ende,projekte:[i.projekt||"Allgemein"],taetigkeiten:i.taetigkeit?[i.taetigkeit]:[],homeoffice:i.homeoffice,stunden:parseFloat(i.stunden)||0,entryCount:1};return r&&t.push(r),t}function nH(){const n=Pm();n.sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||""));const e=n.map(i=>{let s=i.homeoffice?"Homeoffice":"Bro";return(i.homeoffice===null||ks(i.projekt))&&(s="Abwesend"),{Datum:Iu(i.datum),Start:i.start,Ende:i.ende,Projekt:i.projekt||"",Ttigkeit:i.taetigkeit||"",Stunden:i.stunden,Ort:s}}),t=Ag.json_to_sheet(e),r=Ag.book_new();Ag.book_append_sheet(r,t,"Zeiten"),Uz(r,`Zeiterfassung_${ad()}.xlsx`)}function rH(){const n=Pm();n.sort((s,a)=>s.datum!==a.datum?s.datum.localeCompare(a.datum):(s.start||"").localeCompare(a.start||""));const t=[["Datum","Start","Ende","Projekt","Ttigkeit","Stunden","Ort"].join(";"),...n.map(s=>{let a=s.homeoffice?"Homeoffice":"Bro";return(s.homeoffice===null||ks(s.projekt))&&(a="Abwesend"),[Iu(s.datum),s.start,s.ende,s.projekt||"",s.taetigkeit||"",s.stunden,a].join(";")})].join(`
`),r=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(r),i.download=`Zeiterfassung_${ad()}.csv`,i.click()}function iH(){const n=Pm();n.sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||""));const e=JSON.stringify(n,null,2),t=new Blob([e],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(t),r.download=`Zeiterfassung_${ad()}.json`,r.click()}function sH(){const n=document.getElementById("importFile");if(!n.files||!n.files[0])return;const e=new FileReader;e.onload=function(t){try{const r=JSON.parse(t.target.result);Array.isArray(r)&&alert(`Backup enthlt ${r.length} Eintrge. Import ist in dieser Version noch nicht vollstndig implementiert.`)}catch{alert("Fehler beim Lesen der JSON-Datei")}},e.readAsText(n.files[0])}function aH(n){const e=new Date,t=e.toISOString().split("T")[0];let r=t,i=t;if(n==="custom")r=document.getElementById("exportFrom").value,i=document.getElementById("exportTo").value;else if(n==="week"){const s=e.getDay()||7,a=new Date(e);a.setDate(e.getDate()-s+1),r=a.toISOString().split("T")[0]}else n==="month"?(r=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],i=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0]):n==="year"&&(r=new Date(e.getFullYear(),0,1).toISOString().split("T")[0],i=new Date(e.getFullYear(),11,31).toISOString().split("T")[0]);return{start:r,end:i}}window.toggleCustomDates=function(){const n=document.getElementById("exportPeriod").value,e=document.getElementById("customDateRange");n==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")};let Pf=null,Ga=null,H5=[];function oH(){window.addAppointment=uH,window.editAppointment=lH,window.saveAppointment=hH,window.deleteAppointment=LS,window.closeEditAppointmentModal=kp,window.renderCalendar=od,window.handleIcsUpload=fH,window.executeReset=DS,window.cancelReset=dH}function od(){const n=document.getElementById("calendar-events-list");if(n){if(!Ce.currentUser){n.innerHTML='<div class="text-br-300 p-4 text-center">Bitte anmelden.</div>';return}n.innerHTML='<div class="text-center p-4"><div class="spinner"></div></div>',Fn.collection("app_events").get().then(e=>{let t=[];e.forEach(r=>{t.push({id:r.id,...r.data(),type:"app"})}),H5=t.filter(r=>r.start).sort((r,i)=>new Date(r.start)-new Date(i.start)),cH(H5)}).catch(e=>{console.error("Error loading calendar:",e);const t=e.code==="permission-denied"?"Zugriff auf globale Termine verweigert. Bitte Admin kontaktieren.":e.message;n.innerHTML=`<div class="text-red-400 p-4">Fehler beim Laden: ${t}</div>`})}}function cH(n){const e=document.getElementById("calendar-events-list");if(!e)return;if(n.length===0){e.innerHTML='<div class="text-br-400 text-center py-8">Keine Termine vorhanden</div>';return}const t={};n.forEach(a=>{const o=a.start.split("T")[0];t[o]||(t[o]=[]),t[o].push(a)});let r="";const i=Object.keys(t).sort(),s=a=>["So","Mo","Di","Mi","Do","Fr","Sa"][new Date(a).getDay()];i.forEach(a=>{const o=t[a],c=new Date(a),u=`${s(a)} ${c.getDate()}.${c.getMonth()+1}.`;r+=`<div class="mb-4">
            <h3 class="text-br-200 text-sm font-bold mb-2 sticky top-0 bg-br-900/90 backdrop-blur py-1 px-2 rounded -mx-2">${u}</h3>
            <div class="space-y-2">`,o.forEach(l=>{var _;const d=l.allDay?"Ganztgig":((_=l.start.split("T")[1])==null?void 0:_.substring(0,5))||"??:??",g=l.type==="app";r+=`
                <div class="${g?"bg-br-700":"bg-br-800 opacity-75"} p-3 rounded-lg ${g?"border-l-4 border-accent-500":"border-l-4 border-br-500"} flex justify-between items-center group cursor-pointer" 
                    onclick="editAppointment('${l.id}', '${l.type}')">
                    <div class="flex-1 min-w-0 pr-2">
                        <div class="font-medium text-white truncate">${l.subject||"(Kein Betreff)"}</div>
                        <div class="text-xs text-br-300 flex items-center gap-2">
                            <span> ${d}</span>
                            <span> ${l.location||"-"}</span>
                            ${l.source==="imported"?'<span class="text-xs bg-br-600 px-1 rounded">Import</span>':""}
                        </div>
                    </div>
                    ${g?'<span class="text-br-400 group-hover:text-white"></span>':""}
                </div>
            `}),r+="</div></div>"}),e.innerHTML=r}function uH(){const n=document.getElementById("editAppointmentModal");if(!n)return;document.getElementById("modalTitleAppt").innerText=" Neuer Termin",document.getElementById("apptId").value="",document.getElementById("apptSubject").value="",document.getElementById("apptLocation").value="";const e=new Date;e.setMinutes(0,0,0),e.setHours(e.getHours()+1);const t=new Date(e);t.setHours(t.getHours()+1);const r=i=>{const s=a=>a<10?"0"+a:a;return`${i.getFullYear()}-${s(i.getMonth()+1)}-${s(i.getDate())}T${s(i.getHours())}:${s(i.getMinutes())}`};document.getElementById("apptStart").value=r(e),document.getElementById("apptEnd").value=r(t),document.getElementById("apptAllDay").checked=!1,document.getElementById("apptDescription").value="",document.getElementById("btnDeleteAppt").classList.add("hidden"),n.classList.remove("hidden")}async function lH(n,e){if(e!=="app"){Dn("Exchange-Termine knnen hier nicht bearbeitet werden.");return}let t=await Fn.collection("app_events").doc(n).get();if(!t.exists&&Ce.currentUser&&(t=await Fn.collection("users").doc(Ce.currentUser.uid).collection("appointments").doc(n).get()),!t.exists)return;const r=t.data(),i=document.getElementById("editAppointmentModal");if(!i)return;document.getElementById("modalTitleAppt").innerText=" Termin bearbeiten",document.getElementById("apptId").value=n,document.getElementById("apptSubject").value=r.subject||"",document.getElementById("apptLocation").value=r.location||"",document.getElementById("apptStart").value=r.start||"",document.getElementById("apptEnd").value=r.end||"",document.getElementById("apptAllDay").checked=r.allDay||!1;const s=(r.description||"").trim();document.getElementById("apptDescription").value=s==="{"?"":s,document.getElementById("btnDeleteAppt").classList.remove("hidden"),document.getElementById("btnDeleteAppt").onclick=()=>LS(n),i.classList.remove("hidden")}function kp(){document.getElementById("editAppointmentModal").classList.add("hidden")}async function hH(){const n=document.getElementById("apptId").value,e=document.getElementById("apptSubject").value,t=document.getElementById("apptLocation").value,r=document.getElementById("apptStart").value,i=document.getElementById("apptEnd").value,s=document.getElementById("apptAllDay").checked,a=document.getElementById("apptDescription").value;if(!e||!r){Dn("Betreff und Startzeit sind Pflichtfelder.");return}const o={subject:e,location:t,start:r,end:i,allDay:s,description:a,updatedAt:new Date};try{if(!Ce.currentUser)throw new Error("Nicht angemeldet");const c=Fn.collection("app_events");n?(await c.doc(n).update(o),Dn("Termin aktualisiert")):(o.createdAt=new Date,o.source="manual",o.uid=Ce.currentUser.uid,await c.add(o),Dn("Termin erstellt")),kp(),od()}catch(c){console.error(c),Dn("Fehler beim Speichern")}}async function LS(n){if(confirm("Termin wirklich lschen?"))try{await Fn.collection("app_events").doc(n).delete(),Dn("Termin gelscht"),kp(),od()}catch(e){if(console.error(e),Ce.currentUser)try{await Fn.collection("users").doc(Ce.currentUser.uid).collection("appointments").doc(n).delete(),Dn("Termin gelscht (User DB)"),kp(),od();return}catch{console.log("Also not in user db")}Dn("Fehler beim Lschen")}}async function fH(n){if(console.log("DEBUG: handleIcsUpload called with",n),!n.files||!n.files[0]){console.log("No file selected.");return}Ga=n,Pf=n.files[0];const e=document.getElementById("resetConfirmModal");e?e.classList.remove("hidden"):confirm(" ACHTUNG: DOM Element #resetConfirmModal fehlt. Dies lscht trotzdem ALLE Termine. Fortfahren?")&&DS()}async function DS(){const n=document.getElementById("resetConfirmModal");if(n&&n.classList.add("hidden"),!Pf)return;const e=Pf;console.log("Starting reset with file:",e.name);try{const t=await e.text(),r=pH(t),i=new Date;i.setDate(i.getDate()-1);const s=i.toISOString().split("T")[0],a=r.filter(g=>g.start?g.start.split("T")[0]>=s:!1);if(a.length===0){alert("Keine zuknftigen Termine in der Datei gefunden. Reset abgebrochen."),Ga&&(Ga.value="");return}if(!Ce.currentUser){alert("Fehler: Nicht angemeldet.");return}const o=Fn.collection("app_events");console.log("Cleaning up old data...");const c=await o.get();await mH(Fn,c.docs),console.log("Starting upload of new events...");const u=400,l=[];for(let g=0;g<a.length;g+=u)l.push(a.slice(g,g+u));let d=0;for(const g of l){const p=Fn.batch();g.forEach(x=>{const _=o.doc();p.set(_,{...x,source:"imported",createdAt:new Date})}),await p.commit(),d+=g.length}console.log("All done."),alert(` Reset erfolgreich! ${d} Termine importiert.`),od()}catch(t){console.error("Import Error:",t),alert("Fehler: "+t.message)}finally{Ga&&(Ga.value=""),Pf=null,Ga=null}}function dH(){const n=document.getElementById("resetConfirmModal");n&&n.classList.add("hidden"),Ga&&(Ga.value=""),Pf=null,Ga=null}function pH(n){const e=[],t=n.split(/\r\n|\n|\r/);let r=null;return t.forEach(i=>{if(i.startsWith("BEGIN:VEVENT"))r={};else if(i.startsWith("END:VEVENT"))r&&e.push(r),r=null;else if(r){const s=i.split(":");let a=s[0],o=s.slice(1).join(":");a.includes(";")&&(a=a.split(";")[0]),a==="SUMMARY"&&(r.subject=o),a==="LOCATION"&&(r.location=o),a==="DESCRIPTION"&&(r.description=o),a==="DTSTART"&&(r.start=$5(o),o.length===8&&(r.allDay=!0)),a==="DTEND"&&(r.end=$5(o))}}),e}function $5(n){if(!n)return"";if(n.length===8)return`${n.substring(0,4)}-${n.substring(4,6)}-${n.substring(6,8)}T00:00:00`;const e=n.substring(0,4),t=n.substring(4,6),r=n.substring(6,8),i=n.includes("T")?n.split("T")[1].substring(0,6):"000000";return`${e}-${t}-${r}T${i.substring(0,2)}:${i.substring(2,4)}:${i.substring(4,6)}`}async function mH(n,e){const r=[];for(let i=0;i<e.length;i+=400)r.push(e.slice(i,i+400));for(const i of r){const s=n.batch();i.forEach(a=>s.delete(a.ref)),await s.commit()}}document.addEventListener("DOMContentLoaded",()=>{Y7(),M7(),f7(),x7(),k7(),S7(),QW(),oH(),nM()});export{xn as _};
