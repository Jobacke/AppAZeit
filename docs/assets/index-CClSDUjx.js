(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var D_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},U4=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,c=i+2<r.length,u=c?r[i+2]:0,l=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(g=64)),n.push(t[l],t[d],t[g],t[p])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(ix(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):U4(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const u=i<r.length?t[r.charAt(i)]:64;++i;const d=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new j4;const g=s<<2|o>>4;if(n.push(g),u!==64){const p=o<<4&240|u>>2;if(n.push(p),d!==64){const w=u<<6&192|d;n.push(w)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class j4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const q4=function(r){const e=ix(r);return sx.encodeByteArray(e,!0)},V0=function(r){return q4(r).replace(/\./g,"")},ax=function(r){try{return sx.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function U0(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!W4(t)||(r[t]=U0(r[t],e[t]));return r}function W4(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=()=>ox().__FIREBASE_DEFAULTS__,H4=()=>{if(typeof process>"u"||typeof D_>"u")return;const r=D_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},$4=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&ax(r[1]);return e&&JSON.parse(e)},j1=()=>{try{return z4()||H4()||$4()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},cx=()=>{var r;return(r=j1())===null||r===void 0?void 0:r.config},G4=r=>{var e;return(e=j1())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y4(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},r);return[V0(JSON.stringify(t)),V0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function X4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gr())}function q1(){var r;const e=(r=j1())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function J4(){return typeof window<"u"||ux()}function ux(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Q4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function lx(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function W1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function hx(){const r=Gr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function fx(){return!q1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lu(){try{return typeof indexedDB=="object"}catch{return!1}}function Z4(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function e3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3="FirebaseError";class Pn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=t3,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?r3(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Pn(i,o,n)}}function r3(r,e){return r.replace(n3,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const n3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function i3(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function Cf(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(O_(s)&&O_(a)){if(!Cf(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function O_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Pl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function sf(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function dx(r,e){const t=new s3(r,e);return t.subscribe.bind(t)}class s3{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");a3(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=$g),i.error===void 0&&(i.error=$g),i.complete===void 0&&(i.complete=$g);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function a3(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function $g(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class jn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o3{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new K4;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(u3(e))try{this.getOrInitializeService({instanceIdentifier:zc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=zc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zc){return this.instances.has(e)}getOptions(e=zc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:c3(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=zc){return this.component?this.component.multipleInstances?e:zc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function c3(r){return r===zc?void 0:r}function u3(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o3(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z1=[];var Yt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Yt||(Yt={}));const gx={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},l3=Yt.INFO,h3={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},f3=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=h3[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Np{constructor(e){this.name=e,this._logLevel=l3,this._logHandler=f3,this._userLogHandler=null,z1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}function d3(r){z1.forEach(e=>{e.setLogLevel(r)})}function p3(r,e){for(const t of z1){let n=null;e&&e.level&&(n=gx[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(n??i.logLevel)&&r({level:Yt[s].toLowerCase(),message:o,args:a,type:i.name})}}}const g3=(r,e)=>e.some(t=>r instanceof t);let M_,B_;function m3(){return M_||(M_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function v3(){return B_||(B_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const mx=new WeakMap,Bm=new WeakMap,vx=new WeakMap,Gg=new WeakMap,H1=new WeakMap;function _3(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(Xa(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&mx.set(t,r)}).catch(()=>{}),H1.set(e,r),e}function y3(r){if(Bm.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});Bm.set(r,e)}let Vm={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Bm.get(r);if(e==="objectStoreNames")return r.objectStoreNames||vx.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Xa(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function w3(r){Vm=r(Vm)}function x3(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(Kg(this),e,...t);return vx.set(n,e.sort?e.sort():[e]),Xa(n)}:v3().includes(r)?function(...e){return r.apply(Kg(this),e),Xa(mx.get(this))}:function(...e){return Xa(r.apply(Kg(this),e))}}function T3(r){return typeof r=="function"?x3(r):(r instanceof IDBTransaction&&y3(r),g3(r,m3())?new Proxy(r,Vm):r)}function Xa(r){if(r instanceof IDBRequest)return _3(r);if(Gg.has(r))return Gg.get(r);const e=T3(r);return e!==r&&(Gg.set(r,e),H1.set(e,r)),e}const Kg=r=>H1.get(r);function dh(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=Xa(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Xa(a.result),c.oldVersion,c.newVersion,Xa(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}function Rl(r,{blocked:e}={}){const t=indexedDB.deleteDatabase(r);return e&&t.addEventListener("blocked",n=>e(n.oldVersion,n)),Xa(t).then(()=>{})}const E3=["get","getKey","getAll","getAllKeys","count"],b3=["put","add","delete","clear"],Yg=new Map;function V_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=b3.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||E3.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&c.done]))[0]};return Yg.set(e,s),s}w3(r=>({...r,get:(e,t,n)=>V_(e,t)||r.get(e,t,n),has:(e,t)=>!!V_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(I3(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function I3(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const j0="@firebase/app",Um="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const to=new Np("@firebase/app"),S3="@firebase/app-compat",P3="@firebase/analytics-compat",N3="@firebase/analytics",C3="@firebase/app-check-compat",R3="@firebase/app-check",k3="@firebase/auth",L3="@firebase/auth-compat",D3="@firebase/database",F3="@firebase/data-connect",O3="@firebase/database-compat",M3="@firebase/functions",B3="@firebase/functions-compat",V3="@firebase/installations",U3="@firebase/installations-compat",j3="@firebase/messaging",q3="@firebase/messaging-compat",W3="@firebase/performance",z3="@firebase/performance-compat",H3="@firebase/remote-config",$3="@firebase/remote-config-compat",G3="@firebase/storage",K3="@firebase/storage-compat",Y3="@firebase/firestore",X3="@firebase/vertexai-preview",J3="@firebase/firestore-compat",Q3="firebase",Z3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc="[DEFAULT]",eP={[j0]:"fire-core",[S3]:"fire-core-compat",[N3]:"fire-analytics",[P3]:"fire-analytics-compat",[R3]:"fire-app-check",[C3]:"fire-app-check-compat",[k3]:"fire-auth",[L3]:"fire-auth-compat",[D3]:"fire-rtdb",[F3]:"fire-data-connect",[O3]:"fire-rtdb-compat",[M3]:"fire-fn",[B3]:"fire-fn-compat",[V3]:"fire-iid",[U3]:"fire-iid-compat",[j3]:"fire-fcm",[q3]:"fire-fcm-compat",[W3]:"fire-perf",[z3]:"fire-perf-compat",[H3]:"fire-rc",[$3]:"fire-rc-compat",[G3]:"fire-gcs",[K3]:"fire-gcs-compat",[Y3]:"fire-fst",[J3]:"fire-fst-compat",[X3]:"fire-vertex","fire-js":"fire-js",[Q3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=new Map,Kl=new Map,Yl=new Map;function Rf(r,e){try{r.container.addComponent(e)}catch(t){to.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function _x(r,e){r.container.addOrOverwriteComponent(e)}function Ki(r){const e=r.name;if(Yl.has(e))return to.debug(`There were multiple attempts to register component ${e}.`),!1;Yl.set(e,r);for(const t of ic.values())Rf(t,r);for(const t of Kl.values())Rf(t,r);return!0}function Cp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function tP(r,e,t=nc){Cp(r,e).clearInstance(t)}function yx(r){return r.options!==void 0}function en(r){return r.settings!==void 0}function rP(){Yl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new Ia("app","Firebase",nP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wx=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iP extends wx{constructor(e,t,n,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,a={name:n,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const o=e;super(o.options,a,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ei(j0,Um,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){G1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ss.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=Z3;function $1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:nc,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Ss.create("bad-app-name",{appName:String(i)});if(t||(t=cx()),!t)throw Ss.create("no-options");const s=ic.get(i);if(s){if(Cf(t,s.options)&&Cf(n,s.config))return s;throw Ss.create("duplicate-app",{appName:i})}const a=new px(i);for(const c of Yl.values())a.addComponent(c);const o=new wx(t,n,a);return ic.set(i,o),o}function sP(r,e){if(J4()&&!ux())throw Ss.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;yx(r)?t=r.options:t=r;const n=Object.assign(Object.assign({},e),t);n.releaseOnDeref!==void 0&&delete n.releaseOnDeref;const i=u=>[...u].reduce((l,d)=>Math.imul(31,l)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ss.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(n)),a=Kl.get(s);if(a)return a.incRefCount(e.releaseOnDeref),a;const o=new px(s);for(const u of Yl.values())o.addComponent(u);const c=new iP(t,e,s,o);return Kl.set(s,c),c}function aP(r=nc){const e=ic.get(r);if(!e&&r===nc&&cx())return $1();if(!e)throw Ss.create("no-app",{appName:r});return e}function oP(){return Array.from(ic.values())}async function G1(r){let e=!1;const t=r.name;ic.has(t)?(e=!0,ic.delete(t)):Kl.has(t)&&r.decRefCount()<=0&&(Kl.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(n=>n.delete())),r.isDeleted=!0)}function ei(r,e,t){var n;let i=(n=eP[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),to.warn(o.join(" "));return}Ki(new jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function xx(r,e){if(r!==null&&typeof r!="function")throw Ss.create("invalid-log-argument");p3(r,e)}function Tx(r){d3(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cP="firebase-heartbeat-database",uP=1,kf="firebase-heartbeat-store";let Xg=null;function Ex(){return Xg||(Xg=dh(cP,uP,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(kf)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ss.create("idb-open",{originalErrorMessage:r.message})})),Xg}async function lP(r){try{const t=(await Ex()).transaction(kf),n=await t.objectStore(kf).get(bx(r));return await t.done,n}catch(e){if(e instanceof Pn)to.warn(e.message);else{const t=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});to.warn(t.message)}}}async function U_(r,e){try{const n=(await Ex()).transaction(kf,"readwrite");await n.objectStore(kf).put(e,bx(r)),await n.done}catch(t){if(t instanceof Pn)to.warn(t.message);else{const n=Ss.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});to.warn(n.message)}}}function bx(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=1024,fP=30*24*60*60*1e3;class dP{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new gP(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=j_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=fP}),this._storage.overwrite(this._heartbeatsCache))}catch(n){to.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=j_(),{heartbeatsToSend:n,unsentEntries:i}=pP(this._heartbeatsCache.heartbeats),s=V0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return to.warn(t),""}}}function j_(){return new Date().toISOString().substring(0,10)}function pP(r,e=hP){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),q_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),q_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class gP{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return lu()?Z4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await lP(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return U_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return U_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function q_(r){return V0(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mP(r){Ki(new jn("platform-logger",e=>new A3(e),"PRIVATE")),Ki(new jn("heartbeat",e=>new dP(e),"PRIVATE")),ei(j0,Um,r),ei(j0,Um,"esm2017"),ei("fire-js","")}mP("");const vP=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pn,SDK_VERSION:_c,_DEFAULT_ENTRY_NAME:nc,_addComponent:Rf,_addOrOverwriteComponent:_x,_apps:ic,_clearComponents:rP,_components:Yl,_getProvider:Cp,_isFirebaseApp:yx,_isFirebaseServerApp:en,_registerComponent:Ki,_removeServiceInstance:tP,_serverApps:Kl,deleteApp:G1,getApp:aP,getApps:oP,initializeApp:$1,initializeServerApp:sP,onLog:xx,registerVersion:ei,setLogLevel:Tx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e,t){this._delegate=e,this.firebase=t,Rf(e,new jn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),G1(this._delegate)))}_getService(e,t=nc){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((n=i.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=nc){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Rf(this._delegate,e)}_addOrOverwriteComponent(e){_x(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},W_=new Ia("app-compat","Firebase",yP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wP(r){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:ei,setLogLevel:Tx,onLog:xx,apps:null,SDK_VERSION:_c,INTERNAL:{registerComponent:o,removeApp:n,useAsService:c,modularAPIs:vP}};t.default=t,Object.defineProperty(t,"apps",{get:a});function n(u){delete e[u]}function i(u){if(u=u||nc,!F_(e,u))throw W_.create("no-app",{appName:u});return e[u]}i.App=r;function s(u,l={}){const d=$1(u,l);if(F_(e,d.name))return e[d.name];const g=new r(d,t);return e[d.name]=g,g}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const l=u.name,d=l.replace("-compat","");if(Ki(u)&&u.type==="PUBLIC"){const g=(p=i())=>{if(typeof p[d]!="function")throw W_.create("invalid-app-argument",{appName:l});return p[d]()};u.serviceProps!==void 0&&U0(g,u.serviceProps),t[d]=g,r.prototype[d]=function(...p){return this._getService.bind(this,l).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?t[d]:null}function c(u,l){return l==="serverAuth"?null:l}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(){const r=wP(_P);r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:Ax,extendNamespace:e,createSubscribe:dx,ErrorFactory:Ia,deepExtend:U0});function e(t){U0(r,t)}return r}const xP=Ax();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z_=new Np("@firebase/app-compat"),TP="@firebase/app-compat",EP="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(r){ei(TP,EP,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const r=ox();if(r.firebase!==void 0){z_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&z_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const pn=xP;bP();var AP="firebase",IP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.registerVersion(AP,IP,"app-compat");function K1(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}const Gh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ul={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Ix(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const PP=SP,NP=Ix,Sx=new Ia("auth","Firebase",Ix());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0=new Np("@firebase/auth");function CP(r,...e){q0.logLevel<=Yt.WARN&&q0.warn(`Auth (${_c}): ${r}`,...e)}function E0(r,...e){q0.logLevel<=Yt.ERROR&&q0.error(`Auth (${_c}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(r,...e){throw X1(r,...e)}function Nn(r,...e){return X1(r,...e)}function Y1(r,e,t){const n=Object.assign(Object.assign({},NP()),{[e]:t});return new Ia("auth","Firebase",n).create(e,{appName:r.name})}function Un(r){return Y1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ph(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&ni(r,"argument-error"),Y1(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function X1(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return Sx.create(r,...e)}function tt(r,e,...t){if(!r)throw X1(e,...t)}function da(r){const e="INTERNAL ASSERTION FAILED: "+r;throw E0(e),new Error(e)}function Ks(r,e){r||da(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function J1(){return H_()==="http:"||H_()==="https:"}function H_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RP(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(J1()||lx()||"connection"in navigator)?navigator.onLine:!0}function kP(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ks(t>e,"Short delay should be less than long delay!"),this.isMobile=X4()||W1()}get(){return RP()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(r,e){Ks(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=new od(3e4,6e4);function sn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function an(r,e,t,n,i={}){return Nx(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=fh(Object.assign({key:r.config.apiKey},a)).slice(1),c=await r._getAdditionalHeaders();c["Content-Type"]="application/json",r.languageCode&&(c["X-Firebase-Locale"]=r.languageCode);const u=Object.assign({method:e,headers:c},s);return Q4()||(u.referrerPolicy="no-referrer"),Px.fetch()(Cx(r,r.config.apiHost,t,o),u)})}async function Nx(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},LP),e);try{const i=new OP(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw af(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw af(r,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw af(r,"email-already-in-use",a);if(c==="USER_DISABLED")throw af(r,"user-disabled",a);const l=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Y1(r,l,u);ni(r,l)}}catch(i){if(i instanceof Pn)throw i;ni(r,"network-request-failed",{message:String(i)})}}async function co(r,e,t,n,i={}){const s=await an(r,e,t,n,i);return"mfaPendingCredential"in s&&ni(r,"multi-factor-auth-required",{_serverResponse:s}),s}function Cx(r,e,t,n){const i=`${e}${t}?${n}`;return r.config.emulator?Q1(r.config,i):`${r.config.apiScheme}://${i}`}function FP(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Nn(this.auth,"network-request-failed")),DP.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function af(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Nn(r,e,n);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(r){return r!==void 0&&r.getResponse!==void 0}function G_(r){return r!==void 0&&r.enterprise!==void 0}class MP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return FP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BP(r){return(await an(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function VP(r,e){return an(r,"GET","/v2/recaptchaConfig",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UP(r,e){return an(r,"POST","/v1/accounts:delete",e)}async function jP(r,e){return an(r,"POST","/v1/accounts:update",e)}async function Rx(r,e){return an(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function df(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qP(r,e=!1){const t=St(r),n=await t.getIdToken(e),i=Rp(n);tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:df(Jg(i.auth_time)),issuedAtTime:df(Jg(i.iat)),expirationTime:df(Jg(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Jg(r){return Number(r)*1e3}function Rp(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return E0("JWT malformed, contained fewer than 3 sections"),null;try{const i=ax(t);return i?JSON.parse(i):(E0("Failed to decode base64 JWT payload"),null)}catch(i){return E0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function K_(r){const e=Rp(r);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ro(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Pn&&WP(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function WP({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=df(this.lastLoginAt),this.creationTime=df(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Df(r){var e;const t=r.auth,n=await r.getIdToken(),i=await ro(r,Rx(t,{idToken:n}));tt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];r._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?kx(s.providerUserInfo):[],o=$P(r.providerData,a),c=r.isAnonymous,u=!(r.email&&s.passwordHash)&&!(o!=null&&o.length),l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new jm(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(r,d)}async function HP(r){const e=St(r);await Df(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $P(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function kx(r){return r.map(e=>{var{providerId:t}=e,n=K1(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GP(r,e){const t=await Nx(r,{},async()=>{const n=fh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=Cx(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Px.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function KP(r,e){return an(r,"POST","/v2/accounts:revokeToken",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):K_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const t=K_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await GP(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new kl;return n&&(tt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(tt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(tt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new kl,this.toJSON())}_performRefresh(){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qo(r,e){tt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $a{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=K1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new jm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await ro(this,this.stsTokenManager.getToken(this.auth,e));return tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qP(this,e)}reload(){return HP(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $a(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Df(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await ro(this,UP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,a,o,c,u,l;const d=(n=t.displayName)!==null&&n!==void 0?n:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,w=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,T=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(u=t.createdAt)!==null&&u!==void 0?u:void 0,L=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:F,emailVerified:K,isAnonymous:se,providerData:ce,stsTokenManager:R}=t;tt(F&&R,e,"internal-error");const A=kl.fromJSON(this.name,R);tt(typeof F=="string",e,"internal-error"),qo(d,e.name),qo(g,e.name),tt(typeof K=="boolean",e,"internal-error"),tt(typeof se=="boolean",e,"internal-error"),qo(p,e.name),qo(w,e.name),qo(_,e.name),qo(T,e.name),qo(P,e.name),qo(L,e.name);const C=new $a({uid:F,auth:e,email:g,emailVerified:K,displayName:d,isAnonymous:se,photoURL:w,phoneNumber:p,tenantId:_,stsTokenManager:A,createdAt:P,lastLoginAt:L});return ce&&Array.isArray(ce)&&(C.providerData=ce.map(V=>Object.assign({},V))),T&&(C._redirectEventId=T),C}static async _fromIdTokenResponse(e,t,n=!1){const i=new kl;i.updateFromServerResponse(t);const s=new $a({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Df(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];tt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?kx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new kl;o.updateFromIdToken(n);const c=new $a({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new jm(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y_=new Map;function fs(r){Ks(r instanceof Function,"Expected a class definition");let e=Y_.get(r);return e?(Ks(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,Y_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Lx.type="NONE";const Xl=Lx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(r,e,t){return`firebase:${r}:${e}:${t}`}class Ll{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=iu(this.userKey,i.apiKey,s),this.fullPersistenceKey=iu("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$a._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Ll(fs(Xl),e,n);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||fs(Xl);const a=iu(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const l=await u._get(a);if(l){const d=$a._fromJSON(e,l);u!==s&&(o=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Ll(s,e,n):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Ll(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Mx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Dx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Bx(e))return"Blackberry";if(Vx(e))return"Webos";if(Fx(e))return"Safari";if((e.includes("chrome/")||Ox(e))&&!e.includes("edge/"))return"Chrome";if(cd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function Dx(r=Gr()){return/firefox\//i.test(r)}function Fx(r=Gr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ox(r=Gr()){return/crios\//i.test(r)}function Mx(r=Gr()){return/iemobile/i.test(r)}function cd(r=Gr()){return/android/i.test(r)}function Bx(r=Gr()){return/blackberry/i.test(r)}function Vx(r=Gr()){return/webos/i.test(r)}function ud(r=Gr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function YP(r=Gr()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(r)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(r)}function XP(r=Gr()){var e;return ud(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function JP(){return hx()&&document.documentMode===10}function Ux(r=Gr()){return ud(r)||cd(r)||Vx(r)||Bx(r)||/windows phone/i.test(r)||Mx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(r,e=[]){let t;switch(r){case"Browser":t=X_(Gr());break;case"Worker":t=`${X_(Gr())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${_c}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(r,e={}){return an(r,"GET","/v2/passwordPolicy",sn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eN=6;class tN{constructor(e){var t,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:eN,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new J_(this),this.idTokenSubscription=new J_(this),this.beforeStateQueue=new QP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Ll.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Rx(this,{idToken:e}),n=await $a._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(en(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Df(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kP()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Un(this));const t=e?St(e):null;return t&&tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ZP(this),t=new tN(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await KP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;tt(t,this,"argument-error"),this.redirectPersistenceManager=await Ll.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,n,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=jx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&CP(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rn(r){return St(r)}class J_{constructor(e){this.auth=e,this.observer=null,this.addObserver=dx(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nN(r){ld=r}function Z1(r){return ld.loadJS(r)}function iN(){return ld.recaptchaV2Script}function sN(){return ld.recaptchaEnterpriseScript}function aN(){return ld.gapiScript}function qx(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const oN="recaptcha-enterprise",cN="NO_RECAPTCHA";class uN{constructor(e){this.type=oN,this.auth=rn(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{VP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new MP(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;G_(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(cN)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&G_(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=sN();c.length!==0&&(c+=o),Z1(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function Q_(r,e,t,n=!1){const i=new uN(r);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Ff(r,e,t,n){var i;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Q_(r,e,t,t==="getOobCode");return n(r,s)}else return n(r,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Q_(r,e,t,t==="getOobCode");return n(r,a)}else return Promise.reject(s)})}function lN(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function hN(r,e,t){const n=rn(r);tt(n._canInitEmulator,n,"emulator-config-failed"),tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=Wx(e),{host:a,port:o}=fN(e),c=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||dN()}function Wx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function fN(r){const e=Wx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:Z_(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:Z_(a)}}}function Z_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function dN(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return da("not implemented")}_getIdTokenResponse(e){return da("not implemented")}_linkToIdToken(e,t){return da("not implemented")}_getReauthenticationResolver(e){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(r,e){return an(r,"POST","/v1/accounts:resetPassword",sn(r,e))}async function pN(r,e){return an(r,"POST","/v1/accounts:update",e)}async function gN(r,e){return an(r,"POST","/v1/accounts:signUp",e)}async function mN(r,e){return an(r,"POST","/v1/accounts:update",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(r,e){return co(r,"POST","/v1/accounts:signInWithPassword",sn(r,e))}async function kp(r,e){return an(r,"POST","/v1/accounts:sendOobCode",sn(r,e))}async function _N(r,e){return kp(r,e)}async function yN(r,e){return kp(r,e)}async function wN(r,e){return kp(r,e)}async function xN(r,e){return kp(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TN(r,e){return co(r,"POST","/v1/accounts:signInWithEmailLink",sn(r,e))}async function EN(r,e){return co(r,"POST","/v1/accounts:signInWithEmailLink",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of extends gh{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Of(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Of(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ff(e,t,"signInWithPassword",vN);case"emailLink":return TN(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ff(e,n,"signUpPassword",gN);case"emailLink":return EN(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(r,e){return co(r,"POST","/v1/accounts:signInWithIdp",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="http://localhost";class xa extends gh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=K1(t,["providerId","signInMethod"]);if(!n||!i)return null;const a=new xa(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Ja(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ja(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ja(e,t)}buildRequest(){const e={requestUri:bN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AN(r,e){return an(r,"POST","/v1/accounts:sendVerificationCode",sn(r,e))}async function IN(r,e){return co(r,"POST","/v1/accounts:signInWithPhoneNumber",sn(r,e))}async function SN(r,e){const t=await co(r,"POST","/v1/accounts:signInWithPhoneNumber",sn(r,e));if(t.temporaryProof)throw af(r,"account-exists-with-different-credential",t);return t}const PN={USER_NOT_FOUND:"user-not-found"};async function NN(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return co(r,"POST","/v1/accounts:signInWithPhoneNumber",sn(r,t),PN)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su extends gh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new su({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new su({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return IN(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return SN(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return NN(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return!n&&!t&&!i&&!s?null:new su({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RN(r){const e=Pl(sf(r)).link,t=e?Pl(sf(e)).deep_link_id:null,n=Pl(sf(r)).deep_link_id;return(n?Pl(sf(n)).link:null)||n||t||e||r}class Lp{constructor(e){var t,n,i,s,a,o;const c=Pl(sf(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(n=c.oobCode)!==null&&n!==void 0?n:null,d=CN((i=c.mode)!==null&&i!==void 0?i:null);tt(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=RN(e);try{return new Lp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(){this.providerId=yc.PROVIDER_ID}static credential(e,t){return Of._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Lp.parseLink(t);return tt(n,"argument-error"),Of._fromEmailAndCode(e,n.code,n.tenantId)}}yc.PROVIDER_ID="password";yc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Dl extends mh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return tt("providerId"in t&&"signInMethod"in t,"argument-error"),xa._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tt(e.idToken||e.accessToken,"argument-error"),xa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Dl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Dl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!n&&!i&&!t&&!s||!o)return null;try{return new Dl(o)._credential({idToken:t,accessToken:n,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends mh{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends mh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return la.credential(t,n)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends mh{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN="http://localhost";class Jl extends gh{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Ja(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Ja(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Ja(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:s}=t;return!n||!i||!s||n!==i?null:new Jl(n,s)}static _create(e,t){return new Jl(e,t)}buildRequest(){return{requestUri:kN,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN="saml.";class W0 extends uo{constructor(e){tt(e.startsWith(LN),"argument-error"),super(e)}static credentialFromResult(e){return W0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return W0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Jl.fromJSON(e);return tt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Jl._create(n,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends mh{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return fa.credential(t,n)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hx(r,e){return co(r,"POST","/v1/accounts:signUp",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await $a._fromIdTokenResponse(e,n,i),a=ey(n);return new Ps({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=ey(n);return new Ps({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function ey(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DN(r){var e;if(en(r.app))return Promise.reject(Un(r));const t=rn(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ps({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Hx(t,{returnSecureToken:!0}),i=await Ps._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0 extends Pn{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,z0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new z0(e,t,n,i)}}function $x(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?z0._fromErrorAndOperation(r,s,e,n):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FN(r,e){const t=St(r);await Dp(!0,t,e);const{providerUserInfo:n}=await jP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Gx(n||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function ev(r,e,t=!1){const n=await ro(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ps._forOperation(r,"link",n)}async function Dp(r,e,t){await Df(e);const n=Gx(e.providerData),i=r===!1?"provider-already-linked":"no-such-provider";tt(n.has(t)===r,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(r,e,t=!1){const{auth:n}=r;if(en(n.app))return Promise.reject(Un(n));const i="reauthenticate";try{const s=await ro(r,$x(n,i,e,r),t);tt(s.idToken,n,"internal-error");const a=Rp(s.idToken);tt(a,n,"internal-error");const{sub:o}=a;return tt(r.uid===o,n,"user-mismatch"),Ps._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ni(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yx(r,e,t=!1){if(en(r.app))return Promise.reject(Un(r));const n="signIn",i=await $x(r,n,e),s=await Ps._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function Fp(r,e){return Yx(rn(r),e)}async function Xx(r,e){const t=St(r);return await Dp(!1,t,e.providerId),ev(t,e)}async function Jx(r,e){return Kx(St(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(r,e){return co(r,"POST","/v1/accounts:signInWithCustomToken",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MN(r,e){if(en(r.app))return Promise.reject(Un(r));const t=rn(r),n=await ON(t,{token:e,returnSecureToken:!0}),i=await Ps._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?tv._fromServerResponse(e,t):"totpInfo"in t?rv._fromServerResponse(e,t):ni(e,"internal-error")}}class tv extends hd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new tv(t)}}class rv extends hd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new rv(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(r,e,t){var n;tt(((n=t.url)===null||n===void 0?void 0:n.length)>0,r,"invalid-continue-uri"),tt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(tt(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(tt(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nv(r){const e=rn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function BN(r,e,t){const n=rn(r),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&Op(n,i,t),await Ff(n,i,"getOobCode",yN)}async function VN(r,e,t){await zx(St(r),{oobCode:e,newPassword:t}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nv(r),n})}async function UN(r,e){await mN(St(r),{oobCode:e})}async function Qx(r,e){const t=St(r),n=await zx(t,{oobCode:e}),i=n.requestType;switch(tt(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(n.mfaInfo,t,"internal-error");default:tt(n.email,t,"internal-error")}let s=null;return n.mfaInfo&&(s=hd._fromServerResponse(rn(t),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:s},operation:i}}async function jN(r,e){const{data:t}=await Qx(St(r),e);return t.email}async function qN(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=rn(r),a=await Ff(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Hx).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&nv(r),c}),o=await Ps._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function WN(r,e,t){return en(r.app)?Promise.reject(Un(r)):Fp(St(r),yc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&nv(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zN(r,e,t){const n=rn(r),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){tt(o.handleCodeInApp,n,"argument-error"),o&&Op(n,a,o)}s(i,t),await Ff(n,i,"getOobCode",wN)}function HN(r,e){const t=Lp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function $N(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=St(r),i=yc.credentialWithLink(e,t||Lf());return tt(i._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Fp(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GN(r,e){return an(r,"POST","/v1/accounts:createAuthUri",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KN(r,e){const t=J1()?Lf():"http://localhost",n={identifier:e,continueUri:t},{signinMethods:i}=await GN(St(r),n);return i||[]}async function YN(r,e){const t=St(r),i={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()};e&&Op(t.auth,i,e);const{email:s}=await _N(t.auth,i);s!==r.email&&await r.reload()}async function XN(r,e,t){const n=St(r),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await r.getIdToken(),newEmail:e};t&&Op(n.auth,s,t);const{email:a}=await xN(n.auth,s);a!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(r,e){return an(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QN(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=St(r),s={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await ro(n,JN(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function ZN(r,e){const t=St(r);return en(t.auth.app)?Promise.reject(Un(t.auth)):Zx(t,e,null)}function eC(r,e){return Zx(St(r),null,e)}async function Zx(r,e,t){const{auth:n}=r,s={idToken:await r.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await ro(r,pN(n,s));await r._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(r){var e,t;if(!r)return null;const{providerId:n}=r,i=r.rawUserInfo?JSON.parse(r.rawUserInfo):{},s=r.isNewUser||r.kind==="identitytoolkit#SignupNewUserResponse";if(!n&&(r!=null&&r.idToken)){const a=(t=(e=Rp(r.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Fl(s,o)}}if(!n)return null;switch(n){case"facebook.com":return new rC(s,i);case"github.com":return new nC(s,i);case"google.com":return new iC(s,i);case"twitter.com":return new sC(s,i,r.screenName||null);case"custom":case"anonymous":return new Fl(s,null);default:return new Fl(s,n,i)}}class Fl{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class eT extends Fl{constructor(e,t,n,i){super(e,t,n),this.username=i}}class rC extends Fl{constructor(e,t){super(e,"facebook.com",t)}}class nC extends eT{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class iC extends Fl{constructor(e,t){super(e,"google.com",t)}}class sC extends eT{constructor(e,t,n){super(e,"twitter.com",t,n)}}function aC(r){const{user:e,_tokenResponse:t}=r;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:tC(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new eu("enroll",e,t)}static _fromMfaPendingCredential(e){return new eu("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return eu._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((n=e.multiFactorSession)===null||n===void 0)&&n.idToken)return eu._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=rn(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>hd._fromServerResponse(n,o));tt(i.mfaPendingCredential,n,"internal-error");const a=eu._fromMfaPendingCredential(i.mfaPendingCredential);return new iv(a,s,async o=>{const c=await o._process(n,a);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const l=await Ps._fromIdTokenResponse(n,t.operationType,u);return await n._updateCurrentUser(l.user),l;case"reauthenticate":return tt(t.user,n,"internal-error"),Ps._forOperation(t.user,t.operationType,u);default:ni(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function oC(r,e){var t;const n=St(r),i=e;return tt(e.customData.operationType,n,"argument-error"),tt((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,n,"argument-error"),iv._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(r,e){return an(r,"POST","/v2/accounts/mfaEnrollment:start",sn(r,e))}function uC(r,e){return an(r,"POST","/v2/accounts/mfaEnrollment:finalize",sn(r,e))}function lC(r,e){return an(r,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(r,e))}class sv{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(n=>hd._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new sv(e)}async getSession(){return eu._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,i=await this.getSession(),s=await ro(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const i=await ro(this.user,lC(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Qg=new WeakMap;function hC(r){const e=St(r);return Qg.has(e)||Qg.set(e,sv._fromUser(e)),Qg.get(e)}const H0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(H0,"1"),this.storage.removeItem(H0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC=1e3,dC=10;class rT extends tT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ux(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);JP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,dC):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},fC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}rT.type="LOCAL";const av=rT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT extends tT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}nT.type="SESSION";const hu=nT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Mp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),c=await pC(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Mp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fd(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=fd("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function mC(r){xn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function vC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _C(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function yC(){return ov()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT="firebaseLocalStorageDb",wC=1,$0="firebaseLocalStorage",sT="fbase_key";class dd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Bp(r,e){return r.transaction([$0],e?"readwrite":"readonly").objectStore($0)}function xC(){const r=indexedDB.deleteDatabase(iT);return new dd(r).toPromise()}function qm(){const r=indexedDB.open(iT,wC);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore($0,{keyPath:sT})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains($0)?e(n):(n.close(),await xC(),e(await qm()))})})}async function ty(r,e,t){const n=Bp(r,!0).put({[sT]:e,value:t});return new dd(n).toPromise()}async function TC(r,e){const t=Bp(r,!1).get(e),n=await new dd(t).toPromise();return n===void 0?null:n.value}function ry(r,e){const t=Bp(r,!0).delete(e);return new dd(t).toPromise()}const EC=800,bC=3;class aT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await qm(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>bC)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ov()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Mp._getInstance(yC()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await vC(),!this.activeServiceWorker)return;this.sender=new gC(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_C()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await qm();return await ty(e,H0,"1"),await ry(e,H0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ty(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>TC(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>ry(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Bp(i,!1).getAll();return new dd(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),EC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}aT.type="LOCAL";const Mf=aT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AC(r,e){return an(r,"POST","/v2/accounts/mfaSignIn:start",sn(r,e))}function IC(r,e){return an(r,"POST","/v2/accounts/mfaSignIn:finalize",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=500,PC=6e4,i0=1e12;class NC{constructor(e){this.auth=e,this.counter=i0,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new CC(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||i0;(t=this._widgets.get(n))===null||t===void 0||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||i0;return((t=this._widgets.get(n))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const n=e||i0;return(t=this._widgets.get(n))===null||t===void 0||t.execute(),""}}class CC{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;tt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=RC(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},PC)},SC))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function RC(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<r;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=qx("rcb"),kC=new od(3e4,6e4);class LC{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=xn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return tt(DC(t),e,"argument-error"),this.shouldResolveImmediately(t)&&$_(xn().grecaptcha)?Promise.resolve(xn().grecaptcha):new Promise((n,i)=>{const s=xn().setTimeout(()=>{i(Nn(e,"network-request-failed"))},kC.get());xn()[Zg]=()=>{xn().clearTimeout(s),delete xn()[Zg];const o=xn().grecaptcha;if(!o||!$_(o)){i(Nn(e,"internal-error"));return}const c=o.render;o.render=(u,l)=>{const d=c(u,l);return this.counter++,d},this.hostLanguage=t,n(o)};const a=`${iN()}?${fh({onload:Zg,render:"explicit",hl:t})}`;Z1(a).catch(()=>{clearTimeout(s),i(Nn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=xn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function DC(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class FC{async load(e){return new NC(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="recaptcha",OC={theme:"light",type:"image"};let MC=class{constructor(e,t,n=Object.assign({},OC)){this.parameters=n,this.type=oT,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rn(e),this.isInvisible=this.parameters.size==="invisible",tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;tt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new FC:new LC,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),typeof e=="function")e(t);else if(typeof e=="string"){const n=xn()[e];typeof n=="function"&&n(t)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){tt(J1()&&!ov(),this.auth,"internal-error"),await BC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await BP(this.auth);tt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function BC(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=su._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function VC(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=rn(r),i=await Vp(n,e,St(t));return new cv(i,s=>Fp(n,s))}async function UC(r,e,t){const n=St(r);await Dp(!1,n,"phone");const i=await Vp(n.auth,e,St(t));return new cv(i,s=>Xx(n,s))}async function jC(r,e,t){const n=St(r);if(en(n.auth.app))return Promise.reject(Un(n.auth));const i=await Vp(n.auth,e,St(t));return new cv(i,s=>Jx(n,s))}async function Vp(r,e,t){var n;const i=await t.verify();try{tt(typeof i=="string",r,"argument-error"),tt(t.type===oT,r,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return tt(a.type==="enroll",r,"internal-error"),(await cC(r,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{tt(a.type==="signin",r,"internal-error");const o=((n=s.multiFactorHint)===null||n===void 0?void 0:n.uid)||s.multiFactorUid;return tt(o,r,"missing-multi-factor-info"),(await AC(r,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await AN(r,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function qC(r,e){const t=St(r);if(en(t.auth.app))return Promise.reject(Un(t.auth));await ev(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu=class b0{constructor(e){this.providerId=b0.PROVIDER_ID,this.auth=rn(e)}verifyPhoneNumber(e,t){return Vp(this.auth,e,St(t))}static credential(e,t){return su._fromVerification(e,t)}static credentialFromResult(e){const t=e;return b0.credentialFromTaggedObject(t)}static credentialFromError(e){return b0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?su._fromTokenResponse(t,n):null}};fu.PROVIDER_ID="phone";fu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cu(r,e){return e?fs(e):(tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv extends gh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ja(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Ja(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Ja(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function WC(r){return Yx(r.auth,new uv(r),r.bypassAuthState)}function zC(r){const{auth:e,user:t}=r;return tt(t,e,"internal-error"),Kx(t,new uv(r),r.bypassAuthState)}async function HC(r){const{auth:e,user:t}=r;return tt(t,e,"internal-error"),ev(t,new uv(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return WC;case"linkViaPopup":case"linkViaRedirect":return HC;case"reauthViaPopup":case"reauthViaRedirect":return zC;default:ni(this.auth,"internal-error")}}resolve(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new od(2e3,1e4);async function GC(r,e,t){if(en(r.app))return Promise.reject(Nn(r,"operation-not-supported-in-this-environment"));const n=rn(r);ph(r,e,uo);const i=Cu(n,t);return new Ga(n,"signInViaPopup",e,i).executeNotNull()}async function KC(r,e,t){const n=St(r);if(en(n.auth.app))return Promise.reject(Nn(n.auth,"operation-not-supported-in-this-environment"));ph(n.auth,e,uo);const i=Cu(n.auth,t);return new Ga(n.auth,"reauthViaPopup",e,i,n).executeNotNull()}async function YC(r,e,t){const n=St(r);ph(n.auth,e,uo);const i=Cu(n.auth,t);return new Ga(n.auth,"linkViaPopup",e,i,n).executeNotNull()}class Ga extends cT{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ks(this.filter.length===1,"Popup operations only handle one event");const e=fd();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$C.get())};e()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XC="pendingRedirect",pf=new Map;class JC extends cT{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=pf.get(this.auth._key());if(!e){try{const n=await QC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}pf.set(this.auth._key(),e)}return this.bypassAuthState||pf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QC(r,e){const t=lT(e),n=uT(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}async function lv(r,e){return uT(r)._set(lT(e),"true")}function ZC(){pf.clear()}function hv(r,e){pf.set(r._key(),e)}function uT(r){return fs(r._redirectPersistence)}function lT(r){return iu(XC,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(r,e,t){return tR(r,e,t)}async function tR(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=rn(r);ph(r,e,uo),await n._initializationPromise;const i=Cu(n,t);return await lv(i,n),i._openRedirect(n,e,"signInViaRedirect")}function rR(r,e,t){return nR(r,e,t)}async function nR(r,e,t){const n=St(r);if(ph(n.auth,e,uo),en(n.auth.app))return Promise.reject(Un(n.auth));await n.auth._initializationPromise;const i=Cu(n.auth,t);await lv(i,n.auth);const s=await hT(n);return i._openRedirect(n.auth,e,"reauthViaRedirect",s)}function iR(r,e,t){return sR(r,e,t)}async function sR(r,e,t){const n=St(r);ph(n.auth,e,uo),await n.auth._initializationPromise;const i=Cu(n.auth,t);await Dp(!1,n,e.providerId),await lv(i,n.auth);const s=await hT(n);return i._openRedirect(n.auth,e,"linkViaRedirect",s)}async function aR(r,e){return await rn(r)._initializationPromise,Up(r,e,!1)}async function Up(r,e,t=!1){if(en(r.app))return Promise.reject(Un(r));const n=rn(r),i=Cu(n,e),a=await new JC(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}async function hT(r){const e=fd(`${r.uid}:::`);return r._redirectEventId=e,await r.auth._setRedirectUser(r),await r.auth._persistUserIfCurrent(r),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=10*60*1e3;class fT{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cR(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!dT(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Nn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=oR&&this.cachedEventUids.clear(),this.cachedEventUids.has(ny(e))}saveEventToCache(e){this.cachedEventUids.add(ny(e)),this.lastProcessedEventTime=Date.now()}}function ny(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function dT({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cR(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return dT(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(r,e={}){return an(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lR=/^https?/;async function hR(r){if(r.config.emulator)return;const{authorizedDomains:e}=await pT(r);for(const t of e)try{if(fR(t))return}catch{}ni(r,"unauthorized-domain")}function fR(r){const e=Lf(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!lR.test(t))return!1;if(uR.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new od(3e4,6e4);function iy(){const r=xn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function pR(r){return new Promise((e,t)=>{var n,i,s;function a(){iy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{iy(),t(Nn(r,"network-request-failed"))},timeout:dR.get()})}if(!((i=(n=xn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xn().gapi)===null||s===void 0)&&s.load)a();else{const o=qx("iframefcb");return xn()[o]=()=>{gapi.load?a():t(Nn(r,"network-request-failed"))},Z1(`${aN()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw A0=null,e})}let A0=null;function gR(r){return A0=A0||pR(r),A0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=new od(5e3,15e3),vR="__/auth/iframe",_R="emulator/auth/iframe",yR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},wR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xR(r){const e=r.config;tt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Q1(e,_R):`https://${r.config.authDomain}/${vR}`,n={apiKey:e.apiKey,appName:r.name,v:_c},i=wR.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${fh(n).slice(1)}`}async function TR(r){const e=await gR(r),t=xn().gapi;return tt(t,r,"internal-error"),e.open({where:document.body,url:xR(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yR,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Nn(r,"network-request-failed"),o=xn().setTimeout(()=>{s(a)},mR.get());function c(){xn().clearTimeout(o),i(n)}n.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},bR=500,AR=600,IR="_blank",SR="http://localhost";class sy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function PR(r,e,t,n=bR,i=AR){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c=Object.assign(Object.assign({},ER),{width:n.toString(),height:i.toString(),top:s,left:a}),u=Gr().toLowerCase();t&&(o=Ox(u)?IR:t),Dx(u)&&(e=e||SR,c.scrollbars="yes");const l=Object.entries(c).reduce((g,[p,w])=>`${g}${p}=${w},`,"");if(XP(u)&&o!=="_self")return NR(e||"",o),new sy(null);const d=window.open(e||"",o,l);tt(d,r,"popup-blocked");try{d.focus()}catch{}return new sy(d)}function NR(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="__/auth/handler",RR="emulator/auth/handler",kR=encodeURIComponent("fac");async function Wm(r,e,t,n,i,s){tt(r.config.authDomain,r,"auth-domain-config-required"),tt(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:_c,eventId:i};if(e instanceof uo){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",i3(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))a[l]=d}if(e instanceof mh){const l=e.getScopes().filter(d=>d!=="");l.length>0&&(a.scopes=l.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const l of Object.keys(o))o[l]===void 0&&delete o[l];const c=await r._getAppCheckToken(),u=c?`#${kR}=${encodeURIComponent(c)}`:"";return`${LR(r)}?${fh(o).slice(1)}${u}`}function LR({config:r}){return r.emulator?Q1(r,RR):`https://${r.authDomain}/${CR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class DR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hu,this._completeRedirectFn=Up,this._overrideRedirectResult=hv}async _openPopup(e,t,n,i){var s;Ks((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Wm(e,t,n,Lf(),i);return PR(e,a,fd())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await Wm(e,t,n,Lf(),i);return mC(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ks(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await TR(e),n=new fT(e);return t.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(em,{type:em},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[em];a!==void 0&&t(!!a),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=hR(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ux()||Fx()||ud()}}const FR=DR;class OR{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return da("unexpected MultiFactorSessionType")}}}class fv extends OR{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new fv(e)}_finalizeEnroll(e,t,n){return uC(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return IC(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class gT{constructor(){}static assertion(e){return fv._fromCredential(e)}}gT.FACTOR_ID="phone";var ay="@firebase/auth",oy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BR(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function VR(r){Ki(new jn("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;tt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:jx(r)},u=new rN(n,i,s,c);return lN(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ki(new jn("auth-internal",e=>{const t=rn(e.getProvider("auth").getImmediate());return(n=>new MR(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(ay,oy,BR(r)),ei(ay,oy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=5*60;G4("authIdTokenMaxAge");function jR(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}nN({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Nn("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",jR().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});VR("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qR=2e3;async function WR(r,e,t){var n;const{BuildInfo:i}=du();Ks(e.sessionId,"AuthEvent did not contain a session ID");const s=await KR(e.sessionId),a={};return ud()?a.ibi=i.packageName:cd()?a.apn=i.packageName:ni(r,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Wm(r,t,e.type,void 0,(n=e.eventId)!==null&&n!==void 0?n:void 0,a)}async function zR(r){const{BuildInfo:e}=du(),t={};ud()?t.iosBundleId=e.packageName:cd()?t.androidPackageName=e.packageName:ni(r,"operation-not-supported-in-this-environment"),await pT(r,t)}function HR(r){const{cordova:e}=du();return new Promise(t=>{e.plugins.browsertab.isAvailable(n=>{let i=null;n?e.plugins.browsertab.openUrl(r):i=e.InAppBrowser.open(r,YP()?"_blank":"_system","location=yes"),t(i)})})}async function $R(r,e,t){const{cordova:n}=du();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var d;s();const g=(d=n.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof g=="function"&&g(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function u(){o||(o=window.setTimeout(()=>{a(Nn(r,"redirect-cancelled-by-user"))},qR))}function l(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),cd()&&document.addEventListener("visibilitychange",l,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}})}finally{i()}}function GR(r){var e,t,n,i,s,a,o,c,u,l;const d=du();tt(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt(typeof((s=(i=(n=d==null?void 0:d.cordova)===null||n===void 0?void 0:n.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((c=(o=(a=d==null?void 0:d.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((l=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||l===void 0?void 0:l.open)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function KR(r){const e=YR(r),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function YR(r){if(Ks(/[0-9a-zA-Z]+/.test(r),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(r);const e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let n=0;n<r.length;n++)t[n]=r.charCodeAt(n);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR=20;class JR extends fT{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function QR(r,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:tk(),postBody:null,tenantId:r.tenantId,error:Nn(r,"no-auth-event")}}function ZR(r,e){return zm()._set(Hm(r),e)}async function cy(r){const e=await zm()._get(Hm(r));return e&&await zm()._remove(Hm(r)),e}function ek(r,e){var t,n;const i=nk(e);if(i.includes("/__/auth/callback")){const s=I0(i),a=s.firebaseError?rk(decodeURIComponent(s.firebaseError)):null,o=(n=(t=a==null?void 0:a.code)===null||t===void 0?void 0:t.split("auth/"))===null||n===void 0?void 0:n[1],c=o?Nn(o):null;return c?{type:r.type,eventId:r.eventId,tenantId:r.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:r.type,eventId:r.eventId,tenantId:r.tenantId,sessionId:r.sessionId,urlResponse:i,postBody:null}}return null}function tk(){const r=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<XR;t++){const n=Math.floor(Math.random()*e.length);r.push(e.charAt(n))}return r.join("")}function zm(){return fs(av)}function Hm(r){return iu("authEvent",r.config.apiKey,r.name)}function rk(r){try{return JSON.parse(r)}catch{return null}}function nk(r){const e=I0(r),t=e.link?decodeURIComponent(e.link):void 0,n=I0(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return I0(i).link||i||n||t||r}function I0(r){if(!(r!=null&&r.includes("?")))return{};const[e,...t]=r.split("?");return Pl(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik=500;class sk{constructor(){this._redirectPersistence=hu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Up,this._overrideRedirectResult=hv}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new JR(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){ni(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){GR(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),ZC(),await this._originValidation(e);const a=QR(e,n,i);await ZR(e,a);const o=await WR(e,a,t),c=await HR(o);return $R(e,s,c)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zR(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=du(),a=setTimeout(async()=>{await cy(e),t.onEvent(uy())},ik),o=async l=>{clearTimeout(a);const d=await cy(e);let g=null;d&&(l!=null&&l.url)&&(g=ek(d,l.url)),t.onEvent(g||uy())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,o);const c=i,u=`${s.packageName.toLowerCase()}://`;du().handleOpenURL=async l=>{if(l.toLowerCase().startsWith(u)&&o({url:l}),typeof c=="function")try{c(l)}catch(d){console.error(d)}}}}const ak=sk;function uy(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(r,e){rn(r)._logFramework(e)}var ck="@firebase/auth-compat",uk="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lk=1e3;function gf(){var r;return((r=self==null?void 0:self.location)===null||r===void 0?void 0:r.protocol)||null}function hk(){return gf()==="http:"||gf()==="https:"}function mT(r=Gr()){return!!((gf()==="file:"||gf()==="ionic:"||gf()==="capacitor:")&&r.toLowerCase().match(/iphone|ipad|ipod|android/))}function fk(){return W1()||q1()}function dk(){return hx()&&(document==null?void 0:document.documentMode)===11}function pk(r=Gr()){return/Edge\/\d+/.test(r)}function gk(r=Gr()){return dk()||pk(r)}function vT(){try{const r=self.localStorage,e=fd();if(r)return r.setItem(e,"1"),r.removeItem(e),gk()?lu():!0}catch{return dv()&&lu()}return!1}function dv(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function tm(){return(hk()||lx()||mT())&&!fk()&&vT()&&!dv()}function _T(){return mT()&&typeof document<"u"}async function mk(){return _T()?new Promise(r=>{const e=setTimeout(()=>{r(!1)},lk);document.addEventListener("deviceready",()=>{clearTimeout(e),r(!0)})}):!1}function vk(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us={LOCAL:"local",NONE:"none",SESSION:"session"},Kh=tt,yT="persistence";function _k(r,e){if(Kh(Object.values(us).includes(e),r,"invalid-persistence-type"),W1()){Kh(e!==us.SESSION,r,"unsupported-persistence-type");return}if(q1()){Kh(e===us.NONE,r,"unsupported-persistence-type");return}if(dv()){Kh(e===us.NONE||e===us.LOCAL&&lu(),r,"unsupported-persistence-type");return}Kh(e===us.NONE||vT(),r,"unsupported-persistence-type")}async function $m(r){await r._initializationPromise;const e=wT(),t=iu(yT,r.config.apiKey,r.name);e&&e.setItem(t,r._getPersistence())}function yk(r,e){const t=wT();if(!t)return[];const n=iu(yT,r,e);switch(t.getItem(n)){case us.NONE:return[Xl];case us.LOCAL:return[Mf,hu];case us.SESSION:return[hu];default:return[]}}function wT(){var r;try{return((r=vk())===null||r===void 0?void 0:r.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wk=tt;class Jo{constructor(){this.browserResolver=fs(FR),this.cordovaResolver=fs(ak),this.underlyingResolver=null,this._redirectPersistence=hu,this._completeRedirectFn=Up,this._overrideRedirectResult=hv}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return _T()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return wk(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await mk();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(r){return r.unwrap()}function xk(r){return r.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(r){return TT(r)}function Ek(r,e){var t;const n=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new bk(r,oC(r,e))}else if(n){const i=TT(e),s=e;i&&(s.credential=i,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function TT(r){const{_tokenResponse:e}=r instanceof Pn?r.customData:r;if(!e)return null;if(!(r instanceof Pn)&&"temporaryProof"in e&&"phoneNumber"in e)return fu.credentialFromResult(r);const t=e.providerId;if(!t||t===Gh.PASSWORD)return null;let n;switch(t){case Gh.GOOGLE:n=la;break;case Gh.FACEBOOK:n=ua;break;case Gh.GITHUB:n=ha;break;case Gh.TWITTER:n=fa;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?t.startsWith("saml.")?Jl._create(t,o):xa._fromParams({providerId:t,signInMethod:t,pendingToken:o,idToken:i,accessToken:s}):new Dl(t).credential({idToken:i,accessToken:s,rawNonce:c})}return r instanceof Pn?n.credentialFromError(r):n.credentialFromResult(r)}function ji(r,e){return e.catch(t=>{throw t instanceof Pn&&Ek(r,t),t}).then(t=>{const n=t.operationType,i=t.user;return{operationType:n,credential:Tk(t),additionalUserInfo:aC(t),user:jp.getOrCreate(i)}})}async function Gm(r,e){const t=await e;return{verificationId:t.verificationId,confirm:n=>ji(r,t.confirm(n))}}class bk{constructor(e,t){this.resolver=t,this.auth=xk(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ji(xT(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jp=class of{constructor(e){this._delegate=e,this.multiFactor=hC(e)}static getOrCreate(e){return of.USER_MAP.has(e)||of.USER_MAP.set(e,new of(e)),of.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ji(this.auth,Xx(this._delegate,e))}async linkWithPhoneNumber(e,t){return Gm(this.auth,UC(this._delegate,e,t))}async linkWithPopup(e){return ji(this.auth,YC(this._delegate,e,Jo))}async linkWithRedirect(e){return await $m(rn(this.auth)),iR(this._delegate,e,Jo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ji(this.auth,Jx(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Gm(this.auth,jC(this._delegate,e,t))}reauthenticateWithPopup(e){return ji(this.auth,KC(this._delegate,e,Jo))}async reauthenticateWithRedirect(e){return await $m(rn(this.auth)),rR(this._delegate,e,Jo)}sendEmailVerification(e){return YN(this._delegate,e)}async unlink(e){return await FN(this._delegate,e),this}updateEmail(e){return ZN(this._delegate,e)}updatePassword(e){return eC(this._delegate,e)}updatePhoneNumber(e){return qC(this._delegate,e)}updateProfile(e){return QN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return XN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};jp.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yh=tt;class Km{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;Yh(n,"invalid-api-key",{appName:e.name}),Yh(n,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Jo:void 0;this._delegate=t.initialize({options:{persistence:Ak(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(PP),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?jp.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){hN(this._delegate,e,t)}applyActionCode(e){return UN(this._delegate,e)}checkActionCode(e){return Qx(this._delegate,e)}confirmPasswordReset(e,t){return VN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return ji(this._delegate,qN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return KN(this._delegate,e)}isSignInWithEmailLink(e){return HN(this._delegate,e)}async getRedirectResult(){Yh(tm(),this._delegate,"operation-not-supported-in-this-environment");const e=await aR(this._delegate,Jo);return e?ji(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){ok(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:s,complete:a}=ly(e,t,n);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,t,n){const{next:i,error:s,complete:a}=ly(e,t,n);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,t){return zN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return BN(this._delegate,e,t||void 0)}async setPersistence(e){_k(this._delegate,e);let t;switch(e){case us.SESSION:t=hu;break;case us.LOCAL:t=await fs(Mf)._isAvailable()?Mf:av;break;case us.NONE:t=Xl;break;default:return ni("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ji(this._delegate,DN(this._delegate))}signInWithCredential(e){return ji(this._delegate,Fp(this._delegate,e))}signInWithCustomToken(e){return ji(this._delegate,MN(this._delegate,e))}signInWithEmailAndPassword(e,t){return ji(this._delegate,WN(this._delegate,e,t))}signInWithEmailLink(e,t){return ji(this._delegate,$N(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Gm(this._delegate,VC(this._delegate,e,t))}async signInWithPopup(e){return Yh(tm(),this._delegate,"operation-not-supported-in-this-environment"),ji(this._delegate,GC(this._delegate,e,Jo))}async signInWithRedirect(e){return Yh(tm(),this._delegate,"operation-not-supported-in-this-environment"),await $m(this._delegate),eR(this._delegate,e,Jo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return jN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Km.Persistence=us;function ly(r,e,t){let n=r;typeof r!="function"&&({next:n,error:e,complete:t}=r);const i=n;return{next:a=>i(a&&jp.getOrCreate(a)),error:e,complete:t}}function Ak(r,e){const t=yk(r,e);if(typeof self<"u"&&!t.includes(Mf)&&t.push(Mf),typeof window<"u")for(const n of[av,hu])t.includes(n)||t.push(n);return t.includes(Xl)||t.push(Xl),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.providerId="phone",this._delegate=new fu(xT(pn.auth()))}static credential(e,t){return fu.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}pv.PHONE_SIGN_IN_METHOD=fu.PHONE_SIGN_IN_METHOD;pv.PROVIDER_ID=fu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=tt;class Sk{constructor(e,t,n=pn.app()){var i;Ik((i=n.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new MC(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="auth-compat";function Nk(r){r.INTERNAL.registerComponent(new jn(Pk,e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Km(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ul.EMAIL_SIGNIN,PASSWORD_RESET:ul.PASSWORD_RESET,RECOVER_EMAIL:ul.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ul.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ul.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ul.VERIFY_EMAIL}},EmailAuthProvider:yc,FacebookAuthProvider:ua,GithubAuthProvider:ha,GoogleAuthProvider:la,OAuthProvider:Dl,SAMLAuthProvider:W0,PhoneAuthProvider:pv,PhoneMultiFactorGenerator:gT,RecaptchaVerifier:Sk,TwitterAuthProvider:fa,Auth:Km,AuthCredential:gh,Error:Pn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),r.registerVersion(ck,uk)}Nk(pn);var hy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var au,ET;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,A){function C(){}C.prototype=A.prototype,R.D=A.prototype,R.prototype=new C,R.prototype.constructor=R,R.C=function(V,b,S){for(var k=Array(arguments.length-2),ie=2;ie<arguments.length;ie++)k[ie-2]=arguments[ie];return A.prototype[b].apply(V,k)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(R,A,C){C||(C=0);var V=Array(16);if(typeof A=="string")for(var b=0;16>b;++b)V[b]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(b=0;16>b;++b)V[b]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=R.g[0],C=R.g[1],b=R.g[2];var S=R.g[3],k=A+(S^C&(b^S))+V[0]+3614090360&4294967295;A=C+(k<<7&4294967295|k>>>25),k=S+(b^A&(C^b))+V[1]+3905402710&4294967295,S=A+(k<<12&4294967295|k>>>20),k=b+(C^S&(A^C))+V[2]+606105819&4294967295,b=S+(k<<17&4294967295|k>>>15),k=C+(A^b&(S^A))+V[3]+3250441966&4294967295,C=b+(k<<22&4294967295|k>>>10),k=A+(S^C&(b^S))+V[4]+4118548399&4294967295,A=C+(k<<7&4294967295|k>>>25),k=S+(b^A&(C^b))+V[5]+1200080426&4294967295,S=A+(k<<12&4294967295|k>>>20),k=b+(C^S&(A^C))+V[6]+2821735955&4294967295,b=S+(k<<17&4294967295|k>>>15),k=C+(A^b&(S^A))+V[7]+4249261313&4294967295,C=b+(k<<22&4294967295|k>>>10),k=A+(S^C&(b^S))+V[8]+1770035416&4294967295,A=C+(k<<7&4294967295|k>>>25),k=S+(b^A&(C^b))+V[9]+2336552879&4294967295,S=A+(k<<12&4294967295|k>>>20),k=b+(C^S&(A^C))+V[10]+4294925233&4294967295,b=S+(k<<17&4294967295|k>>>15),k=C+(A^b&(S^A))+V[11]+2304563134&4294967295,C=b+(k<<22&4294967295|k>>>10),k=A+(S^C&(b^S))+V[12]+1804603682&4294967295,A=C+(k<<7&4294967295|k>>>25),k=S+(b^A&(C^b))+V[13]+4254626195&4294967295,S=A+(k<<12&4294967295|k>>>20),k=b+(C^S&(A^C))+V[14]+2792965006&4294967295,b=S+(k<<17&4294967295|k>>>15),k=C+(A^b&(S^A))+V[15]+1236535329&4294967295,C=b+(k<<22&4294967295|k>>>10),k=A+(b^S&(C^b))+V[1]+4129170786&4294967295,A=C+(k<<5&4294967295|k>>>27),k=S+(C^b&(A^C))+V[6]+3225465664&4294967295,S=A+(k<<9&4294967295|k>>>23),k=b+(A^C&(S^A))+V[11]+643717713&4294967295,b=S+(k<<14&4294967295|k>>>18),k=C+(S^A&(b^S))+V[0]+3921069994&4294967295,C=b+(k<<20&4294967295|k>>>12),k=A+(b^S&(C^b))+V[5]+3593408605&4294967295,A=C+(k<<5&4294967295|k>>>27),k=S+(C^b&(A^C))+V[10]+38016083&4294967295,S=A+(k<<9&4294967295|k>>>23),k=b+(A^C&(S^A))+V[15]+3634488961&4294967295,b=S+(k<<14&4294967295|k>>>18),k=C+(S^A&(b^S))+V[4]+3889429448&4294967295,C=b+(k<<20&4294967295|k>>>12),k=A+(b^S&(C^b))+V[9]+568446438&4294967295,A=C+(k<<5&4294967295|k>>>27),k=S+(C^b&(A^C))+V[14]+3275163606&4294967295,S=A+(k<<9&4294967295|k>>>23),k=b+(A^C&(S^A))+V[3]+4107603335&4294967295,b=S+(k<<14&4294967295|k>>>18),k=C+(S^A&(b^S))+V[8]+1163531501&4294967295,C=b+(k<<20&4294967295|k>>>12),k=A+(b^S&(C^b))+V[13]+2850285829&4294967295,A=C+(k<<5&4294967295|k>>>27),k=S+(C^b&(A^C))+V[2]+4243563512&4294967295,S=A+(k<<9&4294967295|k>>>23),k=b+(A^C&(S^A))+V[7]+1735328473&4294967295,b=S+(k<<14&4294967295|k>>>18),k=C+(S^A&(b^S))+V[12]+2368359562&4294967295,C=b+(k<<20&4294967295|k>>>12),k=A+(C^b^S)+V[5]+4294588738&4294967295,A=C+(k<<4&4294967295|k>>>28),k=S+(A^C^b)+V[8]+2272392833&4294967295,S=A+(k<<11&4294967295|k>>>21),k=b+(S^A^C)+V[11]+1839030562&4294967295,b=S+(k<<16&4294967295|k>>>16),k=C+(b^S^A)+V[14]+4259657740&4294967295,C=b+(k<<23&4294967295|k>>>9),k=A+(C^b^S)+V[1]+2763975236&4294967295,A=C+(k<<4&4294967295|k>>>28),k=S+(A^C^b)+V[4]+1272893353&4294967295,S=A+(k<<11&4294967295|k>>>21),k=b+(S^A^C)+V[7]+4139469664&4294967295,b=S+(k<<16&4294967295|k>>>16),k=C+(b^S^A)+V[10]+3200236656&4294967295,C=b+(k<<23&4294967295|k>>>9),k=A+(C^b^S)+V[13]+681279174&4294967295,A=C+(k<<4&4294967295|k>>>28),k=S+(A^C^b)+V[0]+3936430074&4294967295,S=A+(k<<11&4294967295|k>>>21),k=b+(S^A^C)+V[3]+3572445317&4294967295,b=S+(k<<16&4294967295|k>>>16),k=C+(b^S^A)+V[6]+76029189&4294967295,C=b+(k<<23&4294967295|k>>>9),k=A+(C^b^S)+V[9]+3654602809&4294967295,A=C+(k<<4&4294967295|k>>>28),k=S+(A^C^b)+V[12]+3873151461&4294967295,S=A+(k<<11&4294967295|k>>>21),k=b+(S^A^C)+V[15]+530742520&4294967295,b=S+(k<<16&4294967295|k>>>16),k=C+(b^S^A)+V[2]+3299628645&4294967295,C=b+(k<<23&4294967295|k>>>9),k=A+(b^(C|~S))+V[0]+4096336452&4294967295,A=C+(k<<6&4294967295|k>>>26),k=S+(C^(A|~b))+V[7]+1126891415&4294967295,S=A+(k<<10&4294967295|k>>>22),k=b+(A^(S|~C))+V[14]+2878612391&4294967295,b=S+(k<<15&4294967295|k>>>17),k=C+(S^(b|~A))+V[5]+4237533241&4294967295,C=b+(k<<21&4294967295|k>>>11),k=A+(b^(C|~S))+V[12]+1700485571&4294967295,A=C+(k<<6&4294967295|k>>>26),k=S+(C^(A|~b))+V[3]+2399980690&4294967295,S=A+(k<<10&4294967295|k>>>22),k=b+(A^(S|~C))+V[10]+4293915773&4294967295,b=S+(k<<15&4294967295|k>>>17),k=C+(S^(b|~A))+V[1]+2240044497&4294967295,C=b+(k<<21&4294967295|k>>>11),k=A+(b^(C|~S))+V[8]+1873313359&4294967295,A=C+(k<<6&4294967295|k>>>26),k=S+(C^(A|~b))+V[15]+4264355552&4294967295,S=A+(k<<10&4294967295|k>>>22),k=b+(A^(S|~C))+V[6]+2734768916&4294967295,b=S+(k<<15&4294967295|k>>>17),k=C+(S^(b|~A))+V[13]+1309151649&4294967295,C=b+(k<<21&4294967295|k>>>11),k=A+(b^(C|~S))+V[4]+4149444226&4294967295,A=C+(k<<6&4294967295|k>>>26),k=S+(C^(A|~b))+V[11]+3174756917&4294967295,S=A+(k<<10&4294967295|k>>>22),k=b+(A^(S|~C))+V[2]+718787259&4294967295,b=S+(k<<15&4294967295|k>>>17),k=C+(S^(b|~A))+V[9]+3951481745&4294967295,R.g[0]=R.g[0]+A&4294967295,R.g[1]=R.g[1]+(b+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+b&4294967295,R.g[3]=R.g[3]+S&4294967295}n.prototype.u=function(R,A){A===void 0&&(A=R.length);for(var C=A-this.blockSize,V=this.B,b=this.h,S=0;S<A;){if(b==0)for(;S<=C;)i(this,R,S),S+=this.blockSize;if(typeof R=="string"){for(;S<A;)if(V[b++]=R.charCodeAt(S++),b==this.blockSize){i(this,V),b=0;break}}else for(;S<A;)if(V[b++]=R[S++],b==this.blockSize){i(this,V),b=0;break}}this.h=b,this.o+=A},n.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var A=1;A<R.length-8;++A)R[A]=0;var C=8*this.o;for(A=R.length-8;A<R.length;++A)R[A]=C&255,C/=256;for(this.u(R),R=Array(16),A=C=0;4>A;++A)for(var V=0;32>V;V+=8)R[C++]=this.g[A]>>>V&255;return R};function s(R,A){var C=o;return Object.prototype.hasOwnProperty.call(C,R)?C[R]:C[R]=A(R)}function a(R,A){this.h=A;for(var C=[],V=!0,b=R.length-1;0<=b;b--){var S=R[b]|0;V&&S==A||(C[b]=S,V=!1)}this.g=C}var o={};function c(R){return-128<=R&&128>R?s(R,function(A){return new a([A|0],0>A?-1:0)}):new a([R|0],0>R?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return d;if(0>R)return T(u(-R));for(var A=[],C=1,V=0;R>=C;V++)A[V]=R/C|0,C*=4294967296;return new a(A,0)}function l(R,A){if(R.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(R.charAt(0)=="-")return T(l(R.substring(1),A));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(A,8)),V=d,b=0;b<R.length;b+=8){var S=Math.min(8,R.length-b),k=parseInt(R.substring(b,b+S),A);8>S?(S=u(Math.pow(A,S)),V=V.j(S).add(u(k))):(V=V.j(C),V=V.add(u(k)))}return V}var d=c(0),g=c(1),p=c(16777216);r=a.prototype,r.m=function(){if(_(this))return-T(this).m();for(var R=0,A=1,C=0;C<this.g.length;C++){var V=this.i(C);R+=(0<=V?V:4294967296+V)*A,A*=4294967296}return R},r.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(_(this))return"-"+T(this).toString(R);for(var A=u(Math.pow(R,6)),C=this,V="";;){var b=K(C,A).g;C=P(C,b.j(A));var S=((0<C.g.length?C.g[0]:C.h)>>>0).toString(R);if(C=b,w(C))return S+V;for(;6>S.length;)S="0"+S;V=S+V}},r.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(var A=0;A<R.g.length;A++)if(R.g[A]!=0)return!1;return!0}function _(R){return R.h==-1}r.l=function(R){return R=P(this,R),_(R)?-1:w(R)?0:1};function T(R){for(var A=R.g.length,C=[],V=0;V<A;V++)C[V]=~R.g[V];return new a(C,~R.h).add(g)}r.abs=function(){return _(this)?T(this):this},r.add=function(R){for(var A=Math.max(this.g.length,R.g.length),C=[],V=0,b=0;b<=A;b++){var S=V+(this.i(b)&65535)+(R.i(b)&65535),k=(S>>>16)+(this.i(b)>>>16)+(R.i(b)>>>16);V=k>>>16,S&=65535,k&=65535,C[b]=k<<16|S}return new a(C,C[C.length-1]&-2147483648?-1:0)};function P(R,A){return R.add(T(A))}r.j=function(R){if(w(this)||w(R))return d;if(_(this))return _(R)?T(this).j(T(R)):T(T(this).j(R));if(_(R))return T(this.j(T(R)));if(0>this.l(p)&&0>R.l(p))return u(this.m()*R.m());for(var A=this.g.length+R.g.length,C=[],V=0;V<2*A;V++)C[V]=0;for(V=0;V<this.g.length;V++)for(var b=0;b<R.g.length;b++){var S=this.i(V)>>>16,k=this.i(V)&65535,ie=R.i(b)>>>16,ve=R.i(b)&65535;C[2*V+2*b]+=k*ve,L(C,2*V+2*b),C[2*V+2*b+1]+=S*ve,L(C,2*V+2*b+1),C[2*V+2*b+1]+=k*ie,L(C,2*V+2*b+1),C[2*V+2*b+2]+=S*ie,L(C,2*V+2*b+2)}for(V=0;V<A;V++)C[V]=C[2*V+1]<<16|C[2*V];for(V=A;V<2*A;V++)C[V]=0;return new a(C,0)};function L(R,A){for(;(R[A]&65535)!=R[A];)R[A+1]+=R[A]>>>16,R[A]&=65535,A++}function F(R,A){this.g=R,this.h=A}function K(R,A){if(w(A))throw Error("division by zero");if(w(R))return new F(d,d);if(_(R))return A=K(T(R),A),new F(T(A.g),T(A.h));if(_(A))return A=K(R,T(A)),new F(T(A.g),A.h);if(30<R.g.length){if(_(R)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var C=g,V=A;0>=V.l(R);)C=se(C),V=se(V);var b=ce(C,1),S=ce(V,1);for(V=ce(V,2),C=ce(C,2);!w(V);){var k=S.add(V);0>=k.l(R)&&(b=b.add(C),S=k),V=ce(V,1),C=ce(C,1)}return A=P(R,b.j(A)),new F(b,A)}for(b=d;0<=R.l(A);){for(C=Math.max(1,Math.floor(R.m()/A.m())),V=Math.ceil(Math.log(C)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),S=u(C),k=S.j(A);_(k)||0<k.l(R);)C-=V,S=u(C),k=S.j(A);w(S)&&(S=g),b=b.add(S),R=P(R,k)}return new F(b,R)}r.A=function(R){return K(this,R).h},r.and=function(R){for(var A=Math.max(this.g.length,R.g.length),C=[],V=0;V<A;V++)C[V]=this.i(V)&R.i(V);return new a(C,this.h&R.h)},r.or=function(R){for(var A=Math.max(this.g.length,R.g.length),C=[],V=0;V<A;V++)C[V]=this.i(V)|R.i(V);return new a(C,this.h|R.h)},r.xor=function(R){for(var A=Math.max(this.g.length,R.g.length),C=[],V=0;V<A;V++)C[V]=this.i(V)^R.i(V);return new a(C,this.h^R.h)};function se(R){for(var A=R.g.length+1,C=[],V=0;V<A;V++)C[V]=R.i(V)<<1|R.i(V-1)>>>31;return new a(C,R.h)}function ce(R,A){var C=A>>5;A%=32;for(var V=R.g.length-C,b=[],S=0;S<V;S++)b[S]=0<A?R.i(S+C)>>>A|R.i(S+C+1)<<32-A:R.i(S+C);return new a(b,R.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,ET=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=l,au=a}).apply(typeof hy<"u"?hy:typeof self<"u"?self:typeof window<"u"?window:{});var s0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bT,cf,AT,S0,Ym,IT,ST,PT;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,x,N){return f==Array.prototype||f==Object.prototype||(f[x]=N.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof s0=="object"&&s0];for(var x=0;x<f.length;++x){var N=f[x];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var n=t(this);function i(f,x){if(x)e:{var N=n;f=f.split(".");for(var z=0;z<f.length-1;z++){var pe=f[z];if(!(pe in N))break e;N=N[pe]}f=f[f.length-1],z=N[f],x=x(z),x!=z&&x!=null&&e(N,f,{configurable:!0,writable:!0,value:x})}}function s(f,x){f instanceof String&&(f+="");var N=0,z=!1,pe={next:function(){if(!z&&N<f.length){var Ie=N++;return{value:x(Ie,f[Ie]),done:!1}}return z=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(f){return f||function(){return s(this,function(x,N){return N})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(f){var x=typeof f;return x=x!="object"?x:f?Array.isArray(f)?"array":x:"null",x=="array"||x=="object"&&typeof f.length=="number"}function u(f){var x=typeof f;return x=="object"&&f!=null||x=="function"}function l(f,x,N){return f.call.apply(f.bind,arguments)}function d(f,x,N){if(!f)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,z),f.apply(x,pe)}}return function(){return f.apply(x,arguments)}}function g(f,x,N){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:d,g.apply(null,arguments)}function p(f,x){var N=Array.prototype.slice.call(arguments,1);return function(){var z=N.slice();return z.push.apply(z,arguments),f.apply(this,z)}}function w(f,x){function N(){}N.prototype=x.prototype,f.aa=x.prototype,f.prototype=new N,f.prototype.constructor=f,f.Qb=function(z,pe,Ie){for(var Qe=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Qe[Bt-2]=arguments[Bt];return x.prototype[pe].apply(z,Qe)}}function _(f){const x=f.length;if(0<x){const N=Array(x);for(let z=0;z<x;z++)N[z]=f[z];return N}return[]}function T(f,x){for(let N=1;N<arguments.length;N++){const z=arguments[N];if(c(z)){const pe=f.length||0,Ie=z.length||0;f.length=pe+Ie;for(let Qe=0;Qe<Ie;Qe++)f[pe+Qe]=z[Qe]}else f.push(z)}}class P{constructor(x,N){this.i=x,this.j=N,this.h=0,this.g=null}get(){let x;return 0<this.h?(this.h--,x=this.g,this.g=x.next,x.next=null):x=this.i(),x}}function L(f){return/^[\s\xa0]*$/.test(f)}function F(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var se=F().indexOf("Gecko")!=-1&&!(F().toLowerCase().indexOf("webkit")!=-1&&F().indexOf("Edge")==-1)&&!(F().indexOf("Trident")!=-1||F().indexOf("MSIE")!=-1)&&F().indexOf("Edge")==-1;function ce(f,x,N){for(const z in f)x.call(N,f[z],z,f)}function R(f,x){for(const N in f)x.call(void 0,f[N],N,f)}function A(f){const x={};for(const N in f)x[N]=f[N];return x}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,x){let N,z;for(let pe=1;pe<arguments.length;pe++){z=arguments[pe];for(N in z)f[N]=z[N];for(let Ie=0;Ie<C.length;Ie++)N=C[Ie],Object.prototype.hasOwnProperty.call(z,N)&&(f[N]=z[N])}}function b(f){var x=1;f=f.split(":");const N=[];for(;0<x&&f.length;)N.push(f.shift()),x--;return f.length&&N.push(f.join(":")),N}function S(f){o.setTimeout(()=>{throw f},0)}function k(){var f=Ce;let x=null;return f.g&&(x=f.g,f.g=f.g.next,f.g||(f.h=null),x.next=null),x}class ie{constructor(){this.h=this.g=null}add(x,N){const z=ve.get();z.set(x,N),this.h?this.h.next=z:this.g=z,this.h=z}}var ve=new P(()=>new Te,f=>f.reset());class Te{constructor(){this.next=this.g=this.h=null}set(x,N){this.h=x,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,_e=!1,Ce=new ie,Fe=()=>{const f=o.Promise.resolve(void 0);Ne=()=>{f.then(nt)}};var nt=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(N){S(N)}var x=ve;x.j(f),100>x.h&&(x.h++,f.next=x.g,x.g=f)}_e=!1};function E(){this.s=this.s,this.C=this.C}E.prototype.s=!1,E.prototype.ma=function(){this.s||(this.s=!0,this.N())},E.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(f,x){this.type=f,this.g=this.target=x,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,x=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const N=()=>{};o.addEventListener("test",N,x),o.removeEventListener("test",N,x)}catch{}return f}();function U(f,x){if(D.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var N=this.type=f.type,z=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=x,x=f.relatedTarget){if(se){e:{try{K(x.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(x=null)}}else N=="mouseover"?x=f.fromElement:N=="mouseout"&&(x=f.toElement);this.relatedTarget=x,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:J[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&U.aa.h.call(this)}}w(U,D);var J={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),le=0;function ue(f,x,N,z,pe){this.listener=f,this.proxy=null,this.src=x,this.type=N,this.capture=!!z,this.ha=pe,this.key=++le,this.da=this.fa=!1}function xe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Be(f){this.src=f,this.g={},this.h=0}Be.prototype.add=function(f,x,N,z,pe){var Ie=f.toString();f=this.g[Ie],f||(f=this.g[Ie]=[],this.h++);var Qe=Ze(f,x,z,pe);return-1<Qe?(x=f[Qe],N||(x.fa=!1)):(x=new ue(x,this.src,Ie,!!z,pe),x.fa=N,f.push(x)),x};function We(f,x){var N=x.type;if(N in f.g){var z=f.g[N],pe=Array.prototype.indexOf.call(z,x,void 0),Ie;(Ie=0<=pe)&&Array.prototype.splice.call(z,pe,1),Ie&&(xe(x),f.g[N].length==0&&(delete f.g[N],f.h--))}}function Ze(f,x,N,z){for(var pe=0;pe<f.length;++pe){var Ie=f[pe];if(!Ie.da&&Ie.listener==x&&Ie.capture==!!N&&Ie.ha==z)return pe}return-1}var at="closure_lm_"+(1e6*Math.random()|0),ke={};function ne(f,x,N,z,pe){if(Array.isArray(x)){for(var Ie=0;Ie<x.length;Ie++)ne(f,x[Ie],N,z,pe);return null}return N=Ft(N),f&&f[ae]?f.K(x,N,u(z)?!!z.capture:!1,pe):ze(f,x,N,!1,z,pe)}function ze(f,x,N,z,pe,Ie){if(!x)throw Error("Invalid event type");var Qe=u(pe)?!!pe.capture:!!pe,Bt=Et(f);if(Bt||(f[at]=Bt=new Be(f)),N=Bt.add(x,N,z,Qe,Ie),N.proxy)return N;if(z=_t(),N.proxy=z,z.src=f,z.listener=N,f.addEventListener)B||(pe=Qe),pe===void 0&&(pe=!1),f.addEventListener(x.toString(),z,pe);else if(f.attachEvent)f.attachEvent(ct(x.toString()),z);else if(f.addListener&&f.removeListener)f.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return N}function _t(){function f(N){return x.call(f.src,f.listener,N)}const x=ut;return f}function $e(f,x,N,z,pe){if(Array.isArray(x))for(var Ie=0;Ie<x.length;Ie++)$e(f,x[Ie],N,z,pe);else z=u(z)?!!z.capture:!!z,N=Ft(N),f&&f[ae]?(f=f.i,x=String(x).toString(),x in f.g&&(Ie=f.g[x],N=Ze(Ie,N,z,pe),-1<N&&(xe(Ie[N]),Array.prototype.splice.call(Ie,N,1),Ie.length==0&&(delete f.g[x],f.h--)))):f&&(f=Et(f))&&(x=f.g[x.toString()],f=-1,x&&(f=Ze(x,N,z,pe)),(N=-1<f?x[f]:null)&&rt(N))}function rt(f){if(typeof f!="number"&&f&&!f.da){var x=f.src;if(x&&x[ae])We(x.i,f);else{var N=f.type,z=f.proxy;x.removeEventListener?x.removeEventListener(N,z,f.capture):x.detachEvent?x.detachEvent(ct(N),z):x.addListener&&x.removeListener&&x.removeListener(z),(N=Et(x))?(We(N,f),N.h==0&&(N.src=null,x[at]=null)):xe(f)}}}function ct(f){return f in ke?ke[f]:ke[f]="on"+f}function ut(f,x){if(f.da)f=!0;else{x=new U(x,this);var N=f.listener,z=f.ha||f.src;f.fa&&rt(f),f=N.call(z,x)}return f}function Et(f){return f=f[at],f instanceof Be?f:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(f){return typeof f=="function"?f:(f[At]||(f[At]=function(x){return f.handleEvent(x)}),f[At])}function It(){E.call(this),this.i=new Be(this),this.M=this,this.F=null}w(It,E),It.prototype[ae]=!0,It.prototype.removeEventListener=function(f,x,N,z){$e(this,f,x,N,z)};function Ct(f,x){var N,z=f.F;if(z)for(N=[];z;z=z.F)N.push(z);if(f=f.M,z=x.type||x,typeof x=="string")x=new D(x,f);else if(x instanceof D)x.target=x.target||f;else{var pe=x;x=new D(z,f),V(x,pe)}if(pe=!0,N)for(var Ie=N.length-1;0<=Ie;Ie--){var Qe=x.g=N[Ie];pe=Ht(Qe,z,!0,x)&&pe}if(Qe=x.g=f,pe=Ht(Qe,z,!0,x)&&pe,pe=Ht(Qe,z,!1,x)&&pe,N)for(Ie=0;Ie<N.length;Ie++)Qe=x.g=N[Ie],pe=Ht(Qe,z,!1,x)&&pe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,x;for(x in f.g){for(var N=f.g[x],z=0;z<N.length;z++)xe(N[z]);delete f.g[x],f.h--}}this.F=null},It.prototype.K=function(f,x,N,z){return this.i.add(String(f),x,!1,N,z)},It.prototype.L=function(f,x,N,z){return this.i.add(String(f),x,!0,N,z)};function Ht(f,x,N,z){if(x=f.i.g[String(x)],!x)return!0;x=x.concat();for(var pe=!0,Ie=0;Ie<x.length;++Ie){var Qe=x[Ie];if(Qe&&!Qe.da&&Qe.capture==N){var Bt=Qe.listener,Xt=Qe.ha||Qe.src;Qe.fa&&We(f.i,Qe),pe=Bt.call(Xt,z)!==!1&&pe}}return pe&&!z.defaultPrevented}function Rt(f,x,N){if(typeof f=="function")N&&(f=g(f,N));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(x)?-1:o.setTimeout(f,x||0)}function qt(f){f.g=Rt(()=>{f.g=null,f.i&&(f.i=!1,qt(f))},f.l);const x=f.h;f.h=null,f.m.apply(null,x)}class pt extends E{constructor(x,N){super(),this.m=x,this.l=N,this.h=null,this.i=!1,this.g=null}j(x){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(f){E.call(this),this.h=f,this.g={}}w(Dr,E);var Gt=[];function qn(f){ce(f.g,function(x,N){this.g.hasOwnProperty(N)&&rt(x)},f),f.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),qn(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=o.JSON.stringify,Tr=o.JSON.parse,Li=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Kt(){}Kt.prototype.h=null;function Qi(f){return f.h||(f.h=f.i())}function Er(){}var bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mi(){D.call(this,"d")}w(mi,D);function cr(){D.call(this,"c")}w(cr,D);var Nt={},er=null;function Di(){return er=er||new It}Nt.La="serverreachability";function Kr(f){D.call(this,Nt.La,f)}w(Kr,D);function Rn(f){const x=Di();Ct(x,new Kr(x))}Nt.STAT_EVENT="statevent";function vi(f,x){D.call(this,Nt.STAT_EVENT,f),this.stat=x}w(vi,D);function wt(f){const x=Di();Ct(x,new vi(x,f))}Nt.Ma="timingevent";function si(f,x){D.call(this,Nt.Ma,f),this.size=x}w(si,D);function mn(f,x){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},x)}function Yr(){this.g=!0}Yr.prototype.xa=function(){this.g=!1};function Hr(f,x,N,z,pe,Ie){f.info(function(){if(f.g)if(Ie)for(var Qe="",Bt=Ie.split("&"),Xt=0;Xt<Bt.length;Xt++){var Vt=Bt[Xt].split("=");if(1<Vt.length){var fr=Vt[0];Vt=Vt[1];var Pr=fr.split("_");Qe=2<=Pr.length&&Pr[1]=="type"?Qe+(fr+"="+Vt+"&"):Qe+(fr+"=redacted&")}}else Qe=null;else Qe=Ie;return"XMLHTTP REQ ("+z+") [attempt "+pe+"]: "+x+`
`+N+`
`+Qe})}function Ur(f,x,N,z,pe,Ie,Qe){f.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+pe+"]: "+x+`
`+N+`
`+Ie+" "+Qe})}function j(f,x,N,z){f.info(function(){return"XMLHTTP TEXT ("+x+"): "+Y(f,N)+(z?" "+z:"")})}function ee(f,x){f.info(function(){return"TIMEOUT: "+x})}Yr.prototype.info=function(){};function Y(f,x){if(!f.g)return x;if(!x)return null;try{var N=JSON.parse(x);if(N){for(f=0;f<N.length;f++)if(Array.isArray(N[f])){var z=N[f];if(!(2>z.length)){var pe=z[1];if(Array.isArray(pe)&&!(1>pe.length)){var Ie=pe[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var Qe=1;Qe<pe.length;Qe++)pe[Qe]=""}}}}return tr(N)}catch{return x}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},te;function ye(){}w(ye,Kt),ye.prototype.g=function(){return new XMLHttpRequest},ye.prototype.i=function(){return{}},te=new ye;function Re(f,x,N,z){this.j=f,this.i=x,this.l=N,this.R=z||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Ee={},Pe={};function Ke(f,x,N){f.L=1,f.v=Na(yi(x)),f.m=N,f.P=!0,it(f,null)}function it(f,x){f.F=Date.now(),lt(f),f.A=yi(f.v);var N=f.A,z=f.R;Array.isArray(z)||(z=[String(z)]),Mt(N.i,"t",z),f.C=0,N=f.j.J,f.h=new we,f.g=O(f.j,N?x:null,!f.m),0<f.O&&(f.M=new pt(g(f.Y,f,f.g),f.O)),x=f.U,N=f.g,z=f.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Gt[0]=pe.toString()),pe=Gt);for(var Ie=0;Ie<pe.length;Ie++){var Qe=ne(N,pe[Ie],z||x.handleEvent,!1,x.h||x);if(!Qe)break;x.g[Qe.key]=Qe}x=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),x["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,x)):(f.u="GET",f.g.ea(f.A,f.u,null,x)),Rn(),Hr(f.i,f.u,f.A,f.l,f.R,f.m)}Re.prototype.ca=function(f){f=f.target;const x=this.M;x&&An(f)==3?x.j():this.Y(f)},Re.prototype.Y=function(f){try{if(f==this.g)e:{const Pr=An(this.g);var x=this.g.Ba();const Ms=this.g.Z();if(!(3>Pr)&&(Pr!=3||this.g&&(this.h.h||this.g.oa()||Ku(this.g)))){this.J||Pr!=4||x==7||(x==8||0>=Ms?Rn(3):Rn(2)),rr(this);var N=this.g.Z();this.X=N;t:if(gt(this)){var z=Ku(this.g);f="";var pe=z.length,Ie=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),nr(this);var Qe="";break t}this.h.i=new o.TextDecoder}for(x=0;x<pe;x++)this.h.h=!0,f+=this.h.i.decode(z[x],{stream:!(Ie&&x==pe-1)});z.length=0,this.h.g+=f,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=N==200,Ur(this.i,this.u,this.A,this.l,this.R,Pr,N),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Xt=this.g;if((Bt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Bt)){var Vt=Bt;break t}}Vt=null}if(N=Vt)j(this.i,this.l,N,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_i(this,N);else{this.o=!1,this.s=3,wt(12),br(this),nr(this);break e}}if(this.P){N=!0;let Hn;for(;!this.J&&this.C<Qe.length;)if(Hn=et(this,Qe),Hn==Pe){Pr==4&&(this.s=4,wt(14),N=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Ee){this.s=4,wt(15),j(this.i,this.l,Qe,"[Invalid Chunk]"),N=!1;break}else j(this.i,this.l,Hn,null),_i(this,Hn);if(gt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pr!=4||Qe.length!=0||this.h.h||(this.s=1,wt(16),N=!1),this.o=this.o&&N,!N)j(this.i,this.l,Qe,"[Invalid Chunked Response]"),br(this),nr(this);else if(0<Qe.length&&!this.W){this.W=!0;var fr=this.j;fr.g==this&&fr.ba&&!fr.M&&(fr.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),Po(fr),fr.M=!0,wt(11))}}else j(this.i,this.l,Qe,null),_i(this,Qe);Pr==4&&br(this),this.o&&!this.J&&(Pr==4?ra(this.j,this):(this.o=!1,lt(this)))}else ea(this.g),N==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),br(this),nr(this)}}}catch{}finally{}};function gt(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function et(f,x){var N=f.C,z=x.indexOf(`
`,N);return z==-1?Pe:(N=Number(x.substring(N,z)),isNaN(N)?Ee:(z+=1,z+N>x.length?Pe:(x=x.slice(z,z+N),f.C=z+N,x)))}Re.prototype.cancel=function(){this.J=!0,br(this)};function lt(f){f.S=Date.now()+f.I,Lt(f,f.I)}function Lt(f,x){if(f.B!=null)throw Error("WatchDog timer not null");f.B=mn(g(f.ba,f),x)}function rr(f){f.B&&(o.clearTimeout(f.B),f.B=null)}Re.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ee(this.i,this.A),this.L!=2&&(Rn(),wt(17)),br(this),this.s=2,nr(this)):Lt(this,this.S-f)};function nr(f){f.j.G==0||f.J||ra(f.j,f)}function br(f){rr(f);var x=f.M;x&&typeof x.ma=="function"&&x.ma(),f.M=null,qn(f.U),f.g&&(x=f.g,f.g=null,x.abort(),x.ma())}function _i(f,x){try{var N=f.j;if(N.G!=0&&(N.g==f||Wn(N.h,f))){if(!f.K&&Wn(N.h,f)&&N.G==3){try{var z=N.Da.g.parse(x)}catch{z=null}if(Array.isArray(z)&&z.length==3){var pe=z;if(pe[0]==0){e:if(!N.u){if(N.g)if(N.g.F+3e3<f.F)Os(N),bo(N);else break e;Da(N),wt(18)}}else N.za=pe[1],0<N.za-N.T&&37500>pe[2]&&N.F&&N.v==0&&!N.C&&(N.C=mn(g(N.Za,N),6e3));if(1>=es(N.h)&&N.ca){try{N.ca()}catch{}N.ca=void 0}}else ai(N,11)}else if((f.K||N.g==f)&&Os(N),!L(x))for(pe=N.Da.g.parse(x),x=0;x<pe.length;x++){let Vt=pe[x];if(N.T=Vt[0],Vt=Vt[1],N.G==2)if(Vt[0]=="c"){N.K=Vt[1],N.ia=Vt[2];const fr=Vt[3];fr!=null&&(N.la=fr,N.j.info("VER="+N.la));const Pr=Vt[4];Pr!=null&&(N.Aa=Pr,N.j.info("SVER="+N.Aa));const Ms=Vt[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(z=1.5*Ms,N.L=z,N.j.info("backChannelRequestTimeoutMs_="+z)),z=N;const Hn=f.g;if(Hn){const na=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Ie=z.h;Ie.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Fr(Ie,Ie.h),Ie.h=null))}if(z.D){const ia=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;ia&&(z.ya=ia,dr(z.I,z.D,ia))}}N.G=3,N.l&&N.l.ua(),N.ba&&(N.R=Date.now()-f.F,N.j.info("Handshake RTT: "+N.R+"ms")),z=N;var Qe=f;if(z.qa=v(z,z.J?z.ia:null,z.W),Qe.K){Ac(z.h,Qe);var Bt=Qe,Xt=z.L;Xt&&(Bt.I=Xt),Bt.B&&(rr(Bt),lt(Bt)),z.g=Qe}else So(z);0<N.i.length&&Ao(N)}else Vt[0]!="stop"&&Vt[0]!="close"||ai(N,7);else N.G==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?ai(N,7):Fs(N):Vt[0]!="noop"&&N.l&&N.l.ta(Vt),N.v=0)}}Rn(4)}catch{}}var Cs=class{constructor(f,x){this.g=f,this.map=x}};function Zi(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fi(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function es(f){return f.h?1:f.g?f.g.size:0}function Wn(f,x){return f.h?f.h==x:f.g?f.g.has(x):!1}function Fr(f,x){f.g?f.g.add(x):f.h=x}function Ac(f,x){f.h&&f.h==x?f.h=null:f.g&&f.g.has(x)&&f.g.delete(x)}Zi.prototype.cancel=function(){if(this.i=Ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function Ic(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let x=f.i;for(const N of f.g.values())x=x.concat(N.D);return x}return _(f.i)}function qu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var x=[],N=f.length,z=0;z<N;z++)x.push(f[z]);return x}x=[],N=0;for(z in f)x[N++]=f[z];return x}function Sc(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var x=[];f=f.length;for(var N=0;N<f;N++)x.push(N);return x}x=[],N=0;for(const z in f)x[N++]=z;return x}}}function Wu(f,x){if(f.forEach&&typeof f.forEach=="function")f.forEach(x,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,x,void 0);else for(var N=Sc(f),z=qu(f),pe=z.length,Ie=0;Ie<pe;Ie++)x.call(void 0,z[Ie],N&&N[Ie],f)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function go(f,x){if(f){f=f.split("&");for(var N=0;N<f.length;N++){var z=f[N].indexOf("="),pe=null;if(0<=z){var Ie=f[N].substring(0,z);pe=f[N].substring(z+1)}else Ie=f[N];x(Ie,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Xr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Xr){this.h=f.h,Pa(this,f.j),this.o=f.o,this.g=f.g,mo(this,f.s),this.l=f.l;var x=f.i,N=new Qs;N.i=x.i,x.g&&(N.g=new Map(x.g),N.h=x.h),Pc(this,N),this.m=f.m}else f&&(x=String(f).match(Oi))?(this.h=!1,Pa(this,x[1]||"",!0),this.o=Ca(x[2]||""),this.g=Ca(x[3]||"",!0),mo(this,x[4]),this.l=Ca(x[5]||"",!0),Pc(this,x[6]||"",!0),this.m=Ca(x[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}Xr.prototype.toString=function(){var f=[],x=this.j;x&&f.push(Rs(x,zu,!0),":");var N=this.g;return(N||x=="file")&&(f.push("//"),(x=this.o)&&f.push(Rs(x,zu,!0),"@"),f.push(encodeURIComponent(String(N)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.s,N!=null&&f.push(":",String(N))),(N=this.l)&&(this.g&&N.charAt(0)!="/"&&f.push("/"),f.push(Rs(N,N.charAt(0)=="/"?ks:Rh,!0))),(N=this.i.toString())&&f.push("?",N),(N=this.m)&&f.push("#",Rs(N,_o)),f.join("")};function yi(f){return new Xr(f)}function Pa(f,x,N){f.j=N?Ca(x,!0):x,f.j&&(f.j=f.j.replace(/:$/,""))}function mo(f,x){if(x){if(x=Number(x),isNaN(x)||0>x)throw Error("Bad port number "+x);f.s=x}else f.s=null}function Pc(f,x,N){x instanceof Qs?(f.i=x,kh(f.i,f.h)):(N||(x=Rs(x,vo)),f.i=new Qs(x,f.h))}function dr(f,x,N){f.i.set(x,N)}function Na(f){return dr(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ca(f,x){return f?x?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Rs(f,x,N){return typeof f=="string"?(f=encodeURI(f).replace(x,Ch),N&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Ch(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var zu=/[#\/\?@]/g,Rh=/[#\?:]/g,ks=/[#\?]/g,vo=/[#\?@]/g,_o=/#/g;function Qs(f,x){this.h=this.g=null,this.i=f||null,this.j=!!x}function Or(f){f.g||(f.g=new Map,f.h=0,f.i&&go(f.i,function(x,N){f.add(decodeURIComponent(x.replace(/\+/g," ")),N)}))}r=Qs.prototype,r.add=function(f,x){Or(this),this.i=null,f=Zs(this,f);var N=this.g.get(f);return N||this.g.set(f,N=[]),N.push(x),this.h+=1,this};function Hu(f,x){Or(f),x=Zs(f,x),f.g.has(x)&&(f.i=null,f.h-=f.g.get(x).length,f.g.delete(x))}function Nc(f,x){return Or(f),x=Zs(f,x),f.g.has(x)}r.forEach=function(f,x){Or(this),this.g.forEach(function(N,z){N.forEach(function(pe){f.call(x,pe,z,this)},this)},this)},r.na=function(){Or(this);const f=Array.from(this.g.values()),x=Array.from(this.g.keys()),N=[];for(let z=0;z<x.length;z++){const pe=f[z];for(let Ie=0;Ie<pe.length;Ie++)N.push(x[z])}return N},r.V=function(f){Or(this);let x=[];if(typeof f=="string")Nc(this,f)&&(x=x.concat(this.g.get(Zs(this,f))));else{f=Array.from(this.g.values());for(let N=0;N<f.length;N++)x=x.concat(f[N])}return x},r.set=function(f,x){return Or(this),this.i=null,f=Zs(this,f),Nc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[x]),this.h+=1,this},r.get=function(f,x){return f?(f=this.V(f),0<f.length?String(f[0]):x):x};function Mt(f,x,N){Hu(f,x),0<N.length&&(f.i=null,f.g.set(Zs(f,x),_(N)),f.h+=N.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],x=Array.from(this.g.keys());for(var N=0;N<x.length;N++){var z=x[N];const Ie=encodeURIComponent(String(z)),Qe=this.V(z);for(z=0;z<Qe.length;z++){var pe=Ie;Qe[z]!==""&&(pe+="="+encodeURIComponent(String(Qe[z]))),f.push(pe)}}return this.i=f.join("&")};function Zs(f,x){return x=String(x),f.j&&(x=x.toLowerCase()),x}function kh(f,x){x&&!f.j&&(Or(f),f.i=null,f.g.forEach(function(N,z){var pe=z.toLowerCase();z!=pe&&(Hu(this,z),Mt(this,pe,N))},f)),f.j=x}function ms(f,x){const N=new Yr;if(o.Image){const z=new Image;z.onload=p(ts,N,"TestLoadImage: loaded",!0,x,z),z.onerror=p(ts,N,"TestLoadImage: error",!1,x,z),z.onabort=p(ts,N,"TestLoadImage: abort",!1,x,z),z.ontimeout=p(ts,N,"TestLoadImage: timeout",!1,x,z),o.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=f}else x(!1)}function $u(f,x){const N=new Yr,z=new AbortController,pe=setTimeout(()=>{z.abort(),ts(N,"TestPingServer: timeout",!1,x)},1e4);fetch(f,{signal:z.signal}).then(Ie=>{clearTimeout(pe),Ie.ok?ts(N,"TestPingServer: ok",!0,x):ts(N,"TestPingServer: server error",!1,x)}).catch(()=>{clearTimeout(pe),ts(N,"TestPingServer: error",!1,x)})}function ts(f,x,N,z,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),z(N)}catch{}}function yo(){this.g=new Li}function Cc(f,x,N){const z=N||"";try{Wu(f,function(pe,Ie){let Qe=pe;u(pe)&&(Qe=tr(pe)),x.push(z+Ie+"="+encodeURIComponent(Qe))})}catch(pe){throw x.push(z+"type="+encodeURIComponent("_badmap")),pe}}function wo(f){this.l=f.Ub||null,this.j=f.eb||!1}w(wo,Kt),wo.prototype.g=function(){return new xo(this.l,this.j)},wo.prototype.i=function(f){return function(){return f}}({});function xo(f,x){It.call(this),this.D=f,this.o=x,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(xo,It),r=xo.prototype,r.open=function(f,x){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=x,this.readyState=1,rs(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const x={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(x.body=f),(this.D||o).fetch(new Request(this.A,x)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var x=f.value?f.value:new Uint8Array(0);(x=this.v.decode(x,{stream:!f.done}))&&(this.response=this.responseText+=x)}f.done?Ls(this):rs(this),this.readyState==3&&Gu(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Ls(this))},r.Qa=function(f){this.g&&(this.response=f,Ls(this))},r.ga=function(){this.g&&Ls(this)};function Ls(f){f.readyState=4,f.l=null,f.j=null,f.v=null,rs(f)}r.setRequestHeader=function(f,x){this.u.append(f,x)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],x=this.h.entries();for(var N=x.next();!N.done;)N=N.value,f.push(N[0]+": "+N[1]),N=x.next();return f.join(`\r
`)};function rs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(xo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ds(f){let x="";return ce(f,function(N,z){x+=z,x+=":",x+=N,x+=`\r
`}),x}function Rc(f,x,N){e:{for(z in N){var z=!1;break e}z=!0}z||(N=Ds(N),typeof f=="string"?N!=null&&encodeURIComponent(String(N)):dr(f,x,N))}function hr(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(hr,It);var kc=/^https?$/i,To=["POST","PUT"];r=hr.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,x,N,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);x=x?x.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():te.g(),this.v=this.o?Qi(this.o):Qi(te),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(x,String(f),!0),this.B=!1}catch(Ie){Lc(this,Ie);return}if(f=N||"",N=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var pe in z)N.set(pe,z[pe]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const Ie of z.keys())N.set(Ie,z.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(N.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),pe=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(To,x,void 0))||z||pe||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,Qe]of N)this.g.setRequestHeader(Ie,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ns(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ie){Lc(this,Ie)}};function Lc(f,x){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=x,f.m=5,Dc(f),Ra(f)}function Dc(f){f.A||(f.A=!0,Ct(f,"complete"),Ct(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ct(this,"complete"),Ct(this,"abort"),Ra(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ra(this,!0)),hr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Fc(this):this.bb())},r.bb=function(){Fc(this)};function Fc(f){if(f.h&&typeof a<"u"&&(!f.v[1]||An(f)!=4||f.Z()!=2)){if(f.u&&An(f)==4)Rt(f.Ea,0,f);else if(Ct(f,"readystatechange"),An(f)==4){f.h=!1;try{const Qe=f.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var x=!0;break e;default:x=!1}var N;if(!(N=x)){var z;if(z=Qe===0){var pe=String(f.D).match(Oi)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),z=!kc.test(pe?pe.toLowerCase():"")}N=z}if(N)Ct(f,"complete"),Ct(f,"success");else{f.m=6;try{var Ie=2<An(f)?f.g.statusText:""}catch{Ie=""}f.l=Ie+" ["+f.Z()+"]",Dc(f)}}finally{Ra(f)}}}}function Ra(f,x){if(f.g){ns(f);const N=f.g,z=f.v[0]?()=>{}:null;f.g=null,f.v=null,x||Ct(f,"ready");try{N.onreadystatechange=z}catch{}}}function ns(f){f.I&&(o.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function An(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var x=this.g.responseText;return f&&x.indexOf(f)==0&&(x=x.substring(f.length)),Tr(x)}};function Ku(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(f){const x={};f=(f.g&&2<=An(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<f.length;z++){if(L(f[z]))continue;var N=b(f[z]);const pe=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const Ie=x[pe]||[];x[pe]=Ie,Ie.push(N)}R(x,function(z){return z.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function zn(f,x,N){return N&&N.internalChannelParams&&N.internalChannelParams[f]||x}function Eo(f){this.Aa=0,this.i=[],this.j=new Yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=zn("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=zn("baseRetryDelayMs",5e3,f),this.cb=zn("retryDelaySeedMs",1e4,f),this.Wa=zn("forwardChannelMaxRetries",2,f),this.wa=zn("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Zi(f&&f.concurrentRequestLimit),this.Da=new yo,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=Eo.prototype,r.la=8,r.G=1,r.connect=function(f,x,N,z){wt(0),this.W=f,this.H=x||{},N&&z!==void 0&&(this.H.OSID=N,this.H.OAID=z),this.F=this.X,this.I=v(this,null,this.W),Ao(this)};function Fs(f){if(ka(f),f.G==3){var x=f.U++,N=yi(f.I);if(dr(N,"SID",f.K),dr(N,"RID",x),dr(N,"TYPE","terminate"),ta(f,N),x=new Re(f,f.j,x),x.L=2,x.v=Na(yi(N)),N=!1,o.navigator&&o.navigator.sendBeacon)try{N=o.navigator.sendBeacon(x.v.toString(),"")}catch{}!N&&o.Image&&(new Image().src=x.v,N=!0),N||(x.g=O(x.j,null),x.g.ea(x.v)),x.F=Date.now(),lt(x)}Co(f)}function bo(f){f.g&&(Po(f),f.g.cancel(),f.g=null)}function ka(f){bo(f),f.u&&(o.clearTimeout(f.u),f.u=null),Os(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function Ao(f){if(!Fi(f.h)&&!f.s){f.s=!0;var x=f.Ga;Ne||Fe(),_e||(Ne(),_e=!0),Ce.add(x,f),f.B=0}}function Oc(f,x){return es(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=x.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=mn(g(f.Ga,f,x),No(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const pe=new Re(this,this.j,f);let Ie=this.o;if(this.S&&(Ie?(Ie=A(Ie),V(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(pe.H=Ie,Ie=null),this.P)e:{for(var x=0,N=0;N<this.i.length;N++){t:{var z=this.i[N];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(x+=z,4096<x){x=N;break e}if(x===4096||N===this.i.length-1){x=N+1;break e}}x=1e3}else x=1e3;x=La(this,pe,x),N=yi(this.I),dr(N,"RID",f),dr(N,"CVER",22),this.D&&dr(N,"X-HTTP-Session-Id",this.D),ta(this,N),Ie&&(this.O?x="headers="+encodeURIComponent(String(Ds(Ie)))+"&"+x:this.m&&Rc(N,this.m,Ie)),Fr(this.h,pe),this.Ua&&dr(N,"TYPE","init"),this.P?(dr(N,"$req",x),dr(N,"SID","null"),pe.T=!0,Ke(pe,N,null)):Ke(pe,N,x),this.G=2}}else this.G==3&&(f?Io(this,f):this.i.length==0||Fi(this.h)||Io(this))};function Io(f,x){var N;x?N=x.l:N=f.U++;const z=yi(f.I);dr(z,"SID",f.K),dr(z,"RID",N),dr(z,"AID",f.T),ta(f,z),f.m&&f.o&&Rc(z,f.m,f.o),N=new Re(f,f.j,N,f.B+1),f.m===null&&(N.H=f.o),x&&(f.i=x.D.concat(f.i)),x=La(f,N,1e3),N.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fr(f.h,N),Ke(N,z,x)}function ta(f,x){f.H&&ce(f.H,function(N,z){dr(x,z,N)}),f.l&&Wu({},function(N,z){dr(x,z,N)})}function La(f,x,N){N=Math.min(f.i.length,N);var z=f.l?g(f.l.Na,f.l,f):null;e:{var pe=f.i;let Ie=-1;for(;;){const Qe=["count="+N];Ie==-1?0<N?(Ie=pe[0].g,Qe.push("ofs="+Ie)):Ie=0:Qe.push("ofs="+Ie);let Bt=!0;for(let Xt=0;Xt<N;Xt++){let Vt=pe[Xt].g;const fr=pe[Xt].map;if(Vt-=Ie,0>Vt)Ie=Math.max(0,pe[Xt].g-100),Bt=!1;else try{Cc(fr,Qe,"req"+Vt+"_")}catch{z&&z(fr)}}if(Bt){z=Qe.join("&");break e}}}return f=f.i.splice(0,N),x.D=f,z}function So(f){if(!f.g&&!f.u){f.Y=1;var x=f.Fa;Ne||Fe(),_e||(Ne(),_e=!0),Ce.add(x,f),f.v=0}}function Da(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=mn(g(f.Fa,f),No(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,Yu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=mn(g(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),bo(this),Yu(this))};function Po(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function Yu(f){f.g=new Re(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var x=yi(f.qa);dr(x,"RID","rpc"),dr(x,"SID",f.K),dr(x,"AID",f.T),dr(x,"CI",f.F?"0":"1"),!f.F&&f.ja&&dr(x,"TO",f.ja),dr(x,"TYPE","xmlhttp"),ta(f,x),f.m&&f.o&&Rc(x,f.m,f.o),f.L&&(f.g.I=f.L);var N=f.g;f=f.ia,N.L=1,N.v=Na(yi(x)),N.m=null,N.P=!0,it(N,f)}r.Za=function(){this.C!=null&&(this.C=null,bo(this),Da(this),wt(19))};function Os(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function ra(f,x){var N=null;if(f.g==x){Os(f),Po(f),f.g=null;var z=2}else if(Wn(f.h,x))N=x.D,Ac(f.h,x),z=1;else return;if(f.G!=0){if(x.o)if(z==1){N=x.m?x.m.length:0,x=Date.now()-x.F;var pe=f.B;z=Di(),Ct(z,new si(z,N)),Ao(f)}else So(f);else if(pe=x.s,pe==3||pe==0&&0<x.X||!(z==1&&Oc(f,x)||z==2&&Da(f)))switch(N&&0<N.length&&(x=f.h,x.i=x.i.concat(N)),pe){case 1:ai(f,5);break;case 4:ai(f,10);break;case 3:ai(f,6);break;default:ai(f,2)}}}function No(f,x){let N=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(N*=2),N*x}function ai(f,x){if(f.j.info("Error code "+x),x==2){var N=g(f.fb,f),z=f.Xa;const pe=!z;z=new Xr(z||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pa(z,"https"),Na(z),pe?ms(z.toString(),N):$u(z.toString(),N)}else wt(2);f.G=0,f.l&&f.l.sa(x),Co(f),ka(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Co(f){if(f.G=0,f.ka=[],f.l){const x=Ic(f.h);(x.length!=0||f.i.length!=0)&&(T(f.ka,x),T(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function v(f,x,N){var z=N instanceof Xr?yi(N):new Xr(N);if(z.g!="")x&&(z.g=x+"."+z.g),mo(z,z.s);else{var pe=o.location;z=pe.protocol,x=x?x+"."+pe.hostname:pe.hostname,pe=+pe.port;var Ie=new Xr(null);z&&Pa(Ie,z),x&&(Ie.g=x),pe&&mo(Ie,pe),N&&(Ie.l=N),z=Ie}return N=f.D,x=f.ya,N&&x&&dr(z,N,x),dr(z,"VER",f.la),ta(f,z),z}function O(f,x,N){if(x&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return x=f.Ca&&!f.pa?new hr(new wo({eb:N})):new hr(f.pa),x.Ha(f.J),x}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function re(){}r=re.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function oe(){}oe.prototype.g=function(f,x){return new ge(f,x)};function ge(f,x){It.call(this),this.g=new Eo(x),this.l=f,this.h=x&&x.messageUrlParams||null,f=x&&x.messageHeaders||null,x&&x.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=x&&x.initMessageHeaders||null,x&&x.messageContentType&&(f?f["X-WebChannel-Content-Type"]=x.messageContentType:f={"X-WebChannel-Content-Type":x.messageContentType}),x&&x.va&&(f?f["X-WebChannel-Client-Profile"]=x.va:f={"X-WebChannel-Client-Profile":x.va}),this.g.S=f,(f=x&&x.Sb)&&!L(f)&&(this.g.m=f),this.v=x&&x.supportsCrossDomainXhr||!1,this.u=x&&x.sendRawJson||!1,(x=x&&x.httpSessionIdParam)&&!L(x)&&(this.g.D=x,f=this.h,f!==null&&x in f&&(f=this.h,x in f&&delete f[x])),this.j=new dt(this)}w(ge,It),ge.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Fs(this.g)},ge.prototype.o=function(f){var x=this.g;if(typeof f=="string"){var N={};N.__data__=f,f=N}else this.u&&(N={},N.__data__=tr(f),f=N);x.i.push(new Cs(x.Ya++,f)),x.G==3&&Ao(x)},ge.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,ge.aa.N.call(this)};function Oe(f){mi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var x=f.__sm__;if(x){e:{for(const N in x){f=N;break e}f=void 0}(this.i=f)&&(f=this.i,x=x!==null&&f in x?x[f]:void 0),this.data=x}else this.data=f}w(Oe,mi);function Ye(){cr.call(this),this.status=1}w(Ye,cr);function dt(f){this.g=f}w(dt,re),dt.prototype.ua=function(){Ct(this.g,"a")},dt.prototype.ta=function(f){Ct(this.g,new Oe(f))},dt.prototype.sa=function(f){Ct(this.g,new Ye)},dt.prototype.ra=function(){Ct(this.g,"b")},oe.prototype.createWebChannel=oe.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,PT=function(){return new oe},ST=function(){return Di()},IT=Nt,Ym={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,S0=X,Z.COMPLETE="complete",AT=Z,Er.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",It.prototype.listen=It.prototype.K,cf=Er,hr.prototype.listenOnce=hr.prototype.L,hr.prototype.getLastError=hr.prototype.Ka,hr.prototype.getLastErrorCode=hr.prototype.Ba,hr.prototype.getStatus=hr.prototype.Z,hr.prototype.getResponseJson=hr.prototype.Oa,hr.prototype.getResponseText=hr.prototype.oa,hr.prototype.send=hr.prototype.ea,hr.prototype.setWithCredentials=hr.prototype.Ha,bT=hr}).apply(typeof s0<"u"?s0:typeof self<"u"?self:typeof window<"u"?window:{});const fy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc=new Np("@firebase/firestore");function wl(){return sc.logLevel}function Ck(r){sc.setLogLevel(r)}function Je(r,...e){if(sc.logLevel<=Yt.DEBUG){const t=e.map(gv);sc.debug(`Firestore (${vh}): ${r}`,...t)}}function fn(r,...e){if(sc.logLevel<=Yt.ERROR){const t=e.map(gv);sc.error(`Firestore (${vh}): ${r}`,...t)}}function Ta(r,...e){if(sc.logLevel<=Yt.WARN){const t=e.map(gv);sc.warn(`Firestore (${vh}): ${r}`,...t)}}function gv(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r="Unexpected state"){const e=`FIRESTORE (${vh}) INTERNAL ASSERTION FAILED: `+r;throw fn(e),new Error(e)}function bt(r,e){r||xt()}function Rk(r,e){r||xt()}function mt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class kk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fn.UNAUTHENTICATED))}shutdown(){}}class Lk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Dk{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let n=this.i;const i=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let s=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ti,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ti)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(bt(typeof n.accessToken=="string"),new NT(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new Fn(e)}}class Fk{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ok{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Fk(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);const n=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string"),this.R=t.token,new Mk(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=Vk(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function jt(r,e){return r<e?-1:r>e?1:0}function Ql(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function RT(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zr.fromMillis(Date.now())}static fromDate(e){return zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new zr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new zr(0,0))}static max(){return new Pt(new zr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t,n){t===void 0?t=0:t>e.length&&xt(),n===void 0?n=e.length-t:n>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Bf.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Bf?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Bf{construct(e,t,n){return new Qt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const Uk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends Bf{construct(e,t,n){return new qr(e,t,n)}static isValidIdentifier(e){return Uk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Xe(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xe(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new Xe(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(t)}static emptyPath(){return new qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(Qt.fromString(e))}static fromName(e){return new ft(Qt.fromString(e).popFirst(5))}static empty(){return new ft(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function Xm(r){return r.fields.find(e=>e.kind===2)}function Hc(r){return r.fields.filter(e=>e.kind!==2)}G0.UNKNOWN_ID=-1;class P0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Vf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Vf(0,ps.min())}}function kT(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(n===1e9?new zr(t+1,0):new zr(t,n));return new ps(i,ft.empty(),e)}function LT(r){return new ps(r.readTime,r.key,-1)}class ps{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ps(Pt.min(),ft.empty(),-1)}static max(){return new ps(Pt.max(),ft.empty(),-1)}}function mv(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ft.comparator(r.documentKey,e.documentKey),t!==0?t:jt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class FT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wc(r){if(r.code!==Le.FAILED_PRECONDITION||r.message!==DT)throw r;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,n)=>{t(e)})}static reject(e){return new Se((t,n)=>{n(e)})}static waitFor(e){return new Se((t,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},c=>n(c))}),a=!0,s===i&&t()})}static or(e){let t=Se.resolve(!1);for(const n of e)t=t.next(i=>i?Se.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Se((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(l=>{a[u]=l,++o,o===s&&n(a)},l=>i(l))}})}static doWhile(e,t){return new Se((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ti,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new mf(e,t.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=vv(n.target.error);this.V.reject(new mf(e,i))}}static open(e,t,n,i){try{return new qp(t,e.transaction(i,n))}catch(s){throw new mf(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new qk(t)}}class va{constructor(e,t,n){this.name=e,this.version=t,this.p=n,va.S(Gr())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),Gc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!lu())return!1;if(va.v())return!0;const e=Gr(),t=va.S(e),n=0<t&&t<10,i=OT(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Je("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{n(new mf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new Xe(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Xe(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new mf(e,a))},i.onupgradeneeded=s=>{Je("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{Je("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=qp.open(this.db,e,s?"readonly":"readwrite",n),c=i(o).next(u=>(o.g(),u)).catch(u=>(o.abort(u),Se.reject(u))).toPromise();return c.catch(()=>{}),await o.m,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(Je("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function OT(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class jk{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Gc(this.B.delete())}}class mf extends Xe{constructor(e,t){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function xc(r){return r.name==="IndexedDbTransactionError"}class qk{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Je("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Gc(n)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),Gc(this.store.add(e))}get(e){return Gc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),Gc(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),Gc(this.store.count())}U(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new Se((a,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{a(c.target.result)}})}{const s=this.cursor(n),a=[];return this.W(s,(o,c)=>{a.push(c)}).next(()=>a)}}G(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new Se((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}})}j(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const i=this.cursor(n);return this.W(i,(s,a,o)=>o.delete())}J(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.W(i,t)}Y(e){const t=this.cursor({});return new Se((n,i)=>{t.onerror=s=>{const a=vv(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,t){const n=[];return new Se((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new jk(o),u=t(o.primaryKey,o.value,c);if(u instanceof Se){const l=u.catch(d=>(c.done(),Se.reject(d)));n.push(l)}c.isDone?i():c.K===null?o.continue():o.continue(c.K)}}).next(()=>Se.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Gc(r){return new Se((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=vv(n.target.error);t(i)}})}let dy=!1;function vv(r){const e=va.S(Gr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return dy||(dy=!0,setTimeout(()=>{throw n},0)),n}}return r}class Wk{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Je("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){xc(t)?Je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await wc(t)}await this.X(6e4)})}}class zk{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let i=t,s=!0;return Se.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Je("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(o=>{i-=o,n.add(a)});s=!1})).next(()=>t-i)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(o=>(Je("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}re(e,t){let n=e;return t.changes.forEach((i,s)=>{const a=LT(s);mv(a,n)>0&&(n=a)}),new ps(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}zi.oe=-1;function pd(r){return r==null}function Uf(r){return r===0&&1/r==-1/0}function MT(r){return typeof r=="number"&&Number.isInteger(r)&&!Uf(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=py(e)),e=Hk(r.get(t),e);return py(e)}function Hk(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function py(r){return r+""}function pa(r){const e=r.length;if(bt(e>=2),e===2)return bt(r.charAt(0)===""&&r.charAt(1)===""),Qt.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const a=r.indexOf("",s);switch((a<0||a>t)&&xt(),r.charAt(a+1)){case"":const o=r.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),n.push(c);break;case"":i+=r.substring(s,a),i+="\0";break;case"":i+=r.substring(s,a+1);break;default:xt()}s=a+2}return new Qt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gy=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(r,e){return[r,Si(e)]}function BT(r,e,t){return[r,Si(e),t]}const $k={},Gk=["prefixPath","collectionGroup","readTime","documentId"],Kk=["prefixPath","collectionGroup","documentId"],Yk=["collectionGroup","readTime","prefixPath","documentId"],Xk=["canonicalId","targetId"],Jk=["targetId","path"],Qk=["path","targetId"],Zk=["collectionId","parent"],e6=["indexId","uid"],t6=["uid","sequenceNumber"],r6=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],n6=["indexId","uid","orderedDocumentKey"],i6=["userId","collectionPath","documentId"],s6=["userId","collectionPath","largestBatchId"],a6=["userId","collectionGroup","largestBatchId"],VT=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],o6=[...VT,"documentOverlays"],UT=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],jT=UT,_v=[...jT,"indexConfiguration","indexState","indexEntries"],c6=_v,u6=[..._v,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm extends FT{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Cn(r,e){const t=mt(r);return va.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function my(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ru(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function qT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){this.comparator=e,this.root=t||Xn.EMPTY}insert(e,t){return new Lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new Lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new a0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new a0(this.root,e,this.comparator,!1)}getReverseIterator(){return new a0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new a0(this.root,e,this.comparator,!0)}}class a0{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xn{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Xn.RED,this.left=i??Xn.EMPTY,this.right=s??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Xn(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,t,n,i,s){return this}insert(e,t,n){return new Xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.comparator=e,this.data=new Lr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new vy(this.data.getIterator())}getIteratorFrom(e){return new vy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sr(this.comparator);return t.data=e,t}}class vy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ll(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Hi([])}unionWith(e){let t=new Sr(qr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ql(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l6(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new WT("Invalid base64 string: "+s):s}}(e);return new nn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const h6=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function no(r){if(bt(!!r),typeof r=="string"){let e=0;const t=h6.exec(r);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jr(r.seconds),nanos:jr(r.nanos)}}function jr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ac(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function yv(r){const e=r.mapValue.fields.__previous_value__;return Wp(e)?yv(e):e}function jf(r){const e=no(r.mapValue.fields.__local_write_time__.timestampValue);return new zr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,t,n,i,s,a,o,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class oc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new oc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof oc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},C0={nullValue:"NULL_VALUE"};function pu(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Wp(r)?4:zT(r)?9007199254740991:zp(r)?10:11:xt()}function Ea(r,e){if(r===e)return!0;const t=pu(r);if(t!==pu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return jf(r).isEqual(jf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=no(i.timestampValue),o=no(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return ac(i.bytesValue).isEqual(ac(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return jr(i.geoPointValue.latitude)===jr(s.geoPointValue.latitude)&&jr(i.geoPointValue.longitude)===jr(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return jr(i.integerValue)===jr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=jr(i.doubleValue),o=jr(s.doubleValue);return a===o?Uf(a)===Uf(o):isNaN(a)&&isNaN(o)}return!1}(r,e);case 9:return Ql(r.arrayValue.values||[],e.arrayValue.values||[],Ea);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(my(a)!==my(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Ea(a[c],o[c])))return!1;return!0}(r,e);default:return xt()}}function qf(r,e){return(r.values||[]).find(t=>Ea(t,e))!==void 0}function cc(r,e){if(r===e)return 0;const t=pu(r),n=pu(e);if(t!==n)return jt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(r.booleanValue,e.booleanValue);case 2:return function(s,a){const o=jr(s.integerValue||s.doubleValue),c=jr(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(r,e);case 3:return _y(r.timestampValue,e.timestampValue);case 4:return _y(jf(r),jf(e));case 5:return jt(r.stringValue,e.stringValue);case 6:return function(s,a){const o=ac(s),c=ac(a);return o.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const l=jt(o[u],c[u]);if(l!==0)return l}return jt(o.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,a){const o=jt(jr(s.latitude),jr(a.latitude));return o!==0?o:jt(jr(s.longitude),jr(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return yy(r.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,l;const d=s.fields||{},g=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,w=(c=g.value)===null||c===void 0?void 0:c.arrayValue,_=jt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((l=w==null?void 0:w.values)===null||l===void 0?void 0:l.length)||0);return _!==0?_:yy(p,w)}(r.mapValue,e.mapValue);case 11:return function(s,a){if(s===Qo.mapValue&&a===Qo.mapValue)return 0;if(s===Qo.mapValue)return 1;if(a===Qo.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){const g=jt(c[d],l[d]);if(g!==0)return g;const p=cc(o[c[d]],u[l[d]]);if(p!==0)return p}return jt(c.length,l.length)}(r.mapValue,e.mapValue);default:throw xt()}}function _y(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return jt(r,e);const t=no(r),n=no(e),i=jt(t.seconds,n.seconds);return i!==0?i:jt(t.nanos,n.nanos)}function yy(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=cc(t[i],n[i]);if(s)return s}return jt(t.length,n.length)}function Zl(r){return Qm(r)}function Qm(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=no(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ac(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ft.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=Qm(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${Qm(t.fields[a])}`;return i+"}"}(r.mapValue):xt()}function gu(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Zm(r){return!!r&&"integerValue"in r}function Wf(r){return!!r&&"arrayValue"in r}function wy(r){return!!r&&"nullValue"in r}function xy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function R0(r){return!!r&&"mapValue"in r}function zp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function vf(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Ru(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=vf(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=vf(r.arrayValue.values[t]);return e}return Object.assign({},r)}function zT(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const HT={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function d6(r){return"nullValue"in r?C0:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?gu(oc.empty(),ft.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?zp(r)?HT:{mapValue:{}}:xt()}function p6(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?gu(oc.empty(),ft.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?HT:"mapValue"in r?zp(r)?{mapValue:{}}:Qo:xt()}function Ty(r,e){const t=cc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Ey(r,e){const t=cc(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!R0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=vf(t)}setAll(e){let t=qr.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=vf(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());R0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];R0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Ru(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Jn(vf(this.value))}}function $T(r){const e=[];return Ru(r.fields,(t,n)=>{const i=new qr([t]);if(R0(n)){const s=$T(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Mr(e,0,Pt.min(),Pt.min(),Pt.min(),Jn.empty(),0)}static newFoundDocument(e,t,n,i){return new Mr(e,1,t,Pt.min(),n,i,0)}static newNoDocument(e,t){return new Mr(e,2,t,Pt.min(),Pt.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new Mr(e,3,t,Pt.min(),Pt.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,t){this.position=e,this.inclusive=t}}function by(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=ft.comparator(ft.fromName(a.referenceValue),t.key):n=cc(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function Ay(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ea(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(e,t="asc"){this.field=e,this.dir=t}}function g6(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{}class Zt extends GT{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new m6(e,t,n):t==="array-contains"?new y6(e,n):t==="in"?new ZT(e,n):t==="not-in"?new w6(e,n):t==="array-contains-any"?new x6(e,n):new Zt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new v6(e,n):new _6(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(cc(t,this.value)):t!==null&&pu(this.value)===pu(t)&&this.matchesComparison(cc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends GT{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new _r(e,t)}matches(e){return eh(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function eh(r){return r.op==="and"}function e1(r){return r.op==="or"}function wv(r){return KT(r)&&eh(r)}function KT(r){for(const e of r.filters)if(e instanceof _r)return!1;return!0}function t1(r){if(r instanceof Zt)return r.field.canonicalString()+r.op.toString()+Zl(r.value);if(wv(r))return r.filters.map(e=>t1(e)).join(",");{const e=r.filters.map(t=>t1(t)).join(",");return`${r.op}(${e})`}}function YT(r,e){return r instanceof Zt?function(n,i){return i instanceof Zt&&n.op===i.op&&n.field.isEqual(i.field)&&Ea(n.value,i.value)}(r,e):r instanceof _r?function(n,i){return i instanceof _r&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&YT(a,i.filters[o]),!0):!1}(r,e):void xt()}function XT(r,e){const t=r.filters.concat(e);return _r.create(t,r.op)}function JT(r){return r instanceof Zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Zl(t.value)}`}(r):r instanceof _r?function(t){return t.op.toString()+" {"+t.getFilters().map(JT).join(" ,")+"}"}(r):"Filter"}class m6 extends Zt{constructor(e,t,n){super(e,t,n),this.key=ft.fromName(n.referenceValue)}matches(e){const t=ft.comparator(e.key,this.key);return this.matchesComparison(t)}}class v6 extends Zt{constructor(e,t){super(e,"in",t),this.keys=QT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class _6 extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=QT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function QT(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>ft.fromName(n.referenceValue))}class y6 extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Wf(t)&&qf(t.arrayValue,this.value)}}class ZT extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&qf(this.value.arrayValue,t)}}class w6 extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(qf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!qf(this.value.arrayValue,t)}}class x6 extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Wf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>qf(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T6{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function r1(r,e=null,t=[],n=[],i=null,s=null,a=null){return new T6(r,e,t,n,i,s,a)}function mu(r){const e=mt(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>t1(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),pd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Zl(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Zl(n)).join(",")),e.ue=t}return e.ue}function gd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!g6(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!YT(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Ay(r.startAt,e.startAt)&&Ay(r.endAt,e.endAt)}function K0(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Y0(r,e){return r.filters.filter(t=>t instanceof Zt&&t.field.isEqual(e))}function Iy(r,e,t){let n=C0,i=!0;for(const s of Y0(r,e)){let a=C0,o=!0;switch(s.op){case"<":case"<=":a=d6(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=C0}Ty({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];Ty({value:n,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}function Sy(r,e,t){let n=Qo,i=!0;for(const s of Y0(r,e)){let a=Qo,o=!0;switch(s.op){case">=":case">":a=p6(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Qo}Ey({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];Ey({value:n,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function eE(r,e,t,n,i,s,a,o){return new lo(r,e,t,n,i,s,a,o)}function _h(r){return new lo(r)}function Py(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function xv(r){return r.collectionGroup!==null}function Ol(r){const e=mt(r);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Sr(qr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new zf(s,n))}),t.has(qr.keyField().canonicalString())||e.ce.push(new zf(qr.keyField(),n))}return e.ce}function Pi(r){const e=mt(r);return e.le||(e.le=E6(e,Ol(r))),e.le}function E6(r,e){if(r.limitType==="F")return r1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zf(i.field,s)});const t=r.endAt?new uc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new uc(r.startAt.position,r.startAt.inclusive):null;return r1(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function n1(r,e){const t=r.filters.concat([e]);return new lo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function X0(r,e,t){return new lo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function md(r,e){return gd(Pi(r),Pi(e))&&r.limitType===e.limitType}function tE(r){return`${mu(Pi(r))}|lt:${r.limitType}`}function xl(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>JT(i)).join(", ")}]`),pd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Zl(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Zl(i)).join(",")),`Target(${n})`}(Pi(r))}; limitType=${r.limitType})`}function vd(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ft.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of Ol(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(a,o,c){const u=by(a,o,c);return a.inclusive?u<=0:u<0}(n.startAt,Ol(n),i)||n.endAt&&!function(a,o,c){const u=by(a,o,c);return a.inclusive?u>=0:u>0}(n.endAt,Ol(n),i))}(r,e)}function rE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function nE(r){return(e,t)=>{let n=!1;for(const i of Ol(r)){const s=b6(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function b6(r,e,t){const n=r.field.isKeyField()?ft.comparator(e.key,t.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?cc(c,u):xt()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ru(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return qT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A6=new Lr(ft.comparator);function $i(){return A6}const iE=new Lr(ft.comparator);function uf(...r){let e=iE;for(const t of r)e=e.insert(t.key,t);return e}function sE(r){let e=iE;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ga(){return _f()}function aE(){return _f()}function _f(){return new Tc(r=>r.toString(),(r,e)=>r.isEqual(e))}const I6=new Lr(ft.comparator),S6=new Sr(ft.comparator);function zt(...r){let e=S6;for(const t of r)e=e.add(t);return e}const P6=new Sr(jt);function Tv(){return P6}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Uf(e)?"-0":e}}function oE(r){return{integerValue:""+r}}function cE(r,e){return MT(e)?oE(e):Ev(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function N6(r,e,t){return r instanceof th?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Wp(s)&&(s=yv(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):r instanceof vu?lE(r,e):r instanceof _u?hE(r,e):function(i,s){const a=uE(i,s),o=Ny(a)+Ny(i.Pe);return Zm(a)&&Zm(i.Pe)?oE(o):Ev(i.serializer,o)}(r,e)}function C6(r,e,t){return r instanceof vu?lE(r,e):r instanceof _u?hE(r,e):t}function uE(r,e){return r instanceof rh?function(n){return Zm(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class th extends Hp{}class vu extends Hp{constructor(e){super(),this.elements=e}}function lE(r,e){const t=fE(e);for(const n of r.elements)t.some(i=>Ea(i,n))||t.push(n);return{arrayValue:{values:t}}}class _u extends Hp{constructor(e){super(),this.elements=e}}function hE(r,e){let t=fE(e);for(const n of r.elements)t=t.filter(i=>!Ea(i,n));return{arrayValue:{values:t}}}class rh extends Hp{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Ny(r){return jr(r.integerValue||r.doubleValue)}function fE(r){return Wf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _d{constructor(e,t){this.field=e,this.transform=t}}function R6(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof vu&&i instanceof vu||n instanceof _u&&i instanceof _u?Ql(n.elements,i.elements,Ea):n instanceof rh&&i instanceof rh?Ea(n.Pe,i.Pe):n instanceof th&&i instanceof th}(r.transform,e.transform)}class k6{constructor(e,t){this.version=e,this.transformResults=t}}class Wr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function k0(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class $p{}function dE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new wh(r.key,Wr.none()):new yh(r.key,r.data,Wr.none());{const t=r.data,n=Jn.empty();let i=new Sr(qr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new ho(r.key,n,new Hi(i.toArray()),Wr.none())}}function L6(r,e,t){r instanceof yh?function(i,s,a){const o=i.value.clone(),c=Ry(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(r,e,t):r instanceof ho?function(i,s,a){if(!k0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=Ry(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(pE(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(r,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function yf(r,e,t,n){return r instanceof yh?function(s,a,o,c){if(!k0(s.precondition,a))return o;const u=s.value.clone(),l=ky(s.fieldTransforms,c,a);return u.setAll(l),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(r,e,t,n):r instanceof ho?function(s,a,o,c){if(!k0(s.precondition,a))return o;const u=ky(s.fieldTransforms,c,a),l=a.data;return l.setAll(pE(s)),l.setAll(u),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(r,e,t,n):function(s,a,o){return k0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(r,e,t)}function D6(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=uE(n.transform,i||null);s!=null&&(t===null&&(t=Jn.empty()),t.set(n.field,s))}return t||null}function Cy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Ql(n,i,(s,a)=>R6(s,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class yh extends $p{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ho extends $p{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pE(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function Ry(r,e,t){const n=new Map;bt(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,C6(a,o,t[i]))}return n}function ky(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,N6(s,a,e))}return n}class wh extends $p{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bv extends $p{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Av{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&L6(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=yf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=yf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=aE();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const c=dE(a,o);c!==null&&n.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Pt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),zt())}isEqual(e){return this.batchId===e.batchId&&Ql(this.mutations,e.mutations,(t,n)=>Cy(t,n))&&Ql(this.baseMutations,e.baseMutations,(t,n)=>Cy(t,n))}}class Iv{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){bt(e.mutations.length===n.length);let i=function(){return I6}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new Iv(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,ir;function gE(r){switch(r){default:return xt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function mE(r){if(r===void 0)return fn("GRPC error has no .code"),Le.UNKNOWN;switch(r){case wn.OK:return Le.OK;case wn.CANCELLED:return Le.CANCELLED;case wn.UNKNOWN:return Le.UNKNOWN;case wn.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case wn.INTERNAL:return Le.INTERNAL;case wn.UNAVAILABLE:return Le.UNAVAILABLE;case wn.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case wn.NOT_FOUND:return Le.NOT_FOUND;case wn.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case wn.ABORTED:return Le.ABORTED;case wn.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case wn.DATA_LOSS:return Le.DATA_LOSS;default:return xt()}}(ir=wn||(wn={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O6=new au([4294967295,4294967295],0);function Ly(r){const e=vE().encode(r),t=new ET;return t.update(e),new Uint8Array(t.digest())}function Dy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new au([t,n],0),new au([i,s],0)]}class Pv{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new lf(`Invalid padding: ${t}`);if(n<0)throw new lf(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new lf(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new lf(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=au.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(au.fromNumber(n)));return i.compare(O6)===1&&(i=new au([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=Ly(e),[n,i]=Dy(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);if(!this.de(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new Pv(s,i,t);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const t=Ly(e),[n,i]=Dy(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class lf extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,wd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new yd(Pt.min(),i,new Lr(jt),$i(),zt())}}class wd{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new wd(n,t,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class _E{constructor(e,t){this.targetId=e,this.me=t}}class yE{constructor(e,t,n=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Fy{constructor(){this.fe=0,this.ge=My(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=zt(),t=zt(),n=zt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:xt()}}),new wd(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=My()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class M6{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=Oy(),this.Qe=new Lr(jt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const s=i.target;if(K0(s))if(n===0){const a=new ft(s.path);this.Ue(t,a,Mr.newNoDocument(a,Pt.min()))}else bt(n===1);else{const a=this.Ye(t);if(a!==n){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=ac(n).toUint8Array()}catch(c){if(c instanceof WT)return Ta("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new Pv(a,i,s)}catch(c){return Ta(c instanceof lf?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&K0(o.target)){const c=new ft(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Mr.newNoDocument(c,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let n=zt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new yd(e,t,this.Qe,this.ke,n);return this.ke=$i(),this.qe=Oy(),this.Qe=new Lr(jt),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Fy,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Sr(jt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Fy),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Oy(){return new Lr(ft.comparator)}function My(){return new Lr(ft.comparator)}const B6={asc:"ASCENDING",desc:"DESCENDING"},V6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},U6={and:"AND",or:"OR"};class j6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function i1(r,e){return r.useProto3Json||pd(e)?e:{value:e}}function nh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wE(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function q6(r,e){return nh(r,e.toTimestamp())}function dn(r){return bt(!!r),Pt.fromTimestamp(function(t){const n=no(t);return new zr(n.seconds,n.nanos)}(r))}function Nv(r,e){return s1(r,e).canonicalString()}function s1(r,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function xE(r){const e=Qt.fromString(r);return bt(RE(e)),e}function Hf(r,e){return Nv(r.databaseId,e.path)}function _a(r,e){const t=xE(e);if(t.get(1)!==r.databaseId.projectId)throw new Xe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Xe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ft(bE(t))}function TE(r,e){return Nv(r.databaseId,e)}function EE(r){const e=xE(r);return e.length===4?Qt.emptyPath():bE(e)}function a1(r){return new Qt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function bE(r){return bt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function By(r,e,t){return{name:Hf(r,e),fields:t.value.mapValue.fields}}function AE(r,e,t){const n=_a(r,e.name),i=dn(e.updateTime),s=e.createTime?dn(e.createTime):Pt.min(),a=new Jn({mapValue:{fields:e.fields}}),o=Mr.newFoundDocument(n,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function W6(r,e){return"found"in e?function(n,i){bt(!!i.found),i.found.name,i.found.updateTime;const s=_a(n,i.found.name),a=dn(i.found.updateTime),o=i.found.createTime?dn(i.found.createTime):Pt.min(),c=new Jn({mapValue:{fields:i.found.fields}});return Mr.newFoundDocument(s,a,o,c)}(r,e):"missing"in e?function(n,i){bt(!!i.missing),bt(!!i.readTime);const s=_a(n,i.missing),a=dn(i.readTime);return Mr.newNoDocument(s,a)}(r,e):xt()}function z6(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(bt(l===void 0||typeof l=="string"),nn.fromBase64String(l||"")):(bt(l===void 0||l instanceof Buffer||l instanceof Uint8Array),nn.fromUint8Array(l||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const l=u.code===void 0?Le.UNKNOWN:mE(u.code);return new Xe(l,u.message||"")}(a);t=new yE(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=_a(r,n.document.name),s=dn(n.document.updateTime),a=n.document.createTime?dn(n.document.createTime):Pt.min(),o=new Jn({mapValue:{fields:n.document.fields}}),c=Mr.newFoundDocument(i,s,a,o),u=n.targetIds||[],l=n.removedTargetIds||[];t=new L0(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=_a(r,n.document),s=n.readTime?dn(n.readTime):Pt.min(),a=Mr.newNoDocument(i,s),o=n.removedTargetIds||[];t=new L0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=_a(r,n.document),s=n.removedTargetIds||[];t=new L0([],s,i,null)}else{if(!("filter"in e))return xt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new F6(i,s),o=n.targetId;t=new _E(o,a)}}return t}function $f(r,e){let t;if(e instanceof yh)t={update:By(r,e.key,e.value)};else if(e instanceof wh)t={delete:Hf(r,e.key)};else if(e instanceof ho)t={update:By(r,e.key,e.data),updateMask:X6(e.fieldMask)};else{if(!(e instanceof bv))return xt();t={verify:Hf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof th)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof vu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof _u)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof rh)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw xt()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:q6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt()}(r,e.precondition)),t}function o1(r,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?Wr.updateTime(dn(s.updateTime)):s.exists!==void 0?Wr.exists(s.exists):Wr.none()}(e.currentDocument):Wr.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let c=null;if("setToServerValue"in o)bt(o.setToServerValue==="REQUEST_TIME"),c=new th;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];c=new vu(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];c=new _u(l)}else"increment"in o?c=new rh(a,o.increment):xt();const u=qr.fromServerFormat(o.fieldPath);return new _d(u,c)}(r,i)):[];if(e.update){e.update.name;const i=_a(r,e.update.name),s=new Jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new Hi(u.map(l=>qr.fromServerFormat(l)))}(e.updateMask);return new ho(i,s,a,t,n)}return new yh(i,s,t,n)}if(e.delete){const i=_a(r,e.delete);return new wh(i,t)}if(e.verify){const i=_a(r,e.verify);return new bv(i,t)}return xt()}function H6(r,e){return r&&r.length>0?(bt(e!==void 0),r.map(t=>function(i,s){let a=i.updateTime?dn(i.updateTime):dn(s);return a.isEqual(Pt.min())&&(a=dn(s)),new k6(a,i.transformResults||[])}(t,e))):[]}function IE(r,e){return{documents:[TE(r,e.path)]}}function SE(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=TE(r,i);const s=function(u){if(u.length!==0)return CE(_r.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(l=>function(g){return{field:Tl(g.field),direction:G6(g.dir)}}(l))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=i1(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function PE(r){let e=EE(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){bt(n===1);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=function(d){const g=NE(d);return g instanceof _r&&wv(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(d){return d.map(g=>function(w){return new zf(El(w.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(d){let g;return g=typeof d=="object"?d.value:d,pd(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(d){const g=!!d.before,p=d.values||[];return new uc(p,g)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const g=!d.before,p=d.values||[];return new uc(p,g)}(t.endAt)),eE(e,i,a,s,o,"F",c,u)}function $6(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function NE(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=El(t.unaryFilter.field);return Zt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=El(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=El(t.unaryFilter.field);return Zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=El(t.unaryFilter.field);return Zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(r):r.fieldFilter!==void 0?function(t){return Zt.create(El(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return _r.create(t.compositeFilter.filters.map(n=>NE(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt()}}(t.compositeFilter.op))}(r):xt()}function G6(r){return B6[r]}function K6(r){return V6[r]}function Y6(r){return U6[r]}function Tl(r){return{fieldPath:r.canonicalString()}}function El(r){return qr.fromServerFormat(r.fieldPath)}function CE(r){return r instanceof Zt?function(t){if(t.op==="=="){if(xy(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NAN"}};if(wy(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(xy(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NAN"}};if(wy(t.value))return{unaryFilter:{field:Tl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tl(t.field),op:K6(t.op),value:t.value}}}(r):r instanceof _r?function(t){const n=t.getFilters().map(i=>CE(i));return n.length===1?n[0]:{compositeFilter:{op:Y6(t.op),filters:n}}}(r):xt()}function X6(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RE(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,n,i,s=Pt.min(),a=Pt.min(),o=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(e){this.ct=e}}function J6(r,e){let t;if(e.document)t=AE(r.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ft.fromSegments(e.noDocument.path),i=wu(e.noDocument.readTime);t=Mr.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const n=ft.fromSegments(e.unknownDocument.path),i=wu(e.unknownDocument.version);t=Mr.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime(function(i){const s=new zr(i[0],i[1]);return Pt.fromTimestamp(s)}(e.readTime)),t}function Vy(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:J0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,a){return{name:Hf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:nh(s,a.version.toTimestamp()),createTime:nh(s,a.createTime.toTimestamp())}}(r.ct,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:yu(e.version)};else{if(!e.isUnknownDocument())return xt();n.unknownDocument={path:t.path.toArray(),version:yu(e.version)}}return n}function J0(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function yu(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function wu(r){const e=new zr(r.seconds,r.nanoseconds);return Pt.fromTimestamp(e)}function Kc(r,e){const t=(e.baseMutations||[]).map(s=>o1(r.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>o1(r.ct,s)),i=zr.fromMillis(e.localWriteTimeMs);return new Av(e.batchId,i,t,n)}function hf(r){const e=wu(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?wu(r.lastLimboFreeSnapshotVersion):Pt.min();let n;return n=function(s){return s.documents!==void 0}(r.query)?function(s){return bt(s.documents.length===1),Pi(_h(EE(s.documents[0])))}(r.query):function(s){return Pi(PE(s))}(r.query),new Ka(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,nn.fromBase64String(r.resumeToken))}function LE(r,e){const t=yu(e.snapshotVersion),n=yu(e.lastLimboFreeSnapshotVersion);let i;i=K0(e.target)?IE(r.ct,e.target):SE(r.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mu(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function Cv(r){const e=PE({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?X0(e,e.limit,"L"):e}function rm(r,e){return new Sv(e.largestBatchId,o1(r.ct,e.overlayMutation))}function Uy(r,e){const t=e.path.lastSegment();return[r,Si(e.path.popLast()),t]}function jy(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:yu(n.readTime),documentKey:Si(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q6{getBundleMetadata(e,t){return qy(e).get(t).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:wu(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,t){return qy(e).put(function(i){return{bundleId:i.id,createTime:yu(dn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Wy(e).get(t).next(n=>{if(n)return function(s){return{name:s.name,query:Cv(s.bundledQuery),readTime:wu(s.readTime)}}(n)})}saveNamedQuery(e,t){return Wy(e).put(function(i){return{name:i.name,readTime:yu(dn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function qy(r){return Cn(r,"bundles")}function Wy(r){return Cn(r,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new Gp(e,n)}getOverlay(e,t){return Xh(e).get(Uy(this.userId,t)).next(n=>n?rm(this.serializer,n):null)}getOverlays(e,t){const n=ga();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){const i=[];return n.forEach((s,a)=>{const o=new Sv(t,a);i.push(this.ht(e,o))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(a=>i.add(Si(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(Xh(e).j("collectionPathOverlayIndex",o))}),Se.waitFor(s)}getOverlaysForCollection(e,t,n){const i=ga(),s=Si(t),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Xh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const c of o){const u=rm(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const s=ga();let a;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xh(e).J({index:"collectionGroupOverlayIndex",range:o},(c,u,l)=>{const d=rm(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):l.done()}).next(()=>s)}ht(e,t){return Xh(e).put(function(i,s,a){const[o,c,u]=Uy(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:$f(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Xh(r){return Cn(r,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{Pt(e){return Cn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?nn.fromUint8Array(n):nn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(jr(e.integerValue));else if("doubleValue"in e){const n=jr(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Uf(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=no(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ac(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?zT(e)?this.dt(t,Number.MAX_SAFE_INTEGER):zp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const i of Object.keys(n))this.Vt(i,t),this.Tt(n[i],t)}wt(e,t){var n,i;const s=e.fields||{};this.dt(t,53);const a="value",o=((i=(n=s[a].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(jr(o)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const i of n)this.Tt(i,t)}yt(e,t){this.dt(t,37),ft.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Yc.vt=new Yc;function eL(r){if(r===0)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function zy(r){const e=64-function(n){let i=0;for(let s=0;s<8;++s){const a=eL(255&n[s]);if(i+=a,a!==8)break}return i}(r);return Math.ceil(e/8)}class tL{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),n=zy(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),n=zy(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),n=(128&t[0])!=0;t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class rL{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class nL{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Jh{constructor(){this.jt=new tL,this.Ht=new rL(this.jt),this.Jt=new nL(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Xc(this.indexId,this.documentKey,this.arrayValue,n)}}function Wo(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=Hy(r.arrayValue,e.arrayValue),t!==0?t:(t=Hy(r.directionalValue,e.directionalValue),t!==0?t:ft.comparator(r.documentKey,e.documentKey)))}function Hy(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e){this.Xt=new Sr((t,n)=>qr.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(bt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Xm(e);if(t!==void 0&&!this.sn(t))return!1;const n=Hc(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.sn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=n[s];if(!this.on(o,c)||!this._n(this.en[a++],c))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Sr(qr.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new P0(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new P0(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new P0(n.field,n.dir==="asc"?0:1)));return new G0(G0.UNKNOWN_ID,this.collectionId,t,Vf.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(r){var e,t;if(bt(r instanceof Zt||r instanceof _r),r instanceof Zt){if(r instanceof ZT){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Zt.create(r.field,"==",s)))||[];return _r.create(i,"or")}return r}const n=r.filters.map(i=>DE(i));return _r.create(n,r.op)}function iL(r){if(r.getFilters().length===0)return[];const e=l1(DE(r));return bt(FE(e)),c1(e)||u1(e)?[e]:e.getFilters()}function c1(r){return r instanceof Zt}function u1(r){return r instanceof _r&&wv(r)}function FE(r){return c1(r)||u1(r)||function(t){if(t instanceof _r&&e1(t)){for(const n of t.getFilters())if(!c1(n)&&!u1(n))return!1;return!0}return!1}(r)}function l1(r){if(bt(r instanceof Zt||r instanceof _r),r instanceof Zt)return r;if(r.filters.length===1)return l1(r.filters[0]);const e=r.filters.map(n=>l1(n));let t=_r.create(e,r.op);return t=Q0(t),FE(t)?t:(bt(t instanceof _r),bt(eh(t)),bt(t.filters.length>1),t.filters.reduce((n,i)=>Rv(n,i)))}function Rv(r,e){let t;return bt(r instanceof Zt||r instanceof _r),bt(e instanceof Zt||e instanceof _r),t=r instanceof Zt?e instanceof Zt?function(i,s){return _r.create([i,s],"and")}(r,e):Gy(r,e):e instanceof Zt?Gy(e,r):function(i,s){if(bt(i.filters.length>0&&s.filters.length>0),eh(i)&&eh(s))return XT(i,s.getFilters());const a=e1(i)?i:s,o=e1(i)?s:i,c=a.filters.map(u=>Rv(u,o));return _r.create(c,"or")}(r,e),Q0(t)}function Gy(r,e){if(eh(e))return XT(e,r.getFilters());{const t=e.filters.map(n=>Rv(r,n));return _r.create(t,"or")}}function Q0(r){if(bt(r instanceof Zt||r instanceof _r),r instanceof Zt)return r;const e=r.getFilters();if(e.length===1)return Q0(e[0]);if(KT(r))return r;const t=e.map(i=>Q0(i)),n=[];return t.forEach(i=>{i instanceof Zt?n.push(i):i instanceof _r&&(i.op===r.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:_r.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(){this.un=new kv}addToCollectionParentIndex(e,t){return this.un.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve(ps.min())}updateCollectionGroup(e,t,n){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class kv{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Sr(Qt.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Sr(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Uint8Array(0);class aL{constructor(e,t){this.databaseId=t,this.cn=new kv,this.ln=new Tc(n=>mu(n),(n,i)=>gd(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:n,parent:Si(i)};return Ky(e).put(s)}return Se.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[RT(t),""],!1,!0);return Ky(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;n.push(pa(a.parent))}return n})}addFieldIndex(e,t){const n=Qh(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;const s=n.add(i);if(t.indexState){const a=fl(e);return s.next(o=>{a.put(jy(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=Qh(e),i=fl(e),s=hl(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Qh(e),n=hl(e),i=fl(e);return t.j().next(()=>n.j()).next(()=>i.j())}createTargetIndexes(e,t){return Se.forEach(this.hn(t),n=>this.getIndexType(e,n).next(i=>{if(i===0||i===1){const s=new $y(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const n=hl(e);let i=!0;const s=new Map;return Se.forEach(this.hn(t),a=>this.Pn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=zt();const o=[];return Se.forEach(s,(c,u)=>{Je("IndexedDbIndexManager",`Using index ${function(F){return`id=${F.indexId}|cg=${F.collectionGroup}|f=${F.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${mu(t)}`);const l=function(F,K){const se=Xm(K);if(se===void 0)return null;for(const ce of Y0(F,se.fieldPath))switch(ce.op){case"array-contains-any":return ce.value.arrayValue.values||[];case"array-contains":return[ce.value]}return null}(u,c),d=function(F,K){const se=new Map;for(const ce of Hc(K))for(const R of Y0(F,ce.fieldPath))switch(R.op){case"==":case"in":se.set(ce.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return se.set(ce.fieldPath.canonicalString(),R.value),Array.from(se.values())}return null}(u,c),g=function(F,K){const se=[];let ce=!0;for(const R of Hc(K)){const A=R.kind===0?Iy(F,R.fieldPath,F.startAt):Sy(F,R.fieldPath,F.startAt);se.push(A.value),ce&&(ce=A.inclusive)}return new uc(se,ce)}(u,c),p=function(F,K){const se=[];let ce=!0;for(const R of Hc(K)){const A=R.kind===0?Sy(F,R.fieldPath,F.endAt):Iy(F,R.fieldPath,F.endAt);se.push(A.value),ce&&(ce=A.inclusive)}return new uc(se,ce)}(u,c),w=this.In(c,u,g),_=this.In(c,u,p),T=this.Tn(c,u,d),P=this.En(c.indexId,l,w,g.inclusive,_,p.inclusive,T);return Se.forEach(P,L=>n.G(L,t.limit).next(F=>{F.forEach(K=>{const se=ft.fromSegments(K.documentKey);a.has(se)||(a=a.add(se),o.push(se))})}))}).next(()=>o)}return Se.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=iL(_r.create(e.filters,"and")).map(n=>r1(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,n,i,s,a,o){const c=(t!=null?t.length:1)*Math.max(n.length,s.length),u=c/(t!=null?t.length:1),l=[];for(let d=0;d<c;++d){const g=t?this.dn(t[d/u]):o0,p=this.An(e,g,n[d%u],i),w=this.Rn(e,g,s[d%u],a),_=o.map(T=>this.An(e,g,T,!0));l.push(...this.createRange(p,w,_))}return l}An(e,t,n,i){const s=new Xc(e,ft.empty(),t,n);return i?s:s.Zt()}Rn(e,t,n,i){const s=new Xc(e,ft.empty(),t,n);return i?s.Zt():s}Pn(e,t){const n=new $y(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let n=2;const i=this.hn(t);return Se.forEach(i,s=>this.Pn(e,s).next(a=>{a?n!==0&&a.fields.length<function(c){let u=new Sr(qr.comparator),l=!1;for(const d of c.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?l=!0:u=u.add(g.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(s)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&n===2?1:n)}Vn(e,t){const n=new Jh;for(const i of Hc(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=n.Yt(i.kind);Yc.vt.It(s,a)}return n.zt()}dn(e){const t=new Jh;return Yc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new Jh;return Yc.vt.It(gu(this.databaseId,t),n.Yt(function(s){const a=Hc(s);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(n===null)return[];let i=[];i.push(new Jh);let s=0;for(const a of Hc(e)){const o=n[s++];for(const c of i)if(this.fn(t,a.fieldPath)&&Wf(o))i=this.gn(i,a,o);else{const u=c.Yt(a.kind);Yc.vt.It(o,u)}}return this.pn(i)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const c=new Jh;c.seed(o.zt()),Yc.vt.It(a,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(n=>n instanceof Zt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=Qh(e),i=fl(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(s=>{const a=[];return Se.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(l,d){const g=d?new Vf(d.sequenceNumber,new ps(wu(d.readTime),new ft(pa(d.documentKey)),d.largestBatchId)):Vf.empty(),p=l.fields.map(([w,_])=>new P0(qr.fromServerFormat(w),_));return new G0(l.indexId,l.collectionGroup,p,g)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:jt(n.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=Qh(e),s=fl(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>Se.forEach(o,c=>s.put(jy(c.indexId,this.uid,a,n)))))}updateIndexEntries(e,t){const n=new Map;return Se.forEach(t,(i,s)=>{const a=n.get(i.collectionGroup);return(a?Se.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(n.set(i.collectionGroup,o),Se.forEach(o,c=>this.wn(e,i,c).next(u=>{const l=this.Sn(s,c);return u.isEqual(l)?Se.resolve():this.bn(e,s,c,u,l)}))))})}Dn(e,t,n,i){return hl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,i){return hl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const i=hl(e);let s=new Sr(Wo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(a,o)=>{s=s.add(new Xc(n.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,t){let n=new Sr(Wo);const i=this.Vn(t,e);if(i==null)return n;const s=Xm(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Wf(a))for(const o of a.arrayValue.values||[])n=n.add(new Xc(t.indexId,e.key,this.dn(o),i))}else n=n.add(new Xc(t.indexId,e.key,o0,i));return n}bn(e,t,n,i,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,u,l,d,g){const p=c.getIterator(),w=u.getIterator();let _=ll(p),T=ll(w);for(;_||T;){let P=!1,L=!1;if(_&&T){const F=l(_,T);F<0?L=!0:F>0&&(P=!0)}else _!=null?L=!0:P=!0;P?(d(T),T=ll(w)):L?(g(_),_=ll(p)):(_=ll(p),T=ll(w))}}(i,s,Wo,o=>{a.push(this.Dn(e,t,n,o))},o=>{a.push(this.vn(e,t,n,o))}),Se.waitFor(a)}yn(e){let t=1;return fl(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((a,o)=>Wo(a,o)).filter((a,o,c)=>!o||Wo(a,c[o-1])!==0);const i=[];i.push(e);for(const a of n){const o=Wo(a,e),c=Wo(a,t);if(o===0)i[0]=e.Zt();else if(o>0&&c<0)i.push(a),i.push(a.Zt());else if(c>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,o0,[]],c=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,o0,[]];s.push(IDBKeyRange.bound(o,c))}return s}Cn(e,t){return Wo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yy)}getMinOffset(e,t){return Se.mapArray(this.hn(t),n=>this.Pn(e,n).next(i=>i||xt())).next(Yy)}}function Ky(r){return Cn(r,"collectionParents")}function hl(r){return Cn(r,"indexEntries")}function Qh(r){return Cn(r,"indexConfiguration")}function fl(r){return Cn(r,"indexState")}function Yy(r){bt(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;mv(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qi{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(r,e,t){const n=r.store("mutations"),i=r.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const c=n.J({range:a},(l,d,g)=>(o++,g.delete()));s.push(c.next(()=>{bt(o===1)}));const u=[];for(const l of t.mutations){const d=BT(e,l.key.path,t.batchId);s.push(i.delete(d)),u.push(l.key)}return Se.waitFor(s).next(()=>u)}function Z0(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw xt();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(41943040,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);class Kp{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,t,n,i){bt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new Kp(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return zo(e).J({index:"userMutationsIndex",range:n},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const s=bl(e),a=zo(e);return a.add({}).next(o=>{bt(typeof o=="number");const c=new Av(o,t,n,i),u=function(p,w,_){const T=_.baseMutations.map(L=>$f(p.ct,L)),P=_.mutations.map(L=>$f(p.ct,L));return{userId:w,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:T,mutations:P}}(this.serializer,this.userId,c),l=[];let d=new Sr((g,p)=>jt(g.canonicalString(),p.canonicalString()));for(const g of i){const p=BT(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),l.push(a.put(u)),l.push(s.put(p,$k))}return d.forEach(g=>{l.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[o]=c.keys()}),Se.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return zo(e).get(t).next(n=>n?(bt(n.userId===this.userId),Kc(this.serializer,n)):null)}Mn(e,t){return this.Fn[t]?Se.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return zo(e).J({index:"userMutationsIndex",range:i},(a,o,c)=>{o.userId===this.userId&&(bt(o.batchId>=n),s=Kc(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return zo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{n=s.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return zo(e).U("userMutationsIndex",t).next(n=>n.map(i=>Kc(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=N0(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return bl(e).J({range:i},(a,o,c)=>{const[u,l,d]=a,g=pa(l);if(u===this.userId&&t.path.isEqual(g))return zo(e).get(d).next(p=>{if(!p)throw xt();bt(p.userId===this.userId),s.push(Kc(this.serializer,p))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sr(jt);const i=[];return t.forEach(s=>{const a=N0(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=bl(e).J({range:o},(u,l,d)=>{const[g,p,w]=u,_=pa(p);g===this.userId&&s.path.isEqual(_)?n=n.add(w):d.done()});i.push(c)}),Se.waitFor(i).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=N0(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new Sr(jt);return bl(e).J({range:a},(c,u,l)=>{const[d,g,p]=c,w=pa(g);d===this.userId&&n.isPrefixOf(w)?w.length===i&&(o=o.add(p)):l.done()}).next(()=>this.xn(e,o))}xn(e,t){const n=[],i=[];return t.forEach(s=>{i.push(zo(e).get(s).next(a=>{if(a===null)throw xt();bt(a.userId===this.userId),n.push(Kc(this.serializer,a))}))}),Se.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return OE(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Se.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return bl(e).J({range:n},(s,a,o)=>{if(s[0]===this.userId){const c=pa(s[1]);i.push(c)}else o.done()}).next(()=>{bt(i.length===0)})})}containsKey(e,t){return ME(e,this.userId,t)}Nn(e){return BE(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ME(r,e,t){const n=N0(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return bl(r).J({range:s,H:!0},(o,c,u)=>{const[l,d,g]=o;l===e&&d===i&&(a=!0),u.done()}).next(()=>a)}function zo(r){return Cn(r,"mutations")}function bl(r){return Cn(r,"documentMutations")}function BE(r){return Cn(r,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xu(0)}static kn(){return new xu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const n=new xu(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Pt.fromTimestamp(new zr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>dl(e).delete(t.targetId)).next(()=>this.qn(e)).next(n=>(bt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,t,n){let i=0;const s=[];return dl(e).J((a,o)=>{const c=hf(o);c.sequenceNumber<=t&&n.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return dl(e).J((n,i)=>{const s=hf(i);t(s)})}qn(e){return Jy(e).get("targetGlobalKey").next(t=>(bt(t!==null),t))}Qn(e,t){return Jy(e).put("targetGlobalKey",t)}Kn(e,t){return dl(e).put(LE(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=mu(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return dl(e).J({range:i,index:"queryTargetsIndex"},(a,o,c)=>{const u=hf(o);gd(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,n){const i=[],s=Yo(e);return t.forEach(a=>{const o=Si(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))}),Se.waitFor(i)}removeMatchingKeys(e,t,n){const i=Yo(e);return Se.forEach(t,s=>{const a=Si(s.path);return Se.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,t){const n=Yo(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Yo(e);let s=zt();return i.J({range:n,H:!0},(a,o,c)=>{const u=pa(a[1]),l=new ft(u);s=s.add(l)}).next(()=>s)}containsKey(e,t){const n=Si(t.path),i=IDBKeyRange.bound([n],[RT(n)],!1,!0);let s=0;return Yo(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,o],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return dl(e).get(t).next(n=>n?hf(n):null)}}function dl(r){return Cn(r,"targets")}function Jy(r){return Cn(r,"targetGlobal")}function Yo(r){return Cn(r,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy([r,e],[t,n]){const i=jt(r,t);return i===0?jt(e,n):i}class cL{constructor(e){this.Un=e,this.buffer=new Sr(Qy),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Qy(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class uL{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xc(t)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await wc(t)}await this.Hn(3e5)})}}class lL{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(zi.oe);const n=new cL(t);return this.Jn.forEachTarget(e,i=>n.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>n.zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(Xy)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xy):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,i,s,a,o,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(u=Date.now(),wl()<=Yt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-l}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function hL(r,e){return new lL(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,t){this.db=e,this.garbageCollector=hL(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}er(e){let t=0;return this.Zn(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(n,i)=>t(i))}addReference(e,t,n){return c0(e,n)}removeReference(e,t,n){return c0(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return c0(e,t)}nr(e,t){return function(i,s){let a=!1;return BE(i).Y(o=>ME(i,o,s).next(c=>(c&&(a=!0),Se.resolve(!c)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,o)=>{if(o<=t){const c=this.nr(e,a).next(u=>{if(!u)return s++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Pt.min()),Yo(e).delete(function(d){return[0,Si(d.path)]}(a))))});i.push(c)}}).next(()=>Se.waitFor(i)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return c0(e,t)}tr(e,t){const n=Yo(e);let i,s=zi.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==zi.oe&&t(new ft(pa(i)),s),s=u,i=c):s=zi.oe}).next(()=>{s!==zi.oe&&t(new ft(pa(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function c0(r,e){return Yo(r).put(function(n,i){return{targetId:0,path:Si(n.path),sequenceNumber:i}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(){this.changes=new Tc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Wc(e).put(n)}removeEntry(e,t,n){return Wc(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],J0(a),o[o.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.rr(e,n)))}getEntry(e,t){let n=Mr.newInvalidDocument(t);return Wc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(t))},(i,s)=>{n=this.ir(t,s)}).next(()=>n)}sr(e,t){let n={size:0,document:Mr.newInvalidDocument(t)};return Wc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Zh(t))},(i,s)=>{n={document:this.ir(t,s),size:Z0(s)}}).next(()=>n)}getEntries(e,t){let n=$i();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);n=n.insert(i,a)}).next(()=>n)}ar(e,t){let n=$i(),i=new Lr(ft.comparator);return this._r(e,t,(s,a)=>{const o=this.ir(s,a);n=n.insert(s,o),i=i.insert(s,Z0(a))}).next(()=>({documents:n,ur:i}))}_r(e,t,n){if(t.isEmpty())return Se.resolve();let i=new Sr(tw);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Zh(i.first()),Zh(i.last())),a=i.getIterator();let o=a.getNext();return Wc(e).J({index:"documentKeyIndex",range:s},(c,u,l)=>{const d=ft.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&tw(o,d)<0;)n(o,null),o=a.getNext();o&&o.isEqual(d)&&(n(o,u),o=a.hasNext()?a.getNext():null),o?l.$(Zh(o)):l.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,n,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),J0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Wc(e).U(IDBKeyRange.bound(o,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let l=$i();for(const d of u){const g=this.ir(ft.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(vd(t,g)||i.has(g.key))&&(l=l.insert(g.key,g))}return l})}getAllFromCollectionGroup(e,t,n,i){let s=$i();const a=ew(t,n),o=ew(t,ps.max());return Wc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(c,u,l)=>{const d=this.ir(ft.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new pL(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Zy(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}rr(e,t){return Zy(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const n=J6(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pt.min())))return n}return Mr.newInvalidDocument(e)}}function UE(r){return new dL(r)}class pL extends VE{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new Tc(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new Sr((s,a)=>jt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=Vy(this.cr.serializer,a);i=i.add(s.path.popLast());const u=Z0(c);n+=u-o.size,t.push(this.cr.addEntry(e,s,c))}else if(n-=o.size,this.trackRemovals){const c=Vy(this.cr.serializer,a.convertToNoDocument(Pt.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,n)),Se.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(n=>(this.lr.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:n,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:n.get(s).readTime})}),n))}}function Zy(r){return Cn(r,"remoteDocumentGlobal")}function Wc(r){return Cn(r,"remoteDocumentsV14")}function Zh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ew(r,e){const t=e.documentKey.path.toArray();return[r,J0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function tw(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(i=jt(t[s],n[s]),i)return i;return i=jt(t.length,n.length),i||(i=jt(t[t.length-2],n[n.length-2]),i||jt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&yf(n.mutation,i,Hi.empty(),zr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,zt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=zt()){const i=ga();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let a=uf();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=ga();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,zt()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,n,i){let s=$i();const a=_f(),o=function(){return _f()}();return t.forEach((c,u)=>{const l=n.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof ho)?s=s.insert(u.key,u):l!==void 0?(a.set(u.key,l.mutation.getFieldMask()),yf(l.mutation,u,l.mutation.getFieldMask(),zr.now())):a.set(u.key,Hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>a.set(u,l)),t.forEach((u,l)=>{var d;return o.set(u,new gL(l,(d=a.get(u))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,t){const n=_f();let i=new Lr((a,o)=>a-o),s=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let l=n.get(c)||Hi.empty();l=o.applyToLocalView(u,l),n.set(c,l);const d=(i.get(o.batchId)||zt()).add(c);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,l=c.value,d=aE();l.forEach(g=>{if(!s.has(g)){const p=dE(t.get(g),n.get(g));p!==null&&d.set(g,p),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Se.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(a){return ft.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):xv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Se.resolve(ga());let o=-1,c=s;return a.next(u=>Se.forEach(u,(l,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(l)?Se.resolve():this.remoteDocumentCache.getEntry(e,l).next(g=>{c=c.insert(l,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,zt())).next(l=>({batchId:o,changes:sE(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ft(t)).next(n=>{let i=uf();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=uf();return this.indexManager.getCollectionParents(e,s).next(o=>Se.forEach(o,c=>{const u=function(d,g){return new lo(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(l=>{l.forEach((d,g)=>{a=a.insert(d,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(a=>{s.forEach((c,u)=>{const l=u.getKey();a.get(l)===null&&(a=a.insert(l,Mr.newInvalidDocument(l)))});let o=uf();return a.forEach((c,u)=>{const l=s.get(c);l!==void 0&&yf(l.mutation,u,Hi.empty(),zr.now()),vd(t,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Se.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Cv(i.bundledQuery),readTime:dn(i.readTime)}}(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vL{constructor(){this.overlays=new Lr(ft.comparator),this.Ir=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ga();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.ht(e,t,s)}),Se.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Se.resolve()}getOverlaysForCollection(e,t,n){const i=ga(),s=t.length+1,a=new ft(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Lr((u,l)=>u-l);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let l=s.get(u.largestBatchId);l===null&&(l=ga(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const o=ga(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>o.set(u,l)),!(o.size()>=i)););return Se.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Sv(t,n));let s=this.Ir.get(t);s===void 0&&(s=zt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _L{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(){this.Tr=new Sr(Dn.Er),this.dr=new Sr(Dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Dn(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new Dn(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){const t=new ft(new Qt([])),n=new Dn(t,e),i=new Dn(t,e+1),s=[];return this.dr.forEachInRange([n,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ft(new Qt([])),n=new Dn(t,e),i=new Dn(t,e+1);let s=zt();return this.dr.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Dn(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Dn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ft.comparator(e.key,t.key)||jt(e.wr,t.wr)}static Ar(e,t){return jt(e.wr,t.wr)||ft.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Sr(Dn.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Av(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new Dn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Se.resolve(a)}lookupMutationBatch(e,t){return Se.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.vr(n),s=i<0?0:i;return Se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dn(t,0),i=new Dn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sr(jt);return t.forEach(i=>{const s=new Dn(i,0),a=new Dn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{n=n.add(o.wr)})}),Se.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;ft.isDocumentKey(s)||(s=s.child(""));const a=new Dn(new ft(s),0);let o=new Sr(jt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),Se.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Se.forEach(t.mutations,i=>{const s=new Dn(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Dn(t,0),i=this.br.firstAfterOrEqual(n);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e){this.Mr=e,this.docs=function(){return new Lr(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Se.resolve(n?n.document.mutableCopy():Mr.newInvalidDocument(t))}getEntries(e,t){let n=$i();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Mr.newInvalidDocument(i))}),Se.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=$i();const a=t.path,o=new ft(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||mv(LT(l),n)<=0||(i.has(l.key)||vd(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return Se.resolve(s)}getAllFromCollectionGroup(e,t,n,i){xt()}Or(e,t){return Se.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new xL(this)}getSize(e){return Se.resolve(this.size)}}class xL extends VE{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),Se.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e){this.persistence=e,this.Nr=new Tc(t=>mu(t),gd),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Lv,this.targetCount=0,this.kr=xu.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new xu(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Kn(t),Se.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Se.waitFor(s).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Se.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Se.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Se.resolve(n)}containsKey(e,t){return Se.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.qr={},this.overlays={},this.Qr=new zi(0),this.Kr=!1,this.Kr=!0,this.$r=new _L,this.referenceDelegate=e(this),this.Ur=new TL(this),this.indexManager=new sL,this.remoteDocumentCache=function(i){return new wL(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new kE(t),this.Gr=new mL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new yL(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Je("MemoryPersistence","Starting transaction:",e);const i=new EL(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Se.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class EL extends FT{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Jr=new Lv,this.Yr=null}static Zr(e){return new Yp(e)}get Xr(){if(this.Yr)return this.Yr;throw xt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Se.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,n=>{const i=ft.fromPath(n);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Pt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Se.or([()=>Se.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(e){this.serializer=e}O(e,t,n,i){const s=new qp("createOrUpgrade",t);n<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gy,{unique:!0}),c.createObjectStore("documentMutations")}(e),rw(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=Se.resolve();return n<3&&i>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),rw(e)),a=a.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),n<4&&i>=4&&(n!==0&&(a=a.next(()=>function(c,u){return u.store("mutations").U().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gy,{unique:!0});const d=u.store("mutations"),g=l.map(p=>d.put(p));return Se.waitFor(g)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&i>=5&&(a=a.next(()=>this.ni(s))),n<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&i>=7&&(a=a.next(()=>this.ii(s))),n<8&&i>=8&&(a=a.next(()=>this.si(e,s))),n<9&&i>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(a=a.next(()=>this.oi(s))),n<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&i>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:i6});u.createIndex("collectionPathOverlayIndex",s6,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",a6,{unique:!1})})(e)})),n<13&&i>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:Gk});u.createIndex("documentKeyIndex",Kk),u.createIndex("collectionGroupIndex",Yk)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),n<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:e6}).createIndex("sequenceNumberIndex",t6,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:r6}).createIndex("documentKeyIndex",n6,{unique:!1})}(e))),n<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&i>=17&&(a=a.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((n,i)=>{t+=Z0(i)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(i=>Se.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Se.forEach(o,c=>{bt(c.userId===s.userId);const u=Kc(this.serializer,c);return OE(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return n.J((a,o)=>{const c=new Qt(a),u=function(d){return[0,Si(d)]}(c);s.push(t.get(u).next(l=>l?Se.resolve():(d=>t.put({targetId:0,path:Si(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Se.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Zk});const n=t.store("collectionParents"),i=new kv,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return n.put({collectionId:o,parent:Si(c)})}};return t.store("remoteDocuments").J({H:!0},(a,o)=>{const c=new Qt(a);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,o,c],u)=>{const l=pa(o);return s(l.popLast())}))}oi(e){const t=e.store("targets");return t.J((n,i)=>{const s=hf(i),a=LE(this.serializer,s);return t.put(a)})}_i(e,t){const n=t.store("remoteDocuments"),i=[];return n.J((s,a)=>{const o=t.store("remoteDocumentsV14"),c=function(d){return d.document?new ft(Qt.fromString(d.document.name).popFirst(5)):d.noDocument?ft.fromSegments(d.noDocument.path):d.unknownDocument?ft.fromSegments(d.unknownDocument.path):xt()}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))}).next(()=>Se.waitFor(i))}ai(e,t){const n=t.store("mutations"),i=UE(this.serializer),s=new qE(Yp.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(c=>{var u;let l=(u=o.get(c.userId))!==null&&u!==void 0?u:zt();Kc(this.serializer,c).keys().forEach(d=>l=l.add(d)),o.set(c.userId,l)}),Se.forEach(o,(c,u)=>{const l=new Fn(u),d=Gp.lt(this.serializer,l),g=s.getIndexManager(l),p=Kp.lt(l,this.serializer,g,s.referenceDelegate);return new jE(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new Jm(t,zi.oe),c).next()})})}}function rw(r){r.createObjectStore("targetDocuments",{keyPath:Jk}).createIndex("documentTargetsIndex",Qk,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xk,{unique:!0}),r.createObjectStore("targetGlobal")}const nm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Dv{constructor(e,t,n,i,s,a,o,c,u,l,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=s,this.window=a,this.document=o,this.ci=u,this.li=l,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!Dv.D())throw new Xe(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new fL(this,i),this.Ai=t+"main",this.serializer=new kE(c),this.Ri=new va(this.Ai,this.hi,new bL(this.serializer)),this.$r=new Z6,this.Ur=new oL(this.referenceDelegate,this.serializer),this.remoteDocumentCache=UE(this.serializer),this.Gr=new Q6,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,l===!1&&fn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(Le.FAILED_PRECONDITION,nm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new zi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>u0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(xc(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return ef(e).get("owner").next(t=>Se.resolve(this.vi(t)))}Ci(e){return u0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Cn(t,"clientMetadata");return n.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return Se.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Se.resolve(!0):ef(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Xe(Le.FAILED_PRECONDITION,nm);return!1}}return!(!this.networkEnabled||!this.inForeground)||u0(e).U().next(n=>this.xi(n,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Jm(e,zi.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(n=>this.Mi(n.updateTimeMs,t)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>u0(e).U().next(t=>this.xi(t,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return Kp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new aL(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Gp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){Je("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?u6:c===16?c6:c===15?_v:c===14?jT:c===13?UT:c===12?o6:c===11?VT:void xt()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,o=>(a=new Jm(o,this.Qr?this.Qr.next():zi.oe),t==="readwrite-primary"?this.wi(a).next(c=>!!c||this.Si(a)).next(c=>{if(!c)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Xe(Le.FAILED_PRECONDITION,DT);return n(a)}).next(c=>this.Di(a).next(()=>c)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return ef(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Xe(Le.FAILED_PRECONDITION,nm)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ef(e).put("owner",t)}static D(){return va.D()}bi(e){const t=ef(e);return t.get("owner").next(n=>this.vi(n)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Se.resolve())}Mi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(fn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;fx()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Je("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return fn("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ef(r){return Cn(r,"owner")}function u0(r){return Cn(r,"clientMetadata")}function Fv(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=i}static Wi(e,t){let n=zt(),i=zt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ov(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return fx()?8:OT(Gr())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new AL;return this.Xi(e,t,a).next(o=>{if(s.result=o,this.zi)return this.es(e,t,a,o.size)})}).next(()=>s.result)}es(e,t,n,i){return n.documentReadCount<this.ji?(wl()<=Yt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(wl()<=Yt.DEBUG&&Je("QueryEngine","Query:",xl(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(wl()<=Yt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):Se.resolve())}Yi(e,t){if(Py(t))return Se.resolve(null);let n=Pi(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=X0(t,null,"F"),n=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=zt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(t,o);return this.ns(t,u,a,c.readTime)?this.Yi(e,X0(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,n,i){return Py(t)||i.isEqual(Pt.min())?Se.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const a=this.ts(t,s);return this.ns(t,a,n,i)?Se.resolve(null):(wl()<=Yt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),xl(t)),this.rs(e,a,t,kT(i,-1)).next(o=>o))})}ts(e,t){let n=new Sr(nE(e));return t.forEach((i,s)=>{vd(e,s)&&(n=n.add(s))}),n}ns(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,n){return wl()<=Yt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",xl(t)),this.Ji.getDocumentsMatchingQuery(e,t,ps.min(),n)}rs(e,t,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,t,n,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Lr(jt),this._s=new Tc(s=>mu(s),gd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jE(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function zE(r,e,t,n){return new IL(r,e,t,n)}async function HE(r,e){const t=mt(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let c=zt();for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function SL(r,e){const t=mt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,l){const d=u.batch,g=d.keys();let p=Se.resolve();return g.forEach(w=>{p=p.next(()=>l.getEntry(c,w)).next(_=>{const T=u.docVersions.get(w);bt(T!==null),_.version.compareTo(T)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,d))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=zt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function $E(r){const e=mt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function PL(r,e){const t=mt(r),n=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const o=[];e.targetChanges.forEach((l,d)=>{const g=i.get(d);if(!g)return;o.push(t.Ur.removeMatchingKeys(s,l.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,l.addedDocuments,d)));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(nn.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,n)),i=i.insert(d,p),function(_,T,P){return _.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,p,l)&&o.push(t.Ur.updateTargetData(s,p))});let c=$i(),u=zt();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),o.push(GE(s,a,e.documentUpdates).next(l=>{c=l.Ps,u=l.Is})),!n.isEqual(Pt.min())){const l=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(l)}return Se.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function GE(r,e,t){let n=zt(),i=zt();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let a=$i();return t.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Pt.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Je("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function NL(r,e){const t=mt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function ih(r,e){const t=mt(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Ur.getTargetData(n,e).next(s=>s?(i=s,Se.resolve(i)):t.Ur.allocateTargetId(n).next(a=>(i=new Ka(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}async function sh(r,e,t){const n=mt(r),i=n.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!xc(a))throw a;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function ep(r,e,t){const n=mt(r);let i=Pt.min(),s=zt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,l){const d=mt(c),g=d._s.get(l);return g!==void 0?Se.resolve(d.os.get(g)):d.Ur.getTargetData(u,l)}(n,a,Pi(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,t?i:Pt.min(),t?s:zt())).next(o=>(XE(n,rE(e),o),{documents:o,Ts:s})))}function KE(r,e){const t=mt(r),n=mt(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>n.ot(s,e).next(a=>a?a.target:null))}function YE(r,e){const t=mt(r),n=t.us.get(e)||Pt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,kT(n,-1),Number.MAX_SAFE_INTEGER)).then(i=>(XE(t,e,i),i))}function XE(r,e,t){let n=r.us.get(e)||Pt.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.us.set(e,n)}async function CL(r,e,t,n){const i=mt(r);let s=zt(),a=$i();for(const u of t){const l=e.Es(u.metadata.name);u.document&&(s=s.add(l));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),a=a.insert(l,d)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),c=await ih(i,function(l){return Pi(_h(Qt.fromString(`__bundle__/docs/${l}`)))}(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>GE(u,o,a).next(l=>(o.apply(u),l)).next(l=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.Ps,l.Is)).next(()=>l.Ps)))}async function RL(r,e,t=zt()){const n=await ih(r,Pi(Cv(e.bundledQuery))),i=mt(r);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=dn(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=n.withResumeToken(nn.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next(()=>i.Ur.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,n.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function nw(r,e){return`firestore_clients_${r}_${e}`}function iw(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function im(r,e){return`firestore_targets_${r}_${e}`}class tp{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Rs(e,t,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Xe(i.error.code,i.error.message))),a?new tp(e,t,i.state,s):(fn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class wf{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new Xe(n.error.code,n.error.message))),s?new wf(e,n.state,i):(fn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class rp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=Tv();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=MT(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new rp(e,s):(fn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mv{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Mv(t.clientId,t.onlineState):(fn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class h1{constructor(){this.activeTargetIds=Tv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class sm{constructor(e,t,n,i,s){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Lr(jt),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=nw(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new h1),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(nw(this.persistenceKey,n));if(i){const s=rp.Rs(n,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const n=this.Ls(t);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(im(this.persistenceKey,e));if(i){const s=wf.Rs(e,i);s&&(n=s.state)}}return t&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(im(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Je("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const n=this.Gs(t.key);return this.zs(n,null)}{const n=this.js(t.key,t.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const n=this.Hs(t.key,t.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const n=this.Ys(t.key,t.newValue);if(n)return this.Zs(n)}}else if(t.key===this.xs){if(t.newValue!==null){const n=this.Ls(t.newValue);if(n)return this.Bs(n)}}else if(t.key===this.vs){const n=function(s){let a=zi.oe;if(s!=null)try{const o=JSON.parse(s);bt(typeof o=="number"),a=o}catch(o){fn("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(t.newValue);n!==zi.oe&&this.sequenceNumberHandler(n)}else if(t.key===this.Os){const n=this.Xs(t.newValue);await Promise.all(n.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const i=new tp(this.currentUser,e,t,n),s=iw(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=iw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,n){const i=im(this.persistenceKey,e),s=new wf(e,t,n);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return rp.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return tp.Rs(new Fn(s),i,t)}Ys(e,t){const n=this.Ms.exec(e),i=Number(n[1]);return wf.Rs(i,t)}Ls(e){return Mv.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(n),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.io(a,o).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Tv();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class JE{constructor(){this.so=new h1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new h1,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let l0=null;function am(){return l0===null?l0=function(){return 268435456+Math.round(2147483648*Math.random())}():l0++,"0x"+l0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DL{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class FL extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,n,i,s,a){const o=am(),c=this.xo(t,n.toUriEncodedString());Je("RestConnection",`Sending RPC '${t}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(t,c,u,i).then(l=>(Je("RestConnection",`Received RPC '${t}' ${o}: `,l),l),l=>{throw Ta("RestConnection",`RPC '${t}' ${o} failed with error: `,l,"url: ",c,"request:",i),l})}Lo(t,n,i,s,a,o){return this.Mo(t,n,i,s,a)}Oo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vh}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,n){const i=LL[t];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,i){const s=am();return new Promise((a,o)=>{const c=new bT;c.setWithCredentials(!0),c.listenOnce(AT.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case S0.NO_ERROR:const l=c.getResponseJson();Je(oi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),a(l);break;case S0.TIMEOUT:Je(oi,`RPC '${e}' ${s} timed out`),o(new Xe(Le.DEADLINE_EXCEEDED,"Request time out"));break;case S0.HTTP_ERROR:const d=c.getStatus();if(Je(oi,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const p=g==null?void 0:g.error;if(p&&p.status&&p.message){const w=function(T){const P=T.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(P)>=0?P:Le.UNKNOWN}(p.status);o(new Xe(w,p.message))}else o(new Xe(Le.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new Xe(Le.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Je(oi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Je(oi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,n,15)})}Bo(e,t,n){const i=am(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=PT(),o=ST(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const l=s.join("");Je(oi,`Creating RPC '${e}' stream ${i}: ${l}`,c);const d=a.createWebChannel(l,c);let g=!1,p=!1;const w=new DL({Io:T=>{p?Je(oi,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(g||(Je(oi,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),Je(oi,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},To:()=>d.close()}),_=(T,P,L)=>{T.listen(P,F=>{try{L(F)}catch(K){setTimeout(()=>{throw K},0)}})};return _(d,cf.EventType.OPEN,()=>{p||(Je(oi,`RPC '${e}' stream ${i} transport opened.`),w.yo())}),_(d,cf.EventType.CLOSE,()=>{p||(p=!0,Je(oi,`RPC '${e}' stream ${i} transport closed`),w.So())}),_(d,cf.EventType.ERROR,T=>{p||(p=!0,Ta(oi,`RPC '${e}' stream ${i} transport errored:`,T),w.So(new Xe(Le.UNAVAILABLE,"The operation could not be completed")))}),_(d,cf.EventType.MESSAGE,T=>{var P;if(!p){const L=T.data[0];bt(!!L);const F=L,K=F.error||((P=F[0])===null||P===void 0?void 0:P.error);if(K){Je(oi,`RPC '${e}' stream ${i} received error:`,K);const se=K.status;let ce=function(C){const V=wn[C];if(V!==void 0)return mE(V)}(se),R=K.message;ce===void 0&&(ce=Le.INTERNAL,R="Unknown error status: "+se+" with message "+K.message),p=!0,w.So(new Xe(ce,R)),d.close()}else Je(oi,`RPC '${e}' stream ${i} received:`,L),w.bo(L)}}),_(o,IT.STAT_EVENT,T=>{T.stat===Ym.PROXY?Je(oi,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===Ym.NOPROXY&&Je(oi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QE(){return typeof window<"u"?window:null}function D0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xd(r){return new j6(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bv{constructor(e,t,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-n);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,t,n,i,s,a,o,c){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Bv(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Le.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===t&&this.P_(n,i)},n=>{e(()=>{const i=new Xe(Le.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OL extends ZE{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=z6(this.serializer,e),n=function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?dn(a.readTime):Pt.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=a1(this.serializer),t.addTarget=function(s,a){let o;const c=a.target;if(o=K0(c)?{documents:IE(s,c)}:{query:SE(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=wE(s,a.resumeToken);const u=i1(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=nh(s,a.snapshotVersion.toTimestamp());const u=i1(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=$6(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=a1(this.serializer),t.removeTarget=e,this.a_(t)}}class ML extends ZE{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=H6(e.writeResults,e.commitTime),n=dn(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=a1(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>$f(this.serializer,n))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BL extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Xe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,s1(t,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xe(Le.UNKNOWN,s.toString())})}Lo(e,t,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,s1(t,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xe(Le.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fn(t),this.D_=!1):Je("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{n.enqueueAndForget(async()=>{Ec(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=mt(c);u.L_.add(4),await xh(u),u.q_.set("Unknown"),u.L_.delete(4),await Td(u)}(this))})}),this.q_=new VL(n,i)}}async function Td(r){if(Ec(r))for(const e of r.B_)await e(!0)}async function xh(r){for(const e of r.B_)await e(!1)}function Xp(r,e){const t=mt(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),jv(t)?Uv(t):Eh(t).r_()&&Vv(t,e))}function ah(r,e){const t=mt(r),n=Eh(t);t.N_.delete(e),n.r_()&&eb(t,e),t.N_.size===0&&(n.r_()?n.o_():Ec(t)&&t.q_.set("Unknown"))}function Vv(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Eh(r).A_(e)}function eb(r,e){r.Q_.xe(e),Eh(r).R_(e)}function Uv(r){r.Q_=new M6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),Eh(r).start(),r.q_.v_()}function jv(r){return Ec(r)&&!Eh(r).n_()&&r.N_.size>0}function Ec(r){return mt(r).L_.size===0}function tb(r){r.Q_=void 0}async function jL(r){r.q_.set("Online")}async function qL(r){r.N_.forEach((e,t)=>{Vv(r,e)})}async function WL(r,e){tb(r),jv(r)?(r.q_.M_(e),Uv(r)):r.q_.set("Unknown")}async function zL(r,e,t){if(r.q_.set("Online"),e instanceof yE&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(r,e)}catch(n){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await np(r,n)}else if(e instanceof L0?r.Q_.Ke(e):e instanceof _E?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Pt.min()))try{const n=await $E(r.localStore);t.compareTo(n)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=s.N_.get(u);l&&s.N_.set(u,l.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const l=s.N_.get(c);if(!l)return;s.N_.set(c,l.withResumeToken(nn.EMPTY_BYTE_STRING,l.snapshotVersion)),eb(s,c);const d=new Ka(l.target,c,u,l.sequenceNumber);Vv(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(r,t)}catch(n){Je("RemoteStore","Failed to raise snapshot:",n),await np(r,n)}}async function np(r,e,t){if(!xc(e))throw e;r.L_.add(1),await xh(r),r.q_.set("Offline"),t||(t=()=>$E(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Je("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await Td(r)})}function rb(r,e){return e().catch(t=>np(r,t,e))}async function Th(r){const e=mt(r),t=lc(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;HL(e);)try{const i=await NL(e.localStore,n);if(i===null){e.O_.length===0&&t.o_();break}n=i.batchId,$L(e,i)}catch(i){await np(e,i)}nb(e)&&ib(e)}function HL(r){return Ec(r)&&r.O_.length<10}function $L(r,e){r.O_.push(e);const t=lc(r);t.r_()&&t.V_&&t.m_(e.mutations)}function nb(r){return Ec(r)&&!lc(r).n_()&&r.O_.length>0}function ib(r){lc(r).start()}async function GL(r){lc(r).p_()}async function KL(r){const e=lc(r);for(const t of r.O_)e.m_(t.mutations)}async function YL(r,e,t){const n=r.O_.shift(),i=Iv.from(n,e,t);await rb(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await Th(r)}async function XL(r,e){e&&lc(r).V_&&await async function(n,i){if(function(a){return gE(a)&&a!==Le.ABORTED}(i.code)){const s=n.O_.shift();lc(n).s_(),await rb(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Th(n)}}(r,e),nb(r)&&ib(r)}async function aw(r,e){const t=mt(r);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const n=Ec(t);t.L_.add(3),await xh(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await Td(t)}async function f1(r,e){const t=mt(r);e?(t.L_.delete(2),await Td(t)):e||(t.L_.add(2),await xh(t),t.q_.set("Unknown"))}function Eh(r){return r.K_||(r.K_=function(t,n,i){const s=mt(t);return s.w_(),new OL(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Eo:jL.bind(null,r),Ro:qL.bind(null,r),mo:WL.bind(null,r),d_:zL.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),jv(r)?Uv(r):r.q_.set("Unknown")):(await r.K_.stop(),tb(r))})),r.K_}function lc(r){return r.U_||(r.U_=function(t,n,i){const s=mt(t);return s.w_(),new ML(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:GL.bind(null,r),mo:XL.bind(null,r),f_:KL.bind(null,r),g_:YL.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await Th(r)):(await r.U_.stop(),r.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new qv(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function bh(r,e){if(fn("AsyncQueue",`${e}: ${r}`),xc(r))return new Xe(Le.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ml{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ft.comparator(t.key,n.key):(t,n)=>ft.comparator(t.key,n.key),this.keyedMap=uf(),this.sortedSet=new Lr(this.comparator)}static emptySet(e){return new Ml(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ml)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Ml;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ow{constructor(){this.W_=new Lr(ft.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class oh{constructor(e,t,n,i,s,a,o,c,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new oh(e,t,Ml.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&md(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QL{constructor(){this.queries=cw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const i=mt(t),s=i.queries;i.queries=cw(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(n)})})(this,new Xe(Le.ABORTED,"Firestore shutting down"))}}function cw(){return new Tc(r=>tE(r),md)}async function Wv(r,e){const t=mt(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new JL,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=bh(a,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&Hv(t)}async function zv(r,e){const t=mt(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function ZL(r,e){const t=mt(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(n=!0);a.z_=i}}n&&Hv(t)}function eD(r,e,t){const n=mt(r),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(t);n.queries.delete(e)}function Hv(r){r.Y_.forEach(e=>{e.next()})}var d1,uw;(uw=d1||(d1={})).ea="default",uw.Cache="cache";class $v{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new oh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=oh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==d1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e){this.serializer=e}Es(e){return _a(this.serializer,e)}ds(e){return e.metadata.exists?AE(this.serializer,e.document,!1):Mr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dn(e)}}class rD{constructor(e,t,n){this.ca=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=sb(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const n=Qt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,n=new lw(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(t.get(a)||zt()).add(s);t.set(a,o)}}return t}async complete(){const e=await CL(this.localStore,new lw(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const n of this.queries)await RL(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function sb(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(e){this.key=e}}class ob{constructor(e){this.key=e}}class cb{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=zt(),this.mutatedKeys=zt(),this.Aa=nE(e),this.Ra=new Ml(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new ow,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const g=i.get(l),p=vd(this.query,d)?d:null,w=!!g&&this.mutatedKeys.has(g.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let T=!1;g&&p?g.data.isEqual(p.data)?w!==_&&(n.track({type:3,doc:p}),T=!0):this.ga(g,p)||(n.track({type:2,doc:p}),T=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!g&&p?(n.track({type:0,doc:p}),T=!0):g&&!p&&(n.track({type:1,doc:g}),T=!0,(c||u)&&(o=!0)),T&&(p?(a=a.add(p),s=_?s.add(l):s.delete(l)):(a=a.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),s=s.delete(l.key),n.track({type:1,doc:l})}return{Ra:a,fa:n,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((l,d)=>function(p,w){const _=T=>{switch(T){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return _(p)-_(w)}(l.type,d.type)||this.Aa(l.doc,d.doc)),this.pa(n),i=i!=null&&i;const o=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new oh(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new ow,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=zt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const t=[];return e.forEach(n=>{this.da.has(n)||t.push(new ob(n))}),this.da.forEach(n=>{e.has(n)||t.push(new ab(n))}),t}ba(e){this.Ta=e.Ts,this.da=zt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return oh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nD{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class iD{constructor(e){this.key=e,this.va=!1}}class sD{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Tc(o=>tE(o),md),this.Ma=new Map,this.xa=new Set,this.Oa=new Lr(ft.comparator),this.Na=new Map,this.La=new Lv,this.Ba={},this.ka=new Map,this.qa=xu.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aD(r,e,t=!0){const n=Jp(r);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await ub(n,e,t,!0),i}async function oD(r,e){const t=Jp(r);await ub(t,e,!0,!1)}async function ub(r,e,t,n){const i=await ih(r.localStore,Pi(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await Gv(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&Xp(r.remoteStore,i),o}async function Gv(r,e,t,n,i){r.Ka=(d,g,p)=>async function(_,T,P,L){let F=T.view.ma(P);F.ns&&(F=await ep(_.localStore,T.query,!1).then(({documents:R})=>T.view.ma(R,F)));const K=L&&L.targetChanges.get(T.targetId),se=L&&L.targetMismatches.get(T.targetId)!=null,ce=T.view.applyChanges(F,_.isPrimaryClient,K,se);return p1(_,T.targetId,ce.wa),ce.snapshot}(r,d,g,p);const s=await ep(r.localStore,e,!0),a=new cb(e,s.Ts),o=a.ma(s.documents),c=wd.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),u=a.applyChanges(o,r.isPrimaryClient,c);p1(r,t,u.wa);const l=new nD(e,t,a);return r.Fa.set(e,l),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),u.snapshot}async function cD(r,e,t){const n=mt(r),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter(a=>!md(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await sh(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&ah(n.remoteStore,i.targetId),ch(n,i.targetId)}).catch(wc)):(ch(n,i.targetId),await sh(n.localStore,i.targetId,!0))}async function uD(r,e){const t=mt(r),n=t.Fa.get(e),i=t.Ma.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),ah(t.remoteStore,n.targetId))}async function lD(r,e,t){const n=Jv(r);try{const i=await function(a,o){const c=mt(a),u=zr.now(),l=o.reduce((p,w)=>p.add(w.key),zt());let d,g;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let w=$i(),_=zt();return c.cs.getEntries(p,l).next(T=>{w=T,w.forEach((P,L)=>{L.isValidDocument()||(_=_.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,w)).next(T=>{d=T;const P=[];for(const L of o){const F=D6(L,d.get(L.key).overlayedDocument);F!=null&&P.push(new ho(L.key,F,$T(F.value.mapValue),Wr.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,P,o)}).next(T=>{g=T;const P=T.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(p,T.batchId,P)})}).then(()=>({batchId:g.batchId,changes:sE(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Lr(jt)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(n,i.batchId,t),await fo(n,i.changes),await Th(n.remoteStore)}catch(i){const s=bh(i,"Failed to persist write");t.reject(s)}}async function lb(r,e){const t=mt(r);try{const n=await PL(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?bt(a.va):i.removedDocuments.size>0&&(bt(a.va),a.va=!1))}),await fo(t,n,e)}catch(n){await wc(n)}}function hw(r,e,t){const n=mt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=mt(a);c.onlineState=o;let u=!1;c.queries.forEach((l,d)=>{for(const g of d.j_)g.Z_(o)&&(u=!0)}),u&&Hv(c)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function hD(r,e,t){const n=mt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Na.get(e),s=i&&i.key;if(s){let a=new Lr(ft.comparator);a=a.insert(s,Mr.newNoDocument(s,Pt.min()));const o=zt().add(s),c=new yd(Pt.min(),new Map,new Lr(jt),a,o);await lb(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),Xv(n)}else await sh(n.localStore,e,!1).then(()=>ch(n,e,t)).catch(wc)}async function fD(r,e){const t=mt(r),n=e.batch.batchId;try{const i=await SL(t.localStore,e);Yv(t,n,null),Kv(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await fo(t,i)}catch(i){await wc(i)}}async function dD(r,e,t){const n=mt(r);try{const i=await function(a,o){const c=mt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,o).next(d=>(bt(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(n.localStore,e);Yv(n,e,t),Kv(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await fo(n,i)}catch(i){await wc(i)}}async function pD(r,e){const t=mt(r);Ec(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(a){const o=mt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(n===-1)return void e.resolve();const i=t.ka.get(n)||[];i.push(e),t.ka.set(n,i)}catch(n){const i=bh(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function Kv(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function Yv(r,e,t){const n=mt(r);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function ch(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Ma.get(e))r.Fa.delete(n),t&&r.Ca.$a(n,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(n=>{r.La.containsKey(n)||hb(r,n)})}function hb(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(ah(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),Xv(r))}function p1(r,e,t){for(const n of t)n instanceof ab?(r.La.addReference(n.key,e),gD(r,n)):n instanceof ob?(Je("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,e),r.La.containsKey(n.key)||hb(r,n.key)):xt()}function gD(r,e){const t=e.key,n=t.path.canonicalString();r.Oa.get(t)||r.xa.has(n)||(Je("SyncEngine","New document in limbo: "+t),r.xa.add(n),Xv(r))}function Xv(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ft(Qt.fromString(e)),n=r.qa.next();r.Na.set(n,new iD(t)),r.Oa=r.Oa.insert(t,n),Xp(r.remoteStore,new Ka(Pi(_h(t.path)),n,"TargetPurposeLimboResolution",zi.oe))}}async function fo(r,e,t){const n=mt(r),i=[],s=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,c)=>{a.push(n.Ka(c,e,t).then(u=>{var l;if((u||t)&&n.isPrimaryClient){const d=u?!u.fromCache:(l=t==null?void 0:t.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);const d=Ov.Wi(c.targetId,u);s.push(d)}}))}),await Promise.all(a),n.Ca.d_(i),await async function(c,u){const l=mt(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Se.forEach(u,g=>Se.forEach(g.$i,p=>l.persistence.referenceDelegate.addReference(d,g.targetId,p)).next(()=>Se.forEach(g.Ui,p=>l.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))}catch(d){if(!xc(d))throw d;Je("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=l.os.get(g),w=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(w);l.os=l.os.insert(g,_)}}}(n.localStore,s))}async function mD(r,e){const t=mt(r);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const n=await HE(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new Xe(Le.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await fo(t,n.hs)}}function vD(r,e){const t=mt(r),n=t.Na.get(e);if(n&&n.va)return zt().add(n.key);{let i=zt();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const o=t.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function _D(r,e){const t=mt(r),n=await ep(t.localStore,e.query,!0),i=e.view.ba(n);return t.isPrimaryClient&&p1(t,e.targetId,i.wa),i}async function yD(r,e){const t=mt(r);return YE(t.localStore,e).then(n=>fo(t,n))}async function wD(r,e,t,n){const i=mt(r),s=await function(o,c){const u=mt(o),l=mt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Mn(d,c).next(g=>g?u.localDocuments.getDocuments(d,g):Se.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await Th(i.remoteStore):t==="acknowledged"||t==="rejected"?(Yv(i,e,n||null),Kv(i,e),function(o,c){mt(mt(o).mutationQueue).On(c)}(i.localStore,e)):xt(),await fo(i,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}async function xD(r,e){const t=mt(r);if(Jp(t),Jv(t),e===!0&&t.Qa!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await fw(t,n.toArray());t.Qa=!0,await f1(t.remoteStore,!0);for(const s of i)Xp(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const n=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then(()=>(ch(t,a),sh(t.localStore,a,!0))),ah(t.remoteStore,a)}),await i,await fw(t,n),function(a){const o=mt(a);o.Na.forEach((c,u)=>{ah(o.remoteStore,u)}),o.La.pr(),o.Na=new Map,o.Oa=new Lr(ft.comparator)}(t),t.Qa=!1,await f1(t.remoteStore,!1)}}async function fw(r,e,t){const n=mt(r),i=[],s=[];for(const a of e){let o;const c=n.Ma.get(a);if(c&&c.length!==0){o=await ih(n.localStore,Pi(c[0]));for(const u of c){const l=n.Fa.get(u),d=await _D(n,l);d.snapshot&&s.push(d.snapshot)}}else{const u=await KE(n.localStore,a);o=await ih(n.localStore,u),await Gv(n,fb(u),a,!1,o.resumeToken)}i.push(o)}return n.Ca.d_(s),i}function fb(r){return eE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function TD(r){return function(t){return mt(mt(t).persistence).Qi()}(mt(r).localStore)}async function ED(r,e,t,n){const i=mt(r);if(i.Qa)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await YE(i.localStore,rE(s[0])),o=yd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",nn.EMPTY_BYTE_STRING);await fo(i,a,o);break}case"rejected":await sh(i.localStore,e,!0),ch(i,e,n);break;default:xt()}}async function bD(r,e,t){const n=Jp(r);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Je("SyncEngine","Adding an already active target "+i);continue}const s=await KE(n.localStore,i),a=await ih(n.localStore,s);await Gv(n,fb(s),a.targetId,!1,a.resumeToken),Xp(n.remoteStore,a)}for(const i of t)n.Ma.has(i)&&await sh(n.localStore,i,!1).then(()=>{ah(n.remoteStore,i),ch(n,i)}).catch(wc)}}function Jp(r){const e=mt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=lb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hD.bind(null,e),e.Ca.d_=ZL.bind(null,e.eventManager),e.Ca.$a=eD.bind(null,e.eventManager),e}function Jv(r){const e=mt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=fD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dD.bind(null,e),e}function AD(r,e,t){const n=mt(r);(async function(s,a,o){try{const c=await a.getMetadata();if(await function(p,w){const _=mt(p),T=dn(w.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",P=>_.Gr.getBundleMetadata(P,w.id)).then(P=>!!P&&P.createTime.compareTo(T)>=0)}(s.localStore,c))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress(sb(c));const u=new rD(c,s.localStore,a.serializer);let l=await a.Ua();for(;l;){const g=await u.la(l);g&&o._updateProgress(g),l=await a.Ua()}const d=await u.complete();return await fo(s,d.Ia,void 0),await function(p,w){const _=mt(p);return _.persistence.runTransaction("Save bundle","readwrite",T=>_.Gr.saveBundleMetadata(T,w))}(s.localStore,c),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(c){return Ta("SyncEngine",`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(n,e,t).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}class Gf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xd(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return zE(this.persistence,new WE,e.initialUser,this.serializer)}Ga(e){return new qE(Yp.Zr,this.serializer)}Wa(e){return new JE}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gf.provider={build:()=>new Gf};class db extends Gf{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await Jv(this.Ja.syncEngine),await Th(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return zE(this.persistence,new WE,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new uL(n,e.asyncQueue,t)}Ha(e,t){const n=new zk(t,this.persistence);return new Wk(e.asyncQueue,n)}Ga(e){const t=Fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new Dv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,QE(),D0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new JE}}class ID extends db{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof sm&&(this.sharedClientState.syncEngine={no:wD.bind(null,t),ro:ED.bind(null,t),io:bD.bind(null,t),Qi:TD.bind(null,t),eo:yD.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await xD(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const t=QE();if(!sm.D(t))throw new Xe(Le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Fv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sm(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Kf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>hw(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=mD.bind(null,this.syncEngine),await f1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QL}()}createDatastore(e){const t=xd(e.databaseInfo.databaseId),n=function(s){return new FL(s)}(e.databaseInfo);return function(s,a,o,c){return new BL(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,a,o){return new UL(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>hw(this.syncEngine,t,0),function(){return sw.D()?new sw:new kL}())}createSyncEngine(e,t){return function(i,s,a,o,c,u,l){const d=new sD(i,s,a,o,c,u);return l&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=mt(i);Je("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await xh(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Kf.provider={build:()=>new Kf};function dw(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ti,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),n=Number(t);isNaN(n)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(n);return new tD(JSON.parse(i),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Xe(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const a=mt(i),o={documents:s.map(d=>Hf(a.serializer,d))},c=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Qt.emptyPath(),o,s.length),u=new Map;c.forEach(d=>{const g=W6(a.serializer,d);u.set(g.key.toString(),g)});const l=[];return s.forEach(d=>{const g=u.get(d.toString());bt(!!g),l.push(g)}),l}(this.datastore,e);return t.forEach(n=>this.recordVersion(n)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new wh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,n)=>{const i=ft.fromPath(n);this.mutations.push(new bv(i,this.precondition(i)))}),await async function(n,i){const s=mt(n),a={writes:i.map(o=>$f(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,Qt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt();t=Pt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xe(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pt.min())?Wr.exists(!1):Wr.updateTime(t):Wr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new Xe(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wr.updateTime(t)}return Wr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(e,t,n,i,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=s,this._u=n.maxAttempts,this.t_=new Bv(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new PD(this.datastore),t=this.cu(e);t&&t.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.lu(i)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const t=this.updateFunction(e);return!pd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!gE(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Fn.UNAUTHENTICATED,this.clientId=CT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Je("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Je("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=bh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function om(r,e){r.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await HE(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function pw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await Qv(r);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>aw(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>aw(e.remoteStore,i)),r._onlineComponents=e}async function Qv(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await om(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ta("Error using user provided cache. Falling back to memory cache: "+t),await om(r,new Gf)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await om(r,new Gf);return r._offlineComponents}async function Zp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await pw(r,r._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await pw(r,new Kf))),r._onlineComponents}function pb(r){return Qv(r).then(e=>e.persistence)}function Zv(r){return Qv(r).then(e=>e.localStore)}function gb(r){return Zp(r).then(e=>e.remoteStore)}function e2(r){return Zp(r).then(e=>e.syncEngine)}function RD(r){return Zp(r).then(e=>e.datastore)}async function uh(r){const e=await Zp(r),t=e.eventManager;return t.onListen=aD.bind(null,e.syncEngine),t.onUnlisten=cD.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=oD.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=uD.bind(null,e.syncEngine),t}function kD(r){return r.asyncQueue.enqueue(async()=>{const e=await pb(r),t=await gb(r);return e.setNetworkEnabled(!0),function(i){const s=mt(i);return s.L_.delete(0),Td(s)}(t)})}function LD(r){return r.asyncQueue.enqueue(async()=>{const e=await pb(r),t=await gb(r);return e.setNetworkEnabled(!1),async function(i){const s=mt(i);s.L_.add(0),await xh(s),s.q_.set("Offline")}(t)})}function DD(r,e){const t=new ti;return r.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await function(u,l){const d=mt(u);return d.persistence.runTransaction("read document","readonly",g=>d.localDocuments.getDocument(g,l))}(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Xe(Le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=bh(o,`Failed to get document '${s} from cache`);a.reject(c)}}(await Zv(r),e,t)),t.promise}function mb(r,e,t={}){const n=new ti;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new Qp({next:g=>{l.Za(),a.enqueueAndForget(()=>zv(s,d));const p=g.docs.has(o);!p&&g.fromCache?u.reject(new Xe(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&c&&c.source==="server"?u.reject(new Xe(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new $v(_h(o.path),l,{includeMetadataChanges:!0,_a:!0});return Wv(s,d)}(await uh(r),r.asyncQueue,e,t,n)),n.promise}function FD(r,e){const t=new ti;return r.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await ep(i,s,!0),c=new cb(s,o.Ts),u=c.ma(o.documents),l=c.applyChanges(u,!1);a.resolve(l.snapshot)}catch(o){const c=bh(o,`Failed to execute query '${s} against cache`);a.reject(c)}}(await Zv(r),e,t)),t.promise}function vb(r,e,t={}){const n=new ti;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new Qp({next:g=>{l.Za(),a.enqueueAndForget(()=>zv(s,d)),g.fromCache&&c.source==="server"?u.reject(new Xe(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new $v(o,l,{includeMetadataChanges:!0,_a:!0});return Wv(s,d)}(await uh(r),r.asyncQueue,e,t,n)),n.promise}function OD(r,e){const t=new Qp(e);return r.asyncQueue.enqueueAndForget(async()=>function(i,s){mt(i).Y_.add(s),s.next()}(await uh(r),t)),()=>{t.Za(),r.asyncQueue.enqueueAndForget(async()=>function(i,s){mt(i).Y_.delete(s)}(await uh(r),t))}}function MD(r,e,t,n){const i=function(a,o){let c;return c=typeof a=="string"?vE().encode(a):a,function(l,d){return new SD(l,d)}(function(l,d){if(l instanceof Uint8Array)return dw(l,d);if(l instanceof ArrayBuffer)return dw(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(t,xd(e));r.asyncQueue.enqueueAndForget(async()=>{AD(await e2(r),i,n)})}function BD(r,e){return r.asyncQueue.enqueue(async()=>function(n,i){const s=mt(n);return s.persistence.runTransaction("Get named query","readonly",a=>s.Gr.getNamedQuery(a,i))}(await Zv(r),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(r,e,t){if(!t)throw new Xe(Le.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function yb(r,e,t,n){if(e===!0&&n===!0)throw new Xe(Le.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function mw(r){if(!ft.isDocumentKey(r))throw new Xe(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function vw(r){if(ft.isDocumentKey(r))throw new Xe(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function eg(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xt()}function or(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Xe(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=eg(r);throw new Xe(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function wb(r,e){if(e<=0)throw new Xe(Le.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _w{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Xe(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_b((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ed{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _w({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _w(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new kk;switch(n.type){case"firstParty":return new Ok(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xe(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=gw.get(t);n&&(Je("ComponentProvider","Removing Datastore"),gw.delete(t),n.terminate())}(this),Promise.resolve()}}function VD(r,e,t,n={}){var i;const s=(r=or(r,Ed))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,c;if(typeof n.mockUserToken=="string")o=n.mockUserToken,c=Fn.MOCK_USER;else{o=Y4(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Xe(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Fn(u)}r._authCredentials=new Lk(new NT(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ki=class xb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new xb(this.firestore,e,this._query)}},$r=class Tb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tb(this.firestore,e,this._key)}},rc=class Eb extends ki{constructor(e,t,n){super(e,t,_h(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $r(this.firestore,null,new ft(e))}withConverter(e){return new Eb(this.firestore,e,this._path)}};function bb(r,e,...t){if(r=St(r),t2("collection","path",e),r instanceof Ed){const n=Qt.fromString(e,...t);return vw(n),new rc(r,null,n)}{if(!(r instanceof $r||r instanceof rc))throw new Xe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Qt.fromString(e,...t));return vw(n),new rc(r.firestore,null,n)}}function UD(r,e){if(r=or(r,Ed),t2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ki(r,null,function(n){return new lo(Qt.emptyPath(),n)}(e))}function ip(r,e,...t){if(r=St(r),arguments.length===1&&(e=CT.newId()),t2("doc","path",e),r instanceof Ed){const n=Qt.fromString(e,...t);return mw(n),new $r(r,null,new ft(n))}{if(!(r instanceof $r||r instanceof rc))throw new Xe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Qt.fromString(e,...t));return mw(n),new $r(r.firestore,r instanceof rc?r.converter:null,new ft(n))}}function Ab(r,e){return r=St(r),e=St(e),(r instanceof $r||r instanceof rc)&&(e instanceof $r||e instanceof rc)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Ib(r,e){return r=St(r),e=St(e),r instanceof ki&&e instanceof ki&&r.firestore===e.firestore&&md(r._query,e._query)&&r.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Bv(this,"async_queue_retry"),this.Vu=()=>{const n=D0();n&&Je("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=D0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=D0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ti;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!xc(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw fn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=qv.createAndSchedule(this,e,t,n,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function g1(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class jD{constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qD=-1;let gn=class extends Ed{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new yw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yw(e),this._firestoreClient=void 0,await e}}};function gi(r){if(r._terminated)throw new Xe(Le.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||Sb(r),r._firestoreClient}function Sb(r){var e,t,n;const i=r._freezeSettings(),s=function(o,c,u,l){return new f6(o,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,_b(l.experimentalLongPollingOptions),l.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new CD(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(r._componentsProvider))}function WD(r,e){Ta("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return Pb(r,Kf.provider,{build:n=>new db(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function zD(r){Ta("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();Pb(r,Kf.provider,{build:t=>new ID(t,e.cacheSizeBytes)})}function Pb(r,e,t){if((r=or(r,gn))._firestoreClient||r._terminated)throw new Xe(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new Xe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},Sb(r)}function HD(r){if(r._initialized&&!r._terminated)throw new Xe(Le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return r._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!va.D())return Promise.resolve();const i=n+"main";await va.delete(i)}(Fv(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function $D(r){return function(t){const n=new ti;return t.asyncQueue.enqueueAndForget(async()=>pD(await e2(t),n)),n.promise}(gi(r=or(r,gn)))}function GD(r){return kD(gi(r=or(r,gn)))}function KD(r){return LD(gi(r=or(r,gn)))}function YD(r,e){const t=gi(r=or(r,gn)),n=new jD;return MD(t,r._databaseId,e,n),n}function XD(r,e){return BD(gi(r=or(r,gn)),e).then(t=>t?new ki(r,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(nn.fromBase64String(e))}catch(t){throw new Xe(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xe(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ku=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xe(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xe(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JD=/^__.*__$/;class QD{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new yh(e,this.data,t,this.fieldTransforms)}}class Nb{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Cb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class rg{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new rg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return sp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Cb(this.Cu)&&JD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class ZD{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xd(e)}Qu(e,t,n,i=!1){return new rg({Cu:e,methodName:t,qu:n,path:qr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lu(r){const e=r._freezeSettings(),t=xd(r._databaseId);return new ZD(r._databaseId,!!e.ignoreUndefinedProperties,t)}function ng(r,e,t,n,i,s={}){const a=r.Qu(s.merge||s.mergeFields?2:0,e,t,i);u2("Data must be an object, but it was:",a,n);const o=Lb(n,a);let c,u;if(s.merge)c=new Hi(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const g=m1(e,d,t);if(!a.contains(g))throw new Xe(Le.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);Fb(l,g)||l.push(g)}c=new Hi(l),u=a.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=a.fieldTransforms;return new QD(new Jn(o),c,u)}class bd extends ku{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bd}}function Rb(r,e,t){return new rg({Cu:3,qu:e.settings.qu,methodName:r._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class n2 extends ku{_toFieldTransform(e){return new _d(e.path,new th)}isEqual(e){return e instanceof n2}}class i2 extends ku{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Rb(this,e,!0),n=this.Ku.map(s=>Du(s,t)),i=new vu(n);return new _d(e.path,i)}isEqual(e){return e instanceof i2&&Cf(this.Ku,e.Ku)}}class s2 extends ku{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=Rb(this,e,!0),n=this.Ku.map(s=>Du(s,t)),i=new _u(n);return new _d(e.path,i)}isEqual(e){return e instanceof s2&&Cf(this.Ku,e.Ku)}}class a2 extends ku{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new rh(e.serializer,cE(e.serializer,this.$u));return new _d(e.path,t)}isEqual(e){return e instanceof a2&&this.$u===e.$u}}function o2(r,e,t,n){const i=r.Qu(1,e,t);u2("Data must be an object, but it was:",i,n);const s=[],a=Jn.empty();Ru(n,(c,u)=>{const l=l2(e,c,t);u=St(u);const d=i.Nu(l);if(u instanceof bd)s.push(l);else{const g=Du(u,d);g!=null&&(s.push(l),a.set(l,g))}});const o=new Hi(s);return new Nb(a,o,i.fieldTransforms)}function c2(r,e,t,n,i,s){const a=r.Qu(1,e,t),o=[m1(e,n,t)],c=[i];if(s.length%2!=0)throw new Xe(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(m1(e,s[g])),c.push(s[g+1]);const u=[],l=Jn.empty();for(let g=o.length-1;g>=0;--g)if(!Fb(u,o[g])){const p=o[g];let w=c[g];w=St(w);const _=a.Nu(p);if(w instanceof bd)u.push(p);else{const T=Du(w,_);T!=null&&(u.push(p),l.set(p,T))}}const d=new Hi(u);return new Nb(l,d,a.fieldTransforms)}function kb(r,e,t,n=!1){return Du(t,r.Qu(n?4:3,e))}function Du(r,e){if(Db(r=St(r)))return u2("Unsupported field value:",e,r),Lb(r,e);if(r instanceof ku)return function(n,i){if(!Cb(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let c=Du(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=St(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return cE(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=zr.fromDate(n);return{timestampValue:nh(i.serializer,s)}}if(n instanceof zr){const s=new zr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:nh(i.serializer,s)}}if(n instanceof tg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ba)return{bytesValue:wE(i.serializer,n._byteString)};if(n instanceof $r){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Nv(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof r2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return Ev(o.serializer,c)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${eg(n)}`)}(r,e)}function Lb(r,e){const t={};return qT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ru(r,(n,i)=>{const s=Du(i,e.Mu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function Db(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof zr||r instanceof tg||r instanceof ba||r instanceof $r||r instanceof ku||r instanceof r2)}function u2(r,e,t){if(!Db(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=eg(t);throw n==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+n)}}function m1(r,e,t){if((e=St(e))instanceof hc)return e._internalPath;if(typeof e=="string")return l2(r,e);throw sp("Field path arguments must be of type string or ",r,!1,void 0,t)}const eF=new RegExp("[~\\*/\\[\\]]");function l2(r,e,t){if(e.search(eF)>=0)throw sp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new hc(...e.split("."))._internalPath}catch{throw sp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function sp(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${n}`),a&&(c+=` in document ${i}`),c+=")"),new Xe(Le.INVALID_ARGUMENT,o+r+c)}function Fb(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new tF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ig("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class tF extends Yf{data(){return super.data()}}function ig(r,e){return typeof e=="string"?l2(r,e):e instanceof hc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Xe(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class h2{}class Ad extends h2{}function Ho(r,e,...t){let n=[];e instanceof h2&&n.push(e),n=n.concat(t),function(s){const a=s.filter(c=>c instanceof f2).length,o=s.filter(c=>c instanceof sg).length;if(a>1||a>0&&o>0)throw new Xe(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class sg extends Ad{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new sg(e,t,n)}_apply(e){const t=this._parse(e);return Bb(e._query,t),new ki(e.firestore,e.converter,n1(e._query,t))}_parse(e){const t=Lu(e.firestore);return function(s,a,o,c,u,l,d){let g;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Xe(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){xw(d,l);const p=[];for(const w of d)p.push(ww(c,s,w));g={arrayValue:{values:p}}}else g=ww(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||xw(d,l),g=kb(o,a,d,l==="in"||l==="not-in");return Zt.create(u,l,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rF(r,e,t){const n=e,i=ig("where",r);return sg._create(i,n,t)}class f2 extends h2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new f2(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)Bb(a,c),a=n1(a,c)}(e._query,t),new ki(e.firestore,e.converter,n1(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class d2 extends Ad{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new d2(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zf(s,a)}(e._query,this._field,this._direction);return new ki(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new lo(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function nF(r,e="asc"){const t=e,n=ig("orderBy",r);return d2._create(n,t)}class ag extends Ad{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new ag(e,t,n)}_apply(e){return new ki(e.firestore,e.converter,X0(e._query,this._limit,this._limitType))}}function iF(r){return wb("limit",r),ag._create("limit",r,"F")}function sF(r){return wb("limitToLast",r),ag._create("limitToLast",r,"L")}class og extends Ad{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new og(e,t,n)}_apply(e){const t=Mb(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,function(i,s){return new lo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function aF(...r){return og._create("startAt",r,!0)}function oF(...r){return og._create("startAfter",r,!1)}class cg extends Ad{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new cg(e,t,n)}_apply(e){const t=Mb(e,this.type,this._docOrFields,this._inclusive);return new ki(e.firestore,e.converter,function(i,s){return new lo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function cF(...r){return cg._create("endBefore",r,!1)}function uF(...r){return cg._create("endAt",r,!0)}function Mb(r,e,t,n){if(t[0]=St(t[0]),t[0]instanceof Yf)return function(s,a,o,c,u){if(!c)throw new Xe(Le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const d of Ol(s))if(d.field.isKeyField())l.push(gu(a,c.key));else{const g=c.data.field(d.field);if(Wp(g))throw new Xe(Le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const p=d.field.canonicalString();throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}l.push(g)}return new uc(l,u)}(r._query,r.firestore._databaseId,e,t[0]._document,n);{const i=Lu(r.firestore);return function(a,o,c,u,l,d){const g=a.explicitOrderBy;if(l.length>g.length)throw new Xe(Le.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let w=0;w<l.length;w++){const _=l[w];if(g[w].field.isKeyField()){if(typeof _!="string")throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!xv(a)&&_.indexOf("/")!==-1)throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const T=a.path.child(Qt.fromString(_));if(!ft.isDocumentKey(T))throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${T}' is not because it contains an odd number of segments.`);const P=new ft(T);p.push(gu(o,P))}else{const T=kb(c,u,_);p.push(T)}}return new uc(p,d)}(r._query,r.firestore._databaseId,i,e,t,n)}}function ww(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!xv(e)&&t.indexOf("/")!==-1)throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Qt.fromString(t));if(!ft.isDocumentKey(n))throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return gu(r,new ft(n))}if(t instanceof $r)return gu(r,t._key);throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${eg(t)}.`)}function xw(r,e){if(!Array.isArray(r)||r.length===0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Bb(r,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Xe(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xe(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class p2{convertValue(e,t="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Ru(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,i;const s=(i=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>jr(a.doubleValue));return new r2(s)}convertGeoPoint(e){return new tg(jr(e.latitude),jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=yv(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jf(e));default:return null}}convertTimestamp(e){const t=no(e);return new zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qt.fromString(e);bt(RE(n));const i=new oc(n.get(1),n.get(3)),s=new ft(n.popFirst(5));return i.isEqual(t)||fn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class lF extends p2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let io=class extends Yf{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(ig("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},xf=class extends io{data(e={}){return super.data(e)}},fc=class{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new tu(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new xf(this._firestore,this._userDataWriter,n.key,n,new tu(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xe(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new xf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new xf(i._firestore,i._userDataWriter,o.doc.key,o.doc,new tu(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),l=a.indexOf(o.doc.key)),{type:hF(o.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function hF(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}function Vb(r,e){return r instanceof io&&e instanceof io?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof fc&&e instanceof fc&&r._firestore===e._firestore&&Ib(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fF(r){r=or(r,$r);const e=or(r.firestore,gn);return mb(gi(e),r._key).then(t=>g2(e,r,t))}class Fu extends p2{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}function dF(r){r=or(r,$r);const e=or(r.firestore,gn),t=gi(e),n=new Fu(e);return DD(t,r._key).then(i=>new io(e,n,r._key,i,new tu(i!==null&&i.hasLocalMutations,!0),r.converter))}function pF(r){r=or(r,$r);const e=or(r.firestore,gn);return mb(gi(e),r._key,{source:"server"}).then(t=>g2(e,r,t))}function gF(r){r=or(r,ki);const e=or(r.firestore,gn),t=gi(e),n=new Fu(e);return Ob(r._query),vb(t,r._query).then(i=>new fc(e,n,r,i))}function mF(r){r=or(r,ki);const e=or(r.firestore,gn),t=gi(e),n=new Fu(e);return FD(t,r._query).then(i=>new fc(e,n,r,i))}function vF(r){r=or(r,ki);const e=or(r.firestore,gn),t=gi(e),n=new Fu(e);return vb(t,r._query,{source:"server"}).then(i=>new fc(e,n,r,i))}function Tw(r,e,t){r=or(r,$r);const n=or(r.firestore,gn),i=ug(r.converter,e,t);return Id(n,[ng(Lu(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,Wr.none())])}function Ew(r,e,t,...n){r=or(r,$r);const i=or(r.firestore,gn),s=Lu(i);let a;return a=typeof(e=St(e))=="string"||e instanceof hc?c2(s,"updateDoc",r._key,e,t,n):o2(s,"updateDoc",r._key,e),Id(i,[a.toMutation(r._key,Wr.exists(!0))])}function _F(r){return Id(or(r.firestore,gn),[new wh(r._key,Wr.none())])}function yF(r,e){const t=or(r.firestore,gn),n=ip(r),i=ug(r.converter,e);return Id(t,[ng(Lu(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,Wr.exists(!1))]).then(()=>n)}function Ub(r,...e){var t,n,i;r=St(r);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||g1(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(g1(e[a])){const d=e[a];e[a]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(r instanceof $r)u=or(r.firestore,gn),l=_h(r._key.path),c={next:d=>{e[a]&&e[a](g2(u,r,d))},error:e[a+1],complete:e[a+2]};else{const d=or(r,ki);u=or(d.firestore,gn),l=d._query;const g=new Fu(u);c={next:p=>{e[a]&&e[a](new fc(u,g,d,p))},error:e[a+1],complete:e[a+2]},Ob(r._query)}return function(g,p,w,_){const T=new Qp(_),P=new $v(p,T,w);return g.asyncQueue.enqueueAndForget(async()=>Wv(await uh(g),P)),()=>{T.Za(),g.asyncQueue.enqueueAndForget(async()=>zv(await uh(g),P))}}(gi(u),l,o,c)}function wF(r,e){return OD(gi(r=or(r,gn)),g1(e)?e:{next:e})}function Id(r,e){return function(n,i){const s=new ti;return n.asyncQueue.enqueueAndForget(async()=>lD(await e2(n),i,s)),s.promise}(gi(r),e)}function g2(r,e,t){const n=t.docs.get(e._key),i=new Fu(r);return new io(r,i,e._key,n,new tu(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xF={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TF=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lu(e)}set(e,t,n){this._verifyNotCommitted();const i=Xo(e,this._firestore),s=ug(i.converter,t,n),a=ng(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,Wr.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=Xo(e,this._firestore);let a;return a=typeof(t=St(t))=="string"||t instanceof hc?c2(this._dataReader,"WriteBatch.update",s._key,t,n,i):o2(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,Wr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Xo(e,this._firestore);return this._mutations=this._mutations.concat(new wh(t._key,Wr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Xo(r,e){if((r=St(r)).firestore!==e)throw new Xe(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EF=class extends class{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Lu(t)}get(t){const n=Xo(t,this._firestore),i=new lF(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return xt();const a=s[0];if(a.isFoundDocument())return new Yf(this._firestore,i,a.key,a,n.converter);if(a.isNoDocument())return new Yf(this._firestore,i,n._key,null,n.converter);throw xt()})}set(t,n,i){const s=Xo(t,this._firestore),a=ug(s.converter,n,i),o=ng(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(t,n,i,...s){const a=Xo(t,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof hc?c2(this._dataReader,"Transaction.update",a._key,n,i,s):o2(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(t){const n=Xo(t,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Xo(e,this._firestore),n=new Fu(this._firestore);return super.get(e).then(i=>new io(this._firestore,n,t._key,i._document,new tu(!1,!1),t.converter))}};function bF(r,e,t){r=or(r,gn);const n=Object.assign(Object.assign({},xF),t);return function(s){if(s.maxAttempts<1)throw new Xe(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,a,o){const c=new ti;return s.asyncQueue.enqueueAndForget(async()=>{const u=await RD(s);new ND(s.asyncQueue,u,o,a,c).au()}),c.promise}(gi(r),i=>e(new EF(r,i)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AF(){return new bd("deleteField")}function IF(){return new n2("serverTimestamp")}function SF(...r){return new i2("arrayUnion",r)}function PF(...r){return new s2("arrayRemove",r)}function NF(r){return new a2("increment",r)}(function(e,t=!0){(function(i){vh=i})(_c),Ki(new jn("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new gn(new Dk(n.getProvider("auth-internal")),new Bk(n.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xe(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new oc(u.options.projectId,l)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ei(fy,"4.7.3",e),ei(fy,"4.7.3","esm2017")})();const CF="@firebase/firestore-compat",RF="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Xe("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bw(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function Aw(){if(!l6())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let jb=class v1{constructor(e){this._delegate=e}static fromBase64String(e){return Aw(),new v1(ba.fromBase64String(e))}static fromUint8Array(e){return bw(),new v1(ba.fromUint8Array(e))}toBase64(){return Aw(),this._delegate.toBase64()}toUint8Array(){return bw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(r){return kF(r,["next","error","complete"])}function kF(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{enableIndexedDbPersistence(e,t){return WD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return zD(e._delegate)}clearIndexedDbPersistence(e){return HD(e._delegate)}}class qb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof oc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ta("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){VD(this._delegate,e,t,n)}enableNetwork(){return GD(this._delegate)}disableNetwork(){return KD(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,yb("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return $D(this._delegate)}onSnapshotsInSync(e){return wF(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new lh(this,bb(this._delegate,e))}catch(t){throw bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Is(this,ip(this._delegate,e))}catch(t){throw bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ei(this,UD(this._delegate,e))}catch(t){throw bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return bF(this._delegate,t=>e(new Wb(this,t)))}batch(){return gi(this._delegate),new zb(new TF(this._delegate,e=>Id(this._delegate,e)))}loadBundle(e){return YD(this._delegate,e)}namedQuery(e){return XD(this._delegate,e).then(t=>t?new Ei(this,t):null)}}class lg extends p2{constructor(e){super(),this.firestore=e}convertBytes(e){return new jb(new ba(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Is.forKey(t,this.firestore,null)}}function DF(r){Ck(r)}class Wb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lg(e)}get(e){const t=ru(e);return this._delegate.get(t).then(n=>new Xf(this._firestore,new io(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const i=ru(e);return n?(m2("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=ru(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=ru(e);return this._delegate.delete(t),this}}class zb{constructor(e){this._delegate=e}set(e,t,n){const i=ru(e);return n?(m2("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=ru(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=ru(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Tu{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new xf(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Jf(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Tu.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(t);return s||(s=new Tu(e,new lg(e),t),i.set(t,s)),s}}Tu.INSTANCES=new WeakMap;class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lg(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Is(t,new $r(t._delegate,n,new ft(e)))}static forKey(e,t,n){return new Is(t,new $r(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new lh(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new lh(this.firestore,bb(this._delegate,e))}catch(t){throw bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=St(e),e instanceof $r?Ab(this._delegate,e):!1}set(e,t){t=m2("DocumentReference.set",t);try{return t?Tw(this._delegate,e,t):Tw(this._delegate,e)}catch(n){throw bi(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?Ew(this._delegate,e):Ew(this._delegate,e,t,...n)}catch(i){throw bi(i,"updateDoc()","DocumentReference.update()")}}delete(){return _F(this._delegate)}onSnapshot(...e){const t=Hb(e),n=$b(e,i=>new Xf(this.firestore,new io(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ub(this._delegate,t,n)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=dF(this._delegate):(e==null?void 0:e.source)==="server"?t=pF(this._delegate):t=fF(this._delegate),t.then(n=>new Xf(this.firestore,new io(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Is(this.firestore,e?this._delegate.withConverter(Tu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function bi(r,e,t){return r.message=r.message.replace(e,t),r}function Hb(r){for(const e of r)if(typeof e=="object"&&!_1(e))return e;return{}}function $b(r,e){var t,n;let i;return _1(r[0])?i=r[0]:_1(r[1])?i=r[1]:typeof r[0]=="function"?i={next:r[0],error:r[1],complete:r[2]}:i={next:r[1],error:r[2],complete:r[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(n=i.complete)===null||n===void 0?void 0:n.bind(i)}}class Xf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Is(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Vb(this._delegate,e._delegate)}}class Jf extends Xf{data(e){const t=this._delegate.data(e);return this._delegate._converter||Rk(t!==void 0),t}}class Ei{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lg(e)}where(e,t,n){try{return new Ei(this.firestore,Ho(this._delegate,rF(e,t,n)))}catch(i){throw bi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ei(this.firestore,Ho(this._delegate,nF(e,t)))}catch(n){throw bi(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ei(this.firestore,Ho(this._delegate,iF(e)))}catch(t){throw bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ei(this.firestore,Ho(this._delegate,sF(e)))}catch(t){throw bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ei(this.firestore,Ho(this._delegate,aF(...e)))}catch(t){throw bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ei(this.firestore,Ho(this._delegate,oF(...e)))}catch(t){throw bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ei(this.firestore,Ho(this._delegate,cF(...e)))}catch(t){throw bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ei(this.firestore,Ho(this._delegate,uF(...e)))}catch(t){throw bi(t,"endAt()","Query.endAt()")}}isEqual(e){return Ib(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=mF(this._delegate):(e==null?void 0:e.source)==="server"?t=vF(this._delegate):t=gF(this._delegate),t.then(n=>new y1(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=Hb(e),n=$b(e,i=>new y1(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ub(this._delegate,t,n)}withConverter(e){return new Ei(this.firestore,e?this._delegate.withConverter(Tu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class FF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Jf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class y1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ei(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Jf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FF(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Jf(this._firestore,n))})}isEqual(e){return Vb(this._delegate,e._delegate)}}class lh extends Ei{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Is(this.firestore,e):null}doc(e){try{return e===void 0?new Is(this.firestore,ip(this._delegate)):new Is(this.firestore,ip(this._delegate,e))}catch(t){throw bi(t,"doc()","CollectionReference.doc()")}}add(e){return yF(this._delegate,e).then(t=>new Is(this.firestore,t))}isEqual(e){return Ab(this._delegate,e._delegate)}withConverter(e){return new lh(this.firestore,e?this._delegate.withConverter(Tu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ru(r){return or(r,$r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(...e){this._delegate=new hc(...e)}static documentId(){return new v2(qr.keyField().canonicalString())}isEqual(e){return e=St(e),e instanceof hc?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._delegate=e}static serverTimestamp(){const e=IF();return e._methodName="FieldValue.serverTimestamp",new Jc(e)}static delete(){const e=AF();return e._methodName="FieldValue.delete",new Jc(e)}static arrayUnion(...e){const t=SF(...e);return t._methodName="FieldValue.arrayUnion",new Jc(t)}static arrayRemove(...e){const t=PF(...e);return t._methodName="FieldValue.arrayRemove",new Jc(t)}static increment(e){const t=NF(e);return t._methodName="FieldValue.increment",new Jc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF={Firestore:qb,GeoPoint:tg,Timestamp:zr,Blob:jb,Transaction:Wb,WriteBatch:zb,DocumentReference:Is,DocumentSnapshot:Xf,Query:Ei,QueryDocumentSnapshot:Jf,QuerySnapshot:y1,CollectionReference:lh,FieldPath:v2,FieldValue:Jc,setLogLevel:DF,CACHE_SIZE_UNLIMITED:qD};function MF(r,e){r.INTERNAL.registerComponent(new jn("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)},"PUBLIC").setServiceProps(Object.assign({},OF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BF(r){MF(r,(e,t)=>new qb(e,t,new LF)),r.registerVersion(CF,RF)}BF(pn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VF="type.googleapis.com/google.protobuf.Int64Value",UF="type.googleapis.com/google.protobuf.UInt64Value";function Gb(r,e){const t={};for(const n in r)r.hasOwnProperty(n)&&(t[n]=e(r[n]));return t}function w1(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>w1(e));if(typeof r=="function"||typeof r=="object")return Gb(r,e=>w1(e));throw new Error("Data cannot be encoded in JSON: "+r)}function ap(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case VF:case UF:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>ap(e)):typeof r=="function"||typeof r=="object"?Gb(r,e=>ap(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bl extends Pn{constructor(e,t,n){super(`${Kb}/${e}`,t||""),this.details=n}}function jF(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function qF(r,e){let t=jF(r),n=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!Iw[a])return new Bl("internal","internal");t=Iw[a],n=a}const o=s.message;typeof o=="string"&&(n=o),i=s.details,i!==void 0&&(i=ap(i))}}catch{}return t==="ok"?null:new Bl(t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw="us-central1";function zF(r){let e=null;return{promise:new Promise((t,n)=>{e=setTimeout(()=>{n(new Bl("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}let HF=class{constructor(e,t,n,i,s=Sw,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new WF(t,n,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=Sw}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function $F(r,e,t){r.emulatorOrigin=`http://${e}:${t}`}function GF(r,e,t){return n=>XF(r,e,n,t||{})}function KF(r,e,t){return n=>Yb(r,e,n,t||{})}async function YF(r,e,t,n){t["Content-Type"]="application/json";let i;try{i=await n(r,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function XF(r,e,t,n){const i=r._url(e);return Yb(r,i,t,n)}async function Yb(r,e,t,n){t=w1(t);const i={data:t},s={},a=await r.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,c=zF(o),u=await Promise.race([YF(e,i,s,r.fetchImpl),c.promise,r.cancelAllRequests]);if(c.cancel(),!u)throw new Bl("cancelled","Firebase Functions instance was deleted.");const l=qF(u.status,u.json);if(l)throw l;if(!u.json)throw new Bl("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d>"u"&&(d=u.json.result),typeof d>"u")throw new Bl("internal","Response is missing data field.");return{data:ap(d)}}const Pw="@firebase/functions",Nw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JF="auth-internal",QF="app-check-internal",ZF="messaging-internal";function eO(r,e){const t=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(JF),o=n.getProvider(ZF),c=n.getProvider(QF);return new HF(s,a,o,c,i,r)};Ki(new jn(Kb,t,"PUBLIC").setMultipleInstances(!0)),ei(Pw,Nw,e),ei(Pw,Nw,"esm2017")}function Cw(r,e,t){$F(St(r),e,t)}function tO(r,e,t){return GF(St(r),e,t)}function rO(r,e,t){return KF(St(r),e,t)}eO(fetch.bind(self));const nO="@firebase/functions-compat",iO="0.3.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return tO(this._delegate,e,t)}httpsCallableFromURL(e,t){return rO(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Pn("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Pn("functions","Port missing in origin provided to useFunctionsEmulator()");return Cw(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return Cw(this._delegate,e,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO="us-central1",aO=(r,{instanceIdentifier:e})=>{const t=r.getProvider("app-compat").getImmediate(),n=r.getProvider("functions").getImmediate({identifier:e??sO});return new Xb(t,n)};function oO(){const r={Functions:Xb};pn.INTERNAL.registerComponent(new jn("functions-compat",aO,"PUBLIC").setServiceProps(r).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */oO();pn.registerVersion(nO,iO);const Jb="@firebase/installations",_2="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb=1e4,Zb=`w:${_2}`,eA="FIS_v2",cO="https://firebaseinstallations.googleapis.com/v1",uO=60*60*1e3,lO="installations",hO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Eu=new Ia(lO,hO,fO);function tA(r){return r instanceof Pn&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rA({projectId:r}){return`${cO}/projects/${r}/installations`}function nA(r){return{token:r.token,requestStatus:2,expiresIn:pO(r.expiresIn),creationTime:Date.now()}}async function iA(r,e){const n=(await e.json()).error;return Eu.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function sA({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function dO(r,{refreshToken:e}){const t=sA(r);return t.append("Authorization",gO(e)),t}async function aA(r){const e=await r();return e.status>=500&&e.status<600?r():e}function pO(r){return Number(r.replace("s","000"))}function gO(r){return`${eA} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=rA(r),i=sA(r),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={fid:t,authVersion:eA,appId:r.appId,sdkVersion:Zb},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await aA(()=>fetch(n,o));if(c.ok){const u=await c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:nA(u.authToken)}}else throw await iA("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O=/^[cdef][\w-]{21}$/,x1="";function yO(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=wO(r);return _O.test(t)?t:x1}catch{return x1}}function wO(r){return vO(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=new Map;function uA(r,e){const t=hg(r);lA(t,e),xO(t,e)}function lA(r,e){const t=cA.get(r);if(t)for(const n of t)n(e)}function xO(r,e){const t=TO();t&&t.postMessage({key:r,fid:e}),EO()}let nu=null;function TO(){return!nu&&"BroadcastChannel"in self&&(nu=new BroadcastChannel("[Firebase] FID Change"),nu.onmessage=r=>{lA(r.data.key,r.data.fid)}),nu}function EO(){cA.size===0&&nu&&(nu.close(),nu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bO="firebase-installations-database",AO=1,bu="firebase-installations-store";let cm=null;function y2(){return cm||(cm=dh(bO,AO,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(bu)}}})),cm}async function op(r,e){const t=hg(r),i=(await y2()).transaction(bu,"readwrite"),s=i.objectStore(bu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&uA(r,e.fid),e}async function hA(r){const e=hg(r),n=(await y2()).transaction(bu,"readwrite");await n.objectStore(bu).delete(e),await n.done}async function fg(r,e){const t=hg(r),i=(await y2()).transaction(bu,"readwrite"),s=i.objectStore(bu),a=await s.get(t),o=e(a);return o===void 0?await s.delete(t):await s.put(o,t),await i.done,o&&(!a||a.fid!==o.fid)&&uA(r,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w2(r){let e;const t=await fg(r.appConfig,n=>{const i=IO(n),s=SO(r,i);return e=s.registrationPromise,s.installationEntry});return t.fid===x1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function IO(r){const e=r||{fid:yO(),registrationStatus:0};return fA(e)}function SO(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(Eu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=PO(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:NO(r)}:{installationEntry:e}}async function PO(r,e){try{const t=await mO(r,e);return op(r.appConfig,t)}catch(t){throw tA(t)&&t.customData.serverCode===409?await hA(r.appConfig):await op(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function NO(r){let e=await Rw(r.appConfig);for(;e.registrationStatus===1;)await oA(100),e=await Rw(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await w2(r);return n||t}return e}function Rw(r){return fg(r,e=>{if(!e)throw Eu.create("installation-not-found");return fA(e)})}function fA(r){return CO(r)?{fid:r.fid,registrationStatus:0}:r}function CO(r){return r.registrationStatus===1&&r.registrationTime+Qb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO({appConfig:r,heartbeatServiceProvider:e},t){const n=kO(r,t),i=dO(r,t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={installation:{sdkVersion:Zb,appId:r.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await aA(()=>fetch(n,o));if(c.ok){const u=await c.json();return nA(u)}else throw await iA("Generate Auth Token",c)}function kO(r,{fid:e}){return`${rA(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(r,e=!1){let t;const n=await fg(r.appConfig,s=>{if(!dA(s))throw Eu.create("not-registered");const a=s.authToken;if(!e&&FO(a))return s;if(a.requestStatus===1)return t=LO(r,e),s;{if(!navigator.onLine)throw Eu.create("app-offline");const o=MO(s);return t=DO(r,o),o}});return t?await t:n.authToken}async function LO(r,e){let t=await kw(r.appConfig);for(;t.authToken.requestStatus===1;)await oA(100),t=await kw(r.appConfig);const n=t.authToken;return n.requestStatus===0?x2(r,e):n}function kw(r){return fg(r,e=>{if(!dA(e))throw Eu.create("not-registered");const t=e.authToken;return BO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function DO(r,e){try{const t=await RO(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await op(r.appConfig,n),t}catch(t){if(tA(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await hA(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await op(r.appConfig,n)}throw t}}function dA(r){return r!==void 0&&r.registrationStatus===2}function FO(r){return r.requestStatus===2&&!OO(r)}function OO(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+uO}function MO(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function BO(r){return r.requestStatus===1&&r.requestTime+Qb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VO(r){const e=r,{installationEntry:t,registrationPromise:n}=await w2(e);return n?n.catch(console.error):x2(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(r,e=!1){const t=r;return await jO(t),(await x2(t,e)).token}async function jO(r){const{registrationPromise:e}=await w2(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(r){if(!r||!r.options)throw um("App Configuration");if(!r.name)throw um("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw um(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function um(r){return Eu.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="installations",WO="installations-internal",zO=r=>{const e=r.getProvider("app").getImmediate(),t=qO(e),n=Cp(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},HO=r=>{const e=r.getProvider("app").getImmediate(),t=Cp(e,pA).getImmediate();return{getId:()=>VO(t),getToken:i=>UO(t,i)}};function $O(){Ki(new jn(pA,zO,"PUBLIC")),Ki(new jn(WO,HO,"PRIVATE"))}$O();ei(Jb,_2);ei(Jb,_2,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="/firebase-messaging-sw.js",KO="/firebase-cloud-messaging-push-scope",gA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",YO="https://fcmregistrations.googleapis.com/v1",mA="google.c.a.c_id",XO="google.c.a.c_l",JO="google.c.a.ts",QO="google.c.a.e";var Lw;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Lw||(Lw={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Qf;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(Qf||(Qf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function ZO(r){const e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lm="fcm_token_details_db",e8=5,Dw="fcm_token_object_Store";async function t8(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(lm))return null;let e=null;return(await dh(lm,e8,{upgrade:async(n,i,s,a)=>{var o;if(i<2||!n.objectStoreNames.contains(Dw))return;const c=a.objectStore(Dw),u=await c.index("fcmSenderId").get(r);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Wa(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}}}})).close(),await Rl(lm),await Rl("fcm_vapid_details_db"),await Rl("undefined"),r8(e)?e:null}function r8(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n8="firebase-messaging-database",i8=1,Au="firebase-messaging-store";let hm=null;function T2(){return hm||(hm=dh(n8,i8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Au)}}})),hm}async function vA(r){const e=b2(r),n=await(await T2()).transaction(Au).objectStore(Au).get(e);if(n)return n;{const i=await t8(r.appConfig.senderId);if(i)return await E2(r,i),i}}async function E2(r,e){const t=b2(r),i=(await T2()).transaction(Au,"readwrite");return await i.objectStore(Au).put(e,t),await i.done,e}async function s8(r){const e=b2(r),n=(await T2()).transaction(Au,"readwrite");await n.objectStore(Au).delete(e),await n.done}function b2({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ni=new Ia("messaging","Messaging",a8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o8(r,e){const t=await I2(r),n=yA(e),i={method:"POST",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(A2(r.appConfig),i)).json()}catch(a){throw Ni.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw Ni.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw Ni.create("token-subscribe-no-token");return s.token}async function c8(r,e){const t=await I2(r),n=yA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(`${A2(r.appConfig)}/${e.token}`,i)).json()}catch(a){throw Ni.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw Ni.create("token-update-failed",{errorInfo:a})}if(!s.token)throw Ni.create("token-update-no-token");return s.token}async function _A(r,e){const n={method:"DELETE",headers:await I2(r)};try{const s=await(await fetch(`${A2(r.appConfig)}/${e}`,n)).json();if(s.error){const a=s.error.message;throw Ni.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw Ni.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function A2({projectId:r}){return`${YO}/projects/${r}/registrations`}async function I2({appConfig:r,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function yA({p256dh:r,auth:e,endpoint:t,vapidKey:n}){const i={web:{endpoint:t,auth:e,p256dh:r}};return n!==gA&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u8=7*24*60*60*1e3;async function l8(r){const e=await d8(r.swRegistration,r.vapidKey),t={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:Wa(e.getKey("auth")),p256dh:Wa(e.getKey("p256dh"))},n=await vA(r.firebaseDependencies);if(n){if(p8(n.subscriptionOptions,t))return Date.now()>=n.createTime+u8?f8(r,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{await _A(r.firebaseDependencies,n.token)}catch(i){console.warn(i)}return Fw(r.firebaseDependencies,t)}else return Fw(r.firebaseDependencies,t)}async function h8(r){const e=await vA(r.firebaseDependencies);e&&(await _A(r.firebaseDependencies,e.token),await s8(r.firebaseDependencies));const t=await r.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function f8(r,e){try{const t=await c8(r.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await E2(r.firebaseDependencies,n),t}catch(t){throw t}}async function Fw(r,e){const n={token:await o8(r,e),createTime:Date.now(),subscriptionOptions:e};return await E2(r,n),n.token}async function d8(r,e){const t=await r.pushManager.getSubscription();return t||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:ZO(e)})}function p8(r,e){const t=e.vapidKey===r.vapidKey,n=e.endpoint===r.endpoint,i=e.auth===r.auth,s=e.p256dh===r.p256dh;return t&&n&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return g8(e,r),m8(e,r),v8(e,r),e}function g8(r,e){if(!e.notification)return;r.notification={};const t=e.notification.title;t&&(r.notification.title=t);const n=e.notification.body;n&&(r.notification.body=n);const i=e.notification.image;i&&(r.notification.image=i);const s=e.notification.icon;s&&(r.notification.icon=s)}function m8(r,e){e.data&&(r.data=e.data)}function v8(r,e){var t,n,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;r.fcmOptions={};const o=(i=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(r.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(r.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(r){return typeof r=="object"&&!!r&&mA in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y8(r){if(!r||!r.options)throw fm("App Configuration Object");if(!r.name)throw fm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=r;for(const n of e)if(!t[n])throw fm(n);return{appName:r.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function fm(r){return Ni.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let w8=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=y8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wA(r){try{r.swRegistration=await navigator.serviceWorker.register(GO,{scope:KO}),r.swRegistration.update().catch(()=>{})}catch(e){throw Ni.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x8(r,e){if(!e&&!r.swRegistration&&await wA(r),!(!e&&r.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ni.create("invalid-sw-registration");r.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T8(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=gA)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xA(r,e){if(!navigator)throw Ni.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ni.create("permission-blocked");return await T8(r,e==null?void 0:e.vapidKey),await x8(r,e==null?void 0:e.serviceWorkerRegistration),l8(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8(r,e,t){const n=b8(e);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[mA],message_name:t[XO],message_time:t[JO],message_device_time:Math.floor(Date.now()/1e3)})}function b8(r){switch(r){case Qf.NOTIFICATION_CLICKED:return"notification_open";case Qf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A8(r,e){const t=e.data;if(!t.isFirebaseMessaging)return;r.onMessageHandler&&t.messageType===Qf.PUSH_RECEIVED&&(typeof r.onMessageHandler=="function"?r.onMessageHandler(Ow(t)):r.onMessageHandler.next(Ow(t)));const n=t.data;_8(n)&&n[QO]==="1"&&await E8(r,t.messageType,n)}const Mw="@firebase/messaging",Bw="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I8=r=>{const e=new w8(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>A8(e,t)),e},S8=r=>{const e=r.getProvider("messaging").getImmediate();return{getToken:n=>xA(e,n)}};function P8(){Ki(new jn("messaging",I8,"PUBLIC")),Ki(new jn("messaging-internal",S8,"PRIVATE")),ei(Mw,Bw),ei(Mw,Bw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N8(r){if(!navigator)throw Ni.create("only-available-in-window");return r.swRegistration||await wA(r),h8(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C8(r,e){if(!navigator)throw Ni.create("only-available-in-window");return r.onMessageHandler=e,()=>{r.onMessageHandler=null}}async function R8(r,e){return r=St(r),xA(r,e)}function k8(r){return r=St(r),N8(r)}function L8(r,e){return r=St(r),C8(r,e)}P8();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",D8="https://fcmregistrations.googleapis.com/v1",EA="FCM_MSG",F8="google.c.a.c_id",O8=3,M8=1;var cp;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(cp||(cp={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var up;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(up||(up={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function B8(r){const e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dm="fcm_token_details_db",V8=5,Vw="fcm_token_object_Store";async function U8(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(dm))return null;let e=null;return(await dh(dm,V8,{upgrade:async(n,i,s,a)=>{var o;if(i<2||!n.objectStoreNames.contains(Vw))return;const c=a.objectStore(Vw),u=await c.index("fcmSenderId").get(r);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:za(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:za(l.auth),p256dh:za(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:za(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:za(l.auth),p256dh:za(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:za(l.vapidKey)}}}}}})).close(),await Rl(dm),await Rl("fcm_vapid_details_db"),await Rl("undefined"),j8(e)?e:null}function j8(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q8="firebase-messaging-database",W8=1,Iu="firebase-messaging-store";let pm=null;function S2(){return pm||(pm=dh(q8,W8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Iu)}}})),pm}async function P2(r){const e=C2(r),n=await(await S2()).transaction(Iu).objectStore(Iu).get(e);if(n)return n;{const i=await U8(r.appConfig.senderId);if(i)return await N2(r,i),i}}async function N2(r,e){const t=C2(r),i=(await S2()).transaction(Iu,"readwrite");return await i.objectStore(Iu).put(e,t),await i.done,e}async function z8(r){const e=C2(r),n=(await S2()).transaction(Iu,"readwrite");await n.objectStore(Iu).delete(e),await n.done}function C2({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ya=new Ia("messaging","Messaging",H8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $8(r,e){const t=await k2(r),n=AA(e),i={method:"POST",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(R2(r.appConfig),i)).json()}catch(a){throw ya.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ya.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw ya.create("token-subscribe-no-token");return s.token}async function G8(r,e){const t=await k2(r),n=AA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(`${R2(r.appConfig)}/${e.token}`,i)).json()}catch(a){throw ya.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ya.create("token-update-failed",{errorInfo:a})}if(!s.token)throw ya.create("token-update-no-token");return s.token}async function bA(r,e){const n={method:"DELETE",headers:await k2(r)};try{const s=await(await fetch(`${R2(r.appConfig)}/${e}`,n)).json();if(s.error){const a=s.error.message;throw ya.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw ya.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function R2({projectId:r}){return`${D8}/projects/${r}/registrations`}async function k2({appConfig:r,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function AA({p256dh:r,auth:e,endpoint:t,vapidKey:n}){const i={web:{endpoint:t,auth:e,p256dh:r}};return n!==TA&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K8=7*24*60*60*1e3;async function Y8(r){const e=await J8(r.swRegistration,r.vapidKey),t={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:za(e.getKey("auth")),p256dh:za(e.getKey("p256dh"))},n=await P2(r.firebaseDependencies);if(n){if(Q8(n.subscriptionOptions,t))return Date.now()>=n.createTime+K8?X8(r,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{await bA(r.firebaseDependencies,n.token)}catch(i){console.warn(i)}return jw(r.firebaseDependencies,t)}else return jw(r.firebaseDependencies,t)}async function Uw(r){const e=await P2(r.firebaseDependencies);e&&(await bA(r.firebaseDependencies,e.token),await z8(r.firebaseDependencies));const t=await r.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function X8(r,e){try{const t=await G8(r.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await N2(r.firebaseDependencies,n),t}catch(t){throw t}}async function jw(r,e){const n={token:await $8(r,e),createTime:Date.now(),subscriptionOptions:e};return await N2(r,n),n.token}async function J8(r,e){const t=await r.pushManager.getSubscription();return t||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:B8(e)})}function Q8(r,e){const t=e.vapidKey===r.vapidKey,n=e.endpoint===r.endpoint,i=e.auth===r.auth,s=e.p256dh===r.p256dh;return t&&n&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return e7(e,r),t7(e,r),r7(e,r),e}function e7(r,e){if(!e.notification)return;r.notification={};const t=e.notification.title;t&&(r.notification.title=t);const n=e.notification.body;n&&(r.notification.body=n);const i=e.notification.image;i&&(r.notification.image=i);const s=e.notification.icon;s&&(r.notification.icon=s)}function t7(r,e){e.data&&(r.data=e.data)}function r7(r,e){var t,n,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;r.fcmOptions={};const o=(i=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(r.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(r.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n7(r){return typeof r=="object"&&!!r&&F8 in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i7(r){return new Promise(e=>{setTimeout(e,r)})}async function s7(r,e){const t=a7(e,await r.firebaseDependencies.installations.getId());o7(r,t,e.productId)}function a7(r,e){var t,n;const i={};return r.from&&(i.project_number=r.from),r.fcmMessageId&&(i.message_id=r.fcmMessageId),i.instance_id=e,r.notification?i.message_type=cp.DISPLAY_NOTIFICATION.toString():i.message_type=cp.DATA_MESSAGE.toString(),i.sdk_platform=O8.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),r.collapse_key&&(i.collapse_key=r.collapse_key),i.event=M8.toString(),!((t=r.fcmOptions)===null||t===void 0)&&t.analytics_label&&(i.analytics_label=(n=r.fcmOptions)===null||n===void 0?void 0:n.analytics_label),i}function o7(r,e,t){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),t&&(n.compliance_data=c7(t)),r.logEvents.push(n)}function c7(r){return{privacy_context:{prequest:{origin_associated_product_id:r}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(r,e){var t,n;const{newSubscription:i}=r;if(!i){await Uw(e);return}const s=await P2(e.firebaseDependencies);await Uw(e),e.vapidKey=(n=(t=s==null?void 0:s.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:TA,await Y8(e)}async function l7(r,e){const t=d7(r);if(!t)return;e.deliveryMetricsExportedToBigQueryEnabled&&await s7(e,t);const n=await IA();if(g7(n))return m7(n,t);if(t.notification&&await v7(f7(t)),!!e&&e.onBackgroundMessageHandler){const i=Z8(t);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function h7(r){var e,t;const n=(t=(e=r.notification)===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t[EA];if(n){if(r.action)return}else return;r.stopImmediatePropagation(),r.notification.close();const i=_7(n);if(!i)return;const s=new URL(i,self.location.href),a=new URL(self.location.origin);if(s.host!==a.host)return;let o=await p7(s);if(o?o=await o.focus():(o=await self.clients.openWindow(i),await i7(3e3)),!!o)return n.messageType=up.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,o.postMessage(n)}function f7(r){const e=Object.assign({},r.notification);return e.data={[EA]:r},e}function d7({data:r}){if(!r)return null;try{return r.json()}catch{return null}}async function p7(r){const e=await IA();for(const t of e){const n=new URL(t.url,self.location.href);if(r.host===n.host)return t}return null}function g7(r){return r.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function m7(r,e){e.isFirebaseMessaging=!0,e.messageType=up.PUSH_RECEIVED;for(const t of r)t.postMessage(e)}function IA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function v7(r){var e;const{actions:t}=r,{maxActions:n}=Notification;return t&&n&&t.length>n&&console.warn(`This browser only supports ${n} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=r.title)!==null&&e!==void 0?e:"",r)}function _7(r){var e,t,n;const i=(t=(e=r.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&t!==void 0?t:(n=r.notification)===null||n===void 0?void 0:n.click_action;return i||(n7(r.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y7(r){if(!r||!r.options)throw gm("App Configuration Object");if(!r.name)throw gm("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=r;for(const n of e)if(!t[n])throw gm(n);return{appName:r.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function gm(r){return ya.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=y7(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7=r=>{const e=new w7(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return self.addEventListener("push",t=>{t.waitUntil(l7(t,e))}),self.addEventListener("pushsubscriptionchange",t=>{t.waitUntil(u7(t,e))}),self.addEventListener("notificationclick",t=>{t.waitUntil(h7(t))}),e};function T7(){Ki(new jn("messaging-sw",x7,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E7(r,e){if(self.document!==void 0)throw ya.create("only-available-in-sw");return r.onBackgroundMessageHandler=e,()=>{r.onBackgroundMessageHandler=null}}function b7(r,e){return r=St(r),E7(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */T7();const A7="@firebase/messaging-compat",I7="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(){return self&&"ServiceWorkerGlobalScope"in self?N7():P7()}function P7(){return typeof window<"u"&&lu()&&e3()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function N7(){return lu()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class qw{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return R8(this._delegate,e)}async deleteToken(){return k8(this._delegate)}onMessage(e){return L8(this._delegate,e)}onBackgroundMessage(e){return b7(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C7=r=>self&&"ServiceWorkerGlobalScope"in self?new qw(r.getProvider("app-compat").getImmediate(),r.getProvider("messaging-sw").getImmediate()):new qw(r.getProvider("app-compat").getImmediate(),r.getProvider("messaging").getImmediate()),R7={isSupported:S7};function k7(){pn.INTERNAL.registerComponent(new jn("messaging-compat",C7,"PUBLIC").setServiceProps(R7))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */k7();pn.registerVersion(A7,I7);const L7={apiKey:"AIzaSyDJcK71mE0pjol-2loS9q9XhXFwxnJMu6U",authDomain:"appazeit.firebaseapp.com",projectId:"appazeit",storageBucket:"appazeit.firebasestorage.app",messagingSenderId:"977328058000",appId:"1:977328058000:web:360b79579689552423b215"};pn.apps.length||pn.initializeApp(L7);const Ah=pn.auth(),Ci=pn.firestore();pn.functions();typeof window<"u"&&"Notification"in window&&pn.messaging.isSupported()&&pn.messaging();const Ve={currentUser:null,entries:[],projects:{},tasks:[],timerInterval:null,timerStart:null,timerSeconds:0,isRunning:!1,isHomeoffice:!0,entriesPageSize:50,entriesCurrentPage:1,sortOrderDescending:!0,dashboardPeriod:"week",unsubscribeEntries:null,unsubscribeProjects:null,unsubscribeTasks:null,tasksDashboardShown:!1};function D7(){window.addManualEntry=F7,window.editEntry=O7,window.saveEdit=M7,window.deleteEntry=B7,window.closeEditModal=PA,window.changeEntriesPage=V7,window.changeEntriesPageSize=U7,window.filterChanged=!0,window.filterEntries=Sd,window.toggleSortOrder=j7}function F7(){const r=document.getElementById("manualDate").value,e=document.getElementById("manualStart").value,t=document.getElementById("manualEnd").value,n=document.getElementById("currentProject").value,i=document.getElementById("currentActivity").value;if(!r||!e||!t){alert("Bitte Datum, Start und Ende eingeben!");return}if(SA(r,e,t))return;const s={datum:r,start:e,ende:t,projekt:n,taetigkeit:i,homeoffice:document.getElementById("manualLocation").value==="true",stunden:NA(e,t),pause:0,createdAt:pn.firestore.FieldValue.serverTimestamp()};VA(s),Ys(" Eintrag hinzugefgt!"),document.getElementById("manualStart").value="",document.getElementById("manualEnd").value=""}function SA(r,e,t,n=null){if(!Ve.entries)return!1;const[i,s]=e.split(":").map(Number),[a,o]=t.split(":").map(Number),c=i*60+s,u=a*60+o,l=Ve.entries.find(d=>{if(d.id===n||d.datum!==r)return!1;const[g,p]=(d.start||"00:00").split(":").map(Number),[w,_]=(d.ende||"00:00").split(":").map(Number),T=g*60+p,P=w*60+_;return c<P&&u>T});return l?!confirm(` Achtung: Dieser Eintrag berschneidet sich mit:
"${l.projekt}" (${l.start} - ${l.ende})

Trotzdem speichern?`):!1}function Sd(){const r=document.getElementById("filterDate").value,e=document.getElementById("filterProject").value;window.filterChanged&&(Ve.entriesCurrentPage=1,window.filterChanged=!1);let t=[...Ve.entries];r&&(t=t.filter(o=>o.datum===r)),e&&(t=t.filter(o=>o.projekt===e)),t.sort((o,c)=>Ve.sortOrderDescending?o.datum!==c.datum?c.datum.localeCompare(o.datum):(c.start||"").localeCompare(o.start||""):o.datum!==c.datum?o.datum.localeCompare(c.datum):(o.start||"").localeCompare(c.start||""));const n=document.getElementById("entriesList");if(!n)return;const i=Ve.entriesPageSize,s=Ve.entriesCurrentPage,a=t.slice((s-1)*i,s*i);Math.ceil(t.length/i),t.length===0?n.innerHTML='<div class="p-8 text-br-300 text-center">Keine Eintrge gefunden</div>':n.innerHTML=a.map(o=>{var c;return`
             <div class="bg-br-800 rounded-lg p-3 border border-br-600 flex items-center gap-3">
                <div class="w-1 h-12 rounded" style="background: ${((c=Ve.projects[o.projekt])==null?void 0:c.color)||"#6B7280"}"></div>
                <div class="flex-1">
                    <div class="text-sm font-medium">${ou(o.datum)}</div>
                    <div class="text-xs text-br-200">${o.start} - ${o.ende}  ${o.projekt||"Allgemein"}</div>
                    ${o.taetigkeit?`<div class="text-xs text-br-300">${o.taetigkeit}</div>`:""}
                </div>
                <div class="text-right">
                    <div class="font-mono">${(o.stunden||0).toFixed(2)}h</div>
                    <div class="text-xs">${o.homeoffice?"":""}</div>
                </div>
                <button onclick="editEntry('${o.id}')" class="p-2 hover:bg-br-600 rounded"></button>
                <button onclick="deleteEntry('${o.id}')" class="p-2 hover:bg-red-900 rounded"></button>
            </div>
        `}).join(""),document.getElementById("entriesStats").textContent=`${t.length} Eintrge`}function O7(r){const e=Ve.entries.find(n=>n.id===r);if(!e)return;Ve.editingEntryId=r,document.getElementById("editDate").value=e.datum,document.getElementById("editStart").value=e.start,document.getElementById("editEnd").value=e.ende,document.getElementById("editLocation").value=e.homeoffice?"true":"false";const t=document.getElementById("editModal");t.classList.remove("hidden"),t.classList.add("flex")}function M7(){if(!Ve.editingEntryId)return;const r={datum:document.getElementById("editDate").value,start:document.getElementById("editStart").value,ende:document.getElementById("editEnd").value,stunden:NA(document.getElementById("editStart").value,document.getElementById("editEnd").value),homeoffice:document.getElementById("editLocation").value==="true"};SA(r.datum,r.start,r.ende,Ve.editingEntryId)||(_M(Ve.editingEntryId,r),PA(),Ys(" Gespeichert"))}function PA(){const r=document.getElementById("editModal");r.classList.add("hidden"),r.classList.remove("flex"),Ve.editingEntryId=null}function B7(r){confirm("Lschen?")&&yM(r)}function V7(r){Ve.entriesCurrentPage=r,Sd()}function U7(r){Ve.entriesPageSize=parseInt(r),Ve.entriesCurrentPage=1,Sd()}function j7(){Ve.sortOrderDescending=!Ve.sortOrderDescending,Sd()}function NA(r,e){if(!r||!e)return 0;const[t,n]=r.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+n,o=i*60+s;return Math.round((o-a)/60*100)/100}function q7(){window.addProject=z7,window.editProject=H7,window.deleteProject=$7,window.renderProjects=CA}function W7(){const r=Ve.projects,e=document.getElementById("currentProject"),t=document.getElementById("filterProject"),n=document.getElementById("editProject");if(!e)return;const i=Object.keys(r).sort().map(s=>`<option value="${s}">${s}</option>`).join("");e.innerHTML='<option value="">-- Kein Projekt --</option>'+i,t.innerHTML='<option value="">Alle Projekte</option>'+i,n&&(n.innerHTML='<option value="">-- Kein Projekt --</option>'+i)}function CA(){const r=document.getElementById("projectsList");if(!r)return;const e=Object.keys(Ve.projects).sort();r.innerHTML=e.map(t=>`
        <div class="bg-br-800 rounded-lg p-4 border border-br-600 flex items-center gap-3">
            <div class="w-4 h-4 rounded" style="background: ${Ve.projects[t].color}"></div>
            <div class="flex-1">
                <div class="font-medium">${t}</div>
            </div>
            <button onclick="editProject('${t}')" class="p-2 hover:bg-br-600 rounded"></button>
            <button onclick="deleteProject('${t}')" class="p-2 hover:bg-red-900 rounded"></button>
        </div>
    `).join("")}async function z7(){const r=document.getElementById("newProjectName").value.trim(),e=document.getElementById("newProjectColor").value;r&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(r).set({name:r,color:e,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),document.getElementById("newProjectName").value="",Ys(" Projekt erstellt"))}async function H7(r){const e=Ve.projects[r];if(!e)return;const t=prompt("Neuer Projektname:",r);t&&t!==r&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(t).set({name:t,color:e.color,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(r).delete(),Ys(" Projekt umbenannt"))}async function $7(r){confirm(`Projekt "${r}" wirklich lschen?`)&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(r).delete(),Ys(" Projekt gelscht"))}function G7(){window.updateDashboard=L2,window.setDashboardPeriod=K7,Ve.dashboardPeriod="week"}function K7(r){Ve.dashboardPeriod=r;const e=document.getElementById("dashboardDateRange");e&&(r==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")),L2()}function L2(){const r=Ve.dashboardPeriod||"week",e=Ve.entries;if(!e)return;const{start:t,end:n}=Y7(r),i=e.filter(L=>L.datum>=t&&L.datum<=n);let s=0,a=0,o=0;const c=new Set,u={};i.forEach(L=>{const F=parseFloat(L.stunden||0);s+=F,c.add(L.datum),L.homeoffice?a+=F:o+=F;const K=L.projekt||"unknown";u[K]||(u[K]=0),u[K]+=F});const l=c.size,d=l>0?s/l:0;pl("statTotalHours",s.toFixed(1)),pl("statAvgPerDay",d.toFixed(1)),pl("statWorkDays",l),pl("statEntries",i.length);const g=a+o,p=g>0?a/g*100:0,w=g>0?o/g*100:0;pl("statHomeoffice",`${Math.round(p)}%`),pl("statOffice",`${Math.round(w)}%`);const _=document.getElementById("hoBar"),T=document.getElementById("officeBar");_&&(_.style.width=`${p}%`),T&&(T.style.width=`${w}%`);const P=document.getElementById("projectStats");if(P){const L=Object.entries(u).sort((F,K)=>K[1]-F[1]);P.innerHTML=L.map(([F,K])=>{const se=Ve.projects[F]||{name:"Ohne Projekt",color:"#6B7280"},ce=F==="unknown"?"Ohne Projekt":se.name,R=s>0?K/s*100:0;return`
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-br-200">${ce}</span>
                        <span class="font-mono">${K.toFixed(1)}h (${Math.round(R)}%)</span>
                    </div>
                    <div class="w-full h-2 bg-br-700 rounded-full overflow-hidden">
                        <div class="h-full rounded-full" style="width: ${R}%; background-color: ${se.color}"></div>
                    </div>
                </div>
            `}).join("")}}function Y7(r){var n,i;const e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0];if(r==="custom"){const s=(n=document.getElementById("dashFrom"))==null?void 0:n.value,a=(i=document.getElementById("dashTo"))==null?void 0:i.value;return{start:s||"0000-00-00",end:a||"9999-99-99"}}if(r==="all")return{start:"0000-00-00",end:"9999-99-99"};if(r==="today")return{start:t,end:t};if(r==="week"){const s=new Date(e),a=s.getDay()||7;return s.setDate(s.getDate()-a+1),{start:s.toISOString().split("T")[0],end:t}}if(r==="month"){const s=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],a=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0];return{start:s,end:a}}if(r==="year"){const s=`${e.getFullYear()}-01-01`,a=`${e.getFullYear()}-12-31`;return{start:s,end:a}}return{start:t,end:t}}function pl(r,e){const t=document.getElementById(r);t&&(t.textContent=e)}function X7(){window.addTask=J7,window.toggleTaskStatus=Q7,window.editTask=Z7,window.saveTaskEdit=RA,window.closeEditTaskModal=eM,window.renderTasks=D2}function D2(){const r=document.getElementById("tasksList");r&&(r.innerHTML=Ve.tasks.map(e=>`
        <div class="bg-br-800 p-3 rounded border border-br-600 flex items-start gap-3">
             <input type="checkbox" ${e.status==="erledigt"?"checked":""} onclick="toggleTaskStatus('${e.id}')" class="mt-1">
             <div class="flex-1">
                <div class="${e.status==="erledigt"?"line-through text-br-400":""}">${e.aufgabe}</div>
                <div class="text-xs text-br-300">Fllig: ${e.faelligAm||"Nie"}</div>
             </div>
             <button onclick="editTask('${e.id}')"></button>
        </div>
    `).join(""))}async function J7(){const r=document.getElementById("newTaskTitle").value.trim();r&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").add({aufgabe:r,status:"offen",createdAt:pn.firestore.FieldValue.serverTimestamp()}),document.getElementById("newTaskTitle").value="",Ys(" Aufgabe hinzugefgt"))}async function Q7(r){const e=Ve.tasks.find(n=>n.id===r);if(!e)return;const t=e.status==="erledigt"?"offen":"erledigt";e.status=t,D2(),await Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").doc(r).update({status:t})}function Z7(r){const e=Ve.tasks.find(n=>n.id===r);if(!e)return;Ve.editingTaskId=r;const t=prompt("Aufgabe bearbeiten:",e.aufgabe);t&&t!==e.aufgabe&&RA(r,t)}async function RA(r,e){await Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").doc(r).update({aufgabe:e}),Ys(" Aufgabe aktualisiert")}function eM(){Ve.editingTaskId=null}function tM(){window.toggleTimer=rM,window.startTimer=kA,window.stopTimer=dg,window.resetTimer=nM,window.toggleCountdownMode=iM,window.testAlarm=uM,window.activateNotifications=lM}function rM(){Ve.isRunning?dg():kA()}function kA(){const r=document.getElementById("useCountdown").checked;LA(),OA();const e=parseInt(document.getElementById("countdownMinutes").value)||60,t=document.getElementById("currentProject").value;if(r){Ve.timerSeconds=e*60;const n=Date.now()+e*60*1e3;wM(n,t)}else Ve.timerSeconds=0;Ve.timerStart=new Date,Ve.isRunning=!0,pg(!0,r),oM(),Ve.timerInterval=setInterval(()=>{const i=Math.floor((new Date-Ve.timerStart)/1e3);r?(Ve.timerSeconds=Math.max(0,e*60-i),Ve.timerSeconds<=0&&(Ve.timerSeconds=0,dg(),DA())):Ve.timerSeconds=i,F2()},1e3)}function dg(){clearInterval(Ve.timerInterval),Ve.isRunning=!1,pg(!1),Ve.timerStart&&Math.floor((new Date-Ve.timerStart)/1e3)>60&&sM(),UA(),O2()}function nM(){clearInterval(Ve.timerInterval),Ve.isRunning=!1,Ve.timerSeconds=0,Ve.timerStart=null,pg(!1),document.getElementById("timerStatus").textContent="Bereit zum Starten",F2(),UA(),O2()}function pg(r,e=!1){const t=document.getElementById("btnStartStop"),n=document.getElementById("timerDisplay"),i=document.getElementById("timerStatus");r?(t.innerHTML=" Stop",t.classList.replace("bg-green-600","bg-red-600"),t.classList.replace("hover:bg-green-500","hover:bg-red-500"),n.classList.add("timer-active"),i.textContent=e?" Countdown luft... (Cloud-Alarm aktiv )":"Timer luft..."):(t.innerHTML=" Start",t.classList.replace("bg-red-600","bg-green-600"),t.classList.replace("hover:bg-red-500","hover:bg-green-500"),n.classList.remove("timer-active"),i.textContent="Timer gestoppt")}function F2(){const r=Math.floor(Ve.timerSeconds/3600),e=Math.floor(Ve.timerSeconds%3600/60),t=Ve.timerSeconds%60;document.getElementById("timerValue").textContent=`${String(r).padStart(2,"0")}:${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`}function iM(){const r=document.getElementById("useCountdown").checked;document.getElementById("countdownMinutes").disabled=!r}function sM(){const r=document.getElementById("useCountdown").checked,e=document.getElementById("currentProject").value,t=document.getElementById("currentActivity").value;let n;if(r){const s=parseInt(document.getElementById("countdownMinutes").value)||60;n=new Date(Ve.timerStart.getTime()+s*60*1e3)}else n=new Date;const i={datum:Ve.timerStart.toISOString().split("T")[0],start:Ve.timerStart.toTimeString().slice(0,5),ende:n.toTimeString().slice(0,5),projekt:e,taetigkeit:t,homeoffice:Ve.isHomeoffice,stunden:aM(Ve.timerStart.toTimeString().slice(0,5),n.toTimeString().slice(0,5)),pause:0,createdAt:pn.firestore.FieldValue.serverTimestamp()};VA(i),Ve.timerStart=null,Ys(" Zeiteintrag gespeichert!")}function aM(r,e){const t=Ww(r),n=Ww(e);return Math.round((n-t)/60*100)/100}function Ww(r){if(!r)return 0;const[e,t]=r.split(":").map(Number);return e*60+t}function oM(){var r;localStorage.setItem("zeiterfassung_timer",JSON.stringify({timerStart:(r=Ve.timerStart)==null?void 0:r.toISOString(),isRunning:Ve.isRunning,isCountdown:document.getElementById("useCountdown").checked,countdownMinutes:document.getElementById("countdownMinutes").value,project:document.getElementById("currentProject").value,activity:document.getElementById("currentActivity").value,homeoffice:Ve.isHomeoffice}))}function O2(){localStorage.removeItem("zeiterfassung_timer")}function cM(){const r=localStorage.getItem("zeiterfassung_timer");if(!r)return;const e=JSON.parse(r);if(!e.isRunning||!e.timerStart)return;const t=new Date(e.timerStart),n=Math.floor((Date.now()-t.getTime())/1e3),i=parseInt(e.countdownMinutes)||60;if(Ve.timerStart=t,document.getElementById("currentProject").value=e.project||"",document.getElementById("currentActivity").value=e.activity||"",window.setLocation(e.homeoffice),e.isCountdown){if(document.getElementById("useCountdown").checked=!0,document.getElementById("countdownMinutes").value=i,Ve.timerSeconds=Math.max(0,i*60-n),Ve.timerSeconds<=0){Ve.timerSeconds=0,O2();return}}else Ve.timerSeconds=n;Ve.isRunning=!0,pg(!0,e.isCountdown),Ys(" Timer wiederhergestellt!"),Ve.timerInterval=setInterval(()=>{const a=Math.floor((new Date-Ve.timerStart)/1e3);e.isCountdown?(Ve.timerSeconds=Math.max(0,i*60-a),Ve.timerSeconds<=0&&(Ve.timerSeconds=0,dg(),DA())):Ve.timerSeconds=a,F2()},1e3)}let Ha=null;function LA(){Ha||(Ha=new(window.AudioContext||window.webkitAudioContext)),Ha.state==="suspended"&&Ha.resume()}function DA(){Ys(" Zeit abgelaufen!"),FA()}function FA(){if(Ha){const r=Ha.createOscillator(),e=Ha.createGain();r.connect(e),e.connect(Ha.destination),r.frequency.value=880,r.start(),r.stop(Ha.currentTime+1)}}function uM(){LA(),FA()}function OA(){"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()}function lM(){OA()}function Ys(r){const e=document.createElement("div");e.className="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg border border-gray-600 z-50 animate-bounce",e.textContent=r,document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}function hM(){var r,e,t,n;(r=document.getElementById("loginScreen"))==null||r.classList.remove("hidden"),(e=document.getElementById("app"))==null||e.classList.add("hidden"),(t=document.getElementById("registerForm"))==null||t.classList.add("hidden"),(n=document.getElementById("emailLoginForm"))==null||n.classList.remove("hidden")}function fM(){var i,s,a;(i=document.getElementById("loginScreen"))==null||i.classList.add("hidden"),(s=document.getElementById("app"))==null||s.classList.remove("hidden");const r=Ve.currentUser,e=document.getElementById("userPhoto"),t=document.getElementById("userAvatar");r&&r.photoURL?(e.src=r.photoURL,e.style.display="block"):(e.src="",e.style.display="none",t.innerHTML="");const n=r.displayName||((a=r.email)==null?void 0:a.split("@")[0])||"User";document.getElementById("userName").textContent=n,document.getElementById("userEmail").textContent=r.email||""}function Wi(r){const e=document.getElementById("syncStatus");if(e)switch(e.classList.remove("syncing"),r){case"syncing":e.innerHTML=" Sync...",e.className="sync-indicator syncing text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full";break;case"synced":e.innerHTML=" Sync",e.className="sync-indicator text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full";break;case"error":e.innerHTML=" Offline",e.className="sync-indicator text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full";break}}function dM(r){var e,t,n;["timer","tasks","entries","projects","dashboard","export"].forEach(i=>{var s,a,o;(s=document.getElementById(`content-${i}`))==null||s.classList.add("hidden"),(a=document.getElementById(`tab-${i}`))==null||a.classList.remove("tab-active"),(o=document.getElementById(`tab-${i}`))==null||o.classList.add("text-br-200")}),(e=document.getElementById(`content-${r}`))==null||e.classList.remove("hidden"),(t=document.getElementById(`tab-${r}`))==null||t.classList.add("tab-active"),(n=document.getElementById(`tab-${r}`))==null||n.classList.remove("text-br-200"),r==="entries"&&window.filterEntries&&window.filterEntries(),r==="projects"&&window.renderProjects&&window.renderProjects(),r==="dashboard"&&window.updateDashboard&&window.updateDashboard(),r==="tasks"&&window.renderTasks&&window.renderTasks()}function pM(){document.getElementById("manualDate").value=new Date().toISOString().split("T")[0],localStorage.getItem("zeiterfassung_sortOrder")==="asc"&&(Ve.sortOrderDescending=!1,document.getElementById("btnSortOrder").innerHTML="",document.getElementById("btnSortOrder").title="Sortierung: lteste zuerst"),window.showTab=dM}function MA(){const r=new Date,e=new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().split("T")[0],t=Ve.entries.filter(w=>w.datum===e);let n=0,i=0,s=0;t.forEach(w=>{const _=parseFloat(w.stunden||0);n+=_,w.homeoffice?i+=_:s+=_});const a=7.8,o=n/a*100,c=Math.round(o),u=Math.min(100,o);document.getElementById("todayWorkProgress").textContent=`${n.toFixed(1)}h / ${a}h`,document.getElementById("todayWorkPercentText").textContent=`${c}%`,document.getElementById("todayWorkPercent").textContent=c>10?`${c}%`:"",document.getElementById("todayWorkBar").style.width=`${u}%`;const l=i+s,d=l>0?i/l*100:50,g=l>0?s/l*100:50;document.getElementById("todayHoBar").style.width=`${d}%`,document.getElementById("todayOfficeBar").style.width=`${g}%`,document.getElementById("todayHoLabel").textContent=d>10?`${Math.round(d)}%`:"",document.getElementById("todayOfficeLabel").textContent=g>10?`${Math.round(g)}%`:"",document.getElementById("todayHoHours").textContent=`${i.toFixed(1)}h`,document.getElementById("todayOfficeHours").textContent=`${s.toFixed(1)}h`,document.getElementById("todayTotal").textContent=`${n.toFixed(2)} h`;const p=document.getElementById("todayEntries");p&&(t.length===0?p.innerHTML='<div class="p-4 text-center text-br-300 text-sm">Noch keine Eintrge heute</div>':(t.sort((w,_)=>(w.start||"").localeCompare(_.start||"")),p.innerHTML=t.map(w=>{var _;return`
                <div class="p-3 border-b border-br-600 flex items-center justify-between hover:bg-br-700/50 transition-colors">
                    <div class="flex items-center gap-3">
                        <div class="w-1 h-8 rounded" style="background: ${((_=Ve.projects[w.projekt])==null?void 0:_.color)||"#6B7280"}"></div>
                        <div>
                            <div class="text-sm font-medium">${w.start} - ${w.ende}</div>
                            <div class="text-xs text-br-200">${w.projekt||"Allgemein"}  ${w.taetigkeit||"-"}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-mono text-sm">${(w.stunden||0).toFixed(2)}h</div>
                        <div class="text-xs">${w.homeoffice?"":""}</div>
                    </div>
                </div>
            `}).join("")))}function BA(){var r;(r=document.getElementById("userMenu"))==null||r.classList.add("hidden")}function ou(r){if(!r)return"";try{const e=new Date(r);return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}catch{return r}}window.showUserMenu=()=>document.getElementById("userMenu").classList.toggle("hidden");window.hideUserMenu=BA;window.formatDate=ou;window.updateTodayView=MA;window.setLocation=gM;function gM(r){Ve.isHomeoffice=r;const e=document.getElementById("btn-ho"),t=document.getElementById("btn-office");r?(e.classList.replace("bg-br-700","bg-br-500"),t.classList.replace("bg-br-500","bg-br-700")):(e.classList.replace("bg-br-500","bg-br-700"),t.classList.replace("bg-br-700","bg-br-500"))}function mM(){Ve.currentUser&&(Wi("syncing"),Ve.unsubscribeEntries=Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").orderBy("datum","desc").onSnapshot(r=>{Ve.entries=[],r.forEach(e=>{Ve.entries.push({id:e.id,...e.data()})}),MA(),Sd(),L2(),Wi("synced")},r=>{console.error("Entries sync error:",r),Wi("error")}),Ve.unsubscribeProjects=Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").onSnapshot(r=>{r.empty||(Ve.projects={},r.forEach(e=>{Ve.projects[e.id]=e.data()}),W7(),CA())},r=>{console.error("Projects sync error:",r)}),Ve.unsubscribeTasks=Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").orderBy("faelligAm","asc").onSnapshot(r=>{Ve.tasks=[],r.forEach(e=>{Ve.tasks.push({id:e.id,...e.data()})}),D2(),Ve.tasksDashboardShown,Wi("synced")},r=>{console.error("Tasks sync error:",r),Wi("error")}))}function vM(){Ve.unsubscribeEntries&&Ve.unsubscribeEntries(),Ve.unsubscribeProjects&&Ve.unsubscribeProjects(),Ve.unsubscribeTasks&&Ve.unsubscribeTasks()}async function VA(r){if(Ve.currentUser){Wi("syncing");try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").add(r),Wi("synced")}catch(e){console.error("Add entry error:",e),Wi("error")}}}async function _M(r,e){if(Ve.currentUser){Wi("syncing");try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").doc(r).update(e),Wi("synced")}catch(t){console.error("Update entry error:",t),Wi("error")}}}async function yM(r){if(Ve.currentUser){Wi("syncing");try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").doc(r).delete(),Wi("synced")}catch(e){console.error("Delete entry error:",e),Wi("error")}}}async function wM(r,e){if(Ve.currentUser)try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("timers").doc("current").set({alarmTime:r,project:e||"",active:!0,createdAt:pn.firestore.FieldValue.serverTimestamp()}),console.log(" Cloud Timer gespeichert")}catch(t){console.error("Cloud Timer Fehler:",t)}}async function UA(){if(Ve.currentUser)try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("timers").doc("current").update({active:!1}),console.log(" Cloud Timer deaktiviert")}catch(r){console.error("Cloud Timer lschen Fehler:",r)}}function xM(){Ah.onAuthStateChanged(r=>{console.log("Auth State:",r?r.email:"nicht angemeldet"),r?(Ve.currentUser=r,fM(),mM(),cM()):(Ve.currentUser=null,hM(),vM())}),window.signInWithGoogle=TM,window.signInWithEmail=IM,window.registerWithEmail=SM,window.resetPassword=PM,window.signOut=EM,window.showRegisterForm=bM,window.showLoginForm=AM}async function TM(){const r=new pn.auth.GoogleAuthProvider;r.setCustomParameters({prompt:"select_account"});try{const e=document.getElementById("loginBtn");e&&(e.disabled=!0,e.innerHTML=" Anmelden..."),await Ah.signInWithPopup(r),console.log(" Login erfolgreich")}catch(e){console.error("Login Error:",e.code,e.message);const t=document.getElementById("loginBtn");t&&(t.disabled=!1,t.innerHTML='<svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Mit Google anmelden'),e.code==="auth/popup-blocked"?alert(" Popup wurde blockiert! Bitte erlaube Popups fr diese Seite."):e.code!=="auth/popup-closed-by-user"&&e.code!=="auth/cancelled-popup-request"&&alert(" Login fehlgeschlagen: "+e.message)}}function EM(){Ah.signOut(),BA()}function bM(){document.getElementById("emailLoginForm").classList.add("hidden"),document.getElementById("registerForm").classList.remove("hidden")}function AM(){var r,e;(r=document.getElementById("registerForm"))==null||r.classList.add("hidden"),(e=document.getElementById("emailLoginForm"))==null||e.classList.remove("hidden")}async function IM(){const r=document.getElementById("loginEmail").value.trim(),e=document.getElementById("loginPassword").value;if(!r||!e){alert("Bitte E-Mail und Passwort eingeben.");return}const t=document.getElementById("emailLoginBtn");t.disabled=!0,t.innerHTML=" Anmelden...";try{await Ah.signInWithEmailAndPassword(r,e),console.log(" E-Mail Login erfolgreich")}catch(n){switch(console.error("E-Mail Login Error:",n.code,n.message),t.disabled=!1,t.innerHTML=" Mit E-Mail anmelden",n.code){case"auth/user-not-found":alert(` Kein Konto mit dieser E-Mail gefunden.

Mchtest du dich registrieren?`);break;case"auth/wrong-password":alert(" Falsches Passwort.");break;case"auth/invalid-email":alert(" Ungltige E-Mail-Adresse.");break;case"auth/too-many-requests":alert(" Zu viele Versuche. Bitte warte einen Moment.");break;default:alert(" Login fehlgeschlagen: "+n.message)}}}async function SM(){const r=document.getElementById("registerEmail").value.trim(),e=document.getElementById("registerPassword").value,t=document.getElementById("registerPasswordConfirm").value;if(!r||!e){alert("Bitte E-Mail und Passwort eingeben.");return}if(e.length<6){alert("Das Passwort muss mindestens 6 Zeichen haben.");return}if(e!==t){alert("Die Passwrter stimmen nicht berein.");return}try{await Ah.createUserWithEmailAndPassword(r,e),console.log(" Registrierung erfolgreich"),Ys(" Konto erstellt! Du bist jetzt angemeldet.")}catch(n){switch(console.error("Registrierung Error:",n.code,n.message),n.code){case"auth/email-already-in-use":alert(` Diese E-Mail ist bereits registriert.

Bitte melde dich an oder nutze "Passwort vergessen".`);break;default:alert(" Registrierung fehlgeschlagen: "+n.message)}}}async function PM(){const r=document.getElementById("loginEmail").value.trim();if(!r){alert("Bitte gib zuerst deine E-Mail-Adresse ein.");return}try{await Ah.sendPasswordResetEmail(r),alert(` Passwort-Reset E-Mail gesendet!

Bitte prfe dein Postfach (auch Spam-Ordner).`)}catch(e){console.error("Password Reset Error:",e.code,e.message),alert(" Fehler: "+e.message)}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var lp={};lp.version="0.18.5";var jA=1252,NM=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],qA=function(r){NM.indexOf(r)!=-1&&(jA=r)};function CM(){qA(1252)}var Zf=function(r){qA(r)};function RM(){Zf(1200),CM()}var h0=function(e){return String.fromCharCode(e)},zw=function(e){return String.fromCharCode(e)},hp,Zo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ed(r){for(var e="",t=0,n=0,i=0,s=0,a=0,o=0,c=0,u=0;u<r.length;)t=r.charCodeAt(u++),s=t>>2,n=r.charCodeAt(u++),a=(t&3)<<4|n>>4,i=r.charCodeAt(u++),o=(n&15)<<2|i>>6,c=i&63,isNaN(n)?o=c=64:isNaN(i)&&(c=64),e+=Zo.charAt(s)+Zo.charAt(a)+Zo.charAt(o)+Zo.charAt(c);return e}function so(r){var e="",t=0,n=0,i=0,s=0,a=0,o=0,c=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<r.length;)s=Zo.indexOf(r.charAt(u++)),a=Zo.indexOf(r.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Zo.indexOf(r.charAt(u++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),c=Zo.indexOf(r.charAt(u++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var lr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),po=function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function Su(r){return lr?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function Hw(r){return lr?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Hs=function(e){return lr?po(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function gg(r){if(typeof ArrayBuffer>"u")return Hs(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function Pd(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function kM(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var Qn=lr?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:po(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),i=0;for(e=0,t=0;e<r.length;t+=i,++e)if(i=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function LM(r){for(var e=[],t=0,n=r.length+250,i=Su(r.length+255),s=0;s<r.length;++s){var a=r.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=r.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>n&&(e.push(i.slice(0,t)),t=0,i=Su(65535),n=65530)}return e.push(i.slice(0,t)),Qn(e)}var Tf=/\u0000/g,f0=/[\u0001-\u0006]/g;function Vl(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function $s(r,e){var t=""+r;return t.length>=e?t:Zr("0",e-t.length)+t}function M2(r,e){var t=""+r;return t.length>=e?t:Zr(" ",e-t.length)+t}function fp(r,e){var t=""+r;return t.length>=e?t:t+Zr(" ",e-t.length)}function DM(r,e){var t=""+Math.round(r);return t.length>=e?t:Zr("0",e-t.length)+t}function FM(r,e){var t=""+r;return t.length>=e?t:Zr("0",e-t.length)+t}var $w=Math.pow(2,32);function gl(r,e){if(r>$w||r<-$w)return DM(r,e);var t=Math.round(r);return FM(t,e)}function dp(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var Gw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],mm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function OM(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var tn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Kw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},MM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function pp(r,e,t){for(var n=r<0?-1:1,i=r*n,s=0,a=1,o=0,c=1,u=0,l=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,l=d*u+c,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,c=u,u=l;if(l>e&&(u>e?(l=c,o=s):(l=u,o=a)),!t)return[0,n*o,l];var g=Math.floor(n*o/l);return[g,n*o-g*l,l]}function d0(r,e,t){if(r>2958465||r<0)return null;var n=r|0,i=Math.floor(86400*(r-n)),s=0,a=[],o={D:n,T:i,u:86400*(r-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),t&&(s=zM(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var WA=new Date(1899,11,31,0,0,0),BM=WA.getTime(),VM=new Date(1900,2,1,0,0,0);function zA(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=VM&&(t+=24*60*60*1e3),(t-(BM+(r.getTimezoneOffset()-WA.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function B2(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function UM(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function jM(r){var e=r<0?12:11,t=B2(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function qM(r){var e=B2(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function WM(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=jM(r):e===10?t=r.toFixed(10).substr(0,12):t=qM(r),B2(UM(t.toUpperCase()))}function T1(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):WM(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return dc(14,zA(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function zM(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function HM(r,e,t,n){var i="",s=0,a=0,o=t.y,c,u=0;switch(r){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=t.m,u=e.length;break;case 3:return mm[t.m-1][1];case 5:return mm[t.m-1][0];default:return mm[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=t.d,u=e.length;break;case 3:return Gw[t.q][0];default:return Gw[t.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?$s(t.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=$s(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=t.D*24+t.H;break;case"[m]":case"[mm]":c=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":c=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var l=u>0?$s(c,u):"";return l}function ec(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var HA=/%/g;function $M(r,e,t){var n=e.replace(HA,""),i=e.length-n.length;return Qa(r,n,t*Math.pow(10,2*i))+Zr("%",i)}function GM(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Qa(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function $A(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+$A(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var GA=/# (\?+)( ?)\/( ?)(\d+)/;function KM(r,e,t){var n=parseInt(r[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return t+(s===0?"":""+s)+" "+(a===0?Zr(" ",r[1].length+1+r[4].length):M2(a,r[1].length)+r[2]+"/"+r[3]+$s(o,r[4].length))}function YM(r,e,t){return t+(e===0?"":""+e)+Zr(" ",r[1].length+2+r[4].length)}var KA=/^#*0*\.([0#]+)/,YA=/\).*[0#]/,XA=/\(###\) ###\\?-####/;function Ai(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function Yw(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function Xw(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function XM(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function JM(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function bs(r,e,t){if(r.charCodeAt(0)===40&&!e.match(YA)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?bs("n",n,t):"("+bs("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return GM(r,e,t);if(e.indexOf("%")!==-1)return $M(r,e,t);if(e.indexOf("E")!==-1)return $A(e,t);if(e.charCodeAt(0)===36)return"$"+bs(r,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+gl(c,e.length);if(e.match(/^[#?]+$/))return i=gl(t,0),i==="0"&&(i=""),i.length>e.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(GA))return KM(s,c,u);if(e.match(/^#+0+$/))return u+gl(c,e.length-e.indexOf("0"));if(s=e.match(KA))return i=Yw(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Ai(s[1])).replace(/\.$/,"."+Ai(s[1])).replace(/\.(\d*)$/,function(w,_){return"."+_+Zr("0",Ai(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+Yw(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+ec(gl(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+bs(r,e,-t):ec(""+(Math.floor(t)+XM(t,s[1].length)))+"."+$s(Xw(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return bs(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Vl(bs(r,e.replace(/[\\-]/g,""),t)),a=0,Vl(Vl(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return a<i.length?i.charAt(a++):w==="0"?"0":""}));if(e.match(XA))return i=bs(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=pp(c,Math.pow(10,a)-1,!1),i=""+u,l=Qa("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=fp(o[2],a),l.length<s[4].length&&(l=Ai(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=pp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?M2(o[1],a)+s[2]+"/"+s[3]+fp(o[2],a):Zr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=gl(t,0),e.length<=i.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Ai(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=Xw(t,s[1].length),t<0?"-"+bs(r,e,-t):ec(JM(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?$s(0,3-w.length):"")+w})+"."+$s(a,s[1].length);switch(e){case"###,##0.00":return bs(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=ec(gl(c,0));return p!=="0"?u+p:"";case"###,###.00":return bs(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return bs(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function QM(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Qa(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function ZM(r,e,t){var n=e.replace(HA,""),i=e.length-n.length;return Qa(r,n,t*Math.pow(10,2*i))+Zr("%",i)}function JA(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+JA(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function aa(r,e,t){if(r.charCodeAt(0)===40&&!e.match(YA)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?aa("n",n,t):"("+aa("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return QM(r,e,t);if(e.indexOf("%")!==-1)return ZM(r,e,t);if(e.indexOf("E")!==-1)return JA(e,t);if(e.charCodeAt(0)===36)return"$"+aa(r,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+$s(c,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(GA))return YM(s,c,u);if(e.match(/^#+0+$/))return u+$s(c,e.length-e.indexOf("0"));if(s=e.match(KA))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Ai(s[1])).replace(/\.$/,"."+Ai(s[1])),i=i.replace(/\.(\d*)$/,function(w,_){return"."+_+Zr("0",Ai(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+ec(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+aa(r,e,-t):ec(""+t)+"."+Zr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return aa(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Vl(aa(r,e.replace(/[\\-]/g,""),t)),a=0,Vl(Vl(e.replace(/\\/g,"")).replace(/[0#]/g,function(w){return a<i.length?i.charAt(a++):w==="0"?"0":""}));if(e.match(XA))return i=aa(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=pp(c,Math.pow(10,a)-1,!1),i=""+u,l=Qa("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=fp(o[2],a),l.length<s[4].length&&(l=Ai(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=pp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?M2(o[1],a)+s[2]+"/"+s[3]+fp(o[2],a):Zr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Ai(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+aa(r,e,-t):ec(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(w){return"00,"+(w.length<3?$s(0,3-w.length):"")+w})+"."+$s(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=ec(""+c);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return aa(r,e.slice(0,e.lastIndexOf(".")),t)+Ai(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Qa(r,e,t){return(t|0)===t?aa(r,e,t):bs(r,e,t)}function e9(r){for(var e=[],t=!1,n=0,i=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(i,n-i),i=n+1}if(e[e.length]=r.substr(i),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var QA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function ZA(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":dp(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(QA))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function t9(r,e,t,n){for(var i=[],s="",a=0,o="",c="t",u,l,d,g="H";a<r.length;)switch(o=r.charAt(a)){case"G":if(!dp(r,a))throw new Error("unrecognized character "+o+" in "+r);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=r.charCodeAt(++a))!==34&&a<r.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=r.charAt(++a),w=p==="("||p===")"?p:"t";i[i.length]={t:w,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(r.charAt(a+1)==="1"||r.charAt(a+1)==="2"){if(u==null&&(u=d0(e,t,r.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:r.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=d0(e,t),u==null))return"";for(s=o;++a<r.length&&r.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var _={t:o,v:o};if(u==null&&(u=d0(e,t)),r.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(_.v=u.H>=12?"P":"A"),_.t="T",g="h",a+=3):r.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(_.v=u.H>=12?"PM":"AM"),_.t="T",a+=5,g="h"):r.substr(a,5).toUpperCase()==="/"?(u!=null&&(_.v=u.H>=12?"":""),_.t="T",a+=5,g="h"):(_.t="t",++a),u==null&&_.t==="T")return"";i[i.length]=_,c=o;break;case"[":for(s=o;r.charAt(a++)!=="]"&&a<r.length;)s+=r.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(QA)){if(u==null&&(u=d0(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",ZA(r)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<r.length&&(o=r.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<r.length&&"0#?.,E+-%".indexOf(o=r.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;r.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(r.charAt(a)==" "||r.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<r.length&&"0123456789".indexOf(r.charAt(++a))>-1;)s+=r.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+r);i[i.length]={t:"t",v:o},++a;break}var T=0,P=0,L;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,c="h",T<1&&(T=1);break;case"s":(L=i[a].v.match(/\.0+$/))&&(P=Math.max(P,L[0].length-1)),T<3&&(T=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",T<2&&(T=2));break;case"X":break;case"Z":T<1&&i[a].v.match(/[Hh]/)&&(T=1),T<2&&i[a].v.match(/[Mm]/)&&(T=2),T<3&&i[a].v.match(/[Ss]/)&&(T=3)}switch(T){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var F="",K;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=HM(i[a].t.charCodeAt(0),i[a].v,u,P),i[a].t="t";break;case"n":case"?":for(K=a+1;i[K]!=null&&((o=i[K].t)==="?"||o==="D"||(o===" "||o==="t")&&i[K+1]!=null&&(i[K+1].t==="?"||i[K+1].t==="t"&&i[K+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[K].v==="/"||i[K].v===" "&&i[K+1]!=null&&i[K+1].t=="?"));)i[a].v+=i[K].v,i[K]={v:"",t:";"},++K;F+=i[a].v,a=K-1;break;case"G":i[a].t="t",i[a].v=T1(e,t);break}var se="",ce,R;if(F.length>0){F.charCodeAt(0)==40?(ce=e<0&&F.charCodeAt(0)===45?-e:e,R=Qa("n",F,ce)):(ce=e<0&&n>1?-e:e,R=Qa("n",F,ce),ce<0&&i[0]&&i[0].t=="t"&&(R=R.substr(1),i[0].v="-"+i[0].v)),K=R.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var C=i.length;if(A===i.length&&R.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(K>=i[a].v.length-1?(K-=i[a].v.length,i[a].v=R.substr(K+1,i[a].v.length)):K<0?i[a].v="":(i[a].v=R.substr(0,K+1),K=-1),i[a].t="t",C=a);K>=0&&C<i.length&&(i[C].v=R.substr(0,K+1)+i[C].v)}else if(A!==i.length&&R.indexOf("E")===-1){for(K=R.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,se=i[a].v.substr(l+1);l>=0;--l)K>=0&&(i[a].v.charAt(l)==="0"||i[a].v.charAt(l)==="#")&&(se=R.charAt(K--)+se);i[a].v=se,i[a].t="t",C=a}for(K>=0&&C<i.length&&(i[C].v=R.substr(0,K+1)+i[C].v),K=R.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,se=i[a].v.substr(0,l);l<i[a].v.length;++l)K<R.length&&(se+=R.charAt(K++));i[a].v=se,i[a].t="t",C=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(ce=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Qa(i[a].t,i[a].v,ce),i[a].t="t");var V="";for(a=0;a!==i.length;++a)i[a]!=null&&(V+=i[a].v);return V}var Jw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Qw(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function r9(r,e){var t=e9(r),n=t.length,i=t[n-1].indexOf("@");if(n<4&&i>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(Jw),o=t[1].match(Jw);return Qw(e,a)?[n,t[0]]:Qw(e,o)?[n,t[1]]:[n,t[a!=null&&o!=null?2:1]]}return[n,s]}function dc(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:tn)[r],n==null&&(n=t.table&&t.table[Kw[r]]||tn[Kw[r]]),n==null&&(n=MM[r]||"General");break}if(dp(n,0))return T1(e,t);e instanceof Date&&(e=zA(e,t.date1904));var i=r9(n,e);if(dp(i[1]))return T1(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return t9(i[1],e,t,i[0])}function eI(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(tn[t]==null){e<0&&(e=t);continue}if(tn[t]==r){e=t;break}}e<0&&(e=391)}return tn[e]=r,e}function mg(r){for(var e=0;e!=392;++e)r[e]!==void 0&&eI(r[e],e)}function vg(){tn=OM()}var tI=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function n9(r){var e=typeof r=="number"?tn[r]:r;return e=e.replace(tI,"(\\d+)"),new RegExp("^"+e+"$")}function i9(r,e,t){var n=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match(tI)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":a=p;break;case"s":c=p;break;case"m":a>=0?o=p:i=p;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var l=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?u:n==-1&&i==-1&&s==-1?l:u+"T"+l}var s9=function(){var r={};r.version="1.2.0";function e(){for(var R=0,A=new Array(256),C=0;C!=256;++C)R=C,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,R=R&1?-306674912^R>>>1:R>>>1,A[C]=R;return typeof Int32Array<"u"?new Int32Array(A):A}var t=e();function n(R){var A=0,C=0,V=0,b=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(V=0;V!=256;++V)b[V]=R[V];for(V=0;V!=256;++V)for(C=R[V],A=256+V;A<4096;A+=256)C=b[A]=C>>>8^R[C&255];var S=[];for(V=1;V!=16;++V)S[V-1]=typeof Int32Array<"u"?b.subarray(V*256,V*256+256):b.slice(V*256,V*256+256);return S}var i=n(t),s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],l=i[5],d=i[6],g=i[7],p=i[8],w=i[9],_=i[10],T=i[11],P=i[12],L=i[13],F=i[14];function K(R,A){for(var C=A^-1,V=0,b=R.length;V<b;)C=C>>>8^t[(C^R.charCodeAt(V++))&255];return~C}function se(R,A){for(var C=A^-1,V=R.length-15,b=0;b<V;)C=F[R[b++]^C&255]^L[R[b++]^C>>8&255]^P[R[b++]^C>>16&255]^T[R[b++]^C>>>24]^_[R[b++]]^w[R[b++]]^p[R[b++]]^g[R[b++]]^d[R[b++]]^l[R[b++]]^u[R[b++]]^c[R[b++]]^o[R[b++]]^a[R[b++]]^s[R[b++]]^t[R[b++]];for(V+=15;b<V;)C=C>>>8^t[(C^R[b++])&255];return~C}function ce(R,A){for(var C=A^-1,V=0,b=R.length,S=0,k=0;V<b;)S=R.charCodeAt(V++),S<128?C=C>>>8^t[(C^S)&255]:S<2048?(C=C>>>8^t[(C^(192|S>>6&31))&255],C=C>>>8^t[(C^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,k=R.charCodeAt(V++)&1023,C=C>>>8^t[(C^(240|S>>8&7))&255],C=C>>>8^t[(C^(128|S>>2&63))&255],C=C>>>8^t[(C^(128|k>>6&15|(S&3)<<4))&255],C=C>>>8^t[(C^(128|k&63))&255]):(C=C>>>8^t[(C^(224|S>>12&15))&255],C=C>>>8^t[(C^(128|S>>6&63))&255],C=C>>>8^t[(C^(128|S&63))&255]);return~C}return r.table=t,r.bstr=K,r.buf=se,r.str=ce,r}(),Ir=function(){var e={};e.version="1.2.1";function t(j,ee){for(var Y=j.split("/"),X=ee.split("/"),Z=0,te=0,ye=Math.min(Y.length,X.length);Z<ye;++Z){if(te=Y[Z].length-X[Z].length)return te;if(Y[Z]!=X[Z])return Y[Z]<X[Z]?-1:1}return Y.length-X.length}function n(j){if(j.charAt(j.length-1)=="/")return j.slice(0,-1).indexOf("/")===-1?j:n(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(0,ee+1)}function i(j){if(j.charAt(j.length-1)=="/")return i(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(ee+1)}function s(j,ee){typeof ee=="string"&&(ee=new Date(ee));var Y=ee.getHours();Y=Y<<6|ee.getMinutes(),Y=Y<<5|ee.getSeconds()>>>1,j.write_shift(2,Y);var X=ee.getFullYear()-1980;X=X<<4|ee.getMonth()+1,X=X<<5|ee.getDate(),j.write_shift(2,X)}function a(j){var ee=j.read_shift(2)&65535,Y=j.read_shift(2)&65535,X=new Date,Z=Y&31;Y>>>=5;var te=Y&15;Y>>>=4,X.setMilliseconds(0),X.setFullYear(Y+1980),X.setMonth(te-1),X.setDate(Z);var ye=ee&31;ee>>>=5;var Re=ee&63;return ee>>>=6,X.setHours(ee),X.setMinutes(Re),X.setSeconds(ye<<1),X}function o(j){cs(j,0);for(var ee={},Y=0;j.l<=j.length-4;){var X=j.read_shift(2),Z=j.read_shift(2),te=j.l+Z,ye={};switch(X){case 21589:Y=j.read_shift(1),Y&1&&(ye.mtime=j.read_shift(4)),Z>5&&(Y&2&&(ye.atime=j.read_shift(4)),Y&4&&(ye.ctime=j.read_shift(4))),ye.mtime&&(ye.mt=new Date(ye.mtime*1e3));break}j.l=te,ee[X]=ye}return ee}var c;function u(){return c||(c={})}function l(j,ee){if(j[0]==80&&j[1]==75)return Er(j,ee);if((j[0]|32)==109&&(j[1]|32)==105)return vi(j,ee);if(j.length<512)throw new Error("CFB file size "+j.length+" < 512");var Y=3,X=512,Z=0,te=0,ye=0,Re=0,we=0,Ee=[],Pe=j.slice(0,512);cs(Pe,0);var Ke=d(Pe);switch(Y=Ke[0],Y){case 3:X=512;break;case 4:X=4096;break;case 0:if(Ke[1]==0)return Er(j,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+Y)}X!==512&&(Pe=j.slice(0,X),cs(Pe,28));var it=j.slice(0,X);g(Pe,Y);var gt=Pe.read_shift(4,"i");if(Y===3&&gt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+gt);Pe.l+=4,ye=Pe.read_shift(4,"i"),Pe.l+=4,Pe.chk("00100000","Mini Stream Cutoff Size: "),Re=Pe.read_shift(4,"i"),Z=Pe.read_shift(4,"i"),we=Pe.read_shift(4,"i"),te=Pe.read_shift(4,"i");for(var et=-1,lt=0;lt<109&&(et=Pe.read_shift(4,"i"),!(et<0));++lt)Ee[lt]=et;var Lt=p(j,X);T(we,te,Lt,X,Ee);var rr=L(Lt,ye,Ee,X);rr[ye].name="!Directory",Z>0&&Re!==k&&(rr[Re].name="!MiniFAT"),rr[Ee[0]].name="!FAT",rr.fat_addrs=Ee,rr.ssz=X;var nr={},br=[],_i=[],Cs=[];F(ye,rr,Lt,br,Z,nr,_i,Re),w(_i,Cs,br),br.shift();var Zi={FileIndex:_i,FullPaths:Cs};return ee&&ee.raw&&(Zi.raw={header:it,sectors:Lt}),Zi}function d(j){if(j[j.l]==80&&j[j.l+1]==75)return[0,0];j.chk(ie,"Header Signature: "),j.l+=16;var ee=j.read_shift(2,"u");return[j.read_shift(2,"u"),ee]}function g(j,ee){var Y=9;switch(j.l+=2,Y=j.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+Y);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+Y);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Y)}j.chk("0600","Mini Sector Shift: "),j.chk("000000000000","Reserved: ")}function p(j,ee){for(var Y=Math.ceil(j.length/ee)-1,X=[],Z=1;Z<Y;++Z)X[Z-1]=j.slice(Z*ee,(Z+1)*ee);return X[Y-1]=j.slice(Y*ee),X}function w(j,ee,Y){for(var X=0,Z=0,te=0,ye=0,Re=0,we=Y.length,Ee=[],Pe=[];X<we;++X)Ee[X]=Pe[X]=X,ee[X]=Y[X];for(;Re<Pe.length;++Re)X=Pe[Re],Z=j[X].L,te=j[X].R,ye=j[X].C,Ee[X]===X&&(Z!==-1&&Ee[Z]!==Z&&(Ee[X]=Ee[Z]),te!==-1&&Ee[te]!==te&&(Ee[X]=Ee[te])),ye!==-1&&(Ee[ye]=X),Z!==-1&&X!=Ee[X]&&(Ee[Z]=Ee[X],Pe.lastIndexOf(Z)<Re&&Pe.push(Z)),te!==-1&&X!=Ee[X]&&(Ee[te]=Ee[X],Pe.lastIndexOf(te)<Re&&Pe.push(te));for(X=1;X<we;++X)Ee[X]===X&&(te!==-1&&Ee[te]!==te?Ee[X]=Ee[te]:Z!==-1&&Ee[Z]!==Z&&(Ee[X]=Ee[Z]));for(X=1;X<we;++X)if(j[X].type!==0){if(Re=X,Re!=Ee[Re])do Re=Ee[Re],ee[X]=ee[Re]+"/"+ee[X];while(Re!==0&&Ee[Re]!==-1&&Re!=Ee[Re]);Ee[X]=-1}for(ee[0]+="/",X=1;X<we;++X)j[X].type!==2&&(ee[X]+="/")}function _(j,ee,Y){for(var X=j.start,Z=j.size,te=[],ye=X;Y&&Z>0&&ye>=0;)te.push(ee.slice(ye*S,ye*S+S)),Z-=S,ye=Qc(Y,ye*4);return te.length===0?Me(0):Qn(te).slice(0,j.size)}function T(j,ee,Y,X,Z){var te=k;if(j===k){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(j!==-1){var ye=Y[j],Re=(X>>>2)-1;if(!ye)return;for(var we=0;we<Re&&(te=Qc(ye,we*4))!==k;++we)Z.push(te);T(Qc(ye,X-4),ee-1,Y,X,Z)}}function P(j,ee,Y,X,Z){var te=[],ye=[];Z||(Z=[]);var Re=X-1,we=0,Ee=0;for(we=ee;we>=0;){Z[we]=!0,te[te.length]=we,ye.push(j[we]);var Pe=Y[Math.floor(we*4/X)];if(Ee=we*4&Re,X<4+Ee)throw new Error("FAT boundary crossed: "+we+" 4 "+X);if(!j[Pe])break;we=Qc(j[Pe],Ee)}return{nodes:te,data:a5([ye])}}function L(j,ee,Y,X){var Z=j.length,te=[],ye=[],Re=[],we=[],Ee=X-1,Pe=0,Ke=0,it=0,gt=0;for(Pe=0;Pe<Z;++Pe)if(Re=[],it=Pe+ee,it>=Z&&(it-=Z),!ye[it]){we=[];var et=[];for(Ke=it;Ke>=0;){et[Ke]=!0,ye[Ke]=!0,Re[Re.length]=Ke,we.push(j[Ke]);var lt=Y[Math.floor(Ke*4/X)];if(gt=Ke*4&Ee,X<4+gt)throw new Error("FAT boundary crossed: "+Ke+" 4 "+X);if(!j[lt]||(Ke=Qc(j[lt],gt),et[Ke]))break}te[it]={nodes:Re,data:a5([we])}}return te}function F(j,ee,Y,X,Z,te,ye,Re){for(var we=0,Ee=X.length?2:0,Pe=ee[j].data,Ke=0,it=0,gt;Ke<Pe.length;Ke+=128){var et=Pe.slice(Ke,Ke+128);cs(et,64),it=et.read_shift(2),gt=W2(et,0,it-Ee),X.push(gt);var lt={name:gt,type:et.read_shift(1),color:et.read_shift(1),L:et.read_shift(4,"i"),R:et.read_shift(4,"i"),C:et.read_shift(4,"i"),clsid:et.read_shift(16),state:et.read_shift(4,"i"),start:0,size:0},Lt=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);Lt!==0&&(lt.ct=K(et,et.l-8));var rr=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);rr!==0&&(lt.mt=K(et,et.l-8)),lt.start=et.read_shift(4,"i"),lt.size=et.read_shift(4,"i"),lt.size<0&&lt.start<0&&(lt.size=lt.type=0,lt.start=k,lt.name=""),lt.type===5?(we=lt.start,Z>0&&we!==k&&(ee[we].name="!StreamData")):lt.size>=4096?(lt.storage="fat",ee[lt.start]===void 0&&(ee[lt.start]=P(Y,lt.start,ee.fat_addrs,ee.ssz)),ee[lt.start].name=lt.name,lt.content=ee[lt.start].data.slice(0,lt.size)):(lt.storage="minifat",lt.size<0?lt.size=0:we!==k&&lt.start!==k&&ee[we]&&(lt.content=_(lt,ee[we].data,(ee[Re]||{}).data))),lt.content&&cs(lt.content,0),te[gt]=lt,ye.push(lt)}}function K(j,ee){return new Date((hs(j,ee+4)/1e7*Math.pow(2,32)+hs(j,ee)/1e7-11644473600)*1e3)}function se(j,ee){return u(),l(c.readFileSync(j),ee)}function ce(j,ee){var Y=ee&&ee.type;switch(Y||lr&&Buffer.isBuffer(j)&&(Y="buffer"),Y||"base64"){case"file":return se(j,ee);case"base64":return l(Hs(so(j)),ee);case"binary":return l(Hs(j),ee)}return l(j,ee)}function R(j,ee){var Y=ee||{},X=Y.root||"Root Entry";if(j.FullPaths||(j.FullPaths=[]),j.FileIndex||(j.FileIndex=[]),j.FullPaths.length!==j.FileIndex.length)throw new Error("inconsistent CFB structure");j.FullPaths.length===0&&(j.FullPaths[0]=X+"/",j.FileIndex[0]={name:X,type:5}),Y.CLSID&&(j.FileIndex[0].clsid=Y.CLSID),A(j)}function A(j){var ee="Sh33tJ5";if(!Ir.find(j,"/"+ee)){var Y=Me(4);Y[0]=55,Y[1]=Y[3]=50,Y[2]=54,j.FileIndex.push({name:ee,type:2,content:Y,size:4,L:69,R:69,C:69}),j.FullPaths.push(j.FullPaths[0]+ee),C(j)}}function C(j,ee){R(j);for(var Y=!1,X=!1,Z=j.FullPaths.length-1;Z>=0;--Z){var te=j.FileIndex[Z];switch(te.type){case 0:X?Y=!0:(j.FileIndex.pop(),j.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(te.R*te.L*te.C)&&(Y=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(Y=!0);break;default:Y=!0;break}}if(!(!Y&&!ee)){var ye=new Date(1987,1,19),Re=0,we=Object.create?Object.create(null):{},Ee=[];for(Z=0;Z<j.FullPaths.length;++Z)we[j.FullPaths[Z]]=!0,j.FileIndex[Z].type!==0&&Ee.push([j.FullPaths[Z],j.FileIndex[Z]]);for(Z=0;Z<Ee.length;++Z){var Pe=n(Ee[Z][0]);X=we[Pe],X||(Ee.push([Pe,{name:i(Pe).replace("/",""),type:1,clsid:Te,ct:ye,mt:ye,content:null}]),we[Pe]=!0)}for(Ee.sort(function(gt,et){return t(gt[0],et[0])}),j.FullPaths=[],j.FileIndex=[],Z=0;Z<Ee.length;++Z)j.FullPaths[Z]=Ee[Z][0],j.FileIndex[Z]=Ee[Z][1];for(Z=0;Z<Ee.length;++Z){var Ke=j.FileIndex[Z],it=j.FullPaths[Z];if(Ke.name=i(it).replace("/",""),Ke.L=Ke.R=Ke.C=-(Ke.color=1),Ke.size=Ke.content?Ke.content.length:0,Ke.start=0,Ke.clsid=Ke.clsid||Te,Z===0)Ke.C=Ee.length>1?1:-1,Ke.size=0,Ke.type=5;else if(it.slice(-1)=="/"){for(Re=Z+1;Re<Ee.length&&n(j.FullPaths[Re])!=it;++Re);for(Ke.C=Re>=Ee.length?-1:Re,Re=Z+1;Re<Ee.length&&n(j.FullPaths[Re])!=n(it);++Re);Ke.R=Re>=Ee.length?-1:Re,Ke.type=1}else n(j.FullPaths[Z+1]||"")==n(it)&&(Ke.R=Z+1),Ke.type=2}}}function V(j,ee){var Y=ee||{};if(Y.fileType=="mad")return wt(j,Y);switch(C(j),Y.fileType){case"zip":return mi(j,Y)}var X=function(gt){for(var et=0,lt=0,Lt=0;Lt<gt.FileIndex.length;++Lt){var rr=gt.FileIndex[Lt];if(rr.content){var nr=rr.content.length;nr>0&&(nr<4096?et+=nr+63>>6:lt+=nr+511>>9)}}for(var br=gt.FullPaths.length+3>>2,_i=et+7>>3,Cs=et+127>>7,Zi=_i+lt+br+Cs,Fi=Zi+127>>7,es=Fi<=109?0:Math.ceil((Fi-109)/127);Zi+Fi+es+127>>7>Fi;)es=++Fi<=109?0:Math.ceil((Fi-109)/127);var Wn=[1,es,Fi,Cs,br,lt,et,0];return gt.FileIndex[0].size=et<<6,Wn[7]=(gt.FileIndex[0].start=Wn[0]+Wn[1]+Wn[2]+Wn[3]+Wn[4]+Wn[5])+(Wn[6]+7>>3),Wn}(j),Z=Me(X[7]<<9),te=0,ye=0;{for(te=0;te<8;++te)Z.write_shift(1,ve[te]);for(te=0;te<8;++te)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),te=0;te<3;++te)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:k),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:k),Z.write_shift(4,X[1]),te=0;te<109;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1)}if(X[1])for(ye=0;ye<X[1];++ye){for(;te<236+ye*127;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1);Z.write_shift(-4,ye===X[1]-1?k:ye+1)}var Re=function(gt){for(ye+=gt;te<ye-1;++te)Z.write_shift(-4,te+1);gt&&(++te,Z.write_shift(-4,k))};for(ye=te=0,ye+=X[1];te<ye;++te)Z.write_shift(-4,Ne.DIFSECT);for(ye+=X[2];te<ye;++te)Z.write_shift(-4,Ne.FATSECT);Re(X[3]),Re(X[4]);for(var we=0,Ee=0,Pe=j.FileIndex[0];we<j.FileIndex.length;++we)Pe=j.FileIndex[we],Pe.content&&(Ee=Pe.content.length,!(Ee<4096)&&(Pe.start=ye,Re(Ee+511>>9)));for(Re(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,Ne.ENDOFCHAIN);for(ye=te=0,we=0;we<j.FileIndex.length;++we)Pe=j.FileIndex[we],Pe.content&&(Ee=Pe.content.length,!(!Ee||Ee>=4096)&&(Pe.start=ye,Re(Ee+63>>6)));for(;Z.l&511;)Z.write_shift(-4,Ne.ENDOFCHAIN);for(te=0;te<X[4]<<2;++te){var Ke=j.FullPaths[te];if(!Ke||Ke.length===0){for(we=0;we<17;++we)Z.write_shift(4,0);for(we=0;we<3;++we)Z.write_shift(4,-1);for(we=0;we<12;++we)Z.write_shift(4,0);continue}Pe=j.FileIndex[te],te===0&&(Pe.start=Pe.size?Pe.start-1:k);var it=te===0&&Y.root||Pe.name;if(Ee=2*(it.length+1),Z.write_shift(64,it,"utf16le"),Z.write_shift(2,Ee),Z.write_shift(1,Pe.type),Z.write_shift(1,Pe.color),Z.write_shift(-4,Pe.L),Z.write_shift(-4,Pe.R),Z.write_shift(-4,Pe.C),Pe.clsid)Z.write_shift(16,Pe.clsid,"hex");else for(we=0;we<4;++we)Z.write_shift(4,0);Z.write_shift(4,Pe.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,Pe.start),Z.write_shift(4,Pe.size),Z.write_shift(4,0)}for(te=1;te<j.FileIndex.length;++te)if(Pe=j.FileIndex[te],Pe.size>=4096)if(Z.l=Pe.start+1<<9,lr&&Buffer.isBuffer(Pe.content))Pe.content.copy(Z,Z.l,0,Pe.size),Z.l+=Pe.size+511&-512;else{for(we=0;we<Pe.size;++we)Z.write_shift(1,Pe.content[we]);for(;we&511;++we)Z.write_shift(1,0)}for(te=1;te<j.FileIndex.length;++te)if(Pe=j.FileIndex[te],Pe.size>0&&Pe.size<4096)if(lr&&Buffer.isBuffer(Pe.content))Pe.content.copy(Z,Z.l,0,Pe.size),Z.l+=Pe.size+63&-64;else{for(we=0;we<Pe.size;++we)Z.write_shift(1,Pe.content[we]);for(;we&63;++we)Z.write_shift(1,0)}if(lr)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function b(j,ee){var Y=j.FullPaths.map(function(we){return we.toUpperCase()}),X=Y.map(function(we){var Ee=we.split("/");return Ee[Ee.length-(we.slice(-1)=="/"?2:1)]}),Z=!1;ee.charCodeAt(0)===47?(Z=!0,ee=Y[0].slice(0,-1)+ee):Z=ee.indexOf("/")!==-1;var te=ee.toUpperCase(),ye=Z===!0?Y.indexOf(te):X.indexOf(te);if(ye!==-1)return j.FileIndex[ye];var Re=!te.match(f0);for(te=te.replace(Tf,""),Re&&(te=te.replace(f0,"!")),ye=0;ye<Y.length;++ye)if((Re?Y[ye].replace(f0,"!"):Y[ye]).replace(Tf,"")==te||(Re?X[ye].replace(f0,"!"):X[ye]).replace(Tf,"")==te)return j.FileIndex[ye];return null}var S=64,k=-2,ie="d0cf11e0a1b11ae1",ve=[208,207,17,224,161,177,26,225],Te="00000000000000000000000000000000",Ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:k,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Te,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _e(j,ee,Y){u();var X=V(j,Y);c.writeFileSync(ee,X)}function Ce(j){for(var ee=new Array(j.length),Y=0;Y<j.length;++Y)ee[Y]=String.fromCharCode(j[Y]);return ee.join("")}function Fe(j,ee){var Y=V(j,ee);switch(ee&&ee.type||"buffer"){case"file":return u(),c.writeFileSync(ee.filename,Y),Y;case"binary":return typeof Y=="string"?Y:Ce(Y);case"base64":return ed(typeof Y=="string"?Y:Ce(Y));case"buffer":if(lr)return Buffer.isBuffer(Y)?Y:po(Y);case"array":return typeof Y=="string"?Hs(Y):Y}return Y}var nt;function E(j){try{var ee=j.InflateRaw,Y=new ee;if(Y._processChunk(new Uint8Array([3,0]),Y._finishFlushFlag),Y.bytesRead)nt=j;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function D(j,ee){if(!nt)return Kt(j,ee);var Y=nt.InflateRaw,X=new Y,Z=X._processChunk(j.slice(j.l),X._finishFlushFlag);return j.l+=X.bytesRead,Z}function B(j){return nt?nt.deflateRawSync(j):qt(j)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(j){var ee=(j<<1|j<<11)&139536|(j<<5|j<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var ue=typeof Uint8Array<"u",xe=ue?new Uint8Array(256):[],Be=0;Be<256;++Be)xe[Be]=le(Be);function We(j,ee){var Y=xe[j&255];return ee<=8?Y>>>8-ee:(Y=Y<<8|xe[j>>8&255],ee<=16?Y>>>16-ee:(Y=Y<<8|xe[j>>16&255],Y>>>24-ee))}function Ze(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=6?0:j[X+1]<<8))>>>Y&3}function at(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=5?0:j[X+1]<<8))>>>Y&7}function ke(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=4?0:j[X+1]<<8))>>>Y&15}function ne(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=3?0:j[X+1]<<8))>>>Y&31}function ze(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=1?0:j[X+1]<<8))>>>Y&127}function _t(j,ee,Y){var X=ee&7,Z=ee>>>3,te=(1<<Y)-1,ye=j[Z]>>>X;return Y<8-X||(ye|=j[Z+1]<<8-X,Y<16-X)||(ye|=j[Z+2]<<16-X,Y<24-X)||(ye|=j[Z+3]<<24-X),ye&te}function $e(j,ee,Y){var X=ee&7,Z=ee>>>3;return X<=5?j[Z]|=(Y&7)<<X:(j[Z]|=Y<<X&255,j[Z+1]=(Y&7)>>8-X),ee+3}function rt(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y=(Y&1)<<X,j[Z]|=Y,ee+1}function ct(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y,ee+8}function ut(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y&255,j[Z+2]=Y>>>8,ee+16}function Et(j,ee){var Y=j.length,X=2*Y>ee?2*Y:ee+5,Z=0;if(Y>=ee)return j;if(lr){var te=Hw(X);if(j.copy)j.copy(te);else for(;Z<j.length;++Z)te[Z]=j[Z];return te}else if(ue){var ye=new Uint8Array(X);if(ye.set)ye.set(j);else for(;Z<Y;++Z)ye[Z]=j[Z];return ye}return j.length=X,j}function At(j){for(var ee=new Array(j),Y=0;Y<j;++Y)ee[Y]=0;return ee}function Ft(j,ee,Y){var X=1,Z=0,te=0,ye=0,Re=0,we=j.length,Ee=ue?new Uint16Array(32):At(32);for(te=0;te<32;++te)Ee[te]=0;for(te=we;te<Y;++te)j[te]=0;we=j.length;var Pe=ue?new Uint16Array(we):At(we);for(te=0;te<we;++te)Ee[Z=j[te]]++,X<Z&&(X=Z),Pe[te]=0;for(Ee[0]=0,te=1;te<=X;++te)Ee[te+16]=Re=Re+Ee[te-1]<<1;for(te=0;te<we;++te)Re=j[te],Re!=0&&(Pe[te]=Ee[Re+16]++);var Ke=0;for(te=0;te<we;++te)if(Ke=j[te],Ke!=0)for(Re=We(Pe[te],X)>>X-Ke,ye=(1<<X+4-Ke)-1;ye>=0;--ye)ee[Re|ye<<Ke]=Ke&15|te<<4;return X}var It=ue?new Uint16Array(512):At(512),Ct=ue?new Uint16Array(32):At(32);if(!ue){for(var Ht=0;Ht<512;++Ht)It[Ht]=0;for(Ht=0;Ht<32;++Ht)Ct[Ht]=0}(function(){for(var j=[],ee=0;ee<32;ee++)j.push(5);Ft(j,Ct,32);var Y=[];for(ee=0;ee<=143;ee++)Y.push(8);for(;ee<=255;ee++)Y.push(9);for(;ee<=279;ee++)Y.push(7);for(;ee<=287;ee++)Y.push(8);Ft(Y,It,288)})();var Rt=function(){for(var ee=ue?new Uint8Array(32768):[],Y=0,X=0;Y<ae.length-1;++Y)for(;X<ae[Y+1];++X)ee[X]=Y;for(;X<32768;++X)ee[X]=29;var Z=ue?new Uint8Array(259):[];for(Y=0,X=0;Y<J.length-1;++Y)for(;X<J[Y+1];++X)Z[X]=Y;function te(Re,we){for(var Ee=0;Ee<Re.length;){var Pe=Math.min(65535,Re.length-Ee),Ke=Ee+Pe==Re.length;for(we.write_shift(1,+Ke),we.write_shift(2,Pe),we.write_shift(2,~Pe&65535);Pe-- >0;)we[we.l++]=Re[Ee++]}return we.l}function ye(Re,we){for(var Ee=0,Pe=0,Ke=ue?new Uint16Array(32768):[];Pe<Re.length;){var it=Math.min(65535,Re.length-Pe);if(it<10){for(Ee=$e(we,Ee,+(Pe+it==Re.length)),Ee&7&&(Ee+=8-(Ee&7)),we.l=Ee/8|0,we.write_shift(2,it),we.write_shift(2,~it&65535);it-- >0;)we[we.l++]=Re[Pe++];Ee=we.l*8;continue}Ee=$e(we,Ee,+(Pe+it==Re.length)+2);for(var gt=0;it-- >0;){var et=Re[Pe];gt=(gt<<5^et)&32767;var lt=-1,Lt=0;if((lt=Ke[gt])&&(lt|=Pe&-32768,lt>Pe&&(lt-=32768),lt<Pe))for(;Re[lt+Lt]==Re[Pe+Lt]&&Lt<250;)++Lt;if(Lt>2){et=Z[Lt],et<=22?Ee=ct(we,Ee,xe[et+1]>>1)-1:(ct(we,Ee,3),Ee+=5,ct(we,Ee,xe[et-23]>>5),Ee+=3);var rr=et<8?0:et-4>>2;rr>0&&(ut(we,Ee,Lt-J[et]),Ee+=rr),et=ee[Pe-lt],Ee=ct(we,Ee,xe[et]>>3),Ee-=3;var nr=et<4?0:et-2>>1;nr>0&&(ut(we,Ee,Pe-lt-ae[et]),Ee+=nr);for(var br=0;br<Lt;++br)Ke[gt]=Pe&32767,gt=(gt<<5^Re[Pe])&32767,++Pe;it-=Lt-1}else et<=143?et=et+48:Ee=rt(we,Ee,1),Ee=ct(we,Ee,xe[et]),Ke[gt]=Pe&32767,++Pe}Ee=ct(we,Ee,0)-1}return we.l=(Ee+7)/8|0,we.l}return function(we,Ee){return we.length<8?te(we,Ee):ye(we,Ee)}}();function qt(j){var ee=Me(50+Math.floor(j.length*1.1)),Y=Rt(j,ee);return ee.slice(0,Y)}var pt=ue?new Uint16Array(32768):At(32768),Dr=ue?new Uint16Array(32768):At(32768),Gt=ue?new Uint16Array(128):At(128),qn=1,tr=1;function Tr(j,ee){var Y=ne(j,ee)+257;ee+=5;var X=ne(j,ee)+1;ee+=5;var Z=ke(j,ee)+4;ee+=4;for(var te=0,ye=ue?new Uint8Array(19):At(19),Re=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],we=1,Ee=ue?new Uint8Array(8):At(8),Pe=ue?new Uint8Array(8):At(8),Ke=ye.length,it=0;it<Z;++it)ye[U[it]]=te=at(j,ee),we<te&&(we=te),Ee[te]++,ee+=3;var gt=0;for(Ee[0]=0,it=1;it<=we;++it)Pe[it]=gt=gt+Ee[it-1]<<1;for(it=0;it<Ke;++it)(gt=ye[it])!=0&&(Re[it]=Pe[gt]++);var et=0;for(it=0;it<Ke;++it)if(et=ye[it],et!=0){gt=xe[Re[it]]>>8-et;for(var lt=(1<<7-et)-1;lt>=0;--lt)Gt[gt|lt<<et]=et&7|it<<3}var Lt=[];for(we=1;Lt.length<Y+X;)switch(gt=Gt[ze(j,ee)],ee+=gt&7,gt>>>=3){case 16:for(te=3+Ze(j,ee),ee+=2,gt=Lt[Lt.length-1];te-- >0;)Lt.push(gt);break;case 17:for(te=3+at(j,ee),ee+=3;te-- >0;)Lt.push(0);break;case 18:for(te=11+ze(j,ee),ee+=7;te-- >0;)Lt.push(0);break;default:Lt.push(gt),we<gt&&(we=gt);break}var rr=Lt.slice(0,Y),nr=Lt.slice(Y);for(it=Y;it<286;++it)rr[it]=0;for(it=X;it<30;++it)nr[it]=0;return qn=Ft(rr,pt,286),tr=Ft(nr,Dr,30),ee}function Li(j,ee){if(j[0]==3&&!(j[1]&3))return[Su(ee),2];for(var Y=0,X=0,Z=Hw(ee||1<<18),te=0,ye=Z.length>>>0,Re=0,we=0;!(X&1);){if(X=at(j,Y),Y+=3,X>>>1)X>>1==1?(Re=9,we=5):(Y=Tr(j,Y),Re=qn,we=tr);else{Y&7&&(Y+=8-(Y&7));var Ee=j[Y>>>3]|j[(Y>>>3)+1]<<8;if(Y+=32,Ee>0)for(!ee&&ye<te+Ee&&(Z=Et(Z,te+Ee),ye=Z.length);Ee-- >0;)Z[te++]=j[Y>>>3],Y+=8;continue}for(;;){!ee&&ye<te+32767&&(Z=Et(Z,te+32767),ye=Z.length);var Pe=_t(j,Y,Re),Ke=X>>>1==1?It[Pe]:pt[Pe];if(Y+=Ke&15,Ke>>>=4,!(Ke>>>8&255))Z[te++]=Ke;else{if(Ke==256)break;Ke-=257;var it=Ke<8?0:Ke-4>>2;it>5&&(it=0);var gt=te+J[Ke];it>0&&(gt+=_t(j,Y,it),Y+=it),Pe=_t(j,Y,we),Ke=X>>>1==1?Ct[Pe]:Dr[Pe],Y+=Ke&15,Ke>>>=4;var et=Ke<4?0:Ke-2>>1,lt=ae[Ke];for(et>0&&(lt+=_t(j,Y,et),Y+=et),!ee&&ye<gt&&(Z=Et(Z,gt+100),ye=Z.length);te<gt;)Z[te]=Z[te-lt],++te}}}return ee?[Z,Y+7>>>3]:[Z.slice(0,te),Y+7>>>3]}function Kt(j,ee){var Y=j.slice(j.l||0),X=Li(Y,ee);return j.l+=X[1],X[0]}function Qi(j,ee){if(j)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function Er(j,ee){var Y=j;cs(Y,0);var X=[],Z=[],te={FileIndex:X,FullPaths:Z};R(te,{root:ee.root});for(var ye=Y.length-4;(Y[ye]!=80||Y[ye+1]!=75||Y[ye+2]!=5||Y[ye+3]!=6)&&ye>=0;)--ye;Y.l=ye+4,Y.l+=4;var Re=Y.read_shift(2);Y.l+=6;var we=Y.read_shift(4);for(Y.l=we,ye=0;ye<Re;++ye){Y.l+=20;var Ee=Y.read_shift(4),Pe=Y.read_shift(4),Ke=Y.read_shift(2),it=Y.read_shift(2),gt=Y.read_shift(2);Y.l+=8;var et=Y.read_shift(4),lt=o(Y.slice(Y.l+Ke,Y.l+Ke+it));Y.l+=Ke+it+gt;var Lt=Y.l;Y.l=et+4,bn(Y,Ee,Pe,te,lt),Y.l=Lt}return te}function bn(j,ee,Y,X,Z){j.l+=2;var te=j.read_shift(2),ye=j.read_shift(2),Re=a(j);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var we=j.read_shift(4),Ee=j.read_shift(4),Pe=j.read_shift(4),Ke=j.read_shift(2),it=j.read_shift(2),gt="",et=0;et<Ke;++et)gt+=String.fromCharCode(j[j.l++]);if(it){var lt=o(j.slice(j.l,j.l+it));(lt[21589]||{}).mt&&(Re=lt[21589].mt),((Z||{})[21589]||{}).mt&&(Re=Z[21589].mt)}j.l+=it;var Lt=j.slice(j.l,j.l+Ee);switch(ye){case 8:Lt=D(j,Pe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ye)}var rr=!1;te&8&&(we=j.read_shift(4),we==134695760&&(we=j.read_shift(4),rr=!0),Ee=j.read_shift(4),Pe=j.read_shift(4)),Ee!=ee&&Qi(rr,"Bad compressed size: "+ee+" != "+Ee),Pe!=Y&&Qi(rr,"Bad uncompressed size: "+Y+" != "+Pe),mn(X,gt,Lt,{unsafe:!0,mt:Re})}function mi(j,ee){var Y=ee||{},X=[],Z=[],te=Me(1),ye=Y.compression?8:0,Re=0,we=0,Ee=0,Pe=0,Ke=0,it=j.FullPaths[0],gt=it,et=j.FileIndex[0],lt=[],Lt=0;for(we=1;we<j.FullPaths.length;++we)if(gt=j.FullPaths[we].slice(it.length),et=j.FileIndex[we],!(!et.size||!et.content||gt=="Sh33tJ5")){var rr=Pe,nr=Me(gt.length);for(Ee=0;Ee<gt.length;++Ee)nr.write_shift(1,gt.charCodeAt(Ee)&127);nr=nr.slice(0,nr.l),lt[Ke]=s9.buf(et.content,0);var br=et.content;ye==8&&(br=B(br)),te=Me(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,Re),te.write_shift(2,ye),et.mt?s(te,et.mt):te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,br.length),te.write_shift(4,et.content.length),te.write_shift(2,nr.length),te.write_shift(2,0),Pe+=te.length,X.push(te),Pe+=nr.length,X.push(nr),Pe+=br.length,X.push(br),te=Me(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,Re),te.write_shift(2,ye),te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,br.length),te.write_shift(4,et.content.length),te.write_shift(2,nr.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,rr),Lt+=te.l,Z.push(te),Lt+=nr.length,Z.push(nr),++Ke}return te=Me(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,Ke),te.write_shift(2,Ke),te.write_shift(4,Lt),te.write_shift(4,Pe),te.write_shift(2,0),Qn([Qn(X),Qn(Z),te])}var cr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Nt(j,ee){if(j.ctype)return j.ctype;var Y=j.name||"",X=Y.match(/\.([^\.]+)$/);return X&&cr[X[1]]||ee&&(X=(Y=ee).match(/[\.\\]([^\.\\])+$/),X&&cr[X[1]])?cr[X[1]]:"application/octet-stream"}function er(j){for(var ee=ed(j),Y=[],X=0;X<ee.length;X+=76)Y.push(ee.slice(X,X+76));return Y.join(`\r
`)+`\r
`}function Di(j){var ee=j.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ee){var Pe=Ee.charCodeAt(0).toString(16).toUpperCase();return"="+(Pe.length==1?"0"+Pe:Pe)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Y=[],X=ee.split(`\r
`),Z=0;Z<X.length;++Z){var te=X[Z];if(te.length==0){Y.push("");continue}for(var ye=0;ye<te.length;){var Re=76,we=te.slice(ye,ye+Re);we.charAt(Re-1)=="="?Re--:we.charAt(Re-2)=="="?Re-=2:we.charAt(Re-3)=="="&&(Re-=3),we=te.slice(ye,ye+Re),ye+=Re,ye<te.length&&(we+="="),Y.push(we)}}return Y.join(`\r
`)}function Kr(j){for(var ee=[],Y=0;Y<j.length;++Y){for(var X=j[Y];Y<=j.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+j[++Y];ee.push(X)}for(var Z=0;Z<ee.length;++Z)ee[Z]=ee[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return Hs(ee.join(`\r
`))}function Rn(j,ee,Y){for(var X="",Z="",te="",ye,Re=0;Re<10;++Re){var we=ee[Re];if(!we||we.match(/^\s*$/))break;var Ee=we.match(/^(.*?):\s*([^\s].*)$/);if(Ee)switch(Ee[1].toLowerCase()){case"content-location":X=Ee[2].trim();break;case"content-type":te=Ee[2].trim();break;case"content-transfer-encoding":Z=Ee[2].trim();break}}switch(++Re,Z.toLowerCase()){case"base64":ye=Hs(so(ee.slice(Re).join("")));break;case"quoted-printable":ye=Kr(ee.slice(Re));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var Pe=mn(j,X.slice(Y.length),ye,{unsafe:!0});te&&(Pe.ctype=te)}function vi(j,ee){if(Ce(j.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Y=ee&&ee.root||"",X=(lr&&Buffer.isBuffer(j)?j.toString("binary"):Ce(j)).split(`\r
`),Z=0,te="";for(Z=0;Z<X.length;++Z)if(te=X[Z],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),Y||(Y=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,Y.length)!=Y))for(;Y.length>0&&(Y=Y.slice(0,Y.length-1),Y=Y.slice(0,Y.lastIndexOf("/")+1),te.slice(0,Y.length)!=Y););var ye=(X[1]||"").match(/boundary="(.*?)"/);if(!ye)throw new Error("MAD cannot find boundary");var Re="--"+(ye[1]||""),we=[],Ee=[],Pe={FileIndex:we,FullPaths:Ee};R(Pe);var Ke,it=0;for(Z=0;Z<X.length;++Z){var gt=X[Z];gt!==Re&&gt!==Re+"--"||(it++&&Rn(Pe,X.slice(Ke,Z),Y),Ke=Z)}return Pe}function wt(j,ee){var Y=ee||{},X=Y.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],te=j.FullPaths[0],ye=te,Re=j.FileIndex[0],we=1;we<j.FullPaths.length;++we)if(ye=j.FullPaths[we].slice(te.length),Re=j.FileIndex[we],!(!Re.size||!Re.content||ye=="Sh33tJ5")){ye=ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Lt){return"_x"+Lt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Lt){return"_u"+Lt.charCodeAt(0).toString(16)+"_"});for(var Ee=Re.content,Pe=lr&&Buffer.isBuffer(Ee)?Ee.toString("binary"):Ce(Ee),Ke=0,it=Math.min(1024,Pe.length),gt=0,et=0;et<=it;++et)(gt=Pe.charCodeAt(et))>=32&&gt<128&&++Ke;var lt=Ke>=it*4/5;Z.push(X),Z.push("Content-Location: "+(Y.root||"file:///C:/SheetJS/")+ye),Z.push("Content-Transfer-Encoding: "+(lt?"quoted-printable":"base64")),Z.push("Content-Type: "+Nt(Re,ye)),Z.push(""),Z.push(lt?Di(Pe):er(Pe))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function si(j){var ee={};return R(ee,j),ee}function mn(j,ee,Y,X){var Z=X&&X.unsafe;Z||R(j);var te=!Z&&Ir.find(j,ee);if(!te){var ye=j.FullPaths[0];ee.slice(0,ye.length)==ye?ye=ee:(ye.slice(-1)!="/"&&(ye+="/"),ye=(ye+ee).replace("//","/")),te={name:i(ee),type:2},j.FileIndex.push(te),j.FullPaths.push(ye),Z||Ir.utils.cfb_gc(j)}return te.content=Y,te.size=Y?Y.length:0,X&&(X.CLSID&&(te.clsid=X.CLSID),X.mt&&(te.mt=X.mt),X.ct&&(te.ct=X.ct)),te}function Yr(j,ee){R(j);var Y=Ir.find(j,ee);if(Y){for(var X=0;X<j.FileIndex.length;++X)if(j.FileIndex[X]==Y)return j.FileIndex.splice(X,1),j.FullPaths.splice(X,1),!0}return!1}function Hr(j,ee,Y){R(j);var X=Ir.find(j,ee);if(X){for(var Z=0;Z<j.FileIndex.length;++Z)if(j.FileIndex[Z]==X)return j.FileIndex[Z].name=i(Y),j.FullPaths[Z]=Y,!0}return!1}function Ur(j){C(j,!0)}return e.find=b,e.read=ce,e.parse=l,e.write=Fe,e.writeFile=_e,e.utils={cfb_new:si,cfb_add:mn,cfb_del:Yr,cfb_mov:Hr,cfb_gc:Ur,ReadShift:bf,CheckField:yI,prep_blob:cs,bconcat:Qn,use_zlib:E,_deflateRaw:qt,_inflateRaw:Kt,consts:Ne},e}();function a9(r){return typeof r=="string"?gg(r):Array.isArray(r)?kM(r):r}function Nd(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=gg(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?rd(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var i=new Blob([a9(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,r);if(typeof saveAs<"u")return saveAs(i,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:r,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=r,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(r);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Pd(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+r)}function ii(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function Zw(r,e){for(var t=[],n=ii(r),i=0;i!==n.length;++i)t[r[n[i]][e]]==null&&(t[r[n[i]][e]]=n[i]);return t}function V2(r){for(var e=[],t=ii(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function _g(r){for(var e=[],t=ii(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function o9(r){for(var e=[],t=ii(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var gp=new Date(1899,11,30,0,0,0);function Yi(r,e){var t=r.getTime(),n=gp.getTime()+(r.getTimezoneOffset()-gp.getTimezoneOffset())*6e4;return(t-n)/(24*60*60*1e3)}var rI=new Date,c9=gp.getTime()+(rI.getTimezoneOffset()-gp.getTimezoneOffset())*6e4,e5=rI.getTimezoneOffset();function nI(r){var e=new Date;return e.setTime(r*24*60*60*1e3+c9),e.getTimezoneOffset()!==e5&&e.setTime(e.getTime()+(e.getTimezoneOffset()-e5)*6e4),e}var t5=new Date("2017-02-19T19:06:09.000Z"),iI=isNaN(t5.getFullYear())?new Date("2/19/17"):t5,u9=iI.getFullYear()==2017;function Ri(r,e){var t=new Date(r);if(u9)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(iI.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var i=r.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return r.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function yg(r,e){if(lr&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var n=[],i=0;i!=r.length;++i)n.push(String.fromCharCode(r[i]));return n.join("")}function Xi(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Xi(r[t]));return e}function Zr(r,e){for(var t="";t.length<e;)t+=r;return t}function Za(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(n)))?e/t:e}var l9=["january","february","march","april","may","june","july","august","september","october","november","december"];function td(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=r.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&l9.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return n<0||n>8099?t:(i>0||s>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function $t(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return lr?n=po(t):n=LM(t),Ir.utils.cfb_add(r,e,n)}Ir.utils.cfb_add(r,e,t)}else r.file(e,t)}function U2(){return Ir.utils.cfb_new()}var En=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,h9={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},j2=V2(h9),q2=/[&<>'"]/g,f9=/[\u0000-\u0008\u000b-\u001f]/g;function yr(r){var e=r+"";return e.replace(q2,function(t){return j2[t]}).replace(f9,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function r5(r){return yr(r).replace(/ /g,"_x0020_")}var sI=/[\u0000-\u001f]/g;function d9(r){var e=r+"";return e.replace(q2,function(t){return j2[t]}).replace(/\n/g,"<br/>").replace(sI,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function p9(r){var e=r+"";return e.replace(q2,function(t){return j2[t]}).replace(sI,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function g9(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function m9(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function vm(r){for(var e="",t=0,n=0,i=0,s=0,a=0,o=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(i=r.charCodeAt(t++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=r.charCodeAt(t++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function n5(r){var e=Su(2*r.length),t,n,i=1,s=0,a=0,o;for(n=0;n<r.length;n+=i)i=1,(o=r.charCodeAt(n))<128?t=o:o<224?(t=(o&31)*64+(r.charCodeAt(n+1)&63),i=2):o<240?(t=(o&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),i=3):(i=4,t=(o&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function i5(r){return po(r,"binary").toString("utf8")}var p0="foo bar baz",Ef=lr&&(i5(p0)==vm(p0)&&i5||n5(p0)==vm(p0)&&n5)||vm,rd=lr?function(r){return po(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,i=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},v9=function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<r.length;++i)n=n.replace(r[i][0],r[i][1]);return n}}(),aI=/(^\s|\s$|\n)/;function Zn(r,e){return"<"+r+(e.match(aI)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function nd(r){return ii(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function st(r,e,t){return"<"+r+(t!=null?nd(t):"")+(e!=null?(e.match(aI)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function E1(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function _9(r,e){switch(typeof r){case"string":var t=st("vt:lpwstr",yr(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return st((r|0)==r?"vt:i4":"vt:r8",yr(String(r)));case"boolean":return st("vt:bool",r?"true":"false")}if(r instanceof Date)return st("vt:filetime",E1(r));throw new Error("Unable to serialize "+r)}var Mn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Ih=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ls={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function y9(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),i=r[e+6]&15,s=5;s>=0;--s)i=i*256+r[e+s];return n==2047?i==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),t*Math.pow(2,n-52)*i)}function w9(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)r[t+o]=s&255;r[t+6]=(i&15)<<4|s&15,r[t+7]=i>>4|n}var s5=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var i=0,s=r[0][n].length;i<s;i+=t)e.push.apply(e,r[0][n].slice(i,i+t));return e},a5=lr?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:po(e)})):s5(r)}:s5,o5=function(r,e,t){for(var n=[],i=e;i<t;i+=2)n.push(String.fromCharCode(ff(r,i)));return n.join("").replace(Tf,"")},W2=lr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(Tf,""):o5(r,e,t)}:o5,c5=function(r,e,t){for(var n=[],i=e;i<e+t;++i)n.push(("0"+r[i].toString(16)).slice(-2));return n.join("")},oI=lr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):c5(r,e,t)}:c5,u5=function(r,e,t){for(var n=[],i=e;i<t;i++)n.push(String.fromCharCode(Al(r,i)));return n.join("")},Cd=lr?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):u5(e,t,n)}:u5,cI=function(r,e){var t=hs(r,e);return t>0?Cd(r,e+4,e+4+t-1):""},uI=cI,lI=function(r,e){var t=hs(r,e);return t>0?Cd(r,e+4,e+4+t-1):""},hI=lI,fI=function(r,e){var t=2*hs(r,e);return t>0?Cd(r,e+4,e+4+t-1):""},dI=fI,pI=function(e,t){var n=hs(e,t);return n>0?W2(e,t+4,t+4+n):""},gI=pI,mI=function(r,e){var t=hs(r,e);return t>0?Cd(r,e+4,e+4+t):""},vI=mI,_I=function(r,e){return y9(r,e)},mp=_I,z2=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};lr&&(uI=function(e,t){if(!Buffer.isBuffer(e))return cI(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},hI=function(e,t){if(!Buffer.isBuffer(e))return lI(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},dI=function(e,t){if(!Buffer.isBuffer(e))return fI(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},gI=function(e,t){if(!Buffer.isBuffer(e))return pI(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},vI=function(e,t){if(!Buffer.isBuffer(e))return mI(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},mp=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):_I(e,t)},z2=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var Al=function(r,e){return r[e]},ff=function(r,e){return r[e+1]*256+r[e]},x9=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},hs=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},Qc=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},T9=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function bf(r,e){var t="",n,i,s=[],a,o,c,u;switch(e){case"dbcs":if(u=this.l,lr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(c=0;c<r;++c)t+=String.fromCharCode(ff(this,u)),u+=2;r*=2;break;case"utf8":t=Cd(this,this.l,this.l+r);break;case"utf16le":r*=2,t=W2(this,this.l,this.l+r);break;case"wstr":return bf.call(this,r,"dbcs");case"lpstr-ansi":t=uI(this,this.l),r=4+hs(this,this.l);break;case"lpstr-cp":t=hI(this,this.l),r=4+hs(this,this.l);break;case"lpwstr":t=dI(this,this.l),r=4+2*hs(this,this.l);break;case"lpp4":r=4+hs(this,this.l),t=gI(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+hs(this,this.l),t=vI(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(a=Al(this,this.l+r++))!==0;)s.push(h0(a));t=s.join("");break;case"_wstr":for(r=0,t="";(a=ff(this,this.l+r))!==0;)s.push(h0(a)),r+=2;r+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,c=0;c<r;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Al(this,u),this.l=u+1,o=bf.call(this,r-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(h0(ff(this,u))),u+=2}t=s.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,c=0;c!=r;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=Al(this,u),this.l=u+1,o=bf.call(this,r-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(h0(Al(this,u))),u+=1}t=s.join("");break;default:switch(r){case 1:return n=Al(this,this.l),this.l++,n;case 2:return n=(e==="i"?x9:ff)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(r>0?Qc:T9)(this,this.l),this.l+=4,n):(i=hs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return r==8?i=mp(this,this.l):i=mp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;r=8;case 16:t=oI(this,this.l,r);break}}return this.l+=r,t}var E9=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},b9=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},A9=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function I9(r,e,t){var n=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)A9(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(t==="hex"){for(;i<r;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+r,this.length);for(i=0;i<Math.min(e.length,r);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,E9(this,e,this.l);break;case 8:if(n=8,t==="f"){w9(this,e,this.l);break}case 16:break;case-4:n=4,b9(this,e,this.l);break}return this.l+=n,this}function yI(r,e){var t=oI(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function cs(r,e){r.l=e,r.read_shift=bf,r.chk=yI,r.write_shift=I9}function Aa(r,e){r.l+=e}function Me(r){var e=Su(r);return cs(e,0),e}function Gi(){var r=[],e=lr?256:2048,t=function(u){var l=Me(u);return cs(l,0),l},n=t(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(i(),n=t(Math.max(u+1,e)))},a=function(){return i(),Qn(r)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:r}}function He(r,e,t,n){var i=+e,s;if(!isNaN(i)){n||(n=yW[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=r.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&z2(t)&&r.push(t)}}function Af(r,e,t){var n=Xi(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function l5(r,e,t){var n=Xi(r);return n.s=Af(n.s,e.s,t),n.e=Af(n.e,e.s,t),n}function If(r,e){if(r.cRel&&r.c<0)for(r=Xi(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=Xi(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=xr(r);return!r.cRel&&r.cRel!=null&&(t=N9(t)),!r.rRel&&r.rRel!=null&&(t=S9(t)),t}function _m(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+di(r.s.c)+":"+(r.e.cRel?"":"$")+di(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+ri(r.s.r)+":"+(r.e.rRel?"":"$")+ri(r.e.r):If(r.s,e.biff)+":"+If(r.e,e.biff)}function H2(r){return parseInt(P9(r),10)-1}function ri(r){return""+(r+1)}function S9(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function P9(r){return r.replace(/\$(\d+)$/,"$1")}function $2(r){for(var e=C9(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function di(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function N9(r){return r.replace(/^([A-Z])/,"$$$1")}function C9(r){return r.replace(/^\$([A-Z])/,"$1")}function R9(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Bn(r){for(var e=0,t=0,n=0;n<r.length;++n){var i=r.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function xr(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function gs(r){var e=r.indexOf(":");return e==-1?{s:Bn(r),e:Bn(r)}:{s:Bn(r.slice(0,e)),e:Bn(r.slice(e+1))}}function Tn(r,e){return typeof e>"u"||typeof e=="number"?Tn(r.s,r.e):(typeof r!="string"&&(r=xr(r)),typeof e!="string"&&(e=xr(e)),r==e?r:r+":"+e)}function Vr(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,i=0,s=r.length;for(t=0;n<s&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.s.c=--t,t=0;n<s&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;if(e.s.r=--t,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=s&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.e.c=--t,t=0;n!=s&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;return e.e.r=--t,e}function h5(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=dc(r.z,t?Yi(e):e)}catch{}try{return r.w=dc((r.XF||{}).numFmtId||(t?14:0),t?Yi(e):e)}catch{return""+e}}function ao(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?Rd[r.v]||r.v:e==null?h5(r,r.v):h5(r,e))}function Ou(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function wI(r,e,t){var n=t||{},i=r?Array.isArray(r):n.dense,s=r||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Bn(n.origin):n.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var l=Vr(s["!ref"]);u.s.c=l.s.c,u.s.r=l.s.r,u.e.c=Math.max(u.e.c,l.e.c),u.e.r=Math.max(u.e.r,l.e.r),a==-1&&(u.e.r=a=l.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},w=a+d,_=o+g;if(u.s.r>w&&(u.s.r=w),u.s.c>_&&(u.s.c=_),u.e.r<w&&(u.e.r=w),u.e.c<_&&(u.e.c=_),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||tn[14],n.cellDates?(p.t="d",p.w=dc(p.z,Yi(p.v))):(p.t="n",p.v=Yi(p.v),p.w=dc(p.z,p.v))):p.t="s";if(i)s[w]||(s[w]=[]),s[w][_]&&s[w][_].z&&(p.z=s[w][_].z),s[w][_]=p;else{var T=xr({c:_,r:w});s[T]&&s[T].z&&(p.z=s[T].z),s[T]=p}}}return u.s.c<1e7&&(s["!ref"]=Tn(u)),s}function Sh(r,e){return wI(null,r,e)}function k9(r){return r.read_shift(4,"i")}function Gs(r,e){return e||(e=Me(4)),e.write_shift(4,r),e}function pi(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function Vn(r,e){var t=!1;return e==null&&(t=!0,e=Me(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function L9(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function D9(r,e){return e||(e=Me(4)),e.write_shift(2,0),e.write_shift(2,0),e}function G2(r,e){var t=r.l,n=r.read_shift(1),i=pi(r),s=[],a={t:i,h:i};if(n&1){for(var o=r.read_shift(4),c=0;c!=o;++c)s.push(L9(r));a.r=s}else a.r=[{ich:0,ifnt:0}];return r.l=t+e,a}function F9(r,e){var t=!1;return e==null&&(t=!0,e=Me(15+4*r.t.length)),e.write_shift(1,0),Vn(r.t,e),t?e.slice(0,e.l):e}var O9=G2;function M9(r,e){var t=!1;return e==null&&(t=!0,e=Me(23+4*r.t.length)),e.write_shift(1,1),Vn(r.t,e),e.write_shift(4,1),D9({},e),t?e.slice(0,e.l):e}function Ns(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function Mu(r,e){return e==null&&(e=Me(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function Bu(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function Vu(r,e){return e==null&&(e=Me(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var B9=pi,xI=Vn;function K2(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function vp(r,e){var t=!1;return e==null&&(t=!0,e=Me(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var V9=pi,b1=K2,Y2=vp;function TI(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var i=n===0?mp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Qc(e,0)>>2;return t?i/100:i}function EI(r,e){e==null&&(e=Me(4));var t=0,n=0,i=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?i:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function bI(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function U9(r,e){return e||(e=Me(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var Uu=bI,Ph=U9;function Nh(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function Pu(r,e){return(e||Me(8)).write_shift(8,r,"f")}function j9(r){var e={},t=r.read_shift(1),n=t>>>1,i=r.read_shift(1),s=r.read_shift(2,"i"),a=r.read_shift(1),o=r.read_shift(1),c=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=X9[i];u&&(e.rgb=T5(u));break;case 2:e.rgb=T5([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function _p(r,e){if(e||(e=Me(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function q9(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function W9(r,e){e||(e=Me(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var AI=2,os=3,g0=11,yp=19,m0=64,z9=65,H9=71,$9=4108,G9=4126,Yn=80,f5={1:{n:"CodePage",t:AI},2:{n:"Category",t:Yn},3:{n:"PresentationFormat",t:Yn},4:{n:"ByteCount",t:os},5:{n:"LineCount",t:os},6:{n:"ParagraphCount",t:os},7:{n:"SlideCount",t:os},8:{n:"NoteCount",t:os},9:{n:"HiddenCount",t:os},10:{n:"MultimediaClipCount",t:os},11:{n:"ScaleCrop",t:g0},12:{n:"HeadingPairs",t:$9},13:{n:"TitlesOfParts",t:G9},14:{n:"Manager",t:Yn},15:{n:"Company",t:Yn},16:{n:"LinksUpToDate",t:g0},17:{n:"CharacterCount",t:os},19:{n:"SharedDoc",t:g0},22:{n:"HyperlinksChanged",t:g0},23:{n:"AppVersion",t:os,p:"version"},24:{n:"DigSig",t:z9},26:{n:"ContentType",t:Yn},27:{n:"ContentStatus",t:Yn},28:{n:"Language",t:Yn},29:{n:"Version",t:Yn},255:{},2147483648:{n:"Locale",t:yp},2147483651:{n:"Behavior",t:yp},1919054434:{}},d5={1:{n:"CodePage",t:AI},2:{n:"Title",t:Yn},3:{n:"Subject",t:Yn},4:{n:"Author",t:Yn},5:{n:"Keywords",t:Yn},6:{n:"Comments",t:Yn},7:{n:"Template",t:Yn},8:{n:"LastAuthor",t:Yn},9:{n:"RevNumber",t:Yn},10:{n:"EditTime",t:m0},11:{n:"LastPrinted",t:m0},12:{n:"CreatedDate",t:m0},13:{n:"ModifiedDate",t:m0},14:{n:"PageCount",t:os},15:{n:"WordCount",t:os},16:{n:"CharCount",t:os},17:{n:"Thumbnail",t:H9},18:{n:"Application",t:Yn},19:{n:"DocSecurity",t:os},255:{},2147483648:{n:"Locale",t:yp},2147483651:{n:"Behavior",t:yp},1919054434:{}};function K9(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var Y9=K9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),X9=Xi(Y9),Rd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},J9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},v0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function II(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function SI(r,e){var t=o9(J9),n=[],i;n[n.length]=En,n[n.length]=st("Types",null,{xmlns:Mn.CT,"xmlns:xsd":Mn.xsd,"xmlns:xsi":Mn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return st("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){r[c]&&r[c].length>0&&(i=r[c][0],n[n.length]=st("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:v0[c][e.bookType]||v0[c].xlsx}))},a=function(c){(r[c]||[]).forEach(function(u){n[n.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:v0[c][e.bookType]||v0[c].xlsx})})},o=function(c){(r[c]||[]).forEach(function(u){n[n.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[c][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ar={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function PI(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function Ul(r){var e=[En,st("Relationships",null,{xmlns:Mn.RELS})];return ii(r["!id"]).forEach(function(t){e[e.length]=st("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function vr(r,e,t,n,i,s){if(i||(i={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=t,[ar.HLINK,ar.XPATH,ar.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),r["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][i.Id]=i,r[("/"+i.Target).replace("//","/")]=i,e}function Q9(r){var e=[En];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function p5(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function Z9(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function eB(r){var e=[En];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(p5(r[t][0],r[t][1])),e.push(Z9("",r[t][0]));return e.push(p5("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function NI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+lp.version+"</meta:generator></office:meta></office:document-meta>"}var cu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function ym(r,e,t,n,i){i[r]!=null||e==null||e===""||(i[r]=e,e=yr(e),n[n.length]=t?st(r,e,t):Zn(r,e))}function CI(r,e){var t=e||{},n=[En,st("cp:coreProperties",null,{"xmlns:cp":Mn.CORE_PROPS,"xmlns:dc":Mn.dc,"xmlns:dcterms":Mn.dcterms,"xmlns:dcmitype":Mn.dcmitype,"xmlns:xsi":Mn.xsi})],i={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&ym("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:E1(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),r.ModifiedDate!=null&&ym("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:E1(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=cu.length;++s){var a=cu[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:r?r[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&ym(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var jl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],RI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function kI(r){var e=[],t=st;return r||(r={}),r.Application="SheetJS",e[e.length]=En,e[e.length]=st("Properties",null,{xmlns:Mn.EXT_PROPS,"xmlns:vt":Mn.vt}),jl.forEach(function(n){if(r[n[1]]!==void 0){var i;switch(n[2]){case"string":i=yr(String(r[n[1]]));break;case"bool":i=r[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(n[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+yr(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function LI(r){var e=[En,st("Properties",null,{xmlns:Mn.CUST_PROPS,"xmlns:vt":Mn.vt})];if(!r)return e.join("");var t=1;return ii(r).forEach(function(i){++t,e[e.length]=st("property",_9(r[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:yr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var g5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function tB(r,e){var t=[];return ii(g5).map(function(n){for(var i=0;i<cu.length;++i)if(cu[i][1]==n)return cu[i];for(i=0;i<jl.length;++i)if(jl[i][1]==n)return jl[i];throw n}).forEach(function(n){if(r[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Zn(g5[n[1]]||n[1],i))}}),st("DocumentProperties",t.join(""),{xmlns:ls.o})}function rB(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return r&&ii(r).forEach(function(s){if(Object.prototype.hasOwnProperty.call(r,s)){for(var a=0;a<cu.length;++a)if(s==cu[a][1])return;for(a=0;a<jl.length;++a)if(s==jl[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=r[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(st(r5(s),o,{"dt:dt":c}))}}),e&&ii(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(r&&Object.prototype.hasOwnProperty.call(r,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(st(r5(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ls.o+'">'+i.join("")+"</"+n+">"}function nB(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),i=(t-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Me(8);return a.write_shift(4,n),a.write_shift(4,i),a}function m5(r,e){var t=Me(4),n=Me(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=Me(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=nB(e);break;case 31:case 80:for(n=Me(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return Qn([t,n])}var DI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function iB(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function v5(r,e,t){var n=Me(8),i=[],s=[],a=8,o=0,c=Me(8),u=Me(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),a+=8+c.length,!e){u=Me(8),u.write_shift(4,0),i.unshift(u);var l=[Me(4)];for(l[0].write_shift(4,r.length),o=0;o<r.length;++o){var d=r[o][0];for(c=Me(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);l.push(c)}c=Qn(l),s.unshift(c),a+=8+c.length}for(o=0;o<r.length;++o)if(!(e&&!e[r[o][0]])&&!(DI.indexOf(r[o][0])>-1||RI.indexOf(r[o][0])>-1)&&r[o][1]!=null){var g=r[o][1],p=0;if(e){p=+e[r[o][0]];var w=t[p];if(w.p=="version"&&typeof g=="string"){var _=g.split(".");g=(+_[0]<<16)+(+_[1]||0)}c=m5(w.t,g)}else{var T=iB(g);T==-1&&(T=31,g=String(g)),c=m5(T,g)}s.push(c),u=Me(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+c.length}var P=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,P),P+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),Qn([n].concat(i).concat(s))}function _5(r,e,t,n,i,s){var a=Me(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Ir.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=v5(r,t,n);if(o.push(c),i){var u=v5(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(u)}return Qn(o)}function sB(r,e){e||(e=Me(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function aB(r,e){return r.read_shift(e)===1}function Ii(r,e){return e||(e=Me(2)),e.write_shift(2,+!!r),e}function FI(r){return r.read_shift(2,"u")}function As(r,e){return e||(e=Me(2)),e.write_shift(2,r),e}function OI(r,e,t){return t||(t=Me(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function MI(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=r.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=n?r.read_shift(n,i):"";return a}function oB(r){var e=r.t||"",t=Me(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=Me(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[t,n];return Qn(i)}function cB(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var i=r.read_shift(1);return i===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function uB(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):cB(r,n,t)}function lB(r,e,t){if(t.biff>5)return uB(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function BI(r,e,t){return t||(t=Me(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function y5(r,e){e||(e=Me(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function hB(r){var e=Me(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)n=n.slice(1),y5(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&y5(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),t=0;t<n.length-3*c;++t)e.write_shift(1,n.charCodeAt(t+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Nu(r,e,t,n){return n||(n=Me(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function fB(r,e,t){var n=t.biff>8?4:2,i=r.read_shift(n),s=r.read_shift(n,"i"),a=r.read_shift(n,"i");return[i,s,a]}function dB(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),i=r.read_shift(2);return{s:{c:n,r:e},e:{c:i,r:t}}}function VI(r,e){return e||(e=Me(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function X2(r,e,t){var n=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Me(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function pB(r,e){var t=!e||e.biff==8,n=Me(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function gB(r,e){var t=!e||e.biff>=8?2:1,n=Me(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function mB(r,e){var t=Me(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],i=0;i<r.length;++i)n[i]=oB(r[i]);var s=Qn([t].concat(n));return s.parts=[t.length].concat(n.map(function(a){return a.length})),s}function vB(){var r=Me(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function _B(r){var e=Me(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function yB(r,e){var t=r.name||"Arial",n=e&&e.biff==5,i=n?15+t.length:16+2*t.length,s=Me(i);return s.write_shift(2,r.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),s}function wB(r,e,t,n){var i=Me(10);return Nu(r,e,n,i),i.write_shift(4,t),i}function xB(r,e,t,n,i){var s=!i||i.biff==8,a=Me(8+ +s+(1+s)*t.length);return Nu(r,e,n,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function TB(r,e,t,n){var i=t&&t.biff==5;n||(n=Me(i?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function EB(r,e){var t=e.biff==8||!e.biff?4:2,n=Me(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function w5(r,e,t,n){var i=t&&t.biff==5;n||(n=Me(i?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var s=0;return r.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function bB(r){var e=Me(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function AB(r,e,t,n,i,s){var a=Me(8);return Nu(r,e,n,a),OI(t,s,a),a}function IB(r,e,t,n){var i=Me(14);return Nu(r,e,n,i),Pu(t,i),i}function SB(r,e,t){if(t.biff<8)return PB(r,e,t);for(var n=[],i=r.l+e,s=r.read_shift(t.biff>8?4:2);s--!==0;)n.push(fB(r,t.biff>8?12:6,t));if(r.l!=i)throw new Error("Bad ExternSheet: "+r.l+" != "+i);return n}function PB(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=MI(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function NB(r){var e=Me(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)VI(r[t],e);return e}function CB(r){var e=Me(24),t=Bn(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Qn([e,hB(r[1])])}function RB(r){var e=r[1].Tooltip,t=Me(10+2*(e.length+1));t.write_shift(2,2048);var n=Bn(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function kB(r){return r||(r=Me(4)),r.write_shift(2,1),r.write_shift(2,1),r}function LB(r,e,t){if(!t.cellStyles)return Aa(r,e);var n=t&&t.biff>=12?4:2,i=r.read_shift(n),s=r.read_shift(n),a=r.read_shift(n),o=r.read_shift(n),c=r.read_shift(2);n==2&&(r.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:c};return(t.biff>=5||!t.biff)&&(u.level=c>>8&7),u}function DB(r,e){var t=Me(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function FB(r){for(var e=Me(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function OB(r,e,t){var n=Me(15);return Ld(n,r,e),n.write_shift(8,t,"f"),n}function MB(r,e,t){var n=Me(9);return Ld(n,r,e),n.write_shift(2,t),n}var BB=function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=V2({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,c){var u=[],l=Su(1);switch(c.type){case"base64":l=Hs(so(o));break;case"binary":l=Hs(o);break;case"buffer":case"array":l=o;break}cs(l,0);var d=l.read_shift(1),g=!!(d&136),p=!1,w=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:w=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var _=0,T=521;d==2&&(_=l.read_shift(2)),l.l+=3,d!=2&&(_=l.read_shift(4)),_>1048576&&(_=1e6),d!=2&&(T=l.read_shift(2));var P=l.read_shift(2),L=c.codepage||1252;d!=2&&(l.l+=16,l.read_shift(1),l[l.l]!==0&&(L=r[l[l.l]]),l.l+=1,l.l+=2),w&&(l.l+=36);for(var F=[],K={},se=Math.min(l.length,d==2?521:T-10-(p?264:0)),ce=w?32:11;l.l<se&&l[l.l]!=13;)switch(K={},K.name=hp.utils.decode(L,l.slice(l.l,l.l+ce)).replace(/[\u0000\r\n].*$/g,""),l.l+=ce,K.type=String.fromCharCode(l.read_shift(1)),d!=2&&!w&&(K.offset=l.read_shift(4)),K.len=l.read_shift(1),d==2&&(K.offset=l.read_shift(2)),K.dec=l.read_shift(1),K.name.length&&F.push(K),d!=2&&(l.l+=w?13:14),K.type){case"B":(!p||K.len!=8)&&c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+K.type)}if(l[l.l]!==13&&(l.l=T-1),l.read_shift(1)!==13)throw new Error("DBF Terminator not found "+l.l+" "+l[l.l]);l.l=T;var R=0,A=0;for(u[0]=[],A=0;A!=F.length;++A)u[0][A]=F[A].name;for(;_-- >0;){if(l[l.l]===42){l.l+=P;continue}for(++l.l,u[++R]=[],A=0,A=0;A!=F.length;++A){var C=l.slice(l.l,l.l+F[A].len);l.l+=F[A].len,cs(C,0);var V=hp.utils.decode(L,C);switch(F[A].type){case"C":V.trim().length&&(u[R][A]=V.replace(/\s+$/,""));break;case"D":V.length===8?u[R][A]=new Date(+V.slice(0,4),+V.slice(4,6)-1,+V.slice(6,8)):u[R][A]=V;break;case"F":u[R][A]=parseFloat(V.trim());break;case"+":case"I":u[R][A]=w?C.read_shift(-4,"i")^2147483648:C.read_shift(4,"i");break;case"L":switch(V.trim().toUpperCase()){case"Y":case"T":u[R][A]=!0;break;case"N":case"F":u[R][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+V+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[R][A]="##MEMO##"+(w?parseInt(V.trim(),10):C.read_shift(4));break;case"N":V=V.replace(/\u0000/g,"").trim(),V&&V!="."&&(u[R][A]=+V||0);break;case"@":u[R][A]=new Date(C.read_shift(-8,"f")-621356832e5);break;case"T":u[R][A]=new Date((C.read_shift(4)-2440588)*864e5+C.read_shift(4));break;case"Y":u[R][A]=C.read_shift(4,"i")/1e4+C.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[R][A]=-C.read_shift(-8,"f");break;case"B":if(p&&F[A].len==8){u[R][A]=C.read_shift(8,"f");break}case"G":case"P":C.l+=F[A].len;break;case"0":if(F[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+F[A].type)}}}if(d!=2&&l.l<l.length&&l[l.l++]!=26)throw new Error("DBF EOF Marker missing "+(l.l-1)+" of "+l.length+" "+l[l.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=F,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var l=Sh(t(o,u),u);return l["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,l}function i(o,c){try{return Ou(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var u=c||{};if(+u.codepage>=0&&Zf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var l=Gi(),d=bp(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),w=o["!cols"]||[],_=0,T=0,P=0,L=1;for(_=0;_<g.length;++_){if(((w[_]||{}).DBF||{}).name){g[_]=w[_].DBF.name,++P;continue}if(g[_]!=null){if(++P,typeof g[_]=="number"&&(g[_]=g[_].toString(10)),typeof g[_]!="string")throw new Error("DBF Invalid column name "+g[_]+" |"+typeof g[_]+"|");if(g.indexOf(g[_])!==_){for(T=0;T<1024;++T)if(g.indexOf(g[_]+"_"+T)==-1){g[_]+="_"+T;break}}}}var F=Vr(o["!ref"]),K=[],se=[],ce=[];for(_=0;_<=F.e.c-F.s.c;++_){var R="",A="",C=0,V=[];for(T=0;T<p.length;++T)p[T][_]!=null&&V.push(p[T][_]);if(V.length==0||g[_]==null){K[_]="?";continue}for(T=0;T<V.length;++T){switch(typeof V[T]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=V[T]instanceof Date?"D":"C";break;default:A="C"}C=Math.max(C,String(V[T]).length),R=R&&R!=A?"C":A}C>250&&(C=250),A=((w[_]||{}).DBF||{}).type,A=="C"&&w[_].DBF.len>C&&(C=w[_].DBF.len),R=="B"&&A=="N"&&(R="N",ce[_]=w[_].DBF.dec,C=w[_].DBF.len),se[_]=R=="C"||A=="N"?C:s[R]||0,L+=se[_],K[_]=R}var b=l.next(32);for(b.write_shift(4,318902576),b.write_shift(4,p.length),b.write_shift(2,296+32*P),b.write_shift(2,L),_=0;_<4;++_)b.write_shift(4,0);for(b.write_shift(4,0|(+e[jA]||3)<<8),_=0,T=0;_<g.length;++_)if(g[_]!=null){var S=l.next(32),k=(g[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,k,"sbcs"),S.write_shift(1,K[_]=="?"?"C":K[_],"sbcs"),S.write_shift(4,T),S.write_shift(1,se[_]||s[K[_]]||0),S.write_shift(1,ce[_]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),T+=se[_]||s[K[_]]||0}var ie=l.next(264);for(ie.write_shift(4,13),_=0;_<65;++_)ie.write_shift(4,0);for(_=0;_<p.length;++_){var ve=l.next(L);for(ve.write_shift(1,0),T=0;T<g.length;++T)if(g[T]!=null)switch(K[T]){case"L":ve.write_shift(1,p[_][T]==null?63:p[_][T]?84:70);break;case"B":ve.write_shift(8,p[_][T]||0,"f");break;case"N":var Te="0";for(typeof p[_][T]=="number"&&(Te=p[_][T].toFixed(ce[T]||0)),P=0;P<se[T]-Te.length;++P)ve.write_shift(1,32);ve.write_shift(1,Te,"sbcs");break;case"D":p[_][T]?(ve.write_shift(4,("0000"+p[_][T].getFullYear()).slice(-4),"sbcs"),ve.write_shift(2,("00"+(p[_][T].getMonth()+1)).slice(-2),"sbcs"),ve.write_shift(2,("00"+p[_][T].getDate()).slice(-2),"sbcs")):ve.write_shift(8,"00000000","sbcs");break;case"C":var Ne=String(p[_][T]!=null?p[_][T]:"").slice(0,se[T]);for(ve.write_shift(1,Ne,"sbcs"),P=0;P<se[T]-Ne.length;++P)ve.write_shift(1,32);break}}return l.next(1).write_shift(1,26),l.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),VB=function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ii(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var w=r[p];return typeof w=="number"?zw(w):w},n=function(g,p,w){var _=p.charCodeAt(0)-32<<4|w.charCodeAt(0)-48;return _==59?g:zw(_)};r["|"]=254;function i(g,p){switch(p.type){case"base64":return s(so(g),p);case"binary":return s(g,p);case"buffer":return s(lr&&Buffer.isBuffer(g)?g.toString("binary"):Pd(g),p);case"array":return s(yg(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var w=g.split(/[\n\r]+/),_=-1,T=-1,P=0,L=0,F=[],K=[],se=null,ce={},R=[],A=[],C=[],V=0,b;for(+p.codepage>=0&&Zf(+p.codepage);P!==w.length;++P){V=0;var S=w[P].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),k=S.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),ie=k[0],ve;if(S.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":k[1].charAt(0)=="P"&&K.push(S.slice(3).replace(/;;/g,";"));break;case"C":var Te=!1,Ne=!1,_e=!1,Ce=!1,Fe=-1,nt=-1;for(L=1;L<k.length;++L)switch(k[L].charAt(0)){case"A":break;case"X":T=parseInt(k[L].slice(1))-1,Ne=!0;break;case"Y":for(_=parseInt(k[L].slice(1))-1,Ne||(T=0),b=F.length;b<=_;++b)F[b]=[];break;case"K":ve=k[L].slice(1),ve.charAt(0)==='"'?ve=ve.slice(1,ve.length-1):ve==="TRUE"?ve=!0:ve==="FALSE"?ve=!1:isNaN(Za(ve))?isNaN(td(ve).getDate())||(ve=Ri(ve)):(ve=Za(ve),se!==null&&ZA(se)&&(ve=nI(ve))),Te=!0;break;case"E":Ce=!0;var E=MV(k[L].slice(1),{r:_,c:T});F[_][T]=[F[_][T],E];break;case"S":_e=!0,F[_][T]=[F[_][T],"S5S"];break;case"G":break;case"R":Fe=parseInt(k[L].slice(1))-1;break;case"C":nt=parseInt(k[L].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}if(Te&&(F[_][T]&&F[_][T].length==2?F[_][T][0]=ve:F[_][T]=ve,se=null),_e){if(Ce)throw new Error("SYLK shared formula cannot have own formula");var D=Fe>-1&&F[Fe][nt];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");F[_][T][1]=BV(D[1],{r:_-Fe,c:T-nt})}break;case"F":var B=0;for(L=1;L<k.length;++L)switch(k[L].charAt(0)){case"X":T=parseInt(k[L].slice(1))-1,++B;break;case"Y":for(_=parseInt(k[L].slice(1))-1,b=F.length;b<=_;++b)F[b]=[];break;case"M":V=parseInt(k[L].slice(1))/20;break;case"F":break;case"G":break;case"P":se=K[parseInt(k[L].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(C=k[L].slice(1).split(" "),b=parseInt(C[0],10);b<=parseInt(C[1],10);++b)V=parseInt(C[2],10),A[b-1]=V===0?{hidden:!0}:{wch:V},J2(A[b-1]);break;case"C":T=parseInt(k[L].slice(1))-1,A[T]||(A[T]={});break;case"R":_=parseInt(k[L].slice(1))-1,R[_]||(R[_]={}),V>0?(R[_].hpt=V,R[_].hpx=zI(V)):V===0&&(R[_].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}B<1&&(se=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}}return R.length>0&&(ce["!rows"]=R),A.length>0&&(ce["!cols"]=A),p&&p.sheetRows&&(F=F.slice(0,p.sheetRows)),[F,ce]}function a(g,p){var w=i(g,p),_=w[0],T=w[1],P=Sh(_,p);return ii(T).forEach(function(L){P[L]=T[L]}),P}function o(g,p){return Ou(a(g,p),p)}function c(g,p,w,_){var T="C;Y"+(w+1)+";X"+(_+1)+";K";switch(g.t){case"n":T+=g.v||0,g.f&&!g.F&&(T+=";E"+Z2(g.f,{r:w,c:_}));break;case"b":T+=g.v?"TRUE":"FALSE";break;case"e":T+=g.w||g.v;break;case"d":T+='"'+(g.w||g.v)+'"';break;case"s":T+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return T}function u(g,p){p.forEach(function(w,_){var T="F;W"+(_+1)+" "+(_+1)+" ";w.hidden?T+="0":(typeof w.width=="number"&&!w.wpx&&(w.wpx=wp(w.width)),typeof w.wpx=="number"&&!w.wch&&(w.wch=xp(w.wpx)),typeof w.wch=="number"&&(T+=Math.round(w.wch))),T.charAt(T.length-1)!=" "&&g.push(T)})}function l(g,p){p.forEach(function(w,_){var T="F;";w.hidden?T+="M0;":w.hpt?T+="M"+20*w.hpt+";":w.hpx&&(T+="M"+20*Tp(w.hpx)+";"),T.length>2&&g.push(T+"R"+(_+1))})}function d(g,p){var w=["ID;PWXL;N;E"],_=[],T=Vr(g["!ref"]),P,L=Array.isArray(g),F=`\r
`;w.push("P;PGeneral"),w.push("F;P0;DG0G8;M255"),g["!cols"]&&u(w,g["!cols"]),g["!rows"]&&l(w,g["!rows"]),w.push("B;Y"+(T.e.r-T.s.r+1)+";X"+(T.e.c-T.s.c+1)+";D"+[T.s.c,T.s.r,T.e.c,T.e.r].join(" "));for(var K=T.s.r;K<=T.e.r;++K)for(var se=T.s.c;se<=T.e.c;++se){var ce=xr({r:K,c:se});P=L?(g[K]||[])[se]:g[ce],!(!P||P.v==null&&(!P.f||P.F))&&_.push(c(P,g,K,se))}return w.join(F)+F+_.join(F)+F+"E"+F}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),UB=function(){function r(s,a){switch(a.type){case"base64":return e(so(s),a);case"binary":return e(s,a);case"buffer":return e(lr&&Buffer.isBuffer(s)?s.toString("binary"):Pd(s),a);case"array":return e(yg(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),c=-1,u=-1,l=0,d=[];l!==o.length;++l){if(o[l].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var g=o[l].trim().split(","),p=g[0],w=g[1];++l;for(var _=o[l]||"";(_.match(/["]/g)||[]).length&1&&l<o.length-1;)_+=`
`+o[++l];switch(_=_.trim(),+p){case-1:if(_==="BOT"){d[++c]=[],u=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?d[c][u]=!0:_==="FALSE"?d[c][u]=!1:isNaN(Za(w))?isNaN(td(w).getDate())?d[c][u]=w:d[c][u]=Ri(w):d[c][u]=Za(w),++u;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),d[c][u++]=_!==""?_:null;break}if(_==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return Sh(r(s,a),a)}function n(s,a){return Ou(t(s,a),a)}var i=function(){var s=function(c,u,l,d,g){c.push(u),c.push(l+","+d),c.push('"'+g.replace(/"/g,'""')+'"')},a=function(c,u,l,d){c.push(u+","+l),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],l=Vr(c["!ref"]),d,g=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,l.e.r-l.s.r+1,""),s(u,"TUPLES",0,l.e.c-l.s.c+1,""),s(u,"DATA",0,0,"");for(var p=l.s.r;p<=l.e.r;++p){a(u,-1,0,"BOT");for(var w=l.s.c;w<=l.e.c;++w){var _=xr({r:p,c:w});if(d=g?(c[p]||[])[w]:c[_],!d){a(u,1,0,"");continue}switch(d.t){case"n":var T=d.w;!T&&d.v!=null&&(T=d.v),T==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,T,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=dc(d.z||tn[14],Yi(Ri(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var P=`\r
`,L=u.join(P);return L}}();return{to_workbook:n,to_sheet:t,from_sheet:i}}(),UI=function(){function r(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),w=-1,_=-1,T=0,P=[];T!==p.length;++T){var L=p[T].trim().split(":");if(L[0]==="cell"){var F=Bn(L[1]);if(P.length<=F.r)for(w=P.length;w<=F.r;++w)P[w]||(P[w]=[]);switch(w=F.r,_=F.c,L[2]){case"t":P[w][_]=r(L[3]);break;case"v":P[w][_]=+L[3];break;case"vtf":var K=L[L.length-1];case"vtc":switch(L[3]){case"nl":P[w][_]=!!+L[4];break;default:P[w][_]=+L[4];break}L[2]=="vtf"&&(P[w][_]=[P[w][_],K])}}}return g&&g.sheetRows&&(P=P.slice(0,g.sheetRows)),P}function n(d,g){return Sh(t(d,g),g)}function i(d,g){return Ou(n(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],w,_="",T=gs(d["!ref"]),P=Array.isArray(d),L=T.s.r;L<=T.e.r;++L)for(var F=T.s.c;F<=T.e.c;++F)if(_=xr({r:L,c:F}),w=P?(d[L]||[])[F]:d[_],!(!w||w.v==null||w.t==="z")){switch(p=["cell",_,"t"],w.t){case"s":case"str":p.push(e(w.v));break;case"n":w.f?(p[2]="vtf",p[3]="n",p[4]=w.v,p[5]=e(w.f)):(p[2]="v",p[3]=w.v);break;case"b":p[2]="vt"+(w.f?"f":"c"),p[3]="nl",p[4]=w.v?"1":"0",p[5]=e(w.f||(w.v?"TRUE":"FALSE"));break;case"d":var K=Yi(Ri(w.v));p[2]="vtc",p[3]="nd",p[4]=""+K,p[5]=w.w||dc(w.z||tn[14],K);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(T.e.c-T.s.c+1)+":r:"+(T.e.r-T.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function l(d){return[s,a,o,a,u(d),c].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:l}}(),jB=function(){function r(l,d,g,p,w){w.raw?d[g][p]=l:l===""||(l==="TRUE"?d[g][p]=!0:l==="FALSE"?d[g][p]=!1:isNaN(Za(l))?isNaN(td(l).getDate())?d[g][p]=l:d[g][p]=Ri(l):d[g][p]=Za(l))}function e(l,d){var g=d||{},p=[];if(!l||l.length===0)return p;for(var w=l.split(/[\r\n]/),_=w.length-1;_>=0&&w[_].length===0;)--_;for(var T=10,P=0,L=0;L<=_;++L)P=w[L].indexOf(" "),P==-1?P=w[L].length:P++,T=Math.max(T,P);for(L=0;L<=_;++L){p[L]=[];var F=0;for(r(w[L].slice(0,T).trim(),p,L,F,g),F=1;F<=(w[L].length-T)/10+1;++F)r(w[L].slice(T+(F-1)*10,T+F*10).trim(),p,L,F,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(l){for(var d={},g=!1,p=0,w=0;p<l.length;++p)(w=l.charCodeAt(p))==34?g=!g:!g&&w in t&&(d[w]=(d[w]||0)+1);w=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&w.push([d[p],p]);if(!w.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&w.push([d[p],p])}return w.sort(function(_,T){return _[0]-T[0]||n[_[1]]-n[T[1]]}),t[w.pop()[1]]||44}function s(l,d){var g=d||{},p="",w=g.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};l.slice(0,4)=="sep="?l.charCodeAt(5)==13&&l.charCodeAt(6)==10?(p=l.charAt(4),l=l.slice(7)):l.charCodeAt(5)==13||l.charCodeAt(5)==10?(p=l.charAt(4),l=l.slice(6)):p=i(l.slice(0,1024)):g&&g.FS?p=g.FS:p=i(l.slice(0,1024));var T=0,P=0,L=0,F=0,K=0,se=p.charCodeAt(0),ce=!1,R=0,A=l.charCodeAt(0);l=l.replace(/\r\n/mg,`
`);var C=g.dateNF!=null?n9(g.dateNF):null;function V(){var b=l.slice(F,K),S={};if(b.charAt(0)=='"'&&b.charAt(b.length-1)=='"'&&(b=b.slice(1,-1).replace(/""/g,'"')),b.length===0)S.t="z";else if(g.raw)S.t="s",S.v=b;else if(b.trim().length===0)S.t="s",S.v=b;else if(b.charCodeAt(0)==61)b.charCodeAt(1)==34&&b.charCodeAt(b.length-1)==34?(S.t="s",S.v=b.slice(2,-1).replace(/""/g,'"')):VV(b)?(S.t="n",S.f=b.slice(1)):(S.t="s",S.v=b);else if(b=="TRUE")S.t="b",S.v=!0;else if(b=="FALSE")S.t="b",S.v=!1;else if(!isNaN(L=Za(b)))S.t="n",g.cellText!==!1&&(S.w=b),S.v=L;else if(!isNaN(td(b).getDate())||C&&b.match(C)){S.z=g.dateNF||tn[14];var k=0;C&&b.match(C)&&(b=i9(b,g.dateNF,b.match(C)||[]),k=1),g.cellDates?(S.t="d",S.v=Ri(b,k)):(S.t="n",S.v=Yi(Ri(b,k))),g.cellText!==!1&&(S.w=dc(S.z,S.v instanceof Date?Yi(S.v):S.v)),g.cellNF||delete S.z}else S.t="s",S.v=b;if(S.t=="z"||(g.dense?(w[T]||(w[T]=[]),w[T][P]=S):w[xr({c:P,r:T})]=S),F=K+1,A=l.charCodeAt(F),_.e.c<P&&(_.e.c=P),_.e.r<T&&(_.e.r=T),R==se)++P;else if(P=0,++T,g.sheetRows&&g.sheetRows<=T)return!0}e:for(;K<l.length;++K)switch(R=l.charCodeAt(K)){case 34:A===34&&(ce=!ce);break;case se:case 10:case 13:if(!ce&&V())break e;break}return K-F>0&&V(),w["!ref"]=Tn(_),w}function a(l,d){return!(d&&d.PRN)||d.FS||l.slice(0,4)=="sep="||l.indexOf("	")>=0||l.indexOf(",")>=0||l.indexOf(";")>=0?s(l,d):Sh(e(l,d),d)}function o(l,d){var g="",p=d.type=="string"?[0,0,0,0]:ZW(l,d);switch(d.type){case"base64":g=so(l);break;case"binary":g=l;break;case"buffer":d.codepage==65001?g=l.toString("utf8"):d.codepage&&typeof hp<"u"||(g=lr&&Buffer.isBuffer(l)?l.toString("binary"):Pd(l));break;case"array":g=yg(l);break;case"string":g=l;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=Ef(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=Ef(g):d.type=="binary"&&typeof hp<"u",g.slice(0,19)=="socialcalc:version:"?UI.to_sheet(d.type=="string"?g:Ef(g),d):a(g,d)}function c(l,d){return Ou(o(l,d),d)}function u(l){for(var d=[],g=Vr(l["!ref"]),p,w=Array.isArray(l),_=g.s.r;_<=g.e.r;++_){for(var T=[],P=g.s.c;P<=g.e.c;++P){var L=xr({r:_,c:P});if(p=w?(l[_]||[])[P]:l[L],!p||p.v==null){T.push("          ");continue}for(var F=(p.w||(ao(p),p.w)||"").slice(0,10);F.length<10;)F+=" ";T.push(F+(P===0?" ":""))}d.push(T.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}(),x5=function(){function r(E,D,B){if(E){cs(E,E.l||0);for(var U=B.Enum||Fe;E.l<E.length;){var J=E.read_shift(2),ae=U[J]||U[65535],le=E.read_shift(2),ue=E.l+le,xe=ae.f&&ae.f(E,le,B);if(E.l=ue,D(xe,ae,J))return}}}function e(E,D){switch(D.type){case"base64":return t(Hs(so(E)),D);case"binary":return t(Hs(E),D);case"buffer":case"array":return t(E,D)}throw"Unsupported type "+D.type}function t(E,D){if(!E)return E;var B=D||{},U=B.dense?[]:{},J="Sheet1",ae="",le=0,ue={},xe=[],Be=[],We={s:{r:0,c:0},e:{r:0,c:0}},Ze=B.sheetRows||0;if(E[2]==0&&(E[3]==8||E[3]==9)&&E.length>=16&&E[14]==5&&E[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(E[2]==2)B.Enum=Fe,r(E,function(ze,_t,$e){switch($e){case 0:B.vers=ze,ze>=4096&&(B.qpro=!0);break;case 6:We=ze;break;case 204:ze&&(ae=ze);break;case 222:ae=ze;break;case 15:case 51:B.qpro||(ze[1].v=ze[1].v.slice(1));case 13:case 14:case 16:$e==14&&(ze[2]&112)==112&&(ze[2]&15)>1&&(ze[2]&15)<15&&(ze[1].z=B.dateNF||tn[14],B.cellDates&&(ze[1].t="d",ze[1].v=nI(ze[1].v))),B.qpro&&ze[3]>le&&(U["!ref"]=Tn(We),ue[J]=U,xe.push(J),U=B.dense?[]:{},We={s:{r:0,c:0},e:{r:0,c:0}},le=ze[3],J=ae||"Sheet"+(le+1),ae="");var rt=B.dense?(U[ze[0].r]||[])[ze[0].c]:U[xr(ze[0])];if(rt){rt.t=ze[1].t,rt.v=ze[1].v,ze[1].z!=null&&(rt.z=ze[1].z),ze[1].f!=null&&(rt.f=ze[1].f);break}B.dense?(U[ze[0].r]||(U[ze[0].r]=[]),U[ze[0].r][ze[0].c]=ze[1]):U[xr(ze[0])]=ze[1];break}},B);else if(E[2]==26||E[2]==14)B.Enum=nt,E[2]==14&&(B.qpro=!0,E.l=0),r(E,function(ze,_t,$e){switch($e){case 204:J=ze;break;case 22:ze[1].v=ze[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ze[3]>le&&(U["!ref"]=Tn(We),ue[J]=U,xe.push(J),U=B.dense?[]:{},We={s:{r:0,c:0},e:{r:0,c:0}},le=ze[3],J="Sheet"+(le+1)),Ze>0&&ze[0].r>=Ze)break;B.dense?(U[ze[0].r]||(U[ze[0].r]=[]),U[ze[0].r][ze[0].c]=ze[1]):U[xr(ze[0])]=ze[1],We.e.c<ze[0].c&&(We.e.c=ze[0].c),We.e.r<ze[0].r&&(We.e.r=ze[0].r);break;case 27:ze[14e3]&&(Be[ze[14e3][0]]=ze[14e3][1]);break;case 1537:Be[ze[0]]=ze[1],ze[0]==le&&(J=ze[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+E[2]);if(U["!ref"]=Tn(We),ue[ae||J]=U,xe.push(ae||J),!Be.length)return{SheetNames:xe,Sheets:ue};for(var at={},ke=[],ne=0;ne<Be.length;++ne)ue[xe[ne]]?(ke.push(Be[ne]||xe[ne]),at[Be[ne]]=ue[Be[ne]]||ue[xe[ne]]):(ke.push(Be[ne]),at[Be[ne]]={"!ref":"A1"});return{SheetNames:ke,Sheets:at}}function n(E,D){var B=D||{};if(+B.codepage>=0&&Zf(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Gi(),J=Vr(E["!ref"]),ae=Array.isArray(E),le=[];ot(U,0,s(1030)),ot(U,6,c(J));for(var ue=Math.min(J.e.r,8191),xe=J.s.r;xe<=ue;++xe)for(var Be=ri(xe),We=J.s.c;We<=J.e.c;++We){xe===J.s.r&&(le[We]=di(We));var Ze=le[We]+Be,at=ae?(E[xe]||[])[We]:E[Ze];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?ot(U,13,p(xe,We,at.v)):ot(U,14,_(xe,We,at.v));else{var ke=ao(at);ot(U,15,d(xe,We,ke.slice(0,239)))}}return ot(U,1),U.end()}function i(E,D){var B=D||{};if(+B.codepage>=0&&Zf(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Gi();ot(U,0,a(E));for(var J=0,ae=0;J<E.SheetNames.length;++J)(E.Sheets[E.SheetNames[J]]||{})["!ref"]&&ot(U,27,Ce(E.SheetNames[J],ae++));var le=0;for(J=0;J<E.SheetNames.length;++J){var ue=E.Sheets[E.SheetNames[J]];if(!(!ue||!ue["!ref"])){for(var xe=Vr(ue["!ref"]),Be=Array.isArray(ue),We=[],Ze=Math.min(xe.e.r,8191),at=xe.s.r;at<=Ze;++at)for(var ke=ri(at),ne=xe.s.c;ne<=xe.e.c;++ne){at===xe.s.r&&(We[ne]=di(ne));var ze=We[ne]+ke,_t=Be?(ue[at]||[])[ne]:ue[ze];if(!(!_t||_t.t=="z"))if(_t.t=="n")ot(U,23,V(at,ne,le,_t.v));else{var $e=ao(_t);ot(U,22,R(at,ne,le,$e.slice(0,239)))}}++le}}return ot(U,1),U.end()}function s(E){var D=Me(2);return D.write_shift(2,E),D}function a(E){var D=Me(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var B=0,U=0,J=0,ae=0;ae<E.SheetNames.length;++ae){var le=E.SheetNames[ae],ue=E.Sheets[le];if(!(!ue||!ue["!ref"])){++J;var xe=gs(ue["!ref"]);B<xe.e.r&&(B=xe.e.r),U<xe.e.c&&(U=xe.e.c)}}return B>8191&&(B=8191),D.write_shift(2,B),D.write_shift(1,J),D.write_shift(1,U),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function o(E,D,B){var U={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&B.qpro?(U.s.c=E.read_shift(1),E.l++,U.s.r=E.read_shift(2),U.e.c=E.read_shift(1),E.l++,U.e.r=E.read_shift(2),U):(U.s.c=E.read_shift(2),U.s.r=E.read_shift(2),D==12&&B.qpro&&(E.l+=2),U.e.c=E.read_shift(2),U.e.r=E.read_shift(2),D==12&&B.qpro&&(E.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(E){var D=Me(8);return D.write_shift(2,E.s.c),D.write_shift(2,E.s.r),D.write_shift(2,E.e.c),D.write_shift(2,E.e.r),D}function u(E,D,B){var U=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(U[0].c=E.read_shift(1),U[3]=E.read_shift(1),U[0].r=E.read_shift(2),E.l+=2):(U[2]=E.read_shift(1),U[0].c=E.read_shift(2),U[0].r=E.read_shift(2)),U}function l(E,D,B){var U=E.l+D,J=u(E,D,B);if(J[1].t="s",B.vers==20768){E.l++;var ae=E.read_shift(1);return J[1].v=E.read_shift(ae,"utf8"),J}return B.qpro&&E.l++,J[1].v=E.read_shift(U-E.l,"cstr"),J}function d(E,D,B){var U=Me(7+B.length);U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,E),U.write_shift(1,39);for(var J=0;J<U.length;++J){var ae=B.charCodeAt(J);U.write_shift(1,ae>=128?95:ae)}return U.write_shift(1,0),U}function g(E,D,B){var U=u(E,D,B);return U[1].v=E.read_shift(2,"i"),U}function p(E,D,B){var U=Me(7);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,E),U.write_shift(2,B,"i"),U}function w(E,D,B){var U=u(E,D,B);return U[1].v=E.read_shift(8,"f"),U}function _(E,D,B){var U=Me(13);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,E),U.write_shift(8,B,"f"),U}function T(E,D,B){var U=E.l+D,J=u(E,D,B);if(J[1].v=E.read_shift(8,"f"),B.qpro)E.l=U;else{var ae=E.read_shift(2);K(E.slice(E.l,E.l+ae),J),E.l+=ae}return J}function P(E,D,B){var U=D&32768;return D&=-32769,D=(U?E:0)+(D>=8192?D-16384:D),(U?"":"$")+(B?di(D):ri(D))}var L={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},F=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function K(E,D){cs(E,0);for(var B=[],U=0,J="",ae="",le="",ue="";E.l<E.length;){var xe=E[E.l++];switch(xe){case 0:B.push(E.read_shift(8,"f"));break;case 1:ae=P(D[0].c,E.read_shift(2),!0),J=P(D[0].r,E.read_shift(2),!1),B.push(ae+J);break;case 2:{var Be=P(D[0].c,E.read_shift(2),!0),We=P(D[0].r,E.read_shift(2),!1);ae=P(D[0].c,E.read_shift(2),!0),J=P(D[0].r,E.read_shift(2),!1),B.push(Be+We+":"+ae+J)}break;case 3:if(E.l<E.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(E.read_shift(2));break;case 6:{for(var Ze="";xe=E[E.l++];)Ze+=String.fromCharCode(xe);B.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:ue=B.pop(),le=B.pop(),B.push(["AND","OR"][xe-20]+"("+le+","+ue+")");break;default:if(xe<32&&F[xe])ue=B.pop(),le=B.pop(),B.push(le+F[xe]+ue);else if(L[xe]){if(U=L[xe][1],U==69&&(U=E[E.l++]),U>B.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+B.join("|")+"|");return}var at=B.slice(-U);B.length-=U,B.push(L[xe][0]+"("+at.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}B.length==1?D[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function se(E){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=E.read_shift(2),D[3]=E[E.l++],D[0].c=E[E.l++],D}function ce(E,D){var B=se(E);return B[1].t="s",B[1].v=E.read_shift(D-4,"cstr"),B}function R(E,D,B,U){var J=Me(6+U.length);J.write_shift(2,E),J.write_shift(1,B),J.write_shift(1,D),J.write_shift(1,39);for(var ae=0;ae<U.length;++ae){var le=U.charCodeAt(ae);J.write_shift(1,le>=128?95:le)}return J.write_shift(1,0),J}function A(E,D){var B=se(E);B[1].v=E.read_shift(2);var U=B[1].v>>1;if(B[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return B[1].v=U,B}function C(E,D){var B=se(E),U=E.read_shift(4),J=E.read_shift(4),ae=E.read_shift(2);if(ae==65535)return U===0&&J===3221225472?(B[1].t="e",B[1].v=15):U===0&&J===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var le=ae&32768;return ae=(ae&32767)-16446,B[1].v=(1-le*2)*(J*Math.pow(2,ae+32)+U*Math.pow(2,ae)),B}function V(E,D,B,U){var J=Me(14);if(J.write_shift(2,E),J.write_shift(1,B),J.write_shift(1,D),U==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var ae=0,le=0,ue=0,xe=0;return U<0&&(ae=1,U=-U),le=Math.log2(U)|0,U/=Math.pow(2,le-31),xe=U>>>0,xe&2147483648||(U/=2,++le,xe=U>>>0),U-=xe,xe|=2147483648,xe>>>=0,U*=Math.pow(2,32),ue=U>>>0,J.write_shift(4,ue),J.write_shift(4,xe),le+=16383+(ae?32768:0),J.write_shift(2,le),J}function b(E,D){var B=C(E);return E.l+=D-14,B}function S(E,D){var B=se(E),U=E.read_shift(4);return B[1].v=U>>6,B}function k(E,D){var B=se(E),U=E.read_shift(8,"f");return B[1].v=U,B}function ie(E,D){var B=k(E);return E.l+=D-10,B}function ve(E,D){return E[E.l+D-1]==0?E.read_shift(D,"cstr"):""}function Te(E,D){var B=E[E.l++];B>D-1&&(B=D-1);for(var U="";U.length<B;)U+=String.fromCharCode(E[E.l++]);return U}function Ne(E,D,B){if(!(!B.qpro||D<21)){var U=E.read_shift(1);E.l+=17,E.l+=1,E.l+=2;var J=E.read_shift(D-21,"cstr");return[U,J]}}function _e(E,D){for(var B={},U=E.l+D;E.l<U;){var J=E.read_shift(2);if(J==14e3){for(B[J]=[0,""],B[J][0]=E.read_shift(2);E[E.l];)B[J][1]+=String.fromCharCode(E[E.l]),E.l++;E.l++}}return B}function Ce(E,D){var B=Me(5+E.length);B.write_shift(2,14e3),B.write_shift(2,D);for(var U=0;U<E.length;++U){var J=E.charCodeAt(U);B[B.l++]=J>127?95:J}return B[B.l++]=0,B}var Fe={0:{n:"BOF",f:FI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:w},15:{n:"LABEL",f:l},16:{n:"FORMULA",f:T},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:l},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ve},222:{n:"SHEETNAMELP",f:Te},65535:{n:""}},nt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:ce},23:{n:"NUMBER17",f:C},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:b},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:_e},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:k},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ve},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),qB=/^\s|\s$|[\t\n\r]/;function jI(r,e){if(!e.bookSST)return"";var t=[En];t[t.length]=st("sst",null,{xmlns:Ih[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var i=r[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(qB)&&(s+=' xml:space="preserve"'),s+=">"+yr(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function WB(r){return[r.read_shift(4),r.read_shift(4)]}function zB(r,e){return e||(e=Me(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var HB=F9;function $B(r){var e=Gi();He(e,159,zB(r));for(var t=0;t<r.length;++t)He(e,19,HB(r[t]));return He(e,160),e.end()}function GB(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function qI(r){var e=0,t,n=GB(r),i=n.length+1,s,a,o,c,u;for(t=Su(i),t[0]=n.length,s=1;s!=i;++s)t[s]=n[s-1];for(s=i-1;s>=0;--s)a=t[s],o=e&16384?1:0,c=e<<1&32767,u=o|c,e=u^a;return e^52811}var KB=function(){function r(i,s){switch(s.type){case"base64":return e(so(i),s);case"binary":return e(i,s);case"buffer":return e(lr&&Buffer.isBuffer(i)?i.toString("binary"):Pd(i),s);case"array":return e(yg(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(l,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,w,_=-1;w=g.exec(l);){switch(w[0]){case"\\cell":var T=l.slice(p,g.lastIndex-w[0].length);if(T[0]==" "&&(T=T.slice(1)),++_,T.length){var P={v:T,t:"s"};Array.isArray(o)?o[d][_]=P:o[xr({r:d,c:_})]=P}break}p=g.lastIndex}_>u.e.c&&(u.e.c=_)}),o["!ref"]=Tn(u),o}function t(i,s){return Ou(r(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Vr(i["!ref"]),o,c=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var l=a.s.c;l<=a.e.c;++l)s.push("\\cellx"+(l+1));for(s.push("\\pard\\intbl"),l=a.s.c;l<=a.e.c;++l){var d=xr({r:u,c:l});o=c?(i[u]||[])[l]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(ao(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}}();function T5(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var YB=6,eo=YB;function wp(r){return Math.floor((r+Math.round(128/eo)/256)*eo)}function xp(r){return Math.floor((r-5)/eo*100+.5)/100}function A1(r){return Math.round((r*eo+5)/eo*256)/256}function J2(r){r.width?(r.wpx=wp(r.width),r.wch=xp(r.wpx),r.MDW=eo):r.wpx?(r.wch=xp(r.wpx),r.width=A1(r.wch),r.MDW=eo):typeof r.wch=="number"&&(r.width=A1(r.wch),r.wpx=wp(r.width),r.MDW=eo),r.customWidth&&delete r.customWidth}var XB=96,WI=XB;function Tp(r){return r*96/WI}function zI(r){return r*WI/96}function JB(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=st("numFmt",null,{numFmtId:n,formatCode:yr(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=st("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function QB(r){var e=[];return e[e.length]=st("cellXfs",null),r.forEach(function(t){e[e.length]=st("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=st("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function HI(r,e){var t=[En,st("styleSheet",null,{xmlns:Ih[0],"xmlns:vt":Mn.vt})],n;return r.SSF&&(n=JB(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=QB(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function ZB(r,e){var t=r.read_shift(2),n=pi(r);return[t,n]}function eV(r,e,t){t||(t=Me(6+4*e.length)),t.write_shift(2,r),Vn(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function tV(r,e,t){var n={};n.sz=r.read_shift(2)/20;var i=q9(r);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=r.read_shift(2);switch(s===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=r.read_shift(1);a!=0&&(n.underline=a);var o=r.read_shift(1);o>0&&(n.family=o);var c=r.read_shift(1);switch(c>0&&(n.charset=c),r.l++,n.color=j9(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=pi(r),n}function rV(r,e){e||(e=Me(25+4*32)),e.write_shift(2,r.sz*20),W9(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),_p(r.color,e);var n=0;return n=2,e.write_shift(1,n),Vn(r.name,e),e.length>e.l?e.slice(0,e.l):e}var nV=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],wm,iV=Aa;function E5(r,e){e||(e=Me(4*3+8*7+16*1)),wm||(wm=V2(nV));var t=wm[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(_p({auto:1},e),_p({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function sV(r,e){var t=r.l+e,n=r.read_shift(2),i=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:i}}function $I(r,e,t){t||(t=Me(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function tf(r,e){return e||(e=Me(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var aV=Aa;function oV(r,e){return e||(e=Me(51)),e.write_shift(1,0),tf(null,e),tf(null,e),tf(null,e),tf(null,e),tf(null,e),e.length>e.l?e.slice(0,e.l):e}function cV(r,e){return e||(e=Me(12+4*10)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),vp(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function uV(r,e,t){var n=Me(2052);return n.write_shift(4,r),vp(e,n),vp(t,n),n.length>n.l?n.slice(0,n.l):n}function lV(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++t}),t!=0&&(He(r,615,Gs(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&He(r,44,eV(i,e[i]))}),He(r,616))}}function hV(r){var e=1;He(r,611,Gs(e)),He(r,43,rV({sz:12,color:{theme:1},name:"Calibri",family:2})),He(r,612)}function fV(r){var e=2;He(r,603,Gs(e)),He(r,45,E5({patternType:"none"})),He(r,45,E5({patternType:"gray125"})),He(r,604)}function dV(r){var e=1;He(r,613,Gs(e)),He(r,46,oV()),He(r,614)}function pV(r){var e=1;He(r,626,Gs(e)),He(r,47,$I({numFmtId:0},65535)),He(r,627)}function gV(r,e){He(r,617,Gs(e.length)),e.forEach(function(t){He(r,47,$I(t,0))}),He(r,618)}function mV(r){var e=1;He(r,619,Gs(e)),He(r,48,cV({xfId:0,name:"Normal"})),He(r,620)}function vV(r){var e=0;He(r,505,Gs(e)),He(r,506)}function _V(r){var e=0;He(r,508,uV(e,"TableStyleMedium9","PivotStyleMedium4")),He(r,509)}function yV(r,e){var t=Gi();return He(t,278),lV(t,r.SSF),hV(t),fV(t),dV(t),pV(t),gV(t,e.cellXfs),mV(t),vV(t),_V(t),He(t,279),t.end()}function GI(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[En];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function wV(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:pi(r)}}function xV(r){var e=Me(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),Vn(r.name,e),e.slice(0,e.l)}function TV(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function EV(r){var e=Me(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function bV(r,e){var t=Me(8+2*e.length);return t.write_shift(4,r),Vn(e,t),t.slice(0,t.l)}function AV(r){return r.l+=4,r.read_shift(4)!=0}function IV(r,e){var t=Me(8);return t.write_shift(4,r),t.write_shift(4,1),t}function SV(){var r=Gi();return He(r,332),He(r,334,Gs(1)),He(r,335,xV({name:"XLDAPR",version:12e4,flags:3496657072})),He(r,336),He(r,339,bV(1,"XLDAPR")),He(r,52),He(r,35,Gs(514)),He(r,4096,Gs(0)),He(r,4097,As(1)),He(r,36),He(r,53),He(r,340),He(r,337,IV(1)),He(r,51,EV([[1,0]])),He(r,338),He(r,333),r.end()}function KI(){var r=[En];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function PV(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=xr(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Nl=1024;function YI(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[st("xml",null,{"xmlns:v":ls.v,"xmlns:o":ls.o,"xmlns:x":ls.x,"xmlns:mv":ls.mv}).replace(/\/>/,">"),st("o:shapelayout",st("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),st("v:shapetype",[st("v:stroke",null,{joinstyle:"miter"}),st("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];Nl<r*1e3;)Nl+=1e3;return e.forEach(function(s){var a=Bn(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?st("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=st("v:fill",c,o),l={on:"t",obscured:"t"};++Nl,i=i.concat(["<v:shape"+nd({id:"_x0000_s"+Nl,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,st("v:shadow",null,l),st("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zn("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Zn("x:AutoFill","False"),Zn("x:Row",String(a.r)),Zn("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function XI(r){var e=[En,st("comments",null,{xmlns:Ih[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(i){var s=yr(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(i=t.indexOf(yr(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Zn("t",yr(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Zn("t",yr(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function NV(r,e,t){var n=[En,st("ThreadedComments",null,{xmlns:Mn.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(st("threadedComment",Zn("text",a.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function CV(r){var e=[En,st("personList",null,{xmlns:Mn.TCMNT,"xmlns:x":Ih[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push(st("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function RV(r){var e={};e.iauthor=r.read_shift(4);var t=Uu(r);return e.rfx=t.s,e.ref=xr(t.s),r.l+=16,e}function kV(r,e){return e==null&&(e=Me(36)),e.write_shift(4,r[1].iauthor),Ph(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var LV=pi;function DV(r){return Vn(r.slice(0,54))}function FV(r){var e=Gi(),t=[];return He(e,628),He(e,630),r.forEach(function(n){n[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),He(e,632,DV(i.a)))})}),He(e,631),He(e,633),r.forEach(function(n){n[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Bn(n[0]),e:Bn(n[0])};He(e,635,kV([s,i])),i.t&&i.t.length>0&&He(e,637,M9(i)),He(e,636),delete i.iauthor})}),He(e,634),He(e,629),e.end()}function OV(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Ir.utils.cfb_add(r,i,e.FileIndex[n].content)}})}var JI=["xlsb","xlsm","xlam","biff8","xla"],MV=function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,l=a.length>0?parseInt(a,10)|0:0;return o?l+=e.c:--l,c?u+=e.r:--u,i+(o?"":"$")+di(l)+(c?"":"$")+ri(u)}return function(i,s){return e=s,i.replace(r,t)}}(),Q2=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Z2=function(){return function(e,t){return e.replace(Q2,function(n,i,s,a,o,c){var u=$2(a)-(s?0:t.c),l=H2(c)-(o?0:t.r),d=l==0?"":o?l+1:"["+l+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}}();function BV(r,e){return r.replace(Q2,function(t,n,i,s,a,o){return n+(i=="$"?i+s:di($2(s)+e.c))+(a=="$"?a+o:ri(H2(o)+e.r))})}function VV(r){return r.length!=1}function yn(r){r.l+=1}function pc(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function QI(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return ZI(r);t.biff==12&&(n=4)}var i=r.read_shift(n),s=r.read_shift(n),a=pc(r),o=pc(r);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function ZI(r){var e=pc(r),t=pc(r),n=r.read_shift(1),i=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function UV(r,e,t){if(t.biff<8)return ZI(r);var n=r.read_shift(t.biff==12?4:2),i=r.read_shift(t.biff==12?4:2),s=pc(r),a=pc(r);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function eS(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return jV(r);var n=r.read_shift(t&&t.biff==12?4:2),i=pc(r);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function jV(r){var e=pc(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function qV(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function WV(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return zV(r);var i=r.read_shift(n>=12?4:2),s=r.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function zV(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:n}}function HV(r,e,t){var n=(r[r.l++]&96)>>5,i=QI(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,i]}function $V(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}var a=QI(r,s,t);return[n,i,a]}function GV(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function KV(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}return r.l+=s,[n,i]}function YV(r,e,t){var n=(r[r.l++]&96)>>5,i=UV(r,e-1,t);return[n,i]}function XV(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function b5(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function JV(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(r.read_shift(t&&t.biff==2?1:2));return i}function QV(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function ZV(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function eU(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function tU(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function tS(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function rU(r){return r.read_shift(2),tS(r)}function nU(r){return r.read_shift(2),tS(r)}function iU(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=eS(r,0,t);return[n,i]}function sU(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=WV(r,0,t);return[n,i]}function aU(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var s=eS(r,0,t);return[n,i,s]}function oU(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(t&&t.biff<=3?1:2);return[oj[i],iS[i],n]}function cU(r,e,t){var n=r[r.l++],i=r.read_shift(1),s=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:uU(r);return[i,(s[0]===0?iS:aj)[s[1]]]}function uU(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function lU(r,e,t){r.l+=t&&t.biff==2?3:4}function hU(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function fU(r){return r.l++,Rd[r.read_shift(1)]}function dU(r){return r.l++,r.read_shift(2)}function pU(r){return r.l++,r.read_shift(1)!==0}function gU(r){return r.l++,Nh(r)}function mU(r,e,t){return r.l++,MI(r,e-1,t)}function vU(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=aB(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=Rd[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Nh(r);break;case 2:t[1]=lB(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function _U(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((t.biff==12?Uu:dB)(r));return i}function yU(r,e,t){var n=0,i=0;t.biff==12?(n=r.read_shift(4),i=r.read_shift(4)):(i=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=vU(r,t.biff);return a}function wU(r,e,t){var n=r.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=r.read_shift(i);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,s]}function xU(r,e,t){if(t.biff==5)return TU(r);var n=r.read_shift(1)>>>5&3,i=r.read_shift(2),s=r.read_shift(4);return[n,i,s]}function TU(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function EU(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function bU(r,e,t){var n=r.read_shift(1)>>>5&3,i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function AU(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function IU(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return r.l+=s,[n,i]}var SU=Aa,PU=Aa,NU=Aa;function kd(r,e,t){return r.l+=2,[qV(r)]}function e_(r){return r.l+=6,[]}var CU=kd,RU=e_,kU=e_,LU=kd;function rS(r){return r.l+=2,[FI(r),r.read_shift(2)&1]}var DU=kd,FU=rS,OU=e_,MU=kd,BU=kd,VU=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function UU(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),i=r.read_shift(2),s=r.read_shift(2),a=VU[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:n,c:i,C:s}}function jU(r){return r.l+=2,[r.read_shift(4)]}function qU(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function WU(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function zU(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function HU(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function $U(r){return r.l+=4,[0,0]}var A5={1:{n:"PtgExp",f:hU},2:{n:"PtgTbl",f:NU},3:{n:"PtgAdd",f:yn},4:{n:"PtgSub",f:yn},5:{n:"PtgMul",f:yn},6:{n:"PtgDiv",f:yn},7:{n:"PtgPower",f:yn},8:{n:"PtgConcat",f:yn},9:{n:"PtgLt",f:yn},10:{n:"PtgLe",f:yn},11:{n:"PtgEq",f:yn},12:{n:"PtgGe",f:yn},13:{n:"PtgGt",f:yn},14:{n:"PtgNe",f:yn},15:{n:"PtgIsect",f:yn},16:{n:"PtgUnion",f:yn},17:{n:"PtgRange",f:yn},18:{n:"PtgUplus",f:yn},19:{n:"PtgUminus",f:yn},20:{n:"PtgPercent",f:yn},21:{n:"PtgParen",f:yn},22:{n:"PtgMissArg",f:yn},23:{n:"PtgStr",f:mU},26:{n:"PtgSheet",f:qU},27:{n:"PtgEndSheet",f:WU},28:{n:"PtgErr",f:fU},29:{n:"PtgBool",f:pU},30:{n:"PtgInt",f:dU},31:{n:"PtgNum",f:gU},32:{n:"PtgArray",f:XV},33:{n:"PtgFunc",f:oU},34:{n:"PtgFuncVar",f:cU},35:{n:"PtgName",f:wU},36:{n:"PtgRef",f:iU},37:{n:"PtgArea",f:HV},38:{n:"PtgMemArea",f:EU},39:{n:"PtgMemErr",f:SU},40:{n:"PtgMemNoMem",f:PU},41:{n:"PtgMemFunc",f:bU},42:{n:"PtgRefErr",f:AU},43:{n:"PtgAreaErr",f:GV},44:{n:"PtgRefN",f:sU},45:{n:"PtgAreaN",f:YV},46:{n:"PtgMemAreaN",f:zU},47:{n:"PtgMemNoMemN",f:HU},57:{n:"PtgNameX",f:xU},58:{n:"PtgRef3d",f:aU},59:{n:"PtgArea3d",f:$V},60:{n:"PtgRefErr3d",f:IU},61:{n:"PtgAreaErr3d",f:KV},255:{}},GU={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},KU={1:{n:"PtgElfLel",f:rS},2:{n:"PtgElfRw",f:MU},3:{n:"PtgElfCol",f:CU},6:{n:"PtgElfRwV",f:BU},7:{n:"PtgElfColV",f:LU},10:{n:"PtgElfRadical",f:DU},11:{n:"PtgElfRadicalS",f:OU},13:{n:"PtgElfColS",f:RU},15:{n:"PtgElfColSV",f:kU},16:{n:"PtgElfRadicalLel",f:FU},25:{n:"PtgList",f:UU},29:{n:"PtgSxName",f:jU},255:{}},YU={0:{n:"PtgAttrNoop",f:$U},1:{n:"PtgAttrSemi",f:tU},2:{n:"PtgAttrIf",f:ZV},4:{n:"PtgAttrChoose",f:JV},8:{n:"PtgAttrGoto",f:QV},16:{n:"PtgAttrSum",f:lU},32:{n:"PtgAttrBaxcel",f:b5},33:{n:"PtgAttrBaxcel",f:b5},64:{n:"PtgAttrSpace",f:rU},65:{n:"PtgAttrSpaceSemi",f:nU},128:{n:"PtgAttrIfError",f:eU},255:{}};function XU(r,e,t,n){if(n.biff<8)return Aa(r,e);for(var i=r.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=yU(r,0,n),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=_U(r,t[a][1],n),s.push(t[a][2]);break;case"PtgExp":n&&n.biff==12&&(t[a][1][1]=r.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-r.l,e!==0&&s.push(Aa(r,e)),s}function JU(r,e,t){for(var n=r.l+e,i,s,a=[];n!=r.l;)e=n-r.l,s=r[r.l],i=A5[s]||A5[GU[s]],(s===24||s===25)&&(i=(s===24?KU:YU)[r[r.l+1]]),!i||!i.f?Aa(r,e):a.push([i.n,i.f(r,e,t)]);return a}function QU(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var ZU={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function ej(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function nS(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(t.biff>8)switch(r[n[0]][0]){case 357:return i=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return r[n[0]][0][3]?(i=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function I5(r,e,t){var n=nS(r,e,t);return n=="#REF"?n:ej(n,t)}function hh(r,e,t,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],c,u,l,d=0,g=0,p,w="";if(!r[0]||!r[0][0])return"";for(var _=-1,T="",P=0,L=r[0].length;P<L;++P){var F=r[0][P];switch(F[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),_>=0){switch(r[0][_][1][0]){case 0:T=Zr(" ",r[0][_][1][1]);break;case 1:T=Zr("\r",r[0][_][1][1]);break;default:if(T="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}u=u+T,_=-1}o.push(u+ZU[F[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":l=Af(F[1][1],a,i),o.push(If(l,s));break;case"PtgRefN":l=t?Af(F[1][1],t,i):F[1][1],o.push(If(l,s));break;case"PtgRef3d":d=F[1][1],l=Af(F[1][2],a,i),w=I5(n,d,i),o.push(w+"!"+If(l,s));break;case"PtgFunc":case"PtgFuncVar":var K=F[1][0],se=F[1][1];K||(K=0),K&=127;var ce=K==0?[]:o.slice(-K);o.length-=K,se==="User"&&(se=ce.shift()),o.push(se+"("+ce.join(",")+")");break;case"PtgBool":o.push(F[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(F[1]);break;case"PtgNum":o.push(String(F[1]));break;case"PtgStr":o.push('"'+F[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(F[1]);break;case"PtgAreaN":p=l5(F[1][1],t?{s:t}:a,i),o.push(_m(p,i));break;case"PtgArea":p=l5(F[1][1],a,i),o.push(_m(p,i));break;case"PtgArea3d":d=F[1][1],p=F[1][2],w=I5(n,d,i),o.push(w+"!"+_m(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=F[1][2];var R=(n.names||[])[g-1]||(n[0]||[])[g],A=R?R.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var C=F[1][1];g=F[1][2];var V;if(i.biff<=5)C<0&&(C=-C),n[C]&&(V=n[C][g]);else{var b="";if(((n[C]||[])[0]||[])[0]==14849||(((n[C]||[])[0]||[])[0]==1025?n[C][g]&&n[C][g].itab>0&&(b=n.SheetNames[n[C][g].itab-1]+"!"):b=n.SheetNames[g-1]+"!"),n[C]&&n[C][g])b+=n[C][g].Name;else if(n[0]&&n[0][g])b+=n[0][g].Name;else{var S=(nS(n,C,i)||"").split(";;");S[g-1]?b=S[g-1]:b+="SH33TJSERRX"}o.push(b);break}V||(V={Name:"SH33TJSERRY"}),o.push(V.Name);break;case"PtgParen":var k="(",ie=")";if(_>=0){switch(T="",r[0][_][1][0]){case 2:k=Zr(" ",r[0][_][1][1])+k;break;case 3:k=Zr("\r",r[0][_][1][1])+k;break;case 4:ie=Zr(" ",r[0][_][1][1])+ie;break;case 5:ie=Zr("\r",r[0][_][1][1])+ie;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}_=-1}o.push(k+o.pop()+ie);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":l={c:F[1][1],r:F[1][0]};var ve={c:t.c,r:t.r};if(n.sharedf[xr(l)]){var Te=n.sharedf[xr(l)];o.push(hh(Te,a,ve,n,i))}else{var Ne=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(l.c<u[0].s.c||l.c>u[0].e.c)&&!(l.r<u[0].s.r||l.r>u[0].e.r)){o.push(hh(u[1],a,ve,n,i)),Ne=!0;break}Ne||o.push(F[1])}break;case"PtgArray":o.push("{"+QU(F[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=P;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+F[1].idx+"[#"+F[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(F));default:throw new Error("Unrecognized Formula Token: "+String(F))}var _e=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&_e.indexOf(r[0][P][0])==-1){F=r[0][_];var Ce=!0;switch(F[1][0]){case 4:Ce=!1;case 0:T=Zr(" ",F[1][1]);break;case 5:Ce=!1;case 1:T=Zr("\r",F[1][1]);break;default:if(T="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+F[1][0])}o.push((Ce?T:"")+o.pop()+(Ce?"":T)),_=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function tj(r){if(r==null){var e=Me(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return Pu(r);return Pu(0)}function rj(r,e,t,n,i){var s=Nu(e,t,i),a=tj(r.v),o=Me(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Me(r.bf.length),l=0;l<r.bf.length;++l)u[l]=r.bf[l];var d=Qn([s,a,o,u]);return d}function wg(r,e,t){var n=r.read_shift(4),i=JU(r,n,t),s=r.read_shift(4),a=s>0?XU(r,s,i,t):null;return[i,a]}var nj=wg,xg=wg,ij=wg,sj=wg,aj={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},iS={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},oj={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function cj(r){var e="of:="+r.replace(Q2,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function uj(r){return r.replace(/\./,"!")}var Sf=typeof Map<"u";function t_(r,e,t){var n=0,i=r.length;if(t){if(Sf?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=Sf?t.get(e):t[e];n<s.length;++n)if(r[s[n]].t===e)return r.Count++,s[n]}}else for(;n<i;++n)if(r[n].t===e)return r.Count++,n;return r[i]={t:e},r.Count++,r.Unique++,t&&(Sf?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function Tg(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(eo=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=xp(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=A1(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function sS(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function bc(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],i=60,s=r.length;if(n==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){eI(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(r[i].numFmtId===n)return i;return r[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function lj(r,e,t){if(r&&r["!ref"]){var n=Vr(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function hj(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+Tn(r[t])+'"/>';return e+"</mergeCells>"}function fj(r,e,t,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[t];try{e.Workbook&&(c=e.Workbook.Sheets[t].CodeName||c)}catch{}s=!0,a.codeName=rd(yr(c))}if(r&&r["!outline"]){var u={summaryBelow:1,summaryRight:1};r["!outline"].above&&(u.summaryBelow=0),r["!outline"].left&&(u.summaryRight=0),o=(o||"")+st("outlinePr",null,u)}!s&&!o||(i[i.length]=st("sheetPr",o,a))}var dj=["objects","scenarios","selectLockedCells","selectUnlockedCells"],pj=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function gj(r){var e={sheet:1};return dj.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),pj.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=qI(r.password).toString(16).toUpperCase()),st("sheetProtection",null,e)}function mj(r){return sS(r),st("pageMargins",null,r)}function vj(r,e){for(var t=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(t[t.length]=st("col",null,Tg(i,n)));return t[t.length]="</cols>",t.join("")}function _j(r,e,t,n){var i=typeof r.ref=="string"?r.ref:Tn(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=gs(i);a.s.r==a.e.r&&(a.e.r=gs(e["!ref"]).e.r,i=Tn(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+t.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+i}),st("autoFilter",null,{ref:i})}function yj(r,e,t,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),st("sheetViews",st("sheetView",null,i),{})}function wj(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var i="",s=r.t,a=r.v;if(r.t!=="z")switch(r.t){case"b":i=r.v?"1":"0";break;case"n":i=""+r.v;break;case"e":i=Rd[r.v];break;case"d":n&&n.cellDates?i=Ri(r.v,-1).toISOString():(r=Xi(r),r.t="n",i=""+(r.v=Yi(Ri(r.v)))),typeof r.z>"u"&&(r.z=tn[14]);break;default:i=r.v;break}var o=Zn("v",yr(i)),c={r:e},u=bc(n.cellXfs,r,n);switch(u!==0&&(c.s=u),r.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Zn("v",""+t_(n.Strings,r.v,n.revStrings)),c.t="s";break}c.t="str";break}if(r.t!=s&&(r.t=s,r.v=a),typeof r.f=="string"&&r.f){var l=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;o=st("f",yr(r.f),l)+(r.v!=null?o:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(c.cm=1),st("c",o,c)}function xj(r,e,t,n){var i=[],s=[],a=Vr(r["!ref"]),o="",c,u="",l=[],d=0,g=0,p=r["!rows"],w=Array.isArray(r),_={r:u},T,P=-1;for(g=a.s.c;g<=a.e.c;++g)l[g]=di(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=ri(d),g=a.s.c;g<=a.e.c;++g){c=l[g]+u;var L=w?(r[d]||[])[g]:r[c];L!==void 0&&(o=wj(L,c,r,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(_={r:u},p&&p[d]&&(T=p[d],T.hidden&&(_.hidden=1),P=-1,T.hpx?P=Tp(T.hpx):T.hpt&&(P=T.hpt),P>-1&&(_.ht=P,_.customHeight=1),T.level&&(_.outlineLevel=T.level)),i[i.length]=st("row",s.join(""),_))}if(p)for(;d<p.length;++d)p&&p[d]&&(_={r:d+1},T=p[d],T.hidden&&(_.hidden=1),P=-1,T.hpx?P=Tp(T.hpx):T.hpt&&(P=T.hpt),P>-1&&(_.ht=P,_.customHeight=1),T.level&&(_.outlineLevel=T.level),i[i.length]=st("row","",_));return i.join("")}function aS(r,e,t,n){var i=[En,st("worksheet",null,{xmlns:Ih[0],"xmlns:r":Mn.r})],s=t.SheetNames[r],a=0,o="",c=t.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",l=Vr(u);if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575),u=Tn(l)}n||(n={}),c["!comments"]=[];var d=[];fj(c,t,r,e,i),i[i.length]=st("dimension",null,{ref:u}),i[i.length]=yj(c,e,r,t),e.sheetFormat&&(i[i.length]=st("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=vj(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=xj(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=gj(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=_j(c["!autofilter"],c,t,r)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=hj(c["!merges"]));var g=-1,p,w=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(_){_[1].Target&&(p={ref:_[0]},_[1].Target.charAt(0)!="#"&&(w=vr(n,-1,yr(_[1].Target).replace(/#.*$/,""),ar.HLINK),p["r:id"]="rId"+w),(g=_[1].Target.indexOf("#"))>-1&&(p.location=yr(_[1].Target.slice(g+1))),_[1].Tooltip&&(p.tooltip=yr(_[1].Tooltip)),i[i.length]=st("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=mj(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Zn("ignoredErrors",st("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(w=vr(n,-1,"../drawings/drawing"+(r+1)+".xml",ar.DRAW),i[i.length]=st("drawing",null,{"r:id":"rId"+w}),c["!drawing"]=d),c["!comments"].length>0&&(w=vr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ar.VML),i[i.length]=st("legacyDrawing",null,{"r:id":"rId"+w}),c["!legacy"]=w),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function Tj(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var i=r.read_shift(2);r.l+=1;var s=r.read_shift(1);return r.l=n,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function Ej(r,e,t){var n=Me(145),i=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var s=320;i.hpx?s=Tp(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r,c:0},l=0;l<16;++l)if(!(e.s.c>l+1<<10||e.e.c<l<<10)){for(var d=-1,g=-1,p=l<<10;p<l+1<<10;++p){u.c=p;var w=Array.isArray(t)?(t[u.r]||[])[u.c]:t[xr(u)];w&&(d<0&&(d=p),g=p)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,g))}var _=n.l;return n.l=c,n.write_shift(4,o),n.l=_,n.length>n.l?n.slice(0,n.l):n}function bj(r,e,t,n){var i=Ej(n,t,e);(i.length>17||(e["!rows"]||[])[n])&&He(r,0,i)}var Aj=Uu,Ij=Ph;function Sj(){}function Pj(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=B9(r),t}function Nj(r,e,t){t==null&&(t=Me(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var i=1;i<3;++i)t.write_shift(1,0);return _p({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),xI(r,t),t.slice(0,t.l)}function Cj(r){var e=Ns(r);return[e]}function Rj(r,e,t){return t==null&&(t=Me(8)),Mu(e,t)}function kj(r){var e=Bu(r);return[e]}function Lj(r,e,t){return t==null&&(t=Me(4)),Vu(e,t)}function Dj(r){var e=Ns(r),t=r.read_shift(1);return[e,t,"b"]}function Fj(r,e,t){return t==null&&(t=Me(9)),Mu(e,t),t.write_shift(1,r.v?1:0),t}function Oj(r){var e=Bu(r),t=r.read_shift(1);return[e,t,"b"]}function Mj(r,e,t){return t==null&&(t=Me(5)),Vu(e,t),t.write_shift(1,r.v?1:0),t}function Bj(r){var e=Ns(r),t=r.read_shift(1);return[e,t,"e"]}function Vj(r,e,t){return t==null&&(t=Me(9)),Mu(e,t),t.write_shift(1,r.v),t}function Uj(r){var e=Bu(r),t=r.read_shift(1);return[e,t,"e"]}function jj(r,e,t){return t==null&&(t=Me(8)),Vu(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function qj(r){var e=Ns(r),t=r.read_shift(4);return[e,t,"s"]}function Wj(r,e,t){return t==null&&(t=Me(12)),Mu(e,t),t.write_shift(4,e.v),t}function zj(r){var e=Bu(r),t=r.read_shift(4);return[e,t,"s"]}function Hj(r,e,t){return t==null&&(t=Me(8)),Vu(e,t),t.write_shift(4,e.v),t}function $j(r){var e=Ns(r),t=Nh(r);return[e,t,"n"]}function Gj(r,e,t){return t==null&&(t=Me(16)),Mu(e,t),Pu(r.v,t),t}function Kj(r){var e=Bu(r),t=Nh(r);return[e,t,"n"]}function Yj(r,e,t){return t==null&&(t=Me(12)),Vu(e,t),Pu(r.v,t),t}function Xj(r){var e=Ns(r),t=TI(r);return[e,t,"n"]}function Jj(r,e,t){return t==null&&(t=Me(12)),Mu(e,t),EI(r.v,t),t}function Qj(r){var e=Bu(r),t=TI(r);return[e,t,"n"]}function Zj(r,e,t){return t==null&&(t=Me(8)),Vu(e,t),EI(r.v,t),t}function eq(r){var e=Ns(r),t=G2(r);return[e,t,"is"]}function tq(r){var e=Ns(r),t=pi(r);return[e,t,"str"]}function rq(r,e,t){return t==null&&(t=Me(12+4*r.v.length)),Mu(e,t),Vn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function nq(r){var e=Bu(r),t=pi(r);return[e,t,"str"]}function iq(r,e,t){return t==null&&(t=Me(8+4*r.v.length)),Vu(e,t),Vn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function sq(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=r.read_shift(1),a=[i,s,"b"];if(t.cellFormula){r.l+=2;var o=xg(r,n-r.l,t);a[3]=hh(o,null,i,t.supbooks,t)}else r.l=n;return a}function aq(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=r.read_shift(1),a=[i,s,"e"];if(t.cellFormula){r.l+=2;var o=xg(r,n-r.l,t);a[3]=hh(o,null,i,t.supbooks,t)}else r.l=n;return a}function oq(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=Nh(r),a=[i,s,"n"];if(t.cellFormula){r.l+=2;var o=xg(r,n-r.l,t);a[3]=hh(o,null,i,t.supbooks,t)}else r.l=n;return a}function cq(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=pi(r),a=[i,s,"str"];if(t.cellFormula){r.l+=2;var o=xg(r,n-r.l,t);a[3]=hh(o,null,i,t.supbooks,t)}else r.l=n;return a}var uq=Uu,lq=Ph;function hq(r,e){return e==null&&(e=Me(4)),e.write_shift(4,r),e}function fq(r,e){var t=r.l+e,n=Uu(r),i=K2(r),s=pi(r),a=pi(r),o=pi(r);r.l=t;var c={rfx:n,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function dq(r,e){var t=Me(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));Ph({s:Bn(r[0]),e:Bn(r[0])},t),Y2("rId"+e,t);var n=r[1].Target.indexOf("#"),i=n==-1?"":r[1].Target.slice(n+1);return Vn(i||"",t),Vn(r[1].Tooltip||"",t),Vn("",t),t.slice(0,t.l)}function pq(){}function gq(r,e,t){var n=r.l+e,i=bI(r),s=r.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=nj(r,n-r.l,t);a[1]=o}else r.l=n;return a}function mq(r,e,t){var n=r.l+e,i=Uu(r),s=[i];if(t.cellFormula){var a=sj(r,n-r.l,t);s[1]=a,r.l=n}else r.l=n;return s}function vq(r,e,t){t==null&&(t=Me(18));var n=Tg(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var oS=["left","right","top","bottom","header","footer"];function _q(r){var e={};return oS.forEach(function(t){e[t]=Nh(r)}),e}function yq(r,e){return e==null&&(e=Me(6*8)),sS(r),oS.forEach(function(t){Pu(r[t],e)}),e}function wq(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function xq(r,e,t){t==null&&(t=Me(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function Tq(r){var e=Me(24);return e.write_shift(4,4),e.write_shift(4,1),Ph(r,e),e}function Eq(r,e){return e==null&&(e=Me(16*4+2)),e.write_shift(2,r.password?qI(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function bq(){}function Aq(){}function Iq(r,e,t,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Xi(e),e.z=e.z||tn[14],e.v=Yi(Ri(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r:t,c:n};switch(c.s=bc(i.cellXfs,e,i),e.l&&s["!links"].push([xr(c),e.l]),e.c&&s["!comments"].push([xr(c),e.c]),e.t){case"s":case"str":return i.bookSST?(o=t_(i.Strings,e.v,i.revStrings),c.t="s",c.v=o,a?He(r,18,Hj(e,c)):He(r,7,Wj(e,c))):(c.t="str",a?He(r,17,iq(e,c)):He(r,6,rq(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?He(r,13,Zj(e,c)):He(r,2,Jj(e,c)):a?He(r,16,Yj(e,c)):He(r,5,Gj(e,c)),!0;case"b":return c.t="b",a?He(r,15,Mj(e,c)):He(r,4,Fj(e,c)),!0;case"e":return c.t="e",a?He(r,14,jj(e,c)):He(r,3,Vj(e,c)),!0}return a?He(r,12,Lj(e,c)):He(r,1,Rj(e,c)),!0}function Sq(r,e,t,n){var i=Vr(e["!ref"]||"A1"),s,a="",o=[];He(r,145);var c=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var l=i.s.r;l<=u;++l){a=ri(l),bj(r,e,i,l);var d=!1;if(l<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){l===i.s.r&&(o[g]=di(g)),s=o[g]+a;var p=c?(e[l]||[])[g]:e[s];if(!p){d=!1;continue}d=Iq(r,p,l,g,n,e,d)}}He(r,146)}function Pq(r,e){!e||!e["!merges"]||(He(r,177,hq(e["!merges"].length)),e["!merges"].forEach(function(t){He(r,176,lq(t))}),He(r,178))}function Nq(r,e){!e||!e["!cols"]||(He(r,390),e["!cols"].forEach(function(t,n){t&&He(r,60,vq(n,t))}),He(r,391))}function Cq(r,e){!e||!e["!ref"]||(He(r,648),He(r,649,Tq(Vr(e["!ref"]))),He(r,650))}function Rq(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var i=vr(t,-1,n[1].Target.replace(/#.*$/,""),ar.HLINK);He(r,494,dq(n,i))}}),delete e["!links"]}function kq(r,e,t,n){if(e["!comments"].length>0){var i=vr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",ar.VML);He(r,551,Y2("rId"+i)),e["!legacy"]=i}}function Lq(r,e,t,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:Tn(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=gs(s);o.s.r==o.e.r&&(o.e.r=gs(e["!ref"]).e.r,s=Tn(o));for(var c=0;c<a.length;++c){var u=a[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+t.SheetNames[n]+"'!"+s;break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),He(r,161,Ph(Vr(s))),He(r,162)}}function Dq(r,e,t){He(r,133),He(r,137,xq(e,t)),He(r,138),He(r,134)}function Fq(r,e){e["!protect"]&&He(r,535,Eq(e["!protect"]))}function Oq(r,e,t,n){var i=Gi(),s=t.SheetNames[r],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[r].CodeName||o)}catch{}var c=Vr(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],He(i,129),(t.vbaraw||a["!outline"])&&He(i,147,Nj(o,a["!outline"])),He(i,148,Ij(c)),Dq(i,a,t.Workbook),Nq(i,a),Sq(i,a,r,e),Fq(i,a),Lq(i,a,t,r),Pq(i,a),Rq(i,a,n),a["!margins"]&&He(i,476,yq(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Cq(i,a),kq(i,a,r,n),He(i,130),i.end()}function Mq(r,e){r.l+=10;var t=pi(r);return{name:t}}var Bq=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function Vq(r){return!r.Workbook||!r.Workbook.WBProps?"false":m9(r.Workbook.WBProps.date1904)?"true":"false"}var Uq="][*?/\\".split("");function cS(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return Uq.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function jq(r,e,t){r.forEach(function(n,i){cS(n);for(var s=0;s<i;++s)if(n==r[s])throw new Error("Duplicate Sheet Name: "+n);if(t){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function qq(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];jq(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)lj(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function uS(r){var e=[En];e[e.length]=st("workbook",null,{xmlns:Ih[0],"xmlns:r":Mn.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(Bq.forEach(function(o){r.Workbook.WBProps[o[0]]!=null&&r.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=r.Workbook.WBProps[o[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=st("workbookPr",null,n);var i=r.Workbook&&r.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=r.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==r.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=r.SheetNames.length;++s){var a={name:yr(r.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=st("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=st("definedName",yr(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function Wq(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=b1(r),t.name=pi(r),t}function zq(r,e){return e||(e=Me(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),Y2(r.strRelID,e),Vn(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function Hq(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var i=e>8?pi(r):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function $q(r,e){e||(e=Me(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),xI(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function Gq(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var i=r.read_shift(4),s=V9(r),a=ij(r,0,t),o=K2(r);r.l=n;var c={Name:s,Ptg:a};return i<268435455&&(c.Sheet=i),o&&(c.Comment=o),c}function Kq(r,e){He(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};He(r,156,zq(i))}He(r,144)}function Yq(r,e){e||(e=Me(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Vn("SheetJS",e),Vn(lp.version,e),Vn(lp.version,e),Vn("7262",e),e.length>e.l?e.slice(0,e.l):e}function Xq(r,e){e||(e=Me(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function Jq(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,i=-1,s=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&i==-1?i=n:t[n].Hidden==1&&s==-1&&(s=n);s>i||(He(r,135),He(r,158,Xq(i)),He(r,136))}}function Qq(r,e){var t=Gi();return He(t,131),He(t,128,Yq()),He(t,153,$q(r.Workbook&&r.Workbook.WBProps||null)),Jq(t,r),Kq(t,r),He(t,132),t.end()}function Zq(r,e,t){return(e.slice(-4)===".bin"?Qq:uS)(r)}function eW(r,e,t,n,i){return(e.slice(-4)===".bin"?Oq:aS)(r,t,n,i)}function tW(r,e,t){return(e.slice(-4)===".bin"?yV:HI)(r,t)}function rW(r,e,t){return(e.slice(-4)===".bin"?$B:jI)(r,t)}function nW(r,e,t){return(e.slice(-4)===".bin"?FV:XI)(r)}function iW(r){return(r.slice(-4)===".bin"?SV:KI)()}function sW(r,e){var t=[];return r.Props&&t.push(tB(r.Props,e)),r.Custprops&&t.push(rB(r.Props,r.Custprops)),t.join("")}function aW(){return""}function oW(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(st("NumberFormat",null,{"ss:Format":yr(tn[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(st("Style",s.join(""),a))}),st("Styles",t.join(""))}function lS(r){return st("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+Z2(r.Ref,{r:0,c:0})})}function cW(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(lS(i)))}return st("Names",t.join(""))}function uW(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(lS(o)))}return s.join("")}function lW(r,e,t,n){if(!r)return"";var i=[];if(r["!margins"]&&(i.push("<PageSetup>"),r["!margins"].header&&i.push(st("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&i.push(st("Footer",null,{"x:Margin":r["!margins"].footer})),i.push(st("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)i.push(st("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),r["!protect"]&&(i.push(Zn("ProtectContents","True")),r["!protect"].objects&&i.push(Zn("ProtectObjects","True")),r["!protect"].scenarios&&i.push(Zn("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?i.push(Zn("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&i.push(Zn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){r["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":st("WorksheetOptions",i.join(""),{xmlns:ls.x})}function hW(r){return r.map(function(e){var t=g9(e.t||""),n=st("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return st("Comment",n,{"ss:Author":e.a})}).join("")}function fW(r,e,t,n,i,s,a){if(!r||r.v==null&&r.f==null)return"";var o={};if(r.f&&(o["ss:Formula"]="="+yr(Z2(r.f,a))),r.F&&r.F.slice(0,e.length)==e){var c=Bn(r.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(r.l&&r.l.Target&&(o["ss:HRef"]=yr(r.l.Target),r.l.Tooltip&&(o["x:HRefScreenTip"]=yr(r.l.Tooltip))),t["!merges"])for(var u=t["!merges"],l=0;l!=u.length;++l)u[l].s.c!=a.c||u[l].s.r!=a.r||(u[l].e.c>u[l].s.c&&(o["ss:MergeAcross"]=u[l].e.c-u[l].s.c),u[l].e.r>u[l].s.r&&(o["ss:MergeDown"]=u[l].e.r-u[l].s.r));var d="",g="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",g=String(r.v);break;case"b":d="Boolean",g=r.v?"1":"0";break;case"e":d="Error",g=Rd[r.v];break;case"d":d="DateTime",g=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||tn[14]);break;case"s":d="String",g=p9(r.v||"");break}var p=bc(n.cellXfs,r,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var w=r.v!=null?g:"",_=r.t=="z"?"":'<Data ss:Type="'+d+'">'+w+"</Data>";return(r.c||[]).length>0&&(_+=hW(r.c)),st("Cell",_,o)}function dW(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=zI(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function pW(r,e,t,n){if(!r["!ref"])return"";var i=Vr(r["!ref"]),s=r["!merges"]||[],a=0,o=[];r["!cols"]&&r["!cols"].forEach(function(T,P){J2(T);var L=!!T.width,F=Tg(P,T),K={"ss:Index":P+1};L&&(K["ss:Width"]=wp(F.width)),T.hidden&&(K["ss:Hidden"]="1"),o.push(st("Column",null,K))});for(var c=Array.isArray(r),u=i.s.r;u<=i.e.r;++u){for(var l=[dW(u,(r["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},w=xr(p),_=c?(r[u]||[])[d]:r[w];l.push(fW(_,w,r,e,t,n,p))}}l.push("</Row>"),l.length>2&&o.push(l.join(""))}return o.join("")}function gW(r,e,t){var n=[],i=t.SheetNames[r],s=t.Sheets[i],a=s?uW(s,e,r,t):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?pW(s,e,r,t):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(lW(s,e,r,t)),n.join("")}function mW(r,e){e||(e={}),r.SSF||(r.SSF=Xi(tn)),r.SSF&&(vg(),mg(r.SSF),e.revssf=_g(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],bc(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(sW(r,e)),t.push(aW()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push(st("Worksheet",gW(n,e,r),{"ss:Name":yr(r.SheetNames[n])}));return t[2]=oW(r,e),t[3]=cW(r),En+st("Workbook",t.join(""),{xmlns:ls.ss,"xmlns:o":ls.o,"xmlns:x":ls.x,"xmlns:ss":ls.ss,"xmlns:dt":ls.dt,"xmlns:html":ls.html})}var xm={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function vW(r,e){var t=[],n=[],i=[],s=0,a,o=Zw(f5,"n"),c=Zw(d5,"n");if(r.Props)for(a=ii(r.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],r.Props[a[s]]]);if(r.Custprops)for(a=ii(r.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(r.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],r.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)DI.indexOf(i[s][0])>-1||RI.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);n.length&&Ir.utils.cfb_add(e,"/SummaryInformation",_5(n,xm.SI,c,d5)),(t.length||u.length)&&Ir.utils.cfb_add(e,"/DocumentSummaryInformation",_5(t,xm.DSI,o,f5,u.length?u:null,xm.UDI))}function _W(r,e){var t=e||{},n=Ir.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Ir.utils.cfb_add(n,i,hS(r,t)),t.biff==8&&(r.Props||r.Custprops)&&vW(r,n),t.biff==8&&r.vbaraw&&OV(n,Ir.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var yW={0:{f:Tj},1:{f:Cj},2:{f:Xj},3:{f:Bj},4:{f:Dj},5:{f:$j},6:{f:tq},7:{f:qj},8:{f:cq},9:{f:oq},10:{f:sq},11:{f:aq},12:{f:kj},13:{f:Qj},14:{f:Uj},15:{f:Oj},16:{f:Kj},17:{f:nq},18:{f:zj},19:{f:G2},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:Gq},40:{},42:{},43:{f:tV},44:{f:ZB},45:{f:iV},46:{f:aV},47:{f:sV},48:{},49:{f:k9},50:{},51:{f:TV},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:LB},62:{f:eq},63:{f:PV},64:{f:bq},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Aa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:wq},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Pj},148:{f:Aj,p:16},151:{f:pq},152:{},153:{f:Hq},154:{},155:{},156:{f:Wq},157:{},158:{},159:{T:1,f:WB},160:{T:-1},161:{T:1,f:Uu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:uq},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:wV},336:{T:-1},337:{f:AV,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:b1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:SB},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gq},427:{f:mq},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:_q},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Sj},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:fq},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:b1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:LV},633:{T:1},634:{T:-1},635:{T:1,f:RV},636:{T:-1},637:{f:O9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:Mq},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Aq},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ot(r,e,t,n){var i=e;if(!isNaN(i)){var s=n||(t||[]).length||0,a=r.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&z2(t)&&r.push(t)}}function wW(r,e,t,n){var i=(t||[]).length||0;if(i<=8224)return ot(r,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,c=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var l=r.next(4);for(l.write_shift(2,s),l.write_shift(2,u),r.push(t.slice(c,c+u)),c+=u;c<i;){for(l=r.next(4),l.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;l.write_shift(2,u),r.push(t.slice(c,c+u)),c+=u}}}function Ld(r,e,t){return r||(r=Me(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function xW(r,e,t,n){var i=Me(9);return Ld(i,r,e),OI(t,n||"b",i),i}function TW(r,e,t){var n=Me(8+2*t.length);return Ld(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function EW(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Yi(Ri(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?ot(r,2,MB(t,n,i)):ot(r,3,OB(t,n,i));return;case"b":case"e":ot(r,5,xW(t,n,e.v,e.t));return;case"s":case"str":ot(r,4,TW(t,n,(e.v||"").slice(0,255)));return}ot(r,1,Ld(null,t,n))}function bW(r,e,t,n){var i=Array.isArray(e),s=Vr(e["!ref"]||"A1"),a,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=Tn(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ri(u);for(var l=s.s.c;l<=s.e.c;++l){u===s.s.r&&(c[l]=di(l)),a=c[l]+o;var d=i?(e[u]||[])[l]:e[a];d&&EW(r,d,u,l)}}}function AW(r,e){for(var t=e||{},n=Gi(),i=0,s=0;s<r.SheetNames.length;++s)r.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return ot(n,t.biff==4?1033:t.biff==3?521:9,X2(r,16,t)),bW(n,r.Sheets[r.SheetNames[i]],i,t),ot(n,10),n.end()}function IW(r,e,t){ot(r,49,yB({sz:12,name:"Arial"},t))}function SW(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&ot(r,1054,TB(i,e[i],t))})}function PW(r,e){var t=Me(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),ot(r,2151,t),t=Me(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),VI(Vr(e["!ref"]||"A1"),t),t.write_shift(4,4),ot(r,2152,t)}function NW(r,e){for(var t=0;t<16;++t)ot(r,224,w5({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){ot(r,224,w5(n,0,e))})}function CW(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];ot(r,440,CB(n)),n[1].Tooltip&&ot(r,2048,RB(n))}delete e["!links"]}function RW(r,e){if(e){var t=0;e.forEach(function(n,i){++t<=256&&n&&ot(r,125,DB(Tg(i,n),i))})}}function kW(r,e,t,n,i){var s=16+bc(i.cellXfs,e,i);if(e.v==null&&!e.bf){ot(r,513,Nu(t,n,s));return}if(e.bf)ot(r,6,rj(e,t,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Yi(Ri(e.v)):e.v;ot(r,515,IB(t,n,a,s));break;case"b":case"e":ot(r,517,AB(t,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=t_(i.Strings,e.v,i.revStrings);ot(r,253,wB(t,n,o,s))}else ot(r,516,xB(t,n,(e.v||"").slice(0,255),s,i));break;default:ot(r,513,Nu(t,n,s))}}function LW(r,e,t){var n=Gi(),i=t.SheetNames[r],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[r]||{},c=Array.isArray(s),u=e.biff==8,l,d="",g=[],p=Vr(s["!ref"]||"A1"),w=u?65536:16384;if(p.e.c>255||p.e.r>=w){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,w-1)}ot(n,2057,X2(t,16,e)),ot(n,13,As(1)),ot(n,12,As(100)),ot(n,15,Ii(!0)),ot(n,17,Ii(!1)),ot(n,16,Pu(.001)),ot(n,95,Ii(!0)),ot(n,42,Ii(!1)),ot(n,43,Ii(!1)),ot(n,130,As(1)),ot(n,128,bB()),ot(n,131,Ii(!1)),ot(n,132,Ii(!1)),u&&RW(n,s["!cols"]),ot(n,512,EB(p,e)),u&&(s["!links"]=[]);for(var _=p.s.r;_<=p.e.r;++_){d=ri(_);for(var T=p.s.c;T<=p.e.c;++T){_===p.s.r&&(g[T]=di(T)),l=g[T]+d;var P=c?(s[_]||[])[T]:s[l];P&&(kW(n,P,_,T,e),u&&P.l&&s["!links"].push([l,P.l]))}}var L=o.CodeName||o.name||i;return u&&ot(n,574,_B((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&ot(n,229,NB(s["!merges"])),u&&CW(n,s),ot(n,442,BI(L)),u&&PW(n,s),ot(n,10),n.end()}function DW(r,e,t){var n=Gi(),i=(r||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,c=t.biff==5;if(ot(n,2057,X2(r,5,t)),t.bookType=="xla"&&ot(n,135),ot(n,225,o?As(1200):null),ot(n,193,sB(2)),c&&ot(n,191),c&&ot(n,192),ot(n,226),ot(n,92,pB("SheetJS",t)),ot(n,66,As(o?1200:1252)),o&&ot(n,353,As(0)),o&&ot(n,448),ot(n,317,FB(r.SheetNames.length)),o&&r.vbaraw&&ot(n,211),o&&r.vbaraw){var u=a.CodeName||"ThisWorkbook";ot(n,442,BI(u))}ot(n,156,As(17)),ot(n,25,Ii(!1)),ot(n,18,Ii(!1)),ot(n,19,As(0)),o&&ot(n,431,Ii(!1)),o&&ot(n,444,As(0)),ot(n,61,vB()),ot(n,64,Ii(!1)),ot(n,141,As(0)),ot(n,34,Ii(Vq(r)=="true")),ot(n,14,Ii(!0)),o&&ot(n,439,Ii(!1)),ot(n,218,As(0)),IW(n,r,t),SW(n,r.SSF,t),NW(n,t),o&&ot(n,352,Ii(!1));var l=n.end(),d=Gi();o&&ot(d,140,kB()),o&&t.Strings&&wW(d,252,mB(t.Strings)),ot(d,10);var g=d.end(),p=Gi(),w=0,_=0;for(_=0;_<r.SheetNames.length;++_)w+=(o?12:11)+(o?2:1)*r.SheetNames[_].length;var T=l.length+w+g.length;for(_=0;_<r.SheetNames.length;++_){var P=s[_]||{};ot(p,133,gB({pos:T,hs:P.Hidden||0,dt:0,name:r.SheetNames[_]},t)),T+=e[_].length}var L=p.end();if(w!=L.length)throw new Error("BS8 "+w+" != "+L.length);var F=[];return l.length&&F.push(l),L.length&&F.push(L),g.length&&F.push(g),Qn(F)}function FW(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=Xi(tn)),r&&r.SSF&&(vg(),mg(r.SSF),t.revssf=_g(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,r_(t),t.cellXfs=[],bc(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var i=0;i<r.SheetNames.length;++i)n[n.length]=LW(i,t,r);return n.unshift(DW(r,n,t)),Qn(n)}function hS(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var i=gs(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return FW(r,e);case 4:case 3:case 2:return AW(r,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function OW(r,e,t,n){for(var i=r["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,c=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,c=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var l=xr({r:t,c:a}),d=n.dense?(r[t]||[])[a]:r[l],g=d&&d.v!=null&&(d.h||d9(d.w||(ao(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(n.id||"sjs")+"-"+l,s.push(st("td",g,p))}}var w="<tr>";return w+s.join("")+"</tr>"}var MW='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',BW="</body></html>";function VW(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function fS(r,e){var t=e||{},n=t.header!=null?t.header:MW,i=t.footer!=null?t.footer:BW,s=[n],a=gs(r["!ref"]);t.dense=Array.isArray(r),s.push(VW(r,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(OW(r,a,o,t));return s.push("</table>"+i),s.join("")}function dS(r,e,t){var n=t||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Bn(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(r["!ref"]){var l=gs(r["!ref"]);u.s.r=Math.min(u.s.r,l.s.r),u.s.c=Math.min(u.s.c,l.s.c),u.e.r=Math.max(u.e.r,l.e.r),u.e.c=Math.max(u.e.c,l.e.c),i==-1&&(u.e.r=i=l.e.r+1)}var d=[],g=0,p=r["!rows"]||(r["!rows"]=[]),w=0,_=0,T=0,P=0,L=0,F=0;for(r["!cols"]||(r["!cols"]=[]);w<o.length&&_<c;++w){var K=o[w];if(S5(K)){if(n.display)continue;p[_]={hidden:!0}}var se=K.children;for(T=P=0;T<se.length;++T){var ce=se[T];if(!(n.display&&S5(ce))){var R=ce.hasAttribute("data-v")?ce.getAttribute("data-v"):ce.hasAttribute("v")?ce.getAttribute("v"):v9(ce.innerHTML),A=ce.getAttribute("data-z")||ce.getAttribute("z");for(g=0;g<d.length;++g){var C=d[g];C.s.c==P+s&&C.s.r<_+i&&_+i<=C.e.r&&(P=C.e.c+1-s,g=-1)}F=+ce.getAttribute("colspan")||1,((L=+ce.getAttribute("rowspan")||1)>1||F>1)&&d.push({s:{r:_+i,c:P+s},e:{r:_+i+(L||1)-1,c:P+s+(F||1)-1}});var V={t:"s",v:R},b=ce.getAttribute("data-t")||ce.getAttribute("t")||"";R!=null&&(R.length==0?V.t=b||"z":n.raw||R.trim().length==0||b=="s"||(R==="TRUE"?V={t:"b",v:!0}:R==="FALSE"?V={t:"b",v:!1}:isNaN(Za(R))?isNaN(td(R).getDate())||(V={t:"d",v:Ri(R)},n.cellDates||(V={t:"n",v:Yi(V.v)}),V.z=n.dateNF||tn[14]):V={t:"n",v:Za(R)})),V.z===void 0&&A!=null&&(V.z=A);var S="",k=ce.getElementsByTagName("A");if(k&&k.length)for(var ie=0;ie<k.length&&!(k[ie].hasAttribute("href")&&(S=k[ie].getAttribute("href"),S.charAt(0)!="#"));++ie);S&&S.charAt(0)!="#"&&(V.l={Target:S}),n.dense?(r[_+i]||(r[_+i]=[]),r[_+i][P+s]=V):r[xr({c:P+s,r:_+i})]=V,u.e.c<P+s&&(u.e.c=P+s),P+=F}}++_}return d.length&&(r["!merges"]=(r["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,_-1+i),r["!ref"]=Tn(u),_>=c&&(r["!fullref"]=Tn((u.e.r=o.length-w+_-1+i,u))),r}function pS(r,e){var t=e||{},n=t.dense?[]:{};return dS(n,r,e)}function UW(r,e){return Ou(pS(r,e),e)}function S5(r){var e="",t=jW(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function jW(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var qW=function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return En+e}}(),P5=function(){var r=function(s){return yr(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(s,a,o){var c=[];c.push('      <table:table table:name="'+yr(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,l=0,d=gs(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,w=Array.isArray(s);if(s["!cols"])for(l=0;l<=d.e.c;++l)c.push("        <table:table-column"+(s["!cols"][l]?' table:style-name="co'+s["!cols"][l].ods+'"':"")+`></table:table-column>
`);var _="",T=s["!rows"]||[];for(u=0;u<d.s.r;++u)_=T[u]?' table:style-name="ro'+T[u].ods+'"':"",c.push("        <table:table-row"+_+`></table:table-row>
`);for(;u<=d.e.r;++u){for(_=T[u]?' table:style-name="ro'+T[u].ods+'"':"",c.push("        <table:table-row"+_+`>
`),l=0;l<d.s.c;++l)c.push(e);for(;l<=d.e.c;++l){var P=!1,L={},F="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>l)&&!(g[p].s.r>u)&&!(g[p].e.c<l)&&!(g[p].e.r<u)){(g[p].s.c!=l||g[p].s.r!=u)&&(P=!0),L["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,L["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(P){c.push(t);continue}var K=xr({r:u,c:l}),se=w?(s[u]||[])[l]:s[K];if(se&&se.f&&(L["table:formula"]=yr(cj(se.f)),se.F&&se.F.slice(0,K.length)==K)){var ce=gs(se.F);L["table:number-matrix-columns-spanned"]=ce.e.c-ce.s.c+1,L["table:number-matrix-rows-spanned"]=ce.e.r-ce.s.r+1}if(!se){c.push(e);continue}switch(se.t){case"b":F=se.v?"TRUE":"FALSE",L["office:value-type"]="boolean",L["office:boolean-value"]=se.v?"true":"false";break;case"n":F=se.w||String(se.v||0),L["office:value-type"]="float",L["office:value"]=se.v||0;break;case"s":case"str":F=se.v==null?"":se.v,L["office:value-type"]="string";break;case"d":F=se.w||Ri(se.v).toISOString(),L["office:value-type"]="date",L["office:date-value"]=Ri(se.v).toISOString(),L["table:style-name"]="ce1";break;default:c.push(e);continue}var R=r(F);if(se.l&&se.l.Target){var A=se.l.Target;A=A.charAt(0)=="#"?"#"+uj(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),R=st("text:a",R,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+st("table:table-cell",st("text:p",R,{}),L)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var l=0;l<u["!cols"].length;++l)if(u["!cols"][l]){var d=u["!cols"][l];if(d.width==null&&d.wpx==null&&d.wch==null)continue;J2(d),d.ods=o;var g=u["!cols"][l].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var l=0;l<u["!rows"].length;++l)if(u["!rows"][l]){u["!rows"][l].ods=c;var d=u["!rows"][l].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var c=[En],u=nd({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),l=nd({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+l+`>
`),c.push(NI().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),i(c,a),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)c.push(n(a.Sheets[a.SheetNames[d]],a,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function gS(r,e){if(e.bookType=="fods")return P5(r,e);var t=U2(),n="",i=[],s=[];return n="mimetype",$t(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",$t(t,n,P5(r,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",$t(t,n,qW(r,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",$t(t,n,En+NI()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",$t(t,n,eB(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",$t(t,n,Q9(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Ep(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function WW(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Hs(rd(r))}function zW(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function gc(r){var e=r.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(i){t.set(i,n),n+=i.length}),t}function HW(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)r[e+s]=i&255;r[e+15]|=t>=0?0:128}function id(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function mr(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function ql(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function Sn(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],i=id(r,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var c=t[0];r[t[0]++]>=128;);o=r.slice(c,t[0])}break;case 5:a=4,o=r.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=r.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=id(r,t),o=r.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Kn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(i){i.data&&(e.push(mr(n*8+i.type)),i.type==2&&e.push(mr(i.data.length)),e.push(i.data))})}),gc(e)}function Us(r){for(var e,t=[],n=[0];n[0]<r.length;){var i=id(r,n),s=Sn(r.slice(n[0],n[0]+i));n[0]+=i;var a={id:ql(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Sn(o.data),u=ql(c[3][0].data);a.messages.push({meta:c,data:r.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=ql(s[3][0].data)>>>0>0),t.push(a)}return t}function ml(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:mr(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:mr(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:mr(a.data.length)}],n[2].push({data:Kn(a.meta),type:2})});var s=Kn(n);e.push(mr(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),gc(e)}function $W(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=id(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var c=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,c=(e[t[0]++]&224)<<3,c|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(c=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(c=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[gc(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(i.push(i[0].slice(-c)),u-=c;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-c,-c+u))}}var l=gc(i);if(l.length!=n)throw new Error("Unexpected length: ".concat(l.length," != ").concat(n));return l}function js(r){for(var e=[],t=0;t<r.length;){var n=r[t++],i=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push($W(n,r.slice(t,t+i))),t+=i}if(t!==r.length)throw new Error("data is not a valid framed stream!");return gc(e)}function vl(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=mr(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=n}return gc(e)}function Tm(r,e){var t=new Uint8Array(32),n=Ep(t),i=12,s=0;switch(t[0]=5,r.t){case"n":t[1]=2,HW(t,i,r.v),s|=1,i+=16;break;case"b":t[1]=6,n.setFloat64(i,r.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(i,e.indexOf(r.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,s,!0),t.slice(0,i)}function Em(r,e){var t=new Uint8Array(32),n=Ep(t),i=12,s=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(i,r.v,!0),s|=32,i+=8;break;case"b":t[2]=6,n.setFloat64(i,r.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(i,e.indexOf(r.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,s,!0),t.slice(0,i)}function $o(r){var e=Sn(r);return id(e[1][0].data)}function GW(r,e,t){var n,i,s,a;if(!((n=r[6])!=null&&n[0])||!((i=r[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=r[8])==null?void 0:s[0])==null?void 0:a.data)&&ql(r[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=Ep(r[7][0].data),l=0,d=[],g=Ep(r[4][0].data),p=0,w=[],_=0;_<e.length;++_){if(e[_]==null){u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535);continue}u.setUint16(_*2,l,!0),g.setUint16(_*2,p,!0);var T,P;switch(typeof e[_]){case"string":T=Tm({t:"s",v:e[_]},t),P=Em({t:"s",v:e[_]},t);break;case"number":T=Tm({t:"n",v:e[_]},t),P=Em({t:"n",v:e[_]},t);break;case"boolean":T=Tm({t:"b",v:e[_]},t),P=Em({t:"b",v:e[_]},t);break;default:throw new Error("Unsupported value "+e[_])}d.push(T),l+=T.length,w.push(P),p+=P.length,++c}for(r[2][0].data=mr(c);_<r[7][0].data.length/2;++_)u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535,!0);return r[6][0].data=gc(d),r[3][0].data=gc(w),c}function KW(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=gs(t["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(Tn(n)));var s=bp(t,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(D){return D.forEach(function(B){typeof B=="string"&&a.push(B)})});var o={},c=[],u=Ir.read(e.numbers,{type:"base64"});u.FileIndex.map(function(D,B){return[D,u.FullPaths[B]]}).forEach(function(D){var B=D[0],U=D[1];if(B.type==2&&B.name.match(/\.iwa/)){var J=B.content,ae=js(J),le=Us(ae);le.forEach(function(ue){c.push(ue.id),o[ue.id]={deps:[],location:U,type:ql(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(D,B){return D-B});var l=c.filter(function(D){return D>1}).map(function(D){return[D,mr(D)]});u.FileIndex.map(function(D,B){return[D,u.FullPaths[B]]}).forEach(function(D){var B=D[0];if(D[1],!!B.name.match(/\.iwa/)){var U=Us(js(B.content));U.forEach(function(J){J.messages.forEach(function(ae){l.forEach(function(le){J.messages.some(function(ue){return ql(ue.meta[1][0].data)!=11006&&zW(ue.data,le[1])})&&o[le[0]].deps.push(J.id)})})})}});for(var d=Ir.find(u,o[1].location),g=Us(js(d.content)),p,w=0;w<g.length;++w){var _=g[w];_.id==1&&(p=_)}var T=$o(Sn(p.messages[0].data)[1][0].data);for(d=Ir.find(u,o[T].location),g=Us(js(d.content)),w=0;w<g.length;++w)_=g[w],_.id==T&&(p=_);for(T=$o(Sn(p.messages[0].data)[2][0].data),d=Ir.find(u,o[T].location),g=Us(js(d.content)),w=0;w<g.length;++w)_=g[w],_.id==T&&(p=_);for(T=$o(Sn(p.messages[0].data)[2][0].data),d=Ir.find(u,o[T].location),g=Us(js(d.content)),w=0;w<g.length;++w)_=g[w],_.id==T&&(p=_);var P=Sn(p.messages[0].data);{P[6][0].data=mr(n.e.r+1),P[7][0].data=mr(n.e.c+1);var L=$o(P[46][0].data),F=Ir.find(u,o[L].location),K=Us(js(F.content));{for(var se=0;se<K.length&&K[se].id!=L;++se);if(K[se].id!=L)throw"Bad ColumnRowUIDMapArchive";var ce=Sn(K[se].messages[0].data);ce[1]=[],ce[2]=[],ce[3]=[];for(var R=0;R<=n.e.c;++R){var A=[];A[1]=A[2]=[{type:0,data:mr(R+420690)}],ce[1].push({type:2,data:Kn(A)}),ce[2].push({type:0,data:mr(R)}),ce[3].push({type:0,data:mr(R)})}ce[4]=[],ce[5]=[],ce[6]=[];for(var C=0;C<=n.e.r;++C)A=[],A[1]=A[2]=[{type:0,data:mr(C+726270)}],ce[4].push({type:2,data:Kn(A)}),ce[5].push({type:0,data:mr(C)}),ce[6].push({type:0,data:mr(C)});K[se].messages[0].data=Kn(ce)}F.content=vl(ml(K)),F.size=F.content.length,delete P[46];var V=Sn(P[4][0].data);{V[7][0].data=mr(n.e.r+1);var b=Sn(V[1][0].data),S=$o(b[2][0].data);F=Ir.find(u,o[S].location),K=Us(js(F.content));{if(K[0].id!=S)throw"Bad HeaderStorageBucket";var k=Sn(K[0].messages[0].data);for(C=0;C<s.length;++C){var ie=Sn(k[2][0].data);ie[1][0].data=mr(C),ie[4][0].data=mr(s[C].length),k[2][C]={type:k[2][0].type,data:Kn(ie)}}K[0].messages[0].data=Kn(k)}F.content=vl(ml(K)),F.size=F.content.length;var ve=$o(V[2][0].data);F=Ir.find(u,o[ve].location),K=Us(js(F.content));{if(K[0].id!=ve)throw"Bad HeaderStorageBucket";for(k=Sn(K[0].messages[0].data),R=0;R<=n.e.c;++R)ie=Sn(k[2][0].data),ie[1][0].data=mr(R),ie[4][0].data=mr(n.e.r+1),k[2][R]={type:k[2][0].type,data:Kn(ie)};K[0].messages[0].data=Kn(k)}F.content=vl(ml(K)),F.size=F.content.length;var Te=$o(V[4][0].data);(function(){for(var D=Ir.find(u,o[Te].location),B=Us(js(D.content)),U,J=0;J<B.length;++J){var ae=B[J];ae.id==Te&&(U=ae)}var le=Sn(U.messages[0].data);{le[3]=[];var ue=[];a.forEach(function(We,Ze){ue[1]=[{type:0,data:mr(Ze)}],ue[2]=[{type:0,data:mr(1)}],ue[3]=[{type:2,data:WW(We)}],le[3].push({type:2,data:Kn(ue)})})}U.messages[0].data=Kn(le);var xe=ml(B),Be=vl(xe);D.content=Be,D.size=D.content.length})();var Ne=Sn(V[3][0].data);{var _e=Ne[1][0];delete Ne[2];var Ce=Sn(_e.data);{var Fe=$o(Ce[2][0].data);(function(){for(var D=Ir.find(u,o[Fe].location),B=Us(js(D.content)),U,J=0;J<B.length;++J){var ae=B[J];ae.id==Fe&&(U=ae)}var le=Sn(U.messages[0].data);{delete le[6],delete Ne[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var xe=0,Be=0;Be<=n.e.r;++Be){var We=Sn(ue);xe+=GW(We,s[Be],a),We[1][0].data=mr(Be),le[5].push({data:Kn(We),type:2})}le[1]=[{type:0,data:mr(n.e.c+1)}],le[2]=[{type:0,data:mr(n.e.r+1)}],le[3]=[{type:0,data:mr(xe)}],le[4]=[{type:0,data:mr(n.e.r+1)}]}U.messages[0].data=Kn(le);var Ze=ml(B),at=vl(Ze);D.content=at,D.size=D.content.length})()}_e.data=Kn(Ce)}V[3][0].data=Kn(Ne)}P[4][0].data=Kn(V)}p.messages[0].data=Kn(P);var nt=ml(g),E=vl(nt);return d.content=E,d.size=d.content.length,u}function YW(r){return function(t){for(var n=0;n!=r.length;++n){var i=r[n];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function r_(r){YW([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function XW(r,e){return e.bookType=="ods"?gS(r,e):e.bookType=="numbers"?KW(r,e):e.bookType=="xlsb"?JW(r,e):QW(r,e)}function JW(r,e){Nl=1024,r&&!r.SSF&&(r.SSF=Xi(tn)),r&&r.SSF&&(vg(),mg(r.SSF),e.revssf=_g(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Sf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=JI.indexOf(e.bookType)>-1,i=II();r_(e=e||{});var s=U2(),a="",o=0;if(e.cellXfs=[],bc(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",$t(s,a,CI(r.Props,e)),i.coreprops.push(a),vr(e.rels,2,a,ar.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var c=[],u=0;u<r.SheetNames.length;++u)(r.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(r.SheetNames[u]);r.Props.SheetNames=c}for(r.Props.Worksheets=r.Props.SheetNames.length,$t(s,a,kI(r.Props)),i.extprops.push(a),vr(e.rels,3,a,ar.EXT_PROPS),r.Custprops!==r.Props&&ii(r.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,LI(r.Custprops)),i.custprops.push(a),vr(e.rels,4,a,ar.CUST_PROPS)),o=1;o<=r.SheetNames.length;++o){var l={"!id":{}},d=r.Sheets[r.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,eW(o-1,a,e,r,l)),i.sheets.push(a),vr(e.wbrels,-1,"worksheets/sheet"+o+"."+t,ar.WS[0])}if(d){var p=d["!comments"],w=!1,_="";p&&p.length>0&&(_="xl/comments"+o+"."+t,$t(s,_,nW(p,_)),i.comments.push(_),vr(l,-1,"../comments"+o+"."+t,ar.CMNT),w=!0),d["!legacy"]&&w&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",YI(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}l["!id"].rId1&&$t(s,PI(a),Ul(l))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,rW(e.Strings,a,e)),i.strs.push(a),vr(e.wbrels,-1,"sharedStrings."+t,ar.SST)),a="xl/workbook."+t,$t(s,a,Zq(r,a)),i.workbooks.push(a),vr(e.rels,1,a,ar.WB),a="xl/theme/theme1.xml",$t(s,a,GI(r.Themes,e)),i.themes.push(a),vr(e.wbrels,-1,"theme/theme1.xml",ar.THEME),a="xl/styles."+t,$t(s,a,tW(r,a,e)),i.styles.push(a),vr(e.wbrels,-1,"styles."+t,ar.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",$t(s,a,r.vbaraw),i.vba.push(a),vr(e.wbrels,-1,"vbaProject.bin",ar.VBA)),a="xl/metadata."+t,$t(s,a,iW(a)),i.metadata.push(a),vr(e.wbrels,-1,"metadata."+t,ar.XLMETA),$t(s,"[Content_Types].xml",SI(i,e)),$t(s,"_rels/.rels",Ul(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Ul(e.wbrels)),delete e.revssf,delete e.ssf,s}function QW(r,e){Nl=1024,r&&!r.SSF&&(r.SSF=Xi(tn)),r&&r.SSF&&(vg(),mg(r.SSF),e.revssf=_g(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,Sf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=JI.indexOf(e.bookType)>-1,i=II();r_(e=e||{});var s=U2(),a="",o=0;if(e.cellXfs=[],bc(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",$t(s,a,CI(r.Props,e)),i.coreprops.push(a),vr(e.rels,2,a,ar.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var c=[],u=0;u<r.SheetNames.length;++u)(r.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(r.SheetNames[u]);r.Props.SheetNames=c}r.Props.Worksheets=r.Props.SheetNames.length,$t(s,a,kI(r.Props)),i.extprops.push(a),vr(e.rels,3,a,ar.EXT_PROPS),r.Custprops!==r.Props&&ii(r.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,LI(r.Custprops)),i.custprops.push(a),vr(e.rels,4,a,ar.CUST_PROPS));var l=["SheetJ5"];for(e.tcid=0,o=1;o<=r.SheetNames.length;++o){var d={"!id":{}},g=r.Sheets[r.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,aS(o-1,e,r,d)),i.sheets.push(a),vr(e.wbrels,-1,"worksheets/sheet"+o+"."+t,ar.WS[0])}if(g){var w=g["!comments"],_=!1,T="";if(w&&w.length>0){var P=!1;w.forEach(function(L){L[1].forEach(function(F){F.T==!0&&(P=!0)})}),P&&(T="xl/threadedComments/threadedComment"+o+"."+t,$t(s,T,NV(w,l,e)),i.threadedcomments.push(T),vr(d,-1,"../threadedComments/threadedComment"+o+"."+t,ar.TCMNT)),T="xl/comments"+o+"."+t,$t(s,T,XI(w)),i.comments.push(T),vr(d,-1,"../comments"+o+"."+t,ar.CMNT),_=!0}g["!legacy"]&&_&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",YI(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&$t(s,PI(a),Ul(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,jI(e.Strings,e)),i.strs.push(a),vr(e.wbrels,-1,"sharedStrings."+t,ar.SST)),a="xl/workbook."+t,$t(s,a,uS(r)),i.workbooks.push(a),vr(e.rels,1,a,ar.WB),a="xl/theme/theme1.xml",$t(s,a,GI(r.Themes,e)),i.themes.push(a),vr(e.wbrels,-1,"theme/theme1.xml",ar.THEME),a="xl/styles."+t,$t(s,a,HI(r,e)),i.styles.push(a),vr(e.wbrels,-1,"styles."+t,ar.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",$t(s,a,r.vbaraw),i.vba.push(a),vr(e.wbrels,-1,"vbaProject.bin",ar.VBA)),a="xl/metadata."+t,$t(s,a,KI()),i.metadata.push(a),vr(e.wbrels,-1,"metadata."+t,ar.XLMETA),l.length>1&&(a="xl/persons/person.xml",$t(s,a,CV(l)),i.people.push(a),vr(e.wbrels,-1,"persons/person.xml",ar.PEOPLE)),$t(s,"[Content_Types].xml",SI(i,e)),$t(s,"_rels/.rels",Ul(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Ul(e.wbrels)),delete e.revssf,delete e.ssf,s}function ZW(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=so(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function mS(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Nd(e.file,Ir.write(r,{type:lr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ir.write(r,e)}function ez(r,e){var t=Xi(e||{}),n=XW(r,t);return tz(n,t)}function tz(r,e){var t={},n=lr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=r.FullPaths?Ir.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(gg(i))}return e.password&&typeof encrypt_agile<"u"?mS(encrypt_agile(i,e.password),e):e.type==="file"?Nd(e.file,i):e.type=="string"?Ef(i):i}function rz(r,e){var t=e||{},n=_W(r,t);return mS(n,t)}function oa(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return ed(rd(n));case"binary":return rd(n);case"string":return r;case"file":return Nd(e.file,n,"utf8");case"buffer":return lr?po(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):oa(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function nz(r,e){switch(e.type){case"base64":return ed(r);case"binary":return r;case"string":return r;case"file":return Nd(e.file,r,"binary");case"buffer":return lr?po(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function _0(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?ed(t):e.type=="string"?Ef(t):t;case"file":return Nd(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function vS(r,e){RM(),qq(r);var t=Xi(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=vS(r,t);return t.type="array",gg(n)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=r.SheetNames.indexOf(t.sheet),!r.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return oa(mW(r,t),t);case"slk":case"sylk":return oa(VB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"htm":case"html":return oa(fS(r.Sheets[r.SheetNames[i]],t),t);case"txt":return nz(_S(r.Sheets[r.SheetNames[i]],t),t);case"csv":return oa(n_(r.Sheets[r.SheetNames[i]],t),t,"\uFEFF");case"dif":return oa(UB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"dbf":return _0(BB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"prn":return oa(jB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"rtf":return oa(KB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"eth":return oa(UI.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"fods":return oa(gS(r,t),t);case"wk1":return _0(x5.sheet_to_wk1(r.Sheets[r.SheetNames[i]],t),t);case"wk3":return _0(x5.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),_0(hS(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),rz(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return ez(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function iz(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function sz(r,e,t){var n={};return n.type="file",n.file=e,iz(n),vS(r,n)}function az(r,e,t,n,i,s,a,o){var c=ri(t),u=o.defval,l=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||r[t])for(var p=e.s.c;p<=e.e.c;++p){var w=a?r[t][p]:r[n[p]+c];if(w===void 0||w.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var _=w.v;switch(w.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+w.t)}if(s[p]!=null){if(_==null)if(w.t=="e"&&_===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(l&&_===null)g[s[p]]=null;else continue;else g[s[p]]=l&&(w.t!=="n"||w.t==="n"&&o.rawNumbers!==!1)?_:ao(w,_,o);_!=null&&(d=!1)}}return{row:g,isempty:d}}function bp(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},l=u.range!=null?u.range:r["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof l){case"string":c=Vr(l);break;case"number":c=Vr(r["!ref"]),c.s.r=l;break;default:c=l}n>0&&(i=0);var d=ri(c.s.r),g=[],p=[],w=0,_=0,T=Array.isArray(r),P=c.s.r,L=0,F={};T&&!r[P]&&(r[P]=[]);var K=u.skipHidden&&r["!cols"]||[],se=u.skipHidden&&r["!rows"]||[];for(L=c.s.c;L<=c.e.c;++L)if(!(K[L]||{}).hidden)switch(g[L]=di(L),t=T?r[P][L]:r[g[L]+d],n){case 1:s[L]=L-c.s.c;break;case 2:s[L]=g[L];break;case 3:s[L]=u.header[L-c.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=ao(t,null,u),_=F[a]||0,!_)F[a]=1;else{do o=a+"_"+_++;while(F[o]);F[a]=_,F[o]=1}s[L]=o}for(P=c.s.r+i;P<=c.e.r;++P)if(!(se[P]||{}).hidden){var ce=az(r,c,P,g,n,s,T,u);(ce.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[w++]=ce.row)}return p.length=w,p}var N5=/"/g;function oz(r,e,t,n,i,s,a,o){for(var c=!0,u=[],l="",d=ri(t),g=e.s.c;g<=e.e.c;++g)if(n[g]){var p=o.dense?(r[t]||[])[g]:r[n[g]+d];if(p==null)l="";else if(p.v!=null){c=!1,l=""+(o.rawNumbers&&p.t=="n"?p.v:ao(p,null,o));for(var w=0,_=0;w!==l.length;++w)if((_=l.charCodeAt(w))===i||_===s||_===34||o.forceQuotes){l='"'+l.replace(N5,'""')+'"';break}l=="ID"&&(l='"ID"')}else p.f!=null&&!p.F?(c=!1,l="="+p.f,l.indexOf(",")>=0&&(l='"'+l.replace(N5,'""')+'"')):l="";u.push(l)}return o.blankrows===!1&&c?null:u.join(a)}function n_(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var i=Vr(r["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),l="",d=[];n.dense=Array.isArray(r);for(var g=n.skipHidden&&r["!cols"]||[],p=n.skipHidden&&r["!rows"]||[],w=i.s.c;w<=i.e.c;++w)(g[w]||{}).hidden||(d[w]=di(w));for(var _=0,T=i.s.r;T<=i.e.r;++T)(p[T]||{}).hidden||(l=oz(r,i,T,d,a,c,s,n),l!=null&&(n.strip&&(l=l.replace(u,"")),(l||n.blankrows!==!1)&&t.push((_++?o:"")+l)));return delete n.dense,t.join("")}function _S(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=n_(r,e);return t}function cz(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var i=Vr(r["!ref"]),s="",a=[],o,c=[],u=Array.isArray(r);for(o=i.s.c;o<=i.e.c;++o)a[o]=di(o);for(var l=i.s.r;l<=i.e.r;++l)for(s=ri(l),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(r[l]||[])[o]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}c[c.length]=e+"="+n}return c}function yS(r,e,t){var n=t||{},i=+!n.skipHeader,s=r||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Bn(n.origin):n.origin;a=c.r,o=c.c}var u,l={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Vr(s["!ref"]);l.e.c=Math.max(l.e.c,d.e.c),l.e.r=Math.max(l.e.r,d.e.r),a==-1&&(a=d.e.r+1,l.e.r=a+e.length-1+i)}else a==-1&&(a=0,l.e.r=e.length-1+i);var g=n.header||[],p=0;e.forEach(function(_,T){ii(_).forEach(function(P){(p=g.indexOf(P))==-1&&(g[p=g.length]=P);var L=_[P],F="z",K="",se=xr({c:o+p,r:a+T+i});u=sd(s,se),L&&typeof L=="object"&&!(L instanceof Date)?s[se]=L:(typeof L=="number"?F="n":typeof L=="boolean"?F="b":typeof L=="string"?F="s":L instanceof Date?(F="d",n.cellDates||(F="n",L=Yi(L)),K=n.dateNF||tn[14]):L===null&&n.nullError&&(F="e",L=0),u?(u.t=F,u.v=L,delete u.w,delete u.R,K&&(u.z=K)):s[se]=u={t:F,v:L},K&&(u.z=K))})}),l.e.c=Math.max(l.e.c,o+g.length-1);var w=ri(a);if(i)for(p=0;p<g.length;++p)s[di(p+o)+w]={t:"s",v:g[p]};return s["!ref"]=Tn(l),s}function uz(r,e){return yS(null,r,e)}function sd(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=Bn(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?sd(r,xr(e)):sd(r,xr({r:e,c:t||0}))}function lz(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function hz(){return{SheetNames:[],Sheets:{}}}function fz(r,e,t,n){var i=1;if(!t)for(;i<=65535&&r.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&r.SheetNames.indexOf(t=a+i)!=-1;++i);}if(cS(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function dz(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=lz(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function pz(r,e){return r.z=e,r}function wS(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function gz(r,e,t){return wS(r,"#"+e,t)}function mz(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function vz(r,e,t,n){for(var i=typeof e!="string"?e:Vr(e),s=typeof e=="string"?e:Tn(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=sd(r,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=t,n&&(c.D=!0))}return r}var bm={encode_col:di,encode_row:ri,encode_cell:xr,encode_range:Tn,decode_col:$2,decode_row:H2,split_cell:R9,decode_cell:Bn,decode_range:gs,format_cell:ao,sheet_add_aoa:wI,sheet_add_json:yS,sheet_add_dom:dS,aoa_to_sheet:Sh,json_to_sheet:uz,table_to_sheet:pS,table_to_book:UW,sheet_to_csv:n_,sheet_to_txt:_S,sheet_to_json:bp,sheet_to_html:fS,sheet_to_formulae:cz,sheet_to_row_object_array:bp,sheet_get_cell:sd,book_new:hz,book_append_sheet:fz,book_set_sheet_visibility:dz,cell_set_number_format:pz,cell_set_hyperlink:wS,cell_set_internal_link:gz,cell_add_comment:mz,sheet_set_array_formula:vz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const _z="modulepreload",yz=function(r){return"/"+r},C5={},I1=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=yz(c),c in C5)return;C5[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":_z,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((g,p)=>{d.addEventListener("load",g),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function wr(r){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(r)}var fi=Uint8Array,ds=Uint16Array,i_=Int32Array,Eg=new fi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),bg=new fi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),S1=new fi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xS=function(r,e){for(var t=new ds(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new i_(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},TS=xS(Eg,2),ES=TS.b,P1=TS.r;ES[28]=258,P1[258]=28;var bS=xS(bg,0),wz=bS.b,R5=bS.r,N1=new ds(32768);for(var Br=0;Br<32768;++Br){var Go=(Br&43690)>>1|(Br&21845)<<1;Go=(Go&52428)>>2|(Go&13107)<<2,Go=(Go&61680)>>4|(Go&3855)<<4,N1[Br]=((Go&65280)>>8|(Go&255)<<8)>>1}var wa=function(r,e,t){for(var n=r.length,i=0,s=new ds(e);i<n;++i)r[i]&&++s[r[i]-1];var a=new ds(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ds(1<<e);var c=15-e;for(i=0;i<n;++i)if(r[i])for(var u=i<<4|r[i],l=e-r[i],d=a[r[i]-1]++<<l,g=d|(1<<l)-1;d<=g;++d)o[N1[d]>>c]=u}else for(o=new ds(n),i=0;i<n;++i)r[i]&&(o[i]=N1[a[r[i]-1]++]>>15-r[i]);return o},mc=new fi(288);for(var Br=0;Br<144;++Br)mc[Br]=8;for(var Br=144;Br<256;++Br)mc[Br]=9;for(var Br=256;Br<280;++Br)mc[Br]=7;for(var Br=280;Br<288;++Br)mc[Br]=8;var ad=new fi(32);for(var Br=0;Br<32;++Br)ad[Br]=5;var xz=wa(mc,9,0),Tz=wa(mc,9,1),Ez=wa(ad,5,0),bz=wa(ad,5,1),Am=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},qs=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},Im=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},s_=function(r){return(r+7)/8|0},AS=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new fi(r.subarray(e,t))},Az=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zs=function(r,e,t){var n=new Error(e||Az[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,zs),!t)throw n;return n},Iz=function(r,e,t,n){var i=r.length,s=0;if(!i||e.f&&!e.l)return t||new fi(0);var a=!t,o=a||e.i!=2,c=e.i;a&&(t=new fi(i*3));var u=function(Be){var We=t.length;if(Be>We){var Ze=new fi(Math.max(We*2,Be));Ze.set(t),t=Ze}},l=e.f||0,d=e.p||0,g=e.b||0,p=e.l,w=e.d,_=e.m,T=e.n,P=i*8;do{if(!p){l=qs(r,d,1);var L=qs(r,d+1,3);if(d+=3,L)if(L==1)p=Tz,w=bz,_=9,T=5;else if(L==2){var ce=qs(r,d,31)+257,R=qs(r,d+10,15)+4,A=ce+qs(r,d+5,31)+1;d+=14;for(var C=new fi(A),V=new fi(19),b=0;b<R;++b)V[S1[b]]=qs(r,d+b*3,7);d+=R*3;for(var S=Am(V),k=(1<<S)-1,ie=wa(V,S,1),b=0;b<A;){var ve=ie[qs(r,d,k)];d+=ve&15;var F=ve>>4;if(F<16)C[b++]=F;else{var Te=0,Ne=0;for(F==16?(Ne=3+qs(r,d,3),d+=2,Te=C[b-1]):F==17?(Ne=3+qs(r,d,7),d+=3):F==18&&(Ne=11+qs(r,d,127),d+=7);Ne--;)C[b++]=Te}}var _e=C.subarray(0,ce),Ce=C.subarray(ce);_=Am(_e),T=Am(Ce),p=wa(_e,_,1),w=wa(Ce,T,1)}else zs(1);else{var F=s_(d)+4,K=r[F-4]|r[F-3]<<8,se=F+K;if(se>i){c&&zs(0);break}o&&u(g+K),t.set(r.subarray(F,se),g),e.b=g+=K,e.p=d=se*8,e.f=l;continue}if(d>P){c&&zs(0);break}}o&&u(g+131072);for(var Fe=(1<<_)-1,nt=(1<<T)-1,E=d;;E=d){var Te=p[Im(r,d)&Fe],D=Te>>4;if(d+=Te&15,d>P){c&&zs(0);break}if(Te||zs(2),D<256)t[g++]=D;else if(D==256){E=d,p=null;break}else{var B=D-254;if(D>264){var b=D-257,U=Eg[b];B=qs(r,d,(1<<U)-1)+ES[b],d+=U}var J=w[Im(r,d)&nt],ae=J>>4;J||zs(3),d+=J&15;var Ce=wz[ae];if(ae>3){var U=bg[ae];Ce+=Im(r,d)&(1<<U)-1,d+=U}if(d>P){c&&zs(0);break}o&&u(g+131072);var le=g+B;if(g<Ce){var ue=s-Ce,xe=Math.min(Ce,le);for(ue+g<0&&zs(3);g<xe;++g)t[g]=n[ue+g]}for(;g<le;++g)t[g]=t[g-Ce]}}e.l=p,e.p=E,e.b=g,e.f=l,p&&(l=1,e.m=_,e.d=w,e.n=T)}while(!l);return g!=t.length&&a?AS(t,0,g):t.subarray(0,g)},qa=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},rf=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},Sm=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:SS,l:0};if(i==1){var a=new fi(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(se,ce){return se.f-ce.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,l=1,d=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};l!=i-1;)o=t[t[u].f<t[d].f?u++:d++],c=t[u!=l&&t[u].f<t[d].f?u++:d++],t[l++]={s:-1,f:o.f+c.f,l:o,r:c};for(var g=s[0].s,n=1;n<i;++n)s[n].s>g&&(g=s[n].s);var p=new ds(g+1),w=C1(t[l-1],p,0);if(w>e){var n=0,_=0,T=w-e,P=1<<T;for(s.sort(function(ce,R){return p[R.s]-p[ce.s]||ce.f-R.f});n<i;++n){var L=s[n].s;if(p[L]>e)_+=P-(1<<w-p[L]),p[L]=e;else break}for(_>>=T;_>0;){var F=s[n].s;p[F]<e?_-=1<<e-p[F]++-1:++n}for(;n>=0&&_;--n){var K=s[n].s;p[K]==e&&(--p[K],++_)}w=e}return{t:new fi(p),l:w}},C1=function(r,e,t){return r.s==-1?Math.max(C1(r.l,e,t+1),C1(r.r,e,t+1)):e[r.s]=t},k5=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new ds(++e),n=0,i=r[0],s=1,a=function(c){t[n++]=c},o=1;o<=e;++o)if(r[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=r[o]}return{c:t.subarray(0,n),n:e}},nf=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},IS=function(r,e,t){var n=t.length,i=s_(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},L5=function(r,e,t,n,i,s,a,o,c,u,l){qa(e,l++,t),++i[256];for(var d=Sm(i,15),g=d.t,p=d.l,w=Sm(s,15),_=w.t,T=w.l,P=k5(g),L=P.c,F=P.n,K=k5(_),se=K.c,ce=K.n,R=new ds(19),A=0;A<L.length;++A)++R[L[A]&31];for(var A=0;A<se.length;++A)++R[se[A]&31];for(var C=Sm(R,7),V=C.t,b=C.l,S=19;S>4&&!V[S1[S-1]];--S);var k=u+5<<3,ie=nf(i,mc)+nf(s,ad)+a,ve=nf(i,g)+nf(s,_)+a+14+3*S+nf(R,V)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&k<=ie&&k<=ve)return IS(e,l,r.subarray(c,c+u));var Te,Ne,_e,Ce;if(qa(e,l,1+(ve<ie)),l+=2,ve<ie){Te=wa(g,p,0),Ne=g,_e=wa(_,T,0),Ce=_;var Fe=wa(V,b,0);qa(e,l,F-257),qa(e,l+5,ce-1),qa(e,l+10,S-4),l+=14;for(var A=0;A<S;++A)qa(e,l+3*A,V[S1[A]]);l+=3*S;for(var nt=[L,se],E=0;E<2;++E)for(var D=nt[E],A=0;A<D.length;++A){var B=D[A]&31;qa(e,l,Fe[B]),l+=V[B],B>15&&(qa(e,l,D[A]>>5&127),l+=D[A]>>12)}}else Te=xz,Ne=mc,_e=Ez,Ce=ad;for(var A=0;A<o;++A){var U=n[A];if(U>255){var B=U>>18&31;rf(e,l,Te[B+257]),l+=Ne[B+257],B>7&&(qa(e,l,U>>23&31),l+=Eg[B]);var J=U&31;rf(e,l,_e[J]),l+=Ce[J],J>3&&(rf(e,l,U>>5&8191),l+=bg[J])}else rf(e,l,Te[U]),l+=Ne[U]}return rf(e,l,Te[256]),l+Ne[256]},Sz=new i_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),SS=new fi(0),Pz=function(r,e,t,n,i,s){var a=s.z||r.length,o=new fi(n+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(n,o.length-i),u=s.l,l=(s.r||0)&7;if(e){l&&(c[0]=s.r>>3);for(var d=Sz[e-1],g=d>>13,p=d&8191,w=(1<<t)-1,_=s.p||new ds(32768),T=s.h||new ds(w+1),P=Math.ceil(t/3),L=2*P,F=function(at){return(r[at]^r[at+1]<<P^r[at+2]<<L)&w},K=new i_(25e3),se=new ds(288),ce=new ds(32),R=0,A=0,C=s.i||0,V=0,b=s.w||0,S=0;C+2<a;++C){var k=F(C),ie=C&32767,ve=T[k];if(_[ie]=ve,T[k]=ie,b<=C){var Te=a-C;if((R>7e3||V>24576)&&(Te>423||!u)){l=L5(r,c,0,K,se,ce,A,V,S,C-S,l),V=R=A=0,S=C;for(var Ne=0;Ne<286;++Ne)se[Ne]=0;for(var Ne=0;Ne<30;++Ne)ce[Ne]=0}var _e=2,Ce=0,Fe=p,nt=ie-ve&32767;if(Te>2&&k==F(C-nt))for(var E=Math.min(g,Te)-1,D=Math.min(32767,C),B=Math.min(258,Te);nt<=D&&--Fe&&ie!=ve;){if(r[C+_e]==r[C+_e-nt]){for(var U=0;U<B&&r[C+U]==r[C+U-nt];++U);if(U>_e){if(_e=U,Ce=nt,U>E)break;for(var J=Math.min(nt,U-2),ae=0,Ne=0;Ne<J;++Ne){var le=C-nt+Ne&32767,ue=_[le],xe=le-ue&32767;xe>ae&&(ae=xe,ve=le)}}}ie=ve,ve=_[ie],nt+=ie-ve&32767}if(Ce){K[V++]=268435456|P1[_e]<<18|R5[Ce];var Be=P1[_e]&31,We=R5[Ce]&31;A+=Eg[Be]+bg[We],++se[257+Be],++ce[We],b=C+_e,++R}else K[V++]=r[C],++se[r[C]]}}for(C=Math.max(C,b);C<a;++C)K[V++]=r[C],++se[r[C]];l=L5(r,c,u,K,se,ce,A,V,S,C-S,l),u||(s.r=l&7|c[l/8|0]<<3,l-=7,s.h=T,s.p=_,s.i=C,s.w=b)}else{for(var C=s.w||0;C<a+u;C+=65535){var Ze=C+65535;Ze>=a&&(c[l/8|0]=u,Ze=a),l=IS(c,l+1,r.subarray(C,Ze))}s.i=a}return AS(o,0,n+s_(l)+i)},PS=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=t[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},Nz=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new fi(s.length+r.length);a.set(s),a.set(r,s.length),r=a,i.w=s.length}return Pz(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},NS=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},Cz=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=PS();i.p(e.dictionary),NS(r,2,i.d())}},Rz=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&zs(6,"invalid zlib data"),(r[1]>>5&1)==1&&zs(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function R1(r,e){e||(e={});var t=PS();t.p(r);var n=Nz(r,e,e.dictionary?6:2,4);return Cz(n,e),NS(n,n.length-4,t.d()),n}function kz(r,e){return Iz(r.subarray(Rz(r),-4),{i:2},e,e)}var Lz=typeof TextDecoder<"u"&&new TextDecoder,Dz=0;try{Lz.decode(SS,{stream:!0}),Dz=1}catch{}var Ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Pm(){Ot.console&&typeof Ot.console.log=="function"&&Ot.console.log.apply(Ot.console,arguments)}var Cr={log:Pm,warn:function(r){Ot.console&&(typeof Ot.console.warn=="function"?Ot.console.warn.apply(Ot.console,arguments):Pm.call(null,arguments))},error:function(r){Ot.console&&(typeof Ot.console.error=="function"?Ot.console.error.apply(Ot.console,arguments):Pm(r))}};function Nm(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){$c(n.response,e,t)},n.onerror=function(){Cr.error("could not download file")},n.send()}function D5(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function y0(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Pf,k1,$c=Ot.saveAs||((typeof window>"u"?"undefined":wr(window))!=="object"||window!==Ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Ot.URL||Ot.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?D5(i.href)?Nm(r,e,t):y0(i,i.target="_blank"):y0(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){y0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(D5(r))Nm(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){y0(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:wr(s)!=="object"&&(Cr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Nm(r,e,t);var i=r.type==="application/octet-stream",s=/constructor/i.test(Ot.HTMLElement)||Ot.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":wr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var l=o.result;l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location=l,n=null},o.readAsDataURL(r)}else{var c=Ot.URL||Ot.webkitURL,u=c.createObjectURL(r);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function CS(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,s=t[n].process,a=i.exec(r);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Cm(r,e){var t=r[0],n=r[1],i=r[2],s=r[3];t=ci(t,n,i,s,e[0],7,-680876936),s=ci(s,t,n,i,e[1],12,-389564586),i=ci(i,s,t,n,e[2],17,606105819),n=ci(n,i,s,t,e[3],22,-1044525330),t=ci(t,n,i,s,e[4],7,-176418897),s=ci(s,t,n,i,e[5],12,1200080426),i=ci(i,s,t,n,e[6],17,-1473231341),n=ci(n,i,s,t,e[7],22,-45705983),t=ci(t,n,i,s,e[8],7,1770035416),s=ci(s,t,n,i,e[9],12,-1958414417),i=ci(i,s,t,n,e[10],17,-42063),n=ci(n,i,s,t,e[11],22,-1990404162),t=ci(t,n,i,s,e[12],7,1804603682),s=ci(s,t,n,i,e[13],12,-40341101),i=ci(i,s,t,n,e[14],17,-1502002290),t=ui(t,n=ci(n,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ui(s,t,n,i,e[6],9,-1069501632),i=ui(i,s,t,n,e[11],14,643717713),n=ui(n,i,s,t,e[0],20,-373897302),t=ui(t,n,i,s,e[5],5,-701558691),s=ui(s,t,n,i,e[10],9,38016083),i=ui(i,s,t,n,e[15],14,-660478335),n=ui(n,i,s,t,e[4],20,-405537848),t=ui(t,n,i,s,e[9],5,568446438),s=ui(s,t,n,i,e[14],9,-1019803690),i=ui(i,s,t,n,e[3],14,-187363961),n=ui(n,i,s,t,e[8],20,1163531501),t=ui(t,n,i,s,e[13],5,-1444681467),s=ui(s,t,n,i,e[2],9,-51403784),i=ui(i,s,t,n,e[7],14,1735328473),t=li(t,n=ui(n,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=li(s,t,n,i,e[8],11,-2022574463),i=li(i,s,t,n,e[11],16,1839030562),n=li(n,i,s,t,e[14],23,-35309556),t=li(t,n,i,s,e[1],4,-1530992060),s=li(s,t,n,i,e[4],11,1272893353),i=li(i,s,t,n,e[7],16,-155497632),n=li(n,i,s,t,e[10],23,-1094730640),t=li(t,n,i,s,e[13],4,681279174),s=li(s,t,n,i,e[0],11,-358537222),i=li(i,s,t,n,e[3],16,-722521979),n=li(n,i,s,t,e[6],23,76029189),t=li(t,n,i,s,e[9],4,-640364487),s=li(s,t,n,i,e[12],11,-421815835),i=li(i,s,t,n,e[15],16,530742520),t=hi(t,n=li(n,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=hi(s,t,n,i,e[7],10,1126891415),i=hi(i,s,t,n,e[14],15,-1416354905),n=hi(n,i,s,t,e[5],21,-57434055),t=hi(t,n,i,s,e[12],6,1700485571),s=hi(s,t,n,i,e[3],10,-1894986606),i=hi(i,s,t,n,e[10],15,-1051523),n=hi(n,i,s,t,e[1],21,-2054922799),t=hi(t,n,i,s,e[8],6,1873313359),s=hi(s,t,n,i,e[15],10,-30611744),i=hi(i,s,t,n,e[6],15,-1560198380),n=hi(n,i,s,t,e[13],21,1309151649),t=hi(t,n,i,s,e[4],6,-145523070),s=hi(s,t,n,i,e[11],10,-1120210379),i=hi(i,s,t,n,e[2],15,718787259),n=hi(n,i,s,t,e[9],21,-343485551),r[0]=tc(t,r[0]),r[1]=tc(n,r[1]),r[2]=tc(i,r[2]),r[3]=tc(s,r[3])}function Ag(r,e,t,n,i,s){return e=tc(tc(e,r),tc(n,s)),tc(e<<i|e>>>32-i,t)}function ci(r,e,t,n,i,s,a){return Ag(e&t|~e&n,r,e,i,s,a)}function ui(r,e,t,n,i,s,a){return Ag(e&n|t&~n,r,e,i,s,a)}function li(r,e,t,n,i,s,a){return Ag(e^t^n,r,e,i,s,a)}function hi(r,e,t,n,i,s,a){return Ag(t^(e|~n),r,e,i,s,a)}function RS(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)Cm(n,Fz(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Cm(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Cm(n,i),n}function Fz(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}Pf=Ot.atob.bind(Ot),k1=Ot.btoa.bind(Ot);var F5="0123456789abcdef".split("");function Oz(r){for(var e="",t=0;t<4;t++)e+=F5[r>>8*t+4&15]+F5[r>>8*t&15];return e}function Mz(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function L1(r){return RS(r).map(Mz).join("")}var Bz=function(r){for(var e=0;e<r.length;e++)r[e]=Oz(r[e]);return r.join("")}(RS("hello"))!="5d41402abc4b2a76b9719d911017c592";function tc(r,e){if(Bz){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function D1(r,e){var t,n,i,s;if(r!==t){for(var a=(i=r,s=1+(256/r.length>>0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var l=o[c];u=(u+l+a.charCodeAt(c))%256,o[c]=o[u],o[u]=l}t=r,n=o}else o=n;var d=e.length,g=0,p=0,w="";for(c=0;c<d;c++)p=(p+(l=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=l,a=o[(o[g]+o[p])%256],w+=String.fromCharCode(e.charCodeAt(c)^a);return w}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var O5={print:4,modify:8,copy:16,"annot-forms":32};function Il(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(O5.perm!==void 0)throw new Error("Invalid permission: "+o);i+=O5[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=L1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=D1(this.encryptionKey,this.padding)}function Sl(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=r[n]}return e}function M5(r){if(wr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!i],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(r,n)}catch(o){Ot.console&&Cr.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ap(r){if(!(this instanceof Ap))return new Ap(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function kS(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Zc(r,e,t,n,i){if(!(this instanceof Zc))return new Zc(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,kS.call(this,n,i)}function Cl(r,e,t,n,i){if(!(this instanceof Cl))return new Cl(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,kS.call(this,n,i)}function Dt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,c=16,u="S",l=null;wr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(l=r.encryption||null)!==null&&(l.userPassword=l.userPassword||"",l.ownerPassword=l.ownerPassword||"",l.userPermissions=l.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(c=r.floatPrecision),u=r.defaultPathOperation||"S"),a=r.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=M5;var w="1.3",_=p.__private__.getPdfVersion=function(){return w};p.__private__.setPdfVersion=function(v){w=v};var T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return T};var P=p.__private__.getPageFormat=function(v){return T[v]};i=i||"a4";var L={COMPAT:"compat",ADVANCED:"advanced"},F=L.COMPAT;function K(){this.saveGraphicsState(),ne(new wt(pt,0,0,-pt,0,ai()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),u="n",F=L.ADVANCED}function se(){this.restoreGraphicsState(),u="S",F=L.COMPAT}var ce=p.__private__.combineFontStyleAndFontWeight=function(v,O){if(v=="bold"&&O=="normal"||v=="bold"&&O==400||v=="normal"&&O=="italic"||v=="bold"&&O=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return O&&(v=O==400||O==="normal"?v==="italic"?"italic":"normal":O!=700&&O!=="bold"||v!=="normal"?(O==700?"bold":O)+""+v:"bold"),v};p.advancedAPI=function(v){var O=F===L.COMPAT;return O&&K.call(this),typeof v!="function"||(v(this),O&&se.call(this)),this},p.compatAPI=function(v){var O=F===L.ADVANCED;return O&&se.call(this),typeof v!="function"||(v(this),O&&K.call(this)),this},p.isAdvancedAPI=function(){return F===L.ADVANCED};var R,A=function(v){if(F!==L.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=p.roundToPrecision=p.__private__.roundToPrecision=function(v,O){var re=e||O;if(isNaN(v)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(re).replace(/0+$/,"")};R=p.hpf=p.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return C(v,16)};var V=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return C(v,2)},b=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return C(v,3)},S=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return F===L.COMPAT?v*pt:F===L.ADVANCED?v:void 0},k=function(v){return F===L.COMPAT?ai()-v:F===L.ADVANCED?v:void 0},ie=function(v){return S(k(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ve,Te="00000000000000000000000000000000",Ne=p.__private__.getFileId=function(){return Te},_e=p.__private__.setFileId=function(v){return Te=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Te.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),l!==null&&(Or=new Il(l.userPermissions,l.userPassword,l.ownerPassword,Te)),Te};p.setFileId=function(v){return _e(v),this},p.getFileId=function(){return Ne()};var Ce=p.__private__.convertDateToPDFDate=function(v){var O=v.getTimezoneOffset(),re=O<0?"+":"-",oe=Math.floor(Math.abs(O/60)),ge=Math.abs(O%60),Oe=[re,B(oe),"'",B(ge),"'"].join("");return["D:",v.getFullYear(),B(v.getMonth()+1),B(v.getDate()),B(v.getHours()),B(v.getMinutes()),B(v.getSeconds()),Oe].join("")},Fe=p.__private__.convertPDFDateToDate=function(v){var O=parseInt(v.substr(2,4),10),re=parseInt(v.substr(6,2),10)-1,oe=parseInt(v.substr(8,2),10),ge=parseInt(v.substr(10,2),10),Oe=parseInt(v.substr(12,2),10),Ye=parseInt(v.substr(14,2),10);return new Date(O,re,oe,ge,Oe,Ye,0)},nt=p.__private__.setCreationDate=function(v){var O;if(v===void 0&&(v=new Date),v instanceof Date)O=Ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");O=v}return ve=O},E=p.__private__.getCreationDate=function(v){var O=ve;return v==="jsDate"&&(O=Fe(ve)),O};p.setCreationDate=function(v){return nt(v),this},p.getCreationDate=function(v){return E(v)};var D,B=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},U=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},J=0,ae=[],le=[],ue=0,xe=[],Be=[],We=!1,Ze=le,at=function(){J=0,ue=0,le=[],ae=[],xe=[],Y=Ur(),X=Ur()};p.__private__.setCustomOutputDestination=function(v){We=!0,Ze=v};var ke=function(v){We||(Ze=v)};p.__private__.resetCustomOutputDestination=function(){We=!1,Ze=le};var ne=p.__private__.out=function(v){return v=v.toString(),ue+=v.length+1,Ze.push(v),Ze},ze=p.__private__.write=function(v){return ne(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},_t=p.__private__.getArrayBuffer=function(v){for(var O=v.length,re=new ArrayBuffer(O),oe=new Uint8Array(re);O--;)oe[O]=v.charCodeAt(O);return re},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return $e};var rt=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return rt=F===L.ADVANCED?v/pt:v,this};var ct,ut=p.__private__.getFontSize=p.getFontSize=function(){return F===L.COMPAT?rt:rt*pt},Et=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return Et=v,this},p.__private__.getR2L=p.getR2L=function(){return Et};var At,Ft=p.__private__.setZoomMode=function(v){var O=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ct=v;else if(isNaN(v)){if(O.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ct=v}else ct=parseInt(v,10)};p.__private__.getZoomMode=function(){return ct};var It,Ct=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');At=v};p.__private__.getPageMode=function(){return At};var Ht=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');It=v};p.__private__.getLayoutMode=function(){return It},p.__private__.setDisplayMode=p.setDisplayMode=function(v,O,re){return Ft(v),Ht(O),Ct(re),this};var Rt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(Rt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rt[v]},p.__private__.getDocumentProperties=function(){return Rt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var O in Rt)Rt.hasOwnProperty(O)&&v[O]&&(Rt[O]=v[O]);return this},p.__private__.setDocumentProperty=function(v,O){if(Object.keys(Rt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rt[v]=O};var qt,pt,Dr,Gt,qn,tr={},Tr={},Li=[],Kt={},Qi={},Er={},bn={},mi=null,cr=0,Nt=[],er=new M5(p),Di=r.hotfixes||[],Kr={},Rn={},vi=[],wt=function v(O,re,oe,ge,Oe,Ye){if(!(this instanceof v))return new v(O,re,oe,ge,Oe,Ye);isNaN(O)&&(O=1),isNaN(re)&&(re=0),isNaN(oe)&&(oe=0),isNaN(ge)&&(ge=1),isNaN(Oe)&&(Oe=0),isNaN(Ye)&&(Ye=0),this._matrix=[O,re,oe,ge,Oe,Ye]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(v)},wt.prototype.multiply=function(v){var O=v.sx*this.sx+v.shy*this.shx,re=v.sx*this.shy+v.shy*this.sy,oe=v.shx*this.sx+v.sy*this.shx,ge=v.shx*this.shy+v.sy*this.sy,Oe=v.tx*this.sx+v.ty*this.shx+this.tx,Ye=v.tx*this.shy+v.ty*this.sy+this.ty;return new wt(O,re,oe,ge,Oe,Ye)},wt.prototype.decompose=function(){var v=this.sx,O=this.shy,re=this.shx,oe=this.sy,ge=this.tx,Oe=this.ty,Ye=Math.sqrt(v*v+O*O),dt=(v/=Ye)*re+(O/=Ye)*oe;re-=v*dt,oe-=O*dt;var f=Math.sqrt(re*re+oe*oe);return dt/=f,v*(oe/=f)<O*(re/=f)&&(v=-v,O=-O,dt=-dt,Ye=-Ye),{scale:new wt(Ye,0,0,f,0,0),translate:new wt(1,0,0,1,ge,Oe),rotate:new wt(v,O,-O,v,0,0),skew:new wt(1,0,dt,1,0,0)}},wt.prototype.toString=function(v){return this.join(" ")},wt.prototype.inversed=function(){var v=this.sx,O=this.shy,re=this.shx,oe=this.sy,ge=this.tx,Oe=this.ty,Ye=1/(v*oe-O*re),dt=oe*Ye,f=-O*Ye,x=-re*Ye,N=v*Ye;return new wt(dt,f,x,N,-dt*ge-x*Oe,-f*ge-N*Oe)},wt.prototype.applyToPoint=function(v){var O=v.x*this.sx+v.y*this.shx+this.tx,re=v.x*this.shy+v.y*this.sy+this.ty;return new La(O,re)},wt.prototype.applyToRectangle=function(v){var O=this.applyToPoint(v),re=this.applyToPoint(new La(v.x+v.w,v.y+v.h));return new So(O.x,O.y,re.x-O.x,re.y-O.y)},wt.prototype.clone=function(){var v=this.sx,O=this.shy,re=this.shx,oe=this.sy,ge=this.tx,Oe=this.ty;return new wt(v,O,re,oe,ge,Oe)},p.Matrix=wt;var si=p.matrixMult=function(v,O){return O.multiply(v)},mn=new wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=mn;var Yr=function(v,O){if(!Qi[v]){var re=(O instanceof Zc?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);O.id=re,Qi[v]=re,Kt[re]=O,er.publish("addPattern",O)}};p.ShadingPattern=Zc,p.TilingPattern=Cl,p.addShadingPattern=function(v,O){return A("addShadingPattern()"),Yr(v,O),this},p.beginTilingPattern=function(v){A("beginTilingPattern()"),Po(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,O){A("endTilingPattern()"),O.stream=Be[D].join(`
`),Yr(v,O),er.publish("endTilingPattern",O),vi.pop().restore()};var Hr=p.__private__.newObject=function(){var v=Ur();return j(v,!0),v},Ur=p.__private__.newObjectDeferred=function(){return J++,ae[J]=function(){return ue},J},j=function(v,O){return O=typeof O=="boolean"&&O,ae[v]=ue,O&&ne(v+" 0 obj"),v},ee=p.__private__.newAdditionalObject=function(){var v={objId:Ur(),content:""};return xe.push(v),v},Y=Ur(),X=Ur(),Z=p.__private__.decodeColorString=function(v){var O=v.split(" ");if(O.length!==2||O[1]!=="g"&&O[1]!=="G")O.length===5&&(O[4]==="k"||O[4]==="K")&&(O=[(1-O[0])*(1-O[3]),(1-O[1])*(1-O[3]),(1-O[2])*(1-O[3]),"r"]);else{var re=parseFloat(O[0]);O=[re,re,re,"r"]}for(var oe="#",ge=0;ge<3;ge++)oe+=("0"+Math.floor(255*parseFloat(O[ge])).toString(16)).slice(-2);return oe},te=p.__private__.encodeColorString=function(v){var O;typeof v=="string"&&(v={ch1:v});var re=v.ch1,oe=v.ch2,ge=v.ch3,Oe=v.ch4,Ye=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var dt=new CS(re);if(dt.ok)re=dt.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var f=parseInt(re.substr(1),16);re=f>>16&255,oe=f>>8&255,ge=255&f}if(oe===void 0||Oe===void 0&&re===oe&&oe===ge)if(typeof re=="string")O=re+" "+Ye[0];else switch(v.precision){case 2:O=V(re/255)+" "+Ye[0];break;case 3:default:O=b(re/255)+" "+Ye[0]}else if(Oe===void 0||wr(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return O=["1.","1.","1.",Ye[1]].join(" ");if(typeof re=="string")O=[re,oe,ge,Ye[1]].join(" ");else switch(v.precision){case 2:O=[V(re/255),V(oe/255),V(ge/255),Ye[1]].join(" ");break;default:case 3:O=[b(re/255),b(oe/255),b(ge/255),Ye[1]].join(" ")}}else if(typeof re=="string")O=[re,oe,ge,Oe,Ye[2]].join(" ");else switch(v.precision){case 2:O=[V(re),V(oe),V(ge),V(Oe),Ye[2]].join(" ");break;case 3:default:O=[b(re),b(oe),b(ge),b(Oe),Ye[2]].join(" ")}return O},ye=p.__private__.getFilters=function(){return a},Re=p.__private__.putStream=function(v){var O=(v=v||{}).data||"",re=v.filters||ye(),oe=v.alreadyAppliedFilters||[],ge=v.addLength1||!1,Oe=O.length,Ye=v.objectId,dt=function(Bt){return Bt};if(l!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");l!==null&&(dt=Or.encryptor(Ye,0));var f={};re===!0&&(re=["FlateEncode"]);var x=v.additionalKeyValues||[],N=(f=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(O,re):{data:O,reverseChain:[]}).reverseChain+(Array.isArray(oe)?oe.join(" "):oe.toString());if(f.data.length!==0&&(x.push({key:"Length",value:f.data.length}),ge===!0&&x.push({key:"Length1",value:Oe})),N.length!=0)if(N.split("/").length-1==1)x.push({key:"Filter",value:N});else{x.push({key:"Filter",value:"["+N+"]"});for(var z=0;z<x.length;z+=1)if(x[z].key==="DecodeParms"){for(var pe=[],Ie=0;Ie<f.reverseChain.split("/").length-1;Ie+=1)pe.push("null");pe.push(x[z].value),x[z].value="["+pe.join(" ")+"]"}}ne("<<");for(var Qe=0;Qe<x.length;Qe++)ne("/"+x[Qe].key+" "+x[Qe].value);ne(">>"),f.data.length!==0&&(ne("stream"),ne(dt(f.data)),ne("endstream"))},we=p.__private__.putPage=function(v){var O=v.number,re=v.data,oe=v.objId,ge=v.contentsObjId;j(oe,!0),ne("<</Type /Page"),ne("/Parent "+v.rootDictionaryObjId+" 0 R"),ne("/Resources "+v.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(R(v.mediaBox.bottomLeftX))+" "+parseFloat(R(v.mediaBox.bottomLeftY))+" "+R(v.mediaBox.topRightX)+" "+R(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&ne("/CropBox ["+R(v.cropBox.bottomLeftX)+" "+R(v.cropBox.bottomLeftY)+" "+R(v.cropBox.topRightX)+" "+R(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&ne("/BleedBox ["+R(v.bleedBox.bottomLeftX)+" "+R(v.bleedBox.bottomLeftY)+" "+R(v.bleedBox.topRightX)+" "+R(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&ne("/TrimBox ["+R(v.trimBox.bottomLeftX)+" "+R(v.trimBox.bottomLeftY)+" "+R(v.trimBox.topRightX)+" "+R(v.trimBox.topRightY)+"]"),v.artBox!==null&&ne("/ArtBox ["+R(v.artBox.bottomLeftX)+" "+R(v.artBox.bottomLeftY)+" "+R(v.artBox.topRightX)+" "+R(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&ne("/UserUnit "+v.userUnit),er.publish("putPage",{objId:oe,pageContext:Nt[O],pageNumber:O,page:re}),ne("/Contents "+ge+" 0 R"),ne(">>"),ne("endobj");var Oe=re.join(`
`);return F===L.ADVANCED&&(Oe+=`
Q`),j(ge,!0),Re({data:Oe,filters:ye(),objectId:ge}),ne("endobj"),oe},Ee=p.__private__.putPages=function(){var v,O,re=[];for(v=1;v<=cr;v++)Nt[v].objId=Ur(),Nt[v].contentsObjId=Ur();for(v=1;v<=cr;v++)re.push(we({number:v,data:Be[v],objId:Nt[v].objId,contentsObjId:Nt[v].contentsObjId,mediaBox:Nt[v].mediaBox,cropBox:Nt[v].cropBox,bleedBox:Nt[v].bleedBox,trimBox:Nt[v].trimBox,artBox:Nt[v].artBox,userUnit:Nt[v].userUnit,rootDictionaryObjId:Y,resourceDictionaryObjId:X}));j(Y,!0),ne("<</Type /Pages");var oe="/Kids [";for(O=0;O<cr;O++)oe+=re[O]+" 0 R ";ne(oe+"]"),ne("/Count "+cr),ne(">>"),ne("endobj"),er.publish("postPutPages")},Pe=function(v){er.publish("putFont",{font:v,out:ne,newObject:Hr,putStream:Re}),v.isAlreadyPutted!==!0&&(v.objectNumber=Hr(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+Sl(v.postScriptName)),ne("/Subtype /Type1"),typeof v.encoding=="string"&&ne("/Encoding /"+v.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Ke=function(){for(var v in tr)tr.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&Pe(tr[v])},it=function(v){v.objectNumber=Hr();var O=[];O.push({key:"Type",value:"/XObject"}),O.push({key:"Subtype",value:"/Form"}),O.push({key:"BBox",value:"["+[R(v.x),R(v.y),R(v.x+v.width),R(v.y+v.height)].join(" ")+"]"}),O.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var re=v.pages[1].join(`
`);Re({data:re,additionalKeyValues:O,objectId:v.objectNumber}),ne("endobj")},gt=function(){for(var v in Kr)Kr.hasOwnProperty(v)&&it(Kr[v])},et=function(v,O){var re,oe=[],ge=1/(O-1);for(re=0;re<1;re+=ge)oe.push(re);if(oe.push(1),v[0].offset!=0){var Oe={offset:0,color:v[0].color};v.unshift(Oe)}if(v[v.length-1].offset!=1){var Ye={offset:1,color:v[v.length-1].color};v.push(Ye)}for(var dt="",f=0,x=0;x<oe.length;x++){for(re=oe[x];re>v[f+1].offset;)f++;var N=v[f].offset,z=(re-N)/(v[f+1].offset-N),pe=v[f].color,Ie=v[f+1].color;dt+=U(Math.round((1-z)*pe[0]+z*Ie[0]).toString(16))+U(Math.round((1-z)*pe[1]+z*Ie[1]).toString(16))+U(Math.round((1-z)*pe[2]+z*Ie[2]).toString(16))}return dt.trim()},lt=function(v,O){O||(O=21);var re=Hr(),oe=et(v.colors,O),ge=[];ge.push({key:"FunctionType",value:"0"}),ge.push({key:"Domain",value:"[0.0 1.0]"}),ge.push({key:"Size",value:"["+O+"]"}),ge.push({key:"BitsPerSample",value:"8"}),ge.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ge.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Re({data:oe,additionalKeyValues:ge,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),ne("endobj"),v.objectNumber=Hr(),ne("<< /ShadingType "+v.type),ne("/ColorSpace /DeviceRGB");var Oe="/Coords ["+R(parseFloat(v.coords[0]))+" "+R(parseFloat(v.coords[1]))+" ";v.type===2?Oe+=R(parseFloat(v.coords[2]))+" "+R(parseFloat(v.coords[3])):Oe+=R(parseFloat(v.coords[2]))+" "+R(parseFloat(v.coords[3]))+" "+R(parseFloat(v.coords[4]))+" "+R(parseFloat(v.coords[5])),ne(Oe+="]"),v.matrix&&ne("/Matrix ["+v.matrix.toString()+"]"),ne("/Function "+re+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Lt=function(v,O){var re=Ur(),oe=Hr();O.push({resourcesOid:re,objectOid:oe}),v.objectNumber=oe;var ge=[];ge.push({key:"Type",value:"/Pattern"}),ge.push({key:"PatternType",value:"1"}),ge.push({key:"PaintType",value:"1"}),ge.push({key:"TilingType",value:"1"}),ge.push({key:"BBox",value:"["+v.boundingBox.map(R).join(" ")+"]"}),ge.push({key:"XStep",value:R(v.xStep)}),ge.push({key:"YStep",value:R(v.yStep)}),ge.push({key:"Resources",value:re+" 0 R"}),v.matrix&&ge.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Re({data:v.stream,additionalKeyValues:ge,objectId:v.objectNumber}),ne("endobj")},rr=function(v){var O;for(O in Kt)Kt.hasOwnProperty(O)&&(Kt[O]instanceof Zc?lt(Kt[O]):Kt[O]instanceof Cl&&Lt(Kt[O],v))},nr=function(v){for(var O in v.objectNumber=Hr(),ne("<<"),v)switch(O){case"opacity":ne("/ca "+V(v[O]));break;case"stroke-opacity":ne("/CA "+V(v[O]))}ne(">>"),ne("endobj")},br=function(){var v;for(v in Er)Er.hasOwnProperty(v)&&nr(Er[v])},_i=function(){for(var v in ne("/XObject <<"),Kr)Kr.hasOwnProperty(v)&&Kr[v].objectNumber>=0&&ne("/"+v+" "+Kr[v].objectNumber+" 0 R");er.publish("putXobjectDict"),ne(">>")},Cs=function(){Or.oid=Hr(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Or.v),ne("/R "+Or.r),ne("/U <"+Or.toHexString(Or.U)+">"),ne("/O <"+Or.toHexString(Or.O)+">"),ne("/P "+Or.P),ne(">>"),ne("endobj")},Zi=function(){for(var v in ne("/Font <<"),tr)tr.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&ne("/"+v+" "+tr[v].objectNumber+" 0 R");ne(">>")},Fi=function(){if(Object.keys(Kt).length>0){for(var v in ne("/Shading <<"),Kt)Kt.hasOwnProperty(v)&&Kt[v]instanceof Zc&&Kt[v].objectNumber>=0&&ne("/"+v+" "+Kt[v].objectNumber+" 0 R");er.publish("putShadingPatternDict"),ne(">>")}},es=function(v){if(Object.keys(Kt).length>0){for(var O in ne("/Pattern <<"),Kt)Kt.hasOwnProperty(O)&&Kt[O]instanceof p.TilingPattern&&Kt[O].objectNumber>=0&&Kt[O].objectNumber<v&&ne("/"+O+" "+Kt[O].objectNumber+" 0 R");er.publish("putTilingPatternDict"),ne(">>")}},Wn=function(){if(Object.keys(Er).length>0){var v;for(v in ne("/ExtGState <<"),Er)Er.hasOwnProperty(v)&&Er[v].objectNumber>=0&&ne("/"+v+" "+Er[v].objectNumber+" 0 R");er.publish("putGStateDict"),ne(">>")}},Fr=function(v){j(v.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zi(),Fi(),es(v.objectOid),Wn(),_i(),ne(">>"),ne("endobj")},Ac=function(){var v=[];Ke(),br(),gt(),rr(v),er.publish("putResources"),v.forEach(Fr),Fr({resourcesOid:X,objectOid:Number.MAX_SAFE_INTEGER}),er.publish("postPutResources")},Ic=function(){er.publish("putAdditionalObjects");for(var v=0;v<xe.length;v++){var O=xe[v];j(O.objId,!0),ne(O.content),ne("endobj")}er.publish("postPutAdditionalObjects")},qu=function(v){Tr[v.fontName]=Tr[v.fontName]||{},Tr[v.fontName][v.fontStyle]=v.id},Sc=function(v,O,re,oe,ge){var Oe={id:"F"+(Object.keys(tr).length+1).toString(10),postScriptName:v,fontName:O,fontStyle:re,encoding:oe,isStandardFont:ge||!1,metadata:{}};return er.publish("addFont",{font:Oe,instance:this}),tr[Oe.id]=Oe,qu(Oe),Oe.id},Wu=function(v){for(var O=0,re=$e.length;O<re;O++){var oe=Sc.call(this,v[O][0],v[O][1],v[O][2],$e[O][3],!0);d===!1&&(g[oe]=!0);var ge=v[O][0].split("-");qu({id:oe,fontName:ge[0],fontStyle:ge[1]||""})}er.publish("addFonts",{fonts:tr,dictionary:Tr})},Oi=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(oe){var O=oe.stack||"";~O.indexOf(" at ")&&(O=O.split(" at ")[1]);var re="Error in function "+O.split(`
`)[0].split("<")[0]+": "+oe.message;if(!Ot.console)throw new Error(re);Ot.console.error(re,oe),Ot.alert&&alert(re)}},v.foo.bar=v,v.foo},go=function(v,O){var re,oe,ge,Oe,Ye,dt,f,x,N;if(ge=(O=O||{}).sourceEncoding||"Unicode",Ye=O.outputEncoding,(O.autoencode||Ye)&&tr[qt].metadata&&tr[qt].metadata[ge]&&tr[qt].metadata[ge].encoding&&(Oe=tr[qt].metadata[ge].encoding,!Ye&&tr[qt].encoding&&(Ye=tr[qt].encoding),!Ye&&Oe.codePages&&(Ye=Oe.codePages[0]),typeof Ye=="string"&&(Ye=Oe[Ye]),Ye)){for(f=!1,dt=[],re=0,oe=v.length;re<oe;re++)(x=Ye[v.charCodeAt(re)])?dt.push(String.fromCharCode(x)):dt.push(v[re]),dt[re].charCodeAt(0)>>8&&(f=!0);v=dt.join("")}for(re=v.length;f===void 0&&re!==0;)v.charCodeAt(re-1)>>8&&(f=!0),re--;if(!f)return v;for(dt=O.noBOM?[]:[254,255],re=0,oe=v.length;re<oe;re++){if((N=(x=v.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dt.push(N),dt.push(x-(N<<8))}return String.fromCharCode.apply(void 0,dt)},Xr=p.__private__.pdfEscape=p.pdfEscape=function(v,O){return go(v,O).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yi=p.__private__.beginPage=function(v){Be[++cr]=[],Nt[cr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Pc(cr),ke(Be[D])},Pa=function(v,O){var re,oe,ge;switch(t=O||t,typeof v=="string"&&(re=P(v.toLowerCase()),Array.isArray(re)&&(oe=re[0],ge=re[1])),Array.isArray(v)&&(oe=v[0]*pt,ge=v[1]*pt),isNaN(oe)&&(oe=i[0],ge=i[1]),(oe>14400||ge>14400)&&(Cr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),oe=Math.min(14400,oe),ge=Math.min(14400,ge)),i=[oe,ge],t.substr(0,1)){case"l":ge>oe&&(i=[ge,oe]);break;case"p":oe>ge&&(i=[ge,oe])}yi(i),Lc(kc),ne(zn),Oc!==0&&ne(Oc+" J"),Io!==0&&ne(Io+" j"),er.publish("addPage",{pageNumber:cr})},mo=function(v){v>0&&v<=cr&&(Be.splice(v,1),Nt.splice(v,1),cr--,D>cr&&(D=cr),this.setPage(D))},Pc=function(v){v>0&&v<=cr&&(D=v)},dr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Be.length-1},Na=function(v,O,re){var oe,ge=void 0;return re=re||{},v=v!==void 0?v:tr[qt].fontName,O=O!==void 0?O:tr[qt].fontStyle,oe=v.toLowerCase(),Tr[oe]!==void 0&&Tr[oe][O]!==void 0?ge=Tr[oe][O]:Tr[v]!==void 0&&Tr[v][O]!==void 0?ge=Tr[v][O]:re.disableWarning===!1&&Cr.warn("Unable to look up font label for font '"+v+"', '"+O+"'. Refer to getFontList() for available fonts."),ge||re.noFallback||(ge=Tr.times[O])==null&&(ge=Tr.times.normal),ge},Ca=p.__private__.putInfo=function(){var v=Hr(),O=function(oe){return oe};for(var re in l!==null&&(O=Or.encryptor(v,0)),ne("<<"),ne("/Producer ("+Xr(O("jsPDF "+Dt.version))+")"),Rt)Rt.hasOwnProperty(re)&&Rt[re]&&ne("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+Xr(O(Rt[re]))+")");ne("/CreationDate ("+Xr(O(ve))+")"),ne(">>"),ne("endobj")},Rs=p.__private__.putCatalog=function(v){var O=(v=v||{}).rootDictionaryObjId||Y;switch(Hr(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+O+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+ct;re.substr(re.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+V(ct)+"]")}switch(It||(It="continuous"),It){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}At&&ne("/PageMode /"+At),er.publish("putCatalog"),ne(">>"),ne("endobj")},Ch=p.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(J+1)),ne("/Root "+J+" 0 R"),ne("/Info "+(J-1)+" 0 R"),l!==null&&ne("/Encrypt "+Or.oid+" 0 R"),ne("/ID [ <"+Te+"> <"+Te+"> ]"),ne(">>")},zu=p.__private__.putHeader=function(){ne("%PDF-"+w),ne("%")},Rh=p.__private__.putXRef=function(){var v="0000000000";ne("xref"),ne("0 "+(J+1)),ne("0000000000 65535 f ");for(var O=1;O<=J;O++)typeof ae[O]=="function"?ne((v+ae[O]()).slice(-10)+" 00000 n "):ae[O]!==void 0?ne((v+ae[O]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},ks=p.__private__.buildDocument=function(){at(),ke(le),er.publish("buildDocument"),zu(),Ee(),Ic(),Ac(),l!==null&&Cs(),Ca(),Rs();var v=ue;return Rh(),Ch(),ne("startxref"),ne(""+v),ne("%%EOF"),ke(Be[D]),le.join(`
`)},vo=p.__private__.getBlob=function(v){return new Blob([_t(v)],{type:"application/pdf"})},_o=p.output=p.__private__.output=Oi(function(v,O){switch(typeof(O=O||{})=="string"?O={filename:O}:O.filename=O.filename||"generated.pdf",v){case void 0:return ks();case"save":p.save(O.filename);break;case"arraybuffer":return _t(ks());case"blob":return vo(ks());case"bloburi":case"bloburl":if(Ot.URL!==void 0&&typeof Ot.URL.createObjectURL=="function")return Ot.URL&&Ot.URL.createObjectURL(vo(ks()))||void 0;Cr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",oe=ks();try{re=k1(oe)}catch{re=k1(unescape(encodeURIComponent(oe)))}return"data:application/pdf;filename="+O.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var ge="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';O.pdfObjectUrl&&(ge=O.pdfObjectUrl,Oe="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ge+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(O)+");<\/script></body></html>",dt=Ot.open();return dt!==null&&dt.document.write(Ye),dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(O.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+O.filename+'" width="500px" height="400px" /></body></html>',x=Ot.open();if(x!==null){x.document.write(f);var N=this;x.document.documentElement.querySelector("#pdfViewer").onload=function(){x.document.title=O.filename,x.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(N.output("bloburl"))}}return x}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var z='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",O)+'"></iframe></body></html>',pe=Ot.open();if(pe!==null&&(pe.document.write(z),pe.document.title=O.filename),pe||typeof safari>"u")return pe;break;case"datauri":case"dataurl":return Ot.document.location.href=this.output("datauristring",O);default:return null}}),Qs=function(v){return Array.isArray(Di)===!0&&Di.indexOf(v)>-1};switch(n){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Qs("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);pt=n}var Or=null;nt(),_e();var Hu=function(v){return l!==null?Or.encryptor(v,0):function(O){return O}},Nc=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[v].objId,pageNumber:v,pageContext:Nt[v]}},Mt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var O in Nt)if(Nt[O].objId===v)break;return Nc(O)},Zs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Nt[D].objId,pageNumber:D,pageContext:Nt[D]}};p.addPage=function(){return Pa.apply(this,arguments),this},p.setPage=function(){return Pc.apply(this,arguments),ke.call(this,Be[D]),this},p.insertPage=function(v){return this.addPage(),this.movePage(D,v),this},p.movePage=function(v,O){var re,oe;if(v>O){re=Be[v],oe=Nt[v];for(var ge=v;ge>O;ge--)Be[ge]=Be[ge-1],Nt[ge]=Nt[ge-1];Be[O]=re,Nt[O]=oe,this.setPage(O)}else if(v<O){re=Be[v],oe=Nt[v];for(var Oe=v;Oe<O;Oe++)Be[Oe]=Be[Oe+1],Nt[Oe]=Nt[Oe+1];Be[O]=re,Nt[O]=oe,this.setPage(O)}return this},p.deletePage=function(){return mo.apply(this,arguments),this},p.__private__.text=p.text=function(v,O,re,oe,ge){var Oe,Ye,dt,f,x,N,z,pe,Ie,Qe=(oe=oe||{}).scope||this;if(typeof v=="number"&&typeof O=="number"&&(typeof re=="string"||Array.isArray(re))){var Bt=re;re=O,O=v,v=Bt}if(arguments[3]instanceof wt?(A("The transform parameter of text() with a Matrix value"),Ie=ge):(dt=arguments[4],f=arguments[5],wr(z=arguments[3])==="object"&&z!==null||(typeof dt=="string"&&(f=dt,dt=null),typeof z=="string"&&(f=z,z=null),typeof z=="number"&&(dt=z,z=null),oe={flags:z,angle:dt,align:f})),isNaN(O)||isNaN(re)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Qe;var Xt="",Vt=!1,fr=typeof oe.lineHeightFactor=="number"?oe.lineHeightFactor:hr,Pr=Qe.internal.scaleFactor;function Ms(Rr){return Rr=Rr.split("	").join(Array(oe.TabLen||9).join(" ")),Xr(Rr,z)}function Hn(Rr){for(var kr,cn=Rr.concat(),In=[],Ba=cn.length;Ba--;)typeof(kr=cn.shift())=="string"?In.push(kr):Array.isArray(Rr)&&(kr.length===1||kr[1]===void 0&&kr[2]===void 0)?In.push(kr[0]):In.push([kr[0],kr[1],kr[2]]);return In}function na(Rr,kr){var cn;if(typeof Rr=="string")cn=kr(Rr)[0];else if(Array.isArray(Rr)){for(var In,Ba,Uh=Rr.concat(),il=[],Bd=Uh.length;Bd--;)typeof(In=Uh.shift())=="string"?il.push(kr(In)[0]):Array.isArray(In)&&typeof In[0]=="string"&&(Ba=kr(In[0],In[1],In[2]),il.push([Ba[0],Ba[1],Ba[2]]));cn=il}return cn}var ia=!1,Lh=!0;if(typeof v=="string")ia=!0;else if(Array.isArray(v)){var Dh=v.concat();Ye=[];for(var Xu,$n=Dh.length;$n--;)(typeof(Xu=Dh.shift())!="string"||Array.isArray(Xu)&&typeof Xu[0]!="string")&&(Lh=!1);ia=Lh}if(ia===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ju=rt/Qe.internal.scaleFactor,Qu=Ju*(fr-1);switch(oe.baseline){case"bottom":re-=Qu;break;case"top":re+=Ju-Qu;break;case"hanging":re+=Ju-2*Qu;break;case"middle":re+=Ju/2-Qu}if((N=oe.maxWidth||0)>0&&(typeof v=="string"?v=Qe.splitTextToSize(v,N):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(Rr,kr){return Rr.concat(Qe.splitTextToSize(kr,N))},[]))),Oe={text:v,x:O,y:re,options:oe,mutex:{pdfEscape:Xr,activeFontKey:qt,fonts:tr,activeFontSize:rt}},er.publish("preProcessText",Oe),v=Oe.text,dt=(oe=Oe.options).angle,!(Ie instanceof wt)&&dt&&typeof dt=="number"){dt*=Math.PI/180,oe.rotationDirection===0&&(dt=-dt),F===L.ADVANCED&&(dt=-dt);var Zu=Math.cos(dt),Fh=Math.sin(dt);Ie=new wt(Zu,Fh,-Fh,Zu,0,0)}else dt&&dt instanceof wt&&(Ie=dt);F!==L.ADVANCED||Ie||(Ie=mn),(x=oe.charSpace||ka)!==void 0&&(Xt+=R(S(x))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pe=oe.horizontalScale)!==void 0&&(Xt+=R(100*pe)+` Tz
`),oe.lang;var Mi=-1,Pg=oe.renderingMode!==void 0?oe.renderingMode:oe.stroke,Oh=Qe.internal.getCurrentPageInfo().pageContext;switch(Pg){case 0:case!1:case"fill":Mi=0;break;case 1:case!0:case"stroke":Mi=1;break;case 2:case"fillThenStroke":Mi=2;break;case 3:case"invisible":Mi=3;break;case 4:case"fillAndAddForClipping":Mi=4;break;case 5:case"strokeAndAddPathForClipping":Mi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Mi=6;break;case 7:case"addToPathForClipping":Mi=7}var Dd=Oh.usedRenderingMode!==void 0?Oh.usedRenderingMode:-1;Mi!==-1?Xt+=Mi+` Tr
`:Dd!==-1&&(Xt+=`0 Tr
`),Mi!==-1&&(Oh.usedRenderingMode=Mi),f=oe.align||"left";var vs,el=rt*fr,Fd=Qe.internal.pageSize.getWidth(),Od=tr[qt];x=oe.charSpace||ka,N=oe.maxWidth||0,z=Object.assign({autoencode:!0,noBOM:!0},oe.flags);var Ro=[],Mc=function(Rr){return Qe.getStringUnitWidth(Rr,{font:Od,charSpace:x,fontSize:rt,doKerning:!1})*rt/Pr};if(Object.prototype.toString.call(v)==="[object Array]"){var Bi;Ye=Hn(v),f!=="left"&&(vs=Ye.map(Mc));var wi,ko=0;if(f==="right"){O-=vs[0],v=[],$n=Ye.length;for(var Fa=0;Fa<$n;Fa++)Fa===0?(wi=ns(O),Bi=An(re)):(wi=S(ko-vs[Fa]),Bi=-el),v.push([Ye[Fa],wi,Bi]),ko=vs[Fa]}else if(f==="center"){O-=vs[0]/2,v=[],$n=Ye.length;for(var Oa=0;Oa<$n;Oa++)Oa===0?(wi=ns(O),Bi=An(re)):(wi=S((ko-vs[Oa])/2),Bi=-el),v.push([Ye[Oa],wi,Bi]),ko=vs[Oa]}else if(f==="left"){v=[],$n=Ye.length;for(var tl=0;tl<$n;tl++)v.push(Ye[tl])}else if(f==="justify"&&Od.encoding==="Identity-H"){v=[],$n=Ye.length,N=N!==0?N:Fd;for(var Ma=0,on=0;on<$n;on++)if(Bi=on===0?An(re):-el,wi=on===0?ns(O):Ma,on<$n-1){var Mh=S((N-vs[on])/(Ye[on].split(" ").length-1)),xi=Ye[on].split(" ");v.push([xi[0]+" ",wi,Bi]),Ma=0;for(var _s=1;_s<xi.length;_s++){var rl=(Mc(xi[_s-1]+" "+xi[_s])-Mc(xi[_s]))*Pr+Mh;_s==xi.length-1?v.push([xi[_s],rl,0]):v.push([xi[_s]+" ",rl,0]),Ma-=rl}}else v.push([Ye[on],wi,Bi]);v.push(["",Ma,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],$n=Ye.length,N=N!==0?N:Fd,on=0;on<$n;on++)Bi=on===0?An(re):-el,wi=on===0?ns(O):0,on<$n-1?Ro.push(R(S((N-vs[on])/(Ye[on].split(" ").length-1)))):Ro.push(0),v.push([Ye[on],wi,Bi])}}var Md=typeof oe.R2L=="boolean"?oe.R2L:Et;Md===!0&&(v=na(v,function(Rr,kr,cn){return[Rr.split("").reverse().join(""),kr,cn]})),Oe={text:v,x:O,y:re,options:oe,mutex:{pdfEscape:Xr,activeFontKey:qt,fonts:tr,activeFontSize:rt}},er.publish("postProcessText",Oe),v=Oe.text,Vt=Oe.mutex.isHex||!1;var Bh=tr[qt].encoding;Bh!=="WinAnsiEncoding"&&Bh!=="StandardEncoding"||(v=na(v,function(Rr,kr,cn){return[Ms(Rr),kr,cn]})),Ye=Hn(v),v=[];for(var Bc,Vc,Lo,Uc=0,nl=1,jc=Array.isArray(Ye[0])?nl:Uc,Do="",Vh=function(Rr,kr,cn){var In="";return cn instanceof wt?(cn=typeof oe.angle=="number"?si(cn,new wt(1,0,0,1,Rr,kr)):si(new wt(1,0,0,1,Rr,kr),cn),F===L.ADVANCED&&(cn=si(new wt(1,0,0,-1,0,0),cn)),In=cn.join(" ")+` Tm
`):In=R(Rr)+" "+R(kr)+` Td
`,In},ys=0;ys<Ye.length;ys++){switch(Do="",jc){case nl:Lo=(Vt?"<":"(")+Ye[ys][0]+(Vt?">":")"),Bc=parseFloat(Ye[ys][1]),Vc=parseFloat(Ye[ys][2]);break;case Uc:Lo=(Vt?"<":"(")+Ye[ys]+(Vt?">":")"),Bc=ns(O),Vc=An(re)}Ro!==void 0&&Ro[ys]!==void 0&&(Do=Ro[ys]+` Tw
`),ys===0?v.push(Do+Vh(Bc,Vc,Ie)+Lo):jc===Uc?v.push(Do+Lo):jc===nl&&v.push(Do+Vh(Bc,Vc,Ie)+Lo)}v=jc===Uc?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var ws=`BT
/`;return ws+=qt+" "+rt+` Tf
`,ws+=R(rt*fr)+` TL
`,ws+=Fs+`
`,ws+=Xt,ws+=v,ne(ws+="ET"),g[qt]=!0,Qe};var kh=p.__private__.clip=p.clip=function(v){return ne(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return kh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ne("n"),this};var ms=p.__private__.isValidStyle=function(v){var O=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(O=!0),O};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return ms(v)&&(u=v),this};var $u=p.__private__.getStyle=p.getStyle=function(v){var O=u;switch(v){case"D":case"S":O="S";break;case"F":O="f";break;case"FD":case"DF":O="B";break;case"f":case"f*":case"B":case"B*":O=v}return O},ts=p.close=function(){return ne("h"),this};p.stroke=function(){return ne("S"),this},p.fill=function(v){return yo("f",v),this},p.fillEvenOdd=function(v){return yo("f*",v),this},p.fillStroke=function(v){return yo("B",v),this},p.fillStrokeEvenOdd=function(v){return yo("B*",v),this};var yo=function(v,O){wr(O)==="object"?xo(O,v):ne(v)},Cc=function(v){v===null||F===L.ADVANCED&&v===void 0||(v=$u(v),ne(v))};function wo(v,O,re,oe,ge){var Oe=new Cl(O||this.boundingBox,re||this.xStep,oe||this.yStep,this.gState,ge||this.matrix);Oe.stream=this.stream;var Ye=v+"$$"+this.cloneIndex+++"$$";return Yr(Ye,Oe),Oe}var xo=function(v,O){var re=Qi[v.key],oe=Kt[re];if(oe instanceof Zc)ne("q"),ne(Gu(O)),oe.gState&&p.setGState(oe.gState),ne(v.matrix.toString()+" cm"),ne("/"+re+" sh"),ne("Q");else if(oe instanceof Cl){var ge=new wt(1,0,0,-1,0,ai());v.matrix&&(ge=ge.multiply(v.matrix||mn),re=wo.call(oe,v.key,v.boundingBox,v.xStep,v.yStep,ge).id),ne("q"),ne("/Pattern cs"),ne("/"+re+" scn"),oe.gState&&p.setGState(oe.gState),ne(O),ne("Q")}},Gu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ls=p.moveTo=function(v,O){return ne(R(S(v))+" "+R(ie(O))+" m"),this},rs=p.lineTo=function(v,O){return ne(R(S(v))+" "+R(ie(O))+" l"),this},Ds=p.curveTo=function(v,O,re,oe,ge,Oe){return ne([R(S(v)),R(ie(O)),R(S(re)),R(ie(oe)),R(S(ge)),R(ie(Oe)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,O,re,oe,ge){if(isNaN(v)||isNaN(O)||isNaN(re)||isNaN(oe)||!ms(ge))throw new Error("Invalid arguments passed to jsPDF.line");return F===L.COMPAT?this.lines([[re-v,oe-O]],v,O,[1,1],ge||"S"):this.lines([[re-v,oe-O]],v,O,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,O,re,oe,ge,Oe){var Ye,dt,f,x,N,z,pe,Ie,Qe,Bt,Xt,Vt;if(typeof v=="number"&&(Vt=re,re=O,O=v,v=Vt),oe=oe||[1,1],Oe=Oe||!1,isNaN(O)||isNaN(re)||!Array.isArray(v)||!Array.isArray(oe)||!ms(ge)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ls(O,re),Ye=oe[0],dt=oe[1],x=v.length,Bt=O,Xt=re,f=0;f<x;f++)(N=v[f]).length===2?(Bt=N[0]*Ye+Bt,Xt=N[1]*dt+Xt,rs(Bt,Xt)):(z=N[0]*Ye+Bt,pe=N[1]*dt+Xt,Ie=N[2]*Ye+Bt,Qe=N[3]*dt+Xt,Bt=N[4]*Ye+Bt,Xt=N[5]*dt+Xt,Ds(z,pe,Ie,Qe,Bt,Xt));return Oe&&ts(),Cc(ge),this},p.path=function(v){for(var O=0;O<v.length;O++){var re=v[O],oe=re.c;switch(re.op){case"m":Ls(oe[0],oe[1]);break;case"l":rs(oe[0],oe[1]);break;case"c":Ds.apply(this,oe);break;case"h":ts()}}return this},p.__private__.rect=p.rect=function(v,O,re,oe,ge){if(isNaN(v)||isNaN(O)||isNaN(re)||isNaN(oe)||!ms(ge))throw new Error("Invalid arguments passed to jsPDF.rect");return F===L.COMPAT&&(oe=-oe),ne([R(S(v)),R(ie(O)),R(S(re)),R(S(oe)),"re"].join(" ")),Cc(ge),this},p.__private__.triangle=p.triangle=function(v,O,re,oe,ge,Oe,Ye){if(isNaN(v)||isNaN(O)||isNaN(re)||isNaN(oe)||isNaN(ge)||isNaN(Oe)||!ms(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-v,oe-O],[ge-re,Oe-oe],[v-ge,O-Oe]],v,O,[1,1],Ye,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,O,re,oe,ge,Oe,Ye){if(isNaN(v)||isNaN(O)||isNaN(re)||isNaN(oe)||isNaN(ge)||isNaN(Oe)||!ms(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dt=4/3*(Math.SQRT2-1);return ge=Math.min(ge,.5*re),Oe=Math.min(Oe,.5*oe),this.lines([[re-2*ge,0],[ge*dt,0,ge,Oe-Oe*dt,ge,Oe],[0,oe-2*Oe],[0,Oe*dt,-ge*dt,Oe,-ge,Oe],[2*ge-re,0],[-ge*dt,0,-ge,-Oe*dt,-ge,-Oe],[0,2*Oe-oe],[0,-Oe*dt,ge*dt,-Oe,ge,-Oe]],v+ge,O,[1,1],Ye,!0),this},p.__private__.ellipse=p.ellipse=function(v,O,re,oe,ge){if(isNaN(v)||isNaN(O)||isNaN(re)||isNaN(oe)||!ms(ge))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*re,Ye=4/3*(Math.SQRT2-1)*oe;return Ls(v+re,O),Ds(v+re,O-Ye,v+Oe,O-oe,v,O-oe),Ds(v-Oe,O-oe,v-re,O-Ye,v-re,O),Ds(v-re,O+Ye,v-Oe,O+oe,v,O+oe),Ds(v+Oe,O+oe,v+re,O+Ye,v+re,O),Cc(ge),this},p.__private__.circle=p.circle=function(v,O,re,oe){if(isNaN(v)||isNaN(O)||isNaN(re)||!ms(oe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,O,re,re,oe)},p.setFont=function(v,O,re){return re&&(O=ce(O,re)),qt=Na(v,O,{disableWarning:!1}),this};var Rc=p.__private__.getFont=p.getFont=function(){return tr[Na.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,O,re={};for(v in Tr)if(Tr.hasOwnProperty(v))for(O in re[v]=[],Tr[v])Tr[v].hasOwnProperty(O)&&re[v].push(O);return re},p.addFont=function(v,O,re,oe,ge){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?ge=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(re=ce(re,oe)),ge=ge||"Identity-H",Sc.call(this,v,O,re,ge)};var hr,kc=r.lineWidth||.200025,To=p.__private__.getLineWidth=p.getLineWidth=function(){return kc},Lc=p.__private__.setLineWidth=p.setLineWidth=function(v){return kc=v,ne(R(S(v))+" w"),this};p.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(v,O){if(v=v||[],O=O||0,isNaN(O)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(re){return R(S(re))}).join(" "),O=R(S(O)),ne("["+v+"] "+O+" d"),this};var Dc=p.__private__.getLineHeight=p.getLineHeight=function(){return rt*hr};p.__private__.getLineHeight=p.getLineHeight=function(){return rt*hr};var Fc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(hr=v),this},Ra=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return hr};Fc(r.lineHeight);var ns=p.__private__.getHorizontalCoordinate=function(v){return S(v)},An=p.__private__.getVerticalCoordinate=function(v){return F===L.ADVANCED?v:Nt[D].mediaBox.topRightY-Nt[D].mediaBox.bottomLeftY-S(v)},Ku=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return R(ns(v))},ea=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return R(An(v))},zn=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Z(zn)},p.__private__.setStrokeColor=p.setDrawColor=function(v,O,re,oe){return zn=te({ch1:v,ch2:O,ch3:re,ch4:oe,pdfColorType:"draw",precision:2}),ne(zn),this};var Eo=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Z(Eo)},p.__private__.setFillColor=p.setFillColor=function(v,O,re,oe){return Eo=te({ch1:v,ch2:O,ch3:re,ch4:oe,pdfColorType:"fill",precision:2}),ne(Eo),this};var Fs=r.textColor||"0 g",bo=p.__private__.getTextColor=p.getTextColor=function(){return Z(Fs)};p.__private__.setTextColor=p.setTextColor=function(v,O,re,oe){return Fs=te({ch1:v,ch2:O,ch3:re,ch4:oe,pdfColorType:"text",precision:3}),this};var ka=r.charSpace,Ao=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(ka||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ka=v,this};var Oc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var O=p.CapJoinStyles[v];if(O===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Oc=O,ne(O+" J"),this};var Io=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var O=p.CapJoinStyles[v];if(O===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Io=O,ne(O+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(R(S(v))+" M"),this},p.GState=Ap,p.setGState=function(v){(v=typeof v=="string"?Er[bn[v]]:ta(null,v)).equals(mi)||(ne("/"+v.id+" gs"),mi=v)};var ta=function(v,O){if(!v||!bn[v]){var re=!1;for(var oe in Er)if(Er.hasOwnProperty(oe)&&Er[oe].equals(O)){re=!0;break}if(re)O=Er[oe];else{var ge="GS"+(Object.keys(Er).length+1).toString(10);Er[ge]=O,O.id=ge}return v&&(bn[v]=O.id),er.publish("addGState",O),O}};p.addGState=function(v,O){return ta(v,O),this},p.saveGraphicsState=function(){return ne("q"),Li.push({key:qt,size:rt,color:Fs}),this},p.restoreGraphicsState=function(){ne("Q");var v=Li.pop();return qt=v.key,rt=v.size,Fs=v.color,mi=null,this},p.setCurrentTransformationMatrix=function(v){return ne(v.toString()+" cm"),this},p.comment=function(v){return ne("#"+v),this};var La=function(v,O){var re=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Oe){isNaN(Oe)||(re=parseFloat(Oe))}});var oe=O||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return oe},set:function(Oe){isNaN(Oe)||(oe=parseFloat(Oe))}});var ge="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ge},set:function(Oe){ge=Oe.toString()}}),this},So=function(v,O,re,oe){La.call(this,v,O),this.type="rect";var ge=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ge},set:function(Ye){isNaN(Ye)||(ge=parseFloat(Ye))}});var Oe=oe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Ye){isNaN(Ye)||(Oe=parseFloat(Ye))}}),this},Da=function(){this.page=cr,this.currentPage=D,this.pages=Be.slice(0),this.pagesContext=Nt.slice(0),this.x=Dr,this.y=Gt,this.matrix=qn,this.width=ra(D),this.height=ai(D),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Da.prototype.restore=function(){cr=this.page,D=this.currentPage,Nt=this.pagesContext,Be=this.pages,Dr=this.x,Gt=this.y,qn=this.matrix,No(D,this.width),Co(D,this.height),Ze=this.outputDestination};var Po=function(v,O,re,oe,ge){vi.push(new Da),cr=D=0,Be=[],Dr=v,Gt=O,qn=ge,yi([re,oe])},Yu=function(v){if(Rn[v])vi.pop().restore();else{var O=new Da,re="Xo"+(Object.keys(Kr).length+1).toString(10);O.id=re,Rn[v]=re,Kr[re]=O,er.publish("addFormObject",O),vi.pop().restore()}};for(var Os in p.beginFormObject=function(v,O,re,oe,ge){return Po(v,O,re,oe,ge),this},p.endFormObject=function(v){return Yu(v),this},p.doFormObject=function(v,O){var re=Kr[Rn[v]];return ne("q"),ne(O.toString()+" cm"),ne("/"+re.id+" Do"),ne("Q"),this},p.getFormObject=function(v){var O=Kr[Rn[v]];return{x:O.x,y:O.y,width:O.width,height:O.height,matrix:O.matrix}},p.save=function(v,O){return v=v||"generated.pdf",(O=O||{}).returnPromise=O.returnPromise||!1,O.returnPromise===!1?($c(vo(ks()),v),typeof $c.unload=="function"&&Ot.setTimeout&&setTimeout($c.unload,911),this):new Promise(function(re,oe){try{var ge=$c(vo(ks()),v);typeof $c.unload=="function"&&Ot.setTimeout&&setTimeout($c.unload,911),re(ge)}catch(Oe){oe(Oe.message)}})},Dt.API)Dt.API.hasOwnProperty(Os)&&(Os==="events"&&Dt.API.events.length?function(v,O){var re,oe,ge;for(ge=O.length-1;ge!==-1;ge--)re=O[ge][0],oe=O[ge][1],v.subscribe.apply(v,[re].concat(typeof oe=="function"?[oe]:oe))}(er,Dt.API.events):p[Os]=Dt.API[Os]);var ra=p.getPageWidth=function(v){return(Nt[v=v||D].mediaBox.topRightX-Nt[v].mediaBox.bottomLeftX)/pt},No=p.setPageWidth=function(v,O){Nt[v].mediaBox.topRightX=O*pt+Nt[v].mediaBox.bottomLeftX},ai=p.getPageHeight=function(v){return(Nt[v=v||D].mediaBox.topRightY-Nt[v].mediaBox.bottomLeftY)/pt},Co=p.setPageHeight=function(v,O){Nt[v].mediaBox.topRightY=O*pt+Nt[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:Xr,getStyle:$u,getFont:Rc,getFontSize:ut,getCharSpace:Ao,getTextColor:bo,getLineHeight:Dc,getLineHeightFactor:Ra,getLineWidth:To,write:ze,getHorizontalCoordinate:ns,getVerticalCoordinate:An,getCoordinateString:Ku,getVerticalCoordinateString:ea,collections:{},newObject:Hr,newAdditionalObject:ee,newObjectDeferred:Ur,newObjectDeferredBegin:j,getFilters:ye,putStream:Re,events:er,scaleFactor:pt,pageSize:{getWidth:function(){return ra(D)},setWidth:function(v){No(D,v)},getHeight:function(){return ai(D)},setHeight:function(v){Co(D,v)}},encryptionOptions:l,encryption:Or,getEncryptor:Hu,output:_o,getNumberOfPages:dr,pages:Be,out:ne,f2:V,f3:b,getPageInfo:Nc,getPageInfoByObjId:Mt,getCurrentPageInfo:Zs,getPDFVersion:_,Point:La,Rectangle:So,Matrix:wt,hasHotfix:Qs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ra(D)},set:function(v){No(D,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ai(D)},set:function(v){Co(D,v)},enumerable:!0,configurable:!0}),Wu.call(p,$e),qt="F1",Pa(i,t),er.publish("initialized"),p}Il.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},Il.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Il.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Il.prototype.processOwnerPassword=function(r,e){return D1(L1(e).substr(0,5),r)},Il.prototype.encryptor=function(r,e){var t=L1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return D1(t,n)}},Ap.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||wr(r)!==wr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Dt.API={events:[]},Dt.version="2.5.2";var Qr=Dt.API,a_=1,ju=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_l=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ut=function(r){return r.toFixed(2)},Ko=function(r){return r.toFixed(5)};Qr.__acroform__={};var Ji=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},B5=function(r){return r*a_},ca=function(r){var e=new DS,t=Tt.internal.getHeight(r)||0,n=Tt.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Ut(n)),Number(Ut(t))],e},Vz=Qr.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},Uz=Qr.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},jz=Qr.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},un=Qr.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jz(r,e-1)},ln=Qr.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Vz(r,e-1)},hn=Qr.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Uz(r,e-1)},qz=Qr.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],s=r[1],a=r[2],o=r[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=n(s)||0,[Number(Ut(c.lowerLeft_X)),Number(Ut(c.lowerLeft_Y)),Number(Ut(c.upperRight_X)),Number(Ut(c.upperRight_Y))]},Wz=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=F1(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+Ut(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ca(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},F1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var s=t,a=Tt.internal.getHeight(r)||0;a=a<0?-a:a;var o=Tt.internal.getWidth(r)||0;o=o<0?-o:o;var c=function(b,S,k){if(b+1<i.length){var ie=S+" "+i[b+1][0];return w0(ie,r,k).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,l,d=w0("3",r,s).height,g=r.multiline?a-s:(a-d)/2,p=g+=2,w=0,_=0,T=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+w0(e,r,s=12).width+", FieldWidth:"+o+`
`;break}for(var P="",L=0,F=0;F<i.length;F++)if(i.hasOwnProperty(F)){var K=!1;if(i[F].length!==1&&T!==i[F].length-1){if((d+2)*(L+2)+2>a)continue e;P+=i[F][T],K=!0,_=F,F--}else{P=(P+=i[F][T]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var se=parseInt(F),ce=c(se,P,s),R=F>=i.length-1;if(ce&&!R){P+=" ",T=0;continue}if(ce||R){if(R)_=se;else if(r.multiline&&(d+2)*(L+2)+2>a)continue e}else{if(!r.multiline||(d+2)*(L+2)+2>a)continue e;_=se}}for(var A="",C=w;C<=_;C++){var V=i[C];if(r.multiline){if(C===_){A+=V[T]+" ",T=(T+1)%V.length;continue}if(C===w){A+=V[V.length-1]+" ";continue}}A+=V[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,l=w0(A,r,s).width,r.textAlign){case"right":u=o-l-2;break;case"center":u=(o-l)/2;break;case"left":default:u=2}e+=Ut(u)+" "+Ut(p)+` Td
`,e+="("+ju(A)+`) Tj
`,e+=-Ut(u)+` 0 Td
`,p=-(s+2),l=0,w=K?_:_+1,L++,P=""}break}return n.text=e,n.fontSize=s,n},w0=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},zz={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Hz=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},$z=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,i=r[t];e.internal.newObjectDeferredBegin(i.objId,!0),wr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete r[n]}},Gz=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Xs.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(zz)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");a_=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new FS,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&Hz(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=qz(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Tt.createDefaultAppearanceStream(o),wr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=Wz(o);c.push({key:"AP",value:"<</N "+l+">>"}),i.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var d="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(d+="/"+g+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var w=p[a];typeof w=="function"&&(w=w.call(i,o)),d+="/"+a+" "+w+" ",i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w)}}else typeof(w=p)=="function"&&(w=w.call(i,o)),d+="/"+a+" "+w,i.internal.acroformPlugin.xForms.indexOf(w)>=0||i.internal.acroformPlugin.xForms.push(w);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&$z(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},LS=Qr.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(a){return a};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),wr(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+ju(n(r[s].toString()))+")"):i+=r[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Rm=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+ju(n(r))+")"},ma=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ma.prototype.toString=function(){return this.objId+" 0 R"},ma.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ma.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:LS(i,this.objId,this.scope)}):i instanceof ma?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var DS=function(){ma.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Ji(DS,ma);var FS=function(){ma.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ju(t(r))+")"}},set:function(t){r=t}})};Ji(FS,ma);var Xs=function r(){ma.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!un(e,3)},set:function(P){P?this.F=ln(e,3):this.F=hn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(P){n=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(P){n[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(P){n[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(P){n[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(P){n[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Ip)return;s="FieldObject"+r.FieldNum++}var P=function(L){return L};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+ju(P(s))+")"},set:function(P){s=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(P){s=P}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(P){o=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/a_:u},set:function(P){u=P}});var l="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return l},set:function(P){l=P}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Ip||this instanceof uu))return Rm(d,this.objId,this.scope)},set:function(P){P=P.toString(),d=P}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof On?g:Rm(g,this.objId,this.scope)},set:function(P){P=P.toString(),g=this instanceof On?P:P.substr(0,1)==="("?_l(P.substr(1,P.length-2)):_l(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof On?_l(g.substr(1,g.length-1)):g},set:function(P){P=P.toString(),g=this instanceof On?"/"+P:P}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof On?p:Rm(p,this.objId,this.scope)},set:function(P){P=P.toString(),p=this instanceof On?P:P.substr(0,1)==="("?_l(P.substr(1,P.length-2)):_l(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof On?_l(p.substr(1,p.length-1)):p},set:function(P){P=P.toString(),p=this instanceof On?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var w,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(P){P=!!P,_=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(w)return w},set:function(P){w=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,1)},set:function(P){P?this.Ff=ln(this.Ff,1):this.Ff=hn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,2)},set:function(P){P?this.Ff=ln(this.Ff,2):this.Ff=hn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,3)},set:function(P){P?this.Ff=ln(this.Ff,3):this.Ff=hn(this.Ff,3)}});var T=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(T!==null)return T},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');T=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(T){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:T=2;break;case"center":case 1:T=1;break;case"left":case 0:default:T=0}}})};Ji(Xs,ma);var Wl=function(){Xs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return LS(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(s,a,o){o||(o=1);for(var c,u=[];c=a.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,18)},set:function(t){t?this.Ff=ln(this.Ff,18):this.Ff=hn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ln(this.Ff,19):this.Ff=hn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,20)},set:function(t){t?(this.Ff=ln(this.Ff,20),e.sort()):this.Ff=hn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,22)},set:function(t){t?this.Ff=ln(this.Ff,22):this.Ff=hn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,23)},set:function(t){t?this.Ff=ln(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,27)},set:function(t){t?this.Ff=ln(this.Ff,27):this.Ff=hn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ji(Wl,Xs);var zl=function(){Wl.call(this),this.fontName="helvetica",this.combo=!1};Ji(zl,Wl);var Hl=function(){zl.call(this),this.combo=!0};Ji(Hl,zl);var F0=function(){Hl.call(this),this.edit=!0};Ji(F0,Hl);var On=function(){Xs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,15)},set:function(t){t?this.Ff=ln(this.Ff,15):this.Ff=hn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,16)},set:function(t){t?this.Ff=ln(this.Ff,16):this.Ff=hn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,17)},set:function(t){t?this.Ff=ln(this.Ff,17):this.Ff=hn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,26)},set:function(t){t?this.Ff=ln(this.Ff,26):this.Ff=hn(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+ju(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){wr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Ji(On,Xs);var O0=function(){On.call(this),this.pushButton=!0};Ji(O0,On);var $l=function(){On.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Ji($l,On);var Ip=function(){var r,e;Xs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+ju(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){wr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Tt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ji(Ip,Xs),$l.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},$l.prototype.createOption=function(r){var e=new Ip;return e.Parent=this,e.optionName=r,this.Kids.push(e),Kz.call(this.scope,e),e};var M0=function(){On.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Tt.CheckBox.createAppearanceStream()};Ji(M0,On);var uu=function(){Xs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,13)},set:function(e){e?this.Ff=ln(this.Ff,13):this.Ff=hn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,21)},set:function(e){e?this.Ff=ln(this.Ff,21):this.Ff=hn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,23)},set:function(e){e?this.Ff=ln(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,24)},set:function(e){e?this.Ff=ln(this.Ff,24):this.Ff=hn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,25)},set:function(e){e?this.Ff=ln(this.Ff,25):this.Ff=hn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,26)},set:function(e){e?this.Ff=ln(this.Ff,26):this.Ff=hn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ji(uu,Xs);var B0=function(){uu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,14)},set:function(r){r?this.Ff=ln(this.Ff,14):this.Ff=hn(this.Ff,14)}}),this.password=!0};Ji(B0,uu);var Tt={CheckBox:{createAppearanceStream:function(){return{N:{On:Tt.CheckBox.YesNormal},D:{On:Tt.CheckBox.YesPushDown,Off:Tt.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=F1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Ut(Tt.internal.getWidth(r))+" "+Ut(Tt.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Ut(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=ca(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=Tt.internal.getHeight(r),a=Tt.internal.getWidth(r),o=F1(r,r.caption);return i.push("1 g"),i.push("0 0 "+Ut(a)+" "+Ut(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ut(a-1)+" "+Ut(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Ut(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Tt.internal.getWidth(r))+" "+Ut(Tt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:Tt.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=Tt.RadioButton.Circle.YesNormal,e.D[r]=Tt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Tt.internal.getWidth(r)<=Tt.internal.getHeight(r)?Tt.internal.getWidth(r)/4:Tt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Tt.internal.Bezier_C,s=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ko(Tt.internal.getWidth(r)/2)+" "+Ko(Tt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Tt.internal.getWidth(r)<=Tt.internal.getHeight(r)?Tt.internal.getWidth(r)/4:Tt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Tt.internal.Bezier_C).toFixed(5)),a=Number((n*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(Tt.internal.getWidth(r)/2)+" "+Ko(Tt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ko(Tt.internal.getWidth(r)/2)+" "+Ko(Tt.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Tt.internal.getWidth(r)<=Tt.internal.getHeight(r)?Tt.internal.getWidth(r)/4:Tt.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Tt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ko(Tt.internal.getWidth(r)/2)+" "+Ko(Tt.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:Tt.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=Tt.RadioButton.Cross.YesNormal,e.D[r]=Tt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Tt.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Ut(Tt.internal.getWidth(r)-2)+" "+Ut(Tt.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Ut(n.x1.x)+" "+Ut(n.x1.y)+" m"),t.push(Ut(n.x2.x)+" "+Ut(n.x2.y)+" l"),t.push(Ut(n.x4.x)+" "+Ut(n.x4.y)+" m"),t.push(Ut(n.x3.x)+" "+Ut(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=Tt.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ut(Tt.internal.getWidth(r))+" "+Ut(Tt.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ut(Tt.internal.getWidth(r)-2)+" "+Ut(Tt.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Ut(t.x1.x)+" "+Ut(t.x1.y)+" m"),n.push(Ut(t.x2.x)+" "+Ut(t.x2.y)+" l"),n.push(Ut(t.x4.x)+" "+Ut(t.x4.y)+" m"),n.push(Ut(t.x3.x)+" "+Ut(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Tt.internal.getWidth(r))+" "+Ut(Tt.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};Tt.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=Tt.internal.getWidth(r),t=Tt.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},Tt.internal.getWidth=function(r){var e=0;return wr(r)==="object"&&(e=B5(r.Rect[2])),e},Tt.internal.getHeight=function(r){var e=0;return wr(r)==="object"&&(e=B5(r.Rect[3])),e};var Kz=Qr.addField=function(r){if(Gz(this,r),!(r instanceof Xs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Qr.AcroFormChoiceField=Wl,Qr.AcroFormListBox=zl,Qr.AcroFormComboBox=Hl,Qr.AcroFormEditBox=F0,Qr.AcroFormButton=On,Qr.AcroFormPushButton=O0,Qr.AcroFormRadioButton=$l,Qr.AcroFormCheckBox=M0,Qr.AcroFormTextField=uu,Qr.AcroFormPasswordField=B0,Qr.AcroFormAppearance=Tt,Qr.AcroForm={ChoiceField:Wl,ListBox:zl,ComboBox:Hl,EditBox:F0,Button:On,PushButton:O0,RadioButton:$l,CheckBox:M0,TextField:uu,PasswordField:B0,Appearance:Tt},Dt.AcroForm={ChoiceField:Wl,ListBox:zl,ComboBox:Hl,EditBox:F0,Button:On,PushButton:O0,RadioButton:$l,CheckBox:M0,TextField:uu,PasswordField:B0,Appearance:Tt};Dt.AcroForm;function OS(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(b,S){var k,ie,ve,Te,Ne,_e=e;if((S=S||e)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(ce(b))for(Ne in t)for(ve=t[Ne],k=0;k<ve.length;k+=1){for(Te=!0,ie=0;ie<ve[k].length;ie+=1)if(ve[k][ie]!==void 0&&ve[k][ie]!==b[ie]){Te=!1;break}if(Te===!0){_e=Ne;break}}else for(Ne in t)for(ve=t[Ne],k=0;k<ve.length;k+=1){for(Te=!0,ie=0;ie<ve[k].length;ie+=1)if(ve[k][ie]!==void 0&&ve[k][ie]!==b.charCodeAt(ie)){Te=!1;break}if(Te===!0){_e=Ne;break}}return _e===e&&S!==e&&(_e=S),_e},i=function b(S){for(var k=this.internal.write,ie=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Te=[];if(Te.push({key:"Type",value:"/XObject"}),Te.push({key:"Subtype",value:"/Image"}),Te.push({key:"Width",value:S.width}),Te.push({key:"Height",value:S.height}),S.colorSpace===T.INDEXED?Te.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Te.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===T.DEVICE_CMYK&&Te.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Te.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Te.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var Ne="",_e=0,Ce=S.transparency.length;_e<Ce;_e++)Ne+=S.transparency[_e]+" "+S.transparency[_e]+" ";Te.push({key:"Mask",value:"["+Ne+"]"})}S.sMask!==void 0&&Te.push({key:"SMask",value:S.objectId+1+" 0 R"});var Fe=S.filter!==void 0?["/"+S.filter]:void 0;if(ie({data:S.data,additionalKeyValues:Te,alreadyAppliedFilters:Fe,objectId:S.objectId}),k("endobj"),"sMask"in S&&S.sMask!==void 0){var nt="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,E={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:nt,data:S.sMask};"filter"in S&&(E.filter=S.filter),b.call(this,E)}if(S.colorSpace===T.INDEXED){var D=this.internal.newObject();ie({data:A(new Uint8Array(S.palette)),objectId:D}),k("endobj")}},s=function(){var b=this.internal.collections.addImage_images;for(var S in b)i.call(this,b[S])},a=function(){var b,S=this.internal.collections.addImage_images,k=this.internal.write;for(var ie in S)k("/I"+(b=S[ie]).index,b.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var b=this.internal.collections.addImage_images;return o.call(this),b},u=function(){return Object.keys(this.internal.collections.addImage_images).length},l=function(b){return typeof r["process"+b.toUpperCase()]=="function"},d=function(b){return wr(b)==="object"&&b.nodeType===1},g=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var k=""+b.getAttribute("src");if(k.indexOf("data:image/")===0)return Pf(unescape(k).split("base64,").pop());var ie=r.loadFile(k,!0);if(ie!==void 0)return ie}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var ve;switch(S){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;case"JPEG":case"JPG":default:ve="image/jpeg"}return Pf(b.toDataURL(ve,1).split("base64,").pop())}},p=function(b){var S=this.internal.collections.addImage_images;if(S){for(var k in S)if(b===S[k].alias)return S[k]}},w=function(b,S,k){return b||S||(b=-96,S=-96),b<0&&(b=-1*k.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*k.height*72/S/this.internal.scaleFactor),b===0&&(b=S*k.width/k.height),S===0&&(S=b*k.height/k.width),[b,S]},_=function(b,S,k,ie,ve,Te){var Ne=w.call(this,k,ie,ve),_e=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,Fe=c.call(this);if(k=Ne[0],ie=Ne[1],Fe[ve.index]=ve,Te){Te*=Math.PI/180;var nt=Math.cos(Te),E=Math.sin(Te),D=function(U){return U.toFixed(4)},B=[D(nt),D(E),D(-1*E),D(nt),0,0,"cm"]}this.internal.write("q"),Te?(this.internal.write([1,"0","0",1,_e(b),Ce(S+ie),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([_e(k),"0","0",_e(ie),"0","0","cm"].join(" "))):this.internal.write([_e(k),"0","0",_e(ie),_e(b),Ce(S+ie),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},T=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=r.__addimage__.sHashCode=function(b){var S,k,ie=0;if(typeof b=="string")for(k=b.length,S=0;S<k;S++)ie=(ie<<5)-ie+b.charCodeAt(S),ie|=0;else if(ce(b))for(k=b.byteLength/2,S=0;S<k;S++)ie=(ie<<5)-ie+b[S],ie|=0;return ie},F=r.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},K=r.__addimage__.extractImageFromDataUrl=function(b){var S=(b=b||"").split("base64,"),k=null;if(S.length===2){var ie=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(ie)&&(k={mimeType:ie[1],charset:ie[2],data:S[1]})}return k},se=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(b){return se()&&b instanceof ArrayBuffer};var ce=r.__addimage__.isArrayBufferView=function(b){return se()&&typeof Uint32Array<"u"&&(b instanceof Int8Array||b instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)},R=r.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,k=new Uint8Array(S),ie=0;ie<S;ie++)k[ie]=b.charCodeAt(ie);return k},A=r.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",k=ce(b)?b:new Uint8Array(b),ie=0;ie<k.length;ie+=8192)S+=String.fromCharCode.apply(null,k.subarray(ie,ie+8192));return S};r.addImage=function(){var b,S,k,ie,ve,Te,Ne,_e,Ce;if(typeof arguments[1]=="number"?(S=e,k=arguments[1],ie=arguments[2],ve=arguments[3],Te=arguments[4],Ne=arguments[5],_e=arguments[6],Ce=arguments[7]):(S=arguments[1],k=arguments[2],ie=arguments[3],ve=arguments[4],Te=arguments[5],Ne=arguments[6],_e=arguments[7],Ce=arguments[8]),wr(b=arguments[0])==="object"&&!d(b)&&"imageData"in b){var Fe=b;b=Fe.imageData,S=Fe.format||S||e,k=Fe.x||k||0,ie=Fe.y||ie||0,ve=Fe.w||Fe.width||ve,Te=Fe.h||Fe.height||Te,Ne=Fe.alias||Ne,_e=Fe.compression||_e,Ce=Fe.rotation||Fe.angle||Ce}var nt=this.internal.getFilters();if(_e===void 0&&nt.indexOf("FlateEncode")!==-1&&(_e="SLOW"),isNaN(k)||isNaN(ie))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var E=C.call(this,b,S,Ne,_e);return _.call(this,k,ie,ve,Te,E,Ce),this};var C=function(b,S,k,ie){var ve,Te,Ne;if(typeof b=="string"&&n(b)===e){b=unescape(b);var _e=V(b,!1);(_e!==""||(_e=r.loadFile(b,!0))!==void 0)&&(b=_e)}if(d(b)&&(b=g(b,S)),S=n(b,S),!l(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((Ne=k)==null||Ne.length===0)&&(k=function(Ce){return typeof Ce=="string"||ce(Ce)?L(Ce):ce(Ce.data)?L(Ce.data):null}(b)),(ve=p.call(this,k))||(se()&&(b instanceof Uint8Array||S==="RGBA"||(Te=b,b=R(b))),ve=this["process"+S.toUpperCase()](b,u.call(this),k,function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in r.image_compression?Ce:P.NONE}(ie),Te)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},V=r.__addimage__.convertBase64ToBinaryString=function(b,S){var k;S=typeof S!="boolean"||S;var ie,ve="";if(typeof b=="string"){ie=(k=K(b))!==null?k.data:b;try{ve=Pf(ie)}catch(Te){if(S)throw F(ie)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Te.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ve};r.getImageProperties=function(b){var S,k,ie="";if(d(b)&&(b=g(b)),typeof b=="string"&&n(b)===e&&((ie=V(b,!1))===""&&(ie=r.loadFile(b)||""),b=ie),k=n(b),!l(k))throw new Error("addImage does not support files of type '"+k+"', please ensure that a plugin for '"+k+"' support is added.");if(!se()||b instanceof Uint8Array||(b=R(b)),!(S=this["process"+k.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=k,S}})(Dt.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,l=!1,d=0;d<u.length&&!l;d++)switch((n=u[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(l!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){n=u[g];var p=this.internal.pdfEscape,w=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),T=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(_.objId),L=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(P(n.contents))+")",s+=" /Popup "+T.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(P(L))+") >>",_.content=s;var F=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+F,n.open&&(s+=" /Open true"),s+=" >>",T.content=s,this.internal.write(_.objId,"0 R",T.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var K=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(w(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var se=this.annotations._nameMap[n.options.name];n.options.pageNumber=se.page,n.options.top=se.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(w(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var ce=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+ce+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,s,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(n),w:c(t+i),h:u(n+s)},options:a,type:"link"})},r.textWithLink=function(t,n,i,s){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var l=this.splitTextToSize(t,o).length;a=Math.ceil(u*l)}else o=c,a=u;return this.text(t,n,i,s),i+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-u,o,a,s),c},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Dt.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},a=r.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=r.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},c=r.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&i.indexOf(_.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var u=r.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var l=r.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(_){var T=0,P=t,L="",F=0;for(T=0;T<_.length;T+=1)P[_.charCodeAt(T)]!==void 0?(F++,typeof(P=P[_.charCodeAt(T)])=="number"&&(L+=String.fromCharCode(P),P=t,F=0),T===_.length-1&&(P=t,L+=_.charAt(T-(F-1)),T-=F-1,F=0)):(P=t,L+=_.charAt(T-F),T-=F,F=0);return L};r.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&n[_.charCodeAt(0)]!==void 0};var g=r.__arabicParser__.getCorrectForm=function(_,T,P){return a(_)?s(_)===!1?-1:!u(_)||!a(T)&&!a(P)||!a(P)&&o(T)||o(_)&&!a(T)||o(_)&&c(T)||o(_)&&o(T)?0:l(_)&&a(T)&&!o(T)&&a(P)&&u(P)?3:o(_)||!a(P)?1:2:-1},p=function(_){var T=0,P=0,L=0,F="",K="",se="",ce=(_=_||"").split("\\s+"),R=[];for(T=0;T<ce.length;T+=1){for(R.push(""),P=0;P<ce[T].length;P+=1)F=ce[T][P],K=ce[T][P-1],se=ce[T][P+1],a(F)?(L=g(F,K,se),R[T]+=L!==-1?String.fromCharCode(e[F.charCodeAt(0)][L]):F):R[T]+=F;R[T]=d(R[T])}return R.join(" ")},w=r.__arabicParser__.processArabic=r.processArabic=function(){var _,T=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(T)){var L=0;for(P=[],L=0;L<T.length;L+=1)Array.isArray(T[L])?P.push([p(T[L][0]),T[L][1],T[L][2]]):P.push([p(T[L])]);_=P}else _=p(T);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};r.events.push(["preProcessText",w])}(Dt.API),Dt.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var l=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var w=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return w},set:function(_){w=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},r.getTextDimensions=function(c,u){n.call(this);var l=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,p=0,w=0,_=0,T=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=u.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(F,K){return F.concat(T.splitTextToSize(K,P))},[])):c=Array.isArray(c)?c:[c];for(var L=0;L<c.length;L++)p<(_=this.getStringUnitWidth(c[L],{font:d})*l)&&(p=_);return p!==0&&(w=c.length),{w:p/=g,h:Math.max((w*l*this.getLineHeightFactor()-l*(this.getLineHeightFactor()-1))/g,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=r.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,l=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-l,c.y+l,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+l,{align:"center",baseline:"top",maxWidth:c.width-l-l}):this.text(c.text,c.x+l,c.y+l,{align:"left",baseline:"top",maxWidth:c.width-l-l})),this.internal.__cell__.lastCell=c,this};r.table=function(c,u,l,d,g){if(n.call(this),!l)throw new Error("No data for PDF table.");var p,w,_,T,P=[],L=[],F=[],K={},se={},ce=[],R=[],A=(g=g||{}).autoSize||!1,C=g.printHeaders!==!1,V=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,b=g.margins||Object.assign({width:this.getPageWidth()},e),S=typeof g.padding=="number"?g.padding:3,k=g.headerBackgroundColor||"#c8c8c8",ie=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=k,this.internal.__cell__.headerTextColor=ie,this.setFontSize(V),d==null)L=P=Object.keys(l[0]),F=P.map(function(){return"left"});else if(Array.isArray(d)&&wr(d[0])==="object")for(P=d.map(function(Fe){return Fe.name}),L=d.map(function(Fe){return Fe.prompt||Fe.name||""}),F=d.map(function(Fe){return Fe.align||"left"}),p=0;p<d.length;p+=1)se[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(L=P=d,F=P.map(function(){return"left"}));if(A||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<P.length;p+=1){for(K[T=P[p]]=l.map(function(Fe){return Fe[T]}),this.setFont(void 0,"bold"),ce.push(this.getTextDimensions(L[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),w=K[T],this.setFont(void 0,"normal"),_=0;_<w.length;_+=1)ce.push(this.getTextDimensions(w[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);se[T]=Math.max.apply(null,ce)+S+S,ce=[]}if(C){var ve={};for(p=0;p<P.length;p+=1)ve[P[p]]={},ve[P[p]].text=L[p],ve[P[p]].align=F[p];var Te=o.call(this,ve,se);R=P.map(function(Fe){return new s(c,u,se[Fe],Te,ve[Fe].text,void 0,ve[Fe].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var Ne=d.reduce(function(Fe,nt){return Fe[nt.name]=nt.align,Fe},{});for(p=0;p<l.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:l[p]},this);var _e=o.call(this,l[p],se);for(_=0;_<P.length;_+=1){var Ce=l[p][P[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:_,data:Ce},this),a.call(this,new s(c,u,se[P[_]],_e,Ce,p+2,Ne[P[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var l=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var w=c[p];return this.splitTextToSize(w.hasOwnProperty("text")?w.text:w,u[p]-l-l)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/g+l+l},this).reduce(function(p,w){return Math.max(p,w)},0)};r.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},r.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var l;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){l=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(l.y=this.internal.__cell__.margins.top||0,g.push(l)),l.lineNumber=c;var w=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,l),this.setTextColor(w)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Dt.API);var MS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},BS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],O1=OS(BS),VS=[100,200,300,400,500,600,700,800,900],Yz=OS(VS);function M1(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return MS[s=s||"normal"]?s:"normal"}(r.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(r.weight),i=function(s){return typeof O1[s=s||"normal"]=="number"?s:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function V5(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var Xz={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},U5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function j5(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function Jz(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Xz,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=M1(e[o])).family]&&(s.family=i[s.family]),r.hasOwnProperty(s.family)){a=r[s.family];break}if(!(a=a||r[n]))throw new Error("Could not find a font-family for the rule '"+j5(s)+"' and default family '"+n+"'.");if(a=function(c,u){if(u[c])return u[c];var l=O1[c],d=l<=O1.normal?-1:1,g=V5(u,BS,l,d);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,a),a=function(c,u){if(u[c])return u[c];for(var l=MS[c],d=0;d<l.length;++d)if(u[l[d]])return u[l[d]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var l=Yz[c],d=V5(u,VS,l,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+j5(s)+"'.");return a}function q5(r){return r.trimLeft()}function Qz(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Zz(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var x0,W5,z5,km=["times"];(function(r){var e,t,n,i,s,a,o,c,u,l=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new c,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new a,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new a,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new l}]);var d=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=E;Object.defineProperty(this,"pdf",{get:function(){return D}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(ke){B=!!ke}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(ke){U=!!ke}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(ke){isNaN(ke)||(J=ke)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(ke){isNaN(ke)||(ae=ke)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(ke){var ne;typeof ke=="number"?ne=[ke,ke,ke,ke]:((ne=new Array(4))[0]=ke[0],ne[1]=ke.length>=2?ke[1]:ne[0],ne[2]=ke.length>=3?ke[2]:ne[0],ne[3]=ke.length>=4?ke[3]:ne[1]),u.margin=ne}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(ke){le=ke}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(ke){ue=ke}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(ke){xe=ke}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(ke){ke instanceof l&&(u=ke)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(ke){u.path=ke}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(ke){Be=ke}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ke){var ne;ne=g(ke),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ke){var ne=g(ke);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ke){["butt","round","square"].indexOf(ke)!==-1&&(this.ctx.lineCap=ke,this.pdf.setLineCap(ke))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ke){isNaN(ke)||(this.ctx.lineWidth=ke,this.pdf.setLineWidth(ke))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ke){["bevel","round","miter"].indexOf(ke)!==-1&&(this.ctx.lineJoin=ke,this.pdf.setLineJoin(ke))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ke){isNaN(ke)||(this.ctx.miterLimit=ke,this.pdf.setMiterLimit(ke))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ke){this.ctx.textBaseline=ke}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ke){["right","end","center","left","start"].indexOf(ke)!==-1&&(this.ctx.textAlign=ke)}});var We=null;function Ze(ke,ne){if(We===null){var ze=function(_t){var $e=[];return Object.keys(_t).forEach(function(rt){_t[rt].forEach(function(ct){var ut=null;switch(ct){case"bold":ut={family:rt,weight:"bold"};break;case"italic":ut={family:rt,style:"italic"};break;case"bolditalic":ut={family:rt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:rt}}ut!==null&&(ut.ref={name:rt,style:ct},$e.push(ut))})}),$e}(ke.getFontList());We=function(_t){for(var $e={},rt=0;rt<_t.length;++rt){var ct=M1(_t[rt]),ut=ct.family,Et=ct.stretch,At=ct.style,Ft=ct.weight;$e[ut]=$e[ut]||{},$e[ut][Et]=$e[ut][Et]||{},$e[ut][Et][At]=$e[ut][Et][At]||{},$e[ut][Et][At][Ft]=ct}return $e}(ze.concat(ne))}return We}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(ke){We=null,at=ke}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ke){var ne;if(this.ctx.font=ke,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ke))!==null){var ze=ne[1],_t=(ne[2],ne[3]),$e=ne[4],rt=(ne[5],ne[6]),ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(ct==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ut=function(Rt){var qt,pt,Dr=[],Gt=Rt.trim();if(Gt==="")return km;if(Gt in U5)return[U5[Gt]];for(;Gt!=="";){switch(pt=null,qt=(Gt=q5(Gt)).charAt(0)){case'"':case"'":pt=Qz(Gt.substring(1),qt);break;default:pt=Zz(Gt)}if(pt===null||(Dr.push(pt[0]),(Gt=q5(pt[1]))!==""&&Gt.charAt(0)!==","))return km;Gt=Gt.replace(/^,/,"")}return Dr}(rt);if(this.fontFaces){var Et=Jz(Ze(this.pdf,this.fontFaces),ut.map(function(Rt){return{family:Rt,stretch:"normal",weight:_t,style:ze}}));this.pdf.setFont(Et.ref.name,Et.ref.style)}else{var At="";(_t==="bold"||parseInt(_t,10)>=700||ze==="bold")&&(At="bold"),ze==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Ft="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<ut.length;Ct++){if(this.pdf.internal.getFont(ut[Ct],At,{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[Ct];break}if(At==="bolditalic"&&this.pdf.internal.getFont(ut[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=ut[Ct],At="bold";else if(this.pdf.internal.getFont(ut[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[Ct],At="normal";break}}if(Ft===""){for(var Ht=0;Ht<ut.length;Ht++)if(It[ut[Ht]]){Ft=It[ut[Ht]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ke){this.ctx.globalCompositeOperation=ke}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ke){this.ctx.globalAlpha=ke}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ke){this.ctx.lineDashOffset=ke,nt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ke){this.ctx.lineDash=ke,nt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ke){this.ctx.ignoreClearRect=!!ke}})};d.prototype.setLineDash=function(E){this.lineDash=E},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){K.call(this,"fill",!1)},d.prototype.stroke=function(){K.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(E,D){if(isNaN(E)||isNaN(D))throw Cr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new a(E,D));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(E,D)},d.prototype.closePath=function(){var E=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&wr(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){E=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(E.x,E.y)},d.prototype.lineTo=function(E,D){if(isNaN(E)||isNaN(D))throw Cr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new a(E,D));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(B.x,B.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},d.prototype.quadraticCurveTo=function(E,D,B,U){if(isNaN(B)||isNaN(U)||isNaN(E)||isNaN(D))throw Cr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new a(B,U)),ae=this.ctx.transform.applyToPoint(new a(E,D));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},d.prototype.bezierCurveTo=function(E,D,B,U,J,ae){if(isNaN(J)||isNaN(ae)||isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new a(J,ae)),ue=this.ctx.transform.applyToPoint(new a(E,D)),xe=this.ctx.transform.applyToPoint(new a(B,U));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new a(le.x,le.y)},d.prototype.arc=function(E,D,B,U,J,ae){if(isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U)||isNaN(J))throw Cr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new a(E,D));E=le.x,D=le.y;var ue=this.ctx.transform.applyToPoint(new a(0,B)),xe=this.ctx.transform.applyToPoint(new a(0,0));B=Math.sqrt(Math.pow(ue.x-xe.x,2)+Math.pow(ue.y-xe.y,2))}Math.abs(J-U)>=2*Math.PI&&(U=0,J=2*Math.PI),this.path.push({type:"arc",x:E,y:D,radius:B,startAngle:U,endAngle:J,counterclockwise:ae})},d.prototype.arcTo=function(E,D,B,U,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(E,D,B,U){if(isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,D),this.lineTo(E+B,D),this.lineTo(E+B,D+U),this.lineTo(E,D+U),this.lineTo(E,D),this.lineTo(E+B,D),this.lineTo(E,D)},d.prototype.fillRect=function(E,D,B,U){if(isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,D,B,U),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(E,D,B,U){if(isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");w.call(this)||(this.beginPath(),this.rect(E,D,B,U),this.stroke())},d.prototype.clearRect=function(E,D,B,U){if(isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,D,B,U))},d.prototype.save=function(E){E=typeof E!="boolean"||E;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},d.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(D),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(E){var D,B,U,J;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))D=0,B=0,U=0,J=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(ae!==null)D=parseInt(ae[1]),B=parseInt(ae[2]),U=parseInt(ae[3]),J=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)D=parseInt(ae[1]),B=parseInt(ae[2]),U=parseInt(ae[3]),J=parseFloat(ae[4]);else{if(J=1,typeof E=="string"&&E.charAt(0)!=="#"){var le=new CS(E);E=le.ok?le.toHex():"#000000"}E.length===4?(D=E.substring(1,2),D+=D,B=E.substring(2,3),B+=B,U=E.substring(3,4),U+=U):(D=E.substring(1,3),B=E.substring(3,5),U=E.substring(5,7)),D=parseInt(D,16),B=parseInt(B,16),U=parseInt(U,16)}}return{r:D,g:B,b:U,a:J,style:E}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},w=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(E,D,B,U){if(isNaN(D)||isNaN(B)||typeof E!="string")throw Cr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!p.call(this)){var J=_e(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;S.call(this,{text:E,x:D,y:B,scale:ae,angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.strokeText=function(E,D,B,U){if(isNaN(D)||isNaN(B)||typeof E!="string")throw Cr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!w.call(this)){U=isNaN(U)?void 0:U;var J=_e(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;S.call(this,{text:E,x:D,y:B,scale:ae,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.measureText=function(E){if(typeof E!="string")throw Cr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,B=this.pdf.internal.scaleFactor,U=D.internal.getFontSize(),J=D.getStringUnitWidth(E)*U/D.internal.scaleFactor,ae=function(le){var ue=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new ae({width:J*=Math.round(96*B/72*1e4)/1e4})},d.prototype.scale=function(E,D){if(isNaN(E)||isNaN(D))throw Cr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new c(E,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.rotate=function(E){if(isNaN(E))throw Cr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.translate=function(E,D){if(isNaN(E)||isNaN(D))throw Cr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new c(1,0,0,1,E,D);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.transform=function(E,D,B,U,J,ae){if(isNaN(E)||isNaN(D)||isNaN(B)||isNaN(U)||isNaN(J)||isNaN(ae))throw Cr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(E,D,B,U,J,ae);this.ctx.transform=this.ctx.transform.multiply(le)},d.prototype.setTransform=function(E,D,B,U,J,ae){E=isNaN(E)?1:E,D=isNaN(D)?0:D,B=isNaN(B)?0:B,U=isNaN(U)?1:U,J=isNaN(J)?0:J,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(E,D,B,U,J,ae)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(E,D,B,U,J,ae,le,ue,xe){var Be=this.pdf.getImageProperties(E),We=1,Ze=1,at=1,ke=1;U!==void 0&&ue!==void 0&&(at=ue/U,ke=xe/J,We=Be.width/U*ue/U,Ze=Be.height/J*xe/J),ae===void 0&&(ae=D,le=B,D=0,B=0),U!==void 0&&ue===void 0&&(ue=U,xe=J),U===void 0&&ue===void 0&&(ue=Be.width,xe=Be.height);for(var ne,ze=this.ctx.transform.decompose(),_t=_e(ze.rotate.shx),$e=new c,rt=($e=($e=($e=$e.multiply(ze.translate)).multiply(ze.skew)).multiply(ze.scale)).applyToRectangle(new o(ae-D*at,le-B*ke,U*We,J*Ze)),ct=T.call(this,rt),ut=[],Et=0;Et<ct.length;Et+=1)ut.indexOf(ct[Et])===-1&&ut.push(ct[Et]);if(F(ut),this.autoPaging)for(var At=ut[0],Ft=ut[ut.length-1],It=At;It<Ft+1;It++){this.pdf.setPage(It);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=It===1?this.posY+this.margin[0]:this.margin[0],Rt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=It===1?0:Rt+(It-2)*qt;if(this.ctx.clip_path.length!==0){var Dr=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(ne,this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset),se.call(this,"fill",!0),this.path=Dr}var Gt=JSON.parse(JSON.stringify(rt));Gt=L([Gt],this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset)[0];var qn=(It>At||It<Ft)&&_.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,qt,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,_t),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,_t)};var T=function(E,D,B){var U=[];D=D||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":U.push(Math.floor((E.y+J)/B)+1);break;case"arc":U.push(Math.floor((E.y+J-E.radius)/B)+1),U.push(Math.floor((E.y+J+E.radius)/B)+1);break;case"qct":var ae=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);U.push(Math.floor((ae.y+J)/B)+1),U.push(Math.floor((ae.y+ae.h+J)/B)+1);break;case"bct":var le=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);U.push(Math.floor((le.y+J)/B)+1),U.push(Math.floor((le.y+le.h+J)/B)+1);break;case"rect":U.push(Math.floor((E.y+J)/B)+1),U.push(Math.floor((E.y+E.h+J)/B)+1)}for(var ue=0;ue<U.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<U[ue];)P.call(this);return U},P=function(){var E=this.fillStyle,D=this.strokeStyle,B=this.font,U=this.lineCap,J=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=D,this.font=B,this.lineCap=U,this.lineWidth=J,this.lineJoin=ae},L=function(E,D,B){for(var U=0;U<E.length;U++)switch(E[U].type){case"bct":E[U].x2+=D,E[U].y2+=B;case"qct":E[U].x1+=D,E[U].y1+=B;case"mt":case"lt":case"arc":default:E[U].x+=D,E[U].y+=B}return E},F=function(E){return E.sort(function(D,B){return D-B})},K=function(E,D){for(var B,U,J=this.fillStyle,ae=this.strokeStyle,le=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Be=this.lineJoin,We=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),at=[],ke=0;ke<Ze.length;ke++)if(Ze[ke].x!==void 0)for(var ne=T.call(this,Ze[ke]),ze=0;ze<ne.length;ze+=1)at.indexOf(ne[ze])===-1&&at.push(ne[ze]);for(var _t=0;_t<at.length;_t++)for(;this.pdf.internal.getNumberOfPages()<at[_t];)P.call(this);if(F(at),this.autoPaging)for(var $e=at[0],rt=at[at.length-1],ct=$e;ct<rt+1;ct++){this.pdf.setPage(ct),this.fillStyle=J,this.strokeStyle=ae,this.lineCap=le,this.lineWidth=xe,this.lineJoin=Be;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Et=ct===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=ct===1?0:At+(ct-2)*Ft;if(this.ctx.clip_path.length!==0){var Ct=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(B,this.posX+this.margin[3],-It+Et+this.ctx.prevPageLastElemOffset),se.call(this,E,!0),this.path=Ct}if(U=JSON.parse(JSON.stringify(We)),this.path=L(U,this.posX+this.margin[3],-It+Et+this.ctx.prevPageLastElemOffset),D===!1||ct===0){var Ht=(ct>$e||ct<rt)&&_.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ft,null).clip().discardPath()),se.call(this,E,D),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=xe,se.call(this,E,D),this.lineWidth=ue;this.path=We},se=function(E,D){if((E!=="stroke"||D||!w.call(this))&&(E==="stroke"||D||!p.call(this))){for(var B,U,J=[],ae=this.path,le=0;le<ae.length;le++){var ue=ae[le];switch(ue.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:ue,deltas:[],abs:[]});break;case"lt":var xe=J.length;if(ae[le-1]&&!isNaN(ae[le-1].x)&&(B=[ue.x-ae[le-1].x,ue.y-ae[le-1].y],xe>0)){for(;xe>=0;xe--)if(J[xe-1].close!==!0&&J[xe-1].begin!==!0){J[xe-1].deltas.push(B),J[xe-1].abs.push(ue);break}}break;case"bct":B=[ue.x1-ae[le-1].x,ue.y1-ae[le-1].y,ue.x2-ae[le-1].x,ue.y2-ae[le-1].y,ue.x-ae[le-1].x,ue.y-ae[le-1].y],J[J.length-1].deltas.push(B);break;case"qct":var Be=ae[le-1].x+2/3*(ue.x1-ae[le-1].x),We=ae[le-1].y+2/3*(ue.y1-ae[le-1].y),Ze=ue.x+2/3*(ue.x1-ue.x),at=ue.y+2/3*(ue.y1-ue.y),ke=ue.x,ne=ue.y;B=[Be-ae[le-1].x,We-ae[le-1].y,Ze-ae[le-1].x,at-ae[le-1].y,ke-ae[le-1].x,ne-ae[le-1].y],J[J.length-1].deltas.push(B);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(ue)}}U=D?null:E==="stroke"?"stroke":"fill";for(var ze=!1,_t=0;_t<J.length;_t++)if(J[_t].arc)for(var $e=J[_t].abs,rt=0;rt<$e.length;rt++){var ct=$e[rt];ct.type==="arc"?A.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,D,!ze):k.call(this,ct.x,ct.y),ze=!0}else if(J[_t].close===!0)this.pdf.internal.out("h"),ze=!1;else if(J[_t].begin!==!0){var ut=J[_t].start.x,Et=J[_t].start.y;ie.call(this,J[_t].deltas,ut,Et),ze=!0}U&&C.call(this,U),D&&V.call(this)}},ce=function(E){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-B;case"top":return E+D-B;case"hanging":return E+D-2*B;case"middle":return E+D/2-B;case"ideographic":return E;case"alphabetic":default:return E}},R=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(D,B){this.colorStops.push([D,B])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(E,D,B,U,J,ae,le,ue,xe){for(var Be=Te.call(this,B,U,J,ae),We=0;We<Be.length;We++){var Ze=Be[We];We===0&&(xe?b.call(this,Ze.x1+E,Ze.y1+D):k.call(this,Ze.x1+E,Ze.y1+D)),ve.call(this,E,D,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ue?V.call(this):C.call(this,le)},C=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(E,D){this.pdf.internal.out(t(E)+" "+n(D)+" m")},S=function(E){var D;switch(E.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var B=this.pdf.getTextDimensions(E.text),U=ce.call(this,E.y),J=R.call(this,U)-B.h,ae=this.ctx.transform.applyToPoint(new a(E.x,U)),le=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var xe,Be,We,Ze=this.ctx.transform.applyToRectangle(new o(E.x,U,B.w,B.h)),at=ue.applyToRectangle(new o(E.x,J,B.w,B.h)),ke=T.call(this,at),ne=[],ze=0;ze<ke.length;ze+=1)ne.indexOf(ke[ze])===-1&&ne.push(ke[ze]);if(F(ne),this.autoPaging)for(var _t=ne[0],$e=ne[ne.length-1],rt=_t;rt<$e+1;rt++){this.pdf.setPage(rt);var ct=rt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Et=this.pdf.internal.pageSize.height-this.margin[2],At=Et-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],It=Ft-this.margin[3],Ct=rt===1?0:ut+(rt-2)*At;if(this.ctx.clip_path.length!==0){var Ht=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(xe,this.posX+this.margin[3],-1*Ct+ct),se.call(this,"fill",!0),this.path=Ht}var Rt=L([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-Ct+ct+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*E.scale),We=this.lineWidth,this.lineWidth=We*E.scale);var qt=this.autoPaging!=="text";if(qt||Rt.y+Rt.h<=Et){if(qt||Rt.y>=ct&&Rt.x<=Ft){var pt=qt?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||Ft-Rt.x)[0],Dr=L([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Ct+ct+this.ctx.prevPageLastElemOffset)[0],Gt=qt&&(rt>_t||rt<$e)&&_.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,At,null).clip().discardPath()),this.pdf.text(pt,Dr.x,Dr.y,{angle:E.angle,align:D,renderingMode:E.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else Rt.y<Et&&(this.ctx.prevPageLastElemOffset+=Et-Rt.y);E.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=We)}else E.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*E.scale),We=this.lineWidth,this.lineWidth=We*E.scale),this.pdf.text(E.text,ae.x+this.posX,ae.y+this.posY,{angle:E.angle,align:D,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=We)},k=function(E,D,B,U){B=B||0,U=U||0,this.pdf.internal.out(t(E+B)+" "+n(D+U)+" l")},ie=function(E,D,B){return this.pdf.lines(E,D,B,null,null)},ve=function(E,D,B,U,J,ae,le,ue){this.pdf.internal.out([e(i(B+E)),e(s(U+D)),e(i(J+E)),e(s(ae+D)),e(i(le+E)),e(s(ue+D)),"c"].join(" "))},Te=function(E,D,B,U){for(var J=2*Math.PI,ae=Math.PI/2;D>B;)D-=J;var le=Math.abs(B-D);le<J&&U&&(le=J-le);for(var ue=[],xe=U?-1:1,Be=D;le>1e-5;){var We=Be+xe*Math.min(le,ae);ue.push(Ne.call(this,E,Be,We)),le-=Math.abs(We-Be),Be=We}return ue},Ne=function(E,D,B){var U=(B-D)/2,J=E*Math.cos(U),ae=E*Math.sin(U),le=J,ue=-ae,xe=le*le+ue*ue,Be=xe+le*J+ue*ae,We=4/3*(Math.sqrt(2*xe*Be)-Be)/(le*ae-ue*J),Ze=le-We*ue,at=ue+We*le,ke=Ze,ne=-at,ze=U+D,_t=Math.cos(ze),$e=Math.sin(ze);return{x1:E*Math.cos(D),y1:E*Math.sin(D),x2:Ze*_t-at*$e,y2:Ze*$e+at*_t,x3:ke*_t-ne*$e,y3:ke*$e+ne*_t,x4:E*Math.cos(B),y4:E*Math.sin(B)}},_e=function(E){return 180*E/Math.PI},Ce=function(E,D,B,U,J,ae){var le=E+.5*(B-E),ue=D+.5*(U-D),xe=J+.5*(B-J),Be=ae+.5*(U-ae),We=Math.min(E,J,le,xe),Ze=Math.max(E,J,le,xe),at=Math.min(D,ae,ue,Be),ke=Math.max(D,ae,ue,Be);return new o(We,at,Ze-We,ke-at)},Fe=function(E,D,B,U,J,ae,le,ue){var xe,Be,We,Ze,at,ke,ne,ze,_t,$e,rt,ct,ut,Et,At=B-E,Ft=U-D,It=J-B,Ct=ae-U,Ht=le-J,Rt=ue-ae;for(Be=0;Be<41;Be++)_t=(ne=(We=E+(xe=Be/40)*At)+xe*((at=B+xe*It)-We))+xe*(at+xe*(J+xe*Ht-at)-ne),$e=(ze=(Ze=D+xe*Ft)+xe*((ke=U+xe*Ct)-Ze))+xe*(ke+xe*(ae+xe*Rt-ke)-ze),Be==0?(rt=_t,ct=$e,ut=_t,Et=$e):(rt=Math.min(rt,_t),ct=Math.min(ct,$e),ut=Math.max(ut,_t),Et=Math.max(Et,$e));return new o(Math.round(rt),Math.round(ct),Math.round(ut-rt),Math.round(Et-ct))},nt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,D,B=(E=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:D}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Dt.API),function(r){var e=function(s){var a,o,c,u,l,d,g,p,w,_;for(o=[],c=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(l=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(l=((l=((l=((l=(l-(_=l%85))/85)-(w=l%85))/85)-(p=l%85))/85)-(g=l%85))/85)%85,o.push(d+33,g+33,p+33,w+33,_+33)):o.push(122);return function(T,P){for(var L=P;L>0;L--)T.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,c,u,l,d=String,g="length",p=255,w="charCodeAt",_="slice",T="replace";for(s[_](-2),s=s[_](0,-2)[T](/\s/g,"")[T]("z","!!!!!"),c=[],u=0,l=(s+=a="uuuuu"[_](s[g]%5||5))[g];l>u;u+=5)o=52200625*(s[w](u)-33)+614125*(s[w](u+1)-33)+7225*(s[w](u+2)-33)+85*(s[w](u+3)-33)+(s[w](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(P,L){for(var F=L;F>0;F--)P.pop()}(c,a[g]),d.fromCharCode.apply(d,c)},n=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=R1(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};r.processDataByFilters=function(s,a){var o=0,c=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Dt.API),function(r){r.loadFile=function(e,t,n){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(c,u,l){var d=new XMLHttpRequest,g=0,p=function(w){var _=w.length,T=[],P=String.fromCharCode;for(g=0;g<_;g+=1)T.push(P(255&w.charCodeAt(g)));return T.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?l(p(this.responseText)):l(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)}(i,s,a)}catch{}return o}(e,t,n)},r.loadImageFile=r.loadFile}(Dt.API),function(r){function e(){return(Ot.html2canvas?Promise.resolve(Ot.html2canvas):I1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Ot.DOMPurify?Promise.resolve(Ot.DOMPurify):I1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=wr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,l){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)l!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(c(g,l));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,l=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:l,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var p=u[g],w=p.src.find(function(_){return _.format==="truetype"});w&&c.addFont(w.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,function(u,l){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,l).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),l=c.call(u,a,o);return s.convert(l,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,o,c){if(wr(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var l,d=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":l=1;break;case"mm":l=72/25.4;break;case"cm":l=72/2.54;break;case"in":l=72;break;case"px":l=.75;break;case"pc":case"em":l=12;break;case"ex":l=6;break;default:throw"Invalid unit: "+o}var p,w=0,_=0;if(g.hasOwnProperty(d))w=g[d][1]/l,_=g[d][0]/l;else try{w=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",_>w&&(p=_,_=w,w=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",w>_&&(p=_,_=w,w=p)}return{width:_,height:w,unit:o,k:l,orientation:a}},r.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(M1):null;var c=new s(o);return o.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(r){return z5=r,this.internal.events.subscribe("postPutResources",function(){x0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(x0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),W5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+z5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){x0!==void 0&&W5!==void 0&&this.internal.out("/Names <</JavaScript "+x0+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,l=[];for(s=0;s<u;s++){var d=t.internal.newObject();l.push(d);var g=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<l.length;s++)t.internal.write("(page_"+(s+1)+")"+l[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(Dt.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,s,a,o){var c,u=this.decode.DCT_DECODE,l=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(d){for(var g,p=256*d.charCodeAt(4)+d.charCodeAt(5),w=d.length,_={width:0,height:0,numcomponents:1},T=4;T<w;T+=2){if(T+=p,e.indexOf(d.charCodeAt(T+1))!==-1){g=256*d.charCodeAt(T+5)+d.charCodeAt(T+6),_={width:256*d.charCodeAt(T+7)+d.charCodeAt(T+8),height:g,numcomponents:d.charCodeAt(T+9)};break}p=256*d.charCodeAt(T+2)+d.charCodeAt(T+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}l={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return l}}(Dt.API);var yl,T0,H5,$5,G5,eH=function(){var r,e,t;function n(s){var a,o,c,u,l,d,g,p,w,_,T,P,L,F;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),w=(function(){var K,se;for(se=[],K=0;K<4;++K)se.push(String.fromCharCode(this.data[this.pos++]));return se}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},l=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*l/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,a-=4),s=(d!=null?d.data:void 0)||this.imgData,P=0;0<=a?P<a:P>a;0<=a?++P:--P)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(L=0;0<=_?L<_:L>_;0<=_?++L:--L)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(T=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,T.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,T.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(F=this.colorType)===4||F===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function l(d,g,p,w){var _,T,P,L,F,K,se,ce,R,A,C,V,b,S,k,ie,ve,Te,Ne,_e,Ce,Fe=Math.ceil((u.width-d)/p),nt=Math.ceil((u.height-g)/w),E=u.width==Fe&&u.height==nt;for(S=a*Fe,V=E?o:new Uint8Array(S*nt),K=s.length,b=0,T=0;b<nt&&c<K;){switch(s[c++]){case 0:for(L=ve=0;ve<S;L=ve+=1)V[T++]=s[c++];break;case 1:for(L=Te=0;Te<S;L=Te+=1)_=s[c++],F=L<a?0:V[T-a],V[T++]=(_+F)%256;break;case 2:for(L=Ne=0;Ne<S;L=Ne+=1)_=s[c++],P=(L-L%a)/a,k=b&&V[(b-1)*S+P*a+L%a],V[T++]=(k+_)%256;break;case 3:for(L=_e=0;_e<S;L=_e+=1)_=s[c++],P=(L-L%a)/a,F=L<a?0:V[T-a],k=b&&V[(b-1)*S+P*a+L%a],V[T++]=(_+Math.floor((F+k)/2))%256;break;case 4:for(L=Ce=0;Ce<S;L=Ce+=1)_=s[c++],P=(L-L%a)/a,F=L<a?0:V[T-a],b===0?k=ie=0:(k=V[(b-1)*S+P*a+L%a],ie=P&&V[(b-1)*S+(P-1)*a+L%a]),se=F+k-ie,ce=Math.abs(se-F),A=Math.abs(se-k),C=Math.abs(se-ie),R=ce<=A&&ce<=C?F:A<=C?k:ie,V[T++]=(_+R)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!E){var D=((g+b*w)*u.width+d)*a,B=b*S;for(L=0;L<Fe;L+=1){for(var U=0;U<a;U+=1)o[D++]=V[B++];D+=(p-1)*a}}b++}}return s=kz(s),u.interlaceMethod==1?(l(0,0,8,8),l(4,0,8,8),l(0,4,4,8),l(2,0,4,4),l(0,2,2,4),l(1,0,2,2),l(0,1,1,2)):l(0,0,1,1),o},n.prototype.decodePalette=function(){var s,a,o,c,u,l,d,g,p;for(o=this.palette,l=this.transparency.indexed||[],u=new Uint8Array((l.length||0)+o.length),c=0,s=0,a=d=0,g=o.length;d<g;a=d+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(p=l[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,a){var o,c,u,l,d,g,p,w,_,T,P;if(c=this.colors,_=null,o=this.hasAlphaChannel,this.palette.length&&(_=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),c=4,o=!0),w=(u=s.data||s).length,d=_||a,l=g=0,c===1)for(;l<w;)p=_?4*a[l/4]:g,T=d[p++],u[l++]=T,u[l++]=T,u[l++]=T,u[l++]=o?d[p++]:255,g=p;else for(;l<w;)p=_?4*a[l/4]:g,u[l++]=d[p++],u[l++]=d[p++],u[l++]=d[p++],u[l++]=o?d[p++]:255,g=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ot)==="[object Window]"){try{e=Ot.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),r=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var a,o,c,u,l,d,g,p;if(this.animation){for(p=[],o=l=0,d=(g=this.animation.frames).length;l<d;o=++l)a=g[o],c=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,p.push(a.image=r(c));return p}},n.prototype.renderFrame=function(s,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var a,o,c,u,l,d,g=this;return o=0,d=this.animation,u=d.numFrames,c=d.frames,l=d.numPlays,(a=function(){var p,w;if(p=o++%u,w=c[p],g.renderFrame(s,p),u>1&&o/u<l)return g.animation._timeout=setTimeout(a,w.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function tH(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],s=i>>7,a=1<<(7&i)+1;r[e++],r[e++];var o=null,c=null;s&&(o=e,c=a,e+=3*a);var u=!0,l=[],d=0,g=null,p=0,w=null;for(this.width=t,this.height=n;u&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,w=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((b=r[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=r[e++];d=r[e++]|r[e++]<<8,g=r[e++],!(1&_)&&(g=null),p=_>>2&7,e++;break;case 254:for(;;){if(!((b=r[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var T=r[e++]|r[e++]<<8,P=r[e++]|r[e++]<<8,L=r[e++]|r[e++]<<8,F=r[e++]|r[e++]<<8,K=r[e++],se=K>>6&1,ce=1<<(7&K)+1,R=o,A=c,C=!1;K>>7&&(C=!0,R=e,A=ce,e+=3*ce);var V=e;for(e++;;){var b;if(!((b=r[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}l.push({x:T,y:P,width:L,height:F,has_local_palette:C,palette_offset:R,palette_size:A,data_offset:V,data_length:e-V,transparent_index:g,interlaced:!!se,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return w},this.frameInfo=function(S){if(S<0||S>=l.length)throw new Error("Frame index out of range.");return l[S]},this.decodeAndBlitFrameBGRA=function(S,k){var ie=this.frameInfo(S),ve=ie.width*ie.height,Te=new Uint8Array(ve);K5(r,ie.data_offset,Te,ve);var Ne=ie.palette_offset,_e=ie.transparent_index;_e===null&&(_e=256);var Ce=ie.width,Fe=t-Ce,nt=Ce,E=4*(ie.y*t+ie.x),D=4*((ie.y+ie.height)*t+ie.x),B=E,U=4*Fe;ie.interlaced===!0&&(U+=4*t*7);for(var J=8,ae=0,le=Te.length;ae<le;++ae){var ue=Te[ae];if(nt===0&&(nt=Ce,(B+=U)>=D&&(U=4*Fe+4*t*(J-1),B=E+(Ce+Fe)*(J<<1),J>>=1)),ue===_e)B+=4;else{var xe=r[Ne+3*ue],Be=r[Ne+3*ue+1],We=r[Ne+3*ue+2];k[B++]=We,k[B++]=Be,k[B++]=xe,k[B++]=255}--nt}},this.decodeAndBlitFrameRGBA=function(S,k){var ie=this.frameInfo(S),ve=ie.width*ie.height,Te=new Uint8Array(ve);K5(r,ie.data_offset,Te,ve);var Ne=ie.palette_offset,_e=ie.transparent_index;_e===null&&(_e=256);var Ce=ie.width,Fe=t-Ce,nt=Ce,E=4*(ie.y*t+ie.x),D=4*((ie.y+ie.height)*t+ie.x),B=E,U=4*Fe;ie.interlaced===!0&&(U+=4*t*7);for(var J=8,ae=0,le=Te.length;ae<le;++ae){var ue=Te[ae];if(nt===0&&(nt=Ce,(B+=U)>=D&&(U=4*Fe+4*t*(J-1),B=E+(Ce+Fe)*(J<<1),J>>=1)),ue===_e)B+=4;else{var xe=r[Ne+3*ue],Be=r[Ne+3*ue+1],We=r[Ne+3*ue+2];k[B++]=xe,k[B++]=Be,k[B++]=We,k[B++]=255}--nt}}}function K5(r,e,t,n){for(var i=r[e++],s=1<<i,a=s+1,o=a+1,c=i+1,u=(1<<c)-1,l=0,d=0,g=0,p=r[e++],w=new Int32Array(4096),_=null;;){for(;l<16&&p!==0;)d|=r[e++]<<l,l+=8,p===1?p=r[e++]:--p;if(l<c)break;var T=d&u;if(d>>=c,l-=c,T!==s){if(T===a)break;for(var P=T<o?T:_,L=0,F=P;F>s;)F=w[F]>>8,++L;var K=F;if(g+L+(P!==T?1:0)>n)return void Cr.log("Warning, gif stream longer than expected.");t[g++]=K;var se=g+=L;for(P!==T&&(t[g++]=K),F=P;L--;)F=w[F],t[--se]=255&F,F>>=8;_!==null&&o<4096&&(w[o++]=_<<8|K,o>=u+1&&c<12&&(++c,u=u<<1|1)),_=T}else o=a+1,u=(1<<(c=i+1))-1,_=null}return g!==n&&Cr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Lm(r){var e,t,n,i,s,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),d=new Array(65535),g=new Array(65535),p=new Array(64),w=new Array(64),_=[],T=0,P=7,L=new Array(64),F=new Array(64),K=new Array(64),se=new Array(256),ce=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],ie=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Te(E,D){for(var B=0,U=0,J=new Array,ae=1;ae<=16;ae++){for(var le=1;le<=E[ae];le++)J[D[U]]=[],J[D[U]][0]=B,J[D[U]][1]=ae,U++,B++;B*=2}return J}function Ne(E){for(var D=E[0],B=E[1]-1;B>=0;)D&1<<B&&(T|=1<<P),B--,--P<0&&(T==255?(_e(255),_e(0)):_e(T),P=7,T=0)}function _e(E){_.push(E)}function Ce(E){_e(E>>8&255),_e(255&E)}function Fe(E,D,B,U,J){for(var ae,le=J[0],ue=J[240],xe=function($e,rt){var ct,ut,Et,At,Ft,It,Ct,Ht,Rt,qt,pt=0;for(Rt=0;Rt<8;++Rt){ct=$e[pt],ut=$e[pt+1],Et=$e[pt+2],At=$e[pt+3],Ft=$e[pt+4],It=$e[pt+5],Ct=$e[pt+6];var Dr=ct+(Ht=$e[pt+7]),Gt=ct-Ht,qn=ut+Ct,tr=ut-Ct,Tr=Et+It,Li=Et-It,Kt=At+Ft,Qi=At-Ft,Er=Dr+Kt,bn=Dr-Kt,mi=qn+Tr,cr=qn-Tr;$e[pt]=Er+mi,$e[pt+4]=Er-mi;var Nt=.707106781*(cr+bn);$e[pt+2]=bn+Nt,$e[pt+6]=bn-Nt;var er=.382683433*((Er=Qi+Li)-(cr=tr+Gt)),Di=.5411961*Er+er,Kr=1.306562965*cr+er,Rn=.707106781*(mi=Li+tr),vi=Gt+Rn,wt=Gt-Rn;$e[pt+5]=wt+Di,$e[pt+3]=wt-Di,$e[pt+1]=vi+Kr,$e[pt+7]=vi-Kr,pt+=8}for(pt=0,Rt=0;Rt<8;++Rt){ct=$e[pt],ut=$e[pt+8],Et=$e[pt+16],At=$e[pt+24],Ft=$e[pt+32],It=$e[pt+40],Ct=$e[pt+48];var si=ct+(Ht=$e[pt+56]),mn=ct-Ht,Yr=ut+Ct,Hr=ut-Ct,Ur=Et+It,j=Et-It,ee=At+Ft,Y=At-Ft,X=si+ee,Z=si-ee,te=Yr+Ur,ye=Yr-Ur;$e[pt]=X+te,$e[pt+32]=X-te;var Re=.707106781*(ye+Z);$e[pt+16]=Z+Re,$e[pt+48]=Z-Re;var we=.382683433*((X=Y+j)-(ye=Hr+mn)),Ee=.5411961*X+we,Pe=1.306562965*ye+we,Ke=.707106781*(te=j+Hr),it=mn+Ke,gt=mn-Ke;$e[pt+40]=gt+Ee,$e[pt+24]=gt-Ee,$e[pt+8]=it+Pe,$e[pt+56]=it-Pe,pt++}for(Rt=0;Rt<64;++Rt)qt=$e[Rt]*rt[Rt],p[Rt]=qt>0?qt+.5|0:qt-.5|0;return p}(E,D),Be=0;Be<64;++Be)w[R[Be]]=xe[Be];var We=w[0]-B;B=w[0],We==0?Ne(U[0]):(Ne(U[g[ae=32767+We]]),Ne(d[ae]));for(var Ze=63;Ze>0&&w[Ze]==0;)Ze--;if(Ze==0)return Ne(le),B;for(var at,ke=1;ke<=Ze;){for(var ne=ke;w[ke]==0&&ke<=Ze;)++ke;var ze=ke-ne;if(ze>=16){at=ze>>4;for(var _t=1;_t<=at;++_t)Ne(ue);ze&=15}ae=32767+w[ke],Ne(J[(ze<<4)+g[ae]]),Ne(d[ae]),ke++}return Ze!=63&&Ne(le),B}function nt(E){E=Math.min(Math.max(E,1),100),s!=E&&(function(D){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var J=a((B[U]*D+50)/100);J=Math.min(Math.max(J,1),255),o[R[U]]=J}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var ue=a((ae[le]*D+50)/100);ue=Math.min(Math.max(ue,1),255),c[R[le]]=ue}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,We=0;We<8;We++)for(var Ze=0;Ze<8;Ze++)u[Be]=1/(o[R[Be]]*xe[We]*xe[Ze]*8),l[Be]=1/(c[R[Be]]*xe[We]*xe[Ze]*8),Be++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),s=E)}this.encode=function(E,D){D&&nt(D),_=new Array,T=0,P=7,Ce(65496),Ce(65504),Ce(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),Ce(1),Ce(1),_e(0),_e(0),function(){Ce(65499),Ce(132),_e(0);for(var ut=0;ut<64;ut++)_e(o[ut]);_e(1);for(var Et=0;Et<64;Et++)_e(c[Et])}(),function(ut,Et){Ce(65472),Ce(17),_e(8),Ce(Et),Ce(ut),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1)}(E.width,E.height),function(){Ce(65476),Ce(418),_e(0);for(var ut=0;ut<16;ut++)_e(A[ut+1]);for(var Et=0;Et<=11;Et++)_e(C[Et]);_e(16);for(var At=0;At<16;At++)_e(V[At+1]);for(var Ft=0;Ft<=161;Ft++)_e(b[Ft]);_e(1);for(var It=0;It<16;It++)_e(S[It+1]);for(var Ct=0;Ct<=11;Ct++)_e(k[Ct]);_e(17);for(var Ht=0;Ht<16;Ht++)_e(ie[Ht+1]);for(var Rt=0;Rt<=161;Rt++)_e(ve[Rt])}(),Ce(65498),Ce(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var B=0,U=0,J=0;T=0,P=7,this.encode.displayName="_encode_";for(var ae,le,ue,xe,Be,We,Ze,at,ke,ne=E.data,ze=E.width,_t=E.height,$e=4*ze,rt=0;rt<_t;){for(ae=0;ae<$e;){for(Be=$e*rt+ae,Ze=-1,at=0,ke=0;ke<64;ke++)We=Be+(at=ke>>3)*$e+(Ze=4*(7&ke)),rt+at>=_t&&(We-=$e*(rt+1+at-_t)),ae+Ze>=$e&&(We-=ae+Ze-$e+4),le=ne[We++],ue=ne[We++],xe=ne[We++],L[ke]=(ce[le]+ce[ue+256>>0]+ce[xe+512>>0]>>16)-128,F[ke]=(ce[le+768>>0]+ce[ue+1024>>0]+ce[xe+1280>>0]>>16)-128,K[ke]=(ce[le+1280>>0]+ce[ue+1536>>0]+ce[xe+1792>>0]>>16)-128;B=Fe(L,u,B,e,n),U=Fe(F,l,U,t,i),J=Fe(K,l,J,t,i),ae+=32}rt+=8}if(P>=0){var ct=[];ct[1]=P+1,ct[0]=(1<<P+1)-1,Ne(ct)}return Ce(65497),new Uint8Array(_)},r=r||50,function(){for(var E=String.fromCharCode,D=0;D<256;D++)se[D]=E(D)}(),e=Te(A,C),t=Te(S,k),n=Te(V,b),i=Te(ie,ve),function(){for(var E=1,D=2,B=1;B<=15;B++){for(var U=E;U<D;U++)g[32767+U]=B,d[32767+U]=[],d[32767+U][1]=B,d[32767+U][0]=U;for(var J=-(D-1);J<=-E;J++)g[32767+J]=B,d[32767+J]=[],d[32767+J][1]=B,d[32767+J][0]=D-1+J;E<<=1,D<<=1}}(),function(){for(var E=0;E<256;E++)ce[E]=19595*E,ce[E+256>>0]=38470*E,ce[E+512>>0]=7471*E+32768,ce[E+768>>0]=-11059*E,ce[E+1024>>0]=-21709*E,ce[E+1280>>0]=32768*E+8421375,ce[E+1536>>0]=-27439*E,ce[E+1792>>0]=-5329*E}(),nt(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Ws(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Y5(r){function e(A){if(!A)throw Error("assert :P")}function t(A,C,V){for(var b=0;4>b;b++)if(A[C+b]!=V.charCodeAt(b))return!0;return!1}function n(A,C,V,b,S){for(var k=0;k<S;k++)A[C+k]=V[b+k]}function i(A,C,V,b){for(var S=0;S<b;S++)A[C+S]=V}function s(A){return new Int32Array(A)}function a(A,C){for(var V=[],b=0;b<A;b++)V.push(new C);return V}function o(A,C){var V=[];return function b(S,k,ie){for(var ve=ie[k],Te=0;Te<ve&&(S.push(ie.length>k+1?[]:new C),!(ie.length<k+1));Te++)b(S[Te],k+1,ie)}(V,0,A),V}var c=function(){var A=this;function C(h,m){for(var y=1<<m-1>>>0;h&y;)y>>>=1;return y?(h&y-1)+y:h}function V(h,m,y,I,M){e(!(I%y));do h[m+(I-=y)]=M;while(0<I)}function b(h,m,y,I,M){if(e(2328>=M),512>=M)var q=s(512);else if((q=s(M))==null)return 0;return function(W,H,G,Q,he,be){var Ae,me,qe=H,De=1<<G,fe=s(16),de=s(16);for(e(he!=0),e(Q!=null),e(W!=null),e(0<G),me=0;me<he;++me){if(15<Q[me])return 0;++fe[Q[me]]}if(fe[0]==he)return 0;for(de[1]=0,Ae=1;15>Ae;++Ae){if(fe[Ae]>1<<Ae)return 0;de[Ae+1]=de[Ae]+fe[Ae]}for(me=0;me<he;++me)Ae=Q[me],0<Q[me]&&(be[de[Ae]++]=me);if(de[15]==1)return(Q=new S).g=0,Q.value=be[0],V(W,qe,1,De,Q),De;var Ue,Ge=-1,je=De-1,yt=0,ht=1,kt=1,vt=1<<G;for(me=0,Ae=1,he=2;Ae<=G;++Ae,he<<=1){if(ht+=kt<<=1,0>(kt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae])(Q=new S).g=Ae,Q.value=be[me++],V(W,qe+yt,he,vt,Q),yt=C(yt,Ae)}for(Ae=G+1,he=2;15>=Ae;++Ae,he<<=1){if(ht+=kt<<=1,0>(kt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae]){if(Q=new S,(yt&je)!=Ge){for(qe+=vt,Ue=1<<(Ge=Ae)-G;15>Ge&&!(0>=(Ue-=fe[Ge]));)++Ge,Ue<<=1;De+=vt=1<<(Ue=Ge-G),W[H+(Ge=yt&je)].g=Ue+G,W[H+Ge].value=qe-H-Ge}Q.g=Ae-G,Q.value=be[me++],V(W,qe+(yt>>G),he,vt,Q),yt=C(yt,Ae)}}return ht!=2*de[15]-1?0:De}(h,m,y,I,M,q)}function S(){this.value=this.g=0}function k(){this.value=this.g=0}function ie(){this.G=a(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a($n,k)}function ve(h,m,y,I){e(h!=null),e(m!=null),e(2147483648>I),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=y,h.Jd=m,h.Yc=y+I,h.Zc=4<=I?y+I-4+1:y,ae(h)}function Te(h,m){for(var y=0;0<m--;)y|=ue(h,128)<<m;return y}function Ne(h,m){var y=Te(h,m);return le(h)?-y:y}function _e(h,m,y,I){var M,q=0;for(e(h!=null),e(m!=null),e(4294967288>I),h.Sb=I,h.Ra=0,h.u=0,h.h=0,4<I&&(I=4),M=0;M<I;++M)q+=m[y+M]<<8*M;h.Ra=q,h.bb=I,h.oa=m,h.pa=y}function Ce(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Zu-8>>>0,++h.bb,h.u-=8;B(h)&&(h.h=1,h.u=0)}function Fe(h,m){if(e(0<=m),!h.h&&m<=Qu){var y=D(h)&Ju[m];return h.u+=m,Ce(h),y}return h.h=1,h.u=0}function nt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(h){return h.Ra>>>(h.u&Zu-1)>>>0}function B(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Zu}function U(h,m){h.u=m,h.h=B(h)}function J(h){h.u>=Fh&&(e(h.u>=Fh),Ce(h))}function ae(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function le(h){return Te(h,1)}function ue(h,m){var y=h.Ca;0>h.b&&ae(h);var I=h.b,M=y*m>>>8,q=(h.I>>>I>M)+0;for(q?(y-=M,h.I-=M+1<<I>>>0):y=M+1,I=y,M=0;256<=I;)M+=8,I>>=8;return I=7^M+Mi[I],h.b-=I,h.Ca=(y<<I)-1,q}function xe(h,m,y){h[m+0]=y>>24&255,h[m+1]=y>>16&255,h[m+2]=y>>8&255,h[m+3]=y>>0&255}function Be(h,m){return h[m+0]<<0|h[m+1]<<8}function We(h,m){return Be(h,m)|h[m+2]<<16}function Ze(h,m){return Be(h,m)|Be(h,m+2)<<16}function at(h,m){var y=1<<m;return e(h!=null),e(0<m),h.X=s(y),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function ke(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),n(m.X,0,h.X,0,1<<m.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function ze(h,m,y,I){e(y!=null),e(I!=null);var M=y[0],q=I[0];return M==0&&(M=(h*q+m/2)/m),q==0&&(q=(m*M+h/2)/h),0>=M||0>=q?0:(y[0]=M,I[0]=q,1)}function _t(h,m){return h+(1<<m)-1>>>m}function $e(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function rt(h,m){A[m]=function(y,I,M,q,W,H,G){var Q;for(Q=0;Q<W;++Q){var he=A[h](H[G+Q-1],M,q+Q);H[G+Q]=$e(y[I+Q],he)}}}function ct(){this.ud=this.hd=this.jd=0}function ut(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function Et(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function At(h,m){return Et(h+(h-m+.5>>1))}function Ft(h,m,y){return Math.abs(m-y)-Math.abs(h-y)}function It(h,m,y,I,M,q,W){for(I=q[W-1],y=0;y<M;++y)q[W+y]=I=$e(h[m+y],I)}function Ct(h,m,y,I,M){var q;for(q=0;q<y;++q){var W=h[m+q],H=W>>8&255,G=16711935&(G=(G=16711935&W)+((H<<16)+H));I[M+q]=(4278255360&W)+G>>>0}}function Ht(h,m){m.jd=h>>0&255,m.hd=h>>8&255,m.ud=h>>16&255}function Rt(h,m,y,I,M,q){var W;for(W=0;W<I;++W){var H=m[y+W],G=H>>>8,Q=H,he=255&(he=(he=H>>>16)+((h.jd<<24>>24)*(G<<24>>24)>>>5));Q=255&(Q=(Q=Q+((h.hd<<24>>24)*(G<<24>>24)>>>5))+((h.ud<<24>>24)*(he<<24>>24)>>>5)),M[q+W]=(4278255360&H)+(he<<16)+Q}}function qt(h,m,y,I,M){A[m]=function(q,W,H,G,Q,he,be,Ae,me){for(G=be;G<Ae;++G)for(be=0;be<me;++be)Q[he++]=M(H[I(q[W++])])},A[h]=function(q,W,H,G,Q,he,be){var Ae=8>>q.b,me=q.Ea,qe=q.K[0],De=q.w;if(8>Ae)for(q=(1<<q.b)-1,De=(1<<Ae)-1;W<H;++W){var fe,de=0;for(fe=0;fe<me;++fe)fe&q||(de=I(G[Q++])),he[be++]=M(qe[de&De]),de>>=Ae}else A["VP8LMapColor"+y](G,Q,qe,De,he,be,W,H,me)}}function pt(h,m,y,I,M){for(y=m+y;m<y;){var q=h[m++];I[M++]=q>>16&255,I[M++]=q>>8&255,I[M++]=q>>0&255}}function Dr(h,m,y,I,M){for(y=m+y;m<y;){var q=h[m++];I[M++]=q>>16&255,I[M++]=q>>8&255,I[M++]=q>>0&255,I[M++]=q>>24&255}}function Gt(h,m,y,I,M){for(y=m+y;m<y;){var q=(W=h[m++])>>16&240|W>>12&15,W=W>>0&240|W>>28&15;I[M++]=q,I[M++]=W}}function qn(h,m,y,I,M){for(y=m+y;m<y;){var q=(W=h[m++])>>16&248|W>>13&7,W=W>>5&224|W>>3&31;I[M++]=q,I[M++]=W}}function tr(h,m,y,I,M){for(y=m+y;m<y;){var q=h[m++];I[M++]=q>>0&255,I[M++]=q>>8&255,I[M++]=q>>16&255}}function Tr(h,m,y,I,M,q){if(q==0)for(y=m+y;m<y;)xe(I,((q=h[m++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),M+=32;else n(I,M,h,m,y)}function Li(h,m){A[m][0]=A[h+"0"],A[m][1]=A[h+"1"],A[m][2]=A[h+"2"],A[m][3]=A[h+"3"],A[m][4]=A[h+"4"],A[m][5]=A[h+"5"],A[m][6]=A[h+"6"],A[m][7]=A[h+"7"],A[m][8]=A[h+"8"],A[m][9]=A[h+"9"],A[m][10]=A[h+"10"],A[m][11]=A[h+"11"],A[m][12]=A[h+"12"],A[m][13]=A[h+"13"],A[m][14]=A[h+"0"],A[m][15]=A[h+"0"]}function Kt(h){return h==Rg||h==kg||h==zd||h==Lg}function Qi(){this.eb=[],this.size=this.A=this.fb=0}function Er(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qi,this.f.kb=new Er,this.sd=null}function mi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function er(h,m){var y=h.T,I=m.ba.f.RGBA,M=I.eb,q=I.fb+h.ka*I.A,W=Ts[m.ba.S],H=h.y,G=h.O,Q=h.f,he=h.N,be=h.ea,Ae=h.W,me=m.cc,qe=m.dc,De=m.Mc,fe=m.Nc,de=h.ka,Ue=h.ka+h.T,Ge=h.U,je=Ge+1>>1;for(de==0?W(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,M,q,null,null,Ge):(W(m.ec,m.fc,H,G,me,qe,De,fe,Q,he,be,Ae,M,q-I.A,M,q,Ge),++y);de+2<Ue;de+=2)me=Q,qe=he,De=be,fe=Ae,he+=h.Rc,Ae+=h.Rc,q+=2*I.A,W(H,(G+=2*h.fa)-h.fa,H,G,me,qe,De,fe,Q,he,be,Ae,M,q-I.A,M,q,Ge);return G+=h.fa,h.j+Ue<h.o?(n(m.ec,m.fc,H,G,Ge),n(m.cc,m.dc,Q,he,je),n(m.Mc,m.Nc,be,Ae,je),y--):1&Ue||W(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,M,q+I.A,null,null,Ge),y}function Di(h,m,y){var I=h.F,M=[h.J];if(I!=null){var q=h.U,W=m.ba.S,H=W==Wd||W==zd;m=m.ba.f.RGBA;var G=[0],Q=h.ka;G[0]=h.T,h.Kb&&(Q==0?--G[0]:(--Q,M[0]-=h.width),h.j+h.ka+h.T==h.o&&(G[0]=h.o-h.j-Q));var he=m.eb;Q=m.fb+Q*m.A,h=kr(I,M[0],h.width,q,G,he,Q+(H?0:3),m.A),e(y==G),h&&Kt(W)&&ws(he,Q,H,q,G,m.A)}return 0}function Kr(h){var m=h.ma,y=m.ba.S,I=11>y,M=y==jd||y==qd||y==Wd||y==Cg||y==12||Kt(y);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Lh(m.Oa,h,M?11:12))return 0;if(M&&Kt(y)&&Ye(),h.da)alert("todo:use_scaling");else{if(I){if(m.Ib=Nt,h.Kb){if(y=h.U+1>>1,m.memory=s(h.U+2*y),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+y,m.Ib=er,Ye()}}else alert("todo:EmitYUV");M&&(m.Jb=Di,I&&ge())}if(I&&!m_){for(h=0;256>h;++h)x4[h]=89858*(h-128)+$d>>Hd,b4[h]=-22014*(h-128)+$d,E4[h]=-45773*(h-128),T4[h]=113618*(h-128)+$d>>Hd;for(h=qh;h<Og;++h)m=76283*(h-16)+$d>>Hd,A4[h-qh]=fr(m,255),I4[h-qh]=fr(m+8>>4,15);m_=1}return 1}function Rn(h){var m=h.ma,y=h.U,I=h.T;return e(!(1&h.ka)),0>=y||0>=I?0:(y=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,y),m.Dc+=y,1)}function vi(h){h.ma.memory=null}function wt(h,m,y,I){return Fe(h,8)!=47?0:(m[0]=Fe(h,14)+1,y[0]=Fe(h,14)+1,I[0]=Fe(h,1),Fe(h,3)!=0?0:!h.h)}function si(h,m){if(4>h)return h+1;var y=h-2>>1;return(2+(1&h)<<y)+Fe(m,y)+1}function mn(h,m){return 120<m?m-120:1<=(y=((y=o4[m-1])>>4)*h+(8-(15&y)))?y:1;var y}function Yr(h,m,y){var I=D(y),M=h[m+=255&I].g-8;return 0<M&&(U(y,y.u+8),I=D(y),m+=h[m].value,m+=I&(1<<M)-1),U(y,y.u+h[m].g),h[m].value}function Hr(h,m,y){return y.g+=h.g,y.value+=h.value<<m>>>0,e(8>=y.g),h.g}function Ur(h,m,y){var I=h.xc;return e((m=I==0?0:h.vc[h.md*(y>>I)+(m>>I)])<h.Wb),h.Ya[m]}function j(h,m,y,I){var M=h.ab,q=h.c*m,W=h.C;m=W+m;var H=y,G=I;for(I=h.Ta,y=h.Ua;0<M--;){var Q=h.gc[M],he=W,be=m,Ae=H,me=G,qe=(G=I,H=y,Q.Ea);switch(e(he<be),e(be<=Q.nc),Q.hc){case 2:Dd(Ae,me,(be-he)*qe,G,H);break;case 0:var De=he,fe=be,de=G,Ue=H,Ge=(vt=Q).Ea;De==0&&(Pg(Ae,me,null,null,1,de,Ue),It(Ae,me+1,0,0,Ge-1,de,Ue+1),me+=Ge,Ue+=Ge,++De);for(var je=1<<vt.b,yt=je-1,ht=_t(Ge,vt.b),kt=vt.K,vt=vt.w+(De>>vt.b)*ht;De<fe;){var ur=kt,pr=vt,sr=1;for(Oh(Ae,me,de,Ue-Ge,1,de,Ue);sr<Ge;){var Jt=(sr&~yt)+je;Jt>Ge&&(Jt=Ge),(0,Ro[ur[pr++]>>8&15])(Ae,me+ +sr,de,Ue+sr-Ge,Jt-sr,de,Ue+sr),sr=Jt}me+=Ge,Ue+=Ge,++De&yt||(vt+=ht)}be!=Q.nc&&n(G,H-qe,G,H+(be-he-1)*qe,qe);break;case 1:for(qe=Ae,fe=me,Ge=(Ae=Q.Ea)-(Ue=Ae&~(de=(me=1<<Q.b)-1)),De=_t(Ae,Q.b),je=Q.K,Q=Q.w+(he>>Q.b)*De;he<be;){for(yt=je,ht=Q,kt=new ct,vt=fe+Ue,ur=fe+Ae;fe<vt;)Ht(yt[ht++],kt),Mc(kt,qe,fe,me,G,H),fe+=me,H+=me;fe<ur&&(Ht(yt[ht++],kt),Mc(kt,qe,fe,Ge,G,H),fe+=Ge,H+=Ge),++he&de||(Q+=De)}break;case 3:if(Ae==G&&me==H&&0<Q.b){for(fe=G,Ae=qe=H+(be-he)*qe-(Ue=(be-he)*_t(Q.Ea,Q.b)),me=G,de=H,De=[],Ue=(Ge=Ue)-1;0<=Ue;--Ue)De[Ue]=me[de+Ue];for(Ue=Ge-1;0<=Ue;--Ue)fe[Ae+Ue]=De[Ue];vs(Q,he,be,G,qe,G,H)}else vs(Q,he,be,Ae,me,G,H)}H=I,G=y}G!=y&&n(I,y,H,G,q)}function ee(h,m){var y=h.V,I=h.Ba+h.c*h.C,M=m-h.C;if(e(m<=h.l.o),e(16>=M),0<M){var q=h.l,W=h.Ta,H=h.Ua,G=q.width;if(j(h,M,y,I),M=H=[H],e((y=h.C)<(I=m)),e(q.v<q.va),I>q.o&&(I=q.o),y<q.j){var Q=q.j-y;y=q.j,M[0]+=Q*G}if(y>=I?y=0:(M[0]+=4*q.v,q.ka=y-q.j,q.U=q.va-q.v,q.T=I-y,y=1),y){if(H=H[0],11>(y=h.ca).S){var he=y.f.RGBA,be=(I=y.S,M=q.U,q=q.T,Q=he.eb,he.A),Ae=q;for(he=he.fb+h.Ma*he.A;0<Ae--;){var me=W,qe=H,De=M,fe=Q,de=he;switch(I){case Ud:Bi(me,qe,De,fe,de);break;case jd:wi(me,qe,De,fe,de);break;case Rg:wi(me,qe,De,fe,de),ws(fe,de,0,De,1,0);break;case o_:Oa(me,qe,De,fe,de);break;case qd:Tr(me,qe,De,fe,de,1);break;case kg:Tr(me,qe,De,fe,de,1),ws(fe,de,0,De,1,0);break;case Wd:Tr(me,qe,De,fe,de,0);break;case zd:Tr(me,qe,De,fe,de,0),ws(fe,de,1,De,1,0);break;case Cg:ko(me,qe,De,fe,de);break;case Lg:ko(me,qe,De,fe,de),Rr(fe,de,De,1,0);break;case c_:Fa(me,qe,De,fe,de);break;default:e(0)}H+=G,he+=be}h.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=y.height)}}h.C=m,e(h.C<=h.i)}function Y(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var y=h.Ya[m].G,I=h.Ya[m].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function X(h,m,y,I,M,q){if(h.Z!=0){var W=h.qd,H=h.rd;for(e(Oo[h.Z]!=null);m<y;++m)Oo[h.Z](W,H,I,M,I,M,q),W=I,H=M,M+=q;h.qd=W,h.rd=H}}function Z(h,m){var y=h.l.ma,I=y.Z==0||y.Z==1?h.l.j:h.C;if(I=h.C<I?I:h.C,e(m<=h.l.o),m>I){var M=h.l.width,q=y.ca,W=y.tb+M*I,H=h.V,G=h.Ba+h.c*I,Q=h.gc;e(h.ab==1),e(Q[0].hc==3),Fd(Q[0],I,m,H,G,q,W),X(y,I,m,q,W,M)}h.C=h.Ma=m}function te(h,m,y,I,M,q,W){var H=h.$/I,G=h.$%I,Q=h.m,he=h.s,be=y+h.$,Ae=be;M=y+I*M;var me=y+I*q,qe=280+he.ua,De=h.Pb?H:16777216,fe=0<he.ua?he.Wa:null,de=he.wc,Ue=be<me?Ur(he,G,H):null;e(h.C<q),e(me<=M);var Ge=!1;e:for(;;){for(;Ge||be<me;){var je=0;if(H>=De){var yt=be-y;e((De=h).Pb),De.wd=De.m,De.xd=yt,0<De.s.ua&&ke(De.s.Wa,De.s.vb),De=H+u4}if(G&de||(Ue=Ur(he,G,H)),e(Ue!=null),Ue.Qb&&(m[be]=Ue.qb,Ge=!0),!Ge)if(J(Q),Ue.jc){je=Q,yt=m;var ht=be,kt=Ue.pd[D(je)&$n-1];e(Ue.jc),256>kt.g?(U(je,je.u+kt.g),yt[ht]=kt.value,je=0):(U(je,je.u+kt.g-256),e(256<=kt.value),je=kt.value),je==0&&(Ge=!0)}else je=Yr(Ue.G[0],Ue.H[0],Q);if(Q.h)break;if(Ge||256>je){if(!Ge)if(Ue.nd)m[be]=(Ue.qb|je<<8)>>>0;else{if(J(Q),Ge=Yr(Ue.G[1],Ue.H[1],Q),J(Q),yt=Yr(Ue.G[2],Ue.H[2],Q),ht=Yr(Ue.G[3],Ue.H[3],Q),Q.h)break;m[be]=(ht<<24|Ge<<16|je<<8|yt)>>>0}if(Ge=!1,++be,++G>=I&&(G=0,++H,W!=null&&H<=q&&!(H%16)&&W(h,H),fe!=null))for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else if(280>je){if(je=si(je-256,Q),yt=Yr(Ue.G[4],Ue.H[4],Q),J(Q),yt=mn(I,yt=si(yt,Q)),Q.h)break;if(be-y<yt||M-be<je)break e;for(ht=0;ht<je;++ht)m[be+ht]=m[be+ht-yt];for(be+=je,G+=je;G>=I;)G-=I,++H,W!=null&&H<=q&&!(H%16)&&W(h,H);if(e(be<=M),G&de&&(Ue=Ur(he,G,H)),fe!=null)for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else{if(!(je<qe))break e;for(Ge=je-280,e(fe!=null);Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je;je=be,e(!(Ge>>>(yt=fe).Xa)),m[je]=yt.X[Ge],Ge=!0}Ge||e(Q.h==B(Q))}if(h.Pb&&Q.h&&be<M)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&ke(h.s.vb,h.s.Wa);else{if(Q.h)break e;W!=null&&W(h,H>q?q:H),h.a=0,h.$=be-y}return 1}return h.a=3,0}function ye(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function Re(){var h=new Yu;return h==null?null:(h.a=0,h.xb=h_,Li("Predictor","VP8LPredictors"),Li("Predictor","VP8LPredictors_C"),Li("PredictorAdd","VP8LPredictorsAdd"),Li("PredictorAdd","VP8LPredictorsAdd_C"),Dd=Ct,Mc=Rt,Bi=pt,wi=Dr,ko=Gt,Fa=qn,Oa=tr,A.VP8LMapColor32b=el,A.VP8LMapColor8b=Od,h)}function we(h,m,y,I,M){var q=1,W=[h],H=[m],G=I.m,Q=I.s,he=null,be=0;e:for(;;){if(y)for(;q&&Fe(G,1);){var Ae=W,me=H,qe=I,De=1,fe=qe.m,de=qe.gc[qe.ab],Ue=Fe(fe,2);if(qe.Oc&1<<Ue)q=0;else{switch(qe.Oc|=1<<Ue,de.hc=Ue,de.Ea=Ae[0],de.nc=me[0],de.K=[null],++qe.ab,e(4>=qe.ab),Ue){case 0:case 1:de.b=Fe(fe,3)+2,De=we(_t(de.Ea,de.b),_t(de.nc,de.b),0,qe,de.K),de.K=de.K[0];break;case 3:var Ge,je=Fe(fe,8)+1,yt=16<je?0:4<je?1:2<je?2:3;if(Ae[0]=_t(de.Ea,yt),de.b=yt,Ge=De=we(je,1,0,qe,de.K)){var ht,kt=je,vt=de,ur=1<<(8>>vt.b),pr=s(ur);if(pr==null)Ge=0;else{var sr=vt.K[0],Jt=vt.w;for(pr[0]=vt.K[0][0],ht=1;ht<1*kt;++ht)pr[ht]=$e(sr[Jt+ht],pr[ht-1]);for(;ht<4*ur;++ht)pr[ht]=0;vt.K[0]=null,vt.K[0]=pr,Ge=1}}De=Ge;break;case 2:break;default:e(0)}q=De}}if(W=W[0],H=H[0],q&&Fe(G,1)&&!(q=1<=(be=Fe(G,4))&&11>=be)){I.a=3;break e}var Nr;if(Nr=q)t:{var Ar,Wt,vn,Vi=I,_n=W,Ui=H,gr=be,ss=y,as=Vi.m,kn=Vi.s,Gn=[null],Ti=1,Es=0,sa=c4[gr];r:for(;;){if(ss&&Fe(as,1)){var Ln=Fe(as,3)+2,Ua=_t(_n,Ln),qc=_t(Ui,Ln),sl=Ua*qc;if(!we(Ua,qc,0,Vi,Gn))break r;for(Gn=Gn[0],kn.xc=Ln,Ar=0;Ar<sl;++Ar){var Mo=Gn[Ar]>>8&65535;Gn[Ar]=Mo,Mo>=Ti&&(Ti=Mo+1)}}if(as.h)break r;for(Wt=0;5>Wt;++Wt){var Jr=u_[Wt];!Wt&&0<gr&&(Jr+=1<<gr),Es<Jr&&(Es=Jr)}var Mg=a(Ti*sa,S),y_=Ti,w_=a(y_,ie);if(w_==null)var Kd=null;else e(65536>=y_),Kd=w_;var Wh=s(Es);if(Kd==null||Wh==null||Mg==null){Vi.a=1;break r}var Yd=Mg;for(Ar=vn=0;Ar<Ti;++Ar){var Vs=Kd[Ar],al=Vs.G,ol=Vs.H,x_=0,Xd=1,T_=0;for(Wt=0;5>Wt;++Wt){Jr=u_[Wt],al[Wt]=Yd,ol[Wt]=vn,!Wt&&0<gr&&(Jr+=1<<gr);i:{var Jd,Bg=Jr,Qd=Vi,zh=Wh,N4=Yd,C4=vn,Vg=0,Bo=Qd.m,R4=Fe(Bo,1);if(i(zh,0,0,Bg),R4){var k4=Fe(Bo,1)+1,L4=Fe(Bo,1),E_=Fe(Bo,L4==0?1:8);zh[E_]=1,k4==2&&(zh[E_=Fe(Bo,8)]=1);var Zd=1}else{var b_=s(19),A_=Fe(Bo,4)+4;if(19<A_){Qd.a=3;var e0=0;break i}for(Jd=0;Jd<A_;++Jd)b_[a4[Jd]]=Fe(Bo,3);var Ug=void 0,Hh=void 0,I_=Qd,D4=b_,t0=Bg,S_=zh,jg=0,Vo=I_.m,P_=8,N_=a(128,S);n:for(;b(N_,0,7,D4,19);){if(Fe(Vo,1)){var F4=2+2*Fe(Vo,3);if((Ug=2+Fe(Vo,F4))>t0)break n}else Ug=t0;for(Hh=0;Hh<t0&&Ug--;){J(Vo);var C_=N_[0+(127&D(Vo))];U(Vo,Vo.u+C_.g);var cl=C_.value;if(16>cl)S_[Hh++]=cl,cl!=0&&(P_=cl);else{var O4=cl==16,R_=cl-16,M4=i4[R_],k_=Fe(Vo,n4[R_])+M4;if(Hh+k_>t0)break n;for(var B4=O4?P_:0;0<k_--;)S_[Hh++]=B4}}jg=1;break n}jg||(I_.a=3),Zd=jg}(Zd=Zd&&!Bo.h)&&(Vg=b(N4,C4,8,zh,Bg)),Zd&&Vg!=0?e0=Vg:(Qd.a=3,e0=0)}if(e0==0)break r;if(Xd&&s4[Wt]==1&&(Xd=Yd[vn].g==0),x_+=Yd[vn].g,vn+=e0,3>=Wt){var $h,qg=Wh[0];for($h=1;$h<Jr;++$h)Wh[$h]>qg&&(qg=Wh[$h]);T_+=qg}}if(Vs.nd=Xd,Vs.Qb=0,Xd&&(Vs.qb=(al[3][ol[3]+0].value<<24|al[1][ol[1]+0].value<<16|al[2][ol[2]+0].value)>>>0,x_==0&&256>al[0][ol[0]+0].value&&(Vs.Qb=1,Vs.qb+=al[0][ol[0]+0].value<<8)),Vs.jc=!Vs.Qb&&6>T_,Vs.jc){var r0,ja=Vs;for(r0=0;r0<$n;++r0){var Uo=r0,jo=ja.pd[Uo],n0=ja.G[0][ja.H[0]+Uo];256<=n0.value?(jo.g=n0.g+256,jo.value=n0.value):(jo.g=0,jo.value=0,Uo>>=Hr(n0,8,jo),Uo>>=Hr(ja.G[1][ja.H[1]+Uo],16,jo),Uo>>=Hr(ja.G[2][ja.H[2]+Uo],0,jo),Hr(ja.G[3][ja.H[3]+Uo],24,jo))}}}kn.vc=Gn,kn.Wb=Ti,kn.Ya=Kd,kn.yc=Mg,Nr=1;break t}Nr=0}if(!(q=Nr)){I.a=3;break e}if(0<be){if(Q.ua=1<<be,!at(Q.Wa,be)){I.a=1,q=0;break e}}else Q.ua=0;var Wg=I,L_=W,V4=H,zg=Wg.s,Hg=zg.xc;if(Wg.c=L_,Wg.i=V4,zg.md=_t(L_,Hg),zg.wc=Hg==0?-1:(1<<Hg)-1,y){I.xb=m4;break e}if((he=s(W*H))==null){I.a=1,q=0;break e}q=(q=te(I,he,0,W,H,H,null))&&!G.h;break e}return q?(M!=null?M[0]=he:(e(he==null),e(y)),I.$=0,y||ye(Q)):ye(Q),q}function Ee(h,m){var y=h.c*h.i,I=y+m+16*m;return e(h.c<=m),h.V=s(I),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+y+m,1)}function Pe(h,m){var y=h.C,I=m-y,M=h.V,q=h.Ba+h.c*y;for(e(m<=h.l.o);0<I;){var W=16<I?16:I,H=h.l.ma,G=h.l.width,Q=G*W,he=H.ca,be=H.tb+G*y,Ae=h.Ta,me=h.Ua;j(h,W,M,q),cn(Ae,me,he,be,Q),X(H,y,y+W,he,be,G),I-=W,M+=W*h.c,y+=W}e(y==m),h.C=h.Ma=m}function Ke(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function et(){this.Yb=function(){var h=[];return function m(y,I,M){for(var q=M[I],W=0;W<q&&(y.push(M.length>I+1?[]:0),!(M.length<I+1));W++)m(y[W],I+1,M)}(h,0,[3,11]),h}()}function lt(){this.jb=s(3),this.Wc=o([4,8],et),this.Xc=o([4,17],et)}function Lt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function rr(){this.ld=this.La=this.dd=this.tc=0}function nr(){this.Na=this.la=0}function br(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _i(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Cs(){this.uc=this.M=this.Nb=0,this.wa=Array(new rr),this.Y=0,this.ya=Array(new _i),this.aa=0,this.l=new es}function Zi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Fi(){this.cb=this.a=0,this.sc="",this.m=new nt,this.Od=new Ke,this.Kc=new it,this.ed=new Lt,this.Qa=new gt,this.Ic=this.$c=this.Aa=0,this.D=new Cs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,nt),this.ia=0,this.pb=a(4,br),this.Pa=new lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zi),this.Hd=0,this.rb=Array(new nr),this.sb=0,this.wa=Array(new rr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _i),this.L=this.aa=0,this.gd=o([4,2],rr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function es(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Wn(){var h=new Fi;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,jh||(jh=qu)),h}function Fr(h,m,y){return h.a==0&&(h.a=m,h.sc=y,h.cb=0),0}function Ac(h,m,y){return 3<=y&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function Ic(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Fr(h,2,"null VP8Io passed to VP8GetHeaders()");var y=m.data,I=m.w,M=m.ha;if(4>M)return Fr(h,7,"Truncated header.");var q=y[I+0]|y[I+1]<<8|y[I+2]<<16,W=h.Od;if(W.Rb=!(1&q),W.td=q>>1&7,W.yd=q>>4&1,W.ub=q>>5,3<W.td)return Fr(h,3,"Incorrect keyframe parameters.");if(!W.yd)return Fr(h,4,"Frame not displayable.");I+=3,M-=3;var H=h.Kc;if(W.Rb){if(7>M)return Fr(h,7,"cannot parse picture header");if(!Ac(y,I,M))return Fr(h,3,"Bad code word");H.c=16383&(y[I+4]<<8|y[I+3]),H.Td=y[I+4]>>6,H.i=16383&(y[I+6]<<8|y[I+5]),H.Ud=y[I+6]>>6,I+=7,M-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((q=h.Pa).jb,0,255,q.jb.length),e((q=h.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,i(q.Zb,0,0,q.Zb.length),i(q.Lb,0,0,q.Lb)}if(W.ub>M)return Fr(h,7,"bad partition length");ve(q=h.m,y,I,W.ub),I+=W.ub,M-=W.ub,W.Rb&&(H.Ld=le(q),H.Kd=le(q)),H=h.Qa;var G,Q=h.Pa;if(e(q!=null),e(H!=null),H.Cb=le(q),H.Cb){if(H.Bb=le(q),le(q)){for(H.Fb=le(q),G=0;4>G;++G)H.Zb[G]=le(q)?Ne(q,7):0;for(G=0;4>G;++G)H.Lb[G]=le(q)?Ne(q,6):0}if(H.Bb)for(G=0;3>G;++G)Q.jb[G]=le(q)?Te(q,8):255}else H.Bb=0;if(q.Ka)return Fr(h,3,"cannot parse segment header");if((H=h.ed).zd=le(q),H.Tb=Te(q,6),H.wb=Te(q,3),H.Pc=le(q),H.Pc&&le(q)){for(Q=0;4>Q;++Q)le(q)&&(H.vd[Q]=Ne(q,6));for(Q=0;4>Q;++Q)le(q)&&(H.od[Q]=Ne(q,6))}if(h.L=H.Tb==0?0:H.zd?1:2,q.Ka)return Fr(h,3,"cannot parse filter header");var he=M;if(M=G=I,I=G+he,H=he,h.Xb=(1<<Te(h.m,2))-1,he<3*(Q=h.Xb))y=7;else{for(G+=3*Q,H-=3*Q,he=0;he<Q;++he){var be=y[M+0]|y[M+1]<<8|y[M+2]<<16;be>H&&(be=H),ve(h.Jc[+he],y,G,be),G+=be,H-=be,M+=3}ve(h.Jc[+Q],y,G,H),y=G<I?0:5}if(y!=0)return Fr(h,y,"cannot parse partitions");for(y=Te(G=h.m,7),M=le(G)?Ne(G,4):0,I=le(G)?Ne(G,4):0,H=le(G)?Ne(G,4):0,Q=le(G)?Ne(G,4):0,G=le(G)?Ne(G,4):0,he=h.Qa,be=0;4>be;++be){if(he.Cb){var Ae=he.Zb[be];he.Fb||(Ae+=y)}else{if(0<be){h.pb[be]=h.pb[0];continue}Ae=y}var me=h.pb[be];me.Sc[0]=Dg[fr(Ae+M,127)],me.Sc[1]=Fg[fr(Ae+0,127)],me.Eb[0]=2*Dg[fr(Ae+I,127)],me.Eb[1]=101581*Fg[fr(Ae+H,127)]>>16,8>me.Eb[1]&&(me.Eb[1]=8),me.Qc[0]=Dg[fr(Ae+Q,117)],me.Qc[1]=Fg[fr(Ae+G,127)],me.lc=Ae+G}if(!W.Rb)return Fr(h,4,"Not a key frame.");for(le(q),W=h.Pa,y=0;4>y;++y){for(M=0;8>M;++M)for(I=0;3>I;++I)for(H=0;11>H;++H)Q=ue(q,p4[y][M][I][H])?Te(q,8):f4[y][M][I][H],W.Wc[y][M].Yb[I][H]=Q;for(M=0;17>M;++M)W.Xc[y][M]=W.Wc[y][g4[M]]}return h.kc=le(q),h.kc&&(h.Bd=Te(q,8)),h.cb=1}function qu(h,m,y,I,M,q,W){var H=m[M].Yb[y];for(y=0;16>M;++M){if(!ue(h,H[y+0]))return M;for(;!ue(h,H[y+1]);)if(H=m[++M].Yb[0],y=0,M==16)return 16;var G=m[M+1].Yb;if(ue(h,H[y+2])){var Q=h,he=0;if(ue(Q,(Ae=H)[(be=y)+3]))if(ue(Q,Ae[be+6])){for(H=0,be=2*(he=ue(Q,Ae[be+8]))+(Ae=ue(Q,Ae[be+9+he])),he=0,Ae=l4[be];Ae[H];++H)he+=he+ue(Q,Ae[H]);he+=3+(8<<be)}else ue(Q,Ae[be+7])?(he=7+2*ue(Q,165),he+=ue(Q,145)):he=5+ue(Q,159);else he=ue(Q,Ae[be+4])?3+ue(Q,Ae[be+5]):2;H=G[2]}else he=1,H=G[1];G=W+h4[M],0>(Q=h).b&&ae(Q);var be,Ae=Q.b,me=(be=Q.Ca>>1)-(Q.I>>Ae)>>31;--Q.b,Q.Ca+=me,Q.Ca|=1,Q.I-=(be+1&me)<<Ae,q[G]=((he^me)-me)*I[(0<M)+0]}return 16}function Sc(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Wu(h,m){if(h==null)return 0;if(m==null)return Fr(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!Ic(h,m))return 0;if(e(h.cb),m.ac==null||m.ac(m)){m.ob&&(h.L=0);var y=Gd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=m.v-y>>4,h.zb=m.j-y>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=m.o+15+y>>4,h.Hb=m.va+15+y>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var I=h.ed;for(y=0;4>y;++y){var M;if(h.Qa.Cb){var q=h.Qa.Lb[y];h.Qa.Fb||(q+=I.Tb)}else q=I.Tb;for(M=0;1>=M;++M){var W=h.gd[y][M],H=q;if(I.Pc&&(H+=I.vd[0],M&&(H+=I.od[0])),0<(H=0>H?0:63<H?63:H)){var G=H;0<I.wb&&(G=4<I.wb?G>>2:G>>1)>9-I.wb&&(G=9-I.wb),1>G&&(G=1),W.dd=G,W.tc=2*H+G,W.ld=40<=H?2:15<=H?1:0}else W.tc=0;W.La=M}}}y=0}else Fr(h,6,"Frame setup failed"),y=h.a;if(y=y==0){if(y){h.$c=0,0<h.Aa||(h.Ic=P4);e:{y=h.Ic,I=4*(G=h.za);var Q=32*G,he=G+1,be=0<h.L?G*(0<h.Aa?2:1):0,Ae=(h.Aa==2?2:1)*G;if((W=I+832+(M=3*(16*y+Gd[h.L])/2*Q)+(q=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=W)y=0;else{if(W>h.Vb){if(h.Vb=0,h.Ec=s(W),h.Fc=0,h.Ec==null){y=Fr(h,1,"no memory during frame initialization.");break e}h.Vb=W}W=h.Ec,H=h.Fc,h.Ac=W,h.Bc=H,H+=I,h.Gd=a(Q,Zi),h.Hd=0,h.rb=a(he+1,nr),h.sb=1,h.wa=be?a(be,rr):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=G),e(!0),h.oc=W,h.pc=H,H+=832,h.ya=a(Ae,_i),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=G),h.R=16*G,h.B=8*G,G=(Q=Gd[h.L])*h.R,Q=Q/2*h.B,h.sa=W,h.ta=H+G,h.qa=h.sa,h.ra=h.ta+16*y*h.R+Q,h.Ha=h.qa,h.Ia=h.ra+8*y*h.B+Q,h.$c=0,H+=M,h.mb=q?W:null,h.nb=q?H:null,e(H+q<=h.Fc+h.Vb),Sc(h),i(h.Ac,h.Bc,0,I),y=1}}if(y){if(m.ka=0,m.y=h.sa,m.O=h.ta,m.f=h.qa,m.N=h.ra,m.ea=h.Ha,m.Vd=h.Ia,m.fa=h.R,m.Rc=h.B,m.F=null,m.J=0,!Bd){for(y=-255;255>=y;++y)In[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Ba[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Uh[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)il[255+y]=0>y?0:255<y?255:y;Bd=1}tl=Ca,Ma=mo,Mh=Pc,xi=dr,_s=Na,on=Pa,rl=Eo,Md=Fs,Bh=Ao,Bc=Oc,Vc=bo,Lo=ka,Uc=Io,nl=ta,jc=Ra,Do=ns,Vh=An,ys=Ku,Bs[0]=ms,Bs[1]=Ch,Bs[2]=Zs,Bs[3]=kh,Bs[4]=$u,Bs[5]=yo,Bs[6]=ts,Bs[7]=Cc,Bs[8]=xo,Bs[9]=wo,Fo[0]=Qs,Fo[1]=Rh,Fo[2]=ks,Fo[3]=vo,Fo[4]=Or,Fo[5]=Hu,Fo[6]=Nc,Va[0]=Ds,Va[1]=zu,Va[2]=Gu,Va[3]=Ls,Va[4]=hr,Va[5]=Rc,Va[6]=kc,y=1}else y=0}y&&(y=function(me,qe){for(me.M=0;me.M<me.Va;++me.M){var De,fe=me.Jc[me.M&me.Xb],de=me.m,Ue=me;for(De=0;De<Ue.za;++De){var Ge=de,je=Ue,yt=je.Ac,ht=je.Bc+4*De,kt=je.zc,vt=je.ya[je.aa+De];if(je.Qa.Bb?vt.$b=ue(Ge,je.Pa.jb[0])?2+ue(Ge,je.Pa.jb[2]):ue(Ge,je.Pa.jb[1]):vt.$b=0,je.kc&&(vt.Ad=ue(Ge,je.Bd)),vt.Za=!ue(Ge,145)+0,vt.Za){var ur=vt.Ob,pr=0;for(je=0;4>je;++je){var sr,Jt=kt[0+je];for(sr=0;4>sr;++sr){Jt=d4[yt[ht+sr]][Jt];for(var Nr=l_[ue(Ge,Jt[0])];0<Nr;)Nr=l_[2*Nr+ue(Ge,Jt[Nr])];Jt=-Nr,yt[ht+sr]=Jt}n(ur,pr,yt,ht,4),pr+=4,kt[0+je]=Jt}}else Jt=ue(Ge,156)?ue(Ge,128)?1:3:ue(Ge,163)?2:0,vt.Ob[0]=Jt,i(yt,ht,Jt,4),i(kt,0,Jt,4);vt.Dd=ue(Ge,142)?ue(Ge,114)?ue(Ge,183)?1:3:2:0}if(Ue.m.Ka)return Fr(me,7,"Premature end-of-partition0 encountered.");for(;me.ja<me.za;++me.ja){if(Ue=fe,Ge=(de=me).rb[de.sb-1],yt=de.rb[de.sb+de.ja],De=de.ya[de.aa+de.ja],ht=de.kc?De.Ad:0)Ge.la=yt.la=0,De.Za||(Ge.Na=yt.Na=0),De.Hc=0,De.Gc=0,De.ia=0;else{var Ar,Wt;if(Ge=yt,yt=Ue,ht=de.Pa.Xc,kt=de.ya[de.aa+de.ja],vt=de.pb[kt.$b],je=kt.ad,ur=0,pr=de.rb[de.sb-1],Jt=sr=0,i(je,ur,0,384),kt.Za)var vn=0,Vi=ht[3];else{Nr=s(16);var _n=Ge.Na+pr.Na;if(_n=jh(yt,ht[1],_n,vt.Eb,0,Nr,0),Ge.Na=pr.Na=(0<_n)+0,1<_n)tl(Nr,0,je,ur);else{var Ui=Nr[0]+3>>3;for(Nr=0;256>Nr;Nr+=16)je[ur+Nr]=Ui}vn=1,Vi=ht[0]}var gr=15&Ge.la,ss=15&pr.la;for(Nr=0;4>Nr;++Nr){var as=1&ss;for(Ui=Wt=0;4>Ui;++Ui)gr=gr>>1|(as=(_n=jh(yt,Vi,_n=as+(1&gr),vt.Sc,vn,je,ur))>vn)<<7,Wt=Wt<<2|(3<_n?3:1<_n?2:je[ur+0]!=0),ur+=16;gr>>=4,ss=ss>>1|as<<7,sr=(sr<<8|Wt)>>>0}for(Vi=gr,vn=ss>>4,Ar=0;4>Ar;Ar+=2){for(Wt=0,gr=Ge.la>>4+Ar,ss=pr.la>>4+Ar,Nr=0;2>Nr;++Nr){for(as=1&ss,Ui=0;2>Ui;++Ui)_n=as+(1&gr),gr=gr>>1|(as=0<(_n=jh(yt,ht[2],_n,vt.Qc,0,je,ur)))<<3,Wt=Wt<<2|(3<_n?3:1<_n?2:je[ur+0]!=0),ur+=16;gr>>=2,ss=ss>>1|as<<5}Jt|=Wt<<4*Ar,Vi|=gr<<4<<Ar,vn|=(240&ss)<<Ar}Ge.la=Vi,pr.la=vn,kt.Hc=sr,kt.Gc=Jt,kt.ia=43690&Jt?0:vt.ia,ht=!(sr|Jt)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[De.$b][De.Za],de.wa[de.Y+de.ja].La|=!ht),Ue.Ka)return Fr(me,7,"Premature end-of-file encountered.")}if(Sc(me),de=qe,Ue=1,De=(fe=me).D,Ge=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(De.M=fe.M,De.uc=Ge,na(fe,De),Ue=1,De=(Wt=fe.D).Nb,Ge=(Jt=Gd[fe.L])*fe.R,yt=Jt/2*fe.B,Nr=16*De*fe.R,Ui=8*De*fe.B,ht=fe.sa,kt=fe.ta-Ge+Nr,vt=fe.qa,je=fe.ra-yt+Ui,ur=fe.Ha,pr=fe.Ia-yt+Ui,ss=(gr=Wt.M)==0,sr=gr>=fe.Va-1,fe.Aa==2&&na(fe,Wt),Wt.uc)for(as=(_n=fe).D.M,e(_n.D.uc),Wt=_n.yb;Wt<_n.Hb;++Wt){vn=Wt,Vi=as;var kn=(Gn=(Jr=_n).D).Nb;Ar=Jr.R;var Gn=Gn.wa[Gn.Y+vn],Ti=Jr.sa,Es=Jr.ta+16*kn*Ar+16*vn,sa=Gn.dd,Ln=Gn.tc;if(Ln!=0)if(e(3<=Ln),Jr.L==1)0<vn&&Do(Ti,Es,Ar,Ln+4),Gn.La&&ys(Ti,Es,Ar,Ln),0<Vi&&jc(Ti,Es,Ar,Ln+4),Gn.La&&Vh(Ti,Es,Ar,Ln);else{var Ua=Jr.B,qc=Jr.qa,sl=Jr.ra+8*kn*Ua+8*vn,Mo=Jr.Ha,Jr=Jr.Ia+8*kn*Ua+8*vn;kn=Gn.ld,0<vn&&(Md(Ti,Es,Ar,Ln+4,sa,kn),Bc(qc,sl,Mo,Jr,Ua,Ln+4,sa,kn)),Gn.La&&(Lo(Ti,Es,Ar,Ln,sa,kn),nl(qc,sl,Mo,Jr,Ua,Ln,sa,kn)),0<Vi&&(rl(Ti,Es,Ar,Ln+4,sa,kn),Bh(qc,sl,Mo,Jr,Ua,Ln+4,sa,kn)),Gn.La&&(Vc(Ti,Es,Ar,Ln,sa,kn),Uc(qc,sl,Mo,Jr,Ua,Ln,sa,kn))}}if(fe.ia&&alert("todo:DitherRow"),de.put!=null){if(Wt=16*gr,gr=16*(gr+1),ss?(de.y=fe.sa,de.O=fe.ta+Nr,de.f=fe.qa,de.N=fe.ra+Ui,de.ea=fe.Ha,de.W=fe.Ia+Ui):(Wt-=Jt,de.y=ht,de.O=kt,de.f=vt,de.N=je,de.ea=ur,de.W=pr),sr||(gr-=Jt),gr>de.o&&(gr=de.o),de.F=null,de.J=null,fe.Fa!=null&&0<fe.Fa.length&&Wt<gr&&(de.J=Co(fe,de,Wt,gr-Wt),de.F=fe.mb,de.F==null&&de.F.length==0)){Ue=Fr(fe,3,"Could not decode alpha data.");break e}Wt<de.j&&(Jt=de.j-Wt,Wt=de.j,e(!(1&Jt)),de.O+=fe.R*Jt,de.N+=fe.B*(Jt>>1),de.W+=fe.B*(Jt>>1),de.F!=null&&(de.J+=de.width*Jt)),Wt<gr&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=Wt-de.j,de.U=de.va-de.v,de.T=gr-Wt,Ue=de.put(de))}De+1!=fe.Ic||sr||(n(fe.sa,fe.ta-Ge,ht,kt+16*fe.R,Ge),n(fe.qa,fe.ra-yt,vt,je+8*fe.B,yt),n(fe.Ha,fe.Ia-yt,ur,pr+8*fe.B,yt))}if(!Ue)return Fr(me,6,"Output aborted.")}return 1}(h,m)),m.bc!=null&&m.bc(m),y&=1}return y?(h.cb=0,y):0}function Oi(h,m,y,I,M){M=h[m+y+32*I]+(M>>3),h[m+y+32*I]=-256&M?0>M?0:255:M}function go(h,m,y,I,M,q){Oi(h,m,0,y,I+M),Oi(h,m,1,y,I+q),Oi(h,m,2,y,I-q),Oi(h,m,3,y,I-M)}function Xr(h){return(20091*h>>16)+h}function yi(h,m,y,I){var M,q=0,W=s(16);for(M=0;4>M;++M){var H=h[m+0]+h[m+8],G=h[m+0]-h[m+8],Q=(35468*h[m+4]>>16)-Xr(h[m+12]),he=Xr(h[m+4])+(35468*h[m+12]>>16);W[q+0]=H+he,W[q+1]=G+Q,W[q+2]=G-Q,W[q+3]=H-he,q+=4,m++}for(M=q=0;4>M;++M)H=(h=W[q+0]+4)+W[q+8],G=h-W[q+8],Q=(35468*W[q+4]>>16)-Xr(W[q+12]),Oi(y,I,0,0,H+(he=Xr(W[q+4])+(35468*W[q+12]>>16))),Oi(y,I,1,0,G+Q),Oi(y,I,2,0,G-Q),Oi(y,I,3,0,H-he),q++,I+=32}function Pa(h,m,y,I){var M=h[m+0]+4,q=35468*h[m+4]>>16,W=Xr(h[m+4]),H=35468*h[m+1]>>16;go(y,I,0,M+W,h=Xr(h[m+1]),H),go(y,I,1,M+q,h,H),go(y,I,2,M-q,h,H),go(y,I,3,M-W,h,H)}function mo(h,m,y,I,M){yi(h,m,y,I),M&&yi(h,m+16,y,I+4)}function Pc(h,m,y,I){Ma(h,m+0,y,I,1),Ma(h,m+32,y,I+128,1)}function dr(h,m,y,I){var M;for(h=h[m+0]+4,M=0;4>M;++M)for(m=0;4>m;++m)Oi(y,I,m,M,h)}function Na(h,m,y,I){h[m+0]&&xi(h,m+0,y,I),h[m+16]&&xi(h,m+16,y,I+4),h[m+32]&&xi(h,m+32,y,I+128),h[m+48]&&xi(h,m+48,y,I+128+4)}function Ca(h,m,y,I){var M,q=s(16);for(M=0;4>M;++M){var W=h[m+0+M]+h[m+12+M],H=h[m+4+M]+h[m+8+M],G=h[m+4+M]-h[m+8+M],Q=h[m+0+M]-h[m+12+M];q[0+M]=W+H,q[8+M]=W-H,q[4+M]=Q+G,q[12+M]=Q-G}for(M=0;4>M;++M)W=(h=q[0+4*M]+3)+q[3+4*M],H=q[1+4*M]+q[2+4*M],G=q[1+4*M]-q[2+4*M],Q=h-q[3+4*M],y[I+0]=W+H>>3,y[I+16]=Q+G>>3,y[I+32]=W-H>>3,y[I+48]=Q-G>>3,I+=64}function Rs(h,m,y){var I,M=m-32,q=is,W=255-h[M-1];for(I=0;I<y;++I){var H,G=q,Q=W+h[m-1];for(H=0;H<y;++H)h[m+H]=G[Q+h[M+H]];m+=32}}function Ch(h,m){Rs(h,m,4)}function zu(h,m){Rs(h,m,8)}function Rh(h,m){Rs(h,m,16)}function ks(h,m){var y;for(y=0;16>y;++y)n(h,m+32*y,h,m-32,16)}function vo(h,m){var y;for(y=16;0<y;--y)i(h,m,h[m-1],16),m+=32}function _o(h,m,y){var I;for(I=0;16>I;++I)i(m,y+32*I,h,16)}function Qs(h,m){var y,I=16;for(y=0;16>y;++y)I+=h[m-1+32*y]+h[m+y-32];_o(I>>5,h,m)}function Or(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m-1+32*y];_o(I>>4,h,m)}function Hu(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m+y-32];_o(I>>4,h,m)}function Nc(h,m){_o(128,h,m)}function Mt(h,m,y){return h+2*m+y+2>>2}function Zs(h,m){var y,I=m-32;for(I=new Uint8Array([Mt(h[I-1],h[I+0],h[I+1]),Mt(h[I+0],h[I+1],h[I+2]),Mt(h[I+1],h[I+2],h[I+3]),Mt(h[I+2],h[I+3],h[I+4])]),y=0;4>y;++y)n(h,m+32*y,I,0,I.length)}function kh(h,m){var y=h[m-1],I=h[m-1+32],M=h[m-1+64],q=h[m-1+96];xe(h,m+0,16843009*Mt(h[m-1-32],y,I)),xe(h,m+32,16843009*Mt(y,I,M)),xe(h,m+64,16843009*Mt(I,M,q)),xe(h,m+96,16843009*Mt(M,q,q))}function ms(h,m){var y,I=4;for(y=0;4>y;++y)I+=h[m+y-32]+h[m-1+32*y];for(I>>=3,y=0;4>y;++y)i(h,m+32*y,I,4)}function $u(h,m){var y=h[m-1+0],I=h[m-1+32],M=h[m-1+64],q=h[m-1-32],W=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+96]=Mt(I,M,h[m-1+96]),h[m+1+96]=h[m+0+64]=Mt(y,I,M),h[m+2+96]=h[m+1+64]=h[m+0+32]=Mt(q,y,I),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Mt(W,q,y),h[m+3+64]=h[m+2+32]=h[m+1+0]=Mt(H,W,q),h[m+3+32]=h[m+2+0]=Mt(G,H,W),h[m+3+0]=Mt(Q,G,H)}function ts(h,m){var y=h[m+1-32],I=h[m+2-32],M=h[m+3-32],q=h[m+4-32],W=h[m+5-32],H=h[m+6-32],G=h[m+7-32];h[m+0+0]=Mt(h[m+0-32],y,I),h[m+1+0]=h[m+0+32]=Mt(y,I,M),h[m+2+0]=h[m+1+32]=h[m+0+64]=Mt(I,M,q),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Mt(M,q,W),h[m+3+32]=h[m+2+64]=h[m+1+96]=Mt(q,W,H),h[m+3+64]=h[m+2+96]=Mt(W,H,G),h[m+3+96]=Mt(H,G,G)}function yo(h,m){var y=h[m-1+0],I=h[m-1+32],M=h[m-1+64],q=h[m-1-32],W=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+0]=h[m+1+64]=q+W+1>>1,h[m+1+0]=h[m+2+64]=W+H+1>>1,h[m+2+0]=h[m+3+64]=H+G+1>>1,h[m+3+0]=G+Q+1>>1,h[m+0+96]=Mt(M,I,y),h[m+0+64]=Mt(I,y,q),h[m+0+32]=h[m+1+96]=Mt(y,q,W),h[m+1+32]=h[m+2+96]=Mt(q,W,H),h[m+2+32]=h[m+3+96]=Mt(W,H,G),h[m+3+32]=Mt(H,G,Q)}function Cc(h,m){var y=h[m+0-32],I=h[m+1-32],M=h[m+2-32],q=h[m+3-32],W=h[m+4-32],H=h[m+5-32],G=h[m+6-32],Q=h[m+7-32];h[m+0+0]=y+I+1>>1,h[m+1+0]=h[m+0+64]=I+M+1>>1,h[m+2+0]=h[m+1+64]=M+q+1>>1,h[m+3+0]=h[m+2+64]=q+W+1>>1,h[m+0+32]=Mt(y,I,M),h[m+1+32]=h[m+0+96]=Mt(I,M,q),h[m+2+32]=h[m+1+96]=Mt(M,q,W),h[m+3+32]=h[m+2+96]=Mt(q,W,H),h[m+3+64]=Mt(W,H,G),h[m+3+96]=Mt(H,G,Q)}function wo(h,m){var y=h[m-1+0],I=h[m-1+32],M=h[m-1+64],q=h[m-1+96];h[m+0+0]=y+I+1>>1,h[m+2+0]=h[m+0+32]=I+M+1>>1,h[m+2+32]=h[m+0+64]=M+q+1>>1,h[m+1+0]=Mt(y,I,M),h[m+3+0]=h[m+1+32]=Mt(I,M,q),h[m+3+32]=h[m+1+64]=Mt(M,q,q),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=q}function xo(h,m){var y=h[m-1+0],I=h[m-1+32],M=h[m-1+64],q=h[m-1+96],W=h[m-1-32],H=h[m+0-32],G=h[m+1-32],Q=h[m+2-32];h[m+0+0]=h[m+2+32]=y+W+1>>1,h[m+0+32]=h[m+2+64]=I+y+1>>1,h[m+0+64]=h[m+2+96]=M+I+1>>1,h[m+0+96]=q+M+1>>1,h[m+3+0]=Mt(H,G,Q),h[m+2+0]=Mt(W,H,G),h[m+1+0]=h[m+3+32]=Mt(y,W,H),h[m+1+32]=h[m+3+64]=Mt(I,y,W),h[m+1+64]=h[m+3+96]=Mt(M,I,y),h[m+1+96]=Mt(q,M,I)}function Gu(h,m){var y;for(y=0;8>y;++y)n(h,m+32*y,h,m-32,8)}function Ls(h,m){var y;for(y=0;8>y;++y)i(h,m,h[m-1],8),m+=32}function rs(h,m,y){var I;for(I=0;8>I;++I)i(m,y+32*I,h,8)}function Ds(h,m){var y,I=8;for(y=0;8>y;++y)I+=h[m+y-32]+h[m-1+32*y];rs(I>>4,h,m)}function Rc(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m+y-32];rs(I>>3,h,m)}function hr(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m-1+32*y];rs(I>>3,h,m)}function kc(h,m){rs(128,h,m)}function To(h,m,y){var I=h[m-y],M=h[m+0],q=3*(M-I)+Ng[1020+h[m-2*y]-h[m+y]],W=Vd[112+(q+4>>3)];h[m-y]=is[255+I+Vd[112+(q+3>>3)]],h[m+0]=is[255+M-W]}function Lc(h,m,y,I){var M=h[m+0],q=h[m+y];return xs[255+h[m-2*y]-h[m-y]]>I||xs[255+q-M]>I}function Dc(h,m,y,I){return 4*xs[255+h[m-y]-h[m+0]]+xs[255+h[m-2*y]-h[m+y]]<=I}function Fc(h,m,y,I,M){var q=h[m-3*y],W=h[m-2*y],H=h[m-y],G=h[m+0],Q=h[m+y],he=h[m+2*y],be=h[m+3*y];return 4*xs[255+H-G]+xs[255+W-Q]>I?0:xs[255+h[m-4*y]-q]<=M&&xs[255+q-W]<=M&&xs[255+W-H]<=M&&xs[255+be-he]<=M&&xs[255+he-Q]<=M&&xs[255+Q-G]<=M}function Ra(h,m,y,I){var M=2*I+1;for(I=0;16>I;++I)Dc(h,m+I,y,M)&&To(h,m+I,y)}function ns(h,m,y,I){var M=2*I+1;for(I=0;16>I;++I)Dc(h,m+I*y,1,M)&&To(h,m+I*y,1)}function An(h,m,y,I){var M;for(M=3;0<M;--M)Ra(h,m+=4*y,y,I)}function Ku(h,m,y,I){var M;for(M=3;0<M;--M)ns(h,m+=4,y,I)}function ea(h,m,y,I,M,q,W,H){for(q=2*q+1;0<M--;){if(Fc(h,m,y,q,W))if(Lc(h,m,y,H))To(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-2*he],Ae=G[Q-he],me=G[Q+0],qe=G[Q+he],De=G[Q+2*he],fe=27*(Ue=Ng[1020+3*(me-Ae)+Ng[1020+be-qe]])+63>>7,de=18*Ue+63>>7,Ue=9*Ue+63>>7;G[Q-3*he]=is[255+G[Q-3*he]+Ue],G[Q-2*he]=is[255+be+de],G[Q-he]=is[255+Ae+fe],G[Q+0]=is[255+me-fe],G[Q+he]=is[255+qe-de],G[Q+2*he]=is[255+De-Ue]}m+=I}}function zn(h,m,y,I,M,q,W,H){for(q=2*q+1;0<M--;){if(Fc(h,m,y,q,W))if(Lc(h,m,y,H))To(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-he],Ae=G[Q+0],me=G[Q+he],qe=Vd[112+((De=3*(Ae-be))+4>>3)],De=Vd[112+(De+3>>3)],fe=qe+1>>1;G[Q-2*he]=is[255+G[Q-2*he]+fe],G[Q-he]=is[255+be+De],G[Q+0]=is[255+Ae-qe],G[Q+he]=is[255+me-fe]}m+=I}}function Eo(h,m,y,I,M,q){ea(h,m,y,1,16,I,M,q)}function Fs(h,m,y,I,M,q){ea(h,m,1,y,16,I,M,q)}function bo(h,m,y,I,M,q){var W;for(W=3;0<W;--W)zn(h,m+=4*y,y,1,16,I,M,q)}function ka(h,m,y,I,M,q){var W;for(W=3;0<W;--W)zn(h,m+=4,1,y,16,I,M,q)}function Ao(h,m,y,I,M,q,W,H){ea(h,m,M,1,8,q,W,H),ea(y,I,M,1,8,q,W,H)}function Oc(h,m,y,I,M,q,W,H){ea(h,m,1,M,8,q,W,H),ea(y,I,1,M,8,q,W,H)}function Io(h,m,y,I,M,q,W,H){zn(h,m+4*M,M,1,8,q,W,H),zn(y,I+4*M,M,1,8,q,W,H)}function ta(h,m,y,I,M,q,W,H){zn(h,m+4,1,M,8,q,W,H),zn(y,I+4,1,M,8,q,W,H)}function La(){this.ba=new bn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function So(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Da(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Po(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ie,this.yc=new S}function Yu(){this.xb=this.a=0,this.l=new es,this.ca=new bn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Po,this.ab=0,this.gc=a(4,Da),this.Oc=0}function Os(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new es,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ra(h,m,y,I,M,q,W){for(h=h==null?0:h[m+0],m=0;m<W;++m)M[q+m]=h+y[I+m]&255,h=M[q+m]}function No(h,m,y,I,M,q,W){var H;if(h==null)ra(null,null,y,I,M,q,W);else for(H=0;H<W;++H)M[q+H]=h[m+H]+y[I+H]&255}function ai(h,m,y,I,M,q,W){if(h==null)ra(null,null,y,I,M,q,W);else{var H,G=h[m+0],Q=G,he=G;for(H=0;H<W;++H)Q=he+(G=h[m+H])-Q,he=y[I+H]+(-256&Q?0>Q?0:255:Q)&255,Q=G,M[q+H]=he}}function Co(h,m,y,I){var M=m.width,q=m.o;if(e(h!=null&&m!=null),0>y||0>=I||y+I>q)return null;if(!h.Cc){if(h.ga==null){var W;if(h.ga=new Os,(W=h.ga==null)||(W=m.width*m.o,e(h.Gb.length==0),h.Gb=s(W),h.Uc=0,h.Gb==null?W=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,W=1),W=!W),!W){W=h.ga;var H=h.Fa,G=h.P,Q=h.qc,he=h.mb,be=h.nb,Ae=G+1,me=Q-1,qe=W.l;if(e(H!=null&&he!=null&&m!=null),Oo[0]=null,Oo[1]=ra,Oo[2]=No,Oo[3]=ai,W.ca=he,W.tb=be,W.c=m.width,W.i=m.height,e(0<W.c&&0<W.i),1>=Q)m=0;else if(W.$a=H[G+0]>>0&3,W.Z=H[G+0]>>2&3,W.Lc=H[G+0]>>4&3,G=H[G+0]>>6&3,0>W.$a||1<W.$a||4<=W.Z||1<W.Lc||G)m=0;else if(qe.put=Rn,qe.ac=Kr,qe.bc=vi,qe.ma=W,qe.width=m.width,qe.height=m.height,qe.Da=m.Da,qe.v=m.v,qe.va=m.va,qe.j=m.j,qe.o=m.o,W.$a)e:{e(W.$a==1),m=Re();t:for(;;){if(m==null){m=0;break e}if(e(W!=null),W.mc=m,m.c=W.c,m.i=W.i,m.l=W.l,m.l.ma=W,m.l.width=W.c,m.l.height=W.i,m.a=0,_e(m.m,H,Ae,me),!we(W.c,W.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Y(m.s)?(W.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(W.ic=0,m=Ee(m,W.c)),!m))break t;m=1;break e}W.mc=null,m=0}else m=me>=W.c*W.i;W=!m}if(W)return null;h.ga.Lc!=1?h.Ga=0:I=q-y}e(h.ga!=null),e(y+I<=q);e:{if(m=(H=h.ga).c,q=H.l.o,H.$a==0){if(Ae=h.rc,me=h.Vc,qe=h.Fa,G=h.P+1+y*m,Q=h.mb,he=h.nb+y*m,e(G<=h.P+h.qc),H.Z!=0)for(e(Oo[H.Z]!=null),W=0;W<I;++W)Oo[H.Z](Ae,me,qe,G,Q,he,m),Ae=Q,me=he,he+=m,G+=m;else for(W=0;W<I;++W)n(Q,he,qe,G,m),Ae=Q,me=he,he+=m,G+=m;h.rc=Ae,h.Vc=me}else{if(e(H.mc!=null),m=y+I,e((W=H.mc)!=null),e(m<=W.i),W.C>=m)m=1;else if(H.ic||ge(),H.ic){H=W.V,Ae=W.Ba,me=W.c;var De=W.i,fe=(qe=1,G=W.$/me,Q=W.$%me,he=W.m,be=W.s,W.$),de=me*De,Ue=me*m,Ge=be.wc,je=fe<Ue?Ur(be,Q,G):null;e(fe<=de),e(m<=De),e(Y(be));t:for(;;){for(;!he.h&&fe<Ue;){if(Q&Ge||(je=Ur(be,Q,G)),e(je!=null),J(he),256>(De=Yr(je.G[0],je.H[0],he)))H[Ae+fe]=De,++fe,++Q>=me&&(Q=0,++G<=m&&!(G%16)&&Z(W,G));else{if(!(280>De)){qe=0;break t}De=si(De-256,he);var yt,ht=Yr(je.G[4],je.H[4],he);if(J(he),!(fe>=(ht=mn(me,ht=si(ht,he)))&&de-fe>=De)){qe=0;break t}for(yt=0;yt<De;++yt)H[Ae+fe+yt]=H[Ae+fe+yt-ht];for(fe+=De,Q+=De;Q>=me;)Q-=me,++G<=m&&!(G%16)&&Z(W,G);fe<Ue&&Q&Ge&&(je=Ur(be,Q,G))}e(he.h==B(he))}Z(W,G>m?m:G);break t}!qe||he.h&&fe<de?(qe=0,W.a=he.h?5:3):W.$=fe,m=qe}else m=te(W,W.V,W.Ba,W.c,W.i,m,Pe);if(!m){I=0;break e}}y+I>=q&&(h.Cc=1),I=1}if(!I)return null;if(h.Cc&&((I=h.ga)!=null&&(I.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+y*M}function v(h,m,y,I,M,q){for(;0<M--;){var W,H=h,G=m+(y?1:0),Q=h,he=m+(y?0:3);for(W=0;W<I;++W){var be=Q[he+4*W];be!=255&&(be*=32897,H[G+4*W+0]=H[G+4*W+0]*be>>23,H[G+4*W+1]=H[G+4*W+1]*be>>23,H[G+4*W+2]=H[G+4*W+2]*be>>23)}m+=q}}function O(h,m,y,I,M){for(;0<I--;){var q;for(q=0;q<y;++q){var W=h[m+2*q+0],H=15&(Q=h[m+2*q+1]),G=4369*H,Q=(240&Q|Q>>4)*G>>16;h[m+2*q+0]=(240&W|W>>4)*G>>16&240|(15&W|W<<4)*G>>16>>4&15,h[m+2*q+1]=240&Q|H}m+=M}}function re(h,m,y,I,M,q,W,H){var G,Q,he=255;for(Q=0;Q<M;++Q){for(G=0;G<I;++G){var be=h[m+G];q[W+4*G]=be,he&=be}m+=y,W+=H}return he!=255}function oe(h,m,y,I,M){var q;for(q=0;q<M;++q)y[I+q]=h[m+q]>>8}function ge(){ws=v,Rr=O,kr=re,cn=oe}function Oe(h,m,y){A[h]=function(I,M,q,W,H,G,Q,he,be,Ae,me,qe,De,fe,de,Ue,Ge){var je,yt=Ge-1>>1,ht=H[G+0]|Q[he+0]<<16,kt=be[Ae+0]|me[qe+0]<<16;e(I!=null);var vt=3*ht+kt+131074>>2;for(m(I[M+0],255&vt,vt>>16,De,fe),q!=null&&(vt=3*kt+ht+131074>>2,m(q[W+0],255&vt,vt>>16,de,Ue)),je=1;je<=yt;++je){var ur=H[G+je]|Q[he+je]<<16,pr=be[Ae+je]|me[qe+je]<<16,sr=ht+ur+kt+pr+524296,Jt=sr+2*(ur+kt)>>3;vt=Jt+ht>>1,ht=(sr=sr+2*(ht+pr)>>3)+ur>>1,m(I[M+2*je-1],255&vt,vt>>16,De,fe+(2*je-1)*y),m(I[M+2*je-0],255&ht,ht>>16,De,fe+(2*je-0)*y),q!=null&&(vt=sr+kt>>1,ht=Jt+pr>>1,m(q[W+2*je-1],255&vt,vt>>16,de,Ue+(2*je-1)*y),m(q[W+2*je+0],255&ht,ht>>16,de,Ue+(2*je+0)*y)),ht=ur,kt=pr}1&Ge||(vt=3*ht+kt+131074>>2,m(I[M+Ge-1],255&vt,vt>>16,De,fe+(Ge-1)*y),q!=null&&(vt=3*kt+ht+131074>>2,m(q[W+Ge-1],255&vt,vt>>16,de,Ue+(Ge-1)*y)))}}function Ye(){Ts[Ud]=v4,Ts[jd]=f_,Ts[o_]=_4,Ts[qd]=d_,Ts[Wd]=p_,Ts[Cg]=g_,Ts[c_]=y4,Ts[Rg]=f_,Ts[kg]=d_,Ts[zd]=p_,Ts[Lg]=g_}function dt(h){return h&-16384?0>h?0:255:h>>w4}function f(h,m){return dt((19077*h>>8)+(26149*m>>8)-14234)}function x(h,m,y){return dt((19077*h>>8)-(6419*m>>8)-(13320*y>>8)+8708)}function N(h,m){return dt((19077*h>>8)+(33050*m>>8)-17685)}function z(h,m,y,I,M){I[M+0]=f(h,y),I[M+1]=x(h,m,y),I[M+2]=N(h,m)}function pe(h,m,y,I,M){I[M+0]=N(h,m),I[M+1]=x(h,m,y),I[M+2]=f(h,y)}function Ie(h,m,y,I,M){var q=x(h,m,y);m=q<<3&224|N(h,m)>>3,I[M+0]=248&f(h,y)|q>>5,I[M+1]=m}function Qe(h,m,y,I,M){var q=240&N(h,m)|15;I[M+0]=240&f(h,y)|x(h,m,y)>>4,I[M+1]=q}function Bt(h,m,y,I,M){I[M+0]=255,z(h,m,y,I,M+1)}function Xt(h,m,y,I,M){pe(h,m,y,I,M),I[M+3]=255}function Vt(h,m,y,I,M){z(h,m,y,I,M),I[M+3]=255}function fr(h,m){return 0>h?0:h>m?m:h}function Pr(h,m,y){A[h]=function(I,M,q,W,H,G,Q,he,be){for(var Ae=he+(-2&be)*y;he!=Ae;)m(I[M+0],q[W+0],H[G+0],Q,he),m(I[M+1],q[W+0],H[G+0],Q,he+y),M+=2,++W,++G,he+=2*y;1&be&&m(I[M+0],q[W+0],H[G+0],Q,he)}}function Ms(h,m,y){return y==0?h==0?m==0?6:5:m==0?4:0:y}function Hn(h,m,y,I,M){switch(h>>>30){case 3:Ma(m,y,I,M,0);break;case 2:on(m,y,I,M);break;case 1:xi(m,y,I,M)}}function na(h,m){var y,I,M=m.M,q=m.Nb,W=h.oc,H=h.pc+40,G=h.oc,Q=h.pc+584,he=h.oc,be=h.pc+600;for(y=0;16>y;++y)W[H+32*y-1]=129;for(y=0;8>y;++y)G[Q+32*y-1]=129,he[be+32*y-1]=129;for(0<M?W[H-1-32]=G[Q-1-32]=he[be-1-32]=129:(i(W,H-32-1,127,21),i(G,Q-32-1,127,9),i(he,be-32-1,127,9)),I=0;I<h.za;++I){var Ae=m.ya[m.aa+I];if(0<I){for(y=-1;16>y;++y)n(W,H+32*y-4,W,H+32*y+12,4);for(y=-1;8>y;++y)n(G,Q+32*y-4,G,Q+32*y+4,4),n(he,be+32*y-4,he,be+32*y+4,4)}var me=h.Gd,qe=h.Hd+I,De=Ae.ad,fe=Ae.Hc;if(0<M&&(n(W,H-32,me[qe].y,0,16),n(G,Q-32,me[qe].f,0,8),n(he,be-32,me[qe].ea,0,8)),Ae.Za){var de=W,Ue=H-32+16;for(0<M&&(I>=h.za-1?i(de,Ue,me[qe].y[15],4):n(de,Ue,me[qe+1].y,0,4)),y=0;4>y;y++)de[Ue+128+y]=de[Ue+256+y]=de[Ue+384+y]=de[Ue+0+y];for(y=0;16>y;++y,fe<<=2)de=W,Ue=H+v_[y],Bs[Ae.Ob[y]](de,Ue),Hn(fe,De,16*+y,de,Ue)}else if(de=Ms(I,M,Ae.Ob[0]),Fo[de](W,H),fe!=0)for(y=0;16>y;++y,fe<<=2)Hn(fe,De,16*+y,W,H+v_[y]);for(y=Ae.Gc,de=Ms(I,M,Ae.Dd),Va[de](G,Q),Va[de](he,be),fe=De,de=G,Ue=Q,255&(Ae=y>>0)&&(170&Ae?Mh(fe,256,de,Ue):_s(fe,256,de,Ue)),Ae=he,fe=be,255&(y>>=8)&&(170&y?Mh(De,320,Ae,fe):_s(De,320,Ae,fe)),M<h.Ub-1&&(n(me[qe].y,0,W,H+480,16),n(me[qe].f,0,G,Q+224,8),n(me[qe].ea,0,he,be+224,8)),y=8*q*h.B,me=h.sa,qe=h.ta+16*I+16*q*h.R,De=h.qa,Ae=h.ra+8*I+y,fe=h.Ha,de=h.Ia+8*I+y,y=0;16>y;++y)n(me,qe+y*h.R,W,H+32*y,16);for(y=0;8>y;++y)n(De,Ae+y*h.B,G,Q+32*y,8),n(fe,de+y*h.B,he,be+32*y,8)}}function ia(h,m,y,I,M,q,W,H,G){var Q=[0],he=[0],be=0,Ae=G!=null?G.kd:0,me=G??new So;if(h==null||12>y)return 7;me.data=h,me.w=m,me.ha=y,m=[m],y=[y],me.gb=[me.gb];e:{var qe=m,De=y,fe=me.gb;if(e(h!=null),e(De!=null),e(fe!=null),fe[0]=0,12<=De[0]&&!t(h,qe[0],"RIFF")){if(t(h,qe[0]+8,"WEBP")){fe=3;break e}var de=Ze(h,qe[0]+4);if(12>de||4294967286<de){fe=3;break e}if(Ae&&de>De[0]-8){fe=7;break e}fe[0]=de,qe[0]+=12,De[0]-=12}fe=0}if(fe!=0)return fe;for(de=0<me.gb[0],y=y[0];;){e:{var Ue=h;De=m,fe=y;var Ge=Q,je=he,yt=qe=[0];if((vt=be=[be])[0]=0,8>fe[0])fe=7;else{if(!t(Ue,De[0],"VP8X")){if(Ze(Ue,De[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var ht=Ze(Ue,De[0]+8),kt=1+We(Ue,De[0]+12);if(2147483648<=kt*(Ue=1+We(Ue,De[0]+15))){fe=3;break e}yt!=null&&(yt[0]=ht),Ge!=null&&(Ge[0]=kt),je!=null&&(je[0]=Ue),De[0]+=18,fe[0]-=18,vt[0]=1}fe=0}}if(be=be[0],qe=qe[0],fe!=0)return fe;if(De=!!(2&qe),!de&&be)return 3;if(q!=null&&(q[0]=!!(16&qe)),W!=null&&(W[0]=De),H!=null&&(H[0]=0),W=Q[0],qe=he[0],be&&De&&G==null){fe=0;break}if(4>y){fe=7;break}if(de&&be||!de&&!be&&!t(h,m[0],"ALPH")){y=[y],me.na=[me.na],me.P=[me.P],me.Sa=[me.Sa];e:{ht=h,fe=m,de=y;var vt=me.gb;Ge=me.na,je=me.P,yt=me.Sa,kt=22,e(ht!=null),e(de!=null),Ue=fe[0];var ur=de[0];for(e(Ge!=null),e(yt!=null),Ge[0]=null,je[0]=null,yt[0]=0;;){if(fe[0]=Ue,de[0]=ur,8>ur){fe=7;break e}var pr=Ze(ht,Ue+4);if(4294967286<pr){fe=3;break e}var sr=8+pr+1&-2;if(kt+=sr,0<vt&&kt>vt){fe=3;break e}if(!t(ht,Ue,"VP8 ")||!t(ht,Ue,"VP8L")){fe=0;break e}if(ur[0]<sr){fe=7;break e}t(ht,Ue,"ALPH")||(Ge[0]=ht,je[0]=Ue+8,yt[0]=pr),Ue+=sr,ur-=sr}}if(y=y[0],me.na=me.na[0],me.P=me.P[0],me.Sa=me.Sa[0],fe!=0)break}y=[y],me.Ja=[me.Ja],me.xa=[me.xa];e:if(vt=h,fe=m,de=y,Ge=me.gb[0],je=me.Ja,yt=me.xa,ht=fe[0],Ue=!t(vt,ht,"VP8 "),kt=!t(vt,ht,"VP8L"),e(vt!=null),e(de!=null),e(je!=null),e(yt!=null),8>de[0])fe=7;else{if(Ue||kt){if(vt=Ze(vt,ht+4),12<=Ge&&vt>Ge-12){fe=3;break e}if(Ae&&vt>de[0]-8){fe=7;break e}je[0]=vt,fe[0]+=8,de[0]-=8,yt[0]=kt}else yt[0]=5<=de[0]&&vt[ht+0]==47&&!(vt[ht+4]>>5),je[0]=de[0];fe=0}if(y=y[0],me.Ja=me.Ja[0],me.xa=me.xa[0],m=m[0],fe!=0)break;if(4294967286<me.Ja)return 3;if(H==null||De||(H[0]=me.xa?2:1),W=[W],qe=[qe],me.xa){if(5>y){fe=7;break}H=W,Ae=qe,De=q,h==null||5>y?h=0:5<=y&&h[m+0]==47&&!(h[m+4]>>5)?(de=[0],vt=[0],Ge=[0],_e(je=new E,h,m,y),wt(je,de,vt,Ge)?(H!=null&&(H[0]=de[0]),Ae!=null&&(Ae[0]=vt[0]),De!=null&&(De[0]=Ge[0]),h=1):h=0):h=0}else{if(10>y){fe=7;break}H=qe,h==null||10>y||!Ac(h,m+3,y-3)?h=0:(Ae=h[m+0]|h[m+1]<<8|h[m+2]<<16,De=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&Ae||3<(Ae>>1&7)||!(Ae>>4&1)||Ae>>5>=me.Ja||!De||!h?h=0:(W&&(W[0]=De),H&&(H[0]=h),h=1))}if(!h||(W=W[0],qe=qe[0],be&&(Q[0]!=W||he[0]!=qe)))return 3;G!=null&&(G[0]=me,G.offset=m-G.w,e(4294967286>m-G.w),e(G.offset==G.ha-y));break}return fe==0||fe==7&&be&&G==null?(q!=null&&(q[0]|=me.na!=null&&0<me.na.length),I!=null&&(I[0]=W),M!=null&&(M[0]=qe),0):fe}function Lh(h,m,y){var I=m.width,M=m.height,q=0,W=0,H=I,G=M;if(m.Da=h!=null&&0<h.Da,m.Da&&(H=h.cd,G=h.bd,q=h.v,W=h.j,11>y||(q&=-2,W&=-2),0>q||0>W||0>=H||0>=G||q+H>I||W+G>M))return 0;if(m.v=q,m.j=W,m.va=q+H,m.o=W+G,m.U=H,m.T=G,m.da=h!=null&&0<h.da,m.da){if(!ze(H,G,y=[h.ib],q=[h.hb]))return 0;m.ib=y[0],m.hb=q[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*I/4&&m.hb<3*M/4,m.Kb=0),1}function Dh(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function Xu(h,m,y,I){if(I==null||0>=h||0>=m)return 2;if(y!=null){if(y.Da){var M=y.cd,q=y.bd,W=-2&y.v,H=-2&y.j;if(0>W||0>H||0>=M||0>=q||W+M>h||H+q>m)return 2;h=M,m=q}if(y.da){if(!ze(h,m,M=[y.ib],q=[y.hb]))return 2;h=M[0],m=q[0]}}I.width=h,I.height=m;e:{var G=I.width,Q=I.height;if(h=I.S,0>=G||0>=Q||!(h>=Ud&&13>h))h=2;else{if(0>=I.Rd&&I.sd==null){W=q=M=m=0;var he=(H=G*__[h])*Q;if(11>h||(q=(Q+1)/2*(m=(G+1)/2),h==12&&(W=(M=G)*Q)),(Q=s(he+2*q+W))==null){h=1;break e}I.sd=Q,11>h?((G=I.f.RGBA).eb=Q,G.fb=0,G.A=H,G.size=he):((G=I.f.kb).y=Q,G.O=0,G.fa=H,G.Fd=he,G.f=Q,G.N=0+he,G.Ab=m,G.Cd=q,G.ea=Q,G.W=0+he+q,G.Db=m,G.Ed=q,h==12&&(G.F=Q,G.J=0+he+2*q),G.Tc=W,G.lb=M)}if(m=1,M=I.S,q=I.width,W=I.height,M>=Ud&&13>M)if(11>M)h=I.f.RGBA,m&=(H=Math.abs(h.A))*(W-1)+q<=h.size,m&=H>=q*__[M],m&=h.eb!=null;else{h=I.f.kb,H=(q+1)/2,he=(W+1)/2,G=Math.abs(h.fa),Q=Math.abs(h.Ab);var be=Math.abs(h.Db),Ae=Math.abs(h.lb),me=Ae*(W-1)+q;m&=G*(W-1)+q<=h.Fd,m&=Q*(he-1)+H<=h.Cd,m=(m&=be*(he-1)+H<=h.Ed)&G>=q&Q>=H&be>=H,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,M==12&&(m&=Ae>=q,m&=me<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||y!=null&&y.fd&&(h=Dh(I)),h}var $n=64,Ju=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Qu=24,Zu=32,Fh=8,Mi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(h){return h},A.Predictor2=function(h,m,y){return m[y+0]},A.Predictor3=function(h,m,y){return m[y+1]},A.Predictor4=function(h,m,y){return m[y-1]},A.Predictor5=function(h,m,y){return ut(ut(h,m[y+1]),m[y+0])},A.Predictor6=function(h,m,y){return ut(h,m[y-1])},A.Predictor7=function(h,m,y){return ut(h,m[y+0])},A.Predictor8=function(h,m,y){return ut(m[y-1],m[y+0])},A.Predictor9=function(h,m,y){return ut(m[y+0],m[y+1])},A.Predictor10=function(h,m,y){return ut(ut(h,m[y-1]),ut(m[y+0],m[y+1]))},A.Predictor11=function(h,m,y){var I=m[y+0];return 0>=Ft(I>>24&255,h>>24&255,(m=m[y-1])>>24&255)+Ft(I>>16&255,h>>16&255,m>>16&255)+Ft(I>>8&255,h>>8&255,m>>8&255)+Ft(255&I,255&h,255&m)?I:h},A.Predictor12=function(h,m,y){var I=m[y+0];return(Et((h>>24&255)+(I>>24&255)-((m=m[y-1])>>24&255))<<24|Et((h>>16&255)+(I>>16&255)-(m>>16&255))<<16|Et((h>>8&255)+(I>>8&255)-(m>>8&255))<<8|Et((255&h)+(255&I)-(255&m)))>>>0},A.Predictor13=function(h,m,y){var I=m[y-1];return(At((h=ut(h,m[y+0]))>>24&255,I>>24&255)<<24|At(h>>16&255,I>>16&255)<<16|At(h>>8&255,I>>8&255)<<8|At(h>>0&255,I>>0&255))>>>0};var Pg=A.PredictorAdd0;A.PredictorAdd1=It,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var Oh=A.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Dd,vs=A.ColorIndexInverseTransform,el=A.MapARGB,Fd=A.VP8LColorIndexInverseTransformAlpha,Od=A.MapAlpha,Ro=A.VP8LPredictorsAdd=[];Ro.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Mc,Bi,wi,ko,Fa,Oa,tl,Ma,on,Mh,xi,_s,rl,Md,Bh,Bc,Vc,Lo,Uc,nl,jc,Do,Vh,ys,ws,Rr,kr,cn,In=s(511),Ba=s(2041),Uh=s(225),il=s(767),Bd=0,Ng=Ba,Vd=Uh,is=il,xs=In,Ud=0,jd=1,o_=2,qd=3,Wd=4,Cg=5,c_=6,Rg=7,kg=8,zd=9,Lg=10,n4=[2,3,7],i4=[3,3,11],u_=[280,256,256,256,40],s4=[0,1,1,1,0],a4=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],o4=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],c4=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],u4=8,Dg=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Fg=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],jh=null,l4=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],h4=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],l_=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],f4=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],d4=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],p4=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],g4=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Fo=[],Bs=[],Va=[],m4=1,h_=2,Oo=[],Ts=[];Oe("UpsampleRgbLinePair",z,3),Oe("UpsampleBgrLinePair",pe,3),Oe("UpsampleRgbaLinePair",Vt,4),Oe("UpsampleBgraLinePair",Xt,4),Oe("UpsampleArgbLinePair",Bt,4),Oe("UpsampleRgba4444LinePair",Qe,2),Oe("UpsampleRgb565LinePair",Ie,2);var v4=A.UpsampleRgbLinePair,_4=A.UpsampleBgrLinePair,f_=A.UpsampleRgbaLinePair,d_=A.UpsampleBgraLinePair,p_=A.UpsampleArgbLinePair,g_=A.UpsampleRgba4444LinePair,y4=A.UpsampleRgb565LinePair,Hd=16,$d=1<<Hd-1,qh=-227,Og=482,w4=6,m_=0,x4=s(256),T4=s(256),E4=s(256),b4=s(256),A4=s(Og-qh),I4=s(Og-qh);Pr("YuvToRgbRow",z,3),Pr("YuvToBgrRow",pe,3),Pr("YuvToRgbaRow",Vt,4),Pr("YuvToBgraRow",Xt,4),Pr("YuvToArgbRow",Bt,4),Pr("YuvToRgba4444Row",Qe,2),Pr("YuvToRgb565Row",Ie,2);var v_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gd=[0,2,8],S4=[8,7,6,4,4,2,2,2,1,1,1,1],P4=1;this.WebPDecodeRGBA=function(h,m,y,I,M){var q=jd,W=new La,H=new bn;W.ba=H,H.S=q,H.width=[H.width],H.height=[H.height];var G=H.width,Q=H.height,he=new mi;if(he==null||h==null)var be=2;else e(he!=null),be=ia(h,m,y,he.width,he.height,he.Pd,he.Qd,he.format,null);if(be!=0?G=0:(G!=null&&(G[0]=he.width[0]),Q!=null&&(Q[0]=he.height[0]),G=1),G){H.width=H.width[0],H.height=H.height[0],I!=null&&(I[0]=H.width),M!=null&&(M[0]=H.height);e:{if(I=new es,(M=new So).data=h,M.w=m,M.ha=y,M.kd=1,m=[0],e(M!=null),((h=ia(M.data,M.w,M.ha,null,null,null,m,null,M))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(W!=null),I.data=M.data,I.w=M.w+M.offset,I.ha=M.ha-M.offset,I.put=Rn,I.ac=Kr,I.bc=vi,I.ma=W,M.xa){if((h=Re())==null){W=1;break e}if(function(Ae,me){var qe=[0],De=[0],fe=[0];t:for(;;){if(Ae==null)return 0;if(me==null)return Ae.a=2,0;if(Ae.l=me,Ae.a=0,_e(Ae.m,me.data,me.w,me.ha),!wt(Ae.m,qe,De,fe)){Ae.a=3;break t}if(Ae.xb=h_,me.width=qe[0],me.height=De[0],!we(qe[0],De[0],1,Ae,null))break t;return 1}return e(Ae.a!=0),0}(h,I)){if(I=(m=Xu(I.width,I.height,W.Oa,W.ba))==0){t:{I=h;r:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((y=I.l)!=null),e((M=y.ma)!=null),I.xb!=0){if(I.ca=M.ba,I.tb=M.tb,e(I.ca!=null),!Lh(M.Oa,y,qd)){I.a=2;break r}if(!Ee(I,y.width)||y.da)break r;if((y.da||Kt(I.ca.S))&&ge(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&ge()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!at(I.s.vb,I.s.Wa.Xa)){I.a=1;break r}I.xb=0}if(!te(I,I.V,I.Ba,I.c,I.i,y.o,ee))break r;M.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(m=h.a)}else m=h.a}else{if((h=new Wn)==null){W=1;break e}if(h.Fa=M.na,h.P=M.P,h.qc=M.Sa,Ic(h,I)){if((m=Xu(I.width,I.height,W.Oa,W.ba))==0){if(h.Aa=0,y=W.Oa,e((M=h)!=null),y!=null){if(0<(G=0>(G=y.Md)?0:100<G?255:255*G/100)){for(Q=he=0;4>Q;++Q)12>(be=M.pb[Q]).lc&&(be.ia=G*S4[0>be.lc?0:be.lc]>>3),he|=be.ia;he&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=y.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}Wu(h,I)||(m=h.a)}}else m=h.a}m==0&&W.Oa!=null&&W.Oa.fd&&(m=Dh(W.ba))}W=m}q=W!=0?null:11>q?H.f.RGBA.eb:H.f.kb.y}else q=null;return q};var __=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,C){for(var V="",b=0;b<4;b++)V+=String.fromCharCode(A[C++]);return V}function l(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16)>>>0}function d(A,C){return(A[C+0]<<0|A[C+1]<<8|A[C+2]<<16|A[C+3]<<24)>>>0}new c;var g=[0],p=[0],w=[],_=new c,T=r,P=function(A,C){var V={},b=0,S=!1,k=0,ie=0;if(V.frames=[],!function(D,B,U,J){for(var ae=0;ae<J;ae++)if(D[B+ae]!=U.charCodeAt(ae))return!0;return!1}(A,C,"RIFF",4)){var ve,Te;for(d(A,C+=4),C+=8;C<A.length;){var Ne=u(A,C),_e=d(A,C+=4);C+=4;var Ce=_e+(1&_e);switch(Ne){case"VP8 ":case"VP8L":V.frames[b]===void 0&&(V.frames[b]={}),(E=V.frames[b]).src_off=S?ie:C-8,E.src_size=k+_e+8,b++,S&&(S=!1,k=0,ie=0);break;case"VP8X":(E=V.header={}).feature_flags=A[C];var Fe=C+4;E.canvas_width=1+l(A,Fe),Fe+=3,E.canvas_height=1+l(A,Fe),Fe+=3;break;case"ALPH":S=!0,k=Ce+8,ie=C-8;break;case"ANIM":(E=V.header).bgcolor=d(A,C),Fe=C+4,E.loop_count=(ve=A)[(Te=Fe)+0]<<0|ve[Te+1]<<8,Fe+=2;break;case"ANMF":var nt,E;(E=V.frames[b]={}).offset_x=2*l(A,C),C+=3,E.offset_y=2*l(A,C),C+=3,E.width=1+l(A,C),C+=3,E.height=1+l(A,C),C+=3,E.duration=l(A,C),C+=3,nt=A[C++],E.dispose=1&nt,E.blend=nt>>1&1}Ne!="ANMF"&&(C+=Ce)}return V}}(T,0);P.response=T,P.rgbaoutput=!0,P.dataurl=!1;var L=P.header?P.header:null,F=P.frames?P.frames:null;if(L){L.loop_counter=L.loop_count,g=[L.canvas_height],p=[L.canvas_width];for(var K=0;K<F.length&&F[K].blend!=0;K++);}var se=F[0],ce=_.WebPDecodeRGBA(T,se.src_off,se.src_size,p,g);se.rgba=ce,se.imgwidth=p[0],se.imgheight=g[0];for(var R=0;R<p[0]*g[0]*4;R++)w[R]=ce[R];return this.width=p,this.height=g,this.data=w,this}(function(r){var e=function(){return typeof R1=="function"},t=function(g,p,w,_){var T=4,P=a;switch(_){case r.image_compression.FAST:T=1,P=s;break;case r.image_compression.MEDIUM:T=6,P=o;break;case r.image_compression.SLOW:T=9,P=c}g=n(g,p,w,P);var L=R1(g,{level:T});return r.__addimage__.arrayBufferToBinaryString(L)},n=function(g,p,w,_){for(var T,P,L,F=g.length/p,K=new Uint8Array(g.length+F),se=l(),ce=0;ce<F;ce+=1){if(L=ce*p,T=g.subarray(L,L+p),_)K.set(_(T,w,P),L+ce);else{for(var R,A=se.length,C=[];R<A;R+=1)C[R]=se[R](T,w,P);var V=d(C.concat());K.set(C[V],L+ce)}P=T}return K},i=function(g){var p=Array.apply([],g);return p.unshift(0),p},s=function(g,p){var w,_=[],T=g.length;_[0]=1;for(var P=0;P<T;P+=1)w=g[P-p]||0,_[P+1]=g[P]-w+256&255;return _},a=function(g,p,w){var _,T=[],P=g.length;T[0]=2;for(var L=0;L<P;L+=1)_=w&&w[L]||0,T[L+1]=g[L]-_+256&255;return T},o=function(g,p,w){var _,T,P=[],L=g.length;P[0]=3;for(var F=0;F<L;F+=1)_=g[F-p]||0,T=w&&w[F]||0,P[F+1]=g[F]+256-(_+T>>>1)&255;return P},c=function(g,p,w){var _,T,P,L,F=[],K=g.length;F[0]=4;for(var se=0;se<K;se+=1)_=g[se-p]||0,T=w&&w[se]||0,P=w&&w[se-p]||0,L=u(_,T,P),F[se+1]=g[se]-L+256&255;return F},u=function(g,p,w){if(g===p&&p===w)return g;var _=Math.abs(p-w),T=Math.abs(g-w),P=Math.abs(g+p-w-w);return _<=T&&_<=P?g:T<=P?p:w},l=function(){return[i,s,a,o,c]},d=function(g){var p=g.map(function(w){return w.reduce(function(_,T){return _+Math.abs(T)},0)});return p.indexOf(Math.min.apply(null,p))};r.processPNG=function(g,p,w,_){var T,P,L,F,K,se,ce,R,A,C,V,b,S,k,ie,ve=this.decode.FLATE_DECODE,Te="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(L=new eH(g)).imgData,P=L.bits,T=L.colorSpace,K=L.colors,[4,6].indexOf(L.colorType)!==-1){if(L.bits===8){A=(R=L.pixelBitlength==32?new Uint32Array(L.decodePixels().buffer):L.pixelBitlength==16?new Uint16Array(L.decodePixels().buffer):new Uint8Array(L.decodePixels().buffer)).length,V=new Uint8Array(A*L.colors),C=new Uint8Array(A);var Ne,_e=L.pixelBitlength-L.bits;for(k=0,ie=0;k<A;k++){for(S=R[k],Ne=0;Ne<_e;)V[ie++]=S>>>Ne&255,Ne+=L.bits;C[k]=S>>>Ne&255}}if(L.bits===16){A=(R=new Uint32Array(L.decodePixels().buffer)).length,V=new Uint8Array(A*(32/L.pixelBitlength)*L.colors),C=new Uint8Array(A*(32/L.pixelBitlength)),b=L.colors>1,k=0,ie=0;for(var Ce=0;k<A;)S=R[k++],V[ie++]=S>>>0&255,b&&(V[ie++]=S>>>16&255,S=R[k++],V[ie++]=S>>>0&255),C[Ce++]=S>>>16&255;P=8}_!==r.image_compression.NONE&&e()?(g=t(V,L.width*L.colors,L.colors,_),ce=t(C,L.width,1,_)):(g=V,ce=C,ve=void 0)}if(L.colorType===3&&(T=this.color_spaces.INDEXED,se=L.palette,L.transparency.indexed)){var Fe=L.transparency.indexed,nt=0;for(k=0,A=Fe.length;k<A;++k)nt+=Fe[k];if((nt/=255)===A-1&&Fe.indexOf(0)!==-1)F=[Fe.indexOf(0)];else if(nt!==A){for(R=L.decodePixels(),C=new Uint8Array(R.length),k=0,A=R.length;k<A;k++)C[k]=Fe[R[k]];ce=t(C,L.width,1)}}var E=function(D){var B;switch(D){case r.image_compression.FAST:B=11;break;case r.image_compression.MEDIUM:B=13;break;case r.image_compression.SLOW:B=14;break;default:B=12}return B}(_);return ve===this.decode.FLATE_DECODE&&(Te="/Predictor "+E+" "),Te+="/Colors "+K+" /BitsPerComponent "+P+" /Columns "+L.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(ce&&this.__addimage__.isArrayBuffer(ce)||this.__addimage__.isArrayBufferView(ce))&&(ce=this.__addimage__.arrayBufferToBinaryString(ce)),{alias:w,data:g,index:p,filter:ve,decodeParameters:Te,transparency:F,palette:se,sMask:ce,predictor:E,width:L.width,height:L.height,bitsPerComponent:P,colorSpace:T}}}})(Dt.API),function(r){r.processGIF89A=function(e,t,n,i){var s=new tH(e),a=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},l=new Lm(100).encode(u,100);return r.processJPEG.call(this,l,t,n,i)},r.processGIF87A=r.processGIF89A}(Dt.API),Ws.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ws.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){Cr.log("bit decode error:"+t)}},Ws.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},Ws.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Ws.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},Ws.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,l=n*this.width*4+4*i;this.data[l]=c,this.data[l+1]=o,this.data[l+2]=a,this.data[l+3]=u}this.pos+=r}},Ws.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,l=i*this.width*4+4*s;this.data[l]=u,this.data[l+1]=c,this.data[l+2]=o,this.data[l+3]=255}this.pos+=r}},Ws.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},Ws.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},Ws.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var s=new Ws(e,!1),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Lm(100).encode(c,100);return r.processJPEG.call(this,u,t,n,i)}}(Dt.API),Y5.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var s=new Y5(e),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Lm(100).encode(c,100);return r.processJPEG.call(this,u,t,n,i)}}(Dt.API),Dt.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var l=n[u],d=n[u+1],g=n[u+2],p=n[u+3];s[o++]=l,s[o++]=d,s[o++]=g,a[c++]=p}var w=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:w,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Dt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},yl=Dt.API,T0=yl.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,l=u.fof?u.fof:1,d=e.doKerning!==!1,g=0,p=r.length,w=0,_=o[0]||c,T=[];for(t=0;t<p;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?T.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(g=d&&wr(u[n])==="object"&&!isNaN(parseInt(u[n][w],10))?u[n][w]/l:0,T.push((o[n]||_)/c+g)),w=n;return T},H5=yl.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return yl.processArabic&&(r=yl.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:T0.apply(this,arguments).reduce(function(s,a){return s+a},0)},$5=function(r,e,t,n){for(var i=[],s=0,a=r.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(r.slice(0,s));var c=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(r.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&i.push(r.slice(c,s)),i},G5=function(r,e,t){t||(t={});var n,i,s,a,o,c,u,l=[],d=[l],g=t.textIndent||0,p=0,w=0,_=r.split(" "),T=T0.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),L=[];_.map(function(K){(K=K.split(/\s*\n/)).length>1?L=L.concat(K.map(function(se,ce){return(ce&&se.length?`
`:"")+se})):L.push(K[0])}),_=L,c=H5.apply(this,[P,t])}for(s=0,a=_.length;s<a;s++){var F=0;if(n=_[s],c&&n[0]==`
`&&(n=n.substr(1),F=1),g+p+(w=(i=T0.apply(this,[n,t])).reduce(function(K,se){return K+se},0))>e||F){if(w>e){for(o=$5.apply(this,[n,i,e-(g+p),e]),l.push(o.shift()),l=[o.pop()];o.length;)d.push([o.shift()]);w=i.slice(n.length-(l[0]?l[0].length:0)).reduce(function(K,se){return K+se},0)}else l=[n];d.push(l),g=w+c,p=T}else l.push(n),g+=p+w,p=T}return u=c?function(K,se){return(se?P:"")+K.join(" ")}:function(K){return K.join(" ")},d.map(u)},yl.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(l){if(l.widths&&l.kerning)return{widths:l.widths,kerning:l.kerning};var d=this.internal.getFont(l.fontName,l.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(G5.apply(this,[n[o],a,s]));return u},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},a=r.__fontmetrics__.compress=function(d){var g,p,w,_,T=["{"];for(var P in d){if(g=d[P],isNaN(parseInt(P,10))?p="'"+P+"'":(P=parseInt(P,10),p=(p=s(P).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof g=="number")g<0?(w=s(g).slice(3),_="-"):(w=s(g).slice(2),_=""),w=_+w.slice(0,-1)+n[w.slice(-1)];else{if(wr(g)!=="object")throw new Error("Don't know what to do with value type "+wr(g)+".");w=a(g)}T.push(p+w)}return T.push("}"),T.join("")},o=r.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,w,_,T={},P=1,L=T,F=[],K="",se="",ce=d.length-1,R=1;R<ce;R+=1)(_=d[R])=="'"?g?(w=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(F.push([L,w]),L={},w=void 0):_=="}"?((p=F.pop())[0][p[1]]=L,w=void 0,L=p[0]):_=="-"?P=-1:w===void 0?t.hasOwnProperty(_)?(K+=t[_],w=parseInt(K,16)*P,P=1,K=""):K+=_:t.hasOwnProperty(_)?(se+=t[_],L[w]=parseInt(se,16)*P,P=1,w=void 0,se=""):se+=_;return T},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},l={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(d){var g=d.font,p=l.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var w=u.Unicode[g.postScriptName];w&&(g.metadata.Unicode.encoding=w,g.encoding=w.codePages[0])}])}(Dt.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Pf(o)),a.metadata=r.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])}(Dt),function(r){function e(){return(Ot.canvg?Promise.resolve(Ot.canvg):I1(()=>import("./index.es-BE4bDLXv.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Dt.API.addSvgAsImage=function(t,n,i,s,a,o,c,u){if(isNaN(n)||isNaN(i))throw Cr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Cr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=s,l.height=a;var d=l.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,l.width,l.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(w){return w.fromString(d,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(w){return w.render(g)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),n,i,s,a,c,u)})}}(),Dt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Dt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,l=0,d=0;function g(w,_){var T,P=!1;for(T=0;T<w.length;T+=1)w[T]===_&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var p=o.length;for(d=0;d<p;d+=1)t[o[d]].value=t[o[d]].defaultValue,t[o[d]].explicitSet=!1}if(wr(r)==="object"){for(i in r)if(s=r[i],g(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&g(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(l=0;l<s[u].length;l+=1)typeof s[u][l]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var w,_=[];for(w in t)t[w].explicitSet===!0&&(t[w].type==="name"?_.push("/"+w+" /"+t[w].value):_.push("/"+w+" "+t[w].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(r){var e=r.API,t=e.pdfEscape16=function(s,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],l=[""],d=0,g=s.length;d<g;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return l.join("");o=o.toString(16),l.push(u[4-o.length],o)}return l.join("")},n=function(s){var a,o,c,u,l,d,g;for(l=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,g=(o=Object.keys(s).sort(function(p,w){return p-w})).length;d<g;d++)a=o[d],c.length>=100&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),l+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",w=0;w<g.length;w++)p+=String.fromCharCode(g[w]);var _=u();l({data:p,addLength1:!0,objectId:_}),c("endobj");var T=u();l({data:n(o.metadata.toUnicode),addLength1:!0,objectId:T}),c("endobj");var P=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Sl(o.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var L=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Sl(o.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+r.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+T+" 0 R"),c("/BaseFont /"+Sl(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+L+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,g="",p=0;p<d.length;p++)g+=String.fromCharCode(d[p]);var w=u();l({data:g,addLength1:!0,objectId:w}),c("endobj");var _=u();l({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var T=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+w+" 0 R"),c("/Flags 96"),c("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+Sl(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var P=0;P<o.metadata.hmtx.widths.length;P++)o.metadata.hmtx.widths[P]=parseInt(o.metadata.hmtx.widths[P]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+Sl(o.fontName)+"/FontDescriptor "+T+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",c=s.x,u=s.y,l=s.options||{},d=s.mutex||{},g=d.pdfEscape,p=d.activeFontKey,w=d.fonts,_=p,T="",P=0,L="",F=w[_].encoding;if(w[_].encoding!=="Identity-H")return{text:o,x:c,y:u,options:l,mutex:d};for(L=o,_=p,Array.isArray(o)&&(L=o[0]),P=0;P<L.length;P+=1)w[_].metadata.hasOwnProperty("cmap")&&(a=w[_].metadata.cmap.unicode.codeMap[L[P].charCodeAt(0)]),a||L[P].charCodeAt(0)<256&&w[_].metadata.hasOwnProperty("Unicode")?T+=L[P]:T+="";var K="";return parseInt(_.slice(1))<14||F==="WinAnsiEncoding"?K=g(T,_).split("").map(function(se){return se.charCodeAt(0).toString(16)}).join(""):F==="Identity-H"&&(K=t(T,w[_])),d.isHex=!0,{text:K,x:c,y:u,options:l,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},c,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Dt.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,a,o,c,u,l,d=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],w={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},T=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,F=0;this.__bidiEngine__={};var K=function(b){var S=b.charCodeAt(),k=S>>8,ie=_[k];return ie!==void 0?d[256*ie+(255&S)]:k===252||k===253?"AL":P.test(k)?"L":k===8?"R":"N"},se=function(b){for(var S,k=0;k<b.length;k++){if((S=K(b.charAt(k)))==="L")return!1;if(S==="R")return!0}return!1},ce=function(b,S,k,ie){var ve,Te,Ne,_e,Ce=S[ie];switch(Ce){case"L":case"R":L=!1;break;case"N":case"AN":break;case"EN":L&&(Ce="AN");break;case"AL":L=!0,Ce="R";break;case"WS":Ce="N";break;case"CS":ie<1||ie+1>=S.length||(ve=k[ie-1])!=="EN"&&ve!=="AN"||(Te=S[ie+1])!=="EN"&&Te!=="AN"?Ce="N":L&&(Te="AN"),Ce=Te===ve?Te:"N";break;case"ES":Ce=(ve=ie>0?k[ie-1]:"B")==="EN"&&ie+1<S.length&&S[ie+1]==="EN"?"EN":"N";break;case"ET":if(ie>0&&k[ie-1]==="EN"){Ce="EN";break}if(L){Ce="N";break}for(Ne=ie+1,_e=S.length;Ne<_e&&S[Ne]==="ET";)Ne++;Ce=Ne<_e&&S[Ne]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(_e=S.length,Ne=ie+1;Ne<_e&&S[Ne]==="NSM";)Ne++;if(Ne<_e){var Fe=b[ie],nt=Fe>=1425&&Fe<=2303||Fe===64286;if(ve=S[Ne],nt&&(ve==="R"||ve==="AL")){Ce="R";break}}}Ce=ie<1||(ve=S[ie-1])==="B"?"N":k[ie-1];break;case"B":L=!1,i=!0,Ce=F;break;case"S":s=!0,Ce="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"BN":Ce="N"}return Ce},R=function(b,S,k){var ie=b.split("");return k&&A(ie,k,{hiLevel:F}),ie.reverse(),S&&S.reverse(),ie.join("")},A=function(b,S,k){var ie,ve,Te,Ne,_e,Ce=-1,Fe=b.length,nt=0,E=[],D=F?p:g,B=[];for(L=!1,i=!1,s=!1,ve=0;ve<Fe;ve++)B[ve]=K(b[ve]);for(Te=0;Te<Fe;Te++){if(_e=nt,E[Te]=ce(b,B,E,Te),ie=240&(nt=D[_e][w[E[Te]]]),nt&=15,S[Te]=Ne=D[nt][5],ie>0)if(ie===16){for(ve=Ce;ve<Te;ve++)S[ve]=1;Ce=-1}else Ce=-1;if(D[nt][6])Ce===-1&&(Ce=Te);else if(Ce>-1){for(ve=Ce;ve<Te;ve++)S[ve]=Ne;Ce=-1}B[Te]==="B"&&(S[Te]=0),k.hiLevel|=Ne}s&&function(U,J,ae){for(var le=0;le<ae;le++)if(U[le]==="S"){J[le]=F;for(var ue=le-1;ue>=0&&U[ue]==="WS";ue--)J[ue]=F}}(B,S,Fe)},C=function(b,S,k,ie,ve){if(!(ve.hiLevel<b)){if(b===1&&F===1&&!i)return S.reverse(),void(k&&k.reverse());for(var Te,Ne,_e,Ce,Fe=S.length,nt=0;nt<Fe;){if(ie[nt]>=b){for(_e=nt+1;_e<Fe&&ie[_e]>=b;)_e++;for(Ce=nt,Ne=_e-1;Ce<Ne;Ce++,Ne--)Te=S[Ce],S[Ce]=S[Ne],S[Ne]=Te,k&&(Te=k[Ce],k[Ce]=k[Ne],k[Ne]=Te);nt=_e}nt++}}},V=function(b,S,k){var ie=b.split(""),ve={hiLevel:F};return k||(k=[]),A(ie,k,ve),function(Te,Ne,_e){if(_e.hiLevel!==0&&l)for(var Ce,Fe=0;Fe<Te.length;Fe++)Ne[Fe]===1&&(Ce=T.indexOf(Te[Fe]))>=0&&(Te[Fe]=T[Ce+1])}(ie,k,ve),C(2,ie,S,k,ve),C(1,ie,S,k,ve),ie.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,k){if(function(ve,Te){if(Te)for(var Ne=0;Ne<ve.length;Ne++)Te[Ne]=Ne;o===void 0&&(o=se(ve)),u===void 0&&(u=se(ve))}(b,S),a||!c||u)if(a&&c&&o^u)F=o?1:0,b=R(b,S,k);else if(!a&&c&&u)F=o?1:0,b=V(b,S,k),b=R(b,S);else if(!a||o||c||u){if(a&&!c&&o^u)b=R(b,S),o?(F=0,b=V(b,S,k)):(F=1,b=V(b,S,k),b=R(b,S));else if(a&&o&&!c&&u)F=1,b=V(b,S,k),b=R(b,S);else if(!a&&!c&&o^u){var ie=l;o?(F=1,b=V(b,S,k),F=0,l=!1,b=V(b,S,k),l=ie):(F=0,b=V(b,S,k),b=R(b,S),F=1,l=!1,b=V(b,S,k),l=ie,b=R(b,S))}}else F=0,b=V(b,S,k);else F=o?1:0,b=V(b,S,k);return b},this.__bidiEngine__.setOptions=function(b){b&&(a=b.isInputVisual,c=b.isOutputVisual,o=b.isInputRtl,u=b.isOutputRtl,l=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text,s=(n.x,n.y,n.options||{}),a=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);n.text=a}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new vc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new mH(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new rH(this.contents),this.head=new iH(this),this.name=new uH(this),this.cmap=new US(this),this.toUnicode={},this.hhea=new sH(this),this.maxp=new lH(this),this.hmtx=new hH(this),this.post=new oH(this),this.os2=new aH(this),this.loca=new gH(this),this.glyf=new fH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return a*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var Js,vc=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,s,a,o,c;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+c},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(this.writeByte(t));return s},r}(),rH=function(){var r;function e(t){var n,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,s,a,o,c,u,l,d,g,p,w,_;for(_ in p=Object.keys(t).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),a=Math.floor(d/c),l=16*p-d,(i=new vc).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(a),i.writeShort(l),s=16*p,u=i.pos+s,o=null,w=[],t)for(g=t[_],i.writeString(_),i.writeInt(r(g)),i.writeInt(u),i.writeInt(g.length),w=w.concat(g),_==="head"&&(o=u),u+=g.length;u%4;)w.push(0),u++;return i.write(w),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(t){var n,i,s,a;for(t=jS.call(t);t.length%4;)t.push(0);for(s=new vc(t),i=0,n=0,a=t.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),nH={}.hasOwnProperty,Sa=function(r,e){for(var t in e)nH.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Js=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var iH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new vc).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),X5=function(){function r(e,t){var n,i,s,a,o,c,u,l,d,g,p,w,_,T,P,L,F;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,s=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),e.pos+=2,_=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),u=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),l=function(){var K,se;for(se=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)se.push(e.readUInt16());return se}(),i=(this.length-e.pos+this.offset)/2,o=function(){var K,se;for(se=[],c=K=0;0<=i?K<i:K>i;c=0<=i?++K:--K)se.push(e.readUInt16());return se}(),c=P=0,F=s.length;P<F;c=++P)for(T=s[c],n=L=w=_[c];w<=T?L<=T:L>=T;n=w<=T?++L:--L)l[c]===0?a=n+u[c]:(a=o[l[c]/2+(n-w)-(g-c)]||0)!==0&&(a+=u[c]),this.codeMap[n]=65535&a}e.pos=d}return r.encode=function(e,t){var n,i,s,a,o,c,u,l,d,g,p,w,_,T,P,L,F,K,se,ce,R,A,C,V,b,S,k,ie,ve,Te,Ne,_e,Ce,Fe,nt,E,D,B,U,J,ae,le,ue,xe,Be,We;switch(ie=new vc,a=Object.keys(e).sort(function(Ze,at){return Ze-at}),t){case"macroman":for(_=0,T=function(){var Ze=[];for(w=0;w<256;++w)Ze.push(0);return Ze}(),L={0:0},s={},ve=0,Ce=a.length;ve<Ce;ve++)L[ue=e[i=a[ve]]]==null&&(L[ue]=++_),s[i]={old:e[i],new:L[e[i]]},T[i]=L[e[i]];return ie.writeUInt16(1),ie.writeUInt16(0),ie.writeUInt32(12),ie.writeUInt16(0),ie.writeUInt16(262),ie.writeUInt16(0),ie.write(T),{charMap:s,subtable:ie.data,maxGlyphID:_+1};case"unicode":for(S=[],d=[],F=0,L={},n={},P=u=null,Te=0,Fe=a.length;Te<Fe;Te++)L[se=e[i=a[Te]]]==null&&(L[se]=++F),n[i]={old:se,new:L[se]},o=L[se]-i,P!=null&&o===u||(P&&d.push(P),S.push(i),u=o),P=i;for(P&&d.push(P),d.push(65535),S.push(65535),V=2*(C=S.length),A=2*Math.pow(Math.log(C)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,R=2*C-A,c=[],ce=[],p=[],w=Ne=0,nt=S.length;Ne<nt;w=++Ne){if(b=S[w],l=d[w],b===65535){c.push(0),ce.push(0);break}if(b-(k=n[b].new)>=32768)for(c.push(0),ce.push(2*(p.length+C-w)),i=_e=b;b<=l?_e<=l:_e>=l;i=b<=l?++_e:--_e)p.push(n[i].new);else c.push(k-b),ce.push(0)}for(ie.writeUInt16(3),ie.writeUInt16(1),ie.writeUInt32(12),ie.writeUInt16(4),ie.writeUInt16(16+8*C+2*p.length),ie.writeUInt16(0),ie.writeUInt16(V),ie.writeUInt16(A),ie.writeUInt16(g),ie.writeUInt16(R),ae=0,E=d.length;ae<E;ae++)i=d[ae],ie.writeUInt16(i);for(ie.writeUInt16(0),le=0,D=S.length;le<D;le++)i=S[le],ie.writeUInt16(i);for(xe=0,B=c.length;xe<B;xe++)o=c[xe],ie.writeUInt16(o);for(Be=0,U=ce.length;Be<U;Be++)K=ce[Be],ie.writeUInt16(K);for(We=0,J=p.length;We<J;We++)_=p[We],ie.writeUInt16(_);return{charMap:n,subtable:ie.data,maxGlyphID:F+1}}},r}(),US=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)n=new X5(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,s;return n==null&&(n="macroman"),i=X5.encode(t,n),(s=new vc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),sH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),aH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),oH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),cH=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},uH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,s,a,o,c,u,l,d,g,p;for(t.pos=this.offset,t.readShort(),n=t.readShort(),c=t.readShort(),i=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=d=0,g=i.length;d<g;a=++d)s=i[a],t.pos=s.offset,l=t.readString(s.length),o=new cH(l,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),lH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),hH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,s,a,o,c,u;for(t.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var l,d;for(d=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)d.push(t.readInt16());return d}(),this.widths=(function(){var l,d,g,p;for(p=[],l=0,d=(g=this.metrics).length;l<d;l++)a=g[l],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),jS=[].slice,fH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,s,a,o,c,u,l,d,g;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,o=(c=new vc(n.read(s))).readShort(),l=c.readShort(),g=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[t]=o===-1?new pH(c,l,g,u,d):new dH(c,o,l,g,u,d),this.cache[t]))},e.prototype.encode=function(t,n,i){var s,a,o,c,u;for(o=[],a=[],c=0,u=n.length;c<u;c++)s=t[n[c]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),dH=function(){function r(e,t,n,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),pH=function(){function r(e,t,n,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new vc(jS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),gH=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<n.length&&n[a]==o){++a,i[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var l=new Array(4*i.length),d=0;d<i.length;++d)l[4*d+3]=255&i[d],l[4*d+2]=(65280&i[d])>>8,l[4*d+1]=(16711680&i[d])>>16,l[4*d]=(4278190080&i[d])>>24;return l},e}(),mH=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,s,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(n=i[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))n=c[s],i[s]=n;return i},r.prototype.encode=function(e,t){var n,i,s,a,o,c,u,l,d,g,p,w,_,T,P;for(i in n=US.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},P=n.charMap)p[(c=P[i]).old]=c.new;for(w in g=n.maxGlyphID,a)w in p||(p[w]=g++);return l=function(L){var F,K;for(F in K={},L)K[L[F]]=F;return K}(p),d=Object.keys(l).sort(function(L,F){return L-F}),_=function(){var L,F,K;for(K=[],L=0,F=d.length;L<F;L++)o=d[L],K.push(l[o]);return K}(),s=this.font.glyf.encode(a,_,p),u=this.font.loca.encode(s.offsets,_),T={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(T["OS/2"]=this.font.os2.raw()),this.font.directory.encode(T)},r}();Dt.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,s,a;if(Array.isArray(t))return"["+function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)n=t[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();function qS(r,e,t,n,i){n=n||{};var s=1.15,a=i.internal.scaleFactor,o=i.internal.getFontSize()/a,c=i.getLineHeightFactor?i.getLineHeightFactor():s,u=o*c,l=/\r\n|\r|\n/g,d="",g=1;if((n.valign==="middle"||n.valign==="bottom"||n.halign==="center"||n.halign==="right")&&(d=typeof r=="string"?r.split(l):r,g=d.length||1),t+=o*(2-s),n.valign==="middle"?t-=g/2*u:n.valign==="bottom"&&(t-=g*u),n.halign==="center"||n.halign==="right"){var p=o;if(n.halign==="center"&&(p*=.5),d&&g>=1){for(var w=0;w<d.length;w++)i.text(d[w],e-i.getStringUnitWidth(d[w])*p,t),t+=u;return i}e-=i.getStringUnitWidth(r)*p}return n.halign==="justify"?i.text(r,e,t,{maxWidth:n.maxWidth||100,align:"justify"}):i.text(r,e,t),i}var J5={},Gl=function(){function r(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return r.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:J5=e},r.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},r.prototype.applyStyles=function(e,t){var n,i,s;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var a=this.jsPDFDocument.internal.getFont(),o=a.fontStyle,c=a.fontName;if(e.font&&(c=e.font),e.fontStyle){o=e.fontStyle;var u=this.getFontList()[c];u&&u.indexOf(o)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),o=u[0])}if(this.jsPDFDocument.setFont(c,o),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var l=r.unifyColor(e.fillColor);l&&(n=this.jsPDFDocument).setFillColor.apply(n,l),l=r.unifyColor(e.textColor),l&&(i=this.jsPDFDocument).setTextColor.apply(i,l),l=r.unifyColor(e.lineColor),l&&(s=this.jsPDFDocument).setDrawColor.apply(s,l),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},r.prototype.splitTextToSize=function(e,t,n){return this.jsPDFDocument.splitTextToSize(e,t,n)},r.prototype.rect=function(e,t,n,i,s){return this.jsPDFDocument.rect(e,t,n,i,s)},r.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},r.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},r.prototype.getDocument=function(){return this.jsPDFDocument},r.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},r.prototype.addPage=function(){return this.jsPDFDocument.addPage()},r.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},r.prototype.getGlobalOptions=function(){return J5||{}},r.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},r.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},r.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},r.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},r.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},r.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},r}(),B1=function(r,e){return B1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},B1(r,e)};function WS(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");B1(r,e);function t(){this.constructor=r}r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var zS=function(r){WS(e,r);function e(t){var n=r.call(this)||this;return n._element=t,n}return e}(Array);function vH(r){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/r,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function _H(r){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[r]}function Sp(r,e,t){t.applyStyles(e,!0);var n=Array.isArray(r)?r:[r],i=n.map(function(s){return t.getTextWidth(s)}).reduce(function(s,a){return Math.max(s,a)},0);return i}function HS(r,e,t,n){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;r.applyStyles({lineWidth:i,lineColor:s});var a=$S(i,!1);a&&r.rect(t.x,t.y,e.getWidth(r.pageSize().width),n.y-t.y,a)}function $S(r,e){var t=r>0,n=e||e===0;return t&&n?"DF":t?"S":n?"F":null}function Ig(r,e){var t,n,i,s;if(r=r||e,Array.isArray(r)){if(r.length>=4)return{top:r[0],right:r[1],bottom:r[2],left:r[3]};if(r.length===3)return{top:r[0],right:r[1],bottom:r[2],left:r[1]};if(r.length===2)return{top:r[0],right:r[1],bottom:r[0],left:r[1]};r.length===1?r=r[0]:r=e}return typeof r=="object"?(typeof r.vertical=="number"&&(r.top=r.vertical,r.bottom=r.vertical),typeof r.horizontal=="number"&&(r.right=r.horizontal,r.left=r.horizontal),{left:(t=r.left)!==null&&t!==void 0?t:e,top:(n=r.top)!==null&&n!==void 0?n:e,right:(i=r.right)!==null&&i!==void 0?i:e,bottom:(s=r.bottom)!==null&&s!==void 0?s:e}):(typeof r!="number"&&(r=e),{top:r,right:r,bottom:r,left:r})}function GS(r,e){var t=Ig(e.settings.margin,0);return r.pageSize().width-(t.left+t.right)}function yH(r,e,t,n,i){var s={},a=1.3333333333333333,o=Dm(e,function(F){return i.getComputedStyle(F).backgroundColor});o!=null&&(s.fillColor=o);var c=Dm(e,function(F){return i.getComputedStyle(F).color});c!=null&&(s.textColor=c);var u=xH(n,t);u&&(s.cellPadding=u);var l="borderTopColor",d=a*t,g=n.borderTopWidth;if(n.borderBottomWidth===g&&n.borderRightWidth===g&&n.borderLeftWidth===g){var p=(parseFloat(g)||0)/d;p&&(s.lineWidth=p)}else s.lineWidth={top:(parseFloat(n.borderTopWidth)||0)/d,right:(parseFloat(n.borderRightWidth)||0)/d,bottom:(parseFloat(n.borderBottomWidth)||0)/d,left:(parseFloat(n.borderLeftWidth)||0)/d},s.lineWidth.top||(s.lineWidth.right?l="borderRightColor":s.lineWidth.bottom?l="borderBottomColor":s.lineWidth.left&&(l="borderLeftColor"));var w=Dm(e,function(F){return i.getComputedStyle(F)[l]});w!=null&&(s.lineColor=w);var _=["left","right","center","justify"];_.indexOf(n.textAlign)!==-1&&(s.halign=n.textAlign),_=["middle","bottom","top"],_.indexOf(n.verticalAlign)!==-1&&(s.valign=n.verticalAlign);var T=parseInt(n.fontSize||"");isNaN(T)||(s.fontSize=T/a);var P=wH(n);P&&(s.fontStyle=P);var L=(n.fontFamily||"").toLowerCase();return r.indexOf(L)!==-1&&(s.font=L),s}function wH(r){var e="";return(r.fontWeight==="bold"||r.fontWeight==="bolder"||parseInt(r.fontWeight)>=700)&&(e="bold"),(r.fontStyle==="italic"||r.fontStyle==="oblique")&&(e+="italic"),e}function Dm(r,e){var t=KS(r,e);if(!t)return null;var n=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!n||!Array.isArray(n))return null;var i=[parseInt(n[1]),parseInt(n[2]),parseInt(n[3])],s=parseInt(n[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function KS(r,e){var t=e(r);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?r.parentElement==null?null:KS(r.parentElement,e):t}function xH(r,e){var t=[r.paddingTop,r.paddingRight,r.paddingBottom,r.paddingLeft],n=96/(72/e),i=(parseInt(r.lineHeight)-parseInt(r.fontSize))/e/2,s=t.map(function(o){return parseInt(o||"0")/n}),a=Ig(s,0);return i>a.top&&(a.top=i),i>a.bottom&&(a.bottom=i),a}function YS(r,e,t,n,i){var s,a;n===void 0&&(n=!1),i===void 0&&(i=!1);var o;typeof e=="string"?o=t.document.querySelector(e):o=e;var c=Object.keys(r.getFontList()),u=r.scaleFactor(),l=[],d=[],g=[];if(!o)return console.error("Html table could not be found with input: ",e),{head:l,body:d,foot:g};for(var p=0;p<o.rows.length;p++){var w=o.rows[p],_=(a=(s=w==null?void 0:w.parentElement)===null||s===void 0?void 0:s.tagName)===null||a===void 0?void 0:a.toLowerCase(),T=TH(c,u,t,w,n,i);T&&(_==="thead"?l.push(T):_==="tfoot"?g.push(T):d.push(T))}return{head:l,body:d,foot:g}}function TH(r,e,t,n,i,s){for(var a=new zS(n),o=0;o<n.cells.length;o++){var c=n.cells[o],u=t.getComputedStyle(c);if(i||u.display!=="none"){var l=void 0;s&&(l=yH(r,c,e,u,t)),a.push({rowSpan:c.rowSpan,colSpan:c.colSpan,styles:l,_element:c,content:EH(c)})}}var d=t.getComputedStyle(n);if(a.length>0&&(i||d.display!=="none"))return a}function EH(r){var e=r.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function bH(r,e,t){for(var n=0,i=[r,e,t];n<i.length;n++){var s=i[n];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ya(r,e,t,n,i){if(r==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(r),a=1;a<arguments.length;a++){var o=arguments[a];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(s[c]=o[c])}return s}function XS(r,e){var t=new Gl(r),n=t.getDocumentOptions(),i=t.getGlobalOptions();bH(i,n,e);var s=Ya({},i,n,e),a;typeof window<"u"&&(a=window);var o=AH(i,n,e),c=IH(i,n,e),u=SH(t,s),l=NH(t,s,a);return{id:e.tableId,content:l,hooks:c,styles:o,settings:u}}function AH(r,e,t){for(var n={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(c){if(c==="columnStyles"){var u=r[c],l=e[c],d=t[c];n.columnStyles=Ya({},u,l,d)}else{var g=[r,e,t],p=g.map(function(w){return w[c]||{}});n[c]=Ya({},p[0],p[1],p[2])}},s=0,a=Object.keys(n);s<a.length;s++){var o=a[s];i(o)}return n}function IH(r,e,t){for(var n=[r,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,a=n;s<a.length;s++){var o=a[s];o.didParseCell&&i.didParseCell.push(o.didParseCell),o.willDrawCell&&i.willDrawCell.push(o.willDrawCell),o.didDrawCell&&i.didDrawCell.push(o.didDrawCell),o.willDrawPage&&i.willDrawPage.push(o.willDrawPage),o.didDrawPage&&i.didDrawPage.push(o.didDrawPage)}return i}function SH(r,e){var t,n,i,s,a,o,c,u,l,d,g,p,w=Ig(e.margin,40/r.scaleFactor()),_=(t=PH(r,e.startY))!==null&&t!==void 0?t:w.top,T;e.showFoot===!0?T="everyPage":e.showFoot===!1?T="never":T=(n=e.showFoot)!==null&&n!==void 0?n:"everyPage";var P;e.showHead===!0?P="everyPage":e.showHead===!1?P="never":P=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var L=(s=e.useCss)!==null&&s!==void 0?s:!1,F=e.theme||(L?"plain":"striped"),K=!!e.horizontalPageBreak,se=(a=e.horizontalPageBreakRepeat)!==null&&a!==void 0?a:null;return{includeHiddenHtml:(o=e.includeHiddenHtml)!==null&&o!==void 0?o:!1,useCss:L,theme:F,startY:_,margin:w,pageBreak:(c=e.pageBreak)!==null&&c!==void 0?c:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(l=e.tableWidth)!==null&&l!==void 0?l:"auto",showHead:P,showFoot:T,tableLineWidth:(d=e.tableLineWidth)!==null&&d!==void 0?d:0,tableLineColor:(g=e.tableLineColor)!==null&&g!==void 0?g:200,horizontalPageBreak:K,horizontalPageBreakRepeat:se,horizontalPageBreakBehaviour:(p=e.horizontalPageBreakBehaviour)!==null&&p!==void 0?p:"afterAllRows"}}function PH(r,e){var t=r.getLastAutoTable(),n=r.scaleFactor(),i=r.pageNumber(),s=!1;if(t&&t.startPageNumber){var a=t.startPageNumber+t.pageNumber-1;s=a===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(t==null?void 0:t.finalY)!=null?t.finalY+20/n:null}function NH(r,e,t){var n=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var a=e.includeHiddenHtml;if(t){var o=YS(r,e.html,t,a,e.useCss)||{};n=o.head||n,i=o.body||n,s=o.foot||n}else console.error("Cannot parse html in non browser environment")}var c=e.columns||CH(n,i,s);return{columns:c,head:n,body:i,foot:s}}function CH(r,e,t){var n=r[0]||e[0]||t[0]||[],i=[];return Object.keys(n).filter(function(s){return s!=="_element"}).forEach(function(s){var a=1,o;Array.isArray(n)?o=n[parseInt(s)]:o=n[s],typeof o=="object"&&!Array.isArray(o)&&(a=(o==null?void 0:o.colSpan)||1);for(var c=0;c<a;c++){var u=void 0;Array.isArray(n)?u=i.length:u=s+(c>0?"_".concat(c):"");var l={dataKey:u};i.push(l)}}),i}var V1=function(){function r(e,t,n){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=n,this.doc=e.getDocument()}return r}(),RH=function(r){WS(e,r);function e(t,n,i,s,a,o){var c=r.call(this,t,n,o)||this;return c.cell=i,c.row=s,c.column=a,c.section=s.section,c}return e}(V1),kH=function(){function r(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return r.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,n){return t+n.getMaxCellHeight(e)},0)},r.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},r.prototype.callCellHooks=function(e,t,n,i,s,a){for(var o=0,c=t;o<c.length;o++){var u=c[o],l=new RH(e,this,n,i,s,a),d=u(l)===!1;if(n.text=Array.isArray(n.text)?n.text:[n.text],d)return!1}return!0},r.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var n=0,i=this.hooks.didDrawPage;n<i.length;n++){var s=i[n];s(new V1(e,this,t))}},r.prototype.callWillDrawPageHooks=function(e,t){for(var n=0,i=this.hooks.willDrawPage;n<i.length;n++){var s=i[n];s(new V1(e,this,t))}},r.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return t}else{var n=this.settings.margin;return e-n.left-n.right}},r}(),JS=function(){function r(e,t,n,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof zS&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=n,this.cells=i,this.spansMultiplePages=s}return r.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(n,i){var s;return Math.max(n,((s=t.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},r.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(n){var i=t.cells[n.index];return i?i.rowSpan>1:!1}).length>0},r.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},r.prototype.getMinimumRowHeight=function(e,t){var n=this;return e.reduce(function(i,s){var a=n.cells[s.index];if(!a)return 0;var o=t.getLineHeight(a.styles.fontSize),c=a.padding("vertical"),u=c+o;return u>i?u:i},0)},r}(),QS=function(){function r(e,t,n){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=n,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var a=s!=null?""+s:"",o=/\r\n|\r|\n/g;this.text=a.split(o)}return r.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var n;if(this.styles.halign==="right")n=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");n=this.x+i/2+this.padding("left")}else n=this.x+this.padding("left");return{x:n,y:e}},r.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var n=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,s=n*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},r.prototype.padding=function(e){var t=Ig(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},r}(),LH=function(){function r(e,t,n){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=n}return r.prototype.getMaxCustomCellWidth=function(e){for(var t=0,n=0,i=e.allRows();n<i.length;n++){var s=i[n],a=s.cells[this.index];a&&typeof a.styles.cellWidth=="number"&&(t=Math.max(t,a.styles.cellWidth))}return t},r}();function DH(r,e){FH(r,e);var t=[],n=0;e.columns.forEach(function(s){var a=s.getMaxCustomCellWidth(e);a?s.width=a:(s.width=s.wrappedWidth,t.push(s)),n+=s.width});var i=e.getWidth(r.pageSize().width)-n;i&&(i=U1(t,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=U1(t,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/r.scaleFactor()&&(i=i<1?i:Math.round(i),console.log("Of the table content, ".concat(i," units width could not fit page"))),MH(e),BH(e,r),OH(e)}function FH(r,e){var t=r.scaleFactor(),n=e.settings.horizontalPageBreak,i=GS(r,e);e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],u=s.cells[c.index];if(u){var l=e.hooks.didParseCell;e.callCellHooks(r,l,u,s,c,null);var d=u.padding("horizontal");u.contentWidth=Sp(u.text,u.styles,r)+d;var g=Sp(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,r);if(u.minReadableWidth=g+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||n===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var p=10/t;u.minWidth=u.styles.minCellWidth||p,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var a=0,o=e.columns;a<o.length;a++){var c=o[a],u=s.cells[c.index];if(u&&u.colSpan===1)c.wrappedWidth=Math.max(c.wrappedWidth,u.wrappedWidth),c.minWidth=Math.max(c.minWidth,u.minWidth),c.minReadableWidth=Math.max(c.minReadableWidth,u.minReadableWidth);else{var l=e.styles.columnStyles[c.dataKey]||e.styles.columnStyles[c.index]||{},d=l.cellWidth||l.minCellWidth;d&&typeof d=="number"&&(c.minWidth=d,c.wrappedWidth=d)}u&&(u.colSpan>1&&!c.minWidth&&(c.minWidth=u.minWidth),u.colSpan>1&&!c.wrappedWidth&&(c.wrappedWidth=u.minWidth))}})}function U1(r,e,t){for(var n=e,i=r.reduce(function(p,w){return p+w.wrappedWidth},0),s=0;s<r.length;s++){var a=r[s],o=a.wrappedWidth/i,c=n*o,u=a.width+c,l=t(a),d=u<l?l:u;e-=d-a.width,a.width=d}if(e=Math.round(e*1e10)/1e10,e){var g=r.filter(function(p){return e<0?p.width>t(p):!0});g.length&&(e=U1(g,e,t))}return e}function OH(r){for(var e={},t=1,n=r.allRows(),i=0;i<n.length;i++)for(var s=n[i],a=0,o=r.columns;a<o.length;a++){var c=o[a],u=e[c.index];if(t>1)t--,delete s.cells[c.index];else if(u)u.cell.height+=s.height,t=u.cell.colSpan,delete s.cells[c.index],u.left--,u.left<=1&&delete e[c.index];else{var l=s.cells[c.index];if(!l)continue;if(l.height=s.height,l.rowSpan>1){var d=n.length-i,g=l.rowSpan>d?d:l.rowSpan;e[c.index]={cell:l,left:g,row:s}}}}}function MH(r){for(var e=r.allRows(),t=0;t<e.length;t++)for(var n=e[t],i=null,s=0,a=0,o=0;o<r.columns.length;o++){var c=r.columns[o];if(a-=1,a>1&&r.columns[o+1])s+=c.width,delete n.cells[c.index];else if(i){var u=i;delete n.cells[c.index],i=null,u.width=c.width+s}else{var u=n.cells[c.index];if(!u)continue;if(a=u.colSpan,s=0,u.colSpan>1){i=u,s+=c.width;continue}u.width=c.width+s}}}function BH(r,e){for(var t={count:0,height:0},n=0,i=r.allRows();n<i.length;n++){for(var s=i[n],a=0,o=r.columns;a<o.length;a++){var c=o[a],u=s.cells[c.index];if(u){e.applyStyles(u.styles,!0);var l=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,l+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=Q5(u.text,l,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=Q5(u.text,l,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var d=u.styles.overflow(u.text,l);typeof d=="string"?u.text=[d]:u.text=d}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var g=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<g*u.rowSpan?t={height:g,count:u.rowSpan}:t&&t.count>0&&t.height>g&&(g=t.height),g>s.height&&(s.height=g)}}t.count--}}function Q5(r,e,t,n,i){return r.map(function(s){return VH(s,e,t,n,i)})}function VH(r,e,t,n,i){var s=1e4*n.scaleFactor();if(e=Math.ceil(e*s)/s,e>=Sp(r,t,n))return r;for(;e<Sp(r+i,t,n)&&!(r.length<=1);)r=r.substring(0,r.length-1);return r.trim()+i}function ZS(r,e){var t=new Gl(r),n=UH(e,t.scaleFactor()),i=new kH(e,n);return DH(t,i),t.applyStyles(t.userStyles),i}function UH(r,e){var t=r.content,n=qH(t.columns);if(t.head.length===0){var i=Z5(n,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=Z5(n,"foot");i&&t.foot.push(i)}var s=r.settings.theme,a=r.styles;return{columns:n,head:Fm("head",t.head,n,a,s,e),body:Fm("body",t.body,n,a,s,e),foot:Fm("foot",t.foot,n,a,s,e)}}function Fm(r,e,t,n,i,s){var a={},o=e.map(function(c,u){for(var l=0,d={},g=0,p=0,w=0,_=t;w<_.length;w++){var T=_[w];if(a[T.index]==null||a[T.index].left===0)if(p===0){var P=void 0;Array.isArray(c)?P=c[T.index-g-l]:P=c[T.dataKey];var L={};typeof P=="object"&&!Array.isArray(P)&&(L=(P==null?void 0:P.styles)||{});var F=WH(r,T,u,i,n,s,L),K=new QS(P,F,r);d[T.dataKey]=K,d[T.index]=K,p=K.colSpan-1,a[T.index]={left:K.rowSpan-1,times:p}}else p--,g++;else a[T.index].left--,p=a[T.index].times,l++}return new JS(c,u,r,d)});return o}function Z5(r,e){var t={};return r.forEach(function(n){if(n.raw!=null){var i=jH(e,n.raw);i!=null&&(t[n.dataKey]=i)}}),Object.keys(t).length>0?t:null}function jH(r,e){if(r==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(r==="foot"&&typeof e=="object")return e.footer;return null}function qH(r){return r.map(function(e,t){var n,i;return typeof e=="object"?i=(n=e.dataKey)!==null&&n!==void 0?n:t:i=t,new LH(i,e,t)})}function WH(r,e,t,n,i,s,a){var o=_H(n),c;r==="head"?c=i.headStyles:r==="body"?c=i.bodyStyles:r==="foot"&&(c=i.footStyles);var u=Ya({},o.table,o[r],i.styles,c),l=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},d=r==="body"?l:{},g=r==="body"&&t%2===0?Ya({},o.alternateRow,i.alternateRowStyles):{},p=vH(s),w=Ya({},p,u,g,d);return Ya(w,a)}function zH(r,e,t){var n;t===void 0&&(t={});var i=GS(r,e),s=new Map,a=[],o=[],c=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?c=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(c=[e.settings.horizontalPageBreakRepeat]),c.forEach(function(g){var p=e.columns.find(function(w){return w.dataKey===g||w.index===g});p&&!s.has(p.index)&&(s.set(p.index,!0),a.push(p.index),o.push(e.columns[p.index]),i-=p.wrappedWidth)});for(var u=!0,l=(n=t==null?void 0:t.start)!==null&&n!==void 0?n:0;l<e.columns.length;){if(s.has(l)){l++;continue}var d=e.columns[l].wrappedWidth;if(u||i>=d)u=!1,a.push(l),o.push(e.columns[l]),i-=d;else break;l++}return{colIndexes:a,columns:o,lastIndex:l-1}}function HH(r,e){for(var t=[],n=0;n<e.columns.length;n++){var i=zH(r,e,{start:n});i.columns.length&&(t.push(i),n=i.lastIndex)}return t}function e4(r,e){var t=e.settings,n=t.startY,i=t.margin,s={x:i.left,y:n},a=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),o=n+i.bottom+a;if(t.pageBreak==="avoid"){var c=e.body,u=c.reduce(function(g,p){return g+p.height},0);o+=u}var l=new Gl(r);(t.pageBreak==="always"||t.startY!=null&&o>l.pageSize().height)&&(r4(l),s.y=i.top),e.callWillDrawPageHooks(l,s);var d=Ya({},s);e.startPageNumber=l.pageNumber(),t.horizontalPageBreak?$H(l,e,d,s):(l.applyStyles(l.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(g){return oo(l,e,g,s,e.columns)}),l.applyStyles(l.userStyles),e.body.forEach(function(g,p){var w=p===e.body.length-1;Pp(l,e,g,w,d,s,e.columns)}),l.applyStyles(l.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(g){return oo(l,e,g,s,e.columns)})),HS(l,e,d,s),e.callEndPageHooks(l,s),e.finalY=s.y,r.lastAutoTable=e,l.applyStyles(l.userStyles)}function $H(r,e,t,n){var i=HH(r,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,l){r.applyStyles(r.userStyles),l>0?Nf(r,e,t,n,u.columns,!0):ex(r,e,n,u.columns),GH(r,e,t,n,u.columns),Om(r,e,n,u.columns)});else for(var a=-1,o=i[0],c=function(){var u=a;if(o){r.applyStyles(r.userStyles);var l=o.columns;a>=0?Nf(r,e,t,n,l,!0):ex(r,e,n,l),u=tx(r,e,a+1,n,l),Om(r,e,n,l)}var d=u-a;i.slice(1).forEach(function(g){r.applyStyles(r.userStyles),Nf(r,e,t,n,g.columns,!0),tx(r,e,a+1,n,g.columns,d),Om(r,e,n,g.columns)}),a=u};a<e.body.length-1;)c()}function ex(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return oo(r,e,s,t,n)})}function GH(r,e,t,n,i){r.applyStyles(r.userStyles),e.body.forEach(function(s,a){var o=a===e.body.length-1;Pp(r,e,s,o,t,n,i)})}function tx(r,e,t,n,i,s){r.applyStyles(r.userStyles),s=s??e.body.length;var a=Math.min(t+s,e.body.length),o=-1;return e.body.slice(t,a).forEach(function(c,u){var l=t+u===e.body.length-1,d=t4(r,e,l,n);c.canEntireRowFit(d,i)&&(oo(r,e,c,n,i),o=t+u)}),o}function Om(r,e,t,n){var i=e.settings;r.applyStyles(r.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return oo(r,e,s,t,n)})}function KH(r,e,t){var n=t.getLineHeight(r.styles.fontSize),i=r.padding("vertical"),s=Math.floor((e-i)/n);return Math.max(0,s)}function YH(r,e,t,n){var i={};r.spansMultiplePages=!0,r.height=0;for(var s=0,a=0,o=t.columns;a<o.length;a++){var c=o[a],u=r.cells[c.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var l=new QS(u.raw,u.styles,u.section);l=Ya(l,u),l.text=[];var d=KH(u,e,n);u.text.length>d&&(l.text=u.text.splice(d,u.text.length));var g=n.scaleFactor(),p=n.getLineHeightFactor();u.contentHeight=u.getContentHeight(g,p),u.contentHeight>=e&&(u.contentHeight=e,l.styles.minCellHeight-=e),u.contentHeight>r.height&&(r.height=u.contentHeight),l.contentHeight=l.getContentHeight(g,p),l.contentHeight>s&&(s=l.contentHeight),i[c.index]=l}}var w=new JS(r.raw,-1,r.section,i,!0);w.height=s;for(var _=0,T=t.columns;_<T.length;_++){var c=T[_],l=w.cells[c.index];l&&(l.height=w.height);var u=r.cells[c.index];u&&(u.height=r.height)}return w}function XH(r,e,t,n){var i=r.pageSize().height,s=n.settings.margin,a=s.top+s.bottom,o=i-a;e.section==="body"&&(o-=n.getHeadHeight(n.columns)+n.getFootHeight(n.columns));var c=e.getMinimumRowHeight(n.columns,r),u=c<t;if(c>o)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var l=e.hasRowSpan(n.columns),d=e.getMaxCellHeight(n.columns)>o;return d?(l&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(l||n.settings.rowPageBreak==="avoid")}function Pp(r,e,t,n,i,s,a){var o=t4(r,e,n,s);if(t.canEntireRowFit(o,a))oo(r,e,t,s,a);else if(XH(r,t,o,e)){var c=YH(t,o,e,r);oo(r,e,t,s,a),Nf(r,e,i,s,a),Pp(r,e,c,n,i,s,a)}else Nf(r,e,i,s,a),Pp(r,e,t,n,i,s,a)}function oo(r,e,t,n,i){n.x=e.settings.margin.left;for(var s=0,a=i;s<a.length;s++){var o=a[s],c=t.cells[o.index];if(!c){n.x+=o.width;continue}r.applyStyles(c.styles),c.x=n.x,c.y=n.y;var u=e.callCellHooks(r,e.hooks.willDrawCell,c,t,o,n);if(u===!1){n.x+=o.width;continue}JH(r,c,n);var l=c.getTextPos();qS(c.text,l.x,l.y,{halign:c.styles.halign,valign:c.styles.valign,maxWidth:Math.ceil(c.width-c.padding("left")-c.padding("right"))},r.getDocument()),e.callCellHooks(r,e.hooks.didDrawCell,c,t,o,n),n.x+=o.width}n.y+=t.height}function JH(r,e,t){var n=e.styles;if(r.getDocument().setFillColor(r.getDocument().getFillColor()),typeof n.lineWidth=="number"){var i=$S(n.lineWidth,n.fillColor);i&&r.rect(e.x,t.y,e.width,e.height,i)}else typeof n.lineWidth=="object"&&(n.fillColor&&r.rect(e.x,t.y,e.width,e.height,"F"),QH(r,e,t,n.lineWidth))}function QH(r,e,t,n){var i,s,a,o;n.top&&(i=t.x,s=t.y,a=t.x+e.width,o=t.y,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),c(n.top,i,s,a,o)),n.bottom&&(i=t.x,s=t.y+e.height,a=t.x+e.width,o=t.y+e.height,n.right&&(a+=.5*n.right),n.left&&(i-=.5*n.left),c(n.bottom,i,s,a,o)),n.left&&(i=t.x,s=t.y,a=t.x,o=t.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.left,i,s,a,o)),n.right&&(i=t.x+e.width,s=t.y,a=t.x+e.width,o=t.y+e.height,n.top&&(s-=.5*n.top),n.bottom&&(o+=.5*n.bottom),c(n.right,i,s,a,o));function c(u,l,d,g,p){r.getDocument().setLineWidth(u),r.getDocument().line(l,d,g,p,"S")}}function t4(r,e,t,n){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),r.pageSize().height-n.y-i}function Nf(r,e,t,n,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),r.applyStyles(r.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(o){return oo(r,e,o,n,i)}),e.callEndPageHooks(r,n);var a=e.settings.margin;HS(r,e,t,n),r4(r),e.pageNumber++,n.x=a.left,n.y=a.top,t.y=a.top,e.callWillDrawPageHooks(r,n),e.settings.showHead==="everyPage"&&(e.head.forEach(function(o){return oo(r,e,o,n,i)}),r.applyStyles(r.userStyles))}function r4(r){var e=r.pageNumber();r.setPage(e+1);var t=r.pageNumber();return t===e?(r.addPage(),!0):!1}function ZH(r){r.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0],i=XS(this,n),s=ZS(this,i);return e4(this,s),this},r.API.lastAutoTable=!1,r.API.autoTableText=function(e,t,n,i){qS(e,t,n,i,this)},r.API.autoTableSetDefaults=function(e){return Gl.setDefaults(e,this),this},r.autoTableSetDefaults=function(e,t){Gl.setDefaults(e,t)},r.API.autoTableHtmlToJson=function(e,t){var n;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Gl(this),s=YS(i,e,window,t,!1),a=s.head,o=s.body,c=((n=a[0])===null||n===void 0?void 0:n.map(function(u){return u.content}))||[];return{columns:c,rows:o,data:o}}}var Mm;function e$(r,e){var t=XS(r,e),n=ZS(r,t);e4(r,n)}try{if(typeof window<"u"&&window){var rx=window,nx=rx.jsPDF||((Mm=rx.jspdf)===null||Mm===void 0?void 0:Mm.jsPDF);nx&&ZH(nx)}}catch(r){console.error("Could not apply autoTable plugin",r)}function t$(){window.exportXLSX=r$,window.exportPDF=n$,window.exportCSV=i$,window.exportJSON=s$,window.importJSON=a$}function r$(){const r=document.getElementById("exportPeriod").value;let e=Ve.entries;if(r!=="all"){const{start:s,end:a}=Sg(r);e=e.filter(o=>o.datum>=s&&o.datum<=a)}e.sort((s,a)=>s.datum!==a.datum?s.datum.localeCompare(a.datum):(s.start||"").localeCompare(a.start||""));const t=e.map(s=>({Datum:ou(s.datum),Start:s.start,Ende:s.ende,Projekt:s.projekt||"",Ttigkeit:s.taetigkeit||"",Stunden:s.stunden,Ort:s.homeoffice?"Homeoffice":"Bro"})),n=bm.json_to_sheet(t),i=bm.book_new();bm.book_append_sheet(i,n,"Zeiten"),sz(i,`Zeiterfassung_${new Date().toISOString().split("T")[0]}.xlsx`)}function n$(){const r=new Dt,e=document.getElementById("exportPeriod").value;let t=Ve.entries,n="Alle Eintrge";if(e!=="all"){const{start:p,end:w}=Sg(e);t=t.filter(_=>_.datum>=p&&_.datum<=w),n=`${ou(p)} bis ${ou(w)}`}t.sort((p,w)=>p.datum!==w.datum?p.datum.localeCompare(w.datum):(p.start||"").localeCompare(w.start||""));const i=t.reduce((p,w)=>p+(parseFloat(w.stunden)||0),0),s=new Set(t.map(p=>p.datum)).size,a=s>0?i/s:0,o=7.8,c=a/o*100;r.setFontSize(22),r.text("Zeiterfassung",14,20),r.setFontSize(10),r.setTextColor(100);const u=new Date().toLocaleDateString("de-DE");r.text(`Erstellt am: ${u}`,14,28),r.text(`${t.length} Eintrge`,14,34),e!=="all"&&r.text(`Zeitraum: ${n}`,14,40);const l=t.map(p=>[ou(p.datum),p.projekt||"",p.taetigkeit||"",p.start||"",p.ende||"",(parseFloat(p.stunden)||0).toFixed(2),p.homeoffice?"HO":"Bro"]);e$(r,{head:[["Datum","Projekte","Ttigkeiten","Start","Ende","Std","Ort"]],body:l,startY:45,styles:{fontSize:9},headStyles:{fillColor:[66,66,66]},alternateRowStyles:{fillColor:[245,245,245]},didParseCell:p=>{p.column.index===5&&(p.cell.styles.halign="right")}});const d=r.lastAutoTable.finalY+10;r.setFontSize(11),r.setTextColor(0),r.text(`Gesamt: ${i.toFixed(2)} Stunden`,14,d),r.setFontSize(12),r.setFont(void 0,"bold"),r.text("STATISTIK",14,d+10),r.setFont(void 0,"normal"),r.setFontSize(10),r.text(`Arbeitstage: ${s}`,14,d+16);const g=a>=o;r.setTextColor(g?0:200,g?100:0,0),a<o?r.setTextColor(220,50,50):r.setTextColor(0,150,0),r.text(` Stunden/Tag: ${a.toFixed(2)}h`,14,d+22),r.text(` % zur Regelarbeitszeit (${o.toString().replace(".",",")}h): ${c.toFixed(1)}%`,14,d+28),r.save(`Zeiterfassung_${new Date().toISOString().split("T")[0]}.pdf`)}function Sg(r){const e=new Date,t=e.toISOString().split("T")[0];let n=t,i=t;if(r==="custom")n=document.getElementById("exportFrom").value,i=document.getElementById("exportTo").value;else if(r==="week"){const s=e.getDay()||7,a=new Date(e);a.setDate(e.getDate()-s+1),n=a.toISOString().split("T")[0]}else r==="month"?(n=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],i=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0]):r==="year"&&(n=new Date(e.getFullYear(),0,1).toISOString().split("T")[0],i=new Date(e.getFullYear(),11,31).toISOString().split("T")[0]);return{start:n,end:i}}window.toggleCustomDates=function(){const r=document.getElementById("exportPeriod").value,e=document.getElementById("customDateRange");r==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")};function i$(){const r=document.getElementById("exportPeriod").value;let e=Ve.entries;if(r!=="all"){const{start:a,end:o}=Sg(r);e=e.filter(c=>c.datum>=a&&c.datum<=o)}e.sort((a,o)=>a.datum!==o.datum?a.datum.localeCompare(o.datum):(a.start||"").localeCompare(o.start||""));const n=[["Datum","Start","Ende","Projekt","Ttigkeit","Stunden","Ort"].join(";"),...e.map(a=>[ou(a.datum),a.start,a.ende,a.projekt||"",a.taetigkeit||"",a.stunden,a.homeoffice?"Homeoffice":"Bro"].join(";"))].join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),s=document.createElement("a");s.href=URL.createObjectURL(i),s.download=`Zeiterfassung_${new Date().toISOString().split("T")[0]}.csv`,s.click()}function s$(){const r=document.getElementById("exportPeriod").value;let e=Ve.entries;if(r!=="all"){const{start:s,end:a}=Sg(r);e=e.filter(o=>o.datum>=s&&o.datum<=a)}e.sort((s,a)=>s.datum!==a.datum?s.datum.localeCompare(a.datum):(s.start||"").localeCompare(a.start||""));const t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=`Zeiterfassung_${new Date().toISOString().split("T")[0]}.json`,i.click()}function a$(){}document.addEventListener("DOMContentLoaded",()=>{pM(),tM(),D7(),q7(),X7(),G7(),t$(),xM()});export{wr as _};
