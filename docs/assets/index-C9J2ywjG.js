(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var x_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5=function(r){const e=[];let t=0;for(let n=0;n<r.length;n++){let i=r.charCodeAt(n);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&n+1<r.length&&(r.charCodeAt(n+1)&64512)===56320?(i=65536+((i&1023)<<10)+(r.charCodeAt(++n)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},s4=function(r){const e=[];let t=0,n=0;for(;t<r.length;){const i=r[t++];if(i<128)e[n++]=String.fromCharCode(i);else if(i>191&&i<224){const s=r[t++];e[n++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=r[t++],a=r[t++],o=r[t++],c=((i&7)<<18|(s&63)<<12|(a&63)<<6|o&63)-65536;e[n++]=String.fromCharCode(55296+(c>>10)),e[n++]=String.fromCharCode(56320+(c&1023))}else{const s=r[t++],a=r[t++];e[n++]=String.fromCharCode((i&15)<<12|(s&63)<<6|a&63)}}return e.join("")},V5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let i=0;i<r.length;i+=3){const s=r[i],a=i+1<r.length,o=a?r[i+1]:0,c=i+2<r.length,u=c?r[i+2]:0,l=s>>2,d=(s&3)<<4|o>>4;let g=(o&15)<<2|u>>6,p=u&63;c||(p=64,a||(g=64)),n.push(t[l],t[d],t[g],t[p])}return n.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(B5(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):s4(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let i=0;i<r.length;){const s=t[r.charAt(i++)],o=i<r.length?t[r.charAt(i)]:0;++i;const u=i<r.length?t[r.charAt(i)]:64;++i;const d=i<r.length?t[r.charAt(i)]:64;if(++i,s==null||o==null||u==null||d==null)throw new a4;const g=s<<2|o>>4;if(n.push(g),u!==64){const p=o<<4&240|u>>2;if(n.push(p),d!==64){const x=u<<6&192|d;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class a4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o4=function(r){const e=B5(r);return V5.encodeByteArray(e,!0)},O0=function(r){return o4(r).replace(/\./g,"")},U5=function(r){try{return V5.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function M0(r,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:r===void 0&&(r={});break;case Array:r=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!c4(t)||(r[t]=M0(r[t],e[t]));return r}function c4(r){return r!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j5(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u4=()=>j5().__FIREBASE_DEFAULTS__,l4=()=>{if(typeof process>"u"||typeof x_>"u")return;const r=x_.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},h4=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&U5(r[1]);return e&&JSON.parse(e)},P1=()=>{try{return u4()||l4()||h4()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},q5=()=>{var r;return(r=P1())===null||r===void 0?void 0:r.config},f4=r=>{var e;return(e=P1())===null||e===void 0?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p4(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},n=e||"demo-project",i=r.iat||0,s=r.sub||r.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},r);return[O0(JSON.stringify(t)),O0(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function m4(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gr())}function N1(){var r;const e=(r=P1())===null||r===void 0?void 0:r.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function g4(){return typeof window<"u"||z5()}function z5(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function v4(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function W5(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function C1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function H5(){const r=Gr();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function $5(){return!N1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ou(){try{return typeof indexedDB=="object"}catch{return!1}}function _4(){return new Promise((r,e)=>{try{let t=!0;const n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(n),r(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function y4(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4="FirebaseError";class Pn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name=w4,Object.setPrototypeOf(this,Pn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ia.prototype.create)}}class Ia{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},i=`${this.service}/${e}`,s=this.errors[e],a=s?x4(s,n):"Error",o=`${this.serviceName}: ${a} (${i}).`;return new Pn(i,o,n)}}function x4(r,e){return r.replace(E4,(t,n)=>{const i=e[n];return i!=null?String(i):`<${n}?>`})}const E4=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E_(r,e){return Object.prototype.hasOwnProperty.call(r,e)}function T4(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function If(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);for(const i of t){if(!n.includes(i))return!1;const s=r[i],a=e[i];if(T_(s)&&T_(a)){if(!If(s,a))return!1}else if(s!==a)return!1}for(const i of n)if(!t.includes(i))return!1;return!0}function T_(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(r){const e=[];for(const[t,n]of Object.entries(r))Array.isArray(n)?n.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function Al(r){const e={};return r.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[i,s]=n.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function tf(r){const e=r.indexOf("?");if(!e)return"";const t=r.indexOf("#",e);return r.substring(e,t>0?t:void 0)}function G5(r,e){const t=new b4(r,e);return t.subscribe.bind(t)}class b4{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let i;if(e===void 0&&t===void 0&&n===void 0)throw new Error("Missing Observer.");A4(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:n},i.next===void 0&&(i.next=Um),i.error===void 0&&(i.error=Um),i.complete===void 0&&(i.complete=Um);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function A4(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Um(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(r){return r&&r._delegate?r._delegate:r}class jn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const n=new d4;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:t});i&&n.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(P4(e))try{this.getOrInitializeService({instanceIdentifier:qc})}catch{}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:i});n.resolve(s)}catch{}}}}clearInstance(e=qc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qc){return this.instances.has(e)}getOptions(e=qc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(s);n===o&&a.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),s=(n=this.onInitCallbacks.get(i))!==null&&n!==void 0?n:new Set;s.add(e),this.onInitCallbacks.set(i,s);const a=this.instances.get(i);return a&&e(a,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:S4(e),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=qc){return this.component?this.component.multipleInstances?e:qc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S4(r){return r===qc?void 0:r}function P4(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new I4(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=[];var Yt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Yt||(Yt={}));const Y5={debug:Yt.DEBUG,verbose:Yt.VERBOSE,info:Yt.INFO,warn:Yt.WARN,error:Yt.ERROR,silent:Yt.SILENT},N4=Yt.INFO,C4={[Yt.DEBUG]:"log",[Yt.VERBOSE]:"log",[Yt.INFO]:"info",[Yt.WARN]:"warn",[Yt.ERROR]:"error"},k4=(r,e,...t)=>{if(e<r.logLevel)return;const n=new Date().toISOString(),i=C4[e];if(i)console[i](`[${n}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class bp{constructor(e){this.name=e,this._logLevel=N4,this._logHandler=k4,this._userLogHandler=null,k1.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Y5[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Yt.DEBUG,...e),this._logHandler(this,Yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Yt.VERBOSE,...e),this._logHandler(this,Yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Yt.INFO,...e),this._logHandler(this,Yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Yt.WARN,...e),this._logHandler(this,Yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Yt.ERROR,...e),this._logHandler(this,Yt.ERROR,...e)}}function R4(r){k1.forEach(e=>{e.setLogLevel(r)})}function L4(r,e){for(const t of k1){let n=null;e&&e.level&&(n=Y5[e.level]),r===null?t.userLogHandler=null:t.userLogHandler=(i,s,...a)=>{const o=a.map(c=>{if(c==null)return null;if(typeof c=="string")return c;if(typeof c=="number"||typeof c=="boolean")return c.toString();if(c instanceof Error)return c.message;try{return JSON.stringify(c)}catch{return null}}).filter(c=>c).join(" ");s>=(n??i.logLevel)&&r({level:Yt[s].toLowerCase(),message:o,args:a,type:i.name})}}}const D4=(r,e)=>e.some(t=>r instanceof t);let b_,A_;function F4(){return b_||(b_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function O4(){return A_||(A_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const X5=new WeakMap,Pg=new WeakMap,J5=new WeakMap,jm=new WeakMap,R1=new WeakMap;function M4(r){const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("success",s),r.removeEventListener("error",a)},s=()=>{t(Ya(r.result)),i()},a=()=>{n(r.error),i()};r.addEventListener("success",s),r.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&X5.set(t,r)}).catch(()=>{}),R1.set(e,r),e}function B4(r){if(Pg.has(r))return;const e=new Promise((t,n)=>{const i=()=>{r.removeEventListener("complete",s),r.removeEventListener("error",a),r.removeEventListener("abort",a)},s=()=>{t(),i()},a=()=>{n(r.error||new DOMException("AbortError","AbortError")),i()};r.addEventListener("complete",s),r.addEventListener("error",a),r.addEventListener("abort",a)});Pg.set(r,e)}let Ng={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Pg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||J5.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ya(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function V4(r){Ng=r(Ng)}function U4(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const n=r.call(qm(this),e,...t);return J5.set(n,e.sort?e.sort():[e]),Ya(n)}:O4().includes(r)?function(...e){return r.apply(qm(this),e),Ya(X5.get(this))}:function(...e){return Ya(r.apply(qm(this),e))}}function j4(r){return typeof r=="function"?U4(r):(r instanceof IDBTransaction&&B4(r),D4(r,F4())?new Proxy(r,Ng):r)}function Ya(r){if(r instanceof IDBRequest)return M4(r);if(jm.has(r))return jm.get(r);const e=j4(r);return e!==r&&(jm.set(r,e),R1.set(e,r)),e}const qm=r=>R1.get(r);function lh(r,e,{blocked:t,upgrade:n,blocking:i,terminated:s}={}){const a=indexedDB.open(r,e),o=Ya(a);return n&&a.addEventListener("upgradeneeded",c=>{n(Ya(a.result),c.oldVersion,c.newVersion,Ya(a.transaction),c)}),t&&a.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),o.then(c=>{s&&c.addEventListener("close",()=>s()),i&&c.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}function Pl(r,{blocked:e}={}){const t=indexedDB.deleteDatabase(r);return e&&t.addEventListener("blocked",n=>e(n.oldVersion,n)),Ya(t).then(()=>{})}const q4=["get","getKey","getAll","getAllKeys","count"],z4=["put","add","delete","clear"],zm=new Map;function I_(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(zm.get(e))return zm.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,i=z4.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(i||q4.includes(t)))return;const s=async function(a,...o){const c=this.transaction(a,i?"readwrite":"readonly");let u=c.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),i&&c.done]))[0]};return zm.set(e,s),s}V4(r=>({...r,get:(e,t,n)=>I_(e,t)||r.get(e,t,n),has:(e,t)=>!!I_(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W4{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(H4(t)){const n=t.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(t=>t).join(" ")}}function H4(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const B0="@firebase/app",Cg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=new bp("@firebase/app"),$4="@firebase/app-compat",G4="@firebase/analytics-compat",K4="@firebase/analytics",Y4="@firebase/app-check-compat",X4="@firebase/app-check",J4="@firebase/auth",Q4="@firebase/auth-compat",Z4="@firebase/database",e3="@firebase/data-connect",t3="@firebase/database-compat",r3="@firebase/functions",n3="@firebase/functions-compat",i3="@firebase/installations",s3="@firebase/installations-compat",a3="@firebase/messaging",o3="@firebase/messaging-compat",c3="@firebase/performance",u3="@firebase/performance-compat",l3="@firebase/remote-config",h3="@firebase/remote-config-compat",f3="@firebase/storage",d3="@firebase/storage-compat",p3="@firebase/firestore",m3="@firebase/vertexai-preview",g3="@firebase/firestore-compat",v3="firebase",_3="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="[DEFAULT]",y3={[B0]:"fire-core",[$4]:"fire-core-compat",[K4]:"fire-analytics",[G4]:"fire-analytics-compat",[X4]:"fire-app-check",[Y4]:"fire-app-check-compat",[J4]:"fire-auth",[Q4]:"fire-auth-compat",[Z4]:"fire-rtdb",[e3]:"fire-data-connect",[t3]:"fire-rtdb-compat",[r3]:"fire-fn",[n3]:"fire-fn-compat",[i3]:"fire-iid",[s3]:"fire-iid-compat",[a3]:"fire-fcm",[o3]:"fire-fcm-compat",[c3]:"fire-perf",[u3]:"fire-perf-compat",[l3]:"fire-rc",[h3]:"fire-rc-compat",[f3]:"fire-gcs",[d3]:"fire-gcs-compat",[p3]:"fire-fst",[g3]:"fire-fst-compat",[m3]:"fire-vertex","fire-js":"fire-js",[v3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rc=new Map,Wl=new Map,Hl=new Map;function Sf(r,e){try{r.container.addComponent(e)}catch(t){eo.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Q5(r,e){r.container.addOrOverwriteComponent(e)}function Ki(r){const e=r.name;if(Hl.has(e))return eo.debug(`There were multiple attempts to register component ${e}.`),!1;Hl.set(e,r);for(const t of rc.values())Sf(t,r);for(const t of Wl.values())Sf(t,r);return!0}function Ap(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function w3(r,e,t=tc){Ap(r,e).clearInstance(t)}function Z5(r){return r.options!==void 0}function en(r){return r.settings!==void 0}function x3(){Hl.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ss=new Ia("app","Firebase",E3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ex=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new jn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ss.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3 extends ex{constructor(e,t,n,i){const s=t.automaticDataCollectionEnabled!==void 0?t.automaticDataCollectionEnabled:!1,a={name:n,automaticDataCollectionEnabled:s};if(e.apiKey!==void 0)super(e,a,i);else{const o=e;super(o.options,a,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:s},t),this._finalizationRegistry=null,typeof FinalizationRegistry<"u"&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,ei(B0,Cg,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,e!==void 0&&this._finalizationRegistry!==null&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){D1(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ss.create("server-app-deleted")}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gc=_3;function L1(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const n=Object.assign({name:tc,automaticDataCollectionEnabled:!1},e),i=n.name;if(typeof i!="string"||!i)throw Ss.create("bad-app-name",{appName:String(i)});if(t||(t=q5()),!t)throw Ss.create("no-options");const s=rc.get(i);if(s){if(If(t,s.options)&&If(n,s.config))return s;throw Ss.create("duplicate-app",{appName:i})}const a=new K5(i);for(const c of Hl.values())a.addComponent(c);const o=new ex(t,n,a);return rc.set(i,o),o}function b3(r,e){if(g4()&&!z5())throw Ss.create("invalid-server-app-environment");e.automaticDataCollectionEnabled===void 0&&(e.automaticDataCollectionEnabled=!1);let t;Z5(r)?t=r.options:t=r;const n=Object.assign(Object.assign({},e),t);n.releaseOnDeref!==void 0&&delete n.releaseOnDeref;const i=u=>[...u].reduce((l,d)=>Math.imul(31,l)+d.charCodeAt(0)|0,0);if(e.releaseOnDeref!==void 0&&typeof FinalizationRegistry>"u")throw Ss.create("finalization-registry-not-supported",{});const s=""+i(JSON.stringify(n)),a=Wl.get(s);if(a)return a.incRefCount(e.releaseOnDeref),a;const o=new K5(s);for(const u of Hl.values())o.addComponent(u);const c=new T3(t,e,s,o);return Wl.set(s,c),c}function A3(r=tc){const e=rc.get(r);if(!e&&r===tc&&q5())return L1();if(!e)throw Ss.create("no-app",{appName:r});return e}function I3(){return Array.from(rc.values())}async function D1(r){let e=!1;const t=r.name;rc.has(t)?(e=!0,rc.delete(t)):Wl.has(t)&&r.decRefCount()<=0&&(Wl.delete(t),e=!0),e&&(await Promise.all(r.container.getProviders().map(n=>n.delete())),r.isDeleted=!0)}function ei(r,e,t){var n;let i=(n=y3[r])!==null&&n!==void 0?n:r;t&&(i+=`-${t}`);const s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&a&&o.push("and"),a&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),eo.warn(o.join(" "));return}Ki(new jn(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}function tx(r,e){if(r!==null&&typeof r!="function")throw Ss.create("invalid-log-argument");L4(r,e)}function rx(r){R4(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3="firebase-heartbeat-database",P3=1,Pf="firebase-heartbeat-store";let Wm=null;function nx(){return Wm||(Wm=lh(S3,P3,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Pf)}catch(t){console.warn(t)}}}}).catch(r=>{throw Ss.create("idb-open",{originalErrorMessage:r.message})})),Wm}async function N3(r){try{const t=(await nx()).transaction(Pf),n=await t.objectStore(Pf).get(ix(r));return await t.done,n}catch(e){if(e instanceof Pn)eo.warn(e.message);else{const t=Ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});eo.warn(t.message)}}}async function S_(r,e){try{const n=(await nx()).transaction(Pf,"readwrite");await n.objectStore(Pf).put(e,ix(r)),await n.done}catch(t){if(t instanceof Pn)eo.warn(t.message);else{const n=Ss.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});eo.warn(n.message)}}}function ix(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=1024,k3=30*24*60*60*1e3;class R3{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new D3(t),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,t;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=P_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(a=>a.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const o=new Date(a.date).valueOf();return Date.now()-o<=k3}),this._storage.overwrite(this._heartbeatsCache))}catch(n){eo.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=P_(),{heartbeatsToSend:n,unsentEntries:i}=L3(this._heartbeatsCache.heartbeats),s=O0(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return eo.warn(t),""}}}function P_(){return new Date().toISOString().substring(0,10)}function L3(r,e=C3){const t=[];let n=r.slice();for(const i of r){const s=t.find(a=>a.agent===i.agent);if(s){if(s.dates.push(i.date),N_(t)>e){s.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),N_(t)>e){t.pop();break}n=n.slice(1)}return{heartbeatsToSend:t,unsentEntries:n}}class D3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ou()?_4().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await N3(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const i=await this.read();return S_(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function N_(r){return O0(JSON.stringify({version:2,heartbeats:r})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(r){Ki(new jn("platform-logger",e=>new W4(e),"PRIVATE")),Ki(new jn("heartbeat",e=>new R3(e),"PRIVATE")),ei(B0,Cg,r),ei(B0,Cg,"esm2017"),ei("fire-js","")}F3("");const O3=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Pn,SDK_VERSION:gc,_DEFAULT_ENTRY_NAME:tc,_addComponent:Sf,_addOrOverwriteComponent:Q5,_apps:rc,_clearComponents:x3,_components:Hl,_getProvider:Ap,_isFirebaseApp:Z5,_isFirebaseServerApp:en,_registerComponent:Ki,_removeServiceInstance:w3,_serverApps:Wl,deleteApp:D1,getApp:A3,getApps:I3,initializeApp:L1,initializeServerApp:b3,onLog:tx,registerVersion:ei,setLogLevel:rx},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,t){this._delegate=e,this.firebase=t,Sf(e,new jn("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),D1(this._delegate)))}_getService(e,t=tc){var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((n=i.getComponent())===null||n===void 0?void 0:n.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=tc){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Sf(this._delegate,e)}_addOrOverwriteComponent(e){Q5(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B3={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},C_=new Ia("app-compat","Firebase",B3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V3(r){const e={},t={__esModule:!0,initializeApp:s,app:i,registerVersion:ei,setLogLevel:rx,onLog:tx,apps:null,SDK_VERSION:gc,INTERNAL:{registerComponent:o,removeApp:n,useAsService:c,modularAPIs:O3}};t.default=t,Object.defineProperty(t,"apps",{get:a});function n(u){delete e[u]}function i(u){if(u=u||tc,!E_(e,u))throw C_.create("no-app",{appName:u});return e[u]}i.App=r;function s(u,l={}){const d=L1(u,l);if(E_(e,d.name))return e[d.name];const g=new r(d,t);return e[d.name]=g,g}function a(){return Object.keys(e).map(u=>e[u])}function o(u){const l=u.name,d=l.replace("-compat","");if(Ki(u)&&u.type==="PUBLIC"){const g=(p=i())=>{if(typeof p[d]!="function")throw C_.create("invalid-app-argument",{appName:l});return p[d]()};u.serviceProps!==void 0&&M0(g,u.serviceProps),t[d]=g,r.prototype[d]=function(...p){return this._getService.bind(this,l).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?t[d]:null}function c(u,l){return l==="serverAuth"?null:l}return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sx(){const r=V3(M3);r.INTERNAL=Object.assign(Object.assign({},r.INTERNAL),{createFirebaseNamespace:sx,extendNamespace:e,createSubscribe:G5,ErrorFactory:Ia,deepExtend:M0});function e(t){M0(r,t)}return r}const U3=sx();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k_=new bp("@firebase/app-compat"),j3="@firebase/app-compat",q3="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3(r){ei(j3,q3,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const r=j5();if(r.firebase!==void 0){k_.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const e=r.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&k_.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const pn=U3;z3();var W3="firebase",H3="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.registerVersion(W3,H3,"app-compat");function F1(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}const Wh={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},al={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function ax(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const G3=$3,K3=ax,ox=new Ia("auth","Firebase",ax());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new bp("@firebase/auth");function Y3(r,...e){V0.logLevel<=Yt.WARN&&V0.warn(`Auth (${gc}): ${r}`,...e)}function w0(r,...e){V0.logLevel<=Yt.ERROR&&V0.error(`Auth (${gc}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(r,...e){throw M1(r,...e)}function Nn(r,...e){return M1(r,...e)}function O1(r,e,t){const n=Object.assign(Object.assign({},K3()),{[e]:t});return new Ia("auth","Firebase",n).create(e,{appName:r.name})}function Un(r){return O1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hh(r,e,t){const n=t;if(!(e instanceof n))throw n.name!==e.constructor.name&&ni(r,"argument-error"),O1(r,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function M1(r,...e){if(typeof r!="string"){const t=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=r.name),r._errorFactory.create(t,...n)}return ox.create(r,...e)}function tt(r,e,...t){if(!r)throw M1(e,...t)}function da(r){const e="INTERNAL ASSERTION FAILED: "+r;throw w0(e),new Error(e)}function Ks(r,e){r||da(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.href)||""}function B1(){return R_()==="http:"||R_()==="https:"}function R_(){var r;return typeof self<"u"&&((r=self.location)===null||r===void 0?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B1()||W5()||"connection"in navigator)?navigator.onLine:!0}function J3(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t){this.shortDelay=e,this.longDelay=t,Ks(t>e,"Short delay should be less than long delay!"),this.isMobile=m4()||C1()}get(){return X3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V1(r,e){Ks(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;da("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;da("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;da("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new id(3e4,6e4);function sn(r,e){return r.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:r.tenantId}):e}async function an(r,e,t,n,i={}){return ux(r,i,async()=>{let s={},a={};n&&(e==="GET"?a=n:s={body:JSON.stringify(n)});const o=uh(Object.assign({key:r.config.apiKey},a)).slice(1),c=await r._getAdditionalHeaders();c["Content-Type"]="application/json",r.languageCode&&(c["X-Firebase-Locale"]=r.languageCode);const u=Object.assign({method:e,headers:c},s);return v4()||(u.referrerPolicy="no-referrer"),cx.fetch()(lx(r,r.config.apiHost,t,o),u)})}async function ux(r,e,t){r._canInitEmulator=!1;const n=Object.assign(Object.assign({},Q3),e);try{const i=new tP(r),s=await Promise.race([t(),i.promise]);i.clearNetworkTimeout();const a=await s.json();if("needConfirmation"in a)throw rf(r,"account-exists-with-different-credential",a);if(s.ok&&!("errorMessage"in a))return a;{const o=s.ok?a.errorMessage:a.error.message,[c,u]=o.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw rf(r,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw rf(r,"email-already-in-use",a);if(c==="USER_DISABLED")throw rf(r,"user-disabled",a);const l=n[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw O1(r,l,u);ni(r,l)}}catch(i){if(i instanceof Pn)throw i;ni(r,"network-request-failed",{message:String(i)})}}async function ao(r,e,t,n,i={}){const s=await an(r,e,t,n,i);return"mfaPendingCredential"in s&&ni(r,"multi-factor-auth-required",{_serverResponse:s}),s}function lx(r,e,t,n){const i=`${e}${t}?${n}`;return r.config.emulator?V1(r.config,i):`${r.config.apiScheme}://${i}`}function eP(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class tP{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,n)=>{this.timer=setTimeout(()=>n(Nn(this.auth,"network-request-failed")),Z3.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rf(r,e,t){const n={appName:r.name};t.email&&(n.email=t.email),t.phoneNumber&&(n.phoneNumber=t.phoneNumber);const i=Nn(r,e,n);return i.customData._tokenResponse=t,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L_(r){return r!==void 0&&r.getResponse!==void 0}function D_(r){return r!==void 0&&r.enterprise!==void 0}class rP{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return eP(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nP(r){return(await an(r,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function iP(r,e){return an(r,"GET","/v2/recaptchaConfig",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sP(r,e){return an(r,"POST","/v1/accounts:delete",e)}async function aP(r,e){return an(r,"POST","/v1/accounts:update",e)}async function hx(r,e){return an(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lf(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function oP(r,e=!1){const t=St(r),n=await t.getIdToken(e),i=Ip(n);tt(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,a=s==null?void 0:s.sign_in_provider;return{claims:i,token:n,authTime:lf(Hm(i.auth_time)),issuedAtTime:lf(Hm(i.iat)),expirationTime:lf(Hm(i.exp)),signInProvider:a||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Hm(r){return Number(r)*1e3}function Ip(r){const[e,t,n]=r.split(".");if(e===void 0||t===void 0||n===void 0)return w0("JWT malformed, contained fewer than 3 sections"),null;try{const i=U5(t);return i?JSON.parse(i):(w0("Failed to decode base64 JWT payload"),null)}catch(i){return w0("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function F_(r){const e=Ip(r);return tt(e,"internal-error"),tt(typeof e.exp<"u","internal-error"),tt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function to(r,e,t=!1){if(t)return e;try{return await e}catch(n){throw n instanceof Pn&&cP(n)&&r.auth.currentUser===r&&await r.auth.signOut(),n}}function cP({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uP{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=lf(this.lastLoginAt),this.creationTime=lf(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cf(r){var e;const t=r.auth,n=await r.getIdToken(),i=await to(r,hx(t,{idToken:n}));tt(i==null?void 0:i.users.length,t,"internal-error");const s=i.users[0];r._notifyReloadListener(s);const a=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?fx(s.providerUserInfo):[],o=hP(r.providerData,a),c=r.isAnonymous,u=!(r.email&&s.passwordHash)&&!(o!=null&&o.length),l=c?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new kg(s.createdAt,s.lastLoginAt),isAnonymous:l};Object.assign(r,d)}async function lP(r){const e=St(r);await Cf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hP(r,e){return[...r.filter(n=>!e.some(i=>i.providerId===n.providerId)),...e]}function fx(r){return r.map(e=>{var{providerId:t}=e,n=F1(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fP(r,e){const t=await ux(r,{},async()=>{const n=uh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=r.config,a=lx(r,i,"/v1/token",`key=${s}`),o=await r._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",cx.fetch()(a,{method:"POST",headers:o,body:n})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function dP(r,e){return an(r,"POST","/v2/accounts:revokeToken",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){tt(e.idToken,"internal-error"),tt(typeof e.idToken<"u","internal-error"),tt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):F_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){tt(e.length!==0,"internal-error");const t=F_(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(tt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await fP(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:s}=t,a=new Nl;return n&&(tt(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),i&&(tt(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),s&&(tt(typeof s=="number","internal-error",{appName:e}),a.expirationTime=s),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(r,e){tt(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class $a{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,s=F1(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new uP(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new kg(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await to(this,this.stsTokenManager.getToken(this.auth,e));return tt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return oP(this,e)}reload(){return lP(this)}_assign(e){this!==e&&(tt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $a(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){tt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Cf(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(en(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await to(this,sP(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,s,a,o,c,u,l;const d=(n=t.displayName)!==null&&n!==void 0?n:void 0,g=(i=t.email)!==null&&i!==void 0?i:void 0,p=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(a=t.photoURL)!==null&&a!==void 0?a:void 0,_=(o=t.tenantId)!==null&&o!==void 0?o:void 0,E=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,P=(u=t.createdAt)!==null&&u!==void 0?u:void 0,L=(l=t.lastLoginAt)!==null&&l!==void 0?l:void 0,{uid:M,emailVerified:K,isAnonymous:ie,providerData:oe,stsTokenManager:N}=t;tt(M&&N,e,"internal-error");const A=Nl.fromJSON(this.name,N);tt(typeof M=="string",e,"internal-error"),Uo(d,e.name),Uo(g,e.name),tt(typeof K=="boolean",e,"internal-error"),tt(typeof ie=="boolean",e,"internal-error"),Uo(p,e.name),Uo(x,e.name),Uo(_,e.name),Uo(E,e.name),Uo(P,e.name),Uo(L,e.name);const k=new $a({uid:M,auth:e,email:g,emailVerified:K,displayName:d,isAnonymous:ie,photoURL:x,phoneNumber:p,tenantId:_,stsTokenManager:A,createdAt:P,lastLoginAt:L});return oe&&Array.isArray(oe)&&(k.providerData=oe.map(V=>Object.assign({},V))),E&&(k._redirectEventId=E),k}static async _fromIdTokenResponse(e,t,n=!1){const i=new Nl;i.updateFromServerResponse(t);const s=new $a({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Cf(s),s}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];tt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?fx(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),o=new Nl;o.updateFromIdToken(n);const c=new $a({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:a}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new kg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_=new Map;function fs(r){Ks(r instanceof Function,"Expected a class definition");let e=O_.get(r);return e?(Ks(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,O_.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dx.type="NONE";const $l=dx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(r,e,t){return`firebase:${r}:${e}:${t}`}class Cl{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:s}=this.auth;this.fullUserKey=ru(this.userKey,i.apiKey,s),this.fullPersistenceKey=ru("persistence",i.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?$a._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Cl(fs($l),e,n);const i=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||fs($l);const a=ru(n,e.config.apiKey,e.name);let o=null;for(const u of t)try{const l=await u._get(a);if(l){const d=$a._fromJSON(e,l);u!==s&&(o=d),s=u;break}}catch{}const c=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new Cl(s,e,n):(s=c[0],o&&await s._set(a,o.toJSON()),await Promise.all(t.map(async u=>{if(u!==s)try{await u._remove(a)}catch{}})),new Cl(s,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(px(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(_x(e))return"Blackberry";if(yx(e))return"Webos";if(mx(e))return"Safari";if((e.includes("chrome/")||gx(e))&&!e.includes("edge/"))return"Chrome";if(sd(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=r.match(t);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function px(r=Gr()){return/firefox\//i.test(r)}function mx(r=Gr()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function gx(r=Gr()){return/crios\//i.test(r)}function vx(r=Gr()){return/iemobile/i.test(r)}function sd(r=Gr()){return/android/i.test(r)}function _x(r=Gr()){return/blackberry/i.test(r)}function yx(r=Gr()){return/webos/i.test(r)}function ad(r=Gr()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function pP(r=Gr()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(r)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(r)}function mP(r=Gr()){var e;return ad(r)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gP(){return H5()&&document.documentMode===10}function wx(r=Gr()){return ad(r)||sd(r)||yx(r)||_x(r)||/windows phone/i.test(r)||vx(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(r,e=[]){let t;switch(r){case"Browser":t=M_(Gr());break;case"Worker":t=`${M_(Gr())}-${r}`;break;default:t=r}const n=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${gc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=s=>new Promise((a,o)=>{try{const c=e(s);a(c)}catch(c){o(c)}});n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(r,e={}){return an(r,"GET","/v2/passwordPolicy",sn(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yP=6;class wP{constructor(e){var t,n,i,s;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:yP,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,s,a,o;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(n=c.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(i=c.containsLowercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(a=c.containsNumericCharacter)!==null&&a!==void 0?a:!0),c.isValid&&(c.isValid=(o=c.containsNonAlphanumericCharacter)!==null&&o!==void 0?o:!0),c}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let n;for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xP{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new B_(this),this.idTokenSubscription=new B_(this),this.beforeStateQueue=new vP(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ox,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=fs(t)),this._initializationPromise=this.queue(async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await Cl.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await hx(this,{idToken:e}),n=await $a._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(en(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(o=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(o,o))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,o=i==null?void 0:i._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===o)&&(c!=null&&c.user)&&(i=c.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return tt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Cf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=J3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(en(this.app))return Promise.reject(Un(this));const t=e?St(e):null;return t&&tt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&tt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return en(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return en(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await _P(this),t=new wP(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ia("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(n.tenantId=this.tenantId),await dP(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&fs(e)||this._popupRedirectResolver;tt(t,this,"argument-error"),this.redirectPersistenceManager=await Cl.create(this,[fs(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let a=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(tt(o,this,"internal-error"),o.then(()=>{a||s(this.currentUser)}),typeof t=="function"){const c=e.addObserver(t,n,i);return()=>{a=!0,c()}}else{const c=e.addObserver(t);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return tt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&Y3(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function rn(r){return St(r)}class B_{constructor(e){this.auth=e,this.observer=null,this.addObserver=G5(t=>this.observer=t)}get next(){return tt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function EP(r){od=r}function U1(r){return od.loadJS(r)}function TP(){return od.recaptchaV2Script}function bP(){return od.recaptchaEnterpriseScript}function AP(){return od.gapiScript}function Ex(r){return`__${r}${Math.floor(Math.random()*1e6)}`}const IP="recaptcha-enterprise",SP="NO_RECAPTCHA";class PP{constructor(e){this.type=IP,this.auth=rn(e)}async verify(e="verify",t=!1){async function n(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(a,o)=>{iP(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)o(new Error("recaptcha Enterprise site key undefined"));else{const u=new rP(c);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,a(u.siteKey)}}).catch(c=>{o(c)})})}function i(s,a,o){const c=window.grecaptcha;D_(c)?c.enterprise.ready(()=>{c.enterprise.execute(s,{action:e}).then(u=>{a(u)}).catch(()=>{a(SP)})}):o(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,a)=>{n(this.auth).then(o=>{if(!t&&D_(window.grecaptcha))i(o,s,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let c=bP();c.length!==0&&(c+=o),U1(c).then(()=>{i(o,s,a)}).catch(u=>{a(u)})}}).catch(o=>{a(o)})})}}async function V_(r,e,t,n=!1){const i=new PP(r);let s;try{s=await i.verify(t)}catch{s=await i.verify(t,!0)}const a=Object.assign({},e);return n?Object.assign(a,{captchaResp:s}):Object.assign(a,{captchaResponse:s}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function kf(r,e,t,n){var i;if(!((i=r._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await V_(r,e,t,t==="getOobCode");return n(r,s)}else return n(r,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await V_(r,e,t,t==="getOobCode");return n(r,a)}else return Promise.reject(s)})}function NP(r,e){const t=(e==null?void 0:e.persistence)||[],n=(Array.isArray(t)?t:[t]).map(fs);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function CP(r,e,t){const n=rn(r);tt(n._canInitEmulator,n,"emulator-config-failed"),tt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const i=!!(t!=null&&t.disableWarnings),s=Tx(e),{host:a,port:o}=kP(e),c=o===null?"":`:${o}`;n.config.emulator={url:`${s}//${a}${c}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||RP()}function Tx(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function kP(r){const e=Tx(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const n=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(n);if(i){const s=i[1];return{host:s,port:U_(n.substr(s.length+1))}}else{const[s,a]=n.split(":");return{host:s,port:U_(a)}}}function U_(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function RP(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return da("not implemented")}_getIdTokenResponse(e){return da("not implemented")}_linkToIdToken(e,t){return da("not implemented")}_getReauthenticationResolver(e){return da("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bx(r,e){return an(r,"POST","/v1/accounts:resetPassword",sn(r,e))}async function LP(r,e){return an(r,"POST","/v1/accounts:update",e)}async function DP(r,e){return an(r,"POST","/v1/accounts:signUp",e)}async function FP(r,e){return an(r,"POST","/v1/accounts:update",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OP(r,e){return ao(r,"POST","/v1/accounts:signInWithPassword",sn(r,e))}async function Sp(r,e){return an(r,"POST","/v1/accounts:sendOobCode",sn(r,e))}async function MP(r,e){return Sp(r,e)}async function BP(r,e){return Sp(r,e)}async function VP(r,e){return Sp(r,e)}async function UP(r,e){return Sp(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jP(r,e){return ao(r,"POST","/v1/accounts:signInWithEmailLink",sn(r,e))}async function qP(r,e){return ao(r,"POST","/v1/accounts:signInWithEmailLink",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rf extends fh{constructor(e,t,n,i=null){super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Rf(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Rf(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kf(e,t,"signInWithPassword",OP);case"emailLink":return jP(e,{email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const n={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return kf(e,n,"signUpPassword",DP);case"emailLink":return qP(e,{idToken:t,email:this._email,oobCode:this._password});default:ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(r,e){return ao(r,"POST","/v1/accounts:signInWithIdp",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="http://localhost";class xa extends fh{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new xa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,s=F1(t,["providerId","signInMethod"]);if(!n||!i)return null;const a=new xa(n,i);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){const t=this.buildRequest();return Xa(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Xa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xa(e,t)}buildRequest(){const e={requestUri:zP,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=uh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WP(r,e){return an(r,"POST","/v1/accounts:sendVerificationCode",sn(r,e))}async function HP(r,e){return ao(r,"POST","/v1/accounts:signInWithPhoneNumber",sn(r,e))}async function $P(r,e){const t=await ao(r,"POST","/v1/accounts:signInWithPhoneNumber",sn(r,e));if(t.temporaryProof)throw rf(r,"account-exists-with-different-credential",t);return t}const GP={USER_NOT_FOUND:"user-not-found"};async function KP(r,e){const t=Object.assign(Object.assign({},e),{operation:"REAUTH"});return ao(r,"POST","/v1/accounts:signInWithPhoneNumber",sn(r,t),GP)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu extends fh{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new nu({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new nu({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return HP(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return $P(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return KP(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s}=e;return!n&&!t&&!i&&!s?null:new nu({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YP(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function XP(r){const e=Al(tf(r)).link,t=e?Al(tf(e)).deep_link_id:null,n=Al(tf(r)).deep_link_id;return(n?Al(tf(n)).link:null)||n||t||e||r}class Pp{constructor(e){var t,n,i,s,a,o;const c=Al(tf(e)),u=(t=c.apiKey)!==null&&t!==void 0?t:null,l=(n=c.oobCode)!==null&&n!==void 0?n:null,d=YP((i=c.mode)!==null&&i!==void 0?i:null);tt(u&&l&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=l,this.continueUrl=(s=c.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(a=c.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(o=c.tenantId)!==null&&o!==void 0?o:null}static parseLink(e){const t=XP(e);try{return new Pp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc{constructor(){this.providerId=vc.PROVIDER_ID}static credential(e,t){return Rf._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Pp.parseLink(t);return tt(n,"argument-error"),Rf._fromEmailAndCode(e,n.code,n.tenantId)}}vc.PROVIDER_ID="password";vc.EMAIL_PASSWORD_SIGN_IN_METHOD="password";vc.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh extends oo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class kl extends dh{static credentialFromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;return tt("providerId"in t&&"signInMethod"in t,"argument-error"),xa._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return tt(e.idToken||e.accessToken,"argument-error"),xa._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return kl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return kl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:s,nonce:a,providerId:o}=e;if(!n&&!i&&!t&&!s||!o)return null;try{return new kl(o)._credential({idToken:t,accessToken:n,nonce:a,pendingToken:s})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua extends dh{constructor(){super("facebook.com")}static credential(e){return xa._fromParams({providerId:ua.PROVIDER_ID,signInMethod:ua.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ua.credentialFromTaggedObject(e)}static credentialFromError(e){return ua.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ua.credential(e.oauthAccessToken)}catch{return null}}}ua.FACEBOOK_SIGN_IN_METHOD="facebook.com";ua.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends dh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return xa._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return la.credential(t,n)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha extends dh{constructor(){super("github.com")}static credential(e){return xa._fromParams({providerId:ha.PROVIDER_ID,signInMethod:ha.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ha.credentialFromTaggedObject(e)}static credentialFromError(e){return ha.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ha.credential(e.oauthAccessToken)}catch{return null}}}ha.GITHUB_SIGN_IN_METHOD="github.com";ha.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JP="http://localhost";class Gl extends fh{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){const t=this.buildRequest();return Xa(e,t)}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Xa(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xa(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:s}=t;return!n||!i||!s||n!==i?null:new Gl(n,s)}static _create(e,t){return new Gl(e,t)}buildRequest(){return{requestUri:JP,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP="saml.";class U0 extends oo{constructor(e){tt(e.startsWith(QP),"argument-error"),super(e)}static credentialFromResult(e){return U0.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return U0.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Gl.fromJSON(e);return tt(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Gl._create(n,t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends dh{constructor(){super("twitter.com")}static credential(e,t){return xa._fromParams({providerId:fa.PROVIDER_ID,signInMethod:fa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return fa.credentialFromTaggedObject(e)}static credentialFromError(e){return fa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return fa.credential(t,n)}catch{return null}}}fa.TWITTER_SIGN_IN_METHOD="twitter.com";fa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ax(r,e){return ao(r,"POST","/v1/accounts:signUp",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,i=!1){const s=await $a._fromIdTokenResponse(e,n,i),a=j_(n);return new Ps({user:s,providerId:a,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=j_(n);return new Ps({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function j_(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZP(r){var e;if(en(r.app))return Promise.reject(Un(r));const t=rn(r);if(await t._initializationPromise,!((e=t.currentUser)===null||e===void 0)&&e.isAnonymous)return new Ps({user:t.currentUser,providerId:null,operationType:"signIn"});const n=await Ax(t,{returnSecureToken:!0}),i=await Ps._fromIdTokenResponse(t,"signIn",n,!0);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j0 extends Pn{constructor(e,t,n,i){var s;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,j0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new j0(e,t,n,i)}}function Ix(r,e,t,n){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?j0._fromErrorAndOperation(r,s,e,n):s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sx(r){return new Set(r.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eN(r,e){const t=St(r);await Np(!0,t,e);const{providerUserInfo:n}=await aP(t.auth,{idToken:await t.getIdToken(),deleteProvider:[e]}),i=Sx(n||[]);return t.providerData=t.providerData.filter(s=>i.has(s.providerId)),i.has("phone")||(t.phoneNumber=null),await t.auth._persistUserIfCurrent(t),t}async function j1(r,e,t=!1){const n=await to(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return Ps._forOperation(r,"link",n)}async function Np(r,e,t){await Cf(e);const n=Sx(e.providerData),i=r===!1?"provider-already-linked":"no-such-provider";tt(n.has(t)===r,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Px(r,e,t=!1){const{auth:n}=r;if(en(n.app))return Promise.reject(Un(n));const i="reauthenticate";try{const s=await to(r,Ix(n,i,e,r),t);tt(s.idToken,n,"internal-error");const a=Ip(s.idToken);tt(a,n,"internal-error");const{sub:o}=a;return tt(r.uid===o,n,"user-mismatch"),Ps._forOperation(r,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ni(n,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(r,e,t=!1){if(en(r.app))return Promise.reject(Un(r));const n="signIn",i=await Ix(r,n,e),s=await Ps._fromIdTokenResponse(r,n,i);return t||await r._updateCurrentUser(s.user),s}async function Cp(r,e){return Nx(rn(r),e)}async function Cx(r,e){const t=St(r);return await Np(!1,t,e.providerId),j1(t,e)}async function kx(r,e){return Px(St(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(r,e){return ao(r,"POST","/v1/accounts:signInWithCustomToken",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rN(r,e){if(en(r.app))return Promise.reject(Un(r));const t=rn(r),n=await tN(t,{token:e,returnSecureToken:!0}),i=await Ps._fromIdTokenResponse(t,"signIn",n);return await t._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?q1._fromServerResponse(e,t):"totpInfo"in t?z1._fromServerResponse(e,t):ni(e,"internal-error")}}class q1 extends cd{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new q1(t)}}class z1 extends cd{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new z1(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(r,e,t){var n;tt(((n=t.url)===null||n===void 0?void 0:n.length)>0,r,"invalid-continue-uri"),tt(typeof t.dynamicLinkDomain>"u"||t.dynamicLinkDomain.length>0,r,"invalid-dynamic-link-domain"),e.continueUrl=t.url,e.dynamicLinkDomain=t.dynamicLinkDomain,e.canHandleCodeInApp=t.handleCodeInApp,t.iOS&&(tt(t.iOS.bundleId.length>0,r,"missing-ios-bundle-id"),e.iOSBundleId=t.iOS.bundleId),t.android&&(tt(t.android.packageName.length>0,r,"missing-android-pkg-name"),e.androidInstallApp=t.android.installApp,e.androidMinimumVersionCode=t.android.minimumVersion,e.androidPackageName=t.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r){const e=rn(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function nN(r,e,t){const n=rn(r),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};t&&kp(n,i,t),await kf(n,i,"getOobCode",BP)}async function iN(r,e,t){await bx(St(r),{oobCode:e,newPassword:t}).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&W1(r),n})}async function sN(r,e){await FP(St(r),{oobCode:e})}async function Rx(r,e){const t=St(r),n=await bx(t,{oobCode:e}),i=n.requestType;switch(tt(i,t,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":tt(n.newEmail,t,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":tt(n.mfaInfo,t,"internal-error");default:tt(n.email,t,"internal-error")}let s=null;return n.mfaInfo&&(s=cd._fromServerResponse(rn(t),n.mfaInfo)),{data:{email:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.newEmail:n.email)||null,previousEmail:(n.requestType==="VERIFY_AND_CHANGE_EMAIL"?n.email:n.newEmail)||null,multiFactorInfo:s},operation:i}}async function aN(r,e){const{data:t}=await Rx(St(r),e);return t.email}async function oN(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=rn(r),a=await kf(n,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ax).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&W1(r),c}),o=await Ps._fromIdTokenResponse(n,"signIn",a);return await n._updateCurrentUser(o.user),o}function cN(r,e,t){return en(r.app)?Promise.reject(Un(r)):Cp(St(r),vc.credential(e,t)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&W1(r),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(r,e,t){const n=rn(r),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(a,o){tt(o.handleCodeInApp,n,"argument-error"),o&&kp(n,a,o)}s(i,t),await kf(n,i,"getOobCode",VP)}function lN(r,e){const t=Pp.parseLink(e);return(t==null?void 0:t.operation)==="EMAIL_SIGNIN"}async function hN(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=St(r),i=vc.credentialWithLink(e,t||Nf());return tt(i._tenantId===(n.tenantId||null),n,"tenant-id-mismatch"),Cp(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fN(r,e){return an(r,"POST","/v1/accounts:createAuthUri",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dN(r,e){const t=B1()?Nf():"http://localhost",n={identifier:e,continueUri:t},{signinMethods:i}=await fN(St(r),n);return i||[]}async function pN(r,e){const t=St(r),i={requestType:"VERIFY_EMAIL",idToken:await r.getIdToken()};e&&kp(t.auth,i,e);const{email:s}=await MP(t.auth,i);s!==r.email&&await r.reload()}async function mN(r,e,t){const n=St(r),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await r.getIdToken(),newEmail:e};t&&kp(n.auth,s,t);const{email:a}=await UP(n.auth,s);a!==r.email&&await r.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gN(r,e){return an(r,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vN(r,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const n=St(r),s={idToken:await n.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},a=await to(n,gN(n.auth,s));n.displayName=a.displayName||null,n.photoURL=a.photoUrl||null;const o=n.providerData.find(({providerId:c})=>c==="password");o&&(o.displayName=n.displayName,o.photoURL=n.photoURL),await n._updateTokensIfNecessary(a)}function _N(r,e){const t=St(r);return en(t.auth.app)?Promise.reject(Un(t.auth)):Lx(t,e,null)}function yN(r,e){return Lx(St(r),null,e)}async function Lx(r,e,t){const{auth:n}=r,s={idToken:await r.getIdToken(),returnSecureToken:!0};e&&(s.email=e),t&&(s.password=t);const a=await to(r,LP(n,s));await r._updateTokensIfNecessary(a,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wN(r){var e,t;if(!r)return null;const{providerId:n}=r,i=r.rawUserInfo?JSON.parse(r.rawUserInfo):{},s=r.isNewUser||r.kind==="identitytoolkit#SignupNewUserResponse";if(!n&&(r!=null&&r.idToken)){const a=(t=(e=Ip(r.idToken))===null||e===void 0?void 0:e.firebase)===null||t===void 0?void 0:t.sign_in_provider;if(a){const o=a!=="anonymous"&&a!=="custom"?a:null;return new Rl(s,o)}}if(!n)return null;switch(n){case"facebook.com":return new xN(s,i);case"github.com":return new EN(s,i);case"google.com":return new TN(s,i);case"twitter.com":return new bN(s,i,r.screenName||null);case"custom":case"anonymous":return new Rl(s,null);default:return new Rl(s,n,i)}}class Rl{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Dx extends Rl{constructor(e,t,n,i){super(e,t,n),this.username=i}}class xN extends Rl{constructor(e,t){super(e,"facebook.com",t)}}class EN extends Dx{constructor(e,t){super(e,"github.com",t,typeof(t==null?void 0:t.login)=="string"?t==null?void 0:t.login:null)}}class TN extends Rl{constructor(e,t){super(e,"google.com",t)}}class bN extends Dx{constructor(e,t,n){super(e,"twitter.com",t,n)}}function AN(r){const{user:e,_tokenResponse:t}=r;return e.isAnonymous&&!t?{providerId:null,isNewUser:!1,profile:null}:wN(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Qc("enroll",e,t)}static _fromMfaPendingCredential(e){return new Qc("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(e!=null&&e.multiFactorSession){if(!((t=e.multiFactorSession)===null||t===void 0)&&t.pendingCredential)return Qc._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((n=e.multiFactorSession)===null||n===void 0)&&n.idToken)return Qc._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=rn(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(o=>cd._fromServerResponse(n,o));tt(i.mfaPendingCredential,n,"internal-error");const a=Qc._fromMfaPendingCredential(i.mfaPendingCredential);return new H1(a,s,async o=>{const c=await o._process(n,a);delete i.mfaInfo,delete i.mfaPendingCredential;const u=Object.assign(Object.assign({},i),{idToken:c.idToken,refreshToken:c.refreshToken});switch(t.operationType){case"signIn":const l=await Ps._fromIdTokenResponse(n,t.operationType,u);return await n._updateCurrentUser(l.user),l;case"reauthenticate":return tt(t.user,n,"internal-error"),Ps._forOperation(t.user,t.operationType,u);default:ni(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function IN(r,e){var t;const n=St(r),i=e;return tt(e.customData.operationType,n,"argument-error"),tt((t=i.customData._serverResponse)===null||t===void 0?void 0:t.mfaPendingCredential,n,"argument-error"),H1._fromError(n,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(r,e){return an(r,"POST","/v2/accounts/mfaEnrollment:start",sn(r,e))}function PN(r,e){return an(r,"POST","/v2/accounts/mfaEnrollment:finalize",sn(r,e))}function NN(r,e){return an(r,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(r,e))}class $1{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(n=>cd._fromServerResponse(e.auth,n)))})}static _fromUser(e){return new $1(e)}async getSession(){return Qc._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,i=await this.getSession(),s=await to(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(s),this.user.reload()}async unenroll(e){const t=typeof e=="string"?e:e.uid,n=await this.user.getIdToken();try{const i=await to(this.user,NN(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter(({uid:s})=>s!==t),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const $m=new WeakMap;function CN(r){const e=St(r);return $m.has(e)||$m.set(e,$1._fromUser(e)),$m.get(e)}const q0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(q0,"1"),this.storage.removeItem(q0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kN=1e3,RN=10;class Ox extends Fx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=wx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((a,o,c)=>{this.notifyListeners(a,c)});return}const n=e.key;t?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(n);!t&&this.localCache[n]===a||this.notifyListeners(n,a)},s=this.storage.getItem(n);gP()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,RN):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},kN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ox.type="LOCAL";const G1=Ox;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx extends Fx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mx.type="SESSION";const cu=Mx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LN(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(i=>i.isListeningto(e));if(t)return t;const n=new Rp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:s}=t.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(a).map(async u=>u(t.origin,s)),c=await LN(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:c})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(r="",e=10){let t="";for(let n=0;n<e;n++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,a;return new Promise((o,c)=>{const u=ud("",20);i.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);a={messageChannel:i,onMessage(d){const g=d;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(g.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(){return window}function FN(r){xn().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){return typeof xn().WorkerGlobalScope<"u"&&typeof xn().importScripts=="function"}async function ON(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function MN(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)===null||r===void 0?void 0:r.controller)||null}function BN(){return K1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bx="firebaseLocalStorageDb",VN=1,z0="firebaseLocalStorage",Vx="fbase_key";class ld{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Lp(r,e){return r.transaction([z0],e?"readwrite":"readonly").objectStore(z0)}function UN(){const r=indexedDB.deleteDatabase(Bx);return new ld(r).toPromise()}function Rg(){const r=indexedDB.open(Bx,VN);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const n=r.result;try{n.createObjectStore(z0,{keyPath:Vx})}catch(i){t(i)}}),r.addEventListener("success",async()=>{const n=r.result;n.objectStoreNames.contains(z0)?e(n):(n.close(),await UN(),e(await Rg()))})})}async function q_(r,e,t){const n=Lp(r,!0).put({[Vx]:e,value:t});return new ld(n).toPromise()}async function jN(r,e){const t=Lp(r,!1).get(e),n=await new ld(t).toPromise();return n===void 0?null:n.value}function z_(r,e){const t=Lp(r,!0).delete(e);return new ld(t).toPromise()}const qN=800,zN=3;class Ux{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rg(),this.db)}async _withRetries(e){let t=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(t++>zN)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return K1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rp._getInstance(BN()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await ON(),!this.activeServiceWorker)return;this.sender=new DN(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((t=n[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||MN()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rg();return await q_(e,q0,"1"),await z_(e,q0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>q_(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(n=>jN(n,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>z_(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Lp(i,!1).getAll();return new ld(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],n=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),qN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Ux.type="LOCAL";const Lf=Ux;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WN(r,e){return an(r,"POST","/v2/accounts/mfaSignIn:start",sn(r,e))}function HN(r,e){return an(r,"POST","/v2/accounts/mfaSignIn:finalize",sn(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=500,GN=6e4,t0=1e12;class KN{constructor(e){this.auth=e,this.counter=t0,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new YN(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||t0;(t=this._widgets.get(n))===null||t===void 0||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||t0;return((t=this._widgets.get(n))===null||t===void 0?void 0:t.getResponse())||""}async execute(e){var t;const n=e||t0;return(t=this._widgets.get(n))===null||t===void 0||t.execute(),""}}class YN{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;tt(i,"argument-error",{appName:t}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=XN(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch{}this.isVisible&&this.execute()},GN)},$N))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function XN(r){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<r;n++)e.push(t.charAt(Math.floor(Math.random()*t.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gm=Ex("rcb"),JN=new id(3e4,6e4);class QN{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=xn().grecaptcha)===null||e===void 0)&&e.render)}load(e,t=""){return tt(ZN(t),e,"argument-error"),this.shouldResolveImmediately(t)&&L_(xn().grecaptcha)?Promise.resolve(xn().grecaptcha):new Promise((n,i)=>{const s=xn().setTimeout(()=>{i(Nn(e,"network-request-failed"))},JN.get());xn()[Gm]=()=>{xn().clearTimeout(s),delete xn()[Gm];const o=xn().grecaptcha;if(!o||!L_(o)){i(Nn(e,"internal-error"));return}const c=o.render;o.render=(u,l)=>{const d=c(u,l);return this.counter++,d},this.hostLanguage=t,n(o)};const a=`${TP()}?${uh({onload:Gm,render:"explicit",hl:t})}`;U1(a).catch(()=>{clearTimeout(s),i(Nn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(!((t=xn().grecaptcha)===null||t===void 0)&&t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function ZN(r){return r.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(r)}class eC{async load(e){return new KN(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="recaptcha",tC={theme:"light",type:"image"};let rC=class{constructor(e,t,n=Object.assign({},tC)){this.parameters=n,this.type=jx,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=rn(e),this.isInvisible=this.parameters.size==="invisible",tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof t=="string"?document.getElementById(t):t;tt(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new eC:new QN,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(i=>{const s=a=>{a&&(this.tokenChangeListeners.delete(s),i(a))};this.tokenChangeListeners.add(s),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){tt(!this.parameters.sitekey,this.auth,"argument-error"),tt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),tt(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(n=>n(t)),typeof e=="function")e(t);else if(typeof e=="string"){const n=xn()[e];typeof n=="function"&&n(t)}}}assertNotDestroyed(){tt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){tt(B1()&&!K1(),this.auth,"internal-error"),await nC(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await nP(this.auth);tt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return tt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function nC(){let r=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}r=()=>e(),window.addEventListener("load",r)}).catch(e=>{throw r&&window.removeEventListener("load",r),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=nu._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function iC(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=rn(r),i=await Dp(n,e,St(t));return new Y1(i,s=>Cp(n,s))}async function sC(r,e,t){const n=St(r);await Np(!1,n,"phone");const i=await Dp(n.auth,e,St(t));return new Y1(i,s=>Cx(n,s))}async function aC(r,e,t){const n=St(r);if(en(n.auth.app))return Promise.reject(Un(n.auth));const i=await Dp(n.auth,e,St(t));return new Y1(i,s=>kx(n,s))}async function Dp(r,e,t){var n;const i=await t.verify();try{tt(typeof i=="string",r,"argument-error"),tt(t.type===jx,r,"argument-error");let s;if(typeof e=="string"?s={phoneNumber:e}:s=e,"session"in s){const a=s.session;if("phoneNumber"in s)return tt(a.type==="enroll",r,"internal-error"),(await SN(r,{idToken:a.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{tt(a.type==="signin",r,"internal-error");const o=((n=s.multiFactorHint)===null||n===void 0?void 0:n.uid)||s.multiFactorUid;return tt(o,r,"missing-multi-factor-info"),(await WN(r,{mfaPendingCredential:a.credential,mfaEnrollmentId:o,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:a}=await WP(r,{phoneNumber:s.phoneNumber,recaptchaToken:i});return a}}finally{t._reset()}}async function oC(r,e){const t=St(r);if(en(t.auth.app))return Promise.reject(Un(t.auth));await j1(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uu=class x0{constructor(e){this.providerId=x0.PROVIDER_ID,this.auth=rn(e)}verifyPhoneNumber(e,t){return Dp(this.auth,e,St(t))}static credential(e,t){return nu._fromVerification(e,t)}static credentialFromResult(e){const t=e;return x0.credentialFromTaggedObject(t)}static credentialFromError(e){return x0.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?nu._fromTokenResponse(t,n):null}};uu.PROVIDER_ID="phone";uu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Su(r,e){return e?fs(e):(tt(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X1 extends fh{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xa(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xa(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xa(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function cC(r){return Nx(r.auth,new X1(r),r.bypassAuthState)}function uC(r){const{auth:e,user:t}=r;return tt(t,e,"internal-error"),Px(t,new X1(r),r.bypassAuthState)}async function lC(r){const{auth:e,user:t}=r;return tt(t,e,"internal-error"),j1(t,new X1(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,t,n,i,s=!1){this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:s,error:a,type:o}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return cC;case"linkViaPopup":case"linkViaRedirect":return lC;case"reauthViaPopup":case"reauthViaRedirect":return uC;default:ni(this.auth,"internal-error")}}resolve(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ks(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new id(2e3,1e4);async function fC(r,e,t){if(en(r.app))return Promise.reject(Nn(r,"operation-not-supported-in-this-environment"));const n=rn(r);hh(r,e,oo);const i=Su(n,t);return new Ga(n,"signInViaPopup",e,i).executeNotNull()}async function dC(r,e,t){const n=St(r);if(en(n.auth.app))return Promise.reject(Nn(n.auth,"operation-not-supported-in-this-environment"));hh(n.auth,e,oo);const i=Su(n.auth,t);return new Ga(n.auth,"reauthViaPopup",e,i,n).executeNotNull()}async function pC(r,e,t){const n=St(r);hh(n.auth,e,oo);const i=Su(n.auth,t);return new Ga(n.auth,"linkViaPopup",e,i,n).executeNotNull()}class Ga extends qx{constructor(e,t,n,i,s){super(e,t,i,s),this.provider=n,this.authWindow=null,this.pollId=null,Ga.currentPopupAction&&Ga.currentPopupAction.cancel(),Ga.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return tt(e,this.auth,"internal-error"),e}async onExecution(){Ks(this.filter.length===1,"Popup operations only handle one event");const e=ud();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Nn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Nn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ga.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;if(!((n=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Nn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,hC.get())};e()}}Ga.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mC="pendingRedirect",hf=new Map;class gC extends qx{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=hf.get(this.auth._key());if(!e){try{const n=await vC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}hf.set(this.auth._key(),e)}return this.bypassAuthState||hf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function vC(r,e){const t=Wx(e),n=zx(r);if(!await n._isAvailable())return!1;const i=await n._get(t)==="true";return await n._remove(t),i}async function J1(r,e){return zx(r)._set(Wx(e),"true")}function _C(){hf.clear()}function Q1(r,e){hf.set(r._key(),e)}function zx(r){return fs(r._redirectPersistence)}function Wx(r){return ru(mC,r.config.apiKey,r.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(r,e,t){return wC(r,e,t)}async function wC(r,e,t){if(en(r.app))return Promise.reject(Un(r));const n=rn(r);hh(r,e,oo),await n._initializationPromise;const i=Su(n,t);return await J1(i,n),i._openRedirect(n,e,"signInViaRedirect")}function xC(r,e,t){return EC(r,e,t)}async function EC(r,e,t){const n=St(r);if(hh(n.auth,e,oo),en(n.auth.app))return Promise.reject(Un(n.auth));await n.auth._initializationPromise;const i=Su(n.auth,t);await J1(i,n.auth);const s=await Hx(n);return i._openRedirect(n.auth,e,"reauthViaRedirect",s)}function TC(r,e,t){return bC(r,e,t)}async function bC(r,e,t){const n=St(r);hh(n.auth,e,oo),await n.auth._initializationPromise;const i=Su(n.auth,t);await Np(!1,n,e.providerId),await J1(i,n.auth);const s=await Hx(n);return i._openRedirect(n.auth,e,"linkViaRedirect",s)}async function AC(r,e){return await rn(r)._initializationPromise,Fp(r,e,!1)}async function Fp(r,e,t=!1){if(en(r.app))return Promise.reject(Un(r));const n=rn(r),i=Su(n,e),a=await new gC(n,i,t).execute();return a&&!t&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}async function Hx(r){const e=ud(`${r.uid}:::`);return r._redirectEventId=e,await r.auth._setRedirectUser(r),await r.auth._persistUserIfCurrent(r),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=10*60*1e3;class $x{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!SC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Gx(e)){const i=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";t.onError(Nn(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=IC&&this.cachedEventUids.clear(),this.cachedEventUids.has(W_(e))}saveEventToCache(e){this.cachedEventUids.add(W_(e)),this.lastProcessedEventTime=Date.now()}}function W_(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function Gx({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function SC(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gx(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kx(r,e={}){return an(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,NC=/^https?/;async function CC(r){if(r.config.emulator)return;const{authorizedDomains:e}=await Kx(r);for(const t of e)try{if(kC(t))return}catch{}ni(r,"unauthorized-domain")}function kC(r){const e=Nf(),{protocol:t,hostname:n}=new URL(e);if(r.startsWith("chrome-extension://")){const a=new URL(r);return a.hostname===""&&n===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&a.hostname===n}if(!NC.test(t))return!1;if(PC.test(r))return n===r;const i=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RC=new id(3e4,6e4);function H_(){const r=xn().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function LC(r){return new Promise((e,t)=>{var n,i,s;function a(){H_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{H_(),t(Nn(r,"network-request-failed"))},timeout:RC.get()})}if(!((i=(n=xn().gapi)===null||n===void 0?void 0:n.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=xn().gapi)===null||s===void 0)&&s.load)a();else{const o=Ex("iframefcb");return xn()[o]=()=>{gapi.load?a():t(Nn(r,"network-request-failed"))},U1(`${AP()}?onload=${o}`).catch(c=>t(c))}}).catch(e=>{throw E0=null,e})}let E0=null;function DC(r){return E0=E0||LC(r),E0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new id(5e3,15e3),OC="__/auth/iframe",MC="emulator/auth/iframe",BC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},VC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function UC(r){const e=r.config;tt(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?V1(e,MC):`https://${r.config.authDomain}/${OC}`,n={apiKey:e.apiKey,appName:r.name,v:gc},i=VC.get(r.config.apiHost);i&&(n.eid=i);const s=r._getFrameworks();return s.length&&(n.fw=s.join(",")),`${t}?${uh(n).slice(1)}`}async function jC(r){const e=await DC(r),t=xn().gapi;return tt(t,r,"internal-error"),e.open({where:document.body,url:UC(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:BC,dontclear:!0},n=>new Promise(async(i,s)=>{await n.restyle({setHideOnLeave:!1});const a=Nn(r,"network-request-failed"),o=xn().setTimeout(()=>{s(a)},FC.get());function c(){xn().clearTimeout(o),i(n)}n.ping(c).then(c,()=>{s(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},zC=500,WC=600,HC="_blank",$C="http://localhost";class $_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function GC(r,e,t,n=zC,i=WC){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let o="";const c=Object.assign(Object.assign({},qC),{width:n.toString(),height:i.toString(),top:s,left:a}),u=Gr().toLowerCase();t&&(o=gx(u)?HC:t),px(u)&&(e=e||$C,c.scrollbars="yes");const l=Object.entries(c).reduce((g,[p,x])=>`${g}${p}=${x},`,"");if(mP(u)&&o!=="_self")return KC(e||"",o),new $_(null);const d=window.open(e||"",o,l);tt(d,r,"popup-blocked");try{d.focus()}catch{}return new $_(d)}function KC(r,e){const t=document.createElement("a");t.href=r,t.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="__/auth/handler",XC="emulator/auth/handler",JC=encodeURIComponent("fac");async function Lg(r,e,t,n,i,s){tt(r.config.authDomain,r,"auth-domain-config-required"),tt(r.config.apiKey,r,"invalid-api-key");const a={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:n,v:gc,eventId:i};if(e instanceof oo){e.setDefaultLanguage(r.languageCode),a.providerId=e.providerId||"",T4(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,d]of Object.entries(s||{}))a[l]=d}if(e instanceof dh){const l=e.getScopes().filter(d=>d!=="");l.length>0&&(a.scopes=l.join(","))}r.tenantId&&(a.tid=r.tenantId);const o=a;for(const l of Object.keys(o))o[l]===void 0&&delete o[l];const c=await r._getAppCheckToken(),u=c?`#${JC}=${encodeURIComponent(c)}`:"";return`${QC(r)}?${uh(o).slice(1)}${u}`}function QC({config:r}){return r.emulator?V1(r,XC):`https://${r.authDomain}/${YC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="webStorageSupport";class ZC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cu,this._completeRedirectFn=Fp,this._overrideRedirectResult=Q1}async _openPopup(e,t,n,i){var s;Ks((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const a=await Lg(e,t,n,Nf(),i);return GC(e,a,ud())}async _openRedirect(e,t,n,i){await this._originValidation(e);const s=await Lg(e,t,n,Nf(),i);return FN(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:i,promise:s}=this.eventManagers[t];return i?Promise.resolve(i):(Ks(s,"If manager is not set, promise should be"),s)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await jC(e),n=new $x(e);return t.register("authEvent",i=>(tt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:n.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Km,{type:Km},i=>{var s;const a=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Km];a!==void 0&&t(!!a),ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=CC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return wx()||mx()||ad()}}const ek=ZC;class tk{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return da("unexpected MultiFactorSessionType")}}}class Z1 extends tk{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Z1(e)}_finalizeEnroll(e,t,n){return PN(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return HN(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Yx{constructor(){}static assertion(e){return Z1._fromCredential(e)}}Yx.FACTOR_ID="phone";var G_="@firebase/auth",K_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){tt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nk(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function ik(r){Ki(new jn("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=n.options;tt(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const c={apiKey:a,authDomain:o,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xx(r)},u=new xP(n,i,s,c);return NP(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Ki(new jn("auth-internal",e=>{const t=rn(e.getProvider("auth").getImmediate());return(n=>new rk(n))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ei(G_,K_,nk(r)),ei(G_,K_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sk=5*60;f4("authIdTokenMaxAge");function ak(){var r,e;return(e=(r=document.getElementsByTagName("head"))===null||r===void 0?void 0:r[0])!==null&&e!==void 0?e:document}EP({loadJS(r){return new Promise((e,t)=>{const n=document.createElement("script");n.setAttribute("src",r),n.onload=e,n.onerror=i=>{const s=Nn("internal-error");s.customData=i,t(s)},n.type="text/javascript",n.charset="UTF-8",ak().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});ik("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok=2e3;async function ck(r,e,t){var n;const{BuildInfo:i}=lu();Ks(e.sessionId,"AuthEvent did not contain a session ID");const s=await dk(e.sessionId),a={};return ad()?a.ibi=i.packageName:sd()?a.apn=i.packageName:ni(r,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=s,Lg(r,t,e.type,void 0,(n=e.eventId)!==null&&n!==void 0?n:void 0,a)}async function uk(r){const{BuildInfo:e}=lu(),t={};ad()?t.iosBundleId=e.packageName:sd()?t.androidPackageName=e.packageName:ni(r,"operation-not-supported-in-this-environment"),await Kx(r,t)}function lk(r){const{cordova:e}=lu();return new Promise(t=>{e.plugins.browsertab.isAvailable(n=>{let i=null;n?e.plugins.browsertab.openUrl(r):i=e.InAppBrowser.open(r,pP()?"_blank":"_system","location=yes"),t(i)})})}async function hk(r,e,t){const{cordova:n}=lu();let i=()=>{};try{await new Promise((s,a)=>{let o=null;function c(){var d;s();const g=(d=n.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof g=="function"&&g(),typeof(t==null?void 0:t.close)=="function"&&t.close()}function u(){o||(o=window.setTimeout(()=>{a(Nn(r,"redirect-cancelled-by-user"))},ok))}function l(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(c),document.addEventListener("resume",u,!1),sd()&&document.addEventListener("visibilitychange",l,!1),i=()=>{e.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),o&&window.clearTimeout(o)}})}finally{i()}}function fk(r){var e,t,n,i,s,a,o,c,u,l;const d=lu();tt(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),tt(typeof((t=d==null?void 0:d.BuildInfo)===null||t===void 0?void 0:t.packageName)<"u",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),tt(typeof((s=(i=(n=d==null?void 0:d.cordova)===null||n===void 0?void 0:n.plugins)===null||i===void 0?void 0:i.browsertab)===null||s===void 0?void 0:s.openUrl)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((c=(o=(a=d==null?void 0:d.cordova)===null||a===void 0?void 0:a.plugins)===null||o===void 0?void 0:o.browsertab)===null||c===void 0?void 0:c.isAvailable)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),tt(typeof((l=(u=d==null?void 0:d.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||l===void 0?void 0:l.open)=="function",r,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function dk(r){const e=pk(r),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(i=>i.toString(16).padStart(2,"0")).join("")}function pk(r){if(Ks(/[0-9a-zA-Z]+/.test(r),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(r);const e=new ArrayBuffer(r.length),t=new Uint8Array(e);for(let n=0;n<r.length;n++)t[n]=r.charCodeAt(n);return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=20;class gk extends $x{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInitialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInitialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function vk(r,e,t=null){return{type:e,eventId:t,urlResponse:null,sessionId:wk(),postBody:null,tenantId:r.tenantId,error:Nn(r,"no-auth-event")}}function _k(r,e){return Dg()._set(Fg(r),e)}async function Y_(r){const e=await Dg()._get(Fg(r));return e&&await Dg()._remove(Fg(r)),e}function yk(r,e){var t,n;const i=Ek(e);if(i.includes("/__/auth/callback")){const s=T0(i),a=s.firebaseError?xk(decodeURIComponent(s.firebaseError)):null,o=(n=(t=a==null?void 0:a.code)===null||t===void 0?void 0:t.split("auth/"))===null||n===void 0?void 0:n[1],c=o?Nn(o):null;return c?{type:r.type,eventId:r.eventId,tenantId:r.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:r.type,eventId:r.eventId,tenantId:r.tenantId,sessionId:r.sessionId,urlResponse:i,postBody:null}}return null}function wk(){const r=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let t=0;t<mk;t++){const n=Math.floor(Math.random()*e.length);r.push(e.charAt(n))}return r.join("")}function Dg(){return fs(G1)}function Fg(r){return ru("authEvent",r.config.apiKey,r.name)}function xk(r){try{return JSON.parse(r)}catch{return null}}function Ek(r){const e=T0(r),t=e.link?decodeURIComponent(e.link):void 0,n=T0(t).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return T0(i).link||i||n||t||r}function T0(r){if(!(r!=null&&r.includes("?")))return{};const[e,...t]=r.split("?");return Al(t.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=500;class bk{constructor(){this._redirectPersistence=cu,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fp,this._overrideRedirectResult=Q1}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new gk(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){ni(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){fk(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),_C(),await this._originValidation(e);const a=vk(e,n,i);await _k(e,a);const o=await ck(e,a,t),c=await lk(o);return hk(e,s,c)}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=uk(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:s}=lu(),a=setTimeout(async()=>{await Y_(e),t.onEvent(X_())},Tk),o=async l=>{clearTimeout(a);const d=await Y_(e);let g=null;d&&(l!=null&&l.url)&&(g=yk(d,l.url)),t.onEvent(g||X_())};typeof n<"u"&&typeof n.subscribe=="function"&&n.subscribe(null,o);const c=i,u=`${s.packageName.toLowerCase()}://`;lu().handleOpenURL=async l=>{if(l.toLowerCase().startsWith(u)&&o({url:l}),typeof c=="function")try{c(l)}catch(d){console.error(d)}}}}const Ak=bk;function X_(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Nn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(r,e){rn(r)._logFramework(e)}var Sk="@firebase/auth-compat",Pk="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nk=1e3;function ff(){var r;return((r=self==null?void 0:self.location)===null||r===void 0?void 0:r.protocol)||null}function Ck(){return ff()==="http:"||ff()==="https:"}function Xx(r=Gr()){return!!((ff()==="file:"||ff()==="ionic:"||ff()==="capacitor:")&&r.toLowerCase().match(/iphone|ipad|ipod|android/))}function kk(){return C1()||N1()}function Rk(){return H5()&&(document==null?void 0:document.documentMode)===11}function Lk(r=Gr()){return/Edge\/\d+/.test(r)}function Dk(r=Gr()){return Rk()||Lk(r)}function Jx(){try{const r=self.localStorage,e=ud();if(r)return r.setItem(e,"1"),r.removeItem(e),Dk()?ou():!0}catch{return e2()&&ou()}return!1}function e2(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ym(){return(Ck()||W5()||Xx())&&!kk()&&Jx()&&!e2()}function Qx(){return Xx()&&typeof document<"u"}async function Fk(){return Qx()?new Promise(r=>{const e=setTimeout(()=>{r(!1)},Nk);document.addEventListener("deviceready",()=>{clearTimeout(e),r(!0)})}):!1}function Ok(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us={LOCAL:"local",NONE:"none",SESSION:"session"},Hh=tt,Zx="persistence";function Mk(r,e){if(Hh(Object.values(us).includes(e),r,"invalid-persistence-type"),C1()){Hh(e!==us.SESSION,r,"unsupported-persistence-type");return}if(N1()){Hh(e===us.NONE,r,"unsupported-persistence-type");return}if(e2()){Hh(e===us.NONE||e===us.LOCAL&&ou(),r,"unsupported-persistence-type");return}Hh(e===us.NONE||Jx(),r,"unsupported-persistence-type")}async function Og(r){await r._initializationPromise;const e=eE(),t=ru(Zx,r.config.apiKey,r.name);e&&e.setItem(t,r._getPersistence())}function Bk(r,e){const t=eE();if(!t)return[];const n=ru(Zx,r,e);switch(t.getItem(n)){case us.NONE:return[$l];case us.LOCAL:return[Lf,cu];case us.SESSION:return[cu];default:return[]}}function eE(){var r;try{return((r=Ok())===null||r===void 0?void 0:r.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=tt;class Yo{constructor(){this.browserResolver=fs(ek),this.cordovaResolver=fs(Ak),this.underlyingResolver=null,this._redirectPersistence=cu,this._completeRedirectFn=Fp,this._overrideRedirectResult=Q1}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Qx()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Vk(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await Fk();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tE(r){return r.unwrap()}function Uk(r){return r.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jk(r){return rE(r)}function qk(r,e){var t;const n=(t=e.customData)===null||t===void 0?void 0:t._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new zk(r,IN(r,e))}else if(n){const i=rE(e),s=e;i&&(s.credential=i,s.tenantId=n.tenantId||void 0,s.email=n.email||void 0,s.phoneNumber=n.phoneNumber||void 0)}}function rE(r){const{_tokenResponse:e}=r instanceof Pn?r.customData:r;if(!e)return null;if(!(r instanceof Pn)&&"temporaryProof"in e&&"phoneNumber"in e)return uu.credentialFromResult(r);const t=e.providerId;if(!t||t===Wh.PASSWORD)return null;let n;switch(t){case Wh.GOOGLE:n=la;break;case Wh.FACEBOOK:n=ua;break;case Wh.GITHUB:n=ha;break;case Wh.TWITTER:n=fa;break;default:const{oauthIdToken:i,oauthAccessToken:s,oauthTokenSecret:a,pendingToken:o,nonce:c}=e;return!s&&!a&&!i&&!o?null:o?t.startsWith("saml.")?Gl._create(t,o):xa._fromParams({providerId:t,signInMethod:t,pendingToken:o,idToken:i,accessToken:s}):new kl(t).credential({idToken:i,accessToken:s,rawNonce:c})}return r instanceof Pn?n.credentialFromError(r):n.credentialFromResult(r)}function ji(r,e){return e.catch(t=>{throw t instanceof Pn&&qk(r,t),t}).then(t=>{const n=t.operationType,i=t.user;return{operationType:n,credential:jk(t),additionalUserInfo:AN(t),user:Op.getOrCreate(i)}})}async function Mg(r,e){const t=await e;return{verificationId:t.verificationId,confirm:n=>ji(r,t.confirm(n))}}class zk{constructor(e,t){this.resolver=t,this.auth=Uk(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ji(tE(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Op=class nf{constructor(e){this._delegate=e,this.multiFactor=CN(e)}static getOrCreate(e){return nf.USER_MAP.has(e)||nf.USER_MAP.set(e,new nf(e)),nf.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ji(this.auth,Cx(this._delegate,e))}async linkWithPhoneNumber(e,t){return Mg(this.auth,sC(this._delegate,e,t))}async linkWithPopup(e){return ji(this.auth,pC(this._delegate,e,Yo))}async linkWithRedirect(e){return await Og(rn(this.auth)),TC(this._delegate,e,Yo)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ji(this.auth,kx(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Mg(this.auth,aC(this._delegate,e,t))}reauthenticateWithPopup(e){return ji(this.auth,dC(this._delegate,e,Yo))}async reauthenticateWithRedirect(e){return await Og(rn(this.auth)),xC(this._delegate,e,Yo)}sendEmailVerification(e){return pN(this._delegate,e)}async unlink(e){return await eN(this._delegate,e),this}updateEmail(e){return _N(this._delegate,e)}updatePassword(e){return yN(this._delegate,e)}updatePhoneNumber(e){return oC(this._delegate,e)}updateProfile(e){return vN(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return mN(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};Op.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $h=tt;class Bg{constructor(e,t){if(this.app=e,t.isInitialized()){this._delegate=t.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:n}=e.options;$h(n,"invalid-api-key",{appName:e.name}),$h(n,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?Yo:void 0;this._delegate=t.initialize({options:{persistence:Wk(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(G3),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Op.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){CP(this._delegate,e,t)}applyActionCode(e){return sN(this._delegate,e)}checkActionCode(e){return Rx(this._delegate,e)}confirmPasswordReset(e,t){return iN(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return ji(this._delegate,oN(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return dN(this._delegate,e)}isSignInWithEmailLink(e){return lN(this._delegate,e)}async getRedirectResult(){$h(Ym(),this._delegate,"operation-not-supported-in-this-environment");const e=await AC(this._delegate,Yo);return e?ji(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){Ik(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:s,complete:a}=J_(e,t,n);return this._delegate.onAuthStateChanged(i,s,a)}onIdTokenChanged(e,t,n){const{next:i,error:s,complete:a}=J_(e,t,n);return this._delegate.onIdTokenChanged(i,s,a)}sendSignInLinkToEmail(e,t){return uN(this._delegate,e,t)}sendPasswordResetEmail(e,t){return nN(this._delegate,e,t||void 0)}async setPersistence(e){Mk(this._delegate,e);let t;switch(e){case us.SESSION:t=cu;break;case us.LOCAL:t=await fs(Lf)._isAvailable()?Lf:G1;break;case us.NONE:t=$l;break;default:return ni("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ji(this._delegate,ZP(this._delegate))}signInWithCredential(e){return ji(this._delegate,Cp(this._delegate,e))}signInWithCustomToken(e){return ji(this._delegate,rN(this._delegate,e))}signInWithEmailAndPassword(e,t){return ji(this._delegate,cN(this._delegate,e,t))}signInWithEmailLink(e,t){return ji(this._delegate,hN(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Mg(this._delegate,iC(this._delegate,e,t))}async signInWithPopup(e){return $h(Ym(),this._delegate,"operation-not-supported-in-this-environment"),ji(this._delegate,fC(this._delegate,e,Yo))}async signInWithRedirect(e){return $h(Ym(),this._delegate,"operation-not-supported-in-this-environment"),await Og(this._delegate),yC(this._delegate,e,Yo)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return aN(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Bg.Persistence=us;function J_(r,e,t){let n=r;typeof r!="function"&&({next:n,error:e,complete:t}=r);const i=n;return{next:a=>i(a&&Op.getOrCreate(a)),error:e,complete:t}}function Wk(r,e){const t=Bk(r,e);if(typeof self<"u"&&!t.includes(Lf)&&t.push(Lf),typeof window<"u")for(const n of[G1,cu])t.includes(n)||t.push(n);return t.includes($l)||t.push($l),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{constructor(){this.providerId="phone",this._delegate=new uu(tE(pn.auth()))}static credential(e,t){return uu.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}t2.PHONE_SIGN_IN_METHOD=uu.PHONE_SIGN_IN_METHOD;t2.PROVIDER_ID=uu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hk=tt;class $k{constructor(e,t,n=pn.app()){var i;Hk((i=n.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new rC(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="auth-compat";function Kk(r){r.INTERNAL.registerComponent(new jn(Gk,e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Bg(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:al.EMAIL_SIGNIN,PASSWORD_RESET:al.PASSWORD_RESET,RECOVER_EMAIL:al.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:al.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:al.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:al.VERIFY_EMAIL}},EmailAuthProvider:vc,FacebookAuthProvider:ua,GithubAuthProvider:ha,GoogleAuthProvider:la,OAuthProvider:kl,SAMLAuthProvider:U0,PhoneAuthProvider:t2,PhoneMultiFactorGenerator:Yx,RecaptchaVerifier:$k,TwitterAuthProvider:fa,Auth:Bg,AuthCredential:fh,Error:Pn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),r.registerVersion(Sk,Pk)}Kk(pn);var Q_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iu,nE;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,A){function k(){}k.prototype=A.prototype,N.D=A.prototype,N.prototype=new k,N.prototype.constructor=N,N.C=function(V,b,S){for(var R=Array(arguments.length-2),se=2;se<arguments.length;se++)R[se-2]=arguments[se];return A.prototype[b].apply(V,R)}}function t(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,t),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,A,k){k||(k=0);var V=Array(16);if(typeof A=="string")for(var b=0;16>b;++b)V[b]=A.charCodeAt(k++)|A.charCodeAt(k++)<<8|A.charCodeAt(k++)<<16|A.charCodeAt(k++)<<24;else for(b=0;16>b;++b)V[b]=A[k++]|A[k++]<<8|A[k++]<<16|A[k++]<<24;A=N.g[0],k=N.g[1],b=N.g[2];var S=N.g[3],R=A+(S^k&(b^S))+V[0]+3614090360&4294967295;A=k+(R<<7&4294967295|R>>>25),R=S+(b^A&(k^b))+V[1]+3905402710&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(k^S&(A^k))+V[2]+606105819&4294967295,b=S+(R<<17&4294967295|R>>>15),R=k+(A^b&(S^A))+V[3]+3250441966&4294967295,k=b+(R<<22&4294967295|R>>>10),R=A+(S^k&(b^S))+V[4]+4118548399&4294967295,A=k+(R<<7&4294967295|R>>>25),R=S+(b^A&(k^b))+V[5]+1200080426&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(k^S&(A^k))+V[6]+2821735955&4294967295,b=S+(R<<17&4294967295|R>>>15),R=k+(A^b&(S^A))+V[7]+4249261313&4294967295,k=b+(R<<22&4294967295|R>>>10),R=A+(S^k&(b^S))+V[8]+1770035416&4294967295,A=k+(R<<7&4294967295|R>>>25),R=S+(b^A&(k^b))+V[9]+2336552879&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(k^S&(A^k))+V[10]+4294925233&4294967295,b=S+(R<<17&4294967295|R>>>15),R=k+(A^b&(S^A))+V[11]+2304563134&4294967295,k=b+(R<<22&4294967295|R>>>10),R=A+(S^k&(b^S))+V[12]+1804603682&4294967295,A=k+(R<<7&4294967295|R>>>25),R=S+(b^A&(k^b))+V[13]+4254626195&4294967295,S=A+(R<<12&4294967295|R>>>20),R=b+(k^S&(A^k))+V[14]+2792965006&4294967295,b=S+(R<<17&4294967295|R>>>15),R=k+(A^b&(S^A))+V[15]+1236535329&4294967295,k=b+(R<<22&4294967295|R>>>10),R=A+(b^S&(k^b))+V[1]+4129170786&4294967295,A=k+(R<<5&4294967295|R>>>27),R=S+(k^b&(A^k))+V[6]+3225465664&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^k&(S^A))+V[11]+643717713&4294967295,b=S+(R<<14&4294967295|R>>>18),R=k+(S^A&(b^S))+V[0]+3921069994&4294967295,k=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(k^b))+V[5]+3593408605&4294967295,A=k+(R<<5&4294967295|R>>>27),R=S+(k^b&(A^k))+V[10]+38016083&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^k&(S^A))+V[15]+3634488961&4294967295,b=S+(R<<14&4294967295|R>>>18),R=k+(S^A&(b^S))+V[4]+3889429448&4294967295,k=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(k^b))+V[9]+568446438&4294967295,A=k+(R<<5&4294967295|R>>>27),R=S+(k^b&(A^k))+V[14]+3275163606&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^k&(S^A))+V[3]+4107603335&4294967295,b=S+(R<<14&4294967295|R>>>18),R=k+(S^A&(b^S))+V[8]+1163531501&4294967295,k=b+(R<<20&4294967295|R>>>12),R=A+(b^S&(k^b))+V[13]+2850285829&4294967295,A=k+(R<<5&4294967295|R>>>27),R=S+(k^b&(A^k))+V[2]+4243563512&4294967295,S=A+(R<<9&4294967295|R>>>23),R=b+(A^k&(S^A))+V[7]+1735328473&4294967295,b=S+(R<<14&4294967295|R>>>18),R=k+(S^A&(b^S))+V[12]+2368359562&4294967295,k=b+(R<<20&4294967295|R>>>12),R=A+(k^b^S)+V[5]+4294588738&4294967295,A=k+(R<<4&4294967295|R>>>28),R=S+(A^k^b)+V[8]+2272392833&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^k)+V[11]+1839030562&4294967295,b=S+(R<<16&4294967295|R>>>16),R=k+(b^S^A)+V[14]+4259657740&4294967295,k=b+(R<<23&4294967295|R>>>9),R=A+(k^b^S)+V[1]+2763975236&4294967295,A=k+(R<<4&4294967295|R>>>28),R=S+(A^k^b)+V[4]+1272893353&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^k)+V[7]+4139469664&4294967295,b=S+(R<<16&4294967295|R>>>16),R=k+(b^S^A)+V[10]+3200236656&4294967295,k=b+(R<<23&4294967295|R>>>9),R=A+(k^b^S)+V[13]+681279174&4294967295,A=k+(R<<4&4294967295|R>>>28),R=S+(A^k^b)+V[0]+3936430074&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^k)+V[3]+3572445317&4294967295,b=S+(R<<16&4294967295|R>>>16),R=k+(b^S^A)+V[6]+76029189&4294967295,k=b+(R<<23&4294967295|R>>>9),R=A+(k^b^S)+V[9]+3654602809&4294967295,A=k+(R<<4&4294967295|R>>>28),R=S+(A^k^b)+V[12]+3873151461&4294967295,S=A+(R<<11&4294967295|R>>>21),R=b+(S^A^k)+V[15]+530742520&4294967295,b=S+(R<<16&4294967295|R>>>16),R=k+(b^S^A)+V[2]+3299628645&4294967295,k=b+(R<<23&4294967295|R>>>9),R=A+(b^(k|~S))+V[0]+4096336452&4294967295,A=k+(R<<6&4294967295|R>>>26),R=S+(k^(A|~b))+V[7]+1126891415&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~k))+V[14]+2878612391&4294967295,b=S+(R<<15&4294967295|R>>>17),R=k+(S^(b|~A))+V[5]+4237533241&4294967295,k=b+(R<<21&4294967295|R>>>11),R=A+(b^(k|~S))+V[12]+1700485571&4294967295,A=k+(R<<6&4294967295|R>>>26),R=S+(k^(A|~b))+V[3]+2399980690&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~k))+V[10]+4293915773&4294967295,b=S+(R<<15&4294967295|R>>>17),R=k+(S^(b|~A))+V[1]+2240044497&4294967295,k=b+(R<<21&4294967295|R>>>11),R=A+(b^(k|~S))+V[8]+1873313359&4294967295,A=k+(R<<6&4294967295|R>>>26),R=S+(k^(A|~b))+V[15]+4264355552&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~k))+V[6]+2734768916&4294967295,b=S+(R<<15&4294967295|R>>>17),R=k+(S^(b|~A))+V[13]+1309151649&4294967295,k=b+(R<<21&4294967295|R>>>11),R=A+(b^(k|~S))+V[4]+4149444226&4294967295,A=k+(R<<6&4294967295|R>>>26),R=S+(k^(A|~b))+V[11]+3174756917&4294967295,S=A+(R<<10&4294967295|R>>>22),R=b+(A^(S|~k))+V[2]+718787259&4294967295,b=S+(R<<15&4294967295|R>>>17),R=k+(S^(b|~A))+V[9]+3951481745&4294967295,N.g[0]=N.g[0]+A&4294967295,N.g[1]=N.g[1]+(b+(R<<21&4294967295|R>>>11))&4294967295,N.g[2]=N.g[2]+b&4294967295,N.g[3]=N.g[3]+S&4294967295}n.prototype.u=function(N,A){A===void 0&&(A=N.length);for(var k=A-this.blockSize,V=this.B,b=this.h,S=0;S<A;){if(b==0)for(;S<=k;)i(this,N,S),S+=this.blockSize;if(typeof N=="string"){for(;S<A;)if(V[b++]=N.charCodeAt(S++),b==this.blockSize){i(this,V),b=0;break}}else for(;S<A;)if(V[b++]=N[S++],b==this.blockSize){i(this,V),b=0;break}}this.h=b,this.o+=A},n.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var A=1;A<N.length-8;++A)N[A]=0;var k=8*this.o;for(A=N.length-8;A<N.length;++A)N[A]=k&255,k/=256;for(this.u(N),N=Array(16),A=k=0;4>A;++A)for(var V=0;32>V;V+=8)N[k++]=this.g[A]>>>V&255;return N};function s(N,A){var k=o;return Object.prototype.hasOwnProperty.call(k,N)?k[N]:k[N]=A(N)}function a(N,A){this.h=A;for(var k=[],V=!0,b=N.length-1;0<=b;b--){var S=N[b]|0;V&&S==A||(k[b]=S,V=!1)}this.g=k}var o={};function c(N){return-128<=N&&128>N?s(N,function(A){return new a([A|0],0>A?-1:0)}):new a([N|0],0>N?-1:0)}function u(N){if(isNaN(N)||!isFinite(N))return d;if(0>N)return E(u(-N));for(var A=[],k=1,V=0;N>=k;V++)A[V]=N/k|0,k*=4294967296;return new a(A,0)}function l(N,A){if(N.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(N.charAt(0)=="-")return E(l(N.substring(1),A));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(A,8)),V=d,b=0;b<N.length;b+=8){var S=Math.min(8,N.length-b),R=parseInt(N.substring(b,b+S),A);8>S?(S=u(Math.pow(A,S)),V=V.j(S).add(u(R))):(V=V.j(k),V=V.add(u(R)))}return V}var d=c(0),g=c(1),p=c(16777216);r=a.prototype,r.m=function(){if(_(this))return-E(this).m();for(var N=0,A=1,k=0;k<this.g.length;k++){var V=this.i(k);N+=(0<=V?V:4294967296+V)*A,A*=4294967296}return N},r.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(_(this))return"-"+E(this).toString(N);for(var A=u(Math.pow(N,6)),k=this,V="";;){var b=K(k,A).g;k=P(k,b.j(A));var S=((0<k.g.length?k.g[0]:k.h)>>>0).toString(N);if(k=b,x(k))return S+V;for(;6>S.length;)S="0"+S;V=S+V}},r.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var A=0;A<N.g.length;A++)if(N.g[A]!=0)return!1;return!0}function _(N){return N.h==-1}r.l=function(N){return N=P(this,N),_(N)?-1:x(N)?0:1};function E(N){for(var A=N.g.length,k=[],V=0;V<A;V++)k[V]=~N.g[V];return new a(k,~N.h).add(g)}r.abs=function(){return _(this)?E(this):this},r.add=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0,b=0;b<=A;b++){var S=V+(this.i(b)&65535)+(N.i(b)&65535),R=(S>>>16)+(this.i(b)>>>16)+(N.i(b)>>>16);V=R>>>16,S&=65535,R&=65535,k[b]=R<<16|S}return new a(k,k[k.length-1]&-2147483648?-1:0)};function P(N,A){return N.add(E(A))}r.j=function(N){if(x(this)||x(N))return d;if(_(this))return _(N)?E(this).j(E(N)):E(E(this).j(N));if(_(N))return E(this.j(E(N)));if(0>this.l(p)&&0>N.l(p))return u(this.m()*N.m());for(var A=this.g.length+N.g.length,k=[],V=0;V<2*A;V++)k[V]=0;for(V=0;V<this.g.length;V++)for(var b=0;b<N.g.length;b++){var S=this.i(V)>>>16,R=this.i(V)&65535,se=N.i(b)>>>16,ve=N.i(b)&65535;k[2*V+2*b]+=R*ve,L(k,2*V+2*b),k[2*V+2*b+1]+=S*ve,L(k,2*V+2*b+1),k[2*V+2*b+1]+=R*se,L(k,2*V+2*b+1),k[2*V+2*b+2]+=S*se,L(k,2*V+2*b+2)}for(V=0;V<A;V++)k[V]=k[2*V+1]<<16|k[2*V];for(V=A;V<2*A;V++)k[V]=0;return new a(k,0)};function L(N,A){for(;(N[A]&65535)!=N[A];)N[A+1]+=N[A]>>>16,N[A]&=65535,A++}function M(N,A){this.g=N,this.h=A}function K(N,A){if(x(A))throw Error("division by zero");if(x(N))return new M(d,d);if(_(N))return A=K(E(N),A),new M(E(A.g),E(A.h));if(_(A))return A=K(N,E(A)),new M(E(A.g),A.h);if(30<N.g.length){if(_(N)||_(A))throw Error("slowDivide_ only works with positive integers.");for(var k=g,V=A;0>=V.l(N);)k=ie(k),V=ie(V);var b=oe(k,1),S=oe(V,1);for(V=oe(V,2),k=oe(k,2);!x(V);){var R=S.add(V);0>=R.l(N)&&(b=b.add(k),S=R),V=oe(V,1),k=oe(k,1)}return A=P(N,b.j(A)),new M(b,A)}for(b=d;0<=N.l(A);){for(k=Math.max(1,Math.floor(N.m()/A.m())),V=Math.ceil(Math.log(k)/Math.LN2),V=48>=V?1:Math.pow(2,V-48),S=u(k),R=S.j(A);_(R)||0<R.l(N);)k-=V,S=u(k),R=S.j(A);x(S)&&(S=g),b=b.add(S),N=P(N,R)}return new M(b,N)}r.A=function(N){return K(this,N).h},r.and=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0;V<A;V++)k[V]=this.i(V)&N.i(V);return new a(k,this.h&N.h)},r.or=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0;V<A;V++)k[V]=this.i(V)|N.i(V);return new a(k,this.h|N.h)},r.xor=function(N){for(var A=Math.max(this.g.length,N.g.length),k=[],V=0;V<A;V++)k[V]=this.i(V)^N.i(V);return new a(k,this.h^N.h)};function ie(N){for(var A=N.g.length+1,k=[],V=0;V<A;V++)k[V]=N.i(V)<<1|N.i(V-1)>>>31;return new a(k,N.h)}function oe(N,A){var k=A>>5;A%=32;for(var V=N.g.length-k,b=[],S=0;S<V;S++)b[S]=0<A?N.i(S+k)>>>A|N.i(S+k+1)<<32-A:N.i(S+k);return new a(b,N.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,nE=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=l,iu=a}).apply(typeof Q_<"u"?Q_:typeof self<"u"?self:typeof window<"u"?window:{});var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var iE,sf,sE,b0,Vg,aE,oE,cE;(function(){var r,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,w,C){return f==Array.prototype||f==Object.prototype||(f[w]=C.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof r0=="object"&&r0];for(var w=0;w<f.length;++w){var C=f[w];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var n=t(this);function i(f,w){if(w)e:{var C=n;f=f.split(".");for(var W=0;W<f.length-1;W++){var pe=f[W];if(!(pe in C))break e;C=C[pe]}f=f[f.length-1],W=C[f],w=w(W),w!=W&&w!=null&&e(C,f,{configurable:!0,writable:!0,value:w})}}function s(f,w){f instanceof String&&(f+="");var C=0,W=!1,pe={next:function(){if(!W&&C<f.length){var Ie=C++;return{value:w(Ie,f[Ie]),done:!1}}return W=!0,{done:!0,value:void 0}}};return pe[Symbol.iterator]=function(){return pe},pe}i("Array.prototype.values",function(f){return f||function(){return s(this,function(w,C){return C})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},o=this||self;function c(f){var w=typeof f;return w=w!="object"?w:f?Array.isArray(f)?"array":w:"null",w=="array"||w=="object"&&typeof f.length=="number"}function u(f){var w=typeof f;return w=="object"&&f!=null||w=="function"}function l(f,w,C){return f.call.apply(f.bind,arguments)}function d(f,w,C){if(!f)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pe,W),f.apply(w,pe)}}return function(){return f.apply(w,arguments)}}function g(f,w,C){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?l:d,g.apply(null,arguments)}function p(f,w){var C=Array.prototype.slice.call(arguments,1);return function(){var W=C.slice();return W.push.apply(W,arguments),f.apply(this,W)}}function x(f,w){function C(){}C.prototype=w.prototype,f.aa=w.prototype,f.prototype=new C,f.prototype.constructor=f,f.Qb=function(W,pe,Ie){for(var Qe=Array(arguments.length-2),Bt=2;Bt<arguments.length;Bt++)Qe[Bt-2]=arguments[Bt];return w.prototype[pe].apply(W,Qe)}}function _(f){const w=f.length;if(0<w){const C=Array(w);for(let W=0;W<w;W++)C[W]=f[W];return C}return[]}function E(f,w){for(let C=1;C<arguments.length;C++){const W=arguments[C];if(c(W)){const pe=f.length||0,Ie=W.length||0;f.length=pe+Ie;for(let Qe=0;Qe<Ie;Qe++)f[pe+Qe]=W[Qe]}else f.push(W)}}class P{constructor(w,C){this.i=w,this.j=C,this.h=0,this.g=null}get(){let w;return 0<this.h?(this.h--,w=this.g,this.g=w.next,w.next=null):w=this.i(),w}}function L(f){return/^[\s\xa0]*$/.test(f)}function M(){var f=o.navigator;return f&&(f=f.userAgent)?f:""}function K(f){return K[" "](f),f}K[" "]=function(){};var ie=M().indexOf("Gecko")!=-1&&!(M().toLowerCase().indexOf("webkit")!=-1&&M().indexOf("Edge")==-1)&&!(M().indexOf("Trident")!=-1||M().indexOf("MSIE")!=-1)&&M().indexOf("Edge")==-1;function oe(f,w,C){for(const W in f)w.call(C,f[W],W,f)}function N(f,w){for(const C in f)w.call(void 0,f[C],C,f)}function A(f){const w={};for(const C in f)w[C]=f[C];return w}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function V(f,w){let C,W;for(let pe=1;pe<arguments.length;pe++){W=arguments[pe];for(C in W)f[C]=W[C];for(let Ie=0;Ie<k.length;Ie++)C=k[Ie],Object.prototype.hasOwnProperty.call(W,C)&&(f[C]=W[C])}}function b(f){var w=1;f=f.split(":");const C=[];for(;0<w&&f.length;)C.push(f.shift()),w--;return f.length&&C.push(f.join(":")),C}function S(f){o.setTimeout(()=>{throw f},0)}function R(){var f=Ce;let w=null;return f.g&&(w=f.g,f.g=f.g.next,f.g||(f.h=null),w.next=null),w}class se{constructor(){this.h=this.g=null}add(w,C){const W=ve.get();W.set(w,C),this.h?this.h.next=W:this.g=W,this.h=W}}var ve=new P(()=>new Ee,f=>f.reset());class Ee{constructor(){this.next=this.g=this.h=null}set(w,C){this.h=w,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let Ne,_e=!1,Ce=new se,Fe=()=>{const f=o.Promise.resolve(void 0);Ne=()=>{f.then(nt)}};var nt=()=>{for(var f;f=R();){try{f.h.call(f.g)}catch(C){S(C)}var w=ve;w.j(f),100>w.h&&(w.h++,f.next=w.g,w.g=f)}_e=!1};function T(){this.s=this.s,this.C=this.C}T.prototype.s=!1,T.prototype.ma=function(){this.s||(this.s=!0,this.N())},T.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(f,w){this.type=f,this.g=this.target=w,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var B=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var f=!1,w=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const C=()=>{};o.addEventListener("test",C,w),o.removeEventListener("test",C,w)}catch{}return f}();function U(f,w){if(D.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var C=this.type=f.type,W=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=w,w=f.relatedTarget){if(ie){e:{try{K(w.nodeName);var pe=!0;break e}catch{}pe=!1}pe||(w=null)}}else C=="mouseover"?w=f.fromElement:C=="mouseout"&&(w=f.toElement);this.relatedTarget=w,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:J[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&U.aa.h.call(this)}}x(U,D);var J={2:"touch",3:"pen",4:"mouse"};U.prototype.h=function(){U.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ae="closure_listenable_"+(1e6*Math.random()|0),le=0;function ue(f,w,C,W,pe){this.listener=f,this.proxy=null,this.src=w,this.type=C,this.capture=!!W,this.ha=pe,this.key=++le,this.da=this.fa=!1}function xe(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Be(f){this.src=f,this.g={},this.h=0}Be.prototype.add=function(f,w,C,W,pe){var Ie=f.toString();f=this.g[Ie],f||(f=this.g[Ie]=[],this.h++);var Qe=Ze(f,w,W,pe);return-1<Qe?(w=f[Qe],C||(w.fa=!1)):(w=new ue(w,this.src,Ie,!!W,pe),w.fa=C,f.push(w)),w};function ze(f,w){var C=w.type;if(C in f.g){var W=f.g[C],pe=Array.prototype.indexOf.call(W,w,void 0),Ie;(Ie=0<=pe)&&Array.prototype.splice.call(W,pe,1),Ie&&(xe(w),f.g[C].length==0&&(delete f.g[C],f.h--))}}function Ze(f,w,C,W){for(var pe=0;pe<f.length;++pe){var Ie=f[pe];if(!Ie.da&&Ie.listener==w&&Ie.capture==!!C&&Ie.ha==W)return pe}return-1}var at="closure_lm_"+(1e6*Math.random()|0),Re={};function ne(f,w,C,W,pe){if(Array.isArray(w)){for(var Ie=0;Ie<w.length;Ie++)ne(f,w[Ie],C,W,pe);return null}return C=Ft(C),f&&f[ae]?f.K(w,C,u(W)?!!W.capture:!1,pe):We(f,w,C,!1,W,pe)}function We(f,w,C,W,pe,Ie){if(!w)throw Error("Invalid event type");var Qe=u(pe)?!!pe.capture:!!pe,Bt=Tt(f);if(Bt||(f[at]=Bt=new Be(f)),C=Bt.add(w,C,W,Qe,Ie),C.proxy)return C;if(W=_t(),C.proxy=W,W.src=f,W.listener=C,f.addEventListener)B||(pe=Qe),pe===void 0&&(pe=!1),f.addEventListener(w.toString(),W,pe);else if(f.attachEvent)f.attachEvent(ct(w.toString()),W);else if(f.addListener&&f.removeListener)f.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return C}function _t(){function f(C){return w.call(f.src,f.listener,C)}const w=ut;return f}function $e(f,w,C,W,pe){if(Array.isArray(w))for(var Ie=0;Ie<w.length;Ie++)$e(f,w[Ie],C,W,pe);else W=u(W)?!!W.capture:!!W,C=Ft(C),f&&f[ae]?(f=f.i,w=String(w).toString(),w in f.g&&(Ie=f.g[w],C=Ze(Ie,C,W,pe),-1<C&&(xe(Ie[C]),Array.prototype.splice.call(Ie,C,1),Ie.length==0&&(delete f.g[w],f.h--)))):f&&(f=Tt(f))&&(w=f.g[w.toString()],f=-1,w&&(f=Ze(w,C,W,pe)),(C=-1<f?w[f]:null)&&rt(C))}function rt(f){if(typeof f!="number"&&f&&!f.da){var w=f.src;if(w&&w[ae])ze(w.i,f);else{var C=f.type,W=f.proxy;w.removeEventListener?w.removeEventListener(C,W,f.capture):w.detachEvent?w.detachEvent(ct(C),W):w.addListener&&w.removeListener&&w.removeListener(W),(C=Tt(w))?(ze(C,f),C.h==0&&(C.src=null,w[at]=null)):xe(f)}}}function ct(f){return f in Re?Re[f]:Re[f]="on"+f}function ut(f,w){if(f.da)f=!0;else{w=new U(w,this);var C=f.listener,W=f.ha||f.src;f.fa&&rt(f),f=C.call(W,w)}return f}function Tt(f){return f=f[at],f instanceof Be?f:null}var At="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ft(f){return typeof f=="function"?f:(f[At]||(f[At]=function(w){return f.handleEvent(w)}),f[At])}function It(){T.call(this),this.i=new Be(this),this.M=this,this.F=null}x(It,T),It.prototype[ae]=!0,It.prototype.removeEventListener=function(f,w,C,W){$e(this,f,w,C,W)};function Ct(f,w){var C,W=f.F;if(W)for(C=[];W;W=W.F)C.push(W);if(f=f.M,W=w.type||w,typeof w=="string")w=new D(w,f);else if(w instanceof D)w.target=w.target||f;else{var pe=w;w=new D(W,f),V(w,pe)}if(pe=!0,C)for(var Ie=C.length-1;0<=Ie;Ie--){var Qe=w.g=C[Ie];pe=Ht(Qe,W,!0,w)&&pe}if(Qe=w.g=f,pe=Ht(Qe,W,!0,w)&&pe,pe=Ht(Qe,W,!1,w)&&pe,C)for(Ie=0;Ie<C.length;Ie++)Qe=w.g=C[Ie],pe=Ht(Qe,W,!1,w)&&pe}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var f=this.i,w;for(w in f.g){for(var C=f.g[w],W=0;W<C.length;W++)xe(C[W]);delete f.g[w],f.h--}}this.F=null},It.prototype.K=function(f,w,C,W){return this.i.add(String(f),w,!1,C,W)},It.prototype.L=function(f,w,C,W){return this.i.add(String(f),w,!0,C,W)};function Ht(f,w,C,W){if(w=f.i.g[String(w)],!w)return!0;w=w.concat();for(var pe=!0,Ie=0;Ie<w.length;++Ie){var Qe=w[Ie];if(Qe&&!Qe.da&&Qe.capture==C){var Bt=Qe.listener,Xt=Qe.ha||Qe.src;Qe.fa&&ze(f.i,Qe),pe=Bt.call(Xt,W)!==!1&&pe}}return pe&&!W.defaultPrevented}function kt(f,w,C){if(typeof f=="function")C&&(f=g(f,C));else if(f&&typeof f.handleEvent=="function")f=g(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(w)?-1:o.setTimeout(f,w||0)}function qt(f){f.g=kt(()=>{f.g=null,f.i&&(f.i=!1,qt(f))},f.l);const w=f.h;f.h=null,f.m.apply(null,w)}class pt extends T{constructor(w,C){super(),this.m=w,this.l=C,this.h=null,this.i=!1,this.g=null}j(w){this.h=arguments,this.g?this.i=!0:qt(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dr(f){T.call(this),this.h=f,this.g={}}x(Dr,T);var Gt=[];function qn(f){oe(f.g,function(w,C){this.g.hasOwnProperty(C)&&rt(w)},f),f.g={}}Dr.prototype.N=function(){Dr.aa.N.call(this),qn(this)},Dr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var tr=o.JSON.stringify,Er=o.JSON.parse,Li=class{stringify(f){return o.JSON.stringify(f,void 0)}parse(f){return o.JSON.parse(f,void 0)}};function Kt(){}Kt.prototype.h=null;function Qi(f){return f.h||(f.h=f.i())}function Tr(){}var bn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function gi(){D.call(this,"d")}x(gi,D);function cr(){D.call(this,"c")}x(cr,D);var Nt={},er=null;function Di(){return er=er||new It}Nt.La="serverreachability";function Kr(f){D.call(this,Nt.La,f)}x(Kr,D);function kn(f){const w=Di();Ct(w,new Kr(w))}Nt.STAT_EVENT="statevent";function vi(f,w){D.call(this,Nt.STAT_EVENT,f),this.stat=w}x(vi,D);function wt(f){const w=Di();Ct(w,new vi(w,f))}Nt.Ma="timingevent";function si(f,w){D.call(this,Nt.Ma,f),this.size=w}x(si,D);function gn(f,w){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){f()},w)}function Yr(){this.g=!0}Yr.prototype.xa=function(){this.g=!1};function Hr(f,w,C,W,pe,Ie){f.info(function(){if(f.g)if(Ie)for(var Qe="",Bt=Ie.split("&"),Xt=0;Xt<Bt.length;Xt++){var Vt=Bt[Xt].split("=");if(1<Vt.length){var fr=Vt[0];Vt=Vt[1];var Pr=fr.split("_");Qe=2<=Pr.length&&Pr[1]=="type"?Qe+(fr+"="+Vt+"&"):Qe+(fr+"=redacted&")}}else Qe=null;else Qe=Ie;return"XMLHTTP REQ ("+W+") [attempt "+pe+"]: "+w+`
`+C+`
`+Qe})}function Ur(f,w,C,W,pe,Ie,Qe){f.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+pe+"]: "+w+`
`+C+`
`+Ie+" "+Qe})}function j(f,w,C,W){f.info(function(){return"XMLHTTP TEXT ("+w+"): "+Y(f,C)+(W?" "+W:"")})}function ee(f,w){f.info(function(){return"TIMEOUT: "+w})}Yr.prototype.info=function(){};function Y(f,w){if(!f.g)return w;if(!w)return null;try{var C=JSON.parse(w);if(C){for(f=0;f<C.length;f++)if(Array.isArray(C[f])){var W=C[f];if(!(2>W.length)){var pe=W[1];if(Array.isArray(pe)&&!(1>pe.length)){var Ie=pe[0];if(Ie!="noop"&&Ie!="stop"&&Ie!="close")for(var Qe=1;Qe<pe.length;Qe++)pe[Qe]=""}}}}return tr(C)}catch{return w}}var X={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Z={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},te;function ye(){}x(ye,Kt),ye.prototype.g=function(){return new XMLHttpRequest},ye.prototype.i=function(){return{}},te=new ye;function ke(f,w,C,W){this.j=f,this.i=w,this.l=C,this.R=W||1,this.U=new Dr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new we}function we(){this.i=null,this.g="",this.h=!1}var Te={},Pe={};function Ke(f,w,C){f.L=1,f.v=Na(yi(w)),f.m=C,f.P=!0,it(f,null)}function it(f,w){f.F=Date.now(),lt(f),f.A=yi(f.v);var C=f.A,W=f.R;Array.isArray(W)||(W=[String(W)]),Mt(C.i,"t",W),f.C=0,C=f.j.J,f.h=new we,f.g=F(f.j,C?w:null,!f.m),0<f.O&&(f.M=new pt(g(f.Y,f,f.g),f.O)),w=f.U,C=f.g,W=f.ca;var pe="readystatechange";Array.isArray(pe)||(pe&&(Gt[0]=pe.toString()),pe=Gt);for(var Ie=0;Ie<pe.length;Ie++){var Qe=ne(C,pe[Ie],W||w.handleEvent,!1,w.h||w);if(!Qe)break;w.g[Qe.key]=Qe}w=f.H?A(f.H):{},f.m?(f.u||(f.u="POST"),w["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,w)):(f.u="GET",f.g.ea(f.A,f.u,null,w)),kn(),Hr(f.i,f.u,f.A,f.l,f.R,f.m)}ke.prototype.ca=function(f){f=f.target;const w=this.M;w&&An(f)==3?w.j():this.Y(f)},ke.prototype.Y=function(f){try{if(f==this.g)e:{const Pr=An(this.g);var w=this.g.Ba();const Ms=this.g.Z();if(!(3>Pr)&&(Pr!=3||this.g&&(this.h.h||this.g.oa()||Hu(this.g)))){this.J||Pr!=4||w==7||(w==8||0>=Ms?kn(3):kn(2)),rr(this);var C=this.g.Z();this.X=C;t:if(mt(this)){var W=Hu(this.g);f="";var pe=W.length,Ie=An(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){br(this),nr(this);var Qe="";break t}this.h.i=new o.TextDecoder}for(w=0;w<pe;w++)this.h.h=!0,f+=this.h.i.decode(W[w],{stream:!(Ie&&w==pe-1)});W.length=0,this.h.g+=f,this.C=0,Qe=this.h.g}else Qe=this.g.oa();if(this.o=C==200,Ur(this.i,this.u,this.A,this.l,this.R,Pr,C),this.o){if(this.T&&!this.K){t:{if(this.g){var Bt,Xt=this.g;if((Bt=Xt.g?Xt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(Bt)){var Vt=Bt;break t}}Vt=null}if(C=Vt)j(this.i,this.l,C,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_i(this,C);else{this.o=!1,this.s=3,wt(12),br(this),nr(this);break e}}if(this.P){C=!0;let Hn;for(;!this.J&&this.C<Qe.length;)if(Hn=et(this,Qe),Hn==Pe){Pr==4&&(this.s=4,wt(14),C=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(Hn==Te){this.s=4,wt(15),j(this.i,this.l,Qe,"[Invalid Chunk]"),C=!1;break}else j(this.i,this.l,Hn,null),_i(this,Hn);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Pr!=4||Qe.length!=0||this.h.h||(this.s=1,wt(16),C=!1),this.o=this.o&&C,!C)j(this.i,this.l,Qe,"[Invalid Chunked Response]"),br(this),nr(this);else if(0<Qe.length&&!this.W){this.W=!0;var fr=this.j;fr.g==this&&fr.ba&&!fr.M&&(fr.j.info("Great, no buffering proxy detected. Bytes received: "+Qe.length),Io(fr),fr.M=!0,wt(11))}}else j(this.i,this.l,Qe,null),_i(this,Qe);Pr==4&&br(this),this.o&&!this.J&&(Pr==4?ra(this.j,this):(this.o=!1,lt(this)))}else ea(this.g),C==400&&0<Qe.indexOf("Unknown SID")?(this.s=3,wt(12)):(this.s=0,wt(13)),br(this),nr(this)}}}catch{}finally{}};function mt(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function et(f,w){var C=f.C,W=w.indexOf(`
`,C);return W==-1?Pe:(C=Number(w.substring(C,W)),isNaN(C)?Te:(W+=1,W+C>w.length?Pe:(w=w.slice(W,W+C),f.C=W+C,w)))}ke.prototype.cancel=function(){this.J=!0,br(this)};function lt(f){f.S=Date.now()+f.I,Lt(f,f.I)}function Lt(f,w){if(f.B!=null)throw Error("WatchDog timer not null");f.B=gn(g(f.ba,f),w)}function rr(f){f.B&&(o.clearTimeout(f.B),f.B=null)}ke.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(ee(this.i,this.A),this.L!=2&&(kn(),wt(17)),br(this),this.s=2,nr(this)):Lt(this,this.S-f)};function nr(f){f.j.G==0||f.J||ra(f.j,f)}function br(f){rr(f);var w=f.M;w&&typeof w.ma=="function"&&w.ma(),f.M=null,qn(f.U),f.g&&(w=f.g,f.g=null,w.abort(),w.ma())}function _i(f,w){try{var C=f.j;if(C.G!=0&&(C.g==f||zn(C.h,f))){if(!f.K&&zn(C.h,f)&&C.G==3){try{var W=C.Da.g.parse(w)}catch{W=null}if(Array.isArray(W)&&W.length==3){var pe=W;if(pe[0]==0){e:if(!C.u){if(C.g)if(C.g.F+3e3<f.F)Os(C),Eo(C);else break e;Da(C),wt(18)}}else C.za=pe[1],0<C.za-C.T&&37500>pe[2]&&C.F&&C.v==0&&!C.C&&(C.C=gn(g(C.Za,C),6e3));if(1>=es(C.h)&&C.ca){try{C.ca()}catch{}C.ca=void 0}}else ai(C,11)}else if((f.K||C.g==f)&&Os(C),!L(w))for(pe=C.Da.g.parse(w),w=0;w<pe.length;w++){let Vt=pe[w];if(C.T=Vt[0],Vt=Vt[1],C.G==2)if(Vt[0]=="c"){C.K=Vt[1],C.ia=Vt[2];const fr=Vt[3];fr!=null&&(C.la=fr,C.j.info("VER="+C.la));const Pr=Vt[4];Pr!=null&&(C.Aa=Pr,C.j.info("SVER="+C.Aa));const Ms=Vt[5];Ms!=null&&typeof Ms=="number"&&0<Ms&&(W=1.5*Ms,C.L=W,C.j.info("backChannelRequestTimeoutMs_="+W)),W=C;const Hn=f.g;if(Hn){const na=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(na){var Ie=W.h;Ie.g||na.indexOf("spdy")==-1&&na.indexOf("quic")==-1&&na.indexOf("h2")==-1||(Ie.j=Ie.l,Ie.g=new Set,Ie.h&&(Fr(Ie,Ie.h),Ie.h=null))}if(W.D){const ia=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;ia&&(W.ya=ia,dr(W.I,W.D,ia))}}C.G=3,C.l&&C.l.ua(),C.ba&&(C.R=Date.now()-f.F,C.j.info("Handshake RTT: "+C.R+"ms")),W=C;var Qe=f;if(W.qa=v(W,W.J?W.ia:null,W.W),Qe.K){Tc(W.h,Qe);var Bt=Qe,Xt=W.L;Xt&&(Bt.I=Xt),Bt.B&&(rr(Bt),lt(Bt)),W.g=Qe}else Ao(W);0<C.i.length&&To(C)}else Vt[0]!="stop"&&Vt[0]!="close"||ai(C,7);else C.G==3&&(Vt[0]=="stop"||Vt[0]=="close"?Vt[0]=="stop"?ai(C,7):Fs(C):Vt[0]!="noop"&&C.l&&C.l.ta(Vt),C.v=0)}}kn(4)}catch{}}var Cs=class{constructor(f,w){this.g=f,this.map=w}};function Zi(f){this.l=f||10,o.PerformanceNavigationTiming?(f=o.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fi(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function es(f){return f.h?1:f.g?f.g.size:0}function zn(f,w){return f.h?f.h==w:f.g?f.g.has(w):!1}function Fr(f,w){f.g?f.g.add(w):f.h=w}function Tc(f,w){f.h&&f.h==w?f.h=null:f.g&&f.g.has(w)&&f.g.delete(w)}Zi.prototype.cancel=function(){if(this.i=bc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function bc(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let w=f.i;for(const C of f.g.values())w=w.concat(C.D);return w}return _(f.i)}function Vu(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(c(f)){for(var w=[],C=f.length,W=0;W<C;W++)w.push(f[W]);return w}w=[],C=0;for(W in f)w[C++]=f[W];return w}function Ac(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(c(f)||typeof f=="string"){var w=[];f=f.length;for(var C=0;C<f;C++)w.push(C);return w}w=[],C=0;for(const W in f)w[C++]=W;return w}}}function Uu(f,w){if(f.forEach&&typeof f.forEach=="function")f.forEach(w,void 0);else if(c(f)||typeof f=="string")Array.prototype.forEach.call(f,w,void 0);else for(var C=Ac(f),W=Vu(f),pe=W.length,Ie=0;Ie<pe;Ie++)w.call(void 0,W[Ie],C&&C[Ie],f)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function fo(f,w){if(f){f=f.split("&");for(var C=0;C<f.length;C++){var W=f[C].indexOf("="),pe=null;if(0<=W){var Ie=f[C].substring(0,W);pe=f[C].substring(W+1)}else Ie=f[C];w(Ie,pe?decodeURIComponent(pe.replace(/\+/g," ")):"")}}}function Xr(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Xr){this.h=f.h,Pa(this,f.j),this.o=f.o,this.g=f.g,po(this,f.s),this.l=f.l;var w=f.i,C=new Qs;C.i=w.i,w.g&&(C.g=new Map(w.g),C.h=w.h),Ic(this,C),this.m=f.m}else f&&(w=String(f).match(Oi))?(this.h=!1,Pa(this,w[1]||"",!0),this.o=Ca(w[2]||""),this.g=Ca(w[3]||"",!0),po(this,w[4]),this.l=Ca(w[5]||"",!0),Ic(this,w[6]||"",!0),this.m=Ca(w[7]||"")):(this.h=!1,this.i=new Qs(null,this.h))}Xr.prototype.toString=function(){var f=[],w=this.j;w&&f.push(ks(w,ju,!0),":");var C=this.g;return(C||w=="file")&&(f.push("//"),(w=this.o)&&f.push(ks(w,ju,!0),"@"),f.push(encodeURIComponent(String(C)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.s,C!=null&&f.push(":",String(C))),(C=this.l)&&(this.g&&C.charAt(0)!="/"&&f.push("/"),f.push(ks(C,C.charAt(0)=="/"?Rs:Ph,!0))),(C=this.i.toString())&&f.push("?",C),(C=this.m)&&f.push("#",ks(C,go)),f.join("")};function yi(f){return new Xr(f)}function Pa(f,w,C){f.j=C?Ca(w,!0):w,f.j&&(f.j=f.j.replace(/:$/,""))}function po(f,w){if(w){if(w=Number(w),isNaN(w)||0>w)throw Error("Bad port number "+w);f.s=w}else f.s=null}function Ic(f,w,C){w instanceof Qs?(f.i=w,Nh(f.i,f.h)):(C||(w=ks(w,mo)),f.i=new Qs(w,f.h))}function dr(f,w,C){f.i.set(w,C)}function Na(f){return dr(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Ca(f,w){return f?w?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function ks(f,w,C){return typeof f=="string"?(f=encodeURI(f).replace(w,Sh),C&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function Sh(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var ju=/[#\/\?@]/g,Ph=/[#\?:]/g,Rs=/[#\?]/g,mo=/[#\?@]/g,go=/#/g;function Qs(f,w){this.h=this.g=null,this.i=f||null,this.j=!!w}function Or(f){f.g||(f.g=new Map,f.h=0,f.i&&fo(f.i,function(w,C){f.add(decodeURIComponent(w.replace(/\+/g," ")),C)}))}r=Qs.prototype,r.add=function(f,w){Or(this),this.i=null,f=Zs(this,f);var C=this.g.get(f);return C||this.g.set(f,C=[]),C.push(w),this.h+=1,this};function qu(f,w){Or(f),w=Zs(f,w),f.g.has(w)&&(f.i=null,f.h-=f.g.get(w).length,f.g.delete(w))}function Sc(f,w){return Or(f),w=Zs(f,w),f.g.has(w)}r.forEach=function(f,w){Or(this),this.g.forEach(function(C,W){C.forEach(function(pe){f.call(w,pe,W,this)},this)},this)},r.na=function(){Or(this);const f=Array.from(this.g.values()),w=Array.from(this.g.keys()),C=[];for(let W=0;W<w.length;W++){const pe=f[W];for(let Ie=0;Ie<pe.length;Ie++)C.push(w[W])}return C},r.V=function(f){Or(this);let w=[];if(typeof f=="string")Sc(this,f)&&(w=w.concat(this.g.get(Zs(this,f))));else{f=Array.from(this.g.values());for(let C=0;C<f.length;C++)w=w.concat(f[C])}return w},r.set=function(f,w){return Or(this),this.i=null,f=Zs(this,f),Sc(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[w]),this.h+=1,this},r.get=function(f,w){return f?(f=this.V(f),0<f.length?String(f[0]):w):w};function Mt(f,w,C){qu(f,w),0<C.length&&(f.i=null,f.g.set(Zs(f,w),_(C)),f.h+=C.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],w=Array.from(this.g.keys());for(var C=0;C<w.length;C++){var W=w[C];const Ie=encodeURIComponent(String(W)),Qe=this.V(W);for(W=0;W<Qe.length;W++){var pe=Ie;Qe[W]!==""&&(pe+="="+encodeURIComponent(String(Qe[W]))),f.push(pe)}}return this.i=f.join("&")};function Zs(f,w){return w=String(w),f.j&&(w=w.toLowerCase()),w}function Nh(f,w){w&&!f.j&&(Or(f),f.i=null,f.g.forEach(function(C,W){var pe=W.toLowerCase();W!=pe&&(qu(this,W),Mt(this,pe,C))},f)),f.j=w}function gs(f,w){const C=new Yr;if(o.Image){const W=new Image;W.onload=p(ts,C,"TestLoadImage: loaded",!0,w,W),W.onerror=p(ts,C,"TestLoadImage: error",!1,w,W),W.onabort=p(ts,C,"TestLoadImage: abort",!1,w,W),W.ontimeout=p(ts,C,"TestLoadImage: timeout",!1,w,W),o.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=f}else w(!1)}function zu(f,w){const C=new Yr,W=new AbortController,pe=setTimeout(()=>{W.abort(),ts(C,"TestPingServer: timeout",!1,w)},1e4);fetch(f,{signal:W.signal}).then(Ie=>{clearTimeout(pe),Ie.ok?ts(C,"TestPingServer: ok",!0,w):ts(C,"TestPingServer: server error",!1,w)}).catch(()=>{clearTimeout(pe),ts(C,"TestPingServer: error",!1,w)})}function ts(f,w,C,W,pe){try{pe&&(pe.onload=null,pe.onerror=null,pe.onabort=null,pe.ontimeout=null),W(C)}catch{}}function vo(){this.g=new Li}function Pc(f,w,C){const W=C||"";try{Uu(f,function(pe,Ie){let Qe=pe;u(pe)&&(Qe=tr(pe)),w.push(W+Ie+"="+encodeURIComponent(Qe))})}catch(pe){throw w.push(W+"type="+encodeURIComponent("_badmap")),pe}}function _o(f){this.l=f.Ub||null,this.j=f.eb||!1}x(_o,Kt),_o.prototype.g=function(){return new yo(this.l,this.j)},_o.prototype.i=function(f){return function(){return f}}({});function yo(f,w){It.call(this),this.D=f,this.o=w,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(yo,It),r=yo.prototype,r.open=function(f,w){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=w,this.readyState=1,rs(this)},r.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const w={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(w.body=f),(this.D||o).fetch(new Request(this.A,w)).then(this.Sa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ls(this)),this.readyState=0},r.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,rs(this)),this.g&&(this.readyState=3,rs(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Wu(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Wu(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}r.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var w=f.value?f.value:new Uint8Array(0);(w=this.v.decode(w,{stream:!f.done}))&&(this.response=this.responseText+=w)}f.done?Ls(this):rs(this),this.readyState==3&&Wu(this)}},r.Ra=function(f){this.g&&(this.response=this.responseText=f,Ls(this))},r.Qa=function(f){this.g&&(this.response=f,Ls(this))},r.ga=function(){this.g&&Ls(this)};function Ls(f){f.readyState=4,f.l=null,f.j=null,f.v=null,rs(f)}r.setRequestHeader=function(f,w){this.u.append(f,w)},r.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],w=this.h.entries();for(var C=w.next();!C.done;)C=C.value,f.push(C[0]+": "+C[1]),C=w.next();return f.join(`\r
`)};function rs(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function Ds(f){let w="";return oe(f,function(C,W){w+=W,w+=":",w+=C,w+=`\r
`}),w}function Nc(f,w,C){e:{for(W in C){var W=!1;break e}W=!0}W||(C=Ds(C),typeof f=="string"?C!=null&&encodeURIComponent(String(C)):dr(f,w,C))}function hr(f){It.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(hr,It);var Cc=/^https?$/i,wo=["POST","PUT"];r=hr.prototype,r.Ha=function(f){this.J=f},r.ea=function(f,w,C,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);w=w?w.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():te.g(),this.v=this.o?Qi(this.o):Qi(te),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(w,String(f),!0),this.B=!1}catch(Ie){kc(this,Ie);return}if(f=C||"",C=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var pe in W)C.set(pe,W[pe]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const Ie of W.keys())C.set(Ie,W.get(Ie));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(C.keys()).find(Ie=>Ie.toLowerCase()=="content-type"),pe=o.FormData&&f instanceof o.FormData,!(0<=Array.prototype.indexOf.call(wo,w,void 0))||W||pe||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ie,Qe]of C)this.g.setRequestHeader(Ie,Qe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ns(this),this.u=!0,this.g.send(f),this.u=!1}catch(Ie){kc(this,Ie)}};function kc(f,w){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=w,f.m=5,Rc(f),ka(f)}function Rc(f){f.A||(f.A=!0,Ct(f,"complete"),Ct(f,"error"))}r.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Ct(this,"complete"),Ct(this,"abort"),ka(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ka(this,!0)),hr.aa.N.call(this)},r.Ea=function(){this.s||(this.B||this.u||this.j?Lc(this):this.bb())},r.bb=function(){Lc(this)};function Lc(f){if(f.h&&typeof a<"u"&&(!f.v[1]||An(f)!=4||f.Z()!=2)){if(f.u&&An(f)==4)kt(f.Ea,0,f);else if(Ct(f,"readystatechange"),An(f)==4){f.h=!1;try{const Qe=f.Z();e:switch(Qe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var w=!0;break e;default:w=!1}var C;if(!(C=w)){var W;if(W=Qe===0){var pe=String(f.D).match(Oi)[1]||null;!pe&&o.self&&o.self.location&&(pe=o.self.location.protocol.slice(0,-1)),W=!Cc.test(pe?pe.toLowerCase():"")}C=W}if(C)Ct(f,"complete"),Ct(f,"success");else{f.m=6;try{var Ie=2<An(f)?f.g.statusText:""}catch{Ie=""}f.l=Ie+" ["+f.Z()+"]",Rc(f)}}finally{ka(f)}}}}function ka(f,w){if(f.g){ns(f);const C=f.g,W=f.v[0]?()=>{}:null;f.g=null,f.v=null,w||Ct(f,"ready");try{C.onreadystatechange=W}catch{}}}function ns(f){f.I&&(o.clearTimeout(f.I),f.I=null)}r.isActive=function(){return!!this.g};function An(f){return f.g?f.g.readyState:0}r.Z=function(){try{return 2<An(this)?this.g.status:-1}catch{return-1}},r.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.Oa=function(f){if(this.g){var w=this.g.responseText;return f&&w.indexOf(f)==0&&(w=w.substring(f.length)),Er(w)}};function Hu(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function ea(f){const w={};f=(f.g&&2<=An(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<f.length;W++){if(L(f[W]))continue;var C=b(f[W]);const pe=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const Ie=w[pe]||[];w[pe]=Ie,Ie.push(C)}N(w,function(W){return W.join(", ")})}r.Ba=function(){return this.m},r.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Wn(f,w,C){return C&&C.internalChannelParams&&C.internalChannelParams[f]||w}function xo(f){this.Aa=0,this.i=[],this.j=new Yr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Wn("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Wn("baseRetryDelayMs",5e3,f),this.cb=Wn("retryDelaySeedMs",1e4,f),this.Wa=Wn("forwardChannelMaxRetries",2,f),this.wa=Wn("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new Zi(f&&f.concurrentRequestLimit),this.Da=new vo,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}r=xo.prototype,r.la=8,r.G=1,r.connect=function(f,w,C,W){wt(0),this.W=f,this.H=w||{},C&&W!==void 0&&(this.H.OSID=C,this.H.OAID=W),this.F=this.X,this.I=v(this,null,this.W),To(this)};function Fs(f){if(Ra(f),f.G==3){var w=f.U++,C=yi(f.I);if(dr(C,"SID",f.K),dr(C,"RID",w),dr(C,"TYPE","terminate"),ta(f,C),w=new ke(f,f.j,w),w.L=2,w.v=Na(yi(C)),C=!1,o.navigator&&o.navigator.sendBeacon)try{C=o.navigator.sendBeacon(w.v.toString(),"")}catch{}!C&&o.Image&&(new Image().src=w.v,C=!0),C||(w.g=F(w.j,null),w.g.ea(w.v)),w.F=Date.now(),lt(w)}Po(f)}function Eo(f){f.g&&(Io(f),f.g.cancel(),f.g=null)}function Ra(f){Eo(f),f.u&&(o.clearTimeout(f.u),f.u=null),Os(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&o.clearTimeout(f.s),f.s=null)}function To(f){if(!Fi(f.h)&&!f.s){f.s=!0;var w=f.Ga;Ne||Fe(),_e||(Ne(),_e=!0),Ce.add(w,f),f.B=0}}function Dc(f,w){return es(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=w.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=gn(g(f.Ga,f,w),So(f,f.B)),f.B++,!0)}r.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const pe=new ke(this,this.j,f);let Ie=this.o;if(this.S&&(Ie?(Ie=A(Ie),V(Ie,this.S)):Ie=this.S),this.m!==null||this.O||(pe.H=Ie,Ie=null),this.P)e:{for(var w=0,C=0;C<this.i.length;C++){t:{var W=this.i[C];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(w+=W,4096<w){w=C;break e}if(w===4096||C===this.i.length-1){w=C+1;break e}}w=1e3}else w=1e3;w=La(this,pe,w),C=yi(this.I),dr(C,"RID",f),dr(C,"CVER",22),this.D&&dr(C,"X-HTTP-Session-Id",this.D),ta(this,C),Ie&&(this.O?w="headers="+encodeURIComponent(String(Ds(Ie)))+"&"+w:this.m&&Nc(C,this.m,Ie)),Fr(this.h,pe),this.Ua&&dr(C,"TYPE","init"),this.P?(dr(C,"$req",w),dr(C,"SID","null"),pe.T=!0,Ke(pe,C,null)):Ke(pe,C,w),this.G=2}}else this.G==3&&(f?bo(this,f):this.i.length==0||Fi(this.h)||bo(this))};function bo(f,w){var C;w?C=w.l:C=f.U++;const W=yi(f.I);dr(W,"SID",f.K),dr(W,"RID",C),dr(W,"AID",f.T),ta(f,W),f.m&&f.o&&Nc(W,f.m,f.o),C=new ke(f,f.j,C,f.B+1),f.m===null&&(C.H=f.o),w&&(f.i=w.D.concat(f.i)),w=La(f,C,1e3),C.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),Fr(f.h,C),Ke(C,W,w)}function ta(f,w){f.H&&oe(f.H,function(C,W){dr(w,W,C)}),f.l&&Uu({},function(C,W){dr(w,W,C)})}function La(f,w,C){C=Math.min(f.i.length,C);var W=f.l?g(f.l.Na,f.l,f):null;e:{var pe=f.i;let Ie=-1;for(;;){const Qe=["count="+C];Ie==-1?0<C?(Ie=pe[0].g,Qe.push("ofs="+Ie)):Ie=0:Qe.push("ofs="+Ie);let Bt=!0;for(let Xt=0;Xt<C;Xt++){let Vt=pe[Xt].g;const fr=pe[Xt].map;if(Vt-=Ie,0>Vt)Ie=Math.max(0,pe[Xt].g-100),Bt=!1;else try{Pc(fr,Qe,"req"+Vt+"_")}catch{W&&W(fr)}}if(Bt){W=Qe.join("&");break e}}}return f=f.i.splice(0,C),w.D=f,W}function Ao(f){if(!f.g&&!f.u){f.Y=1;var w=f.Fa;Ne||Fe(),_e||(Ne(),_e=!0),Ce.add(w,f),f.v=0}}function Da(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=gn(g(f.Fa,f),So(f,f.v)),f.v++,!0)}r.Fa=function(){if(this.u=null,$u(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=gn(g(this.ab,this),f)}},r.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wt(10),Eo(this),$u(this))};function Io(f){f.A!=null&&(o.clearTimeout(f.A),f.A=null)}function $u(f){f.g=new ke(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var w=yi(f.qa);dr(w,"RID","rpc"),dr(w,"SID",f.K),dr(w,"AID",f.T),dr(w,"CI",f.F?"0":"1"),!f.F&&f.ja&&dr(w,"TO",f.ja),dr(w,"TYPE","xmlhttp"),ta(f,w),f.m&&f.o&&Nc(w,f.m,f.o),f.L&&(f.g.I=f.L);var C=f.g;f=f.ia,C.L=1,C.v=Na(yi(w)),C.m=null,C.P=!0,it(C,f)}r.Za=function(){this.C!=null&&(this.C=null,Eo(this),Da(this),wt(19))};function Os(f){f.C!=null&&(o.clearTimeout(f.C),f.C=null)}function ra(f,w){var C=null;if(f.g==w){Os(f),Io(f),f.g=null;var W=2}else if(zn(f.h,w))C=w.D,Tc(f.h,w),W=1;else return;if(f.G!=0){if(w.o)if(W==1){C=w.m?w.m.length:0,w=Date.now()-w.F;var pe=f.B;W=Di(),Ct(W,new si(W,C)),To(f)}else Ao(f);else if(pe=w.s,pe==3||pe==0&&0<w.X||!(W==1&&Dc(f,w)||W==2&&Da(f)))switch(C&&0<C.length&&(w=f.h,w.i=w.i.concat(C)),pe){case 1:ai(f,5);break;case 4:ai(f,10);break;case 3:ai(f,6);break;default:ai(f,2)}}}function So(f,w){let C=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(C*=2),C*w}function ai(f,w){if(f.j.info("Error code "+w),w==2){var C=g(f.fb,f),W=f.Xa;const pe=!W;W=new Xr(W||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Pa(W,"https"),Na(W),pe?gs(W.toString(),C):zu(W.toString(),C)}else wt(2);f.G=0,f.l&&f.l.sa(w),Po(f),Ra(f)}r.fb=function(f){f?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Po(f){if(f.G=0,f.ka=[],f.l){const w=bc(f.h);(w.length!=0||f.i.length!=0)&&(E(f.ka,w),E(f.ka,f.i),f.h.i.length=0,_(f.i),f.i.length=0),f.l.ra()}}function v(f,w,C){var W=C instanceof Xr?yi(C):new Xr(C);if(W.g!="")w&&(W.g=w+"."+W.g),po(W,W.s);else{var pe=o.location;W=pe.protocol,w=w?w+"."+pe.hostname:pe.hostname,pe=+pe.port;var Ie=new Xr(null);W&&Pa(Ie,W),w&&(Ie.g=w),pe&&po(Ie,pe),C&&(Ie.l=C),W=Ie}return C=f.D,w=f.ya,C&&w&&dr(W,C,w),dr(W,"VER",f.la),ta(f,W),W}function F(f,w,C){if(w&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return w=f.Ca&&!f.pa?new hr(new _o({eb:C})):new hr(f.pa),w.Ha(f.J),w}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function re(){}r=re.prototype,r.ua=function(){},r.ta=function(){},r.sa=function(){},r.ra=function(){},r.isActive=function(){return!0},r.Na=function(){};function ce(){}ce.prototype.g=function(f,w){return new me(f,w)};function me(f,w){It.call(this),this.g=new xo(w),this.l=f,this.h=w&&w.messageUrlParams||null,f=w&&w.messageHeaders||null,w&&w.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=w&&w.initMessageHeaders||null,w&&w.messageContentType&&(f?f["X-WebChannel-Content-Type"]=w.messageContentType:f={"X-WebChannel-Content-Type":w.messageContentType}),w&&w.va&&(f?f["X-WebChannel-Client-Profile"]=w.va:f={"X-WebChannel-Client-Profile":w.va}),this.g.S=f,(f=w&&w.Sb)&&!L(f)&&(this.g.m=f),this.v=w&&w.supportsCrossDomainXhr||!1,this.u=w&&w.sendRawJson||!1,(w=w&&w.httpSessionIdParam)&&!L(w)&&(this.g.D=w,f=this.h,f!==null&&w in f&&(f=this.h,w in f&&delete f[w])),this.j=new dt(this)}x(me,It),me.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},me.prototype.close=function(){Fs(this.g)},me.prototype.o=function(f){var w=this.g;if(typeof f=="string"){var C={};C.__data__=f,f=C}else this.u&&(C={},C.__data__=tr(f),f=C);w.i.push(new Cs(w.Ya++,f)),w.G==3&&To(w)},me.prototype.N=function(){this.g.l=null,delete this.j,Fs(this.g),delete this.g,me.aa.N.call(this)};function Oe(f){gi.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var w=f.__sm__;if(w){e:{for(const C in w){f=C;break e}f=void 0}(this.i=f)&&(f=this.i,w=w!==null&&f in w?w[f]:void 0),this.data=w}else this.data=f}x(Oe,gi);function Ye(){cr.call(this),this.status=1}x(Ye,cr);function dt(f){this.g=f}x(dt,re),dt.prototype.ua=function(){Ct(this.g,"a")},dt.prototype.ta=function(f){Ct(this.g,new Oe(f))},dt.prototype.sa=function(f){Ct(this.g,new Ye)},dt.prototype.ra=function(){Ct(this.g,"b")},ce.prototype.createWebChannel=ce.prototype.g,me.prototype.send=me.prototype.o,me.prototype.open=me.prototype.m,me.prototype.close=me.prototype.close,cE=function(){return new ce},oE=function(){return Di()},aE=Nt,Vg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},X.NO_ERROR=0,X.TIMEOUT=8,X.HTTP_ERROR=6,b0=X,Z.COMPLETE="complete",sE=Z,Tr.EventType=bn,bn.OPEN="a",bn.CLOSE="b",bn.ERROR="c",bn.MESSAGE="d",It.prototype.listen=It.prototype.K,sf=Tr,hr.prototype.listenOnce=hr.prototype.L,hr.prototype.getLastError=hr.prototype.Ka,hr.prototype.getLastErrorCode=hr.prototype.Ba,hr.prototype.getStatus=hr.prototype.Z,hr.prototype.getResponseJson=hr.prototype.Oa,hr.prototype.getResponseText=hr.prototype.oa,hr.prototype.send=hr.prototype.ea,hr.prototype.setWithCredentials=hr.prototype.Ha,iE=hr}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});const Z_="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Fn.UNAUTHENTICATED=new Fn(null),Fn.GOOGLE_CREDENTIALS=new Fn("google-credentials-uid"),Fn.FIRST_PARTY=new Fn("first-party-uid"),Fn.MOCK_USER=new Fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ph="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nc=new bp("@firebase/firestore");function vl(){return nc.logLevel}function Yk(r){nc.setLogLevel(r)}function Je(r,...e){if(nc.logLevel<=Yt.DEBUG){const t=e.map(r2);nc.debug(`Firestore (${ph}): ${r}`,...t)}}function fn(r,...e){if(nc.logLevel<=Yt.ERROR){const t=e.map(r2);nc.error(`Firestore (${ph}): ${r}`,...t)}}function Ea(r,...e){if(nc.logLevel<=Yt.WARN){const t=e.map(r2);nc.warn(`Firestore (${ph}): ${r}`,...t)}}function r2(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(r="Unexpected state"){const e=`FIRESTORE (${ph}) INTERNAL ASSERTION FAILED: `+r;throw fn(e),new Error(e)}function bt(r,e){r||xt()}function Xk(r,e){r||xt()}function gt(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Xe extends Pn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Jk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Fn.UNAUTHENTICATED))}shutdown(){}}class Qk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zk{constructor(e){this.t=e,this.currentUser=Fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){bt(this.o===void 0);let n=this.i;const i=c=>this.i!==n?(n=this.i,t(c)):Promise.resolve();let s=new ti;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new ti,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const c=s;e.enqueueRetryable(async()=>{await c.promise,await i(this.currentUser)})},o=c=>{Je("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>o(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?o(c):(Je("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new ti)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(n=>this.i!==e?(Je("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(bt(typeof n.accessToken=="string"),new uE(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return bt(e===null||typeof e=="string"),new Fn(e)}}class eR{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Fn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class tR{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new eR(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Fn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class rR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class nR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){bt(this.o===void 0);const n=s=>{s.error!=null&&Je("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const a=s.token!==this.R;return this.R=s.token,Je("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>n(s))};const i=s=>{Je("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Je("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(bt(typeof t.token=="string"),this.R=t.token,new rR(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iR(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let n=0;n<r;n++)t[n]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const i=iR(40);for(let s=0;s<i.length;++s)n.length<20&&i[s]<t&&(n+=e.charAt(i[s]%e.length))}return n}}function jt(r,e){return r<e?-1:r>e?1:0}function Kl(r,e,t){return r.length===e.length&&r.every((n,i)=>t(n,e[i]))}function hE(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Xe(Le.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Wr.fromMillis(Date.now())}static fromDate(e){return Wr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Wr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Pt(e)}static min(){return new Pt(new Wr(0,0))}static max(){return new Pt(new Wr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,t,n){t===void 0?t=0:t>e.length&&xt(),n===void 0?n=e.length-t:n>e.length-t&&xt(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return Df.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Df?e.forEach(n=>{t.push(n)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const s=e.get(i),a=t.get(i);if(s<a)return-1;if(s>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qt extends Df{construct(e,t,n){return new Qt(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(i=>i.length>0))}return new Qt(t)}static emptyPath(){return new Qt([])}}const sR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qr extends Df{construct(e,t,n){return new qr(e,t,n)}static isValidIdentifier(e){return sR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new qr(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const s=()=>{if(n.length===0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let a=!1;for(;i<e.length;){const o=e[i];if(o==="\\"){if(i+1===e.length)throw new Xe(Le.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[i+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Xe(Le.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=c,i+=2}else o==="`"?(a=!a,i++):o!=="."||a?(n+=o,i++):(s(),i++)}if(s(),a)throw new Xe(Le.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qr(t)}static emptyPath(){return new qr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.path=e}static fromPath(e){return new ft(Qt.fromString(e))}static fromName(e){return new ft(Qt.fromString(e).popFirst(5))}static empty(){return new ft(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ft(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W0{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function Ug(r){return r.fields.find(e=>e.kind===2)}function zc(r){return r.fields.filter(e=>e.kind!==2)}W0.UNKNOWN_ID=-1;class A0{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ff{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ff(0,ps.min())}}function fE(r,e){const t=r.toTimestamp().seconds,n=r.toTimestamp().nanoseconds+1,i=Pt.fromTimestamp(n===1e9?new Wr(t+1,0):new Wr(t,n));return new ps(i,ft.empty(),e)}function dE(r){return new ps(r.readTime,r.key,-1)}class ps{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new ps(Pt.min(),ft.empty(),-1)}static max(){return new ps(Pt.max(),ft.empty(),-1)}}function n2(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ft.comparator(r.documentKey,e.documentKey),t!==0?t:jt(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _c(r){if(r.code!==Le.FAILED_PRECONDITION||r.message!==pE)throw r;Je("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Se((n,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(n,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Se?t:Se.resolve(t)}catch(t){return Se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Se.reject(t)}static resolve(e){return new Se((t,n)=>{t(e)})}static reject(e){return new Se((t,n)=>{n(e)})}static waitFor(e){return new Se((t,n)=>{let i=0,s=0,a=!1;e.forEach(o=>{++i,o.next(()=>{++s,a&&s===i&&t()},c=>n(c))}),a=!0,s===i&&t()})}static or(e){let t=Se.resolve(!1);for(const n of e)t=t.next(i=>i?Se.resolve(i):n());return t}static forEach(e,t){const n=[];return e.forEach((i,s)=>{n.push(t.call(this,i,s))}),this.waitFor(n)}static mapArray(e,t){return new Se((n,i)=>{const s=e.length,a=new Array(s);let o=0;for(let c=0;c<s;c++){const u=c;t(e[u]).next(l=>{a[u]=l,++o,o===s&&n(a)},l=>i(l))}})}static doWhile(e,t){return new Se((n,i)=>{const s=()=>{e()===!0?t().next(()=>{s()},i):n()};s()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new ti,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new df(e,t.error)):this.V.resolve()},this.transaction.onerror=n=>{const i=i2(n.target.error);this.V.reject(new df(e,i))}}static open(e,t,n,i){try{return new Mp(t,e.transaction(i,n))}catch(s){throw new df(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Je("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new oR(t)}}class va{constructor(e,t,n){this.name=e,this.version=t,this.p=n,va.S(Gr())===12.2&&fn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Je("SimpleDb","Removing database:",e),Hc(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!ou())return!1;if(va.v())return!0;const e=Gr(),t=va.S(e),n=0<t&&t<10,i=gE(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}async M(e){return this.db||(Je("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=s=>{const a=s.target.result;t(a)},i.onblocked=()=>{n(new df(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=s=>{const a=s.target.error;a.name==="VersionError"?n(new Xe(Le.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):a.name==="InvalidStateError"?n(new Xe(Le.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a)):n(new df(e,a))},i.onupgradeneeded=s=>{Je("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);const a=s.target.result;this.p.O(a,i.transaction,s.oldVersion,this.version).next(()=>{Je("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const s=t==="readonly";let a=0;for(;;){++a;try{this.db=await this.M(e);const o=Mp.open(this.db,e,s?"readonly":"readwrite",n),c=i(o).next(u=>(o.g(),u)).catch(u=>(o.abort(u),Se.reject(u))).toPromise();return c.catch(()=>{}),await o.m,c}catch(o){const c=o,u=c.name!=="FirebaseError"&&a<3;if(Je("SimpleDb","Transaction failed with error:",c.message,"Retrying:",u),this.close(),!u)return Promise.reject(c)}}}close(){this.db&&this.db.close(),this.db=void 0}}function gE(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class aR{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Hc(this.B.delete())}}class df extends Xe{constructor(e,t){super(Le.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function yc(r){return r.name==="IndexedDbTransactionError"}class oR{constructor(e){this.store=e}put(e,t){let n;return t!==void 0?(Je("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Je("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Hc(n)}add(e){return Je("SimpleDb","ADD",this.store.name,e,e),Hc(this.store.add(e))}get(e){return Hc(this.store.get(e)).next(t=>(t===void 0&&(t=null),Je("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Je("SimpleDb","DELETE",this.store.name,e),Hc(this.store.delete(e))}count(){return Je("SimpleDb","COUNT",this.store.name),Hc(this.store.count())}U(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if(typeof i.getAll=="function"){const s=i.getAll(n.range);return new Se((a,o)=>{s.onerror=c=>{o(c.target.error)},s.onsuccess=c=>{a(c.target.result)}})}{const s=this.cursor(n),a=[];return this.W(s,(o,c)=>{a.push(c)}).next(()=>a)}}G(e,t){const n=this.store.getAll(e,t===null?void 0:t);return new Se((i,s)=>{n.onerror=a=>{s(a.target.error)},n.onsuccess=a=>{i(a.target.result)}})}j(e,t){Je("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const i=this.cursor(n);return this.W(i,(s,a,o)=>o.delete())}J(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.W(i,t)}Y(e){const t=this.cursor({});return new Se((n,i)=>{t.onerror=s=>{const a=i2(s.target.error);i(a)},t.onsuccess=s=>{const a=s.target.result;a?e(a.primaryKey,a.value).next(o=>{o?a.continue():n()}):n()}})}W(e,t){const n=[];return new Se((i,s)=>{e.onerror=a=>{s(a.target.error)},e.onsuccess=a=>{const o=a.target.result;if(!o)return void i();const c=new aR(o),u=t(o.primaryKey,o.value,c);if(u instanceof Se){const l=u.catch(d=>(c.done(),Se.reject(d)));n.push(l)}c.isDone?i():c.K===null?o.continue():o.continue(c.K)}}).next(()=>Se.waitFor(n))}options(e,t){let n;return e!==void 0&&(typeof e=="string"?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Hc(r){return new Se((e,t)=>{r.onsuccess=n=>{const i=n.target.result;e(i)},r.onerror=n=>{const i=i2(n.target.error);t(i)}})}let ey=!1;function i2(r){const e=va.S(Gr());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const n=new Xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ey||(ey=!0,setTimeout(()=>{throw n},0)),n}}return r}class cR{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){Je("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Je("IndexBackfiller",`Documents written: ${await this.Z.ee()}`)}catch(t){yc(t)?Je("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await _c(t)}await this.X(6e4)})}}class uR{constructor(e,t){this.localStore=e,this.persistence=t}async ee(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let i=t,s=!0;return Se.doWhile(()=>s===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(a!==null&&!n.has(a))return Je("IndexBackfiller",`Processing collection: ${a}`),this.ne(e,a,i).next(o=>{i-=o,n.add(a)});s=!1})).next(()=>t-i)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next(s=>{const a=s.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.re(i,s)).next(o=>(Je("IndexBackfiller",`Updating offset: ${o}`),this.localStore.indexManager.updateCollectionGroup(e,t,o))).next(()=>a.size)}))}re(e,t){let n=e;return t.changes.forEach((i,s)=>{const a=dE(s);n2(a,n)>0&&(n=a)}),new ps(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=n=>this.ie(n),this.se=n=>t.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Wi.oe=-1;function hd(r){return r==null}function Of(r){return r===0&&1/r==-1/0}function vE(r){return typeof r=="number"&&Number.isInteger(r)&&!Of(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=ty(e)),e=lR(r.get(t),e);return ty(e)}function lR(r,e){let t=e;const n=r.length;for(let i=0;i<n;i++){const s=r.charAt(i);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function ty(r){return r+""}function pa(r){const e=r.length;if(bt(e>=2),e===2)return bt(r.charAt(0)===""&&r.charAt(1)===""),Qt.emptyPath();const t=e-2,n=[];let i="";for(let s=0;s<e;){const a=r.indexOf("",s);switch((a<0||a>t)&&xt(),r.charAt(a+1)){case"":const o=r.substring(s,a);let c;i.length===0?c=o:(i+=o,c=i,i=""),n.push(c);break;case"":i+=r.substring(s,a),i+="\0";break;case"":i+=r.substring(s,a+1);break;default:xt()}s=a+2}return new Qt(n)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(r,e){return[r,Si(e)]}function _E(r,e,t){return[r,Si(e),t]}const hR={},fR=["prefixPath","collectionGroup","readTime","documentId"],dR=["prefixPath","collectionGroup","documentId"],pR=["collectionGroup","readTime","prefixPath","documentId"],mR=["canonicalId","targetId"],gR=["targetId","path"],vR=["path","targetId"],_R=["collectionId","parent"],yR=["indexId","uid"],wR=["uid","sequenceNumber"],xR=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ER=["indexId","uid","orderedDocumentKey"],TR=["userId","collectionPath","documentId"],bR=["userId","collectionPath","largestBatchId"],AR=["userId","collectionGroup","largestBatchId"],yE=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],IR=[...yE,"documentOverlays"],wE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xE=wE,s2=[...xE,"indexConfiguration","indexState","indexEntries"],SR=s2,PR=[...s2,"globals"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg extends mE{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function Cn(r,e){const t=gt(r);return va.F(t._e,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ny(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Pu(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function EE(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(e,t){this.comparator=e,this.root=t||Xn.EMPTY}insert(e,t){return new Lr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xn.BLACK,null,null))}remove(e){return new Lr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(n===0)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new n0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new n0(this.root,e,this.comparator,!1)}getReverseIterator(){return new n0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new n0(this.root,e,this.comparator,!0)}}class n0{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xn{constructor(e,t,n,i,s){this.key=e,this.value=t,this.color=n??Xn.RED,this.left=i??Xn.EMPTY,this.right=s??Xn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,s){return new Xn(e??this.key,t??this.value,n??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const s=n(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,n),null):s===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Xn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return Xn.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw xt();const e=this.left.check();if(e!==this.right.check())throw xt();return e+(this.isRed()?0:1)}}Xn.EMPTY=null,Xn.RED=!0,Xn.BLACK=!1;Xn.EMPTY=new class{constructor(){this.size=0}get key(){throw xt()}get value(){throw xt()}get color(){throw xt()}get left(){throw xt()}get right(){throw xt()}copy(e,t,n,i,s){return this}insert(e,t,n){return new Xn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.comparator=e,this.data=new Lr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iy(this.data.getIterator())}getIteratorFrom(e){return new iy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(n=>{t=t.add(n)}),t}isEqual(e){if(!(e instanceof Sr)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Sr(this.comparator);return t.data=e,t}}class iy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ol(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e){this.fields=e,e.sort(qr.comparator)}static empty(){return new Hi([])}unionWith(e){let t=new Sr(qr.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Hi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Kl(this.fields,e.fields,(t,n)=>t.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new TE("Invalid base64 string: "+s):s}}(e);return new nn(t)}static fromUint8Array(e){const t=function(i){let s="";for(let a=0;a<i.length;++a)s+=String.fromCharCode(i[a]);return s}(e);return new nn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const n=new Uint8Array(t.length);for(let i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const CR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ro(r){if(bt(!!r),typeof r=="string"){let e=0;const t=CR.exec(r);if(bt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const n=new Date(r);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:jr(r.seconds),nanos:jr(r.nanos)}}function jr(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ic(r){return typeof r=="string"?nn.fromBase64String(r):nn.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function a2(r){const e=r.mapValue.fields.__previous_value__;return Bp(e)?a2(e):e}function Mf(r){const e=ro(r.mapValue.fields.__local_write_time__.timestampValue);return new Wr(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,n,i,s,a,o,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=s,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=c,this.useFetchStreams=u}}class sc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new sc("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},S0={nullValue:"NULL_VALUE"};function hu(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Bp(r)?4:bE(r)?9007199254740991:Vp(r)?10:11:xt()}function Ta(r,e){if(r===e)return!0;const t=hu(r);if(t!==hu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Mf(r).isEqual(Mf(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const a=ro(i.timestampValue),o=ro(s.timestampValue);return a.seconds===o.seconds&&a.nanos===o.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return function(i,s){return ic(i.bytesValue).isEqual(ic(s.bytesValue))}(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return function(i,s){return jr(i.geoPointValue.latitude)===jr(s.geoPointValue.latitude)&&jr(i.geoPointValue.longitude)===jr(s.geoPointValue.longitude)}(r,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return jr(i.integerValue)===jr(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const a=jr(i.doubleValue),o=jr(s.doubleValue);return a===o?Of(a)===Of(o):isNaN(a)&&isNaN(o)}return!1}(r,e);case 9:return Kl(r.arrayValue.values||[],e.arrayValue.values||[],Ta);case 10:case 11:return function(i,s){const a=i.mapValue.fields||{},o=s.mapValue.fields||{};if(ny(a)!==ny(o))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(o[c]===void 0||!Ta(a[c],o[c])))return!1;return!0}(r,e);default:return xt()}}function Bf(r,e){return(r.values||[]).find(t=>Ta(t,e))!==void 0}function ac(r,e){if(r===e)return 0;const t=hu(r),n=hu(e);if(t!==n)return jt(t,n);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(r.booleanValue,e.booleanValue);case 2:return function(s,a){const o=jr(s.integerValue||s.doubleValue),c=jr(a.integerValue||a.doubleValue);return o<c?-1:o>c?1:o===c?0:isNaN(o)?isNaN(c)?0:-1:1}(r,e);case 3:return sy(r.timestampValue,e.timestampValue);case 4:return sy(Mf(r),Mf(e));case 5:return jt(r.stringValue,e.stringValue);case 6:return function(s,a){const o=ic(s),c=ic(a);return o.compareTo(c)}(r.bytesValue,e.bytesValue);case 7:return function(s,a){const o=s.split("/"),c=a.split("/");for(let u=0;u<o.length&&u<c.length;u++){const l=jt(o[u],c[u]);if(l!==0)return l}return jt(o.length,c.length)}(r.referenceValue,e.referenceValue);case 8:return function(s,a){const o=jt(jr(s.latitude),jr(a.latitude));return o!==0?o:jt(jr(s.longitude),jr(a.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return ay(r.arrayValue,e.arrayValue);case 10:return function(s,a){var o,c,u,l;const d=s.fields||{},g=a.fields||{},p=(o=d.value)===null||o===void 0?void 0:o.arrayValue,x=(c=g.value)===null||c===void 0?void 0:c.arrayValue,_=jt(((u=p==null?void 0:p.values)===null||u===void 0?void 0:u.length)||0,((l=x==null?void 0:x.values)===null||l===void 0?void 0:l.length)||0);return _!==0?_:ay(p,x)}(r.mapValue,e.mapValue);case 11:return function(s,a){if(s===Xo.mapValue&&a===Xo.mapValue)return 0;if(s===Xo.mapValue)return 1;if(a===Xo.mapValue)return-1;const o=s.fields||{},c=Object.keys(o),u=a.fields||{},l=Object.keys(u);c.sort(),l.sort();for(let d=0;d<c.length&&d<l.length;++d){const g=jt(c[d],l[d]);if(g!==0)return g;const p=ac(o[c[d]],u[l[d]]);if(p!==0)return p}return jt(c.length,l.length)}(r.mapValue,e.mapValue);default:throw xt()}}function sy(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return jt(r,e);const t=ro(r),n=ro(e),i=jt(t.seconds,n.seconds);return i!==0?i:jt(t.nanos,n.nanos)}function ay(r,e){const t=r.values||[],n=e.values||[];for(let i=0;i<t.length&&i<n.length;++i){const s=ac(t[i],n[i]);if(s)return s}return jt(t.length,n.length)}function Yl(r){return qg(r)}function qg(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(t){const n=ro(t);return`time(${n.seconds},${n.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?function(t){return ic(t).toBase64()}(r.bytesValue):"referenceValue"in r?function(t){return ft.fromName(t).toString()}(r.referenceValue):"geoPointValue"in r?function(t){return`geo(${t.latitude},${t.longitude})`}(r.geoPointValue):"arrayValue"in r?function(t){let n="[",i=!0;for(const s of t.values||[])i?i=!1:n+=",",n+=qg(s);return n+"]"}(r.arrayValue):"mapValue"in r?function(t){const n=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const a of n)s?s=!1:i+=",",i+=`${a}:${qg(t.fields[a])}`;return i+"}"}(r.mapValue):xt()}function fu(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function zg(r){return!!r&&"integerValue"in r}function Vf(r){return!!r&&"arrayValue"in r}function oy(r){return!!r&&"nullValue"in r}function cy(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function P0(r){return!!r&&"mapValue"in r}function Vp(r){var e,t;return((t=(((e=r==null?void 0:r.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function pf(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return Pu(r.mapValue.fields,(t,n)=>e.mapValue.fields[t]=pf(n)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pf(r.arrayValue.values[t]);return e}return Object.assign({},r)}function bE(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}const AE={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function RR(r){return"nullValue"in r?S0:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?fu(sc.empty(),ft.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?Vp(r)?AE:{mapValue:{}}:xt()}function LR(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?fu(sc.empty(),ft.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?AE:"mapValue"in r?Vp(r)?{mapValue:{}}:Xo:xt()}function uy(r,e){const t=ac(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function ly(r,e){const t=ac(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e){this.value=e}static empty(){return new Jn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!P0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pf(t)}setAll(e){let t=qr.emptyPath(),n={},i=[];e.forEach((a,o)=>{if(!t.isImmediateParentOf(o)){const c=this.getFieldsMap(t);this.applyChanges(c,n,i),n={},i=[],t=o.popLast()}a?n[o.lastSegment()]=pf(a):i.push(o.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,i)}delete(e){const t=this.field(e.popLast());P0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ta(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];P0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Pu(t,(i,s)=>e[i]=s);for(const i of n)delete e[i]}clone(){return new Jn(pf(this.value))}}function IE(r){const e=[];return Pu(r.fields,(t,n)=>{const i=new qr([t]);if(P0(n)){const s=IE(n.mapValue).fields;if(s.length===0)e.push(i);else for(const a of s)e.push(i.child(a))}else e.push(i)}),new Hi(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(e,t,n,i,s,a,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=s,this.data=a,this.documentState=o}static newInvalidDocument(e){return new Mr(e,0,Pt.min(),Pt.min(),Pt.min(),Jn.empty(),0)}static newFoundDocument(e,t,n,i){return new Mr(e,1,t,Pt.min(),n,i,0)}static newNoDocument(e,t){return new Mr(e,2,t,Pt.min(),Pt.min(),Jn.empty(),0)}static newUnknownDocument(e,t){return new Mr(e,3,t,Pt.min(),Pt.min(),Jn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Pt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Pt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e,t){this.position=e,this.inclusive=t}}function hy(r,e,t){let n=0;for(let i=0;i<r.position.length;i++){const s=e[i],a=r.position[i];if(s.field.isKeyField()?n=ft.comparator(ft.fromName(a.referenceValue),t.key):n=ac(a,t.data.field(s.field)),s.dir==="desc"&&(n*=-1),n!==0)break}return n}function fy(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ta(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t="asc"){this.field=e,this.dir=t}}function DR(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{}class Zt extends SE{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,n):new FR(e,t,n):t==="array-contains"?new BR(e,n):t==="in"?new LE(e,n):t==="not-in"?new VR(e,n):t==="array-contains-any"?new UR(e,n):new Zt(e,t,n)}static createKeyFieldInFilter(e,t,n){return t==="in"?new OR(e,n):new MR(e,n)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ac(t,this.value)):t!==null&&hu(this.value)===hu(t)&&this.matchesComparison(ac(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class _r extends SE{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new _r(e,t)}matches(e){return Xl(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Xl(r){return r.op==="and"}function Wg(r){return r.op==="or"}function o2(r){return PE(r)&&Xl(r)}function PE(r){for(const e of r.filters)if(e instanceof _r)return!1;return!0}function Hg(r){if(r instanceof Zt)return r.field.canonicalString()+r.op.toString()+Yl(r.value);if(o2(r))return r.filters.map(e=>Hg(e)).join(",");{const e=r.filters.map(t=>Hg(t)).join(",");return`${r.op}(${e})`}}function NE(r,e){return r instanceof Zt?function(n,i){return i instanceof Zt&&n.op===i.op&&n.field.isEqual(i.field)&&Ta(n.value,i.value)}(r,e):r instanceof _r?function(n,i){return i instanceof _r&&n.op===i.op&&n.filters.length===i.filters.length?n.filters.reduce((s,a,o)=>s&&NE(a,i.filters[o]),!0):!1}(r,e):void xt()}function CE(r,e){const t=r.filters.concat(e);return _r.create(t,r.op)}function kE(r){return r instanceof Zt?function(t){return`${t.field.canonicalString()} ${t.op} ${Yl(t.value)}`}(r):r instanceof _r?function(t){return t.op.toString()+" {"+t.getFilters().map(kE).join(" ,")+"}"}(r):"Filter"}class FR extends Zt{constructor(e,t,n){super(e,t,n),this.key=ft.fromName(n.referenceValue)}matches(e){const t=ft.comparator(e.key,this.key);return this.matchesComparison(t)}}class OR extends Zt{constructor(e,t){super(e,"in",t),this.keys=RE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class MR extends Zt{constructor(e,t){super(e,"not-in",t),this.keys=RE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function RE(r,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(n=>ft.fromName(n.referenceValue))}class BR extends Zt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Vf(t)&&Bf(t.arrayValue,this.value)}}class LE extends Zt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Bf(this.value.arrayValue,t)}}class VR extends Zt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Bf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Bf(this.value.arrayValue,t)}}class UR extends Zt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Vf(t)||!t.arrayValue.values)&&t.arrayValue.values.some(n=>Bf(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,t=null,n=[],i=[],s=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=s,this.startAt=a,this.endAt=o,this.ue=null}}function $g(r,e=null,t=[],n=[],i=null,s=null,a=null){return new jR(r,e,t,n,i,s,a)}function du(r){const e=gt(r);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(n=>Hg(n)).join(","),t+="|ob:",t+=e.orderBy.map(n=>function(s){return s.field.canonicalString()+s.dir}(n)).join(","),hd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(n=>Yl(n)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(n=>Yl(n)).join(",")),e.ue=t}return e.ue}function fd(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!DR(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!NE(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!fy(r.startAt,e.startAt)&&fy(r.endAt,e.endAt)}function H0(r){return ft.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function $0(r,e){return r.filters.filter(t=>t instanceof Zt&&t.field.isEqual(e))}function dy(r,e,t){let n=S0,i=!0;for(const s of $0(r,e)){let a=S0,o=!0;switch(s.op){case"<":case"<=":a=RR(s.value);break;case"==":case"in":case">=":a=s.value;break;case">":a=s.value,o=!1;break;case"!=":case"not-in":a=S0}uy({value:n,inclusive:i},{value:a,inclusive:o})<0&&(n=a,i=o)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];uy({value:n,inclusive:i},{value:a,inclusive:t.inclusive})<0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}function py(r,e,t){let n=Xo,i=!0;for(const s of $0(r,e)){let a=Xo,o=!0;switch(s.op){case">=":case">":a=LR(s.value),o=!1;break;case"==":case"in":case"<=":a=s.value;break;case"<":a=s.value,o=!1;break;case"!=":case"not-in":a=Xo}ly({value:n,inclusive:i},{value:a,inclusive:o})>0&&(n=a,i=o)}if(t!==null){for(let s=0;s<r.orderBy.length;++s)if(r.orderBy[s].field.isEqual(e)){const a=t.position[s];ly({value:n,inclusive:i},{value:a,inclusive:t.inclusive})>0&&(n=a,i=t.inclusive);break}}return{value:n,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t=null,n=[],i=[],s=null,a="F",o=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=s,this.limitType=a,this.startAt=o,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function DE(r,e,t,n,i,s,a,o){return new co(r,e,t,n,i,s,a,o)}function mh(r){return new co(r)}function my(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function c2(r){return r.collectionGroup!==null}function Ll(r){const e=gt(r);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let o=new Sr(qr.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(o=o.add(u.field))})}),o})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Uf(s,n))}),t.has(qr.keyField().canonicalString())||e.ce.push(new Uf(qr.keyField(),n))}return e.ce}function Pi(r){const e=gt(r);return e.le||(e.le=qR(e,Ll(r))),e.le}function qR(r,e){if(r.limitType==="F")return $g(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Uf(i.field,s)});const t=r.endAt?new oc(r.endAt.position,r.endAt.inclusive):null,n=r.startAt?new oc(r.startAt.position,r.startAt.inclusive):null;return $g(r.path,r.collectionGroup,e,r.filters,r.limit,t,n)}}function Gg(r,e){const t=r.filters.concat([e]);return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function G0(r,e,t){return new co(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function dd(r,e){return fd(Pi(r),Pi(e))&&r.limitType===e.limitType}function FE(r){return`${du(Pi(r))}|lt:${r.limitType}`}function _l(r){return`Query(target=${function(t){let n=t.path.canonicalString();return t.collectionGroup!==null&&(n+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(n+=`, filters: [${t.filters.map(i=>kE(i)).join(", ")}]`),hd(t.limit)||(n+=", limit: "+t.limit),t.orderBy.length>0&&(n+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(n+=", startAt: ",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(i=>Yl(i)).join(",")),t.endAt&&(n+=", endAt: ",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(i=>Yl(i)).join(",")),`Target(${n})`}(Pi(r))}; limitType=${r.limitType})`}function pd(r,e){return e.isFoundDocument()&&function(n,i){const s=i.key.path;return n.collectionGroup!==null?i.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):ft.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(r,e)&&function(n,i){for(const s of Ll(n))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(r,e)&&function(n,i){for(const s of n.filters)if(!s.matches(i))return!1;return!0}(r,e)&&function(n,i){return!(n.startAt&&!function(a,o,c){const u=hy(a,o,c);return a.inclusive?u<=0:u<0}(n.startAt,Ll(n),i)||n.endAt&&!function(a,o,c){const u=hy(a,o,c);return a.inclusive?u>=0:u>0}(n.endAt,Ll(n),i))}(r,e)}function OE(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function ME(r){return(e,t)=>{let n=!1;for(const i of Ll(r)){const s=zR(i,e,t);if(s!==0)return s;n=n||i.field.isKeyField()}return 0}}function zR(r,e,t){const n=r.field.isKeyField()?ft.comparator(e.key,t.key):function(s,a,o){const c=a.data.field(s),u=o.data.field(s);return c!==null&&u!==null?ac(c,u):xt()}(r.field,e,t);switch(r.dir){case"asc":return n;case"desc":return-1*n;default:return xt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n!==void 0){for(const[i,s]of n)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(n===void 0)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return n.length===1?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pu(this.inner,(t,n)=>{for(const[i,s]of n)e(i,s)})}isEmpty(){return EE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new Lr(ft.comparator);function $i(){return WR}const BE=new Lr(ft.comparator);function af(...r){let e=BE;for(const t of r)e=e.insert(t.key,t);return e}function VE(r){let e=BE;return r.forEach((t,n)=>e=e.insert(t,n.overlayedDocument)),e}function ma(){return mf()}function UE(){return mf()}function mf(){return new wc(r=>r.toString(),(r,e)=>r.isEqual(e))}const HR=new Lr(ft.comparator),$R=new Sr(ft.comparator);function Wt(...r){let e=$R;for(const t of r)e=e.add(t);return e}const GR=new Sr(jt);function u2(){return GR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Of(e)?"-0":e}}function jE(r){return{integerValue:""+r}}function qE(r,e){return vE(e)?jE(e):l2(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Up{constructor(){this._=void 0}}function KR(r,e,t){return r instanceof Jl?function(i,s){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Bp(s)&&(s=a2(s)),s&&(a.fields.__previous_value__=s),{mapValue:a}}(t,e):r instanceof pu?WE(r,e):r instanceof mu?HE(r,e):function(i,s){const a=zE(i,s),o=gy(a)+gy(i.Pe);return zg(a)&&zg(i.Pe)?jE(o):l2(i.serializer,o)}(r,e)}function YR(r,e,t){return r instanceof pu?WE(r,e):r instanceof mu?HE(r,e):t}function zE(r,e){return r instanceof Ql?function(n){return zg(n)||function(s){return!!s&&"doubleValue"in s}(n)}(e)?e:{integerValue:0}:null}class Jl extends Up{}class pu extends Up{constructor(e){super(),this.elements=e}}function WE(r,e){const t=$E(e);for(const n of r.elements)t.some(i=>Ta(i,n))||t.push(n);return{arrayValue:{values:t}}}class mu extends Up{constructor(e){super(),this.elements=e}}function HE(r,e){let t=$E(e);for(const n of r.elements)t=t.filter(i=>!Ta(i,n));return{arrayValue:{values:t}}}class Ql extends Up{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function gy(r){return jr(r.integerValue||r.doubleValue)}function $E(r){return Vf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.field=e,this.transform=t}}function XR(r,e){return r.field.isEqual(e.field)&&function(n,i){return n instanceof pu&&i instanceof pu||n instanceof mu&&i instanceof mu?Kl(n.elements,i.elements,Ta):n instanceof Ql&&i instanceof Ql?Ta(n.Pe,i.Pe):n instanceof Jl&&i instanceof Jl}(r.transform,e.transform)}class JR{constructor(e,t){this.version=e,this.transformResults=t}}class zr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new zr}static exists(e){return new zr(void 0,e)}static updateTime(e){return new zr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function N0(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class jp{}function GE(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new vh(r.key,zr.none()):new gh(r.key,r.data,zr.none());{const t=r.data,n=Jn.empty();let i=new Sr(qr.comparator);for(let s of e.fields)if(!i.has(s)){let a=t.field(s);a===null&&s.length>1&&(s=s.popLast(),a=t.field(s)),a===null?n.delete(s):n.set(s,a),i=i.add(s)}return new uo(r.key,n,new Hi(i.toArray()),zr.none())}}function QR(r,e,t){r instanceof gh?function(i,s,a){const o=i.value.clone(),c=_y(i.fieldTransforms,s,a.transformResults);o.setAll(c),s.convertToFoundDocument(a.version,o).setHasCommittedMutations()}(r,e,t):r instanceof uo?function(i,s,a){if(!N0(i.precondition,s))return void s.convertToUnknownDocument(a.version);const o=_y(i.fieldTransforms,s,a.transformResults),c=s.data;c.setAll(KE(i)),c.setAll(o),s.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(r,e,t):function(i,s,a){s.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function gf(r,e,t,n){return r instanceof gh?function(s,a,o,c){if(!N0(s.precondition,a))return o;const u=s.value.clone(),l=yy(s.fieldTransforms,c,a);return u.setAll(l),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(r,e,t,n):r instanceof uo?function(s,a,o,c){if(!N0(s.precondition,a))return o;const u=yy(s.fieldTransforms,c,a),l=a.data;return l.setAll(KE(s)),l.setAll(u),a.convertToFoundDocument(a.version,l).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(r,e,t,n):function(s,a,o){return N0(s.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):o}(r,e,t)}function ZR(r,e){let t=null;for(const n of r.fieldTransforms){const i=e.data.field(n.field),s=zE(n.transform,i||null);s!=null&&(t===null&&(t=Jn.empty()),t.set(n.field,s))}return t||null}function vy(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!function(n,i){return n===void 0&&i===void 0||!(!n||!i)&&Kl(n,i,(s,a)=>XR(s,a))}(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class gh extends jp{constructor(e,t,n,i=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class uo extends jp{constructor(e,t,n,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function KE(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const n=r.data.field(t);e.set(t,n)}}),e}function _y(r,e,t){const n=new Map;bt(r.length===t.length);for(let i=0;i<t.length;i++){const s=r[i],a=s.transform,o=e.data.field(s.field);n.set(s.field,YR(a,o,t[i]))}return n}function yy(r,e,t){const n=new Map;for(const i of r){const s=i.transform,a=t.data.field(i.field);n.set(i.field,KR(s,a,e))}return n}class vh extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class h2 extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&QR(s,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=gf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=gf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=UE();return this.mutations.forEach(i=>{const s=e.get(i.key),a=s.overlayedDocument;let o=this.applyToLocalView(a,s.mutatedFields);o=t.has(i.key)?null:o;const c=GE(a,o);c!==null&&n.set(i.key,c),a.isValidDocument()||a.convertToNoDocument(Pt.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Kl(this.mutations,e.mutations,(t,n)=>vy(t,n))&&Kl(this.baseMutations,e.baseMutations,(t,n)=>vy(t,n))}}class d2{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){bt(e.mutations.length===n.length);let i=function(){return HR}();const s=e.mutations;for(let a=0;a<s.length;a++)i=i.insert(s[a].key,n[a].version);return new d2(e,t,n,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e6{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wn,ir;function YE(r){switch(r){default:return xt();case Le.CANCELLED:case Le.UNKNOWN:case Le.DEADLINE_EXCEEDED:case Le.RESOURCE_EXHAUSTED:case Le.INTERNAL:case Le.UNAVAILABLE:case Le.UNAUTHENTICATED:return!1;case Le.INVALID_ARGUMENT:case Le.NOT_FOUND:case Le.ALREADY_EXISTS:case Le.PERMISSION_DENIED:case Le.FAILED_PRECONDITION:case Le.ABORTED:case Le.OUT_OF_RANGE:case Le.UNIMPLEMENTED:case Le.DATA_LOSS:return!0}}function XE(r){if(r===void 0)return fn("GRPC error has no .code"),Le.UNKNOWN;switch(r){case wn.OK:return Le.OK;case wn.CANCELLED:return Le.CANCELLED;case wn.UNKNOWN:return Le.UNKNOWN;case wn.DEADLINE_EXCEEDED:return Le.DEADLINE_EXCEEDED;case wn.RESOURCE_EXHAUSTED:return Le.RESOURCE_EXHAUSTED;case wn.INTERNAL:return Le.INTERNAL;case wn.UNAVAILABLE:return Le.UNAVAILABLE;case wn.UNAUTHENTICATED:return Le.UNAUTHENTICATED;case wn.INVALID_ARGUMENT:return Le.INVALID_ARGUMENT;case wn.NOT_FOUND:return Le.NOT_FOUND;case wn.ALREADY_EXISTS:return Le.ALREADY_EXISTS;case wn.PERMISSION_DENIED:return Le.PERMISSION_DENIED;case wn.FAILED_PRECONDITION:return Le.FAILED_PRECONDITION;case wn.ABORTED:return Le.ABORTED;case wn.OUT_OF_RANGE:return Le.OUT_OF_RANGE;case wn.UNIMPLEMENTED:return Le.UNIMPLEMENTED;case wn.DATA_LOSS:return Le.DATA_LOSS;default:return xt()}}(ir=wn||(wn={}))[ir.OK=0]="OK",ir[ir.CANCELLED=1]="CANCELLED",ir[ir.UNKNOWN=2]="UNKNOWN",ir[ir.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ir[ir.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ir[ir.NOT_FOUND=5]="NOT_FOUND",ir[ir.ALREADY_EXISTS=6]="ALREADY_EXISTS",ir[ir.PERMISSION_DENIED=7]="PERMISSION_DENIED",ir[ir.UNAUTHENTICATED=16]="UNAUTHENTICATED",ir[ir.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ir[ir.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ir[ir.ABORTED=10]="ABORTED",ir[ir.OUT_OF_RANGE=11]="OUT_OF_RANGE",ir[ir.UNIMPLEMENTED=12]="UNIMPLEMENTED",ir[ir.INTERNAL=13]="INTERNAL",ir[ir.UNAVAILABLE=14]="UNAVAILABLE",ir[ir.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JE(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=new iu([4294967295,4294967295],0);function wy(r){const e=JE().encode(r),t=new nE;return t.update(e),new Uint8Array(t.digest())}function xy(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),n=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new iu([t,n],0),new iu([i,s],0)]}class m2{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new of(`Invalid padding: ${t}`);if(n<0)throw new of(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new of(`Invalid hash count: ${n}`);if(e.length===0&&t!==0)throw new of(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=iu.fromNumber(this.Ie)}Ee(e,t,n){let i=e.add(t.multiply(iu.fromNumber(n)));return i.compare(t6)===1&&(i=new iu([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const t=wy(e),[n,i]=xy(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);if(!this.de(a))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),a=new m2(s,i,t);return n.forEach(o=>a.insert(o)),a}insert(e){if(this.Ie===0)return;const t=wy(e),[n,i]=xy(t);for(let s=0;s<this.hashCount;s++){const a=this.Ee(n,i,s);this.Ae(a)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class of extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,t,n,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,vd.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gd(Pt.min(),i,new Lr(jt),$i(),Wt())}}class vd{constructor(e,t,n,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new vd(n,t,Wt(),Wt(),Wt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e,t,n,i){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=i}}class QE{constructor(e,t){this.targetId=e,this.me=t}}class ZE{constructor(e,t,n=nn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class Ey{constructor(){this.fe=0,this.ge=by(),this.pe=nn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Wt(),t=Wt(),n=Wt();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:xt()}}),new vd(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=by()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,bt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class r6{constructor(e){this.Le=e,this.Be=new Map,this.ke=$i(),this.qe=Ty(),this.Qe=new Lr(jt)}Ke(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{const n=this.Ge(t);switch(e.state){case 0:this.ze(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),n.De(e.resumeToken));break;default:xt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((n,i)=>{this.ze(i)&&t(i)})}He(e){const t=e.targetId,n=e.me.count,i=this.Je(t);if(i){const s=i.target;if(H0(s))if(n===0){const a=new ft(s.path);this.Ue(t,a,Mr.newNoDocument(a,Pt.min()))}else bt(n===1);else{const a=this.Ye(t);if(a!==n){const o=this.Ze(e),c=o?this.Xe(o,e,a):1;if(c!==0){this.je(t);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}}}}}Ze(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:s=0}=t;let a,o;try{a=ic(n).toUint8Array()}catch(c){if(c instanceof TE)return Ea("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{o=new m2(a,i,s)}catch(c){return Ea(c instanceof of?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return o.Ie===0?null:o}Xe(e,t,n){return t.me.count===n-this.nt(e,t.targetId)?0:2}nt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let i=0;return n.forEach(s=>{const a=this.Le.tt(),o=`projects/${a.projectId}/databases/${a.database}/documents/${s.path.canonicalString()}`;e.mightContain(o)||(this.Ue(t,s,null),i++)}),i}rt(e){const t=new Map;this.Be.forEach((s,a)=>{const o=this.Je(a);if(o){if(s.current&&H0(o.target)){const c=new ft(o.target.path);this.ke.get(c)!==null||this.it(a,c)||this.Ue(a,c,Mr.newNoDocument(c,e))}s.be&&(t.set(a,s.ve()),s.Ce())}});let n=Wt();this.qe.forEach((s,a)=>{let o=!0;a.forEachWhile(c=>{const u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(o=!1,!1)}),o&&(n=n.add(s))}),this.ke.forEach((s,a)=>a.setReadTime(e));const i=new gd(e,t,this.Qe,this.ke,n);return this.ke=$i(),this.qe=Ty(),this.Qe=new Lr(jt),i}$e(e,t){if(!this.ze(e))return;const n=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,n){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new Ey,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Sr(jt),this.qe=this.qe.insert(e,t)),t}ze(e){const t=this.Je(e)!==null;return t||Je("WatchChangeAggregator","Detected inactive target",e),t}Je(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Ey),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function Ty(){return new Lr(ft.comparator)}function by(){return new Lr(ft.comparator)}const n6={asc:"ASCENDING",desc:"DESCENDING"},i6={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s6={and:"AND",or:"OR"};class a6{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Kg(r,e){return r.useProto3Json||hd(e)?e:{value:e}}function Zl(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eT(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function o6(r,e){return Zl(r,e.toTimestamp())}function dn(r){return bt(!!r),Pt.fromTimestamp(function(t){const n=ro(t);return new Wr(n.seconds,n.nanos)}(r))}function g2(r,e){return Yg(r,e).canonicalString()}function Yg(r,e){const t=function(i){return new Qt(["projects",i.projectId,"databases",i.database])}(r).child("documents");return e===void 0?t:t.child(e)}function tT(r){const e=Qt.fromString(r);return bt(hT(e)),e}function jf(r,e){return g2(r.databaseId,e.path)}function _a(r,e){const t=tT(e);if(t.get(1)!==r.databaseId.projectId)throw new Xe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Xe(Le.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ft(iT(t))}function rT(r,e){return g2(r.databaseId,e)}function nT(r){const e=tT(r);return e.length===4?Qt.emptyPath():iT(e)}function Xg(r){return new Qt(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function iT(r){return bt(r.length>4&&r.get(4)==="documents"),r.popFirst(5)}function Ay(r,e,t){return{name:jf(r,e),fields:t.value.mapValue.fields}}function sT(r,e,t){const n=_a(r,e.name),i=dn(e.updateTime),s=e.createTime?dn(e.createTime):Pt.min(),a=new Jn({mapValue:{fields:e.fields}}),o=Mr.newFoundDocument(n,i,s,a);return t&&o.setHasCommittedMutations(),t?o.setHasCommittedMutations():o}function c6(r,e){return"found"in e?function(n,i){bt(!!i.found),i.found.name,i.found.updateTime;const s=_a(n,i.found.name),a=dn(i.found.updateTime),o=i.found.createTime?dn(i.found.createTime):Pt.min(),c=new Jn({mapValue:{fields:i.found.fields}});return Mr.newFoundDocument(s,a,o,c)}(r,e):"missing"in e?function(n,i){bt(!!i.missing),bt(!!i.readTime);const s=_a(n,i.missing),a=dn(i.readTime);return Mr.newNoDocument(s,a)}(r,e):xt()}function u6(r,e){let t;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:xt()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(u,l){return u.useProto3Json?(bt(l===void 0||typeof l=="string"),nn.fromBase64String(l||"")):(bt(l===void 0||l instanceof Buffer||l instanceof Uint8Array),nn.fromUint8Array(l||new Uint8Array))}(r,e.targetChange.resumeToken),a=e.targetChange.cause,o=a&&function(u){const l=u.code===void 0?Le.UNKNOWN:XE(u.code);return new Xe(l,u.message||"")}(a);t=new ZE(n,i,s,o||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const i=_a(r,n.document.name),s=dn(n.document.updateTime),a=n.document.createTime?dn(n.document.createTime):Pt.min(),o=new Jn({mapValue:{fields:n.document.fields}}),c=Mr.newFoundDocument(i,s,a,o),u=n.targetIds||[],l=n.removedTargetIds||[];t=new C0(u,l,c.key,c)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const i=_a(r,n.document),s=n.readTime?dn(n.readTime):Pt.min(),a=Mr.newNoDocument(i,s),o=n.removedTargetIds||[];t=new C0([],o,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const i=_a(r,n.document),s=n.removedTargetIds||[];t=new C0([],s,i,null)}else{if(!("filter"in e))return xt();{e.filter;const n=e.filter;n.targetId;const{count:i=0,unchangedNames:s}=n,a=new e6(i,s),o=n.targetId;t=new QE(o,a)}}return t}function qf(r,e){let t;if(e instanceof gh)t={update:Ay(r,e.key,e.value)};else if(e instanceof vh)t={delete:jf(r,e.key)};else if(e instanceof uo)t={update:Ay(r,e.key,e.data),updateMask:m6(e.fieldMask)};else{if(!(e instanceof h2))return xt();t={verify:jf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(n=>function(s,a){const o=a.transform;if(o instanceof Jl)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof pu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof mu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof Ql)return{fieldPath:a.field.canonicalString(),increment:o.Pe};throw xt()}(0,n))),e.precondition.isNone||(t.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:o6(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:xt()}(r,e.precondition)),t}function Jg(r,e){const t=e.currentDocument?function(s){return s.updateTime!==void 0?zr.updateTime(dn(s.updateTime)):s.exists!==void 0?zr.exists(s.exists):zr.none()}(e.currentDocument):zr.none(),n=e.updateTransforms?e.updateTransforms.map(i=>function(a,o){let c=null;if("setToServerValue"in o)bt(o.setToServerValue==="REQUEST_TIME"),c=new Jl;else if("appendMissingElements"in o){const l=o.appendMissingElements.values||[];c=new pu(l)}else if("removeAllFromArray"in o){const l=o.removeAllFromArray.values||[];c=new mu(l)}else"increment"in o?c=new Ql(a,o.increment):xt();const u=qr.fromServerFormat(o.fieldPath);return new md(u,c)}(r,i)):[];if(e.update){e.update.name;const i=_a(r,e.update.name),s=new Jn({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=function(c){const u=c.fieldPaths||[];return new Hi(u.map(l=>qr.fromServerFormat(l)))}(e.updateMask);return new uo(i,s,a,t,n)}return new gh(i,s,t,n)}if(e.delete){const i=_a(r,e.delete);return new vh(i,t)}if(e.verify){const i=_a(r,e.verify);return new h2(i,t)}return xt()}function l6(r,e){return r&&r.length>0?(bt(e!==void 0),r.map(t=>function(i,s){let a=i.updateTime?dn(i.updateTime):dn(s);return a.isEqual(Pt.min())&&(a=dn(s)),new JR(a,i.transformResults||[])}(t,e))):[]}function aT(r,e){return{documents:[rT(r,e.path)]}}function oT(r,e){const t={structuredQuery:{}},n=e.path;let i;e.collectionGroup!==null?(i=n,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=n.popLast(),t.structuredQuery.from=[{collectionId:n.lastSegment()}]),t.parent=rT(r,i);const s=function(u){if(u.length!==0)return lT(_r.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const a=function(u){if(u.length!==0)return u.map(l=>function(g){return{field:yl(g.field),direction:f6(g.dir)}}(l))}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const o=Kg(r,e.limit);return o!==null&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:i}}function cT(r){let e=nT(r.parent);const t=r.structuredQuery,n=t.from?t.from.length:0;let i=null;if(n>0){bt(n===1);const l=t.from[0];l.allDescendants?i=l.collectionId:e=e.child(l.collectionId)}let s=[];t.where&&(s=function(d){const g=uT(d);return g instanceof _r&&o2(g)?g.getFilters():[g]}(t.where));let a=[];t.orderBy&&(a=function(d){return d.map(g=>function(x){return new Uf(wl(x.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(g))}(t.orderBy));let o=null;t.limit&&(o=function(d){let g;return g=typeof d=="object"?d.value:d,hd(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(d){const g=!!d.before,p=d.values||[];return new oc(p,g)}(t.startAt));let u=null;return t.endAt&&(u=function(d){const g=!d.before,p=d.values||[];return new oc(p,g)}(t.endAt)),DE(e,i,a,s,o,"F",c,u)}function h6(r,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uT(r){return r.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const n=wl(t.unaryFilter.field);return Zt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const i=wl(t.unaryFilter.field);return Zt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=wl(t.unaryFilter.field);return Zt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=wl(t.unaryFilter.field);return Zt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return xt()}}(r):r.fieldFilter!==void 0?function(t){return Zt.create(wl(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return xt()}}(t.fieldFilter.op),t.fieldFilter.value)}(r):r.compositeFilter!==void 0?function(t){return _r.create(t.compositeFilter.filters.map(n=>uT(n)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return xt()}}(t.compositeFilter.op))}(r):xt()}function f6(r){return n6[r]}function d6(r){return i6[r]}function p6(r){return s6[r]}function yl(r){return{fieldPath:r.canonicalString()}}function wl(r){return qr.fromServerFormat(r.fieldPath)}function lT(r){return r instanceof Zt?function(t){if(t.op==="=="){if(cy(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(oy(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(cy(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(oy(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:d6(t.op),value:t.value}}}(r):r instanceof _r?function(t){const n=t.getFilters().map(i=>lT(i));return n.length===1?n[0]:{compositeFilter:{op:p6(t.op),filters:n}}}(r):xt()}function m6(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hT(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,t,n,i,s=Pt.min(),a=Pt.min(),o=nn.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=c}withSequenceNumber(e){return new Ka(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ka(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.ct=e}}function g6(r,e){let t;if(e.document)t=sT(r.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const n=ft.fromSegments(e.noDocument.path),i=vu(e.noDocument.readTime);t=Mr.newNoDocument(n,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xt();{const n=ft.fromSegments(e.unknownDocument.path),i=vu(e.unknownDocument.version);t=Mr.newUnknownDocument(n,i)}}return e.readTime&&t.setReadTime(function(i){const s=new Wr(i[0],i[1]);return Pt.fromTimestamp(s)}(e.readTime)),t}function Iy(r,e){const t=e.key,n={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:K0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())n.document=function(s,a){return{name:jf(s,a.key),fields:a.data.value.mapValue.fields,updateTime:Zl(s,a.version.toTimestamp()),createTime:Zl(s,a.createTime.toTimestamp())}}(r.ct,e);else if(e.isNoDocument())n.noDocument={path:t.path.toArray(),readTime:gu(e.version)};else{if(!e.isUnknownDocument())return xt();n.unknownDocument={path:t.path.toArray(),version:gu(e.version)}}return n}function K0(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function gu(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function vu(r){const e=new Wr(r.seconds,r.nanoseconds);return Pt.fromTimestamp(e)}function $c(r,e){const t=(e.baseMutations||[]).map(s=>Jg(r.ct,s));for(let s=0;s<e.mutations.length-1;++s){const a=e.mutations[s];if(s+1<e.mutations.length&&e.mutations[s+1].transform!==void 0){const o=e.mutations[s+1];a.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const n=e.mutations.map(s=>Jg(r.ct,s)),i=Wr.fromMillis(e.localWriteTimeMs);return new f2(e.batchId,i,t,n)}function cf(r){const e=vu(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?vu(r.lastLimboFreeSnapshotVersion):Pt.min();let n;return n=function(s){return s.documents!==void 0}(r.query)?function(s){return bt(s.documents.length===1),Pi(mh(nT(s.documents[0])))}(r.query):function(s){return Pi(cT(s))}(r.query),new Ka(n,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,nn.fromBase64String(r.resumeToken))}function dT(r,e){const t=gu(e.snapshotVersion),n=gu(e.lastLimboFreeSnapshotVersion);let i;i=H0(e.target)?aT(r.ct,e.target):oT(r.ct,e.target)._t;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:du(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:i}}function v2(r){const e=cT({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?G0(e,e.limit,"L"):e}function Xm(r,e){return new p2(e.largestBatchId,Jg(r.ct,e.overlayMutation))}function Sy(r,e){const t=e.path.lastSegment();return[r,Si(e.path.popLast()),t]}function Py(r,e,t,n){return{indexId:r,uid:e,sequenceNumber:t,readTime:gu(n.readTime),documentKey:Si(n.documentKey.path),largestBatchId:n.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6{getBundleMetadata(e,t){return Ny(e).get(t).next(n=>{if(n)return function(s){return{id:s.bundleId,createTime:vu(s.createTime),version:s.version}}(n)})}saveBundleMetadata(e,t){return Ny(e).put(function(i){return{bundleId:i.id,createTime:gu(dn(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return Cy(e).get(t).next(n=>{if(n)return function(s){return{name:s.name,query:v2(s.bundledQuery),readTime:vu(s.readTime)}}(n)})}saveNamedQuery(e,t){return Cy(e).put(function(i){return{name:i.name,readTime:gu(dn(i.readTime)),bundledQuery:i.bundledQuery}}(t))}}function Ny(r){return Cn(r,"bundles")}function Cy(r){return Cn(r,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new qp(e,n)}getOverlay(e,t){return Gh(e).get(Sy(this.userId,t)).next(n=>n?Xm(this.serializer,n):null)}getOverlays(e,t){const n=ma();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){const i=[];return n.forEach((s,a)=>{const o=new p2(t,a);i.push(this.ht(e,o))}),Se.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach(a=>i.add(Si(a.getCollectionPath())));const s=[];return i.forEach(a=>{const o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,n+1],!1,!0);s.push(Gh(e).j("collectionPathOverlayIndex",o))}),Se.waitFor(s)}getOverlaysForCollection(e,t,n){const i=ma(),s=Si(t),a=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Gh(e).U("collectionPathOverlayIndex",a).next(o=>{for(const c of o){const u=Xm(this.serializer,c);i.set(u.getKey(),u)}return i})}getOverlaysForCollectionGroup(e,t,n,i){const s=ma();let a;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Gh(e).J({index:"collectionGroupOverlayIndex",range:o},(c,u,l)=>{const d=Xm(this.serializer,u);s.size()<i||d.largestBatchId===a?(s.set(d.getKey(),d),a=d.largestBatchId):l.done()}).next(()=>s)}ht(e,t){return Gh(e).put(function(i,s,a){const[o,c,u]=Sy(s,a.mutation.key);return{userId:s,collectionPath:c,documentId:u,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:qf(i.ct,a.mutation)}}(this.serializer,this.userId,t))}}function Gh(r){return Cn(r,"documentOverlays")}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _6{Pt(e){return Cn(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{const n=t==null?void 0:t.value;return n?nn.fromUint8Array(n):nn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(jr(e.integerValue));else if("doubleValue"in e){const n=jr(e.doubleValue);isNaN(n)?this.dt(t,13):(this.dt(t,15),Of(n)?t.At(0):t.At(n))}else if("timestampValue"in e){let n=e.timestampValue;this.dt(t,20),typeof n=="string"&&(n=ro(n)),t.Rt(`${n.seconds||""}`),t.At(n.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ic(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.dt(t,45),t.At(n.latitude||0),t.At(n.longitude||0)}else"mapValue"in e?bE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Vp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):xt()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){const n=e.fields||{};this.dt(t,55);for(const i of Object.keys(n))this.Vt(i,t),this.Tt(n[i],t)}wt(e,t){var n,i;const s=e.fields||{};this.dt(t,53);const a="value",o=((i=(n=s[a].arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(jr(o)),this.Vt(a,t),this.Tt(s[a],t)}bt(e,t){const n=e.values||[];this.dt(t,50);for(const i of n)this.Tt(i,t)}yt(e,t){this.dt(t,37),ft.fromName(e).path.forEach(n=>{this.dt(t,60),this.Dt(n,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}}Gc.vt=new Gc;function y6(r){if(r===0)return 8;let e=0;return!(r>>4)&&(e+=4,r<<=4),!(r>>6)&&(e+=2,r<<=2),!(r>>7)&&(e+=1),e}function ky(r){const e=64-function(n){let i=0;for(let s=0;s<8;++s){const a=y6(255&n[s]);if(i+=a,a!==8)break}return i}(r);return Math.ceil(e/8)}class w6{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ot(n.value),n=t.next();this.Nt()}Lt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ft(n);else if(n<2048)this.Ft(960|n>>>6),this.Ft(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|n>>>12),this.Ft(128|63&n>>>6),this.Ft(128|63&n);else{const i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(const t of e){const n=t.charCodeAt(0);if(n<128)this.Ot(n);else if(n<2048)this.Ot(960|n>>>6),this.Ot(128|63&n);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|n>>>12),this.Ot(128|63&n>>>6),this.Ot(128|63&n);else{const i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){const t=this.qt(e),n=ky(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){const t=this.qt(e),n=ky(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){const t=function(s){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,s,!1),new Uint8Array(a.buffer)}(e),n=(128&t[0])!=0;t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Ft(e){const t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){const t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class x6{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}}class E6{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}}class Kh{constructor(){this.jt=new w6,this.Ht=new x6(this.jt),this.Jt=new E6(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}Zt(){const e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Kc(this.indexId,this.documentKey,this.arrayValue,n)}}function jo(r,e){let t=r.indexId-e.indexId;return t!==0?t:(t=Ry(r.arrayValue,e.arrayValue),t!==0?t:(t=Ry(r.directionalValue,e.directionalValue),t!==0?t:ft.comparator(r.documentKey,e.documentKey)))}function Ry(r,e){for(let t=0;t<r.length&&t<e.length;++t){const n=r[t]-e[t];if(n!==0)return n}return r.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this.Xt=new Sr((t,n)=>qr.comparator(t.field,n.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(const t of e.filters){const n=t;n.isInequality()?this.Xt=this.Xt.add(n):this.tn.push(n)}}get nn(){return this.Xt.size>1}rn(e){if(bt(e.collectionGroup===this.collectionId),this.nn)return!1;const t=Ug(e);if(t!==void 0&&!this.sn(t))return!1;const n=zc(e);let i=new Set,s=0,a=0;for(;s<n.length&&this.sn(n[s]);++s)i=i.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.Xt.size>0){const o=this.Xt.getIterator().getNext();if(!i.has(o.field.canonicalString())){const c=n[s];if(!this.on(o,c)||!this._n(this.en[a++],c))return!1}++s}for(;s<n.length;++s){const o=n[s];if(a>=this.en.length||!this._n(this.en[a++],o))return!1}return!0}an(){if(this.nn)return null;let e=new Sr(qr.comparator);const t=[];for(const n of this.tn)if(!n.field.isKeyField())if(n.op==="array-contains"||n.op==="array-contains-any")t.push(new A0(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new A0(n.field,0))}for(const n of this.en)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new A0(n.field,n.dir==="asc"?0:1)));return new W0(W0.UNKNOWN_ID,this.collectionId,t,Ff.empty())}sn(e){for(const t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const n=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===n}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(r){var e,t;if(bt(r instanceof Zt||r instanceof _r),r instanceof Zt){if(r instanceof LE){const i=((t=(e=r.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(s=>Zt.create(r.field,"==",s)))||[];return _r.create(i,"or")}return r}const n=r.filters.map(i=>pT(i));return _r.create(n,r.op)}function T6(r){if(r.getFilters().length===0)return[];const e=e1(pT(r));return bt(mT(e)),Qg(e)||Zg(e)?[e]:e.getFilters()}function Qg(r){return r instanceof Zt}function Zg(r){return r instanceof _r&&o2(r)}function mT(r){return Qg(r)||Zg(r)||function(t){if(t instanceof _r&&Wg(t)){for(const n of t.getFilters())if(!Qg(n)&&!Zg(n))return!1;return!0}return!1}(r)}function e1(r){if(bt(r instanceof Zt||r instanceof _r),r instanceof Zt)return r;if(r.filters.length===1)return e1(r.filters[0]);const e=r.filters.map(n=>e1(n));let t=_r.create(e,r.op);return t=Y0(t),mT(t)?t:(bt(t instanceof _r),bt(Xl(t)),bt(t.filters.length>1),t.filters.reduce((n,i)=>_2(n,i)))}function _2(r,e){let t;return bt(r instanceof Zt||r instanceof _r),bt(e instanceof Zt||e instanceof _r),t=r instanceof Zt?e instanceof Zt?function(i,s){return _r.create([i,s],"and")}(r,e):Dy(r,e):e instanceof Zt?Dy(e,r):function(i,s){if(bt(i.filters.length>0&&s.filters.length>0),Xl(i)&&Xl(s))return CE(i,s.getFilters());const a=Wg(i)?i:s,o=Wg(i)?s:i,c=a.filters.map(u=>_2(u,o));return _r.create(c,"or")}(r,e),Y0(t)}function Dy(r,e){if(Xl(e))return CE(e,r.getFilters());{const t=e.filters.map(n=>_2(r,n));return _r.create(t,"or")}}function Y0(r){if(bt(r instanceof Zt||r instanceof _r),r instanceof Zt)return r;const e=r.getFilters();if(e.length===1)return Y0(e[0]);if(PE(r))return r;const t=e.map(i=>Y0(i)),n=[];return t.forEach(i=>{i instanceof Zt?n.push(i):i instanceof _r&&(i.op===r.op?n.push(...i.filters):n.push(i))}),n.length===1?n[0]:_r.create(n,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b6{constructor(){this.un=new y2}addToCollectionParentIndex(e,t){return this.un.add(t),Se.resolve()}getCollectionParents(e,t){return Se.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return Se.resolve()}deleteFieldIndex(e,t){return Se.resolve()}deleteAllFieldIndexes(e){return Se.resolve()}createTargetIndexes(e,t){return Se.resolve()}getDocumentsMatchingTarget(e,t){return Se.resolve(null)}getIndexType(e,t){return Se.resolve(0)}getFieldIndexes(e,t){return Se.resolve([])}getNextCollectionGroupToUpdate(e){return Se.resolve(null)}getMinOffset(e,t){return Se.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,t){return Se.resolve(ps.min())}updateCollectionGroup(e,t,n){return Se.resolve()}updateIndexEntries(e,t){return Se.resolve()}}class y2{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new Sr(Qt.comparator),s=!i.has(n);return this.index[t]=i.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new Sr(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i0=new Uint8Array(0);class A6{constructor(e,t){this.databaseId=t,this.cn=new y2,this.ln=new wc(n=>du(n),(n,i)=>fd(n,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});const s={collectionId:n,parent:Si(i)};return Fy(e).put(s)}return Se.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[hE(t),""],!1,!0);return Fy(e).U(i).next(s=>{for(const a of s){if(a.collectionId!==t)break;n.push(pa(a.parent))}return n})}addFieldIndex(e,t){const n=Yh(e),i=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(c=>[c.fieldPath.canonicalString(),c.kind])}}(t);delete i.indexId;const s=n.add(i);if(t.indexState){const a=ul(e);return s.next(o=>{a.put(Py(o,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=Yh(e),i=ul(e),s=cl(e);return n.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Yh(e),n=cl(e),i=ul(e);return t.j().next(()=>n.j()).next(()=>i.j())}createTargetIndexes(e,t){return Se.forEach(this.hn(t),n=>this.getIndexType(e,n).next(i=>{if(i===0||i===1){const s=new Ly(n).an();if(s!=null)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const n=cl(e);let i=!0;const s=new Map;return Se.forEach(this.hn(t),a=>this.Pn(e,a).next(o=>{i&&(i=!!o),s.set(a,o)})).next(()=>{if(i){let a=Wt();const o=[];return Se.forEach(s,(c,u)=>{Je("IndexedDbIndexManager",`Using index ${function(M){return`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(K=>`${K.fieldPath}:${K.kind}`).join(",")}`}(c)} to execute ${du(t)}`);const l=function(M,K){const ie=Ug(K);if(ie===void 0)return null;for(const oe of $0(M,ie.fieldPath))switch(oe.op){case"array-contains-any":return oe.value.arrayValue.values||[];case"array-contains":return[oe.value]}return null}(u,c),d=function(M,K){const ie=new Map;for(const oe of zc(K))for(const N of $0(M,oe.fieldPath))switch(N.op){case"==":case"in":ie.set(oe.fieldPath.canonicalString(),N.value);break;case"not-in":case"!=":return ie.set(oe.fieldPath.canonicalString(),N.value),Array.from(ie.values())}return null}(u,c),g=function(M,K){const ie=[];let oe=!0;for(const N of zc(K)){const A=N.kind===0?dy(M,N.fieldPath,M.startAt):py(M,N.fieldPath,M.startAt);ie.push(A.value),oe&&(oe=A.inclusive)}return new oc(ie,oe)}(u,c),p=function(M,K){const ie=[];let oe=!0;for(const N of zc(K)){const A=N.kind===0?py(M,N.fieldPath,M.endAt):dy(M,N.fieldPath,M.endAt);ie.push(A.value),oe&&(oe=A.inclusive)}return new oc(ie,oe)}(u,c),x=this.In(c,u,g),_=this.In(c,u,p),E=this.Tn(c,u,d),P=this.En(c.indexId,l,x,g.inclusive,_,p.inclusive,E);return Se.forEach(P,L=>n.G(L,t.limit).next(M=>{M.forEach(K=>{const ie=ft.fromSegments(K.documentKey);a.has(ie)||(a=a.add(ie),o.push(ie))})}))}).next(()=>o)}return Se.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=T6(_r.create(e.filters,"and")).map(n=>$g(e.path,e.collectionGroup,e.orderBy,n.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,n,i,s,a,o){const c=(t!=null?t.length:1)*Math.max(n.length,s.length),u=c/(t!=null?t.length:1),l=[];for(let d=0;d<c;++d){const g=t?this.dn(t[d/u]):i0,p=this.An(e,g,n[d%u],i),x=this.Rn(e,g,s[d%u],a),_=o.map(E=>this.An(e,g,E,!0));l.push(...this.createRange(p,x,_))}return l}An(e,t,n,i){const s=new Kc(e,ft.empty(),t,n);return i?s:s.Zt()}Rn(e,t,n,i){const s=new Kc(e,ft.empty(),t,n);return i?s.Zt():s}Pn(e,t){const n=new Ly(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let a=null;for(const o of s)n.rn(o)&&(!a||o.fields.length>a.fields.length)&&(a=o);return a})}getIndexType(e,t){let n=2;const i=this.hn(t);return Se.forEach(i,s=>this.Pn(e,s).next(a=>{a?n!==0&&a.fields.length<function(c){let u=new Sr(qr.comparator),l=!1;for(const d of c.filters)for(const g of d.getFlattenedFilters())g.field.isKeyField()||(g.op==="array-contains"||g.op==="array-contains-any"?l=!0:u=u.add(g.field));for(const d of c.orderBy)d.field.isKeyField()||(u=u.add(d.field));return u.size+(l?1:0)}(s)&&(n=1):n=0})).next(()=>function(a){return a.limit!==null}(t)&&i.length>1&&n===2?1:n)}Vn(e,t){const n=new Kh;for(const i of zc(e)){const s=t.data.field(i.fieldPath);if(s==null)return null;const a=n.Yt(i.kind);Gc.vt.It(s,a)}return n.zt()}dn(e){const t=new Kh;return Gc.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){const n=new Kh;return Gc.vt.It(fu(this.databaseId,t),n.Yt(function(s){const a=zc(s);return a.length===0?0:a[a.length-1].kind}(e))),n.zt()}Tn(e,t,n){if(n===null)return[];let i=[];i.push(new Kh);let s=0;for(const a of zc(e)){const o=n[s++];for(const c of i)if(this.fn(t,a.fieldPath)&&Vf(o))i=this.gn(i,a,o);else{const u=c.Yt(a.kind);Gc.vt.It(o,u)}}return this.pn(i)}In(e,t,n){return this.Tn(e,t,n.position)}pn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].zt();return t}gn(e,t,n){const i=[...e],s=[];for(const a of n.arrayValue.values||[])for(const o of i){const c=new Kh;c.seed(o.zt()),Gc.vt.It(a,c.Yt(t.kind)),s.push(c)}return s}fn(e,t){return!!e.filters.find(n=>n instanceof Zt&&n.field.isEqual(t)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(e,t){const n=Yh(e),i=ul(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(s=>{const a=[];return Se.forEach(s,o=>i.get([o.indexId,this.uid]).next(c=>{a.push(function(l,d){const g=d?new Ff(d.sequenceNumber,new ps(vu(d.readTime),new ft(pa(d.documentKey)),d.largestBatchId)):Ff.empty(),p=l.fields.map(([x,_])=>new A0(qr.fromServerFormat(x),_));return new W0(l.indexId,l.collectionGroup,p,g)}(o,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((n,i)=>{const s=n.indexState.sequenceNumber-i.indexState.sequenceNumber;return s!==0?s:jt(n.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,n){const i=Yh(e),s=ul(e);return this.yn(e).next(a=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(o=>Se.forEach(o,c=>s.put(Py(c.indexId,this.uid,a,n)))))}updateIndexEntries(e,t){const n=new Map;return Se.forEach(t,(i,s)=>{const a=n.get(i.collectionGroup);return(a?Se.resolve(a):this.getFieldIndexes(e,i.collectionGroup)).next(o=>(n.set(i.collectionGroup,o),Se.forEach(o,c=>this.wn(e,i,c).next(u=>{const l=this.Sn(s,c);return u.isEqual(l)?Se.resolve():this.bn(e,s,c,u,l)}))))})}Dn(e,t,n,i){return cl(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(n,t.key),documentKey:t.key.path.toArray()})}vn(e,t,n,i){return cl(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(n,t.key),t.key.path.toArray()])}wn(e,t,n){const i=cl(e);let s=new Sr(jo);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.mn(n,t)])},(a,o)=>{s=s.add(new Kc(n.indexId,t,o.arrayValue,o.directionalValue))}).next(()=>s)}Sn(e,t){let n=new Sr(jo);const i=this.Vn(t,e);if(i==null)return n;const s=Ug(t);if(s!=null){const a=e.data.field(s.fieldPath);if(Vf(a))for(const o of a.arrayValue.values||[])n=n.add(new Kc(t.indexId,e.key,this.dn(o),i))}else n=n.add(new Kc(t.indexId,e.key,i0,i));return n}bn(e,t,n,i,s){Je("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(c,u,l,d,g){const p=c.getIterator(),x=u.getIterator();let _=ol(p),E=ol(x);for(;_||E;){let P=!1,L=!1;if(_&&E){const M=l(_,E);M<0?L=!0:M>0&&(P=!0)}else _!=null?L=!0:P=!0;P?(d(E),E=ol(x)):L?(g(_),_=ol(p)):(_=ol(p),E=ol(x))}}(i,s,jo,o=>{a.push(this.Dn(e,t,n,o))},o=>{a.push(this.vn(e,t,n,o))}),Se.waitFor(a)}yn(e){let t=1;return ul(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(n,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((a,o)=>jo(a,o)).filter((a,o,c)=>!o||jo(a,c[o-1])!==0);const i=[];i.push(e);for(const a of n){const o=jo(a,e),c=jo(a,t);if(o===0)i[0]=e.Zt();else if(o>0&&c<0)i.push(a),i.push(a.Zt());else if(c>0)break}i.push(t);const s=[];for(let a=0;a<i.length;a+=2){if(this.Cn(i[a],i[a+1]))return[];const o=[i[a].indexId,this.uid,i[a].arrayValue,i[a].directionalValue,i0,[]],c=[i[a+1].indexId,this.uid,i[a+1].arrayValue,i[a+1].directionalValue,i0,[]];s.push(IDBKeyRange.bound(o,c))}return s}Cn(e,t){return jo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Oy)}getMinOffset(e,t){return Se.mapArray(this.hn(t),n=>this.Pn(e,n).next(i=>i||xt())).next(Oy)}}function Fy(r){return Cn(r,"collectionParents")}function cl(r){return Cn(r,"indexEntries")}function Yh(r){return Cn(r,"indexConfiguration")}function ul(r){return Cn(r,"indexState")}function Oy(r){bt(r.length!==0);let e=r[0].indexState.offset,t=e.largestBatchId;for(let n=1;n<r.length;n++){const i=r[n].indexState.offset;n2(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new ps(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qi{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new qi(e,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gT(r,e,t){const n=r.store("mutations"),i=r.store("documentMutations"),s=[],a=IDBKeyRange.only(t.batchId);let o=0;const c=n.J({range:a},(l,d,g)=>(o++,g.delete()));s.push(c.next(()=>{bt(o===1)}));const u=[];for(const l of t.mutations){const d=_E(e,l.key.path,t.batchId);s.push(i.delete(d)),u.push(l.key)}return Se.waitFor(s).next(()=>u)}function X0(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw xt();e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qi.DEFAULT_COLLECTION_PERCENTILE=10,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qi.DEFAULT=new qi(41943040,qi.DEFAULT_COLLECTION_PERCENTILE,qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qi.DISABLED=new qi(-1,0,0);class zp{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Fn={}}static lt(e,t,n,i){bt(e.uid!=="");const s=e.isAuthenticated()?e.uid:"";return new zp(s,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return qo(e).J({index:"userMutationsIndex",range:n},(i,s,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,n,i){const s=xl(e),a=qo(e);return a.add({}).next(o=>{bt(typeof o=="number");const c=new f2(o,t,n,i),u=function(p,x,_){const E=_.baseMutations.map(L=>qf(p.ct,L)),P=_.mutations.map(L=>qf(p.ct,L));return{userId:x,batchId:_.batchId,localWriteTimeMs:_.localWriteTime.toMillis(),baseMutations:E,mutations:P}}(this.serializer,this.userId,c),l=[];let d=new Sr((g,p)=>jt(g.canonicalString(),p.canonicalString()));for(const g of i){const p=_E(this.userId,g.key.path,o);d=d.add(g.key.path.popLast()),l.push(a.put(u)),l.push(s.put(p,hR))}return d.forEach(g=>{l.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Fn[o]=c.keys()}),Se.waitFor(l).next(()=>c)})}lookupMutationBatch(e,t){return qo(e).get(t).next(n=>n?(bt(n.userId===this.userId),$c(this.serializer,n)):null)}Mn(e,t){return this.Fn[t]?Se.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(n=>{if(n){const i=n.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return qo(e).J({index:"userMutationsIndex",range:i},(a,o,c)=>{o.userId===this.userId&&(bt(o.batchId>=n),s=$c(this.serializer,o)),c.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return qo(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,s,a)=>{n=s.batchId,a.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return qo(e).U("userMutationsIndex",t).next(n=>n.map(i=>$c(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=I0(this.userId,t.path),i=IDBKeyRange.lowerBound(n),s=[];return xl(e).J({range:i},(a,o,c)=>{const[u,l,d]=a,g=pa(l);if(u===this.userId&&t.path.isEqual(g))return qo(e).get(d).next(p=>{if(!p)throw xt();bt(p.userId===this.userId),s.push($c(this.serializer,p))});c.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sr(jt);const i=[];return t.forEach(s=>{const a=I0(this.userId,s.path),o=IDBKeyRange.lowerBound(a),c=xl(e).J({range:o},(u,l,d)=>{const[g,p,x]=u,_=pa(p);g===this.userId&&s.path.isEqual(_)?n=n.add(x):d.done()});i.push(c)}),Se.waitFor(i).next(()=>this.xn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,s=I0(this.userId,n),a=IDBKeyRange.lowerBound(s);let o=new Sr(jt);return xl(e).J({range:a},(c,u,l)=>{const[d,g,p]=c,x=pa(g);d===this.userId&&n.isPrefixOf(x)?x.length===i&&(o=o.add(p)):l.done()}).next(()=>this.xn(e,o))}xn(e,t){const n=[],i=[];return t.forEach(s=>{i.push(qo(e).get(s).next(a=>{if(a===null)throw xt();bt(a.userId===this.userId),n.push($c(this.serializer,a))}))}),Se.waitFor(i).next(()=>n)}removeMutationBatch(e,t){return gT(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),Se.forEach(n,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Se.resolve();const n=IDBKeyRange.lowerBound(function(a){return[a]}(this.userId)),i=[];return xl(e).J({range:n},(s,a,o)=>{if(s[0]===this.userId){const c=pa(s[1]);i.push(c)}else o.done()}).next(()=>{bt(i.length===0)})})}containsKey(e,t){return vT(e,this.userId,t)}Nn(e){return _T(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function vT(r,e,t){const n=I0(e,t.path),i=n[1],s=IDBKeyRange.lowerBound(n);let a=!1;return xl(r).J({range:s,H:!0},(o,c,u)=>{const[l,d,g]=o;l===e&&d===i&&(a=!0),u.done()}).next(()=>a)}function qo(r){return Cn(r,"mutations")}function xl(r){return Cn(r,"documentMutations")}function _T(r){return Cn(r,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _u{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new _u(0)}static kn(){return new _u(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{const n=new _u(t.highestTargetId);return t.highestTargetId=n.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>Pt.fromTimestamp(new Wr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(n=>(n.targetCount+=1,this.$n(t,n),this.Qn(e,n))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ll(e).delete(t.targetId)).next(()=>this.qn(e)).next(n=>(bt(n.targetCount>0),n.targetCount-=1,this.Qn(e,n)))}removeTargets(e,t,n){let i=0;const s=[];return ll(e).J((a,o)=>{const c=cf(o);c.sequenceNumber<=t&&n.get(c.targetId)===null&&(i++,s.push(this.removeTargetData(e,c)))}).next(()=>Se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return ll(e).J((n,i)=>{const s=cf(i);t(s)})}qn(e){return By(e).get("targetGlobalKey").next(t=>(bt(t!==null),t))}Qn(e,t){return By(e).put("targetGlobalKey",t)}Kn(e,t){return ll(e).put(dT(this.serializer,t))}$n(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){const n=du(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return ll(e).J({range:i,index:"queryTargetsIndex"},(a,o,c)=>{const u=cf(o);fd(t,u.target)&&(s=u,c.done())}).next(()=>s)}addMatchingKeys(e,t,n){const i=[],s=Go(e);return t.forEach(a=>{const o=Si(a.path);i.push(s.put({targetId:n,path:o})),i.push(this.referenceDelegate.addReference(e,n,a))}),Se.waitFor(i)}removeMatchingKeys(e,t,n){const i=Go(e);return Se.forEach(t,s=>{const a=Si(s.path);return Se.waitFor([i.delete([n,a]),this.referenceDelegate.removeReference(e,n,s)])})}removeMatchingKeysForTargetId(e,t){const n=Go(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=Go(e);let s=Wt();return i.J({range:n,H:!0},(a,o,c)=>{const u=pa(a[1]),l=new ft(u);s=s.add(l)}).next(()=>s)}containsKey(e,t){const n=Si(t.path),i=IDBKeyRange.bound([n],[hE(n)],!1,!0);let s=0;return Go(e).J({index:"documentTargetsIndex",H:!0,range:i},([a,o],c,u)=>{a!==0&&(s++,u.done())}).next(()=>s>0)}ot(e,t){return ll(e).get(t).next(n=>n?cf(n):null)}}function ll(r){return Cn(r,"targets")}function By(r){return Cn(r,"targetGlobal")}function Go(r){return Cn(r,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vy([r,e],[t,n]){const i=jt(r,t);return i===0?jt(e,n):i}class S6{constructor(e){this.Un=e,this.buffer=new Sr(Vy),this.Wn=0}Gn(){return++this.Wn}zn(e){const t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{const n=this.buffer.last();Vy(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}get maxValue(){return this.buffer.last()[0]}}class P6{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){Je("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yc(t)?Je("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await _c(t)}await this.Hn(3e5)})}}class N6{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(n=>Math.floor(t/100*n))}nthSequenceNumber(e,t){if(t===0)return Se.resolve(Wi.oe);const n=new S6(t);return this.Jn.forEachTarget(e,i=>n.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>n.zn(i))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(Je("LruGarbageCollector","Garbage collection skipped; disabled"),Se.resolve(My)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Je("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),My):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let n,i,s,a,o,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Je("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),i=this.params.maximumSequenceNumbersToCollect):i=d,a=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(n=d,o=Date.now(),this.removeTargets(e,n,t))).next(d=>(s=d,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(d=>(u=Date.now(),vl()<=Yt.DEBUG&&Je("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-l}ms
	Determined least recently used ${i} in `+(o-a)+`ms
	Removed ${s} targets in `+(c-o)+`ms
	Removed ${d} documents in `+(u-c)+`ms
Total Duration: ${u-l}ms`),Se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:d})))}}function C6(r,e){return new N6(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(e,t){this.db=e,this.garbageCollector=C6(this,t)}Yn(e){const t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(n=>t.next(i=>n+i))}er(e){let t=0;return this.Zn(e,n=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(n,i)=>t(i))}addReference(e,t,n){return s0(e,n)}removeReference(e,t,n){return s0(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return s0(e,t)}nr(e,t){return function(i,s){let a=!1;return _T(i).Y(o=>vT(i,o,s).next(c=>(c&&(a=!0),Se.resolve(!c)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.tr(e,(a,o)=>{if(o<=t){const c=this.nr(e,a).next(u=>{if(!u)return s++,n.getEntry(e,a).next(()=>(n.removeEntry(a,Pt.min()),Go(e).delete(function(d){return[0,Si(d.path)]}(a))))});i.push(c)}}).next(()=>Se.waitFor(i)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return s0(e,t)}tr(e,t){const n=Go(e);let i,s=Wi.oe;return n.J({index:"documentTargetsIndex"},([a,o],{path:c,sequenceNumber:u})=>{a===0?(s!==Wi.oe&&t(new ft(pa(i)),s),s=u,i=c):s=Wi.oe}).next(()=>{s!==Wi.oe&&t(new ft(pa(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function s0(r,e){return Go(r).put(function(n,i){return{targetId:0,path:Si(n.path),sequenceNumber:i}}(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.changes=new wc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return n!==void 0?Se.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return jc(e).put(n)}removeEntry(e,t,n){return jc(e).delete(function(s,a){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],K0(a),o[o.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.rr(e,n)))}getEntry(e,t){let n=Mr.newInvalidDocument(t);return jc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xh(t))},(i,s)=>{n=this.ir(t,s)}).next(()=>n)}sr(e,t){let n={size:0,document:Mr.newInvalidDocument(t)};return jc(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Xh(t))},(i,s)=>{n={document:this.ir(t,s),size:X0(s)}}).next(()=>n)}getEntries(e,t){let n=$i();return this._r(e,t,(i,s)=>{const a=this.ir(i,s);n=n.insert(i,a)}).next(()=>n)}ar(e,t){let n=$i(),i=new Lr(ft.comparator);return this._r(e,t,(s,a)=>{const o=this.ir(s,a);n=n.insert(s,o),i=i.insert(s,X0(a))}).next(()=>({documents:n,ur:i}))}_r(e,t,n){if(t.isEmpty())return Se.resolve();let i=new Sr(qy);t.forEach(c=>i=i.add(c));const s=IDBKeyRange.bound(Xh(i.first()),Xh(i.last())),a=i.getIterator();let o=a.getNext();return jc(e).J({index:"documentKeyIndex",range:s},(c,u,l)=>{const d=ft.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;o&&qy(o,d)<0;)n(o,null),o=a.getNext();o&&o.isEqual(d)&&(n(o,u),o=a.hasNext()?a.getNext():null),o?l.$(Xh(o)):l.done()}).next(()=>{for(;o;)n(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,n,i,s){const a=t.path,o=[a.popLast().toArray(),a.lastSegment(),K0(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],c=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return jc(e).U(IDBKeyRange.bound(o,c,!0)).next(u=>{s==null||s.incrementDocumentReadCount(u.length);let l=$i();for(const d of u){const g=this.ir(ft.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);g.isFoundDocument()&&(pd(t,g)||i.has(g.key))&&(l=l.insert(g.key,g))}return l})}getAllFromCollectionGroup(e,t,n,i){let s=$i();const a=jy(t,n),o=jy(t,ps.max());return jc(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,o,!0)},(c,u,l)=>{const d=this.ir(ft.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s=s.insert(d.key,d),s.size===i&&l.done()}).next(()=>s)}newChangeBuffer(e){return new L6(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Uy(e).get("remoteDocumentGlobalKey").next(t=>(bt(!!t),t))}rr(e,t){return Uy(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){const n=g6(this.serializer,t);if(!(n.isNoDocument()&&n.version.isEqual(Pt.min())))return n}return Mr.newInvalidDocument(e)}}function wT(r){return new R6(r)}class L6 extends yT{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new wc(n=>n.toString(),(n,i)=>n.isEqual(i))}applyChanges(e){const t=[];let n=0,i=new Sr((s,a)=>jt(s.canonicalString(),a.canonicalString()));return this.changes.forEach((s,a)=>{const o=this.lr.get(s);if(t.push(this.cr.removeEntry(e,s,o.readTime)),a.isValidDocument()){const c=Iy(this.cr.serializer,a);i=i.add(s.path.popLast());const u=X0(c);n+=u-o.size,t.push(this.cr.addEntry(e,s,c))}else if(n-=o.size,this.trackRemovals){const c=Iy(this.cr.serializer,a.convertToNoDocument(Pt.min()));t.push(this.cr.addEntry(e,s,c))}}),i.forEach(s=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.cr.updateMetadata(e,n)),Se.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(n=>(this.lr.set(t,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:n,ur:i})=>(i.forEach((s,a)=>{this.lr.set(s,{size:a,readTime:n.get(s).readTime})}),n))}}function Uy(r){return Cn(r,"remoteDocumentGlobal")}function jc(r){return Cn(r,"remoteDocumentsV14")}function Xh(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jy(r,e){const t=e.documentKey.path.toArray();return[r,K0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qy(r,e){const t=r.path.toArray(),n=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<n.length-2;++s)if(i=jt(t[s],n[s]),i)return i;return i=jt(t.length,n.length),i||(i=jt(t[t.length-2],n[n.length-2]),i||jt(t[t.length-1],n[n.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(n!==null&&gf(n.mutation,i,Hi.empty(),Wr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.getLocalViewOfDocuments(e,n,Wt()).next(()=>n))}getLocalViewOfDocuments(e,t,n=Wt()){const i=ma();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(s=>{let a=af();return s.forEach((o,c)=>{a=a.insert(o,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const n=ma();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Wt()))}populateOverlays(e,t,n){const i=[];return n.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((a,o)=>{t.set(a,o)})})}computeViews(e,t,n,i){let s=$i();const a=mf(),o=function(){return mf()}();return t.forEach((c,u)=>{const l=n.get(u.key);i.has(u.key)&&(l===void 0||l.mutation instanceof uo)?s=s.insert(u.key,u):l!==void 0?(a.set(u.key,l.mutation.getFieldMask()),gf(l.mutation,u,l.mutation.getFieldMask(),Wr.now())):a.set(u.key,Hi.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,l)=>a.set(u,l)),t.forEach((u,l)=>{var d;return o.set(u,new D6(l,(d=a.get(u))!==null&&d!==void 0?d:null))}),o))}recalculateAndSaveOverlays(e,t){const n=mf();let i=new Lr((a,o)=>a-o),s=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const o of a)o.keys().forEach(c=>{const u=t.get(c);if(u===null)return;let l=n.get(c)||Hi.empty();l=o.applyToLocalView(u,l),n.set(c,l);const d=(i.get(o.batchId)||Wt()).add(c);i=i.insert(o.batchId,d)})}).next(()=>{const a=[],o=i.getReverseIterator();for(;o.hasNext();){const c=o.getNext(),u=c.key,l=c.value,d=UE();l.forEach(g=>{if(!s.has(g)){const p=GE(t.get(g),n.get(g));p!==null&&d.set(g,p),s=s.add(g)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return Se.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,t,n,i){return function(a){return ft.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):c2(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(s=>{const a=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-s.size):Se.resolve(ma());let o=-1,c=s;return a.next(u=>Se.forEach(u,(l,d)=>(o<d.largestBatchId&&(o=d.largestBatchId),s.get(l)?Se.resolve():this.remoteDocumentCache.getEntry(e,l).next(g=>{c=c.insert(l,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,Wt())).next(l=>({batchId:o,changes:VE(l)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ft(t)).next(n=>{let i=af();return n.isFoundDocument()&&(i=i.insert(n.key,n)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const s=t.collectionGroup;let a=af();return this.indexManager.getCollectionParents(e,s).next(o=>Se.forEach(o,c=>{const u=function(d,g){return new co(g,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,n,i).next(l=>{l.forEach((d,g)=>{a=a.insert(d,g)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,n,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(a=>(s=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,i))).next(a=>{s.forEach((c,u)=>{const l=u.getKey();a.get(l)===null&&(a=a.insert(l,Mr.newInvalidDocument(l)))});let o=af();return a.forEach((c,u)=>{const l=s.get(c);l!==void 0&&gf(l.mutation,u,Hi.empty(),Wr.now()),pd(t,u)&&(o=o.insert(c,u))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F6{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return Se.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:dn(i.createTime)}}(t)),Se.resolve()}getNamedQuery(e,t){return Se.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:v2(i.bundledQuery),readTime:dn(i.readTime)}}(t)),Se.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O6{constructor(){this.overlays=new Lr(ft.comparator),this.Ir=new Map}getOverlay(e,t){return Se.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ma();return Se.forEach(t,i=>this.getOverlay(e,i).next(s=>{s!==null&&n.set(i,s)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((i,s)=>{this.ht(e,t,s)}),Se.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.Ir.get(n);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(n)),Se.resolve()}getOverlaysForCollection(e,t,n){const i=ma(),s=t.length+1,a=new ft(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){const c=o.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>n&&i.set(c.getKey(),c)}return Se.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let s=new Lr((u,l)=>u-l);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>n){let l=s.get(u.largestBatchId);l===null&&(l=ma(),s=s.insert(u.largestBatchId,l)),l.set(u.getKey(),u)}}const o=ma(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,l)=>o.set(u,l)),!(o.size()>=i)););return Se.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(n.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new p2(t,n));let s=this.Ir.get(t);s===void 0&&(s=Wt(),this.Ir.set(t,s)),this.Ir.set(t,s.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Se.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Se.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w2{constructor(){this.Tr=new Sr(Dn.Er),this.dr=new Sr(Dn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){const n=new Dn(e,t);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,t){e.forEach(n=>this.addReference(n,t))}removeReference(e,t){this.Vr(new Dn(e,t))}mr(e,t){e.forEach(n=>this.removeReference(n,t))}gr(e){const t=new ft(new Qt([])),n=new Dn(t,e),i=new Dn(t,e+1),s=[];return this.dr.forEachInRange([n,i],a=>{this.Vr(a),s.push(a.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const t=new ft(new Qt([])),n=new Dn(t,e),i=new Dn(t,e+1);let s=Wt();return this.dr.forEachInRange([n,i],a=>{s=s.add(a.key)}),s}containsKey(e){const t=new Dn(e,0),n=this.Tr.firstAfterOrEqual(t);return n!==null&&e.isEqual(n.key)}}class Dn{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return ft.comparator(e.key,t.key)||jt(e.wr,t.wr)}static Ar(e,t){return jt(e.wr,t.wr)||ft.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B6{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Sr(Dn.Er)}checkEmpty(e){return Se.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,n,i){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new f2(s,t,n,i);this.mutationQueue.push(a);for(const o of i)this.br=this.br.add(new Dn(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Se.resolve(a)}lookupMutationBatch(e,t){return Se.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.vr(n),s=i<0?0:i;return Se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Se.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dn(t,0),i=new Dn(t,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([n,i],a=>{const o=this.Dr(a.wr);s.push(o)}),Se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Sr(jt);return t.forEach(i=>{const s=new Dn(i,0),a=new Dn(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,a],o=>{n=n.add(o.wr)})}),Se.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let s=n;ft.isDocumentKey(s)||(s=s.child(""));const a=new Dn(new ft(s),0);let o=new Sr(jt);return this.br.forEachWhile(c=>{const u=c.key.path;return!!n.isPrefixOf(u)&&(u.length===i&&(o=o.add(c.wr)),!0)},a),Se.resolve(this.Cr(o))}Cr(e){const t=[];return e.forEach(n=>{const i=this.Dr(n);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){bt(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Se.forEach(t.mutations,i=>{const s=new Dn(i.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,t){const n=new Dn(t,0),i=this.br.firstAfterOrEqual(n);return Se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Se.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V6{constructor(e){this.Mr=e,this.docs=function(){return new Lr(ft.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),s=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Se.resolve(n?n.document.mutableCopy():Mr.newInvalidDocument(t))}getEntries(e,t){let n=$i();return t.forEach(i=>{const s=this.docs.get(i);n=n.insert(i,s?s.document.mutableCopy():Mr.newInvalidDocument(i))}),Se.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let s=$i();const a=t.path,o=new ft(a.child("")),c=this.docs.getIteratorFrom(o);for(;c.hasNext();){const{key:u,value:{document:l}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||n2(dE(l),n)<=0||(i.has(l.key)||pd(t,l))&&(s=s.insert(l.key,l.mutableCopy()))}return Se.resolve(s)}getAllFromCollectionGroup(e,t,n,i){xt()}Or(e,t){return Se.forEach(this.docs,n=>t(n))}newChangeBuffer(e){return new U6(this)}getSize(e){return Se.resolve(this.size)}}class U6 extends yT{constructor(e){super(),this.cr=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(n)}),Se.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j6{constructor(e){this.persistence=e,this.Nr=new wc(t=>du(t),fd),this.lastRemoteSnapshotVersion=Pt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new w2,this.targetCount=0,this.kr=_u.Bn()}forEachTarget(e,t){return this.Nr.forEach((n,i)=>t(i)),Se.resolve()}getLastRemoteSnapshotVersion(e){return Se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Se.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Lr&&(this.Lr=t),Se.resolve()}Kn(e){this.Nr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.kr=new _u(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,Se.resolve()}updateTargetData(e,t){return this.Kn(t),Se.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,Se.resolve()}removeTargets(e,t,n){let i=0;const s=[];return this.Nr.forEach((a,o)=>{o.sequenceNumber<=t&&n.get(o.targetId)===null&&(this.Nr.delete(a),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)}),Se.waitFor(s).next(()=>i)}getTargetCount(e){return Se.resolve(this.targetCount)}getTargetData(e,t){const n=this.Nr.get(t)||null;return Se.resolve(n)}addMatchingKeys(e,t,n){return this.Br.Rr(t,n),Se.resolve()}removeMatchingKeys(e,t,n){this.Br.mr(t,n);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(a=>{s.push(i.markPotentiallyOrphaned(e,a))}),Se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),Se.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Br.yr(t);return Se.resolve(n)}containsKey(e,t){return Se.resolve(this.Br.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,t){this.qr={},this.overlays={},this.Qr=new Wi(0),this.Kr=!1,this.Kr=!0,this.$r=new M6,this.referenceDelegate=e(this),this.Ur=new j6(this),this.indexManager=new b6,this.remoteDocumentCache=function(i){return new V6(i)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new fT(t),this.Gr=new F6(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O6,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.qr[e.toKey()];return n||(n=new B6(t,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,n){Je("MemoryPersistence","Starting transaction:",e);const i=new q6(this.Qr.next());return this.referenceDelegate.zr(),n(i).next(s=>this.referenceDelegate.jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Hr(e,t){return Se.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,t)))}}class q6 extends mE{constructor(e){super(),this.currentSequenceNumber=e}}class Wp{constructor(e){this.persistence=e,this.Jr=new w2,this.Yr=null}static Zr(e){return new Wp(e)}get Xr(){if(this.Yr)return this.Yr;throw xt()}addReference(e,t,n){return this.Jr.addReference(n,t),this.Xr.delete(n.toString()),Se.resolve()}removeReference(e,t,n){return this.Jr.removeReference(n,t),this.Xr.add(n.toString()),Se.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),Se.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Xr.add(s.toString()))}).next(()=>n.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Se.forEach(this.Xr,n=>{const i=ft.fromPath(n);return this.ei(e,i).next(s=>{s||t.removeEntry(i,Pt.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(n=>{n?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return Se.or([()=>Se.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6{constructor(e){this.serializer=e}O(e,t,n,i){const s=new Mp("createOrUpgrade",t);n<1&&i>=1&&(function(c){c.createObjectStore("owner")}(e),function(c){c.createObjectStore("mutationQueues",{keyPath:"userId"}),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ry,{unique:!0}),c.createObjectStore("documentMutations")}(e),zy(e),function(c){c.createObjectStore("remoteDocuments")}(e));let a=Se.resolve();return n<3&&i>=3&&(n!==0&&(function(c){c.deleteObjectStore("targetDocuments"),c.deleteObjectStore("targets"),c.deleteObjectStore("targetGlobal")}(e),zy(e)),a=a.next(()=>function(c){const u=c.store("targetGlobal"),l={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Pt.min().toTimestamp(),targetCount:0};return u.put("targetGlobalKey",l)}(s))),n<4&&i>=4&&(n!==0&&(a=a.next(()=>function(c,u){return u.store("mutations").U().next(l=>{c.deleteObjectStore("mutations"),c.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ry,{unique:!0});const d=u.store("mutations"),g=l.map(p=>d.put(p));return Se.waitFor(g)})}(e,s))),a=a.next(()=>{(function(c){c.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),n<5&&i>=5&&(a=a.next(()=>this.ni(s))),n<6&&i>=6&&(a=a.next(()=>(function(c){c.createObjectStore("remoteDocumentGlobal")}(e),this.ri(s)))),n<7&&i>=7&&(a=a.next(()=>this.ii(s))),n<8&&i>=8&&(a=a.next(()=>this.si(e,s))),n<9&&i>=9&&(a=a.next(()=>{(function(c){c.objectStoreNames.contains("remoteDocumentChanges")&&c.deleteObjectStore("remoteDocumentChanges")})(e)})),n<10&&i>=10&&(a=a.next(()=>this.oi(s))),n<11&&i>=11&&(a=a.next(()=>{(function(c){c.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(c){c.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&i>=12&&(a=a.next(()=>{(function(c){const u=c.createObjectStore("documentOverlays",{keyPath:TR});u.createIndex("collectionPathOverlayIndex",bR,{unique:!1}),u.createIndex("collectionGroupOverlayIndex",AR,{unique:!1})})(e)})),n<13&&i>=13&&(a=a.next(()=>function(c){const u=c.createObjectStore("remoteDocumentsV14",{keyPath:fR});u.createIndex("documentKeyIndex",dR),u.createIndex("collectionGroupIndex",pR)}(e)).next(()=>this._i(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&i>=14&&(a=a.next(()=>this.ai(e,s))),n<15&&i>=15&&(a=a.next(()=>function(c){c.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),c.createObjectStore("indexState",{keyPath:yR}).createIndex("sequenceNumberIndex",wR,{unique:!1}),c.createObjectStore("indexEntries",{keyPath:xR}).createIndex("documentKeyIndex",ER,{unique:!1})}(e))),n<16&&i>=16&&(a=a.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&i>=17&&(a=a.next(()=>{(function(c){c.createObjectStore("globals",{keyPath:"name"})})(e)})),a}ri(e){let t=0;return e.store("remoteDocuments").J((n,i)=>{t+=X0(i)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ni(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(i=>Se.forEach(i,s=>{const a=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",a).next(o=>Se.forEach(o,c=>{bt(c.userId===s.userId);const u=$c(this.serializer,c);return gT(e,s.userId,u).next(()=>{})}))}))}ii(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return n.J((a,o)=>{const c=new Qt(a),u=function(d){return[0,Si(d)]}(c);s.push(t.get(u).next(l=>l?Se.resolve():(d=>t.put({targetId:0,path:Si(d),sequenceNumber:i.highestListenSequenceNumber}))(c)))}).next(()=>Se.waitFor(s))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:_R});const n=t.store("collectionParents"),i=new y2,s=a=>{if(i.add(a)){const o=a.lastSegment(),c=a.popLast();return n.put({collectionId:o,parent:Si(c)})}};return t.store("remoteDocuments").J({H:!0},(a,o)=>{const c=new Qt(a);return s(c.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([a,o,c],u)=>{const l=pa(o);return s(l.popLast())}))}oi(e){const t=e.store("targets");return t.J((n,i)=>{const s=cf(i),a=dT(this.serializer,s);return t.put(a)})}_i(e,t){const n=t.store("remoteDocuments"),i=[];return n.J((s,a)=>{const o=t.store("remoteDocumentsV14"),c=function(d){return d.document?new ft(Qt.fromString(d.document.name).popFirst(5)):d.noDocument?ft.fromSegments(d.noDocument.path):d.unknownDocument?ft.fromSegments(d.unknownDocument.path):xt()}(a).path.toArray(),u={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};i.push(o.put(u))}).next(()=>Se.waitFor(i))}ai(e,t){const n=t.store("mutations"),i=wT(this.serializer),s=new ET(Wp.Zr,this.serializer.ct);return n.U().next(a=>{const o=new Map;return a.forEach(c=>{var u;let l=(u=o.get(c.userId))!==null&&u!==void 0?u:Wt();$c(this.serializer,c).keys().forEach(d=>l=l.add(d)),o.set(c.userId,l)}),Se.forEach(o,(c,u)=>{const l=new Fn(u),d=qp.lt(this.serializer,l),g=s.getIndexManager(l),p=zp.lt(l,this.serializer,g,s.referenceDelegate);return new xT(i,p,d,g).recalculateAndSaveOverlaysForDocumentKeys(new jg(t,Wi.oe),c).next()})})}}function zy(r){r.createObjectStore("targetDocuments",{keyPath:gR}).createIndex("documentTargetsIndex",vR,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",mR,{unique:!0}),r.createObjectStore("targetGlobal")}const Jm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class x2{constructor(e,t,n,i,s,a,o,c,u,l,d=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ui=s,this.window=a,this.document=o,this.ci=u,this.li=l,this.hi=d,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=g=>Promise.resolve(),!x2.D())throw new Xe(Le.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k6(this,i),this.Ai=t+"main",this.serializer=new fT(c),this.Ri=new va(this.Ai,this.hi,new z6(this.serializer)),this.$r=new _6,this.Ur=new I6(this.referenceDelegate,this.serializer),this.remoteDocumentCache=wT(this.serializer),this.Gr=new v6,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,l===!1&&fn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Xe(Le.FAILED_PRECONDITION,Jm);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new Wi(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(async t=>{t.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>a0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(yc(e))return Je("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Je("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return Jh(e).get("owner").next(t=>Se.resolve(this.vi(t)))}Ci(e){return a0(e).delete(this.clientId)}async Fi(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=Cn(t,"clientMetadata");return n.U().next(i=>{const s=this.xi(i,18e5),a=i.filter(o=>s.indexOf(o)===-1);return Se.forEach(a,o=>n.delete(o.clientId)).next(()=>a)})}).catch(()=>[]);if(this.Vi)for(const t of e)this.Vi.removeItem(this.Oi(t.clientId))}}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?Se.resolve(!0):Jh(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new Xe(Le.FAILED_PRECONDITION,Jm);return!1}}return!(!this.networkEnabled||!this.inForeground)||a0(e).U().next(n=>this.xi(n,5e3).find(i=>{if(this.clientId!==i.clientId){const s=!this.networkEnabled&&i.networkEnabled,a=!this.inForeground&&i.inForeground,o=this.networkEnabled===i.networkEnabled;if(s||a&&o)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&Je("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}async shutdown(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),await this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new jg(e,Wi.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()}xi(e,t){return e.filter(n=>this.Mi(n.updateTimeMs,t)&&!this.Ni(n.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>a0(e).U().next(t=>this.xi(t,18e5).map(n=>n.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return zp.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new A6(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return qp.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,n){Je("IndexedDbPersistence","Starting transaction:",e);const i=t==="readonly"?"readonly":"readwrite",s=function(c){return c===17?PR:c===16?SR:c===15?s2:c===14?xE:c===13?wE:c===12?IR:c===11?yE:void xt()}(this.hi);let a;return this.Ri.runTransaction(e,i,s,o=>(a=new jg(o,this.Qr?this.Qr.next():Wi.oe),t==="readwrite-primary"?this.wi(a).next(c=>!!c||this.Si(a)).next(c=>{if(!c)throw fn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new Xe(Le.FAILED_PRECONDITION,pE);return n(a)}).next(c=>this.Di(a).next(()=>c)):this.Ki(a).next(()=>n(a)))).then(o=>(a.raiseOnCommittedEvent(),o))}Ki(e){return Jh(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Xe(Le.FAILED_PRECONDITION,Jm)})}Di(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Jh(e).put("owner",t)}static D(){return va.D()}bi(e){const t=Jh(e);return t.get("owner").next(n=>this.vi(n)?(Je("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Se.resolve())}Mi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(fn(`Detected an update time that is in the future: ${e} > ${n}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();const t=/(?:Version|Mobile)\/1[456]/;$5()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{const n=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return Je("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return fn("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){fn("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Jh(r){return Cn(r,"owner")}function a0(r){return Cn(r,"clientMetadata")}function E2(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T2{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.$i=n,this.Ui=i}static Wi(e,t){let n=Wt(),i=Wt();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new T2(e,t.fromCache,n,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W6{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $5()?8:gE(Gr())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,n,i){const s={result:null};return this.Yi(e,t).next(a=>{s.result=a}).next(()=>{if(!s.result)return this.Zi(e,t,i,n).next(a=>{s.result=a})}).next(()=>{if(s.result)return;const a=new W6;return this.Xi(e,t,a).next(o=>{if(s.result=o,this.zi)return this.es(e,t,a,o.size)})}).next(()=>s.result)}es(e,t,n,i){return n.documentReadCount<this.ji?(vl()<=Yt.DEBUG&&Je("QueryEngine","SDK will not create cache indexes for query:",_l(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Se.resolve()):(vl()<=Yt.DEBUG&&Je("QueryEngine","Query:",_l(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Hi*i?(vl()<=Yt.DEBUG&&Je("QueryEngine","The SDK decides to create cache indexes for query:",_l(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(t))):Se.resolve())}Yi(e,t){if(my(t))return Se.resolve(null);let n=Pi(t);return this.indexManager.getIndexType(e,n).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=G0(t,null,"F"),n=Pi(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(s=>{const a=Wt(...s);return this.Ji.getDocuments(e,a).next(o=>this.indexManager.getMinOffset(e,n).next(c=>{const u=this.ts(t,o);return this.ns(t,u,a,c.readTime)?this.Yi(e,G0(t,null,"F")):this.rs(e,u,t,c)}))})))}Zi(e,t,n,i){return my(t)||i.isEqual(Pt.min())?Se.resolve(null):this.Ji.getDocuments(e,n).next(s=>{const a=this.ts(t,s);return this.ns(t,a,n,i)?Se.resolve(null):(vl()<=Yt.DEBUG&&Je("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),_l(t)),this.rs(e,a,t,fE(i,-1)).next(o=>o))})}ts(e,t){let n=new Sr(ME(e));return t.forEach((i,s)=>{pd(e,s)&&(n=n.add(s))}),n}ns(e,t,n,i){if(e.limit===null)return!1;if(n.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Xi(e,t,n){return vl()<=Yt.DEBUG&&Je("QueryEngine","Using full collection scan to execute query:",_l(t)),this.Ji.getDocumentsMatchingQuery(e,t,ps.min(),n)}rs(e,t,n,i){return this.Ji.getDocumentsMatchingQuery(e,n,i).next(s=>(t.forEach(a=>{s=s.insert(a.key,a)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H6{constructor(e,t,n,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Lr(jt),this._s=new wc(s=>du(s),fd),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xT(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}}function bT(r,e,t,n){return new H6(r,e,t,n)}async function AT(r,e){const t=gt(r);return await t.persistence.runTransaction("Handle user change","readonly",n=>{let i;return t.mutationQueue.getAllMutationBatches(n).next(s=>(i=s,t.ls(e),t.mutationQueue.getAllMutationBatches(n))).next(s=>{const a=[],o=[];let c=Wt();for(const u of i){a.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}for(const u of s){o.push(u.batchId);for(const l of u.mutations)c=c.add(l.key)}return t.localDocuments.getDocuments(n,c).next(u=>({hs:u,removedBatchIds:a,addedBatchIds:o}))})})}function $6(r,e){const t=gt(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const i=e.batch.keys(),s=t.cs.newChangeBuffer({trackRemovals:!0});return function(o,c,u,l){const d=u.batch,g=d.keys();let p=Se.resolve();return g.forEach(x=>{p=p.next(()=>l.getEntry(c,x)).next(_=>{const E=u.docVersions.get(x);bt(E!==null),_.version.compareTo(E)<0&&(d.applyToRemoteDocument(_,u),_.isValidDocument()&&(_.setReadTime(u.commitVersion),l.addEntry(_)))})}),p.next(()=>o.mutationQueue.removeMutationBatch(c,d))}(t,n,e,s).next(()=>s.apply(n)).next(()=>t.mutationQueue.performConsistencyCheck(n)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(n,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(o){let c=Wt();for(let u=0;u<o.mutationResults.length;++u)o.mutationResults[u].transformResults.length>0&&(c=c.add(o.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(n,i))})}function IT(r){const e=gt(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function G6(r,e){const t=gt(r),n=e.snapshotVersion;let i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const a=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;const o=[];e.targetChanges.forEach((l,d)=>{const g=i.get(d);if(!g)return;o.push(t.Ur.removeMatchingKeys(s,l.removedDocuments,d).next(()=>t.Ur.addMatchingKeys(s,l.addedDocuments,d)));let p=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(nn.EMPTY_BYTE_STRING,Pt.min()).withLastLimboFreeSnapshotVersion(Pt.min()):l.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(l.resumeToken,n)),i=i.insert(d,p),function(_,E,P){return _.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(g,p,l)&&o.push(t.Ur.updateTargetData(s,p))});let c=$i(),u=Wt();if(e.documentUpdates.forEach(l=>{e.resolvedLimboDocuments.has(l)&&o.push(t.persistence.referenceDelegate.updateLimboDocument(s,l))}),o.push(ST(s,a,e.documentUpdates).next(l=>{c=l.Ps,u=l.Is})),!n.isEqual(Pt.min())){const l=t.Ur.getLastRemoteSnapshotVersion(s).next(d=>t.Ur.setTargetsMetadata(s,s.currentSequenceNumber,n));o.push(l)}return Se.waitFor(o).next(()=>a.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.os=i,s))}function ST(r,e,t){let n=Wt(),i=Wt();return t.forEach(s=>n=n.add(s)),e.getEntries(r,n).next(s=>{let a=$i();return t.forEach((o,c)=>{const u=s.get(o);c.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(o)),c.isNoDocument()&&c.version.isEqual(Pt.min())?(e.removeEntry(o,c.readTime),a=a.insert(o,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(o,c)):Je("LocalStore","Ignoring outdated watch update for ",o,". Current version:",u.version," Watch version:",c.version)}),{Ps:a,Is:i}})}function K6(r,e){const t=gt(r);return t.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function eh(r,e){const t=gt(r);return t.persistence.runTransaction("Allocate target","readwrite",n=>{let i;return t.Ur.getTargetData(n,e).next(s=>s?(i=s,Se.resolve(i)):t.Ur.allocateTargetId(n).next(a=>(i=new Ka(e,a,"TargetPurposeListen",n.currentSequenceNumber),t.Ur.addTargetData(n,i).next(()=>i))))}).then(n=>{const i=t.os.get(n.targetId);return(i===null||n.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(n.targetId,n),t._s.set(e,n.targetId)),n})}async function th(r,e,t){const n=gt(r),i=n.os.get(e),s=t?"readwrite":"readwrite-primary";try{t||await n.persistence.runTransaction("Release target",s,a=>n.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!yc(a))throw a;Je("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}n.os=n.os.remove(e),n._s.delete(i.target)}function J0(r,e,t){const n=gt(r);let i=Pt.min(),s=Wt();return n.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,l){const d=gt(c),g=d._s.get(l);return g!==void 0?Se.resolve(d.os.get(g)):d.Ur.getTargetData(u,l)}(n,a,Pi(e)).next(o=>{if(o)return i=o.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(a,o.targetId).next(c=>{s=c})}).next(()=>n.ss.getDocumentsMatchingQuery(a,e,t?i:Pt.min(),t?s:Wt())).next(o=>(CT(n,OE(e),o),{documents:o,Ts:s})))}function PT(r,e){const t=gt(r),n=gt(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>n.ot(s,e).next(a=>a?a.target:null))}function NT(r,e){const t=gt(r),n=t.us.get(e)||Pt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,fE(n,-1),Number.MAX_SAFE_INTEGER)).then(i=>(CT(t,e,i),i))}function CT(r,e,t){let n=r.us.get(e)||Pt.min();t.forEach((i,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),r.us.set(e,n)}async function Y6(r,e,t,n){const i=gt(r);let s=Wt(),a=$i();for(const u of t){const l=e.Es(u.metadata.name);u.document&&(s=s.add(l));const d=e.ds(u);d.setReadTime(e.As(u.metadata.readTime)),a=a.insert(l,d)}const o=i.cs.newChangeBuffer({trackRemovals:!0}),c=await eh(i,function(l){return Pi(mh(Qt.fromString(`__bundle__/docs/${l}`)))}(n));return i.persistence.runTransaction("Apply bundle documents","readwrite",u=>ST(u,o,a).next(l=>(o.apply(u),l)).next(l=>i.Ur.removeMatchingKeysForTargetId(u,c.targetId).next(()=>i.Ur.addMatchingKeys(u,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(u,l.Ps,l.Is)).next(()=>l.Ps)))}async function X6(r,e,t=Wt()){const n=await eh(r,Pi(v2(e.bundledQuery))),i=gt(r);return i.persistence.runTransaction("Save named query","readwrite",s=>{const a=dn(e.readTime);if(n.snapshotVersion.compareTo(a)>=0)return i.Gr.saveNamedQuery(s,e);const o=n.withResumeToken(nn.EMPTY_BYTE_STRING,a);return i.os=i.os.insert(o.targetId,o),i.Ur.updateTargetData(s,o).next(()=>i.Ur.removeMatchingKeysForTargetId(s,n.targetId)).next(()=>i.Ur.addMatchingKeys(s,t,n.targetId)).next(()=>i.Gr.saveNamedQuery(s,e))})}function Wy(r,e){return`firestore_clients_${r}_${e}`}function Hy(r,e,t){let n=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(n+=`_${e.uid}`),n}function Qm(r,e){return`firestore_targets_${r}_${e}`}class Q0{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Rs(e,t,n){const i=JSON.parse(n);let s,a=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(s=new Xe(i.error.code,i.error.message))),a?new Q0(e,t,i.state,s):(fn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vf{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Rs(e,t){const n=JSON.parse(t);let i,s=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object");return s&&n.error&&(s=typeof n.error.message=="string"&&typeof n.error.code=="string",s&&(i=new Xe(n.error.code,n.error.message))),s?new vf(e,n.state,i):(fn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Z0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){const n=JSON.parse(t);let i=typeof n=="object"&&n.activeTargetIds instanceof Array,s=u2();for(let a=0;i&&a<n.activeTargetIds.length;++a)i=vE(n.activeTargetIds[a]),s=s.add(n.activeTargetIds[a]);return i?new Z0(e,s):(fn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class b2{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new b2(t.clientId,t.onlineState):(fn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class t1{constructor(){this.activeTargetIds=u2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zm{constructor(e,t,n,i,s){this.window=e,this.ui=t,this.persistenceKey=n,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Lr(jt),this.started=!1,this.bs=[];const a=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.Ds=Wy(this.persistenceKey,this.ps),this.vs=function(c){return`firestore_sequence_number_${c}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new t1),this.Cs=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.xs=function(c){return`firestore_online_state_${c}`}(this.persistenceKey),this.Os=function(c){return`firestore_bundle_loaded_v2_${c}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Qi();for(const n of e){if(n===this.ps)continue;const i=this.getItem(Wy(this.persistenceKey,n));if(i){const s=Z0.Rs(n,i);s&&(this.Ss=this.Ss.insert(s.clientId,s))}}this.Ns();const t=this.storage.getItem(this.xs);if(t){const n=this.Ls(t);n&&this.Bs(n)}for(const n of this.bs)this.ws(n);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,n){this.qs(e,t,n),this.Qs(e)}addLocalQueryTarget(e,t=!0){let n="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Qm(this.persistenceKey,e));if(i){const s=vf.Rs(e,i);s&&(n=s.state)}}return t&&this.Ks.fs(e),this.Ns(),n}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Qm(this.persistenceKey,e))}updateQueryState(e,t,n){this.$s(e,t,n)}handleUserChange(e,t,n){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,n.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Je("SharedClientState","READ",e,t),t}setItem(e,t){Je("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Je("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){const t=e;if(t.storageArea===this.storage){if(Je("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void fn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(async()=>{if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){const n=this.Gs(t.key);return this.zs(n,null)}{const n=this.js(t.key,t.newValue);if(n)return this.zs(n.clientId,n)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){const n=this.Hs(t.key,t.newValue);if(n)return this.Js(n)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){const n=this.Ys(t.key,t.newValue);if(n)return this.Zs(n)}}else if(t.key===this.xs){if(t.newValue!==null){const n=this.Ls(t.newValue);if(n)return this.Bs(n)}}else if(t.key===this.vs){const n=function(s){let a=Wi.oe;if(s!=null)try{const o=JSON.parse(s);bt(typeof o=="number"),a=o}catch(o){fn("SharedClientState","Failed to read sequence number from WebStorage",o)}return a}(t.newValue);n!==Wi.oe&&this.sequenceNumberHandler(n)}else if(t.key===this.Os){const n=this.Xs(t.newValue);await Promise.all(n.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)})}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,n){const i=new Q0(this.currentUser,e,t,n),s=Hy(this.persistenceKey,this.currentUser,e);this.setItem(s,i.Vs())}Qs(e){const t=Hy(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){const t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,n){const i=Qm(this.persistenceKey,e),s=new vf(e,t,n);this.setItem(i,s.Vs())}Ws(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){const t=this.Cs.exec(e);return t?t[1]:null}js(e,t){const n=this.Gs(e);return Z0.Rs(n,t)}Hs(e,t){const n=this.Fs.exec(e),i=Number(n[1]),s=n[2]!==void 0?n[2]:null;return Q0.Rs(new Fn(s),i,t)}Ys(e,t){const n=this.Ms.exec(e),i=Number(n[1]);return vf.Rs(i,t)}Ls(e){return b2.Rs(e)}Xs(e){return JSON.parse(e)}async Js(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);Je("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){const n=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),s=this.ks(n),a=[],o=[];return s.forEach(c=>{i.has(c)||a.push(c)}),i.forEach(c=>{s.has(c)||o.push(c)}),this.syncEngine.io(a,o).then(()=>{this.Ss=n})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=u2();return e.forEach((n,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class kT{constructor(){this.so=new t1,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,n){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new t1,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J6{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Je("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Je("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o0=null;function eg(){return o0===null?o0=function(){return 268435456+Math.round(2147483648*Math.random())}():o0++,"0x"+o0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q6={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z6{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="WebChannelConnection";class eL extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+t.host,this.vo=`projects/${i}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Fo(){return!1}Mo(t,n,i,s,a){const o=eg(),c=this.xo(t,n.toUriEncodedString());Je("RestConnection",`Sending RPC '${t}' ${o}:`,c,i);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,a),this.No(t,c,u,i).then(l=>(Je("RestConnection",`Received RPC '${t}' ${o}: `,l),l),l=>{throw Ea("RestConnection",`RPC '${t}' ${o} failed with error: `,l,"url: ",c,"request:",i),l})}Lo(t,n,i,s,a,o){return this.Mo(t,n,i,s,a)}Oo(t,n,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ph}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,a)=>t[a]=s),i&&i.headers.forEach((s,a)=>t[a]=s)}xo(t,n){const i=Q6[t];return`${this.Do}/v1/${n}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,n,i){const s=eg();return new Promise((a,o)=>{const c=new iE;c.setWithCredentials(!0),c.listenOnce(sE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case b0.NO_ERROR:const l=c.getResponseJson();Je(oi,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(l)),a(l);break;case b0.TIMEOUT:Je(oi,`RPC '${e}' ${s} timed out`),o(new Xe(Le.DEADLINE_EXCEEDED,"Request time out"));break;case b0.HTTP_ERROR:const d=c.getStatus();if(Je(oi,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const p=g==null?void 0:g.error;if(p&&p.status&&p.message){const x=function(E){const P=E.toLowerCase().replace(/_/g,"-");return Object.values(Le).indexOf(P)>=0?P:Le.UNKNOWN}(p.status);o(new Xe(x,p.message))}else o(new Xe(Le.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new Xe(Le.UNAVAILABLE,"Connection failed."));break;default:xt()}}finally{Je(oi,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(i);Je(oi,`RPC '${e}' ${s} sending request:`,i),c.send(t,"POST",u,n,15)})}Bo(e,t,n){const i=eg(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=cE(),o=oE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const l=s.join("");Je(oi,`Creating RPC '${e}' stream ${i}: ${l}`,c);const d=a.createWebChannel(l,c);let g=!1,p=!1;const x=new Z6({Io:E=>{p?Je(oi,`Not sending because RPC '${e}' stream ${i} is closed:`,E):(g||(Je(oi,`Opening RPC '${e}' stream ${i} transport.`),d.open(),g=!0),Je(oi,`RPC '${e}' stream ${i} sending:`,E),d.send(E))},To:()=>d.close()}),_=(E,P,L)=>{E.listen(P,M=>{try{L(M)}catch(K){setTimeout(()=>{throw K},0)}})};return _(d,sf.EventType.OPEN,()=>{p||(Je(oi,`RPC '${e}' stream ${i} transport opened.`),x.yo())}),_(d,sf.EventType.CLOSE,()=>{p||(p=!0,Je(oi,`RPC '${e}' stream ${i} transport closed`),x.So())}),_(d,sf.EventType.ERROR,E=>{p||(p=!0,Ea(oi,`RPC '${e}' stream ${i} transport errored:`,E),x.So(new Xe(Le.UNAVAILABLE,"The operation could not be completed")))}),_(d,sf.EventType.MESSAGE,E=>{var P;if(!p){const L=E.data[0];bt(!!L);const M=L,K=M.error||((P=M[0])===null||P===void 0?void 0:P.error);if(K){Je(oi,`RPC '${e}' stream ${i} received error:`,K);const ie=K.status;let oe=function(k){const V=wn[k];if(V!==void 0)return XE(V)}(ie),N=K.message;oe===void 0&&(oe=Le.INTERNAL,N="Unknown error status: "+ie+" with message "+K.message),p=!0,x.So(new Xe(oe,N)),d.close()}else Je(oi,`RPC '${e}' stream ${i} received:`,L),x.bo(L)}}),_(o,aE.STAT_EVENT,E=>{E.stat===Vg.PROXY?Je(oi,`RPC '${e}' stream ${i} detected buffering proxy`):E.stat===Vg.NOPROXY&&Je(oi,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{x.wo()},0),x}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(){return typeof window<"u"?window:null}function k0(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(r){return new a6(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A2{constructor(e,t,n=1e3,i=1.5,s=6e4){this.ui=e,this.timerId=t,this.ko=n,this.qo=i,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const t=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-n);i>0&&Je("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,t,n,i,s,a,o,c){this.ui=e,this.Ho=n,this.Jo=i,this.connection=s,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new A2(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,t){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===Le.RESOURCE_EXHAUSTED?(fn(t.toString()),fn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===Le.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(t)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,i])=>{this.Yo===t&&this.P_(n,i)},n=>{e(()=>{const i=new Xe(Le.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(i)})})}P_(e,t){const n=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{n(()=>this.I_(i))}),this.stream.onMessage(i=>{n(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Je("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(Je("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tL extends LT{constructor(e,t,n,i,s,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const t=u6(this.serializer,e),n=function(s){if(!("targetChange"in s))return Pt.min();const a=s.targetChange;return a.targetIds&&a.targetIds.length?Pt.min():a.readTime?dn(a.readTime):Pt.min()}(e);return this.listener.d_(t,n)}A_(e){const t={};t.database=Xg(this.serializer),t.addTarget=function(s,a){let o;const c=a.target;if(o=H0(c)?{documents:aT(s,c)}:{query:oT(s,c)._t},o.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){o.resumeToken=eT(s,a.resumeToken);const u=Kg(s,a.expectedCount);u!==null&&(o.expectedCount=u)}else if(a.snapshotVersion.compareTo(Pt.min())>0){o.readTime=Zl(s,a.snapshotVersion.toTimestamp());const u=Kg(s,a.expectedCount);u!==null&&(o.expectedCount=u)}return o}(this.serializer,e);const n=h6(this.serializer,e);n&&(t.labels=n),this.a_(t)}R_(e){const t={};t.database=Xg(this.serializer),t.removeTarget=e,this.a_(t)}}class rL extends LT{constructor(e,t,n,i,s,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,a),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return bt(!!e.streamToken),this.lastStreamToken=e.streamToken,bt(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){bt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const t=l6(e.writeResults,e.commitTime),n=dn(e.commitTime);return this.listener.g_(n,t)}p_(){const e={};e.database=Xg(this.serializer),this.a_(e)}m_(e){const t={streamToken:this.lastStreamToken,writes:e.map(n=>qf(this.serializer,n))};this.a_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nL extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new Xe(Le.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,n,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Mo(e,Yg(t,n),i,s,a)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Xe(Le.UNKNOWN,s.toString())})}Lo(e,t,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.Lo(e,Yg(t,n),i,a,o,s)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Le.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Xe(Le.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(fn(t),this.D_=!1):Je("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,t,n,i,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(a=>{n.enqueueAndForget(async()=>{xc(this)&&(Je("RemoteStore","Restarting streams for network reachability change."),await async function(c){const u=gt(c);u.L_.add(4),await _h(u),u.q_.set("Unknown"),u.L_.delete(4),await yd(u)}(this))})}),this.q_=new iL(n,i)}}async function yd(r){if(xc(r))for(const e of r.B_)await e(!0)}async function _h(r){for(const e of r.B_)await e(!1)}function Hp(r,e){const t=gt(r);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),P2(t)?S2(t):wh(t).r_()&&I2(t,e))}function rh(r,e){const t=gt(r),n=wh(t);t.N_.delete(e),n.r_()&&DT(t,e),t.N_.size===0&&(n.r_()?n.o_():xc(t)&&t.q_.set("Unknown"))}function I2(r,e){if(r.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Pt.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wh(r).A_(e)}function DT(r,e){r.Q_.xe(e),wh(r).R_(e)}function S2(r){r.Q_=new r6({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>r.N_.get(e)||null,tt:()=>r.datastore.serializer.databaseId}),wh(r).start(),r.q_.v_()}function P2(r){return xc(r)&&!wh(r).n_()&&r.N_.size>0}function xc(r){return gt(r).L_.size===0}function FT(r){r.Q_=void 0}async function aL(r){r.q_.set("Online")}async function oL(r){r.N_.forEach((e,t)=>{I2(r,e)})}async function cL(r,e){FT(r),P2(r)?(r.q_.M_(e),S2(r)):r.q_.set("Unknown")}async function uL(r,e,t){if(r.q_.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await async function(i,s){const a=s.cause;for(const o of s.targetIds)i.N_.has(o)&&(await i.remoteSyncer.rejectListen(o,a),i.N_.delete(o),i.Q_.removeTarget(o))}(r,e)}catch(n){Je("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await ep(r,n)}else if(e instanceof C0?r.Q_.Ke(e):e instanceof QE?r.Q_.He(e):r.Q_.We(e),!t.isEqual(Pt.min()))try{const n=await IT(r.localStore);t.compareTo(n)>=0&&await function(s,a){const o=s.Q_.rt(a);return o.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const l=s.N_.get(u);l&&s.N_.set(u,l.withResumeToken(c.resumeToken,a))}}),o.targetMismatches.forEach((c,u)=>{const l=s.N_.get(c);if(!l)return;s.N_.set(c,l.withResumeToken(nn.EMPTY_BYTE_STRING,l.snapshotVersion)),DT(s,c);const d=new Ka(l.target,c,u,l.sequenceNumber);I2(s,d)}),s.remoteSyncer.applyRemoteEvent(o)}(r,t)}catch(n){Je("RemoteStore","Failed to raise snapshot:",n),await ep(r,n)}}async function ep(r,e,t){if(!yc(e))throw e;r.L_.add(1),await _h(r),r.q_.set("Offline"),t||(t=()=>IT(r.localStore)),r.asyncQueue.enqueueRetryable(async()=>{Je("RemoteStore","Retrying IndexedDB access"),await t(),r.L_.delete(1),await yd(r)})}function OT(r,e){return e().catch(t=>ep(r,t,e))}async function yh(r){const e=gt(r),t=cc(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;lL(e);)try{const i=await K6(e.localStore,n);if(i===null){e.O_.length===0&&t.o_();break}n=i.batchId,hL(e,i)}catch(i){await ep(e,i)}MT(e)&&BT(e)}function lL(r){return xc(r)&&r.O_.length<10}function hL(r,e){r.O_.push(e);const t=cc(r);t.r_()&&t.V_&&t.m_(e.mutations)}function MT(r){return xc(r)&&!cc(r).n_()&&r.O_.length>0}function BT(r){cc(r).start()}async function fL(r){cc(r).p_()}async function dL(r){const e=cc(r);for(const t of r.O_)e.m_(t.mutations)}async function pL(r,e,t){const n=r.O_.shift(),i=d2.from(n,e,t);await OT(r,()=>r.remoteSyncer.applySuccessfulWrite(i)),await yh(r)}async function mL(r,e){e&&cc(r).V_&&await async function(n,i){if(function(a){return YE(a)&&a!==Le.ABORTED}(i.code)){const s=n.O_.shift();cc(n).s_(),await OT(n,()=>n.remoteSyncer.rejectFailedWrite(s.batchId,i)),await yh(n)}}(r,e),MT(r)&&BT(r)}async function Gy(r,e){const t=gt(r);t.asyncQueue.verifyOperationInProgress(),Je("RemoteStore","RemoteStore received new credentials");const n=xc(t);t.L_.add(3),await _h(t),n&&t.q_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),await yd(t)}async function r1(r,e){const t=gt(r);e?(t.L_.delete(2),await yd(t)):e||(t.L_.add(2),await _h(t),t.q_.set("Unknown"))}function wh(r){return r.K_||(r.K_=function(t,n,i){const s=gt(t);return s.w_(),new tL(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Eo:aL.bind(null,r),Ro:oL.bind(null,r),mo:cL.bind(null,r),d_:uL.bind(null,r)}),r.B_.push(async e=>{e?(r.K_.s_(),P2(r)?S2(r):r.q_.set("Unknown")):(await r.K_.stop(),FT(r))})),r.K_}function cc(r){return r.U_||(r.U_=function(t,n,i){const s=gt(t);return s.w_(),new rL(n,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(r.datastore,r.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fL.bind(null,r),mo:mL.bind(null,r),f_:dL.bind(null,r),g_:pL.bind(null,r)}),r.B_.push(async e=>{e?(r.U_.s_(),await yh(r)):(await r.U_.stop(),r.O_.length>0&&(Je("RemoteStore",`Stopping write stream with ${r.O_.length} pending writes`),r.O_=[]))})),r.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t,n,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=s,this.deferred=new ti,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,s){const a=Date.now()+n,o=new N2(e,t,a,i,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Xe(Le.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xh(r,e){if(fn("AsyncQueue",`${e}: ${r}`),yc(r))return new Xe(Le.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ft.comparator(t.key,n.key):(t,n)=>ft.comparator(t.key,n.key),this.keyedMap=af(),this.sortedSet=new Lr(this.comparator)}static emptySet(e){return new Dl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=n.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const n=new Dl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.W_=new Lr(ft.comparator)}track(e){const t=e.doc.key,n=this.W_.get(t);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(t,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(t,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(t):e.type===1&&n.type===2?this.W_=this.W_.insert(t,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):xt():this.W_=this.W_.insert(t,e)}G_(){const e=[];return this.W_.inorderTraversal((t,n)=>{e.push(n)}),e}}class nh{constructor(e,t,n,i,s,a,o,c,u){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=s,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,n,i,s){const a=[];return t.forEach(o=>{a.push({type:0,doc:o})}),new nh(e,t,Dl.emptySet(t),a,n,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class vL{constructor(){this.queries=Yy(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,n){const i=gt(t),s=i.queries;i.queries=Yy(),s.forEach((a,o)=>{for(const c of o.j_)c.onError(n)})})(this,new Xe(Le.ABORTED,"Firestore shutting down"))}}function Yy(){return new wc(r=>FE(r),dd)}async function C2(r,e){const t=gt(r);let n=3;const i=e.query;let s=t.queries.get(i);s?!s.H_()&&e.J_()&&(n=2):(s=new gL,n=e.J_()?0:1);try{switch(n){case 0:s.z_=await t.onListen(i,!0);break;case 1:s.z_=await t.onListen(i,!1);break;case 2:await t.onFirstRemoteStoreListen(i)}}catch(a){const o=xh(a,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(o)}t.queries.set(i,s),s.j_.push(e),e.Z_(t.onlineState),s.z_&&e.X_(s.z_)&&R2(t)}async function k2(r,e){const t=gt(r),n=e.query;let i=3;const s=t.queries.get(n);if(s){const a=s.j_.indexOf(e);a>=0&&(s.j_.splice(a,1),s.j_.length===0?i=e.J_()?0:1:!s.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(n),t.onUnlisten(n,!0);case 1:return t.queries.delete(n),t.onUnlisten(n,!1);case 2:return t.onLastRemoteStoreUnlisten(n);default:return}}function _L(r,e){const t=gt(r);let n=!1;for(const i of e){const s=i.query,a=t.queries.get(s);if(a){for(const o of a.j_)o.X_(i)&&(n=!0);a.z_=i}}n&&R2(t)}function yL(r,e,t){const n=gt(r),i=n.queries.get(e);if(i)for(const s of i.j_)s.onError(t);n.queries.delete(e)}function R2(r){r.Y_.forEach(e=>{e.next()})}var n1,Xy;(Xy=n1||(n1={})).ea="default",Xy.Cache="cache";class L2{constructor(e,t,n){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const i of e.docChanges)i.type!==3&&n.push(i);e=new nh(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;const n=t!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=nh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==n1.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wL{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e){this.serializer=e}Es(e){return _a(this.serializer,e)}ds(e){return e.metadata.exists?sT(this.serializer,e.document,!1):Mr.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return dn(e)}}class xL{constructor(e,t,n){this.ca=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=VT(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;const n=Qt.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){const t=new Map,n=new Jy(this.serializer);for(const i of e)if(i.metadata.queries){const s=n.Es(i.metadata.name);for(const a of i.metadata.queries){const o=(t.get(a)||Wt()).add(s);t.set(a,o)}}return t}async complete(){const e=await Y6(this.localStore,new Jy(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(const n of this.queries)await X6(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}}}function VT(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e){this.key=e}}class jT{constructor(e){this.key=e}}class qT{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Wt(),this.mutatedKeys=Wt(),this.Aa=ME(e),this.Ra=new Dl(this.Aa)}get Va(){return this.Ta}ma(e,t){const n=t?t.fa:new Ky,i=t?t.Ra:this.Ra;let s=t?t.mutatedKeys:this.mutatedKeys,a=i,o=!1;const c=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((l,d)=>{const g=i.get(l),p=pd(this.query,d)?d:null,x=!!g&&this.mutatedKeys.has(g.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;g&&p?g.data.isEqual(p.data)?x!==_&&(n.track({type:3,doc:p}),E=!0):this.ga(g,p)||(n.track({type:2,doc:p}),E=!0,(c&&this.Aa(p,c)>0||u&&this.Aa(p,u)<0)&&(o=!0)):!g&&p?(n.track({type:0,doc:p}),E=!0):g&&!p&&(n.track({type:1,doc:g}),E=!0,(c||u)&&(o=!0)),E&&(p?(a=a.add(p),s=_?s.add(l):s.delete(l)):(a=a.delete(l),s=s.delete(l)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const l=this.query.limitType==="F"?a.last():a.first();a=a.delete(l.key),s=s.delete(l.key),n.track({type:1,doc:l})}return{Ra:a,fa:n,ns:o,mutatedKeys:s}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((l,d)=>function(p,x){const _=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xt()}};return _(p)-_(x)}(l.type,d.type)||this.Aa(l.doc,d.doc)),this.pa(n),i=i!=null&&i;const o=t&&!i?this.ya():[],c=this.da.size===0&&this.current&&!i?1:0,u=c!==this.Ea;return this.Ea=c,a.length!==0||u?{snapshot:new nh(this.query,e.Ra,s,a,e.mutatedKeys,c===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:o}:{wa:o}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Ky,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Wt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const t=[];return e.forEach(n=>{this.da.has(n)||t.push(new jT(n))}),this.da.forEach(n=>{e.has(n)||t.push(new UT(n))}),t}ba(e){this.Ta=e.Ts,this.da=Wt();const t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return nh.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class EL{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class TL{constructor(e){this.key=e,this.va=!1}}class bL{constructor(e,t,n,i,s,a){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new wc(o=>FE(o),dd),this.Ma=new Map,this.xa=new Set,this.Oa=new Lr(ft.comparator),this.Na=new Map,this.La=new w2,this.Ba={},this.ka=new Map,this.qa=_u.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function AL(r,e,t=!0){const n=$p(r);let i;const s=n.Fa.get(e);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Da()):i=await zT(n,e,t,!0),i}async function IL(r,e){const t=$p(r);await zT(t,e,!0,!1)}async function zT(r,e,t,n){const i=await eh(r.localStore,Pi(e)),s=i.targetId,a=r.sharedClientState.addLocalQueryTarget(s,t);let o;return n&&(o=await D2(r,e,s,a==="current",i.resumeToken)),r.isPrimaryClient&&t&&Hp(r.remoteStore,i),o}async function D2(r,e,t,n,i){r.Ka=(d,g,p)=>async function(_,E,P,L){let M=E.view.ma(P);M.ns&&(M=await J0(_.localStore,E.query,!1).then(({documents:N})=>E.view.ma(N,M)));const K=L&&L.targetChanges.get(E.targetId),ie=L&&L.targetMismatches.get(E.targetId)!=null,oe=E.view.applyChanges(M,_.isPrimaryClient,K,ie);return i1(_,E.targetId,oe.wa),oe.snapshot}(r,d,g,p);const s=await J0(r.localStore,e,!0),a=new qT(e,s.Ts),o=a.ma(s.documents),c=vd.createSynthesizedTargetChangeForCurrentChange(t,n&&r.onlineState!=="Offline",i),u=a.applyChanges(o,r.isPrimaryClient,c);i1(r,t,u.wa);const l=new EL(e,t,a);return r.Fa.set(e,l),r.Ma.has(t)?r.Ma.get(t).push(e):r.Ma.set(t,[e]),u.snapshot}async function SL(r,e,t){const n=gt(r),i=n.Fa.get(e),s=n.Ma.get(i.targetId);if(s.length>1)return n.Ma.set(i.targetId,s.filter(a=>!dd(a,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await th(n.localStore,i.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(i.targetId),t&&rh(n.remoteStore,i.targetId),ih(n,i.targetId)}).catch(_c)):(ih(n,i.targetId),await th(n.localStore,i.targetId,!0))}async function PL(r,e){const t=gt(r),n=t.Fa.get(e),i=t.Ma.get(n.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(n.targetId),rh(t.remoteStore,n.targetId))}async function NL(r,e,t){const n=B2(r);try{const i=await function(a,o){const c=gt(a),u=Wr.now(),l=o.reduce((p,x)=>p.add(x.key),Wt());let d,g;return c.persistence.runTransaction("Locally write mutations","readwrite",p=>{let x=$i(),_=Wt();return c.cs.getEntries(p,l).next(E=>{x=E,x.forEach((P,L)=>{L.isValidDocument()||(_=_.add(P))})}).next(()=>c.localDocuments.getOverlayedDocuments(p,x)).next(E=>{d=E;const P=[];for(const L of o){const M=ZR(L,d.get(L.key).overlayedDocument);M!=null&&P.push(new uo(L.key,M,IE(M.value.mapValue),zr.exists(!0)))}return c.mutationQueue.addMutationBatch(p,u,P,o)}).next(E=>{g=E;const P=E.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(p,E.batchId,P)})}).then(()=>({batchId:g.batchId,changes:VE(d)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(i.batchId),function(a,o,c){let u=a.Ba[a.currentUser.toKey()];u||(u=new Lr(jt)),u=u.insert(o,c),a.Ba[a.currentUser.toKey()]=u}(n,i.batchId,t),await lo(n,i.changes),await yh(n.remoteStore)}catch(i){const s=xh(i,"Failed to persist write");t.reject(s)}}async function WT(r,e){const t=gt(r);try{const n=await G6(t.localStore,e);e.targetChanges.forEach((i,s)=>{const a=t.Na.get(s);a&&(bt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?bt(a.va):i.removedDocuments.size>0&&(bt(a.va),a.va=!1))}),await lo(t,n,e)}catch(n){await _c(n)}}function Qy(r,e,t){const n=gt(r);if(n.isPrimaryClient&&t===0||!n.isPrimaryClient&&t===1){const i=[];n.Fa.forEach((s,a)=>{const o=a.view.Z_(e);o.snapshot&&i.push(o.snapshot)}),function(a,o){const c=gt(a);c.onlineState=o;let u=!1;c.queries.forEach((l,d)=>{for(const g of d.j_)g.Z_(o)&&(u=!0)}),u&&R2(c)}(n.eventManager,e),i.length&&n.Ca.d_(i),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function CL(r,e,t){const n=gt(r);n.sharedClientState.updateQueryState(e,"rejected",t);const i=n.Na.get(e),s=i&&i.key;if(s){let a=new Lr(ft.comparator);a=a.insert(s,Mr.newNoDocument(s,Pt.min()));const o=Wt().add(s),c=new gd(Pt.min(),new Map,new Lr(jt),a,o);await WT(n,c),n.Oa=n.Oa.remove(s),n.Na.delete(e),M2(n)}else await th(n.localStore,e,!1).then(()=>ih(n,e,t)).catch(_c)}async function kL(r,e){const t=gt(r),n=e.batch.batchId;try{const i=await $6(t.localStore,e);O2(t,n,null),F2(t,n),t.sharedClientState.updateMutationState(n,"acknowledged"),await lo(t,i)}catch(i){await _c(i)}}async function RL(r,e,t){const n=gt(r);try{const i=await function(a,o){const c=gt(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let l;return c.mutationQueue.lookupMutationBatch(u,o).next(d=>(bt(d!==null),l=d.keys(),c.mutationQueue.removeMutationBatch(u,d))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,l,o)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,l)).next(()=>c.localDocuments.getDocuments(u,l))})}(n.localStore,e);O2(n,e,t),F2(n,e),n.sharedClientState.updateMutationState(e,"rejected",t),await lo(n,i)}catch(i){await _c(i)}}async function LL(r,e){const t=gt(r);xc(t.remoteStore)||Je("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const n=await function(a){const o=gt(a);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",c=>o.mutationQueue.getHighestUnacknowledgedBatchId(c))}(t.localStore);if(n===-1)return void e.resolve();const i=t.ka.get(n)||[];i.push(e),t.ka.set(n,i)}catch(n){const i=xh(n,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function F2(r,e){(r.ka.get(e)||[]).forEach(t=>{t.resolve()}),r.ka.delete(e)}function O2(r,e,t){const n=gt(r);let i=n.Ba[n.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),n.Ba[n.currentUser.toKey()]=i}}function ih(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const n of r.Ma.get(e))r.Fa.delete(n),t&&r.Ca.$a(n,t);r.Ma.delete(e),r.isPrimaryClient&&r.La.gr(e).forEach(n=>{r.La.containsKey(n)||HT(r,n)})}function HT(r,e){r.xa.delete(e.path.canonicalString());const t=r.Oa.get(e);t!==null&&(rh(r.remoteStore,t),r.Oa=r.Oa.remove(e),r.Na.delete(t),M2(r))}function i1(r,e,t){for(const n of t)n instanceof UT?(r.La.addReference(n.key,e),DL(r,n)):n instanceof jT?(Je("SyncEngine","Document no longer in limbo: "+n.key),r.La.removeReference(n.key,e),r.La.containsKey(n.key)||HT(r,n.key)):xt()}function DL(r,e){const t=e.key,n=t.path.canonicalString();r.Oa.get(t)||r.xa.has(n)||(Je("SyncEngine","New document in limbo: "+t),r.xa.add(n),M2(r))}function M2(r){for(;r.xa.size>0&&r.Oa.size<r.maxConcurrentLimboResolutions;){const e=r.xa.values().next().value;r.xa.delete(e);const t=new ft(Qt.fromString(e)),n=r.qa.next();r.Na.set(n,new TL(t)),r.Oa=r.Oa.insert(t,n),Hp(r.remoteStore,new Ka(Pi(mh(t.path)),n,"TargetPurposeLimboResolution",Wi.oe))}}async function lo(r,e,t){const n=gt(r),i=[],s=[],a=[];n.Fa.isEmpty()||(n.Fa.forEach((o,c)=>{a.push(n.Ka(c,e,t).then(u=>{var l;if((u||t)&&n.isPrimaryClient){const d=u?!u.fromCache:(l=t==null?void 0:t.targetChanges.get(c.targetId))===null||l===void 0?void 0:l.current;n.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(u){i.push(u);const d=T2.Wi(c.targetId,u);s.push(d)}}))}),await Promise.all(a),n.Ca.d_(i),await async function(c,u){const l=gt(c);try{await l.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>Se.forEach(u,g=>Se.forEach(g.$i,p=>l.persistence.referenceDelegate.addReference(d,g.targetId,p)).next(()=>Se.forEach(g.Ui,p=>l.persistence.referenceDelegate.removeReference(d,g.targetId,p)))))}catch(d){if(!yc(d))throw d;Je("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const g=d.targetId;if(!d.fromCache){const p=l.os.get(g),x=p.snapshotVersion,_=p.withLastLimboFreeSnapshotVersion(x);l.os=l.os.insert(g,_)}}}(n.localStore,s))}async function FL(r,e){const t=gt(r);if(!t.currentUser.isEqual(e)){Je("SyncEngine","User change. New user:",e.toKey());const n=await AT(t.localStore,e);t.currentUser=e,function(s,a){s.ka.forEach(o=>{o.forEach(c=>{c.reject(new Xe(Le.CANCELLED,a))})}),s.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await lo(t,n.hs)}}function OL(r,e){const t=gt(r),n=t.Na.get(e);if(n&&n.va)return Wt().add(n.key);{let i=Wt();const s=t.Ma.get(e);if(!s)return i;for(const a of s){const o=t.Fa.get(a);i=i.unionWith(o.view.Va)}return i}}async function ML(r,e){const t=gt(r),n=await J0(t.localStore,e.query,!0),i=e.view.ba(n);return t.isPrimaryClient&&i1(t,e.targetId,i.wa),i}async function BL(r,e){const t=gt(r);return NT(t.localStore,e).then(n=>lo(t,n))}async function VL(r,e,t,n){const i=gt(r),s=await function(o,c){const u=gt(o),l=gt(u.mutationQueue);return u.persistence.runTransaction("Lookup mutation documents","readonly",d=>l.Mn(d,c).next(g=>g?u.localDocuments.getDocuments(d,g):Se.resolve(null)))}(i.localStore,e);s!==null?(t==="pending"?await yh(i.remoteStore):t==="acknowledged"||t==="rejected"?(O2(i,e,n||null),F2(i,e),function(o,c){gt(gt(o).mutationQueue).On(c)}(i.localStore,e)):xt(),await lo(i,s)):Je("SyncEngine","Cannot apply mutation batch with id: "+e)}async function UL(r,e){const t=gt(r);if($p(t),B2(t),e===!0&&t.Qa!==!0){const n=t.sharedClientState.getAllActiveQueryTargets(),i=await Zy(t,n.toArray());t.Qa=!0,await r1(t.remoteStore,!0);for(const s of i)Hp(t.remoteStore,s)}else if(e===!1&&t.Qa!==!1){const n=[];let i=Promise.resolve();t.Ma.forEach((s,a)=>{t.sharedClientState.isLocalQueryTarget(a)?n.push(a):i=i.then(()=>(ih(t,a),th(t.localStore,a,!0))),rh(t.remoteStore,a)}),await i,await Zy(t,n),function(a){const o=gt(a);o.Na.forEach((c,u)=>{rh(o.remoteStore,u)}),o.La.pr(),o.Na=new Map,o.Oa=new Lr(ft.comparator)}(t),t.Qa=!1,await r1(t.remoteStore,!1)}}async function Zy(r,e,t){const n=gt(r),i=[],s=[];for(const a of e){let o;const c=n.Ma.get(a);if(c&&c.length!==0){o=await eh(n.localStore,Pi(c[0]));for(const u of c){const l=n.Fa.get(u),d=await ML(n,l);d.snapshot&&s.push(d.snapshot)}}else{const u=await PT(n.localStore,a);o=await eh(n.localStore,u),await D2(n,$T(u),a,!1,o.resumeToken)}i.push(o)}return n.Ca.d_(s),i}function $T(r){return DE(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function jL(r){return function(t){return gt(gt(t).persistence).Qi()}(gt(r).localStore)}async function qL(r,e,t,n){const i=gt(r);if(i.Qa)return void Je("SyncEngine","Ignoring unexpected query state notification.");const s=i.Ma.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const a=await NT(i.localStore,OE(s[0])),o=gd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",nn.EMPTY_BYTE_STRING);await lo(i,a,o);break}case"rejected":await th(i.localStore,e,!0),ih(i,e,n);break;default:xt()}}async function zL(r,e,t){const n=$p(r);if(n.Qa){for(const i of e){if(n.Ma.has(i)&&n.sharedClientState.isActiveQueryTarget(i)){Je("SyncEngine","Adding an already active target "+i);continue}const s=await PT(n.localStore,i),a=await eh(n.localStore,s);await D2(n,$T(s),a.targetId,!1,a.resumeToken),Hp(n.remoteStore,a)}for(const i of t)n.Ma.has(i)&&await th(n.localStore,i,!1).then(()=>{rh(n.remoteStore,i),ih(n,i)}).catch(_c)}}function $p(r){const e=gt(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=WT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=OL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CL.bind(null,e),e.Ca.d_=_L.bind(null,e.eventManager),e.Ca.$a=yL.bind(null,e.eventManager),e}function B2(r){const e=gt(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RL.bind(null,e),e}function WL(r,e,t){const n=gt(r);(async function(s,a,o){try{const c=await a.getMetadata();if(await function(p,x){const _=gt(p),E=dn(x.createTime);return _.persistence.runTransaction("hasNewerBundle","readonly",P=>_.Gr.getBundleMetadata(P,x.id)).then(P=>!!P&&P.createTime.compareTo(E)>=0)}(s.localStore,c))return await a.close(),o._completeWith(function(p){return{taskState:"Success",documentsLoaded:p.totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}}(c)),Promise.resolve(new Set);o._updateProgress(VT(c));const u=new xL(c,s.localStore,a.serializer);let l=await a.Ua();for(;l;){const g=await u.la(l);g&&o._updateProgress(g),l=await a.Ua()}const d=await u.complete();return await lo(s,d.Ia,void 0),await function(p,x){const _=gt(p);return _.persistence.runTransaction("Save bundle","readwrite",E=>_.Gr.saveBundleMetadata(E,x))}(s.localStore,c),o._completeWith(d.progress),Promise.resolve(d.Pa)}catch(c){return Ea("SyncEngine",`Loading bundle failed with ${c}`),o._failWith(c),Promise.resolve(new Set)}})(n,e,t).then(i=>{n.sharedClientState.notifyBundleLoaded(i)})}class zf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,t){return null}Ha(e,t){return null}za(e){return bT(this.persistence,new TT,e.initialUser,this.serializer)}Ga(e){return new ET(Wp.Zr,this.serializer)}Wa(e){return new kT}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zf.provider={build:()=>new zf};class GT extends zf{constructor(e,t,n){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ja.initialize(this,e),await B2(this.Ja.syncEngine),await yh(this.Ja.remoteStore),await this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}za(e){return bT(this.persistence,new TT,e.initialUser,this.serializer)}ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new P6(n,e.asyncQueue,t)}Ha(e,t){const n=new uR(t,this.persistence);return new cR(e.asyncQueue,n)}Ga(e){const t=E2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?qi.withCacheSize(this.cacheSizeBytes):qi.DEFAULT;return new x2(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,RT(),k0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new kT}}class HL extends GT{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Ja.syncEngine;this.sharedClientState instanceof Zm&&(this.sharedClientState.syncEngine={no:VL.bind(null,t),ro:qL.bind(null,t),io:zL.bind(null,t),Qi:jL.bind(null,t),eo:BL.bind(null,t)},await this.sharedClientState.start()),await this.persistence.yi(async n=>{await UL(this.Ja.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())})}Wa(e){const t=RT();if(!Zm.D(t))throw new Xe(Le.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=E2(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zm(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Wf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Qy(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=FL.bind(null,this.syncEngine),await r1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new vL}()}createDatastore(e){const t=_d(e.databaseInfo.databaseId),n=function(s){return new eL(s)}(e.databaseInfo);return function(s,a,o,c){return new nL(s,a,o,c)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(n,i,s,a,o){return new sL(n,i,s,a,o)}(this.localStore,this.datastore,e.asyncQueue,t=>Qy(this.syncEngine,t,0),function(){return $y.D()?new $y:new J6}())}createSyncEngine(e,t){return function(i,s,a,o,c,u,l){const d=new bL(i,s,a,o,c,u);return l&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(i){const s=gt(i);Je("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await _h(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Wf.provider={build:()=>new Wf};function ew(r,e=10240){let t=0;return{async read(){if(t<r.byteLength){const n={value:r.slice(t,t+e),done:!1};return t+=e,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):fn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new ti,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(n=>{n&&n.ua()?this.metadata.resolve(n.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n==null?void 0:n.aa)}`))},n=>this.metadata.reject(n))}close(){return this.Xa.cancel()}async getMetadata(){return this.metadata.promise}async Ua(){return await this.getMetadata(),this.tu()}async tu(){const e=await this.nu();if(e===null)return null;const t=this.eu.decode(e),n=Number(t);isNaN(n)&&this.ru(`length string (${t}) is not valid number`);const i=await this.iu(n);return new wL(JSON.parse(i),e.length+n)}su(){return this.buffer.findIndex(e=>e===123)}async nu(){for(;this.su()<0&&!await this.ou(););if(this.buffer.length===0)return null;const e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async iu(e){for(;this.buffer.length<e;)await this.ou()&&this.ru("Reached the end of bundle when more is expected.");const t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}async ou(){const e=await this.Xa.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Xe(Le.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(i,s){const a=gt(i),o={documents:s.map(d=>jf(a.serializer,d))},c=await a.Lo("BatchGetDocuments",a.serializer.databaseId,Qt.emptyPath(),o,s.length),u=new Map;c.forEach(d=>{const g=c6(a.serializer,d);u.set(g.key.toString(),g)});const l=[];return s.forEach(d=>{const g=u.get(d.toString());bt(!!g),l.push(g)}),l}(this.datastore,e);return t.forEach(n=>this.recordVersion(n)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new vh(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,n)=>{const i=ft.fromPath(n);this.mutations.push(new h2(i,this.precondition(i)))}),await async function(n,i){const s=gt(n),a={writes:i.map(o=>qf(s.serializer,o))};await s.Mo("Commit",s.serializer.databaseId,Qt.emptyPath(),a)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw xt();t=Pt.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Xe(Le.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Pt.min())?zr.exists(!1):zr.updateTime(t):zr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Pt.min()))throw new Xe(Le.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return zr.updateTime(t)}return zr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e,t,n,i,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=s,this._u=n.maxAttempts,this.t_=new A2(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(async()=>{const e=new GL(this.datastore),t=this.cu(e);t&&t.then(n=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(n)}).catch(i=>{this.lu(i)}))}).catch(n=>{this.lu(n)})})}cu(e){try{const t=this.updateFunction(e);return!hd(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!YE(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e,t,n,i,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Fn.UNAUTHENTICATED,this.clientId=lE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async a=>{Je("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Je("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ti;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=xh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function tg(r,e){r.asyncQueue.verifyOperationInProgress(),Je("FirestoreClient","Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let n=t.initialUser;r.setCredentialChangeListener(async i=>{n.isEqual(i)||(await AT(e.localStore,i),n=i)}),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}async function tw(r,e){r.asyncQueue.verifyOperationInProgress();const t=await V2(r);Je("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener(n=>Gy(e.remoteStore,n)),r.setAppCheckTokenChangeListener((n,i)=>Gy(e.remoteStore,i)),r._onlineComponents=e}async function V2(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Je("FirestoreClient","Using user provided OfflineComponentProvider");try{await tg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(i){return i.name==="FirebaseError"?i.code===Le.FAILED_PRECONDITION||i.code===Le.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Ea("Error using user provided cache. Falling back to memory cache: "+t),await tg(r,new zf)}}else Je("FirestoreClient","Using default OfflineComponentProvider"),await tg(r,new zf);return r._offlineComponents}async function Kp(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Je("FirestoreClient","Using user provided OnlineComponentProvider"),await tw(r,r._uninitializedComponentsProvider._online)):(Je("FirestoreClient","Using default OnlineComponentProvider"),await tw(r,new Wf))),r._onlineComponents}function KT(r){return V2(r).then(e=>e.persistence)}function U2(r){return V2(r).then(e=>e.localStore)}function YT(r){return Kp(r).then(e=>e.remoteStore)}function j2(r){return Kp(r).then(e=>e.syncEngine)}function XL(r){return Kp(r).then(e=>e.datastore)}async function sh(r){const e=await Kp(r),t=e.eventManager;return t.onListen=AL.bind(null,e.syncEngine),t.onUnlisten=SL.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IL.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=PL.bind(null,e.syncEngine),t}function JL(r){return r.asyncQueue.enqueue(async()=>{const e=await KT(r),t=await YT(r);return e.setNetworkEnabled(!0),function(i){const s=gt(i);return s.L_.delete(0),yd(s)}(t)})}function QL(r){return r.asyncQueue.enqueue(async()=>{const e=await KT(r),t=await YT(r);return e.setNetworkEnabled(!1),async function(i){const s=gt(i);s.L_.add(0),await _h(s),s.q_.set("Offline")}(t)})}function ZL(r,e){const t=new ti;return r.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await function(u,l){const d=gt(u);return d.persistence.runTransaction("read document","readonly",g=>d.localDocuments.getDocument(g,l))}(i,s);o.isFoundDocument()?a.resolve(o):o.isNoDocument()?a.resolve(null):a.reject(new Xe(Le.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const c=xh(o,`Failed to get document '${s} from cache`);a.reject(c)}}(await U2(r),e,t)),t.promise}function XT(r,e,t={}){const n=new ti;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new Gp({next:g=>{l.Za(),a.enqueueAndForget(()=>k2(s,d));const p=g.docs.has(o);!p&&g.fromCache?u.reject(new Xe(Le.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&g.fromCache&&c&&c.source==="server"?u.reject(new Xe(Le.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new L2(mh(o.path),l,{includeMetadataChanges:!0,_a:!0});return C2(s,d)}(await sh(r),r.asyncQueue,e,t,n)),n.promise}function eD(r,e){const t=new ti;return r.asyncQueue.enqueueAndForget(async()=>async function(i,s,a){try{const o=await J0(i,s,!0),c=new qT(s,o.Ts),u=c.ma(o.documents),l=c.applyChanges(u,!1);a.resolve(l.snapshot)}catch(o){const c=xh(o,`Failed to execute query '${s} against cache`);a.reject(c)}}(await U2(r),e,t)),t.promise}function JT(r,e,t={}){const n=new ti;return r.asyncQueue.enqueueAndForget(async()=>function(s,a,o,c,u){const l=new Gp({next:g=>{l.Za(),a.enqueueAndForget(()=>k2(s,d)),g.fromCache&&c.source==="server"?u.reject(new Xe(Le.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),d=new L2(o,l,{includeMetadataChanges:!0,_a:!0});return C2(s,d)}(await sh(r),r.asyncQueue,e,t,n)),n.promise}function tD(r,e){const t=new Gp(e);return r.asyncQueue.enqueueAndForget(async()=>function(i,s){gt(i).Y_.add(s),s.next()}(await sh(r),t)),()=>{t.Za(),r.asyncQueue.enqueueAndForget(async()=>function(i,s){gt(i).Y_.delete(s)}(await sh(r),t))}}function rD(r,e,t,n){const i=function(a,o){let c;return c=typeof a=="string"?JE().encode(a):a,function(l,d){return new $L(l,d)}(function(l,d){if(l instanceof Uint8Array)return ew(l,d);if(l instanceof ArrayBuffer)return ew(new Uint8Array(l),d);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(c),o)}(t,_d(e));r.asyncQueue.enqueueAndForget(async()=>{WL(await j2(r),i,n)})}function nD(r,e){return r.asyncQueue.enqueue(async()=>function(n,i){const s=gt(n);return s.persistence.runTransaction("Get named query","readonly",a=>s.Gr.getNamedQuery(a,i))}(await U2(r),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rw=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q2(r,e,t){if(!t)throw new Xe(Le.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function ZT(r,e,t,n){if(e===!0&&n===!0)throw new Xe(Le.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function nw(r){if(!ft.isDocumentKey(r))throw new Xe(Le.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function iw(r){if(ft.isDocumentKey(r))throw new Xe(Le.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function Yp(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":xt()}function or(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Xe(Le.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Yp(r);throw new Xe(Le.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function eb(r,e){if(e<=0)throw new Xe(Le.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){var t,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Xe(Le.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Xe(Le.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZT("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=QT((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Xe(Le.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,i){return n.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wd{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sw({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Xe(Le.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Xe(Le.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sw(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Jk;switch(n.type){case"firstParty":return new tR(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Xe(Le.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const n=rw.get(t);n&&(Je("ComponentProvider","Removing Datastore"),rw.delete(t),n.terminate())}(this),Promise.resolve()}}function iD(r,e,t,n={}){var i;const s=(r=or(r,wd))._getSettings(),a=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==a&&Ea("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),n.mockUserToken){let o,c;if(typeof n.mockUserToken=="string")o=n.mockUserToken,c=Fn.MOCK_USER;else{o=p4(n.mockUserToken,(i=r._app)===null||i===void 0?void 0:i.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Xe(Le.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new Fn(u)}r._authCredentials=new Qk(new uE(o,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri=class tb{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tb(this.firestore,e,this._query)}},$r=class rb{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ec(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rb(this.firestore,e,this._key)}},ec=class nb extends Ri{constructor(e,t,n){super(e,t,mh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $r(this.firestore,null,new ft(e))}withConverter(e){return new nb(this.firestore,e,this._path)}};function ib(r,e,...t){if(r=St(r),q2("collection","path",e),r instanceof wd){const n=Qt.fromString(e,...t);return iw(n),new ec(r,null,n)}{if(!(r instanceof $r||r instanceof ec))throw new Xe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Qt.fromString(e,...t));return iw(n),new ec(r.firestore,null,n)}}function sD(r,e){if(r=or(r,wd),q2("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ri(r,null,function(n){return new co(Qt.emptyPath(),n)}(e))}function tp(r,e,...t){if(r=St(r),arguments.length===1&&(e=lE.newId()),q2("doc","path",e),r instanceof wd){const n=Qt.fromString(e,...t);return nw(n),new $r(r,null,new ft(n))}{if(!(r instanceof $r||r instanceof ec))throw new Xe(Le.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=r._path.child(Qt.fromString(e,...t));return nw(n),new $r(r.firestore,r instanceof ec?r.converter:null,new ft(n))}}function sb(r,e){return r=St(r),e=St(e),(r instanceof $r||r instanceof ec)&&(e instanceof $r||e instanceof ec)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function ab(r,e){return r=St(r),e=St(e),r instanceof Ri&&e instanceof Ri&&r.firestore===e.firestore&&dd(r._query,e._query)&&r.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new A2(this,"async_queue_retry"),this.Vu=()=>{const n=k0();n&&Je("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const t=k0();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const t=k0();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const t=new ti;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!yc(e))throw e;Je("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const t=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const i=function(a){let o=a.message||"";return a.stack&&(o=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),o}(n);throw fn("INTERNAL UNHANDLED ERROR: ",i),n}).then(n=>(this.du=!1,n))));return this.mu=t,t}enqueueAfterDelay(e,t,n){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);const i=N2.createAndSchedule(this,e,t,n,s=>this.yu(s));return this.Tu.push(i),i}fu(){this.Eu&&xt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,n)=>t.targetTimeMs-n.targetTimeMs);for(const t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const t=this.Tu.indexOf(e);this.Tu.splice(t,1)}}function s1(r){return function(t,n){if(typeof t!="object"||t===null)return!1;const i=t;for(const s of n)if(s in i&&typeof i[s]=="function")return!0;return!1}(r,["next","error","complete"])}class aD{constructor(){this._progressObserver={},this._taskCompletionResolver=new ti,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=-1;let mn=class extends wd{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new aw,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new aw(e),this._firestoreClient=void 0,await e}}};function mi(r){if(r._terminated)throw new Xe(Le.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||ob(r),r._firestoreClient}function ob(r){var e,t,n;const i=r._freezeSettings(),s=function(o,c,u,l){return new kR(o,c,u,l.host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,QT(l.experimentalLongPollingOptions),l.useFetchStreams)}(r._databaseId,((e=r._app)===null||e===void 0?void 0:e.options.appId)||"",r._persistenceKey,i);r._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((n=i.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(r._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),r._firestoreClient=new YL(r._authCredentials,r._appCheckCredentials,r._queue,s,r._componentsProvider&&function(o){const c=o==null?void 0:o._online.build();return{_offline:o==null?void 0:o._offline.build(c),_online:c}}(r._componentsProvider))}function cD(r,e){Ea("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings();return cb(r,Wf.provider,{build:n=>new GT(n,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function uD(r){Ea("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=r._freezeSettings();cb(r,Wf.provider,{build:t=>new HL(t,e.cacheSizeBytes)})}function cb(r,e,t){if((r=or(r,mn))._firestoreClient||r._terminated)throw new Xe(Le.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(r._componentsProvider||r._getSettings().localCache)throw new Xe(Le.FAILED_PRECONDITION,"SDK cache is already specified.");r._componentsProvider={_online:e,_offline:t},ob(r)}function lD(r){if(r._initialized&&!r._terminated)throw new Xe(Le.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ti;return r._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!va.D())return Promise.resolve();const i=n+"main";await va.delete(i)}(E2(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}}),e.promise}function hD(r){return function(t){const n=new ti;return t.asyncQueue.enqueueAndForget(async()=>LL(await j2(t),n)),n.promise}(mi(r=or(r,mn)))}function fD(r){return JL(mi(r=or(r,mn)))}function dD(r){return QL(mi(r=or(r,mn)))}function pD(r,e){const t=mi(r=or(r,mn)),n=new aD;return rD(t,r._databaseId,e,n),n}function mD(r,e){return nD(mi(r=or(r,mn)),e).then(t=>t?new Ri(r,null,t.query):null)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ba(nn.fromBase64String(e))}catch(t){throw new Xe(Le.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ba(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uc=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new Xe(Le.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Xe(Le.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Xe(Le.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,i){if(n.length!==i.length)return!1;for(let s=0;s<n.length;++s)if(n[s]!==i[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=/^__.*__$/;class vD{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return this.fieldMask!==null?new uo(e,this.data,this.fieldMask,t,this.fieldTransforms):new gh(e,this.data,t,this.fieldTransforms)}}class ub{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new uo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function lb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xt()}}class Jp{constructor(e,t,n,i,s,a){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.Ou(e),i}Nu(e){var t;const n=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:n,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return rp(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lb(this.Cu)&&gD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _D{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||_d(e)}Qu(e,t,n,i=!1){return new Jp({Cu:e,methodName:t,qu:n,path:qr.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Cu(r){const e=r._freezeSettings(),t=_d(r._databaseId);return new _D(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Qp(r,e,t,n,i,s={}){const a=r.Qu(s.merge||s.mergeFields?2:0,e,t,i);X2("Data must be an object, but it was:",a,n);const o=db(n,a);let c,u;if(s.merge)c=new Hi(a.fieldMask),u=a.fieldTransforms;else if(s.mergeFields){const l=[];for(const d of s.mergeFields){const g=a1(e,d,t);if(!a.contains(g))throw new Xe(Le.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);mb(l,g)||l.push(g)}c=new Hi(l),u=a.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=a.fieldTransforms;return new vD(new Jn(o),c,u)}class xd extends Nu{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xd}}function hb(r,e,t){return new Jp({Cu:3,qu:e.settings.qu,methodName:r._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class W2 extends Nu{_toFieldTransform(e){return new md(e.path,new Jl)}isEqual(e){return e instanceof W2}}class H2 extends Nu{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=hb(this,e,!0),n=this.Ku.map(s=>ku(s,t)),i=new pu(n);return new md(e.path,i)}isEqual(e){return e instanceof H2&&If(this.Ku,e.Ku)}}class $2 extends Nu{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){const t=hb(this,e,!0),n=this.Ku.map(s=>ku(s,t)),i=new mu(n);return new md(e.path,i)}isEqual(e){return e instanceof $2&&If(this.Ku,e.Ku)}}class G2 extends Nu{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){const t=new Ql(e.serializer,qE(e.serializer,this.$u));return new md(e.path,t)}isEqual(e){return e instanceof G2&&this.$u===e.$u}}function K2(r,e,t,n){const i=r.Qu(1,e,t);X2("Data must be an object, but it was:",i,n);const s=[],a=Jn.empty();Pu(n,(c,u)=>{const l=J2(e,c,t);u=St(u);const d=i.Nu(l);if(u instanceof xd)s.push(l);else{const g=ku(u,d);g!=null&&(s.push(l),a.set(l,g))}});const o=new Hi(s);return new ub(a,o,i.fieldTransforms)}function Y2(r,e,t,n,i,s){const a=r.Qu(1,e,t),o=[a1(e,n,t)],c=[i];if(s.length%2!=0)throw new Xe(Le.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)o.push(a1(e,s[g])),c.push(s[g+1]);const u=[],l=Jn.empty();for(let g=o.length-1;g>=0;--g)if(!mb(u,o[g])){const p=o[g];let x=c[g];x=St(x);const _=a.Nu(p);if(x instanceof xd)u.push(p);else{const E=ku(x,_);E!=null&&(u.push(p),l.set(p,E))}}const d=new Hi(u);return new ub(l,d,a.fieldTransforms)}function fb(r,e,t,n=!1){return ku(t,r.Qu(n?4:3,e))}function ku(r,e){if(pb(r=St(r)))return X2("Unsupported field value:",e,r),db(r,e);if(r instanceof Nu)return function(n,i){if(!lb(i.Cu))throw i.Bu(`${n._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,i){const s=[];let a=0;for(const o of n){let c=ku(o,i.Lu(a));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),a++}return{arrayValue:{values:s}}}(r,e)}return function(n,i){if((n=St(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return qE(i.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Wr.fromDate(n);return{timestampValue:Zl(i.serializer,s)}}if(n instanceof Wr){const s=new Wr(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Zl(i.serializer,s)}}if(n instanceof Xp)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof ba)return{bytesValue:eT(i.serializer,n._byteString)};if(n instanceof $r){const s=i.databaseId,a=n.firestore._databaseId;if(!a.isEqual(s))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:g2(n.firestore._databaseId||i.databaseId,n._key.path)}}if(n instanceof z2)return function(a,o){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw o.Bu("VectorValues must only contain numeric values.");return l2(o.serializer,c)})}}}}}}(n,i);throw i.Bu(`Unsupported field value: ${Yp(n)}`)}(r,e)}function db(r,e){const t={};return EE(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pu(r,(n,i)=>{const s=ku(i,e.Mu(n));s!=null&&(t[n]=s)}),{mapValue:{fields:t}}}function pb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Wr||r instanceof Xp||r instanceof ba||r instanceof $r||r instanceof Nu||r instanceof z2)}function X2(r,e,t){if(!pb(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){const n=Yp(t);throw n==="an object"?e.Bu(r+" a custom object"):e.Bu(r+" "+n)}}function a1(r,e,t){if((e=St(e))instanceof uc)return e._internalPath;if(typeof e=="string")return J2(r,e);throw rp("Field path arguments must be of type string or ",r,!1,void 0,t)}const yD=new RegExp("[~\\*/\\[\\]]");function J2(r,e,t){if(e.search(yD)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new uc(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function rp(r,e,t,n,i){const s=n&&!n.isEmpty(),a=i!==void 0;let o=`Function ${e}() called with invalid data`;t&&(o+=" (via `toFirestore()`)"),o+=". ";let c="";return(s||a)&&(c+=" (found",s&&(c+=` in field ${n}`),a&&(c+=` in document ${i}`),c+=")"),new Xe(Le.INVALID_ARGUMENT,o+r+c)}function mb(r,e){return r.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,n,i,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $r(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new wD(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Zp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class wD extends Hf{data(){return super.data()}}function Zp(r,e){return typeof e=="string"?J2(r,e):e instanceof uc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new Xe(Le.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Q2{}class Ed extends Q2{}function zo(r,e,...t){let n=[];e instanceof Q2&&n.push(e),n=n.concat(t),function(s){const a=s.filter(c=>c instanceof Z2).length,o=s.filter(c=>c instanceof em).length;if(a>1||a>0&&o>0)throw new Xe(Le.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const i of n)r=i._apply(r);return r}class em extends Ed{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new em(e,t,n)}_apply(e){const t=this._parse(e);return _b(e._query,t),new Ri(e.firestore,e.converter,Gg(e._query,t))}_parse(e){const t=Cu(e.firestore);return function(s,a,o,c,u,l,d){let g;if(u.isKeyField()){if(l==="array-contains"||l==="array-contains-any")throw new Xe(Le.INVALID_ARGUMENT,`Invalid Query. You can't perform '${l}' queries on documentId().`);if(l==="in"||l==="not-in"){cw(d,l);const p=[];for(const x of d)p.push(ow(c,s,x));g={arrayValue:{values:p}}}else g=ow(c,s,d)}else l!=="in"&&l!=="not-in"&&l!=="array-contains-any"||cw(d,l),g=fb(o,a,d,l==="in"||l==="not-in");return Zt.create(u,l,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function xD(r,e,t){const n=e,i=Zp("where",r);return em._create(i,n,t)}class Z2 extends Q2{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Z2(e,t)}_parse(e){const t=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return t.length===1?t[0]:_r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(i,s){let a=i;const o=s.getFlattenedFilters();for(const c of o)_b(a,c),a=Gg(a,c)}(e._query,t),new Ri(e.firestore,e.converter,Gg(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class ev extends Ed{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new ev(e,t)}_apply(e){const t=function(i,s,a){if(i.startAt!==null)throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Uf(s,a)}(e._query,this._field,this._direction);return new Ri(e.firestore,e.converter,function(i,s){const a=i.explicitOrderBy.concat([s]);return new co(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}function ED(r,e="asc"){const t=e,n=Zp("orderBy",r);return ev._create(n,t)}class tm extends Ed{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new tm(e,t,n)}_apply(e){return new Ri(e.firestore,e.converter,G0(e._query,this._limit,this._limitType))}}function TD(r){return eb("limit",r),tm._create("limit",r,"F")}function bD(r){return eb("limitToLast",r),tm._create("limitToLast",r,"L")}class rm extends Ed{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new rm(e,t,n)}_apply(e){const t=vb(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(i,s){return new co(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,t))}}function AD(...r){return rm._create("startAt",r,!0)}function ID(...r){return rm._create("startAfter",r,!1)}class nm extends Ed{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new nm(e,t,n)}_apply(e){const t=vb(e,this.type,this._docOrFields,this._inclusive);return new Ri(e.firestore,e.converter,function(i,s){return new co(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)}(e._query,t))}}function SD(...r){return nm._create("endBefore",r,!1)}function PD(...r){return nm._create("endAt",r,!0)}function vb(r,e,t,n){if(t[0]=St(t[0]),t[0]instanceof Hf)return function(s,a,o,c,u){if(!c)throw new Xe(Le.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const l=[];for(const d of Ll(s))if(d.field.isKeyField())l.push(fu(a,c.key));else{const g=c.data.field(d.field);if(Bp(g))throw new Xe(Le.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(g===null){const p=d.field.canonicalString();throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}l.push(g)}return new oc(l,u)}(r._query,r.firestore._databaseId,e,t[0]._document,n);{const i=Cu(r.firestore);return function(a,o,c,u,l,d){const g=a.explicitOrderBy;if(l.length>g.length)throw new Xe(Le.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let x=0;x<l.length;x++){const _=l[x];if(g[x].field.isKeyField()){if(typeof _!="string")throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof _}`);if(!c2(a)&&_.indexOf("/")!==-1)throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${_}' contains a slash.`);const E=a.path.child(Qt.fromString(_));if(!ft.isDocumentKey(E))throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${E}' is not because it contains an odd number of segments.`);const P=new ft(E);p.push(fu(o,P))}else{const E=fb(c,u,_);p.push(E)}}return new oc(p,d)}(r._query,r.firestore._databaseId,i,e,t,n)}}function ow(r,e,t){if(typeof(t=St(t))=="string"){if(t==="")throw new Xe(Le.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!c2(e)&&t.indexOf("/")!==-1)throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const n=e.path.child(Qt.fromString(t));if(!ft.isDocumentKey(n))throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return fu(r,new ft(n))}if(t instanceof $r)return fu(r,t._key);throw new Xe(Le.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Yp(t)}.`)}function cw(r,e){if(!Array.isArray(r)||r.length===0)throw new Xe(Le.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function _b(r,e){const t=function(i,s){for(const a of i)for(const o of a.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(r.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new Xe(Le.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Xe(Le.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class tv{convertValue(e,t="none"){switch(hu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return jr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Pu(e,(i,s)=>{n[i]=this.convertValue(s,t)}),n}convertVectorValue(e){var t,n,i;const s=(i=(n=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||n===void 0?void 0:n.values)===null||i===void 0?void 0:i.map(a=>jr(a.doubleValue));return new z2(s)}convertGeoPoint(e){return new Xp(jr(e.latitude),jr(e.longitude))}convertArray(e,t){return(e.values||[]).map(n=>this.convertValue(n,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=a2(e);return n==null?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mf(e));default:return null}}convertTimestamp(e){const t=ro(e);return new Wr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qt.fromString(e);bt(hT(n));const i=new sc(n.get(1),n.get(3)),s=new ft(n.popFirst(5));return i.isEqual(t)||fn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function im(r,e,t){let n;return n=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,n}class ND extends tv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let no=class extends Hf{constructor(e,t,n,i,s,a){super(e,t,n,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _f(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Zp("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},_f=class extends no{data(e={}){return super.data(e)}},lc=class{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Zc(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new _f(this._firestore,this._userDataWriter,n.key,n,new Zc(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Xe(Le.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(o=>{const c=new _f(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Zc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);return o.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const c=new _f(i._firestore,i._userDataWriter,o.doc.key,o.doc,new Zc(i._snapshot.mutatedKeys.has(o.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,l=-1;return o.type!==0&&(u=a.indexOf(o.doc.key),a=a.delete(o.doc.key)),o.type!==1&&(a=a.add(o.doc),l=a.indexOf(o.doc.key)),{type:CD(o.type),doc:c,oldIndex:u,newIndex:l}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function CD(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xt()}}function yb(r,e){return r instanceof no&&e instanceof no?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(r._document===null?e._document===null:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof lc&&e instanceof lc&&r._firestore===e._firestore&&ab(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(r){r=or(r,$r);const e=or(r.firestore,mn);return XT(mi(e),r._key).then(t=>rv(e,r,t))}class Ru extends tv{constructor(e){super(),this.firestore=e}convertBytes(e){return new ba(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $r(this.firestore,null,t)}}function RD(r){r=or(r,$r);const e=or(r.firestore,mn),t=mi(e),n=new Ru(e);return ZL(t,r._key).then(i=>new no(e,n,r._key,i,new Zc(i!==null&&i.hasLocalMutations,!0),r.converter))}function LD(r){r=or(r,$r);const e=or(r.firestore,mn);return XT(mi(e),r._key,{source:"server"}).then(t=>rv(e,r,t))}function DD(r){r=or(r,Ri);const e=or(r.firestore,mn),t=mi(e),n=new Ru(e);return gb(r._query),JT(t,r._query).then(i=>new lc(e,n,r,i))}function FD(r){r=or(r,Ri);const e=or(r.firestore,mn),t=mi(e),n=new Ru(e);return eD(t,r._query).then(i=>new lc(e,n,r,i))}function OD(r){r=or(r,Ri);const e=or(r.firestore,mn),t=mi(e),n=new Ru(e);return JT(t,r._query,{source:"server"}).then(i=>new lc(e,n,r,i))}function uw(r,e,t){r=or(r,$r);const n=or(r.firestore,mn),i=im(r.converter,e,t);return Td(n,[Qp(Cu(n),"setDoc",r._key,i,r.converter!==null,t).toMutation(r._key,zr.none())])}function lw(r,e,t,...n){r=or(r,$r);const i=or(r.firestore,mn),s=Cu(i);let a;return a=typeof(e=St(e))=="string"||e instanceof uc?Y2(s,"updateDoc",r._key,e,t,n):K2(s,"updateDoc",r._key,e),Td(i,[a.toMutation(r._key,zr.exists(!0))])}function MD(r){return Td(or(r.firestore,mn),[new vh(r._key,zr.none())])}function BD(r,e){const t=or(r.firestore,mn),n=tp(r),i=im(r.converter,e);return Td(t,[Qp(Cu(r.firestore),"addDoc",n._key,i,r.converter!==null,{}).toMutation(n._key,zr.exists(!1))]).then(()=>n)}function wb(r,...e){var t,n,i;r=St(r);let s={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||s1(e[a])||(s=e[a],a++);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(s1(e[a])){const d=e[a];e[a]=(t=d.next)===null||t===void 0?void 0:t.bind(d),e[a+1]=(n=d.error)===null||n===void 0?void 0:n.bind(d),e[a+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let c,u,l;if(r instanceof $r)u=or(r.firestore,mn),l=mh(r._key.path),c={next:d=>{e[a]&&e[a](rv(u,r,d))},error:e[a+1],complete:e[a+2]};else{const d=or(r,Ri);u=or(d.firestore,mn),l=d._query;const g=new Ru(u);c={next:p=>{e[a]&&e[a](new lc(u,g,d,p))},error:e[a+1],complete:e[a+2]},gb(r._query)}return function(g,p,x,_){const E=new Gp(_),P=new L2(p,E,x);return g.asyncQueue.enqueueAndForget(async()=>C2(await sh(g),P)),()=>{E.Za(),g.asyncQueue.enqueueAndForget(async()=>k2(await sh(g),P))}}(mi(u),l,o,c)}function VD(r,e){return tD(mi(r=or(r,mn)),s1(e)?e:{next:e})}function Td(r,e){return function(n,i){const s=new ti;return n.asyncQueue.enqueueAndForget(async()=>NL(await j2(n),i,s)),s.promise}(mi(r),e)}function rv(r,e,t){const n=t.docs.get(e._key),i=new Ru(r);return new no(r,i,e._key,n,new Zc(t.hasPendingWrites,t.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jD=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Cu(e)}set(e,t,n){this._verifyNotCommitted();const i=Ko(e,this._firestore),s=im(i.converter,t,n),a=Qp(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,n);return this._mutations.push(a.toMutation(i._key,zr.none())),this}update(e,t,n,...i){this._verifyNotCommitted();const s=Ko(e,this._firestore);let a;return a=typeof(t=St(t))=="string"||t instanceof uc?Y2(this._dataReader,"WriteBatch.update",s._key,t,n,i):K2(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(a.toMutation(s._key,zr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ko(e,this._firestore);return this._mutations=this._mutations.concat(new vh(t._key,zr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Xe(Le.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function Ko(r,e){if((r=St(r)).firestore!==e)throw new Xe(Le.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qD=class extends class{constructor(t,n){this._firestore=t,this._transaction=n,this._dataReader=Cu(t)}get(t){const n=Ko(t,this._firestore),i=new ND(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return xt();const a=s[0];if(a.isFoundDocument())return new Hf(this._firestore,i,a.key,a,n.converter);if(a.isNoDocument())return new Hf(this._firestore,i,n._key,null,n.converter);throw xt()})}set(t,n,i){const s=Ko(t,this._firestore),a=im(s.converter,n,i),o=Qp(this._dataReader,"Transaction.set",s._key,a,s.converter!==null,i);return this._transaction.set(s._key,o),this}update(t,n,i,...s){const a=Ko(t,this._firestore);let o;return o=typeof(n=St(n))=="string"||n instanceof uc?Y2(this._dataReader,"Transaction.update",a._key,n,i,s):K2(this._dataReader,"Transaction.update",a._key,n),this._transaction.update(a._key,o),this}delete(t){const n=Ko(t,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ko(e,this._firestore),n=new Ru(this._firestore);return super.get(e).then(i=>new no(this._firestore,n,t._key,i._document,new Zc(!1,!1),t.converter))}};function zD(r,e,t){r=or(r,mn);const n=Object.assign(Object.assign({},UD),t);return function(s){if(s.maxAttempts<1)throw new Xe(Le.INVALID_ARGUMENT,"Max attempts must be at least 1")}(n),function(s,a,o){const c=new ti;return s.asyncQueue.enqueueAndForget(async()=>{const u=await XL(s);new KL(s.asyncQueue,u,o,a,c).au()}),c.promise}(mi(r),i=>e(new qD(r,i)),n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WD(){return new xd("deleteField")}function HD(){return new W2("serverTimestamp")}function $D(...r){return new H2("arrayUnion",r)}function GD(...r){return new $2("arrayRemove",r)}function KD(r){return new G2("increment",r)}(function(e,t=!0){(function(i){ph=i})(gc),Ki(new jn("firestore",(n,{instanceIdentifier:i,options:s})=>{const a=n.getProvider("app").getImmediate(),o=new mn(new Zk(n.getProvider("auth-internal")),new nR(n.getProvider("app-check-internal")),function(u,l){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Xe(Le.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sc(u.options.projectId,l)}(a,i),a);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),ei(Z_,"4.7.3",e),ei(Z_,"4.7.3","esm2017")})();const YD="@firebase/firestore-compat",XD="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nv(r,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new Xe("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hw(){if(typeof Uint8Array>"u")throw new Xe("unimplemented","Uint8Arrays are not available in this environment.")}function fw(){if(!NR())throw new Xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}let xb=class o1{constructor(e){this._delegate=e}static fromBase64String(e){return fw(),new o1(ba.fromBase64String(e))}static fromUint8Array(e){return hw(),new o1(ba.fromUint8Array(e))}toBase64(){return fw(),this._delegate.toBase64()}toUint8Array(){return hw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(r){return JD(r,["next","error","complete"])}function JD(r,e){if(typeof r!="object"||r===null)return!1;const t=r;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{enableIndexedDbPersistence(e,t){return cD(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return uD(e._delegate)}clearIndexedDbPersistence(e){return lD(e._delegate)}}class Eb{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof sc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ea("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,n={}){iD(this._delegate,e,t,n)}enableNetwork(){return fD(this._delegate)}disableNetwork(){return dD(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,ZT("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return hD(this._delegate)}onSnapshotsInSync(e){return VD(this._delegate,e)}get app(){if(!this._appCompat)throw new Xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ah(this,ib(this._delegate,e))}catch(t){throw bi(t,"collection()","Firestore.collection()")}}doc(e){try{return new Is(this,tp(this._delegate,e))}catch(t){throw bi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ti(this,sD(this._delegate,e))}catch(t){throw bi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return zD(this._delegate,t=>e(new Tb(this,t)))}batch(){return mi(this._delegate),new bb(new jD(this._delegate,e=>Td(this._delegate,e)))}loadBundle(e){return pD(this._delegate,e)}namedQuery(e){return mD(this._delegate,e).then(t=>t?new Ti(this,t):null)}}class sm extends tv{constructor(e){super(),this.firestore=e}convertBytes(e){return new xb(new ba(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Is.forKey(t,this.firestore,null)}}function ZD(r){Yk(r)}class Tb{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new sm(e)}get(e){const t=eu(e);return this._delegate.get(t).then(n=>new $f(this._firestore,new no(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,t.converter)))}set(e,t,n){const i=eu(e);return n?(nv("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=eu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=eu(e);return this._delegate.delete(t),this}}class bb{constructor(e){this._delegate=e}set(e,t,n){const i=eu(e);return n?(nv("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n,...i){const s=eu(e);return arguments.length===2?this._delegate.update(s,t):this._delegate.update(s,t,n,...i),this}delete(e){const t=eu(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class yu{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new _f(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Gf(this._firestore,n),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=yu.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let s=i.get(t);return s||(s=new yu(e,new sm(e),t),i.set(t,s)),s}}yu.INSTANCES=new WeakMap;class Is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sm(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Is(t,new $r(t._delegate,n,new ft(e)))}static forKey(e,t,n){return new Is(t,new $r(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new ah(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ah(this.firestore,ib(this._delegate,e))}catch(t){throw bi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=St(e),e instanceof $r?sb(this._delegate,e):!1}set(e,t){t=nv("DocumentReference.set",t);try{return t?uw(this._delegate,e,t):uw(this._delegate,e)}catch(n){throw bi(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return arguments.length===1?lw(this._delegate,e):lw(this._delegate,e,t,...n)}catch(i){throw bi(i,"updateDoc()","DocumentReference.update()")}}delete(){return MD(this._delegate)}onSnapshot(...e){const t=Ab(e),n=Ib(e,i=>new $f(this.firestore,new no(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return wb(this._delegate,t,n)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=RD(this._delegate):(e==null?void 0:e.source)==="server"?t=LD(this._delegate):t=kD(this._delegate),t.then(n=>new $f(this.firestore,new no(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(e){return new Is(this.firestore,e?this._delegate.withConverter(yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function bi(r,e,t){return r.message=r.message.replace(e,t),r}function Ab(r){for(const e of r)if(typeof e=="object"&&!c1(e))return e;return{}}function Ib(r,e){var t,n;let i;return c1(r[0])?i=r[0]:c1(r[1])?i=r[1]:typeof r[0]=="function"?i={next:r[0],error:r[1],complete:r[2]}:i={next:r[1],error:r[2],complete:r[3]},{next:s=>{i.next&&i.next(e(s))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(n=i.complete)===null||n===void 0?void 0:n.bind(i)}}class $f{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Is(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return yb(this._delegate,e._delegate)}}class Gf extends $f{data(e){const t=this._delegate.data(e);return this._delegate._converter||Xk(t!==void 0),t}}class Ti{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new sm(e)}where(e,t,n){try{return new Ti(this.firestore,zo(this._delegate,xD(e,t,n)))}catch(i){throw bi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ti(this.firestore,zo(this._delegate,ED(e,t)))}catch(n){throw bi(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ti(this.firestore,zo(this._delegate,TD(e)))}catch(t){throw bi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ti(this.firestore,zo(this._delegate,bD(e)))}catch(t){throw bi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ti(this.firestore,zo(this._delegate,AD(...e)))}catch(t){throw bi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ti(this.firestore,zo(this._delegate,ID(...e)))}catch(t){throw bi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ti(this.firestore,zo(this._delegate,SD(...e)))}catch(t){throw bi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ti(this.firestore,zo(this._delegate,PD(...e)))}catch(t){throw bi(t,"endAt()","Query.endAt()")}}isEqual(e){return ab(this._delegate,e._delegate)}get(e){let t;return(e==null?void 0:e.source)==="cache"?t=FD(this._delegate):(e==null?void 0:e.source)==="server"?t=OD(this._delegate):t=DD(this._delegate),t.then(n=>new u1(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...e){const t=Ab(e),n=Ib(e,i=>new u1(this.firestore,new lc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return wb(this._delegate,t,n)}withConverter(e){return new Ti(this.firestore,e?this._delegate.withConverter(yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class eF{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Gf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class u1{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ti(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Gf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new eF(this._firestore,t))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new Gf(this._firestore,n))})}isEqual(e){return yb(this._delegate,e._delegate)}}class ah extends Ti{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Is(this.firestore,e):null}doc(e){try{return e===void 0?new Is(this.firestore,tp(this._delegate)):new Is(this.firestore,tp(this._delegate,e))}catch(t){throw bi(t,"doc()","CollectionReference.doc()")}}add(e){return BD(this._delegate,e).then(t=>new Is(this.firestore,t))}isEqual(e){return sb(this._delegate,e._delegate)}withConverter(e){return new ah(this.firestore,e?this._delegate.withConverter(yu.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function eu(r){return or(r,$r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(...e){this._delegate=new uc(...e)}static documentId(){return new iv(qr.keyField().canonicalString())}isEqual(e){return e=St(e),e instanceof uc?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e){this._delegate=e}static serverTimestamp(){const e=HD();return e._methodName="FieldValue.serverTimestamp",new Yc(e)}static delete(){const e=WD();return e._methodName="FieldValue.delete",new Yc(e)}static arrayUnion(...e){const t=$D(...e);return t._methodName="FieldValue.arrayUnion",new Yc(t)}static arrayRemove(...e){const t=GD(...e);return t._methodName="FieldValue.arrayRemove",new Yc(t)}static increment(e){const t=KD(e);return t._methodName="FieldValue.increment",new Yc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF={Firestore:Eb,GeoPoint:Xp,Timestamp:Wr,Blob:xb,Transaction:Tb,WriteBatch:bb,DocumentReference:Is,DocumentSnapshot:$f,Query:Ti,QueryDocumentSnapshot:Gf,QuerySnapshot:u1,CollectionReference:ah,FieldPath:iv,FieldValue:Yc,setLogLevel:ZD,CACHE_SIZE_UNLIMITED:oD};function rF(r,e){r.INTERNAL.registerComponent(new jn("firestore-compat",t=>{const n=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(n,i)},"PUBLIC").setServiceProps(Object.assign({},tF)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nF(r){rF(r,(e,t)=>new Eb(e,t,new QD)),r.registerVersion(YD,XD)}nF(pn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="type.googleapis.com/google.protobuf.Int64Value",sF="type.googleapis.com/google.protobuf.UInt64Value";function Sb(r,e){const t={};for(const n in r)r.hasOwnProperty(n)&&(t[n]=e(r[n]));return t}function l1(r){if(r==null)return null;if(r instanceof Number&&(r=r.valueOf()),typeof r=="number"&&isFinite(r)||r===!0||r===!1||Object.prototype.toString.call(r)==="[object String]")return r;if(r instanceof Date)return r.toISOString();if(Array.isArray(r))return r.map(e=>l1(e));if(typeof r=="function"||typeof r=="object")return Sb(r,e=>l1(e));throw new Error("Data cannot be encoded in JSON: "+r)}function np(r){if(r==null)return r;if(r["@type"])switch(r["@type"]){case iF:case sF:{const e=Number(r.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+r);return e}default:throw new Error("Data cannot be decoded from JSON: "+r)}return Array.isArray(r)?r.map(e=>np(e)):typeof r=="function"||typeof r=="object"?Sb(r,e=>np(e)):r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dw={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fl extends Pn{constructor(e,t,n){super(`${Pb}/${e}`,t||""),this.details=n}}function aF(r){if(r>=200&&r<300)return"ok";switch(r){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function oF(r,e){let t=aF(r),n=t,i;try{const s=e&&e.error;if(s){const a=s.status;if(typeof a=="string"){if(!dw[a])return new Fl("internal","internal");t=dw[a],n=a}const o=s.message;typeof o=="string"&&(n=o),i=s.details,i!==void 0&&(i=np(i))}}catch{}return t==="ok"?null:new Fl(t,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(i=>this.auth=i,()=>{}),this.messaging||t.get().then(i=>this.messaging=i,()=>{}),this.appCheck||n.get().then(i=>this.appCheck=i,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),n=await this.getMessagingToken(),i=await this.getAppCheckToken(e);return{authToken:t,messagingToken:n,appCheckToken:i}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pw="us-central1";function uF(r){let e=null;return{promise:new Promise((t,n)=>{e=setTimeout(()=>{n(new Fl("deadline-exceeded","deadline-exceeded"))},r)}),cancel:()=>{e&&clearTimeout(e)}}}let lF=class{constructor(e,t,n,i,s=pw,a){this.app=e,this.fetchImpl=a,this.emulatorOrigin=null,this.contextProvider=new cF(t,n,i),this.cancelAllRequests=new Promise(o=>{this.deleteService=()=>Promise.resolve(o())});try{const o=new URL(s);this.customDomain=o.origin+(o.pathname==="/"?"":o.pathname),this.region=pw}catch{this.customDomain=null,this.region=s}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}};function hF(r,e,t){r.emulatorOrigin=`http://${e}:${t}`}function fF(r,e,t){return n=>mF(r,e,n,t||{})}function dF(r,e,t){return n=>Nb(r,e,n,t||{})}async function pF(r,e,t,n){t["Content-Type"]="application/json";let i;try{i=await n(r,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let s=null;try{s=await i.json()}catch{}return{status:i.status,json:s}}function mF(r,e,t,n){const i=r._url(e);return Nb(r,i,t,n)}async function Nb(r,e,t,n){t=l1(t);const i={data:t},s={},a=await r.contextProvider.getContext(n.limitedUseAppCheckTokens);a.authToken&&(s.Authorization="Bearer "+a.authToken),a.messagingToken&&(s["Firebase-Instance-ID-Token"]=a.messagingToken),a.appCheckToken!==null&&(s["X-Firebase-AppCheck"]=a.appCheckToken);const o=n.timeout||7e4,c=uF(o),u=await Promise.race([pF(e,i,s,r.fetchImpl),c.promise,r.cancelAllRequests]);if(c.cancel(),!u)throw new Fl("cancelled","Firebase Functions instance was deleted.");const l=oF(u.status,u.json);if(l)throw l;if(!u.json)throw new Fl("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d>"u"&&(d=u.json.result),typeof d>"u")throw new Fl("internal","Response is missing data field.");return{data:np(d)}}const mw="@firebase/functions",gw="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF="auth-internal",vF="app-check-internal",_F="messaging-internal";function yF(r,e){const t=(n,{instanceIdentifier:i})=>{const s=n.getProvider("app").getImmediate(),a=n.getProvider(gF),o=n.getProvider(_F),c=n.getProvider(vF);return new lF(s,a,o,c,i,r)};Ki(new jn(Pb,t,"PUBLIC").setMultipleInstances(!0)),ei(mw,gw,e),ei(mw,gw,"esm2017")}function vw(r,e,t){hF(St(r),e,t)}function wF(r,e,t){return fF(St(r),e,t)}function xF(r,e,t){return dF(St(r),e,t)}yF(fetch.bind(self));const EF="@firebase/functions-compat",TF="0.3.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e,t){this.app=e,this._delegate=t,this._region=this._delegate.region,this._customDomain=this._delegate.customDomain}httpsCallable(e,t){return wF(this._delegate,e,t)}httpsCallableFromURL(e,t){return xF(this._delegate,e,t)}useFunctionsEmulator(e){const t=e.match("[a-zA-Z]+://([a-zA-Z0-9.-]+)(?::([0-9]+))?");if(t==null)throw new Pn("functions","No origin provided to useFunctionsEmulator()");if(t[2]==null)throw new Pn("functions","Port missing in origin provided to useFunctionsEmulator()");return vw(this._delegate,t[1],Number(t[2]))}useEmulator(e,t){return vw(this._delegate,e,t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bF="us-central1",AF=(r,{instanceIdentifier:e})=>{const t=r.getProvider("app-compat").getImmediate(),n=r.getProvider("functions").getImmediate({identifier:e??bF});return new Cb(t,n)};function IF(){const r={Functions:Cb};pn.INTERNAL.registerComponent(new jn("functions-compat",AF,"PUBLIC").setServiceProps(r).setMultipleInstances(!0))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */IF();pn.registerVersion(EF,TF);const kb="@firebase/installations",sv="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=1e4,Lb=`w:${sv}`,Db="FIS_v2",SF="https://firebaseinstallations.googleapis.com/v1",PF=60*60*1e3,NF="installations",CF="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kF={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},wu=new Ia(NF,CF,kF);function Fb(r){return r instanceof Pn&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob({projectId:r}){return`${SF}/projects/${r}/installations`}function Mb(r){return{token:r.token,requestStatus:2,expiresIn:LF(r.expiresIn),creationTime:Date.now()}}async function Bb(r,e){const n=(await e.json()).error;return wu.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Vb({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function RF(r,{refreshToken:e}){const t=Vb(r);return t.append("Authorization",DF(e)),t}async function Ub(r){const e=await r();return e.status>=500&&e.status<600?r():e}function LF(r){return Number(r.replace("s","000"))}function DF(r){return`${Db} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FF({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const n=Ob(r),i=Vb(r),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={fid:t,authVersion:Db,appId:r.appId,sdkVersion:Lb},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await Ub(()=>fetch(n,o));if(c.ok){const u=await c.json();return{fid:u.fid||t,registrationStatus:2,refreshToken:u.refreshToken,authToken:Mb(u.authToken)}}else throw await Bb("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OF(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MF=/^[cdef][\w-]{21}$/,h1="";function BF(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=VF(r);return MF.test(t)?t:h1}catch{return h1}}function VF(r){return OF(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new Map;function zb(r,e){const t=am(r);Wb(t,e),UF(t,e)}function Wb(r,e){const t=qb.get(r);if(t)for(const n of t)n(e)}function UF(r,e){const t=jF();t&&t.postMessage({key:r,fid:e}),qF()}let tu=null;function jF(){return!tu&&"BroadcastChannel"in self&&(tu=new BroadcastChannel("[Firebase] FID Change"),tu.onmessage=r=>{Wb(r.data.key,r.data.fid)}),tu}function qF(){qb.size===0&&tu&&(tu.close(),tu=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zF="firebase-installations-database",WF=1,xu="firebase-installations-store";let rg=null;function av(){return rg||(rg=lh(zF,WF,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(xu)}}})),rg}async function ip(r,e){const t=am(r),i=(await av()).transaction(xu,"readwrite"),s=i.objectStore(xu),a=await s.get(t);return await s.put(e,t),await i.done,(!a||a.fid!==e.fid)&&zb(r,e.fid),e}async function Hb(r){const e=am(r),n=(await av()).transaction(xu,"readwrite");await n.objectStore(xu).delete(e),await n.done}async function om(r,e){const t=am(r),i=(await av()).transaction(xu,"readwrite"),s=i.objectStore(xu),a=await s.get(t),o=e(a);return o===void 0?await s.delete(t):await s.put(o,t),await i.done,o&&(!a||a.fid!==o.fid)&&zb(r,o.fid),o}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov(r){let e;const t=await om(r.appConfig,n=>{const i=HF(n),s=$F(r,i);return e=s.registrationPromise,s.installationEntry});return t.fid===h1?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function HF(r){const e=r||{fid:BF(),registrationStatus:0};return $b(e)}function $F(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const i=Promise.reject(wu.create("app-offline"));return{installationEntry:e,registrationPromise:i}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=GF(r,t);return{installationEntry:t,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:KF(r)}:{installationEntry:e}}async function GF(r,e){try{const t=await FF(r,e);return ip(r.appConfig,t)}catch(t){throw Fb(t)&&t.customData.serverCode===409?await Hb(r.appConfig):await ip(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function KF(r){let e=await _w(r.appConfig);for(;e.registrationStatus===1;)await jb(100),e=await _w(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:n}=await ov(r);return n||t}return e}function _w(r){return om(r,e=>{if(!e)throw wu.create("installation-not-found");return $b(e)})}function $b(r){return YF(r)?{fid:r.fid,registrationStatus:0}:r}function YF(r){return r.registrationStatus===1&&r.registrationTime+Rb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XF({appConfig:r,heartbeatServiceProvider:e},t){const n=JF(r,t),i=RF(r,t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&i.append("x-firebase-client",u)}const a={installation:{sdkVersion:Lb,appId:r.appId}},o={method:"POST",headers:i,body:JSON.stringify(a)},c=await Ub(()=>fetch(n,o));if(c.ok){const u=await c.json();return Mb(u)}else throw await Bb("Generate Auth Token",c)}function JF(r,{fid:e}){return`${Ob(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv(r,e=!1){let t;const n=await om(r.appConfig,s=>{if(!Gb(s))throw wu.create("not-registered");const a=s.authToken;if(!e&&eO(a))return s;if(a.requestStatus===1)return t=QF(r,e),s;{if(!navigator.onLine)throw wu.create("app-offline");const o=rO(s);return t=ZF(r,o),o}});return t?await t:n.authToken}async function QF(r,e){let t=await yw(r.appConfig);for(;t.authToken.requestStatus===1;)await jb(100),t=await yw(r.appConfig);const n=t.authToken;return n.requestStatus===0?cv(r,e):n}function yw(r){return om(r,e=>{if(!Gb(e))throw wu.create("not-registered");const t=e.authToken;return nO(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function ZF(r,e){try{const t=await XF(r,e),n=Object.assign(Object.assign({},e),{authToken:t});return await ip(r.appConfig,n),t}catch(t){if(Fb(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await Hb(r.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await ip(r.appConfig,n)}throw t}}function Gb(r){return r!==void 0&&r.registrationStatus===2}function eO(r){return r.requestStatus===2&&!tO(r)}function tO(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+PF}function rO(r){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},r),{authToken:e})}function nO(r){return r.requestStatus===1&&r.requestTime+Rb<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iO(r){const e=r,{installationEntry:t,registrationPromise:n}=await ov(e);return n?n.catch(console.error):cv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sO(r,e=!1){const t=r;return await aO(t),(await cv(t,e)).token}async function aO(r){const{registrationPromise:e}=await ov(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oO(r){if(!r||!r.options)throw ng("App Configuration");if(!r.name)throw ng("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw ng(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function ng(r){return wu.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb="installations",cO="installations-internal",uO=r=>{const e=r.getProvider("app").getImmediate(),t=oO(e),n=Ap(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},lO=r=>{const e=r.getProvider("app").getImmediate(),t=Ap(e,Kb).getImmediate();return{getId:()=>iO(t),getToken:i=>sO(t,i)}};function hO(){Ki(new jn(Kb,uO,"PUBLIC")),Ki(new jn(cO,lO,"PRIVATE"))}hO();ei(kb,sv);ei(kb,sv,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO="/firebase-messaging-sw.js",dO="/firebase-cloud-messaging-push-scope",Yb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",pO="https://fcmregistrations.googleapis.com/v1",Xb="google.c.a.c_id",mO="google.c.a.c_l",gO="google.c.a.ts",vO="google.c.a.e";var ww;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(ww||(ww={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Kf;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(Kf||(Kf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function za(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function _O(r){const e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig="fcm_token_details_db",yO=5,xw="fcm_token_object_Store";async function wO(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(ig))return null;let e=null;return(await lh(ig,yO,{upgrade:async(n,i,s,a)=>{var o;if(i<2||!n.objectStoreNames.contains(xw))return;const c=a.objectStore(xw),u=await c.index("fcmSenderId").get(r);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:za(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:za(l.auth),p256dh:za(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:za(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:za(l.auth),p256dh:za(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:za(l.vapidKey)}}}}}})).close(),await Pl(ig),await Pl("fcm_vapid_details_db"),await Pl("undefined"),xO(e)?e:null}function xO(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="firebase-messaging-database",TO=1,Eu="firebase-messaging-store";let sg=null;function uv(){return sg||(sg=lh(EO,TO,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Eu)}}})),sg}async function Jb(r){const e=hv(r),n=await(await uv()).transaction(Eu).objectStore(Eu).get(e);if(n)return n;{const i=await wO(r.appConfig.senderId);if(i)return await lv(r,i),i}}async function lv(r,e){const t=hv(r),i=(await uv()).transaction(Eu,"readwrite");return await i.objectStore(Eu).put(e,t),await i.done,e}async function bO(r){const e=hv(r),n=(await uv()).transaction(Eu,"readwrite");await n.objectStore(Eu).delete(e),await n.done}function hv({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},Ni=new Ia("messaging","Messaging",AO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IO(r,e){const t=await dv(r),n=Zb(e),i={method:"POST",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(fv(r.appConfig),i)).json()}catch(a){throw Ni.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw Ni.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw Ni.create("token-subscribe-no-token");return s.token}async function SO(r,e){const t=await dv(r),n=Zb(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(`${fv(r.appConfig)}/${e.token}`,i)).json()}catch(a){throw Ni.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw Ni.create("token-update-failed",{errorInfo:a})}if(!s.token)throw Ni.create("token-update-no-token");return s.token}async function Qb(r,e){const n={method:"DELETE",headers:await dv(r)};try{const s=await(await fetch(`${fv(r.appConfig)}/${e}`,n)).json();if(s.error){const a=s.error.message;throw Ni.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw Ni.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function fv({projectId:r}){return`${pO}/projects/${r}/registrations`}async function dv({appConfig:r,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function Zb({p256dh:r,auth:e,endpoint:t,vapidKey:n}){const i={web:{endpoint:t,auth:e,p256dh:r}};return n!==Yb&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO=7*24*60*60*1e3;async function NO(r){const e=await RO(r.swRegistration,r.vapidKey),t={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:za(e.getKey("auth")),p256dh:za(e.getKey("p256dh"))},n=await Jb(r.firebaseDependencies);if(n){if(LO(n.subscriptionOptions,t))return Date.now()>=n.createTime+PO?kO(r,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{await Qb(r.firebaseDependencies,n.token)}catch(i){console.warn(i)}return Ew(r.firebaseDependencies,t)}else return Ew(r.firebaseDependencies,t)}async function CO(r){const e=await Jb(r.firebaseDependencies);e&&(await Qb(r.firebaseDependencies,e.token),await bO(r.firebaseDependencies));const t=await r.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function kO(r,e){try{const t=await SO(r.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await lv(r.firebaseDependencies,n),t}catch(t){throw t}}async function Ew(r,e){const n={token:await IO(r,e),createTime:Date.now(),subscriptionOptions:e};return await lv(r,n),n.token}async function RO(r,e){const t=await r.pushManager.getSubscription();return t||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:_O(e)})}function LO(r,e){const t=e.vapidKey===r.vapidKey,n=e.endpoint===r.endpoint,i=e.auth===r.auth,s=e.p256dh===r.p256dh;return t&&n&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tw(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return DO(e,r),FO(e,r),OO(e,r),e}function DO(r,e){if(!e.notification)return;r.notification={};const t=e.notification.title;t&&(r.notification.title=t);const n=e.notification.body;n&&(r.notification.body=n);const i=e.notification.image;i&&(r.notification.image=i);const s=e.notification.icon;s&&(r.notification.icon=s)}function FO(r,e){e.data&&(r.data=e.data)}function OO(r,e){var t,n,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;r.fcmOptions={};const o=(i=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(r.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(r.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(r){return typeof r=="object"&&!!r&&Xb in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(r){if(!r||!r.options)throw ag("App Configuration Object");if(!r.name)throw ag("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=r;for(const n of e)if(!t[n])throw ag(n);return{appName:r.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ag(r){return Ni.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VO=class{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=BO(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eA(r){try{r.swRegistration=await navigator.serviceWorker.register(fO,{scope:dO}),r.swRegistration.update().catch(()=>{})}catch(e){throw Ni.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UO(r,e){if(!e&&!r.swRegistration&&await eA(r),!(!e&&r.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw Ni.create("invalid-sw-registration");r.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jO(r,e){e?r.vapidKey=e:r.vapidKey||(r.vapidKey=Yb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tA(r,e){if(!navigator)throw Ni.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw Ni.create("permission-blocked");return await jO(r,e==null?void 0:e.vapidKey),await UO(r,e==null?void 0:e.serviceWorkerRegistration),NO(r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qO(r,e,t){const n=zO(e);(await r.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:t[Xb],message_name:t[mO],message_time:t[gO],message_device_time:Math.floor(Date.now()/1e3)})}function zO(r){switch(r){case Kf.NOTIFICATION_CLICKED:return"notification_open";case Kf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WO(r,e){const t=e.data;if(!t.isFirebaseMessaging)return;r.onMessageHandler&&t.messageType===Kf.PUSH_RECEIVED&&(typeof r.onMessageHandler=="function"?r.onMessageHandler(Tw(t)):r.onMessageHandler.next(Tw(t)));const n=t.data;MO(n)&&n[vO]==="1"&&await qO(r,t.messageType,n)}const bw="@firebase/messaging",Aw="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO=r=>{const e=new VO(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>WO(e,t)),e},$O=r=>{const e=r.getProvider("messaging").getImmediate();return{getToken:n=>tA(e,n)}};function GO(){Ki(new jn("messaging",HO,"PUBLIC")),Ki(new jn("messaging-internal",$O,"PRIVATE")),ei(bw,Aw),ei(bw,Aw,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KO(r){if(!navigator)throw Ni.create("only-available-in-window");return r.swRegistration||await eA(r),CO(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(r,e){if(!navigator)throw Ni.create("only-available-in-window");return r.onMessageHandler=e,()=>{r.onMessageHandler=null}}async function XO(r,e){return r=St(r),tA(r,e)}function JO(r){return r=St(r),KO(r)}function QO(r,e){return r=St(r),YO(r,e)}GO();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ZO="https://fcmregistrations.googleapis.com/v1",nA="FCM_MSG",e8="google.c.a.c_id",t8=3,r8=1;var sp;(function(r){r[r.DATA_MESSAGE=1]="DATA_MESSAGE",r[r.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(sp||(sp={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ap;(function(r){r.PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked"})(ap||(ap={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wa(r){const e=new Uint8Array(r);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function n8(r){const e="=".repeat((4-r.length%4)%4),t=(r+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),i=new Uint8Array(n.length);for(let s=0;s<n.length;++s)i[s]=n.charCodeAt(s);return i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="fcm_token_details_db",i8=5,Iw="fcm_token_object_Store";async function s8(r){if("databases"in indexedDB&&!(await indexedDB.databases()).map(s=>s.name).includes(og))return null;let e=null;return(await lh(og,i8,{upgrade:async(n,i,s,a)=>{var o;if(i<2||!n.objectStoreNames.contains(Iw))return;const c=a.objectStore(Iw),u=await c.index("fcmSenderId").get(r);if(await c.clear(),!!u){if(i===2){const l=u;if(!l.auth||!l.p256dh||!l.endpoint)return;e={token:l.fcmToken,createTime:(o=l.createTime)!==null&&o!==void 0?o:Date.now(),subscriptionOptions:{auth:l.auth,p256dh:l.p256dh,endpoint:l.endpoint,swScope:l.swScope,vapidKey:typeof l.vapidKey=="string"?l.vapidKey:Wa(l.vapidKey)}}}else if(i===3){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}else if(i===4){const l=u;e={token:l.fcmToken,createTime:l.createTime,subscriptionOptions:{auth:Wa(l.auth),p256dh:Wa(l.p256dh),endpoint:l.endpoint,swScope:l.swScope,vapidKey:Wa(l.vapidKey)}}}}}})).close(),await Pl(og),await Pl("fcm_vapid_details_db"),await Pl("undefined"),a8(e)?e:null}function a8(r){if(!r||!r.subscriptionOptions)return!1;const{subscriptionOptions:e}=r;return typeof r.createTime=="number"&&r.createTime>0&&typeof r.token=="string"&&r.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o8="firebase-messaging-database",c8=1,Tu="firebase-messaging-store";let cg=null;function pv(){return cg||(cg=lh(o8,c8,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(Tu)}}})),cg}async function mv(r){const e=vv(r),n=await(await pv()).transaction(Tu).objectStore(Tu).get(e);if(n)return n;{const i=await s8(r.appConfig.senderId);if(i)return await gv(r,i),i}}async function gv(r,e){const t=vv(r),i=(await pv()).transaction(Tu,"readwrite");return await i.objectStore(Tu).put(e,t),await i.done,e}async function u8(r){const e=vv(r),n=(await pv()).transaction(Tu,"readwrite");await n.objectStore(Tu).delete(e),await n.done}function vv({appConfig:r}){return r.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l8={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ya=new Ia("messaging","Messaging",l8);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h8(r,e){const t=await yv(r),n=sA(e),i={method:"POST",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(_v(r.appConfig),i)).json()}catch(a){throw ya.create("token-subscribe-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ya.create("token-subscribe-failed",{errorInfo:a})}if(!s.token)throw ya.create("token-subscribe-no-token");return s.token}async function f8(r,e){const t=await yv(r),n=sA(e.subscriptionOptions),i={method:"PATCH",headers:t,body:JSON.stringify(n)};let s;try{s=await(await fetch(`${_v(r.appConfig)}/${e.token}`,i)).json()}catch(a){throw ya.create("token-update-failed",{errorInfo:a==null?void 0:a.toString()})}if(s.error){const a=s.error.message;throw ya.create("token-update-failed",{errorInfo:a})}if(!s.token)throw ya.create("token-update-no-token");return s.token}async function iA(r,e){const n={method:"DELETE",headers:await yv(r)};try{const s=await(await fetch(`${_v(r.appConfig)}/${e}`,n)).json();if(s.error){const a=s.error.message;throw ya.create("token-unsubscribe-failed",{errorInfo:a})}}catch(i){throw ya.create("token-unsubscribe-failed",{errorInfo:i==null?void 0:i.toString()})}}function _v({projectId:r}){return`${ZO}/projects/${r}/registrations`}async function yv({appConfig:r,installations:e}){const t=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})}function sA({p256dh:r,auth:e,endpoint:t,vapidKey:n}){const i={web:{endpoint:t,auth:e,p256dh:r}};return n!==rA&&(i.web.applicationPubKey=n),i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=7*24*60*60*1e3;async function p8(r){const e=await g8(r.swRegistration,r.vapidKey),t={vapidKey:r.vapidKey,swScope:r.swRegistration.scope,endpoint:e.endpoint,auth:Wa(e.getKey("auth")),p256dh:Wa(e.getKey("p256dh"))},n=await mv(r.firebaseDependencies);if(n){if(v8(n.subscriptionOptions,t))return Date.now()>=n.createTime+d8?m8(r,{token:n.token,createTime:Date.now(),subscriptionOptions:t}):n.token;try{await iA(r.firebaseDependencies,n.token)}catch(i){console.warn(i)}return Pw(r.firebaseDependencies,t)}else return Pw(r.firebaseDependencies,t)}async function Sw(r){const e=await mv(r.firebaseDependencies);e&&(await iA(r.firebaseDependencies,e.token),await u8(r.firebaseDependencies));const t=await r.swRegistration.pushManager.getSubscription();return t?t.unsubscribe():!0}async function m8(r,e){try{const t=await f8(r.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return await gv(r.firebaseDependencies,n),t}catch(t){throw t}}async function Pw(r,e){const n={token:await h8(r,e),createTime:Date.now(),subscriptionOptions:e};return await gv(r,n),n.token}async function g8(r,e){const t=await r.pushManager.getSubscription();return t||r.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:n8(e)})}function v8(r,e){const t=e.vapidKey===r.vapidKey,n=e.endpoint===r.endpoint,i=e.auth===r.auth,s=e.p256dh===r.p256dh;return t&&n&&i&&s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _8(r){const e={from:r.from,collapseKey:r.collapse_key,messageId:r.fcmMessageId};return y8(e,r),w8(e,r),x8(e,r),e}function y8(r,e){if(!e.notification)return;r.notification={};const t=e.notification.title;t&&(r.notification.title=t);const n=e.notification.body;n&&(r.notification.body=n);const i=e.notification.image;i&&(r.notification.image=i);const s=e.notification.icon;s&&(r.notification.icon=s)}function w8(r,e){e.data&&(r.data=e.data)}function x8(r,e){var t,n,i,s,a;if(!e.fcmOptions&&!(!((t=e.notification)===null||t===void 0)&&t.click_action))return;r.fcmOptions={};const o=(i=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&i!==void 0?i:(s=e.notification)===null||s===void 0?void 0:s.click_action;o&&(r.fcmOptions.link=o);const c=(a=e.fcmOptions)===null||a===void 0?void 0:a.analytics_label;c&&(r.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E8(r){return typeof r=="object"&&!!r&&e8 in r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(r){return new Promise(e=>{setTimeout(e,r)})}async function b8(r,e){const t=A8(e,await r.firebaseDependencies.installations.getId());I8(r,t,e.productId)}function A8(r,e){var t,n;const i={};return r.from&&(i.project_number=r.from),r.fcmMessageId&&(i.message_id=r.fcmMessageId),i.instance_id=e,r.notification?i.message_type=sp.DISPLAY_NOTIFICATION.toString():i.message_type=sp.DATA_MESSAGE.toString(),i.sdk_platform=t8.toString(),i.package_name=self.origin.replace(/(^\w+:|^)\/\//,""),r.collapse_key&&(i.collapse_key=r.collapse_key),i.event=r8.toString(),!((t=r.fcmOptions)===null||t===void 0)&&t.analytics_label&&(i.analytics_label=(n=r.fcmOptions)===null||n===void 0?void 0:n.analytics_label),i}function I8(r,e,t){const n={};n.event_time_ms=Math.floor(Date.now()).toString(),n.source_extension_json_proto3=JSON.stringify({messaging_client_event:e}),t&&(n.compliance_data=S8(t)),r.logEvents.push(n)}function S8(r){return{privacy_context:{prequest:{origin_associated_product_id:r}}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function P8(r,e){var t,n;const{newSubscription:i}=r;if(!i){await Sw(e);return}const s=await mv(e.firebaseDependencies);await Sw(e),e.vapidKey=(n=(t=s==null?void 0:s.subscriptionOptions)===null||t===void 0?void 0:t.vapidKey)!==null&&n!==void 0?n:rA,await p8(e)}async function N8(r,e){const t=R8(r);if(!t)return;e.deliveryMetricsExportedToBigQueryEnabled&&await b8(e,t);const n=await aA();if(D8(n))return F8(n,t);if(t.notification&&await O8(k8(t)),!!e&&e.onBackgroundMessageHandler){const i=_8(t);typeof e.onBackgroundMessageHandler=="function"?await e.onBackgroundMessageHandler(i):e.onBackgroundMessageHandler.next(i)}}async function C8(r){var e,t;const n=(t=(e=r.notification)===null||e===void 0?void 0:e.data)===null||t===void 0?void 0:t[nA];if(n){if(r.action)return}else return;r.stopImmediatePropagation(),r.notification.close();const i=M8(n);if(!i)return;const s=new URL(i,self.location.href),a=new URL(self.location.origin);if(s.host!==a.host)return;let o=await L8(s);if(o?o=await o.focus():(o=await self.clients.openWindow(i),await T8(3e3)),!!o)return n.messageType=ap.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,o.postMessage(n)}function k8(r){const e=Object.assign({},r.notification);return e.data={[nA]:r},e}function R8({data:r}){if(!r)return null;try{return r.json()}catch{return null}}async function L8(r){const e=await aA();for(const t of e){const n=new URL(t.url,self.location.href);if(r.host===n.host)return t}return null}function D8(r){return r.some(e=>e.visibilityState==="visible"&&!e.url.startsWith("chrome-extension://"))}function F8(r,e){e.isFirebaseMessaging=!0,e.messageType=ap.PUSH_RECEIVED;for(const t of r)t.postMessage(e)}function aA(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function O8(r){var e;const{actions:t}=r,{maxActions:n}=Notification;return t&&n&&t.length>n&&console.warn(`This browser only supports ${n} actions. The remaining actions will not be displayed.`),self.registration.showNotification((e=r.title)!==null&&e!==void 0?e:"",r)}function M8(r){var e,t,n;const i=(t=(e=r.fcmOptions)===null||e===void 0?void 0:e.link)!==null&&t!==void 0?t:(n=r.notification)===null||n===void 0?void 0:n.click_action;return i||(E8(r.data)?self.location.origin:null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B8(r){if(!r||!r.options)throw ug("App Configuration Object");if(!r.name)throw ug("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=r;for(const n of e)if(!t[n])throw ug(n);return{appName:r.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}function ug(r){return ya.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=B8(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8=r=>{const e=new V8(r.getProvider("app").getImmediate(),r.getProvider("installations-internal").getImmediate(),r.getProvider("analytics-internal"));return self.addEventListener("push",t=>{t.waitUntil(N8(t,e))}),self.addEventListener("pushsubscriptionchange",t=>{t.waitUntil(P8(t,e))}),self.addEventListener("notificationclick",t=>{t.waitUntil(C8(t))}),e};function j8(){Ki(new jn("messaging-sw",U8,"PUBLIC"))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q8(r,e){if(self.document!==void 0)throw ya.create("only-available-in-sw");return r.onBackgroundMessageHandler=e,()=>{r.onBackgroundMessageHandler=null}}function z8(r,e){return r=St(r),q8(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */j8();const W8="@firebase/messaging-compat",H8="0.2.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $8(){return self&&"ServiceWorkerGlobalScope"in self?K8():G8()}function G8(){return typeof window<"u"&&ou()&&y4()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}function K8(){return ou()&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}class Nw{constructor(e,t){this.app=e,this._delegate=t,this.app=e,this._delegate=t}async getToken(e){return XO(this._delegate,e)}async deleteToken(){return JO(this._delegate)}onMessage(e){return QO(this._delegate,e)}onBackgroundMessage(e){return z8(this._delegate,e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y8=r=>self&&"ServiceWorkerGlobalScope"in self?new Nw(r.getProvider("app-compat").getImmediate(),r.getProvider("messaging-sw").getImmediate()):new Nw(r.getProvider("app-compat").getImmediate(),r.getProvider("messaging").getImmediate()),X8={isSupported:$8};function J8(){pn.INTERNAL.registerComponent(new jn("messaging-compat",Y8,"PUBLIC").setServiceProps(X8))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */J8();pn.registerVersion(W8,H8);const Q8={apiKey:"AIzaSyDJcK71mE0pjol-2loS9q9XhXFwxnJMu6U",authDomain:"appazeit.firebaseapp.com",projectId:"appazeit",storageBucket:"appazeit.firebasestorage.app",messagingSenderId:"977328058000",appId:"1:977328058000:web:360b79579689552423b215"};pn.apps.length||pn.initializeApp(Q8);const Eh=pn.auth(),Ci=pn.firestore();pn.functions();typeof window<"u"&&"Notification"in window&&pn.messaging.isSupported()&&pn.messaging();const Ve={currentUser:null,entries:[],projects:{},tasks:[],timerInterval:null,timerStart:null,timerSeconds:0,isRunning:!1,isHomeoffice:!0,entriesPageSize:50,entriesCurrentPage:1,sortOrderDescending:!0,dashboardPeriod:"week",unsubscribeEntries:null,unsubscribeProjects:null,unsubscribeTasks:null,tasksDashboardShown:!1};function Z8(){window.addManualEntry=e7,window.editEntry=t7,window.saveEdit=r7,window.deleteEntry=n7,window.closeEditModal=cA,window.changeEntriesPage=i7,window.changeEntriesPageSize=s7,window.filterChanged=!0,window.filterEntries=bd,window.toggleSortOrder=a7}function e7(){const r=document.getElementById("manualDate").value,e=document.getElementById("manualStart").value,t=document.getElementById("manualEnd").value,n=document.getElementById("currentProject").value,i=document.getElementById("currentActivity").value;if(!r||!e||!t){alert("Bitte Datum, Start und Ende eingeben!");return}if(oA(r,e,t))return;const s={datum:r,start:e,ende:t,projekt:n,taetigkeit:i,homeoffice:document.getElementById("manualLocation").value==="true",stunden:n==="Pause"?0:uA(e,t),pause:0,createdAt:pn.firestore.FieldValue.serverTimestamp()};yA(s),Ys(" Eintrag hinzugefgt!"),document.getElementById("manualStart").value="",document.getElementById("manualEnd").value=""}function oA(r,e,t,n=null){if(!Ve.entries)return!1;const[i,s]=e.split(":").map(Number),[a,o]=t.split(":").map(Number),c=i*60+s,u=a*60+o,l=Ve.entries.find(d=>{if(d.id===n||d.datum!==r)return!1;const[g,p]=(d.start||"00:00").split(":").map(Number),[x,_]=(d.ende||"00:00").split(":").map(Number),E=g*60+p,P=x*60+_;return c<P&&u>E});return l?!confirm(` Achtung: Dieser Eintrag berschneidet sich mit:
"${l.projekt}" (${l.start} - ${l.ende})

Trotzdem speichern?`):!1}function bd(){const r=document.getElementById("filterDate").value,e=document.getElementById("filterProject").value;window.filterChanged&&(Ve.entriesCurrentPage=1,window.filterChanged=!1);let t=[...Ve.entries];r&&(t=t.filter(o=>o.datum===r)),e&&(t=t.filter(o=>o.projekt===e)),t.sort((o,c)=>Ve.sortOrderDescending?o.datum!==c.datum?c.datum.localeCompare(o.datum):(c.start||"").localeCompare(o.start||""):o.datum!==c.datum?o.datum.localeCompare(c.datum):(o.start||"").localeCompare(c.start||""));const n=document.getElementById("entriesList");if(!n)return;const i=Ve.entriesPageSize,s=Ve.entriesCurrentPage,a=t.slice((s-1)*i,s*i);Math.ceil(t.length/i),t.length===0?n.innerHTML='<div class="p-8 text-br-300 text-center">Keine Eintrge gefunden</div>':n.innerHTML=a.map(o=>{var c;return`
             <div class="bg-br-800 rounded-lg p-3 border border-br-600 flex items-center gap-3">
                <div class="w-1 h-12 rounded" style="background: ${o.projekt==="Pause"?"#60A5FA":((c=Ve.projects[o.projekt])==null?void 0:c.color)||"#6B7280"}"></div>
                <div class="flex-1">
                    <div class="text-sm font-medium">${oh(o.datum)}</div>
                    <div class="text-xs text-br-200">${o.start} - ${o.ende}  ${o.projekt||"Allgemein"}</div>
                    ${o.taetigkeit?`<div class="text-xs text-br-300">${o.taetigkeit}</div>`:""}
                </div>
                <div class="text-right">
                    <div class="font-mono">${(o.stunden||0).toFixed(2)}h</div>
                    <div class="text-xs">${o.homeoffice?"":""}</div>
                </div>
                <button onclick="editEntry('${o.id}')" class="p-2 hover:bg-br-600 rounded"></button>
                <button onclick="deleteEntry('${o.id}')" class="p-2 hover:bg-red-900 rounded"></button>
            </div>
        `}).join(""),document.getElementById("entriesStats").textContent=`${t.length} Eintrge`}function t7(r){const e=Ve.entries.find(n=>n.id===r);if(!e)return;Ve.editingEntryId=r,document.getElementById("editDate").value=e.datum,document.getElementById("editStart").value=e.start,document.getElementById("editEnd").value=e.ende,document.getElementById("editLocation").value=e.homeoffice?"true":"false";const t=document.getElementById("editModal");t.classList.remove("hidden"),t.classList.add("flex")}function r7(){if(!Ve.editingEntryId)return;const r=Ve.entries.find(n=>n.id===Ve.editingEntryId),e=r&&r.projekt==="Pause",t={datum:document.getElementById("editDate").value,start:document.getElementById("editStart").value,ende:document.getElementById("editEnd").value,stunden:e?0:uA(document.getElementById("editStart").value,document.getElementById("editEnd").value),homeoffice:document.getElementById("editLocation").value==="true"};oA(t.datum,t.start,t.ende,Ve.editingEntryId)||(M7(Ve.editingEntryId,t),cA(),Ys(" Gespeichert"))}function cA(){const r=document.getElementById("editModal");r.classList.add("hidden"),r.classList.remove("flex"),Ve.editingEntryId=null}function n7(r){confirm("Lschen?")&&B7(r)}function i7(r){Ve.entriesCurrentPage=r,bd()}function s7(r){Ve.entriesPageSize=parseInt(r),Ve.entriesCurrentPage=1,bd()}function a7(){Ve.sortOrderDescending=!Ve.sortOrderDescending,bd()}function uA(r,e){if(!r||!e)return 0;const[t,n]=r.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+n,o=i*60+s;return Math.round((o-a)/60*100)/100}function o7(){window.addProject=u7,window.editProject=l7,window.deleteProject=h7,window.renderProjects=lA}function c7(){const r=Ve.projects,e=document.getElementById("currentProject"),t=document.getElementById("filterProject"),n=document.getElementById("editProject");if(!e)return;const i=[...Object.keys(r),"Pause"];i.sort();const s=i.map(a=>`<option value="${a}">${a}</option>`).join("");e.innerHTML='<option value="">-- Kein Projekt --</option>'+s,t.innerHTML='<option value="">Alle Projekte</option>'+s,n&&(n.innerHTML='<option value="">-- Kein Projekt --</option>'+s)}function lA(){const r=document.getElementById("projectsList");if(!r)return;const e=Object.keys(Ve.projects).sort();r.innerHTML=e.map(t=>`
        <div class="bg-br-800 rounded-lg p-4 border border-br-600 flex items-center gap-3">
            <div class="w-4 h-4 rounded" style="background: ${Ve.projects[t].color}"></div>
            <div class="flex-1">
                <div class="font-medium">${t}</div>
            </div>
            <button onclick="editProject('${t}')" class="p-2 hover:bg-br-600 rounded"></button>
            <button onclick="deleteProject('${t}')" class="p-2 hover:bg-red-900 rounded"></button>
        </div>
    `).join("")}async function u7(){const r=document.getElementById("newProjectName").value.trim(),e=document.getElementById("newProjectColor").value;r&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(r).set({name:r,color:e,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),document.getElementById("newProjectName").value="",Ys(" Projekt erstellt"))}async function l7(r){const e=Ve.projects[r];if(!e)return;const t=prompt("Neuer Projektname:",r);t&&t!==r&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(t).set({name:t,color:e.color,createdAt:firebase.firestore.FieldValue.serverTimestamp()}),await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(r).delete(),Ys(" Projekt umbenannt"))}async function h7(r){confirm(`Projekt "${r}" wirklich lschen?`)&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").doc(r).delete(),Ys(" Projekt gelscht"))}function f7(){window.updateDashboard=wv,window.setDashboardPeriod=d7,Ve.dashboardPeriod="week"}function d7(r){Ve.dashboardPeriod=r;const e=document.getElementById("dashboardDateRange");e&&(r==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")),wv()}function wv(){const r=Ve.dashboardPeriod||"week",e=Ve.entries;if(!e)return;const{start:t,end:n}=p7(r),i=e.filter(L=>L.datum>=t&&L.datum<=n);let s=0,a=0,o=0;const c=new Set,u={};i.forEach(L=>{const M=parseFloat(L.stunden||0),K=L.projekt||"unknown";if(K==="Pause"){let ie=0;if(L.pause)ie=L.pause/60;else if(L.start&&L.ende){const[oe,N]=L.start.split(":").map(Number),[A,k]=L.ende.split(":").map(Number),V=oe*60+N,b=A*60+k;ie=Math.max(0,(b-V)/60)}u[K]||(u[K]=0),u[K]+=ie;return}s+=M,c.add(L.datum),L.homeoffice?a+=M:o+=M,u[K]||(u[K]=0),u[K]+=M});const l=c.size,d=l>0?s/l:0;hl("statTotalHours",s.toFixed(1)),hl("statAvgPerDay",d.toFixed(1)),hl("statWorkDays",l),hl("statEntries",i.length);const g=a+o,p=g>0?a/g*100:0,x=g>0?o/g*100:0;hl("statHomeoffice",`${Math.round(p)}%`),hl("statOffice",`${Math.round(x)}%`);const _=document.getElementById("hoBar"),E=document.getElementById("officeBar");_&&(_.style.width=`${p}%`),E&&(E.style.width=`${x}%`);const P=document.getElementById("projectStats");if(P){const L=Object.entries(u).sort((M,K)=>K[1]-M[1]);P.innerHTML=L.map(([M,K])=>{let ie=Ve.projects[M];M==="Pause"?ie={name:"Pause",color:"#60A5FA"}:ie||(ie={name:M==="unknown"?"Ohne Projekt":M,color:"#6B7280"});const oe=ie.name,N=s>0?K/s*100:0;return`
                <div>
                    <div class="flex justify-between text-xs mb-1">
                        <span class="text-br-200">${oe}</span>
                        <span class="font-mono">${K.toFixed(1)}h (${Math.round(N)}%)</span>
                    </div>
                    <div class="w-full h-2 bg-br-700 rounded-full overflow-hidden">
                        <div class="h-full rounded-full" style="width: ${N}%; background-color: ${ie.color}"></div>
                    </div>
                </div>
            `}).join("")}}function p7(r){var n,i;const e=new Date,t=new Date(e.getTime()-e.getTimezoneOffset()*6e4).toISOString().split("T")[0];if(r==="custom"){const s=(n=document.getElementById("dashFrom"))==null?void 0:n.value,a=(i=document.getElementById("dashTo"))==null?void 0:i.value;return{start:s||"0000-00-00",end:a||"9999-99-99"}}if(r==="all")return{start:"0000-00-00",end:"9999-99-99"};if(r==="today")return{start:t,end:t};if(r==="week"){const s=new Date(e),a=s.getDay()||7;return s.setDate(s.getDate()-a+1),{start:s.toISOString().split("T")[0],end:t}}if(r==="month"){const s=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],a=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0];return{start:s,end:a}}if(r==="year"){const s=`${e.getFullYear()}-01-01`,a=`${e.getFullYear()}-12-31`;return{start:s,end:a}}return{start:t,end:t}}function hl(r,e){const t=document.getElementById(r);t&&(t.textContent=e)}function m7(){window.addTask=g7,window.toggleTaskStatus=v7,window.editTask=_7,window.saveTaskEdit=hA,window.closeEditTaskModal=y7,window.renderTasks=xv}function xv(){const r=document.getElementById("tasksList");r&&(r.innerHTML=Ve.tasks.map(e=>`
        <div class="bg-br-800 p-3 rounded border border-br-600 flex items-start gap-3">
             <input type="checkbox" ${e.status==="erledigt"?"checked":""} onclick="toggleTaskStatus('${e.id}')" class="mt-1">
             <div class="flex-1">
                <div class="${e.status==="erledigt"?"line-through text-br-400":""}">${e.aufgabe}</div>
                <div class="text-xs text-br-300">Fllig: ${e.faelligAm||"Nie"}</div>
             </div>
             <button onclick="editTask('${e.id}')"></button>
        </div>
    `).join(""))}async function g7(){const r=document.getElementById("newTaskTitle").value.trim();r&&(await Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").add({aufgabe:r,status:"offen",createdAt:pn.firestore.FieldValue.serverTimestamp()}),document.getElementById("newTaskTitle").value="",Ys(" Aufgabe hinzugefgt"))}async function v7(r){const e=Ve.tasks.find(n=>n.id===r);if(!e)return;const t=e.status==="erledigt"?"offen":"erledigt";e.status=t,xv(),await Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").doc(r).update({status:t})}function _7(r){const e=Ve.tasks.find(n=>n.id===r);if(!e)return;Ve.editingTaskId=r;const t=prompt("Aufgabe bearbeiten:",e.aufgabe);t&&t!==e.aufgabe&&hA(r,t)}async function hA(r,e){await Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").doc(r).update({aufgabe:e}),Ys(" Aufgabe aktualisiert")}function y7(){Ve.editingTaskId=null}function w7(){window.toggleTimer=x7,window.startTimer=fA,window.stopTimer=cm,window.resetTimer=E7,window.toggleCountdownMode=T7,window.testAlarm=P7,window.activateNotifications=N7}function x7(){Ve.isRunning?cm():fA()}function fA(){const r=document.getElementById("useCountdown").checked;dA(),gA();const e=parseInt(document.getElementById("countdownMinutes").value)||60,t=document.getElementById("currentProject").value;if(r){Ve.timerSeconds=e*60;const n=Date.now()+e*60*1e3;V7(n,t)}else Ve.timerSeconds=0;Ve.timerStart=new Date,Ve.isRunning=!0,um(!0,r),I7(),Ve.timerInterval=setInterval(()=>{const i=Math.floor((new Date-Ve.timerStart)/1e3);r?(Ve.timerSeconds=Math.max(0,e*60-i),Ve.timerSeconds<=0&&(Ve.timerSeconds=0,cm(),pA())):Ve.timerSeconds=i,Ev()},1e3)}function cm(){clearInterval(Ve.timerInterval),Ve.isRunning=!1,um(!1),Ve.timerStart&&Math.floor((new Date-Ve.timerStart)/1e3)>60&&b7(),wA(),Tv()}function E7(){clearInterval(Ve.timerInterval),Ve.isRunning=!1,Ve.timerSeconds=0,Ve.timerStart=null,um(!1),document.getElementById("timerStatus").textContent="Bereit zum Starten",Ev(),wA(),Tv()}function um(r,e=!1){const t=document.getElementById("btnStartStop"),n=document.getElementById("timerDisplay"),i=document.getElementById("timerStatus");r?(t.innerHTML=" Stop",t.classList.replace("bg-green-600","bg-red-600"),t.classList.replace("hover:bg-green-500","hover:bg-red-500"),n.classList.add("timer-active"),i.textContent=e?" Countdown luft... (Cloud-Alarm aktiv )":"Timer luft..."):(t.innerHTML=" Start",t.classList.replace("bg-red-600","bg-green-600"),t.classList.replace("hover:bg-red-500","hover:bg-green-500"),n.classList.remove("timer-active"),i.textContent="Timer gestoppt")}function Ev(){const r=Math.floor(Ve.timerSeconds/3600),e=Math.floor(Ve.timerSeconds%3600/60),t=Ve.timerSeconds%60;document.getElementById("timerValue").textContent=`${String(r).padStart(2,"0")}:${String(e).padStart(2,"0")}:${String(t).padStart(2,"0")}`}function T7(){const r=document.getElementById("useCountdown").checked;document.getElementById("countdownMinutes").disabled=!r}function b7(){const r=document.getElementById("useCountdown").checked,e=document.getElementById("currentProject").value,t=document.getElementById("currentActivity").value;let n;if(r){const c=parseInt(document.getElementById("countdownMinutes").value)||60;n=new Date(Ve.timerStart.getTime()+c*60*1e3)}else n=new Date;const i=n-Ve.timerStart,s=Math.round(i/6e4),a=e==="Pause",o={datum:Ve.timerStart.toISOString().split("T")[0],start:Ve.timerStart.toTimeString().slice(0,5),ende:n.toTimeString().slice(0,5),projekt:e,taetigkeit:t,homeoffice:Ve.isHomeoffice,stunden:a?0:A7(Ve.timerStart.toTimeString().slice(0,5),n.toTimeString().slice(0,5)),pause:a?s:0,createdAt:pn.firestore.FieldValue.serverTimestamp()};yA(o),Ve.timerStart=null,Ys(" Zeiteintrag gespeichert!")}function A7(r,e){const t=Cw(r),n=Cw(e);return Math.round((n-t)/60*100)/100}function Cw(r){if(!r)return 0;const[e,t]=r.split(":").map(Number);return e*60+t}function I7(){var r;localStorage.setItem("zeiterfassung_timer",JSON.stringify({timerStart:(r=Ve.timerStart)==null?void 0:r.toISOString(),isRunning:Ve.isRunning,isCountdown:document.getElementById("useCountdown").checked,countdownMinutes:document.getElementById("countdownMinutes").value,project:document.getElementById("currentProject").value,activity:document.getElementById("currentActivity").value,homeoffice:Ve.isHomeoffice}))}function Tv(){localStorage.removeItem("zeiterfassung_timer")}function S7(){const r=localStorage.getItem("zeiterfassung_timer");if(!r)return;const e=JSON.parse(r);if(!e.isRunning||!e.timerStart)return;const t=new Date(e.timerStart),n=Math.floor((Date.now()-t.getTime())/1e3),i=parseInt(e.countdownMinutes)||60;if(Ve.timerStart=t,document.getElementById("currentProject").value=e.project||"",document.getElementById("currentActivity").value=e.activity||"",window.setLocation(e.homeoffice),e.isCountdown){if(document.getElementById("useCountdown").checked=!0,document.getElementById("countdownMinutes").value=i,Ve.timerSeconds=Math.max(0,i*60-n),Ve.timerSeconds<=0){Ve.timerSeconds=0,Tv();return}}else Ve.timerSeconds=n;Ve.isRunning=!0,um(!0,e.isCountdown),Ys(" Timer wiederhergestellt!"),Ve.timerInterval=setInterval(()=>{const a=Math.floor((new Date-Ve.timerStart)/1e3);e.isCountdown?(Ve.timerSeconds=Math.max(0,i*60-a),Ve.timerSeconds<=0&&(Ve.timerSeconds=0,cm(),pA())):Ve.timerSeconds=a,Ev()},1e3)}let Ha=null;function dA(){Ha||(Ha=new(window.AudioContext||window.webkitAudioContext)),Ha.state==="suspended"&&Ha.resume()}function pA(){Ys(" Zeit abgelaufen!"),mA()}function mA(){if(Ha){const r=Ha.createOscillator(),e=Ha.createGain();r.connect(e),e.connect(Ha.destination),r.frequency.value=880,r.start(),r.stop(Ha.currentTime+1)}}function P7(){dA(),mA()}function gA(){"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission()}function N7(){gA()}function Ys(r){const e=document.createElement("div");e.className="fixed bottom-4 left-1/2 transform -translate-x-1/2 bg-gray-800 text-white px-6 py-3 rounded-xl shadow-lg border border-gray-600 z-50 animate-bounce",e.textContent=r,document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}function C7(){var r,e,t,n;(r=document.getElementById("loginScreen"))==null||r.classList.remove("hidden"),(e=document.getElementById("app"))==null||e.classList.add("hidden"),(t=document.getElementById("registerForm"))==null||t.classList.add("hidden"),(n=document.getElementById("emailLoginForm"))==null||n.classList.remove("hidden")}function k7(){var i,s,a;(i=document.getElementById("loginScreen"))==null||i.classList.add("hidden"),(s=document.getElementById("app"))==null||s.classList.remove("hidden");const r=Ve.currentUser,e=document.getElementById("userPhoto"),t=document.getElementById("userAvatar");r&&r.photoURL?(e.src=r.photoURL,e.style.display="block"):(e.src="",e.style.display="none",t.innerHTML="");const n=r.displayName||((a=r.email)==null?void 0:a.split("@")[0])||"User";document.getElementById("userName").textContent=n,document.getElementById("userEmail").textContent=r.email||""}function zi(r){const e=document.getElementById("syncStatus");if(e)switch(e.classList.remove("syncing"),r){case"syncing":e.innerHTML=" Sync...",e.className="sync-indicator syncing text-xs bg-yellow-500/20 text-yellow-400 px-2 py-1 rounded-full";break;case"synced":e.innerHTML=" Sync",e.className="sync-indicator text-xs bg-green-500/20 text-green-400 px-2 py-1 rounded-full";break;case"error":e.innerHTML=" Offline",e.className="sync-indicator text-xs bg-red-500/20 text-red-400 px-2 py-1 rounded-full";break}}function R7(r){var e,t,n;["timer","tasks","entries","projects","dashboard","export"].forEach(i=>{var s,a,o;(s=document.getElementById(`content-${i}`))==null||s.classList.add("hidden"),(a=document.getElementById(`tab-${i}`))==null||a.classList.remove("tab-active"),(o=document.getElementById(`tab-${i}`))==null||o.classList.add("text-br-200")}),(e=document.getElementById(`content-${r}`))==null||e.classList.remove("hidden"),(t=document.getElementById(`tab-${r}`))==null||t.classList.add("tab-active"),(n=document.getElementById(`tab-${r}`))==null||n.classList.remove("text-br-200"),r==="entries"&&window.filterEntries&&window.filterEntries(),r==="projects"&&window.renderProjects&&window.renderProjects(),r==="dashboard"&&window.updateDashboard&&window.updateDashboard(),r==="tasks"&&window.renderTasks&&window.renderTasks()}function L7(){document.getElementById("manualDate").value=new Date().toISOString().split("T")[0],localStorage.getItem("zeiterfassung_sortOrder")==="asc"&&(Ve.sortOrderDescending=!1,document.getElementById("btnSortOrder").innerHTML="",document.getElementById("btnSortOrder").title="Sortierung: lteste zuerst"),window.showTab=R7}function vA(){const r=new Date,e=new Date(r.getTime()-r.getTimezoneOffset()*6e4).toISOString().split("T")[0],t=Ve.entries.filter(x=>x.datum===e);let n=0,i=0,s=0;t.forEach(x=>{const _=parseFloat(x.stunden||0);n+=_,x.homeoffice?i+=_:s+=_});const a=7.8,o=n/a*100,c=Math.round(o),u=Math.min(100,o);document.getElementById("todayWorkProgress").textContent=`${n.toFixed(1)}h / ${a}h`,document.getElementById("todayWorkPercentText").textContent=`${c}%`,document.getElementById("todayWorkPercent").textContent=c>10?`${c}%`:"",document.getElementById("todayWorkBar").style.width=`${u}%`;const l=i+s,d=l>0?i/l*100:50,g=l>0?s/l*100:50;document.getElementById("todayHoBar").style.width=`${d}%`,document.getElementById("todayOfficeBar").style.width=`${g}%`,document.getElementById("todayHoLabel").textContent=d>10?`${Math.round(d)}%`:"",document.getElementById("todayOfficeLabel").textContent=g>10?`${Math.round(g)}%`:"",document.getElementById("todayHoHours").textContent=`${i.toFixed(1)}h`,document.getElementById("todayOfficeHours").textContent=`${s.toFixed(1)}h`,document.getElementById("todayTotal").textContent=`${n.toFixed(2)} h`;const p=document.getElementById("todayEntries");p&&(t.length===0?p.innerHTML='<div class="p-4 text-center text-br-300 text-sm">Noch keine Eintrge heute</div>':(t.sort((x,_)=>(x.start||"").localeCompare(_.start||"")),p.innerHTML=t.map(x=>{var _;return`
                <div class="p-3 border-b border-br-600 flex items-center justify-between hover:bg-br-700/50 transition-colors">
                    <div class="flex items-center gap-3">
                        <div class="w-1 h-8 rounded" style="background: ${((_=Ve.projects[x.projekt])==null?void 0:_.color)||"#6B7280"}"></div>
                        <div>
                            <div class="text-sm font-medium">${x.start} - ${x.ende}</div>
                            <div class="text-xs text-br-200">${x.projekt||"Allgemein"}  ${x.taetigkeit||"-"}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-mono text-sm">${(x.stunden||0).toFixed(2)}h</div>
                        <div class="text-xs">${x.homeoffice?"":""}</div>
                    </div>
                </div>
            `}).join("")))}function _A(){var r;(r=document.getElementById("userMenu"))==null||r.classList.add("hidden")}function oh(r){if(!r)return"";try{const e=new Date(r);return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}catch{return r}}window.showUserMenu=()=>document.getElementById("userMenu").classList.toggle("hidden");window.hideUserMenu=_A;window.formatDate=oh;window.updateTodayView=vA;window.setLocation=D7;function D7(r){Ve.isHomeoffice=r;const e=document.getElementById("btn-ho"),t=document.getElementById("btn-office");r?(e.classList.replace("bg-br-700","bg-br-500"),t.classList.replace("bg-br-500","bg-br-700")):(e.classList.replace("bg-br-500","bg-br-700"),t.classList.replace("bg-br-700","bg-br-500"))}function F7(){Ve.currentUser&&(zi("syncing"),Ve.unsubscribeEntries=Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").orderBy("datum","desc").onSnapshot(r=>{Ve.entries=[],r.forEach(e=>{Ve.entries.push({id:e.id,...e.data()})}),vA(),bd(),wv(),zi("synced")},r=>{console.error("Entries sync error:",r),zi("error")}),Ve.unsubscribeProjects=Ci.collection("users").doc(Ve.currentUser.uid).collection("projects").onSnapshot(r=>{r.empty||(Ve.projects={},r.forEach(e=>{Ve.projects[e.id]=e.data()}),c7(),lA())},r=>{console.error("Projects sync error:",r)}),Ve.unsubscribeTasks=Ci.collection("users").doc(Ve.currentUser.uid).collection("tasks").orderBy("faelligAm","asc").onSnapshot(r=>{Ve.tasks=[],r.forEach(e=>{Ve.tasks.push({id:e.id,...e.data()})}),xv(),Ve.tasksDashboardShown,zi("synced")},r=>{console.error("Tasks sync error:",r),zi("error")}))}function O7(){Ve.unsubscribeEntries&&Ve.unsubscribeEntries(),Ve.unsubscribeProjects&&Ve.unsubscribeProjects(),Ve.unsubscribeTasks&&Ve.unsubscribeTasks()}async function yA(r){if(Ve.currentUser){zi("syncing");try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").add(r),zi("synced")}catch(e){console.error("Add entry error:",e),zi("error")}}}async function M7(r,e){if(Ve.currentUser){zi("syncing");try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").doc(r).update(e),zi("synced")}catch(t){console.error("Update entry error:",t),zi("error")}}}async function B7(r){if(Ve.currentUser){zi("syncing");try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("entries").doc(r).delete(),zi("synced")}catch(e){console.error("Delete entry error:",e),zi("error")}}}async function V7(r,e){if(Ve.currentUser)try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("timers").doc("current").set({alarmTime:r,project:e||"",active:!0,createdAt:pn.firestore.FieldValue.serverTimestamp()}),console.log(" Cloud Timer gespeichert")}catch(t){console.error("Cloud Timer Fehler:",t)}}async function wA(){if(Ve.currentUser)try{await Ci.collection("users").doc(Ve.currentUser.uid).collection("timers").doc("current").update({active:!1}),console.log(" Cloud Timer deaktiviert")}catch(r){console.error("Cloud Timer lschen Fehler:",r)}}function U7(){Eh.onAuthStateChanged(r=>{console.log("Auth State:",r?r.email:"nicht angemeldet"),r?(Ve.currentUser=r,k7(),F7(),S7()):(Ve.currentUser=null,C7(),O7())}),window.signInWithGoogle=j7,window.signInWithEmail=H7,window.registerWithEmail=$7,window.resetPassword=G7,window.signOut=q7,window.showRegisterForm=z7,window.showLoginForm=W7}async function j7(){const r=new pn.auth.GoogleAuthProvider;r.setCustomParameters({prompt:"select_account"});try{const e=document.getElementById("loginBtn");e&&(e.disabled=!0,e.innerHTML=" Anmelden..."),await Eh.signInWithPopup(r),console.log(" Login erfolgreich")}catch(e){console.error("Login Error:",e.code,e.message);const t=document.getElementById("loginBtn");t&&(t.disabled=!1,t.innerHTML='<svg class="w-6 h-6" viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> Mit Google anmelden'),e.code==="auth/popup-blocked"?alert(" Popup wurde blockiert! Bitte erlaube Popups fr diese Seite."):e.code!=="auth/popup-closed-by-user"&&e.code!=="auth/cancelled-popup-request"&&alert(" Login fehlgeschlagen: "+e.message)}}function q7(){Eh.signOut(),_A()}function z7(){document.getElementById("emailLoginForm").classList.add("hidden"),document.getElementById("registerForm").classList.remove("hidden")}function W7(){var r,e;(r=document.getElementById("registerForm"))==null||r.classList.add("hidden"),(e=document.getElementById("emailLoginForm"))==null||e.classList.remove("hidden")}async function H7(){const r=document.getElementById("loginEmail").value.trim(),e=document.getElementById("loginPassword").value;if(!r||!e){alert("Bitte E-Mail und Passwort eingeben.");return}const t=document.getElementById("emailLoginBtn");t.disabled=!0,t.innerHTML=" Anmelden...";try{await Eh.signInWithEmailAndPassword(r,e),console.log(" E-Mail Login erfolgreich")}catch(n){switch(console.error("E-Mail Login Error:",n.code,n.message),t.disabled=!1,t.innerHTML=" Mit E-Mail anmelden",n.code){case"auth/user-not-found":alert(` Kein Konto mit dieser E-Mail gefunden.

Mchtest du dich registrieren?`);break;case"auth/wrong-password":alert(" Falsches Passwort.");break;case"auth/invalid-email":alert(" Ungltige E-Mail-Adresse.");break;case"auth/too-many-requests":alert(" Zu viele Versuche. Bitte warte einen Moment.");break;default:alert(" Login fehlgeschlagen: "+n.message)}}}async function $7(){const r=document.getElementById("registerEmail").value.trim(),e=document.getElementById("registerPassword").value,t=document.getElementById("registerPasswordConfirm").value;if(!r||!e){alert("Bitte E-Mail und Passwort eingeben.");return}if(e.length<6){alert("Das Passwort muss mindestens 6 Zeichen haben.");return}if(e!==t){alert("Die Passwrter stimmen nicht berein.");return}try{await Eh.createUserWithEmailAndPassword(r,e),console.log(" Registrierung erfolgreich"),Ys(" Konto erstellt! Du bist jetzt angemeldet.")}catch(n){switch(console.error("Registrierung Error:",n.code,n.message),n.code){case"auth/email-already-in-use":alert(` Diese E-Mail ist bereits registriert.

Bitte melde dich an oder nutze "Passwort vergessen".`);break;default:alert(" Registrierung fehlgeschlagen: "+n.message)}}}async function G7(){const r=document.getElementById("loginEmail").value.trim();if(!r){alert("Bitte gib zuerst deine E-Mail-Adresse ein.");return}try{await Eh.sendPasswordResetEmail(r),alert(` Passwort-Reset E-Mail gesendet!

Bitte prfe dein Postfach (auch Spam-Ordner).`)}catch(e){console.error("Password Reset Error:",e.code,e.message),alert(" Fehler: "+e.message)}}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var op={};op.version="0.18.5";var xA=1252,K7=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],EA=function(r){K7.indexOf(r)!=-1&&(xA=r)};function Y7(){EA(1252)}var Yf=function(r){EA(r)};function X7(){Yf(1200),Y7()}var c0=function(e){return String.fromCharCode(e)},kw=function(e){return String.fromCharCode(e)},cp,Jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Xf(r){for(var e="",t=0,n=0,i=0,s=0,a=0,o=0,c=0,u=0;u<r.length;)t=r.charCodeAt(u++),s=t>>2,n=r.charCodeAt(u++),a=(t&3)<<4|n>>4,i=r.charCodeAt(u++),o=(n&15)<<2|i>>6,c=i&63,isNaN(n)?o=c=64:isNaN(i)&&(c=64),e+=Jo.charAt(s)+Jo.charAt(a)+Jo.charAt(o)+Jo.charAt(c);return e}function io(r){var e="",t=0,n=0,i=0,s=0,a=0,o=0,c=0;r=r.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<r.length;)s=Jo.indexOf(r.charAt(u++)),a=Jo.indexOf(r.charAt(u++)),t=s<<2|a>>4,e+=String.fromCharCode(t),o=Jo.indexOf(r.charAt(u++)),n=(a&15)<<4|o>>2,o!==64&&(e+=String.fromCharCode(n)),c=Jo.indexOf(r.charAt(u++)),i=(o&3)<<6|c,c!==64&&(e+=String.fromCharCode(i));return e}var lr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),ho=function(){if(typeof Buffer<"u"){var r=!Buffer.from;if(!r)try{Buffer.from("foo","utf8")}catch{r=!0}return r?function(e,t){return t?new Buffer(e,t):new Buffer(e)}:Buffer.from.bind(Buffer)}return function(){}}();function bu(r){return lr?Buffer.alloc?Buffer.alloc(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}function Rw(r){return lr?Buffer.allocUnsafe?Buffer.allocUnsafe(r):new Buffer(r):typeof Uint8Array<"u"?new Uint8Array(r):new Array(r)}var Hs=function(e){return lr?ho(e,"binary"):e.split("").map(function(t){return t.charCodeAt(0)&255})};function lm(r){if(typeof ArrayBuffer>"u")return Hs(r);for(var e=new ArrayBuffer(r.length),t=new Uint8Array(e),n=0;n!=r.length;++n)t[n]=r.charCodeAt(n)&255;return e}function Ad(r){if(Array.isArray(r))return r.map(function(n){return String.fromCharCode(n)}).join("");for(var e=[],t=0;t<r.length;++t)e[t]=String.fromCharCode(r[t]);return e.join("")}function J7(r){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(r)}var Qn=lr?function(r){return Buffer.concat(r.map(function(e){return Buffer.isBuffer(e)?e:ho(e)}))}:function(r){if(typeof Uint8Array<"u"){var e=0,t=0;for(e=0;e<r.length;++e)t+=r[e].length;var n=new Uint8Array(t),i=0;for(e=0,t=0;e<r.length;t+=i,++e)if(i=r[e].length,r[e]instanceof Uint8Array)n.set(r[e],t);else{if(typeof r[e]=="string")throw"wtf";n.set(new Uint8Array(r[e]),t)}return n}return[].concat.apply([],r.map(function(s){return Array.isArray(s)?s:[].slice.call(s)}))};function Q7(r){for(var e=[],t=0,n=r.length+250,i=bu(r.length+255),s=0;s<r.length;++s){var a=r.charCodeAt(s);if(a<128)i[t++]=a;else if(a<2048)i[t++]=192|a>>6&31,i[t++]=128|a&63;else if(a>=55296&&a<57344){a=(a&1023)+64;var o=r.charCodeAt(++s)&1023;i[t++]=240|a>>8&7,i[t++]=128|a>>2&63,i[t++]=128|o>>6&15|(a&3)<<4,i[t++]=128|o&63}else i[t++]=224|a>>12&15,i[t++]=128|a>>6&63,i[t++]=128|a&63;t>n&&(e.push(i.slice(0,t)),t=0,i=bu(65535),n=65530)}return e.push(i.slice(0,t)),Qn(e)}var yf=/\u0000/g,u0=/[\u0001-\u0006]/g;function Ol(r){for(var e="",t=r.length-1;t>=0;)e+=r.charAt(t--);return e}function $s(r,e){var t=""+r;return t.length>=e?t:Zr("0",e-t.length)+t}function bv(r,e){var t=""+r;return t.length>=e?t:Zr(" ",e-t.length)+t}function up(r,e){var t=""+r;return t.length>=e?t:t+Zr(" ",e-t.length)}function Z7(r,e){var t=""+Math.round(r);return t.length>=e?t:Zr("0",e-t.length)+t}function eM(r,e){var t=""+r;return t.length>=e?t:Zr("0",e-t.length)+t}var Lw=Math.pow(2,32);function fl(r,e){if(r>Lw||r<-Lw)return Z7(r,e);var t=Math.round(r);return eM(t,e)}function lp(r,e){return e=e||0,r.length>=7+e&&(r.charCodeAt(e)|32)===103&&(r.charCodeAt(e+1)|32)===101&&(r.charCodeAt(e+2)|32)===110&&(r.charCodeAt(e+3)|32)===101&&(r.charCodeAt(e+4)|32)===114&&(r.charCodeAt(e+5)|32)===97&&(r.charCodeAt(e+6)|32)===108}var Dw=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lg=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function tM(r){return r||(r={}),r[0]="General",r[1]="0",r[2]="0.00",r[3]="#,##0",r[4]="#,##0.00",r[9]="0%",r[10]="0.00%",r[11]="0.00E+00",r[12]="# ?/?",r[13]="# ??/??",r[14]="m/d/yy",r[15]="d-mmm-yy",r[16]="d-mmm",r[17]="mmm-yy",r[18]="h:mm AM/PM",r[19]="h:mm:ss AM/PM",r[20]="h:mm",r[21]="h:mm:ss",r[22]="m/d/yy h:mm",r[37]="#,##0 ;(#,##0)",r[38]="#,##0 ;[Red](#,##0)",r[39]="#,##0.00;(#,##0.00)",r[40]="#,##0.00;[Red](#,##0.00)",r[45]="mm:ss",r[46]="[h]:mm:ss",r[47]="mmss.0",r[48]="##0.0E+0",r[49]="@",r[56]='"/ "hh""mm""ss" "',r}var tn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Fw={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},rM={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function hp(r,e,t){for(var n=r<0?-1:1,i=r*n,s=0,a=1,o=0,c=1,u=0,l=0,d=Math.floor(i);u<e&&(d=Math.floor(i),o=d*a+s,l=d*u+c,!(i-d<5e-8));)i=1/(i-d),s=a,a=o,c=u,u=l;if(l>e&&(u>e?(l=c,o=s):(l=u,o=a)),!t)return[0,n*o,l];var g=Math.floor(n*o/l);return[g,n*o-g*l,l]}function l0(r,e,t){if(r>2958465||r<0)return null;var n=r|0,i=Math.floor(86400*(r-n)),s=0,a=[],o={D:n,T:i,u:86400*(r-n)-i,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(o.u)<1e-6&&(o.u=0),e&&e.date1904&&(n+=1462),o.u>.9999&&(o.u=0,++i==86400&&(o.T=i=0,++n,++o.D)),n===60)a=t?[1317,10,29]:[1900,2,29],s=3;else if(n===0)a=t?[1317,8,29]:[1900,1,0],s=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),a=[c.getFullYear(),c.getMonth()+1,c.getDate()],s=c.getDay(),n<60&&(s=(s+6)%7),t&&(s=uM(c,a))}return o.y=a[0],o.m=a[1],o.d=a[2],o.S=i%60,i=Math.floor(i/60),o.M=i%60,i=Math.floor(i/60),o.H=i,o.q=s,o}var TA=new Date(1899,11,31,0,0,0),nM=TA.getTime(),iM=new Date(1900,2,1,0,0,0);function bA(r,e){var t=r.getTime();return e?t-=1461*24*60*60*1e3:r>=iM&&(t+=24*60*60*1e3),(t-(nM+(r.getTimezoneOffset()-TA.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function Av(r){return r.indexOf(".")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function sM(r){return r.indexOf("E")==-1?r:r.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function aM(r){var e=r<0?12:11,t=Av(r.toFixed(12));return t.length<=e||(t=r.toPrecision(10),t.length<=e)?t:r.toExponential(5)}function oM(r){var e=Av(r.toFixed(11));return e.length>(r<0?12:11)||e==="0"||e==="-0"?r.toPrecision(6):e}function cM(r){var e=Math.floor(Math.log(Math.abs(r))*Math.LOG10E),t;return e>=-4&&e<=-1?t=r.toPrecision(10+e):Math.abs(e)<=9?t=aM(r):e===10?t=r.toFixed(10).substr(0,12):t=oM(r),Av(sM(t.toUpperCase()))}function f1(r,e){switch(typeof r){case"string":return r;case"boolean":return r?"TRUE":"FALSE";case"number":return(r|0)===r?r.toString(10):cM(r);case"undefined":return"";case"object":if(r==null)return"";if(r instanceof Date)return hc(14,bA(r,e&&e.date1904),e)}throw new Error("unsupported value in General format: "+r)}function uM(r,e){e[0]-=581;var t=r.getDay();return r<60&&(t=(t+6)%7),t}function lM(r,e,t,n){var i="",s=0,a=0,o=t.y,c,u=0;switch(r){case 98:o=t.y+543;case 121:switch(e.length){case 1:case 2:c=o%100,u=2;break;default:c=o%1e4,u=4;break}break;case 109:switch(e.length){case 1:case 2:c=t.m,u=e.length;break;case 3:return lg[t.m-1][1];case 5:return lg[t.m-1][0];default:return lg[t.m-1][2]}break;case 100:switch(e.length){case 1:case 2:c=t.d,u=e.length;break;case 3:return Dw[t.q][0];default:return Dw[t.q][1]}break;case 104:switch(e.length){case 1:case 2:c=1+(t.H+11)%12,u=e.length;break;default:throw"bad hour format: "+e}break;case 72:switch(e.length){case 1:case 2:c=t.H,u=e.length;break;default:throw"bad hour format: "+e}break;case 77:switch(e.length){case 1:case 2:c=t.M,u=e.length;break;default:throw"bad minute format: "+e}break;case 115:if(e!="s"&&e!="ss"&&e!=".0"&&e!=".00"&&e!=".000")throw"bad second format: "+e;return t.u===0&&(e=="s"||e=="ss")?$s(t.S,e.length):(n>=2?a=n===3?1e3:100:a=n===1?10:1,s=Math.round(a*(t.S+t.u)),s>=60*a&&(s=0),e==="s"?s===0?"0":""+s/a:(i=$s(s,2+n),e==="ss"?i.substr(0,2):"."+i.substr(2,e.length-1)));case 90:switch(e){case"[h]":case"[hh]":c=t.D*24+t.H;break;case"[m]":case"[mm]":c=(t.D*24+t.H)*60+t.M;break;case"[s]":case"[ss]":c=((t.D*24+t.H)*60+t.M)*60+Math.round(t.S+t.u);break;default:throw"bad abstime format: "+e}u=e.length===3?1:2;break;case 101:c=o,u=1;break}var l=u>0?$s(c,u):"";return l}function Qo(r){var e=3;if(r.length<=e)return r;for(var t=r.length%e,n=r.substr(0,t);t!=r.length;t+=e)n+=(n.length>0?",":"")+r.substr(t,e);return n}var AA=/%/g;function hM(r,e,t){var n=e.replace(AA,""),i=e.length-n.length;return Ja(r,n,t*Math.pow(10,2*i))+Zr("%",i)}function fM(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ja(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function IA(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+IA(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),t.indexOf("e")===-1){var a=Math.floor(Math.log(e)*Math.LOG10E);for(t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s);t.substr(0,2)==="0.";)t=t.charAt(0)+t.substr(2,i)+"."+t.substr(2+i),t=t.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}var SA=/# (\?+)( ?)\/( ?)(\d+)/;function dM(r,e,t){var n=parseInt(r[4],10),i=Math.round(e*n),s=Math.floor(i/n),a=i-s*n,o=n;return t+(s===0?"":""+s)+" "+(a===0?Zr(" ",r[1].length+1+r[4].length):bv(a,r[1].length)+r[2]+"/"+r[3]+$s(o,r[4].length))}function pM(r,e,t){return t+(e===0?"":""+e)+Zr(" ",r[1].length+2+r[4].length)}var PA=/^#*0*\.([0#]+)/,NA=/\).*[0#]/,CA=/\(###\) ###\\?-####/;function Ai(r){for(var e="",t,n=0;n!=r.length;++n)switch(t=r.charCodeAt(n)){case 35:break;case 63:e+=" ";break;case 48:e+="0";break;default:e+=String.fromCharCode(t)}return e}function Ow(r,e){var t=Math.pow(10,e);return""+Math.round(r*t)/t}function Mw(r,e){var t=r-Math.floor(r),n=Math.pow(10,e);return e<(""+Math.round(t*n)).length?0:Math.round(t*n)}function mM(r,e){return e<(""+Math.round((r-Math.floor(r))*Math.pow(10,e))).length?1:0}function gM(r){return r<2147483647&&r>-2147483648?""+(r>=0?r|0:r-1|0):""+Math.floor(r)}function bs(r,e,t){if(r.charCodeAt(0)===40&&!e.match(NA)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?bs("n",n,t):"("+bs("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return fM(r,e,t);if(e.indexOf("%")!==-1)return hM(r,e,t);if(e.indexOf("E")!==-1)return IA(e,t);if(e.charCodeAt(0)===36)return"$"+bs(r,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+fl(c,e.length);if(e.match(/^[#?]+$/))return i=fl(t,0),i==="0"&&(i=""),i.length>e.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(SA))return dM(s,c,u);if(e.match(/^#+0+$/))return u+fl(c,e.length-e.indexOf("0"));if(s=e.match(PA))return i=Ow(t,s[1].length).replace(/^([^\.]+)$/,"$1."+Ai(s[1])).replace(/\.$/,"."+Ai(s[1])).replace(/\.(\d*)$/,function(x,_){return"."+_+Zr("0",Ai(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+Ow(c,s[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Qo(fl(c,0));if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+bs(r,e,-t):Qo(""+(Math.floor(t)+mM(t,s[1].length)))+"."+$s(Mw(t,s[1].length),s[1].length);if(s=e.match(/^#,#*,#0/))return bs(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ol(bs(r,e.replace(/[\\-]/g,""),t)),a=0,Ol(Ol(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(CA))return i=bs(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=hp(c,Math.pow(10,a)-1,!1),i=""+u,l=Ja("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=up(o[2],a),l.length<s[4].length&&(l=Ai(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=hp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?bv(o[1],a)+s[2]+"/"+s[3]+up(o[2],a):Zr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=fl(t,0),e.length<=i.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0?]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Ai(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return a=Mw(t,s[1].length),t<0?"-"+bs(r,e,-t):Qo(gM(t)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?$s(0,3-x.length):"")+x})+"."+$s(a,s[1].length);switch(e){case"###,##0.00":return bs(r,"#,##0.00",t);case"###,###":case"##,###":case"#,###":var p=Qo(fl(c,0));return p!=="0"?u+p:"";case"###,###.00":return bs(r,"###,##0.00",t).replace(/^0\./,".");case"#,###.00":return bs(r,"#,##0.00",t).replace(/^0\./,".")}throw new Error("unsupported format |"+e+"|")}function vM(r,e,t){for(var n=e.length-1;e.charCodeAt(n-1)===44;)--n;return Ja(r,e.substr(0,n),t/Math.pow(10,3*(e.length-n)))}function _M(r,e,t){var n=e.replace(AA,""),i=e.length-n.length;return Ja(r,n,t*Math.pow(10,2*i))+Zr("%",i)}function kA(r,e){var t,n=r.indexOf("E")-r.indexOf(".")-1;if(r.match(/^#+0.0E\+0$/)){if(e==0)return"0.0E+0";if(e<0)return"-"+kA(r,-e);var i=r.indexOf(".");i===-1&&(i=r.indexOf("E"));var s=Math.floor(Math.log(e)*Math.LOG10E)%i;if(s<0&&(s+=i),t=(e/Math.pow(10,s)).toPrecision(n+1+(i+s)%i),!t.match(/[Ee]/)){var a=Math.floor(Math.log(e)*Math.LOG10E);t.indexOf(".")===-1?t=t.charAt(0)+"."+t.substr(1)+"E+"+(a-t.length+s):t+="E+"+(a-s),t=t.replace(/\+-/,"-")}t=t.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(o,c,u,l){return c+u+l.substr(0,(i+s)%i)+"."+l.substr(s)+"E"})}else t=e.toExponential(n);return r.match(/E\+00$/)&&t.match(/e[+-]\d$/)&&(t=t.substr(0,t.length-1)+"0"+t.charAt(t.length-1)),r.match(/E\-/)&&t.match(/e\+/)&&(t=t.replace(/e\+/,"e")),t.replace("e","E")}function aa(r,e,t){if(r.charCodeAt(0)===40&&!e.match(NA)){var n=e.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return t>=0?aa("n",n,t):"("+aa("n",n,-t)+")"}if(e.charCodeAt(e.length-1)===44)return vM(r,e,t);if(e.indexOf("%")!==-1)return _M(r,e,t);if(e.indexOf("E")!==-1)return kA(e,t);if(e.charCodeAt(0)===36)return"$"+aa(r,e.substr(e.charAt(1)==" "?2:1),t);var i,s,a,o,c=Math.abs(t),u=t<0?"-":"";if(e.match(/^00+$/))return u+$s(c,e.length);if(e.match(/^[#?]+$/))return i=""+t,t===0&&(i=""),i.length>e.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(SA))return pM(s,c,u);if(e.match(/^#+0+$/))return u+$s(c,e.length-e.indexOf("0"));if(s=e.match(PA))return i=(""+t).replace(/^([^\.]+)$/,"$1."+Ai(s[1])).replace(/\.$/,"."+Ai(s[1])),i=i.replace(/\.(\d*)$/,function(x,_){return"."+_+Zr("0",Ai(s[1]).length-_.length)}),e.indexOf("0.")!==-1?i:i.replace(/^0\./,".");if(e=e.replace(/^#+([0.])/,"$1"),s=e.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,s[1].length?"0.":".");if(s=e.match(/^#{1,3},##0(\.?)$/))return u+Qo(""+c);if(s=e.match(/^#,##0\.([#0]*0)$/))return t<0?"-"+aa(r,e,-t):Qo(""+t)+"."+Zr("0",s[1].length);if(s=e.match(/^#,#*,#0/))return aa(r,e.replace(/^#,#*,/,""),t);if(s=e.match(/^([0#]+)(\\?-([0#]+))+$/))return i=Ol(aa(r,e.replace(/[\\-]/g,""),t)),a=0,Ol(Ol(e.replace(/\\/g,"")).replace(/[0#]/g,function(x){return a<i.length?i.charAt(a++):x==="0"?"0":""}));if(e.match(CA))return i=aa(r,"##########",t),"("+i.substr(0,3)+") "+i.substr(3,3)+"-"+i.substr(6);var l="";if(s=e.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(s[4].length,7),o=hp(c,Math.pow(10,a)-1,!1),i=""+u,l=Ja("n",s[1],o[1]),l.charAt(l.length-1)==" "&&(l=l.substr(0,l.length-1)+"0"),i+=l+s[2]+"/"+s[3],l=up(o[2],a),l.length<s[4].length&&(l=Ai(s[4].substr(s[4].length-l.length))+l),i+=l,i;if(s=e.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return a=Math.min(Math.max(s[1].length,s[4].length),7),o=hp(c,Math.pow(10,a)-1,!0),u+(o[0]||(o[1]?"":"0"))+" "+(o[1]?bv(o[1],a)+s[2]+"/"+s[3]+up(o[2],a):Zr(" ",2*a+1+s[2].length+s[3].length));if(s=e.match(/^[#0?]+$/))return i=""+t,e.length<=i.length?i:Ai(e.substr(0,e.length-i.length))+i;if(s=e.match(/^([#0]+)\.([#0]+)$/)){i=""+t.toFixed(Math.min(s[2].length,10)).replace(/([^0])0+$/,"$1"),a=i.indexOf(".");var d=e.indexOf(".")-a,g=e.length-i.length-d;return Ai(e.substr(0,d)+i+e.substr(e.length-g))}if(s=e.match(/^00,000\.([#0]*0)$/))return t<0?"-"+aa(r,e,-t):Qo(""+t).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(x){return"00,"+(x.length<3?$s(0,3-x.length):"")+x})+"."+$s(0,s[1].length);switch(e){case"###,###":case"##,###":case"#,###":var p=Qo(""+c);return p!=="0"?u+p:"";default:if(e.match(/\.[0#?]*$/))return aa(r,e.slice(0,e.lastIndexOf(".")),t)+Ai(e.slice(e.lastIndexOf(".")))}throw new Error("unsupported format |"+e+"|")}function Ja(r,e,t){return(t|0)===t?aa(r,e,t):bs(r,e,t)}function yM(r){for(var e=[],t=!1,n=0,i=0;n<r.length;++n)switch(r.charCodeAt(n)){case 34:t=!t;break;case 95:case 42:case 92:++n;break;case 59:e[e.length]=r.substr(i,n-i),i=n+1}if(e[e.length]=r.substr(i),t===!0)throw new Error("Format |"+r+"| unterminated string ");return e}var RA=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function LA(r){for(var e=0,t="",n="";e<r.length;)switch(t=r.charAt(e)){case"G":lp(r,e)&&(e+=6),e++;break;case'"':for(;r.charCodeAt(++e)!==34&&e<r.length;);++e;break;case"\\":e+=2;break;case"_":e+=2;break;case"@":++e;break;case"B":case"b":if(r.charAt(e+1)==="1"||r.charAt(e+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(r.substr(e,3).toUpperCase()==="A/P"||r.substr(e,5).toUpperCase()==="AM/PM"||r.substr(e,5).toUpperCase()==="/")return!0;++e;break;case"[":for(n=t;r.charAt(e++)!=="]"&&e<r.length;)n+=r.charAt(e);if(n.match(RA))return!0;break;case".":case"0":case"#":for(;e<r.length&&("0#?.,E+-%".indexOf(t=r.charAt(++e))>-1||t=="\\"&&r.charAt(e+1)=="-"&&"0#".indexOf(r.charAt(e+2))>-1););break;case"?":for(;r.charAt(++e)===t;);break;case"*":++e,(r.charAt(e)==" "||r.charAt(e)=="*")&&++e;break;case"(":case")":++e;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;e<r.length&&"0123456789".indexOf(r.charAt(++e))>-1;);break;case" ":++e;break;default:++e;break}return!1}function wM(r,e,t,n){for(var i=[],s="",a=0,o="",c="t",u,l,d,g="H";a<r.length;)switch(o=r.charAt(a)){case"G":if(!lp(r,a))throw new Error("unrecognized character "+o+" in "+r);i[i.length]={t:"G",v:"General"},a+=7;break;case'"':for(s="";(d=r.charCodeAt(++a))!==34&&a<r.length;)s+=String.fromCharCode(d);i[i.length]={t:"t",v:s},++a;break;case"\\":var p=r.charAt(++a),x=p==="("||p===")"?p:"t";i[i.length]={t:x,v:p},++a;break;case"_":i[i.length]={t:"t",v:" "},a+=2;break;case"@":i[i.length]={t:"T",v:e},++a;break;case"B":case"b":if(r.charAt(a+1)==="1"||r.charAt(a+1)==="2"){if(u==null&&(u=l0(e,t,r.charAt(a+1)==="2"),u==null))return"";i[i.length]={t:"X",v:r.substr(a,2)},c=o,a+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":o=o.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(e<0||u==null&&(u=l0(e,t),u==null))return"";for(s=o;++a<r.length&&r.charAt(a).toLowerCase()===o;)s+=o;o==="m"&&c.toLowerCase()==="h"&&(o="M"),o==="h"&&(o=g),i[i.length]={t:o,v:s},c=o;break;case"A":case"a":case"":var _={t:o,v:o};if(u==null&&(u=l0(e,t)),r.substr(a,3).toUpperCase()==="A/P"?(u!=null&&(_.v=u.H>=12?"P":"A"),_.t="T",g="h",a+=3):r.substr(a,5).toUpperCase()==="AM/PM"?(u!=null&&(_.v=u.H>=12?"PM":"AM"),_.t="T",a+=5,g="h"):r.substr(a,5).toUpperCase()==="/"?(u!=null&&(_.v=u.H>=12?"":""),_.t="T",a+=5,g="h"):(_.t="t",++a),u==null&&_.t==="T")return"";i[i.length]=_,c=o;break;case"[":for(s=o;r.charAt(a++)!=="]"&&a<r.length;)s+=r.charAt(a);if(s.slice(-1)!=="]")throw'unterminated "[" block: |'+s+"|";if(s.match(RA)){if(u==null&&(u=l0(e,t),u==null))return"";i[i.length]={t:"Z",v:s.toLowerCase()},c=s.charAt(1)}else s.indexOf("$")>-1&&(s=(s.match(/\$([^-\[\]]*)/)||[])[1]||"$",LA(r)||(i[i.length]={t:"t",v:s}));break;case".":if(u!=null){for(s=o;++a<r.length&&(o=r.charAt(a))==="0";)s+=o;i[i.length]={t:"s",v:s};break}case"0":case"#":for(s=o;++a<r.length&&"0#?.,E+-%".indexOf(o=r.charAt(a))>-1;)s+=o;i[i.length]={t:"n",v:s};break;case"?":for(s=o;r.charAt(++a)===o;)s+=o;i[i.length]={t:o,v:s},c=o;break;case"*":++a,(r.charAt(a)==" "||r.charAt(a)=="*")&&++a;break;case"(":case")":i[i.length]={t:n===1?"t":o,v:o},++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(s=o;a<r.length&&"0123456789".indexOf(r.charAt(++a))>-1;)s+=r.charAt(a);i[i.length]={t:"D",v:s};break;case" ":i[i.length]={t:o,v:o},++a;break;case"$":i[i.length]={t:"t",v:"$"},++a;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(o)===-1)throw new Error("unrecognized character "+o+" in "+r);i[i.length]={t:"t",v:o},++a;break}var E=0,P=0,L;for(a=i.length-1,c="t";a>=0;--a)switch(i[a].t){case"h":case"H":i[a].t=g,c="h",E<1&&(E=1);break;case"s":(L=i[a].v.match(/\.0+$/))&&(P=Math.max(P,L[0].length-1)),E<3&&(E=3);case"d":case"y":case"M":case"e":c=i[a].t;break;case"m":c==="s"&&(i[a].t="M",E<2&&(E=2));break;case"X":break;case"Z":E<1&&i[a].v.match(/[Hh]/)&&(E=1),E<2&&i[a].v.match(/[Mm]/)&&(E=2),E<3&&i[a].v.match(/[Ss]/)&&(E=3)}switch(E){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var M="",K;for(a=0;a<i.length;++a)switch(i[a].t){case"t":case"T":case" ":case"D":break;case"X":i[a].v="",i[a].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":i[a].v=lM(i[a].t.charCodeAt(0),i[a].v,u,P),i[a].t="t";break;case"n":case"?":for(K=a+1;i[K]!=null&&((o=i[K].t)==="?"||o==="D"||(o===" "||o==="t")&&i[K+1]!=null&&(i[K+1].t==="?"||i[K+1].t==="t"&&i[K+1].v==="/")||i[a].t==="("&&(o===" "||o==="n"||o===")")||o==="t"&&(i[K].v==="/"||i[K].v===" "&&i[K+1]!=null&&i[K+1].t=="?"));)i[a].v+=i[K].v,i[K]={v:"",t:";"},++K;M+=i[a].v,a=K-1;break;case"G":i[a].t="t",i[a].v=f1(e,t);break}var ie="",oe,N;if(M.length>0){M.charCodeAt(0)==40?(oe=e<0&&M.charCodeAt(0)===45?-e:e,N=Ja("n",M,oe)):(oe=e<0&&n>1?-e:e,N=Ja("n",M,oe),oe<0&&i[0]&&i[0].t=="t"&&(N=N.substr(1),i[0].v="-"+i[0].v)),K=N.length-1;var A=i.length;for(a=0;a<i.length;++a)if(i[a]!=null&&i[a].t!="t"&&i[a].v.indexOf(".")>-1){A=a;break}var k=i.length;if(A===i.length&&N.indexOf("E")===-1){for(a=i.length-1;a>=0;--a)i[a]==null||"n?".indexOf(i[a].t)===-1||(K>=i[a].v.length-1?(K-=i[a].v.length,i[a].v=N.substr(K+1,i[a].v.length)):K<0?i[a].v="":(i[a].v=N.substr(0,K+1),K=-1),i[a].t="t",k=a);K>=0&&k<i.length&&(i[k].v=N.substr(0,K+1)+i[k].v)}else if(A!==i.length&&N.indexOf("E")===-1){for(K=N.indexOf(".")-1,a=A;a>=0;--a)if(!(i[a]==null||"n?".indexOf(i[a].t)===-1)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")-1:i[a].v.length-1,ie=i[a].v.substr(l+1);l>=0;--l)K>=0&&(i[a].v.charAt(l)==="0"||i[a].v.charAt(l)==="#")&&(ie=N.charAt(K--)+ie);i[a].v=ie,i[a].t="t",k=a}for(K>=0&&k<i.length&&(i[k].v=N.substr(0,K+1)+i[k].v),K=N.indexOf(".")+1,a=A;a<i.length;++a)if(!(i[a]==null||"n?(".indexOf(i[a].t)===-1&&a!==A)){for(l=i[a].v.indexOf(".")>-1&&a===A?i[a].v.indexOf(".")+1:0,ie=i[a].v.substr(0,l);l<i[a].v.length;++l)K<N.length&&(ie+=N.charAt(K++));i[a].v=ie,i[a].t="t",k=a}}}for(a=0;a<i.length;++a)i[a]!=null&&"n?".indexOf(i[a].t)>-1&&(oe=n>1&&e<0&&a>0&&i[a-1].v==="-"?-e:e,i[a].v=Ja(i[a].t,i[a].v,oe),i[a].t="t");var V="";for(a=0;a!==i.length;++a)i[a]!=null&&(V+=i[a].v);return V}var Bw=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Vw(r,e){if(e==null)return!1;var t=parseFloat(e[2]);switch(e[1]){case"=":if(r==t)return!0;break;case">":if(r>t)return!0;break;case"<":if(r<t)return!0;break;case"<>":if(r!=t)return!0;break;case">=":if(r>=t)return!0;break;case"<=":if(r<=t)return!0;break}return!1}function xM(r,e){var t=yM(r),n=t.length,i=t[n-1].indexOf("@");if(n<4&&i>-1&&--n,t.length>4)throw new Error("cannot find right format for |"+t.join("|")+"|");if(typeof e!="number")return[4,t.length===4||i>-1?t[t.length-1]:"@"];switch(t.length){case 1:t=i>-1?["General","General","General",t[0]]:[t[0],t[0],t[0],"@"];break;case 2:t=i>-1?[t[0],t[0],t[0],t[1]]:[t[0],t[1],t[0],"@"];break;case 3:t=i>-1?[t[0],t[1],t[0],t[2]]:[t[0],t[1],t[2],"@"];break}var s=e>0?t[0]:e<0?t[1]:t[2];if(t[0].indexOf("[")===-1&&t[1].indexOf("[")===-1)return[n,s];if(t[0].match(/\[[=<>]/)!=null||t[1].match(/\[[=<>]/)!=null){var a=t[0].match(Bw),o=t[1].match(Bw);return Vw(e,a)?[n,t[0]]:Vw(e,o)?[n,t[1]]:[n,t[a!=null&&o!=null?2:1]]}return[n,s]}function hc(r,e,t){t==null&&(t={});var n="";switch(typeof r){case"string":r=="m/d/yy"&&t.dateNF?n=t.dateNF:n=r;break;case"number":r==14&&t.dateNF?n=t.dateNF:n=(t.table!=null?t.table:tn)[r],n==null&&(n=t.table&&t.table[Fw[r]]||tn[Fw[r]]),n==null&&(n=rM[r]||"General");break}if(lp(n,0))return f1(e,t);e instanceof Date&&(e=bA(e,t.date1904));var i=xM(n,e);if(lp(i[1]))return f1(e,t);if(e===!0)e="TRUE";else if(e===!1)e="FALSE";else if(e===""||e==null)return"";return wM(i[1],e,t,i[0])}function DA(r,e){if(typeof e!="number"){e=+e||-1;for(var t=0;t<392;++t){if(tn[t]==null){e<0&&(e=t);continue}if(tn[t]==r){e=t;break}}e<0&&(e=391)}return tn[e]=r,e}function hm(r){for(var e=0;e!=392;++e)r[e]!==void 0&&DA(r[e],e)}function fm(){tn=tM()}var FA=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function EM(r){var e=typeof r=="number"?tn[r]:r;return e=e.replace(FA,"(\\d+)"),new RegExp("^"+e+"$")}function TM(r,e,t){var n=-1,i=-1,s=-1,a=-1,o=-1,c=-1;(e.match(FA)||[]).forEach(function(d,g){var p=parseInt(t[g+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":s=p;break;case"h":a=p;break;case"s":c=p;break;case"m":a>=0?o=p:i=p;break}}),c>=0&&o==-1&&i>=0&&(o=i,i=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(i>=1?i:1)).slice(-2)+"-"+("00"+(s>=1?s:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var l=("00"+(a>=0?a:0)).slice(-2)+":"+("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return a==-1&&o==-1&&c==-1?u:n==-1&&i==-1&&s==-1?l:u+"T"+l}var bM=function(){var r={};r.version="1.2.0";function e(){for(var N=0,A=new Array(256),k=0;k!=256;++k)N=k,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,N=N&1?-306674912^N>>>1:N>>>1,A[k]=N;return typeof Int32Array<"u"?new Int32Array(A):A}var t=e();function n(N){var A=0,k=0,V=0,b=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(V=0;V!=256;++V)b[V]=N[V];for(V=0;V!=256;++V)for(k=N[V],A=256+V;A<4096;A+=256)k=b[A]=k>>>8^N[k&255];var S=[];for(V=1;V!=16;++V)S[V-1]=typeof Int32Array<"u"?b.subarray(V*256,V*256+256):b.slice(V*256,V*256+256);return S}var i=n(t),s=i[0],a=i[1],o=i[2],c=i[3],u=i[4],l=i[5],d=i[6],g=i[7],p=i[8],x=i[9],_=i[10],E=i[11],P=i[12],L=i[13],M=i[14];function K(N,A){for(var k=A^-1,V=0,b=N.length;V<b;)k=k>>>8^t[(k^N.charCodeAt(V++))&255];return~k}function ie(N,A){for(var k=A^-1,V=N.length-15,b=0;b<V;)k=M[N[b++]^k&255]^L[N[b++]^k>>8&255]^P[N[b++]^k>>16&255]^E[N[b++]^k>>>24]^_[N[b++]]^x[N[b++]]^p[N[b++]]^g[N[b++]]^d[N[b++]]^l[N[b++]]^u[N[b++]]^c[N[b++]]^o[N[b++]]^a[N[b++]]^s[N[b++]]^t[N[b++]];for(V+=15;b<V;)k=k>>>8^t[(k^N[b++])&255];return~k}function oe(N,A){for(var k=A^-1,V=0,b=N.length,S=0,R=0;V<b;)S=N.charCodeAt(V++),S<128?k=k>>>8^t[(k^S)&255]:S<2048?(k=k>>>8^t[(k^(192|S>>6&31))&255],k=k>>>8^t[(k^(128|S&63))&255]):S>=55296&&S<57344?(S=(S&1023)+64,R=N.charCodeAt(V++)&1023,k=k>>>8^t[(k^(240|S>>8&7))&255],k=k>>>8^t[(k^(128|S>>2&63))&255],k=k>>>8^t[(k^(128|R>>6&15|(S&3)<<4))&255],k=k>>>8^t[(k^(128|R&63))&255]):(k=k>>>8^t[(k^(224|S>>12&15))&255],k=k>>>8^t[(k^(128|S>>6&63))&255],k=k>>>8^t[(k^(128|S&63))&255]);return~k}return r.table=t,r.bstr=K,r.buf=ie,r.str=oe,r}(),Ir=function(){var e={};e.version="1.2.1";function t(j,ee){for(var Y=j.split("/"),X=ee.split("/"),Z=0,te=0,ye=Math.min(Y.length,X.length);Z<ye;++Z){if(te=Y[Z].length-X[Z].length)return te;if(Y[Z]!=X[Z])return Y[Z]<X[Z]?-1:1}return Y.length-X.length}function n(j){if(j.charAt(j.length-1)=="/")return j.slice(0,-1).indexOf("/")===-1?j:n(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(0,ee+1)}function i(j){if(j.charAt(j.length-1)=="/")return i(j.slice(0,-1));var ee=j.lastIndexOf("/");return ee===-1?j:j.slice(ee+1)}function s(j,ee){typeof ee=="string"&&(ee=new Date(ee));var Y=ee.getHours();Y=Y<<6|ee.getMinutes(),Y=Y<<5|ee.getSeconds()>>>1,j.write_shift(2,Y);var X=ee.getFullYear()-1980;X=X<<4|ee.getMonth()+1,X=X<<5|ee.getDate(),j.write_shift(2,X)}function a(j){var ee=j.read_shift(2)&65535,Y=j.read_shift(2)&65535,X=new Date,Z=Y&31;Y>>>=5;var te=Y&15;Y>>>=4,X.setMilliseconds(0),X.setFullYear(Y+1980),X.setMonth(te-1),X.setDate(Z);var ye=ee&31;ee>>>=5;var ke=ee&63;return ee>>>=6,X.setHours(ee),X.setMinutes(ke),X.setSeconds(ye<<1),X}function o(j){cs(j,0);for(var ee={},Y=0;j.l<=j.length-4;){var X=j.read_shift(2),Z=j.read_shift(2),te=j.l+Z,ye={};switch(X){case 21589:Y=j.read_shift(1),Y&1&&(ye.mtime=j.read_shift(4)),Z>5&&(Y&2&&(ye.atime=j.read_shift(4)),Y&4&&(ye.ctime=j.read_shift(4))),ye.mtime&&(ye.mt=new Date(ye.mtime*1e3));break}j.l=te,ee[X]=ye}return ee}var c;function u(){return c||(c={})}function l(j,ee){if(j[0]==80&&j[1]==75)return Tr(j,ee);if((j[0]|32)==109&&(j[1]|32)==105)return vi(j,ee);if(j.length<512)throw new Error("CFB file size "+j.length+" < 512");var Y=3,X=512,Z=0,te=0,ye=0,ke=0,we=0,Te=[],Pe=j.slice(0,512);cs(Pe,0);var Ke=d(Pe);switch(Y=Ke[0],Y){case 3:X=512;break;case 4:X=4096;break;case 0:if(Ke[1]==0)return Tr(j,ee);default:throw new Error("Major Version: Expected 3 or 4 saw "+Y)}X!==512&&(Pe=j.slice(0,X),cs(Pe,28));var it=j.slice(0,X);g(Pe,Y);var mt=Pe.read_shift(4,"i");if(Y===3&&mt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mt);Pe.l+=4,ye=Pe.read_shift(4,"i"),Pe.l+=4,Pe.chk("00100000","Mini Stream Cutoff Size: "),ke=Pe.read_shift(4,"i"),Z=Pe.read_shift(4,"i"),we=Pe.read_shift(4,"i"),te=Pe.read_shift(4,"i");for(var et=-1,lt=0;lt<109&&(et=Pe.read_shift(4,"i"),!(et<0));++lt)Te[lt]=et;var Lt=p(j,X);E(we,te,Lt,X,Te);var rr=L(Lt,ye,Te,X);rr[ye].name="!Directory",Z>0&&ke!==R&&(rr[ke].name="!MiniFAT"),rr[Te[0]].name="!FAT",rr.fat_addrs=Te,rr.ssz=X;var nr={},br=[],_i=[],Cs=[];M(ye,rr,Lt,br,Z,nr,_i,ke),x(_i,Cs,br),br.shift();var Zi={FileIndex:_i,FullPaths:Cs};return ee&&ee.raw&&(Zi.raw={header:it,sectors:Lt}),Zi}function d(j){if(j[j.l]==80&&j[j.l+1]==75)return[0,0];j.chk(se,"Header Signature: "),j.l+=16;var ee=j.read_shift(2,"u");return[j.read_shift(2,"u"),ee]}function g(j,ee){var Y=9;switch(j.l+=2,Y=j.read_shift(2)){case 9:if(ee!=3)throw new Error("Sector Shift: Expected 9 saw "+Y);break;case 12:if(ee!=4)throw new Error("Sector Shift: Expected 12 saw "+Y);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Y)}j.chk("0600","Mini Sector Shift: "),j.chk("000000000000","Reserved: ")}function p(j,ee){for(var Y=Math.ceil(j.length/ee)-1,X=[],Z=1;Z<Y;++Z)X[Z-1]=j.slice(Z*ee,(Z+1)*ee);return X[Y-1]=j.slice(Y*ee),X}function x(j,ee,Y){for(var X=0,Z=0,te=0,ye=0,ke=0,we=Y.length,Te=[],Pe=[];X<we;++X)Te[X]=Pe[X]=X,ee[X]=Y[X];for(;ke<Pe.length;++ke)X=Pe[ke],Z=j[X].L,te=j[X].R,ye=j[X].C,Te[X]===X&&(Z!==-1&&Te[Z]!==Z&&(Te[X]=Te[Z]),te!==-1&&Te[te]!==te&&(Te[X]=Te[te])),ye!==-1&&(Te[ye]=X),Z!==-1&&X!=Te[X]&&(Te[Z]=Te[X],Pe.lastIndexOf(Z)<ke&&Pe.push(Z)),te!==-1&&X!=Te[X]&&(Te[te]=Te[X],Pe.lastIndexOf(te)<ke&&Pe.push(te));for(X=1;X<we;++X)Te[X]===X&&(te!==-1&&Te[te]!==te?Te[X]=Te[te]:Z!==-1&&Te[Z]!==Z&&(Te[X]=Te[Z]));for(X=1;X<we;++X)if(j[X].type!==0){if(ke=X,ke!=Te[ke])do ke=Te[ke],ee[X]=ee[ke]+"/"+ee[X];while(ke!==0&&Te[ke]!==-1&&ke!=Te[ke]);Te[X]=-1}for(ee[0]+="/",X=1;X<we;++X)j[X].type!==2&&(ee[X]+="/")}function _(j,ee,Y){for(var X=j.start,Z=j.size,te=[],ye=X;Y&&Z>0&&ye>=0;)te.push(ee.slice(ye*S,ye*S+S)),Z-=S,ye=Xc(Y,ye*4);return te.length===0?Me(0):Qn(te).slice(0,j.size)}function E(j,ee,Y,X,Z){var te=R;if(j===R){if(ee!==0)throw new Error("DIFAT chain shorter than expected")}else if(j!==-1){var ye=Y[j],ke=(X>>>2)-1;if(!ye)return;for(var we=0;we<ke&&(te=Xc(ye,we*4))!==R;++we)Z.push(te);E(Xc(ye,X-4),ee-1,Y,X,Z)}}function P(j,ee,Y,X,Z){var te=[],ye=[];Z||(Z=[]);var ke=X-1,we=0,Te=0;for(we=ee;we>=0;){Z[we]=!0,te[te.length]=we,ye.push(j[we]);var Pe=Y[Math.floor(we*4/X)];if(Te=we*4&ke,X<4+Te)throw new Error("FAT boundary crossed: "+we+" 4 "+X);if(!j[Pe])break;we=Xc(j[Pe],Te)}return{nodes:te,data:Gw([ye])}}function L(j,ee,Y,X){var Z=j.length,te=[],ye=[],ke=[],we=[],Te=X-1,Pe=0,Ke=0,it=0,mt=0;for(Pe=0;Pe<Z;++Pe)if(ke=[],it=Pe+ee,it>=Z&&(it-=Z),!ye[it]){we=[];var et=[];for(Ke=it;Ke>=0;){et[Ke]=!0,ye[Ke]=!0,ke[ke.length]=Ke,we.push(j[Ke]);var lt=Y[Math.floor(Ke*4/X)];if(mt=Ke*4&Te,X<4+mt)throw new Error("FAT boundary crossed: "+Ke+" 4 "+X);if(!j[lt]||(Ke=Xc(j[lt],mt),et[Ke]))break}te[it]={nodes:ke,data:Gw([we])}}return te}function M(j,ee,Y,X,Z,te,ye,ke){for(var we=0,Te=X.length?2:0,Pe=ee[j].data,Ke=0,it=0,mt;Ke<Pe.length;Ke+=128){var et=Pe.slice(Ke,Ke+128);cs(et,64),it=et.read_shift(2),mt=Cv(et,0,it-Te),X.push(mt);var lt={name:mt,type:et.read_shift(1),color:et.read_shift(1),L:et.read_shift(4,"i"),R:et.read_shift(4,"i"),C:et.read_shift(4,"i"),clsid:et.read_shift(16),state:et.read_shift(4,"i"),start:0,size:0},Lt=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);Lt!==0&&(lt.ct=K(et,et.l-8));var rr=et.read_shift(2)+et.read_shift(2)+et.read_shift(2)+et.read_shift(2);rr!==0&&(lt.mt=K(et,et.l-8)),lt.start=et.read_shift(4,"i"),lt.size=et.read_shift(4,"i"),lt.size<0&&lt.start<0&&(lt.size=lt.type=0,lt.start=R,lt.name=""),lt.type===5?(we=lt.start,Z>0&&we!==R&&(ee[we].name="!StreamData")):lt.size>=4096?(lt.storage="fat",ee[lt.start]===void 0&&(ee[lt.start]=P(Y,lt.start,ee.fat_addrs,ee.ssz)),ee[lt.start].name=lt.name,lt.content=ee[lt.start].data.slice(0,lt.size)):(lt.storage="minifat",lt.size<0?lt.size=0:we!==R&&lt.start!==R&&ee[we]&&(lt.content=_(lt,ee[we].data,(ee[ke]||{}).data))),lt.content&&cs(lt.content,0),te[mt]=lt,ye.push(lt)}}function K(j,ee){return new Date((hs(j,ee+4)/1e7*Math.pow(2,32)+hs(j,ee)/1e7-11644473600)*1e3)}function ie(j,ee){return u(),l(c.readFileSync(j),ee)}function oe(j,ee){var Y=ee&&ee.type;switch(Y||lr&&Buffer.isBuffer(j)&&(Y="buffer"),Y||"base64"){case"file":return ie(j,ee);case"base64":return l(Hs(io(j)),ee);case"binary":return l(Hs(j),ee)}return l(j,ee)}function N(j,ee){var Y=ee||{},X=Y.root||"Root Entry";if(j.FullPaths||(j.FullPaths=[]),j.FileIndex||(j.FileIndex=[]),j.FullPaths.length!==j.FileIndex.length)throw new Error("inconsistent CFB structure");j.FullPaths.length===0&&(j.FullPaths[0]=X+"/",j.FileIndex[0]={name:X,type:5}),Y.CLSID&&(j.FileIndex[0].clsid=Y.CLSID),A(j)}function A(j){var ee="Sh33tJ5";if(!Ir.find(j,"/"+ee)){var Y=Me(4);Y[0]=55,Y[1]=Y[3]=50,Y[2]=54,j.FileIndex.push({name:ee,type:2,content:Y,size:4,L:69,R:69,C:69}),j.FullPaths.push(j.FullPaths[0]+ee),k(j)}}function k(j,ee){N(j);for(var Y=!1,X=!1,Z=j.FullPaths.length-1;Z>=0;--Z){var te=j.FileIndex[Z];switch(te.type){case 0:X?Y=!0:(j.FileIndex.pop(),j.FullPaths.pop());break;case 1:case 2:case 5:X=!0,isNaN(te.R*te.L*te.C)&&(Y=!0),te.R>-1&&te.L>-1&&te.R==te.L&&(Y=!0);break;default:Y=!0;break}}if(!(!Y&&!ee)){var ye=new Date(1987,1,19),ke=0,we=Object.create?Object.create(null):{},Te=[];for(Z=0;Z<j.FullPaths.length;++Z)we[j.FullPaths[Z]]=!0,j.FileIndex[Z].type!==0&&Te.push([j.FullPaths[Z],j.FileIndex[Z]]);for(Z=0;Z<Te.length;++Z){var Pe=n(Te[Z][0]);X=we[Pe],X||(Te.push([Pe,{name:i(Pe).replace("/",""),type:1,clsid:Ee,ct:ye,mt:ye,content:null}]),we[Pe]=!0)}for(Te.sort(function(mt,et){return t(mt[0],et[0])}),j.FullPaths=[],j.FileIndex=[],Z=0;Z<Te.length;++Z)j.FullPaths[Z]=Te[Z][0],j.FileIndex[Z]=Te[Z][1];for(Z=0;Z<Te.length;++Z){var Ke=j.FileIndex[Z],it=j.FullPaths[Z];if(Ke.name=i(it).replace("/",""),Ke.L=Ke.R=Ke.C=-(Ke.color=1),Ke.size=Ke.content?Ke.content.length:0,Ke.start=0,Ke.clsid=Ke.clsid||Ee,Z===0)Ke.C=Te.length>1?1:-1,Ke.size=0,Ke.type=5;else if(it.slice(-1)=="/"){for(ke=Z+1;ke<Te.length&&n(j.FullPaths[ke])!=it;++ke);for(Ke.C=ke>=Te.length?-1:ke,ke=Z+1;ke<Te.length&&n(j.FullPaths[ke])!=n(it);++ke);Ke.R=ke>=Te.length?-1:ke,Ke.type=1}else n(j.FullPaths[Z+1]||"")==n(it)&&(Ke.R=Z+1),Ke.type=2}}}function V(j,ee){var Y=ee||{};if(Y.fileType=="mad")return wt(j,Y);switch(k(j),Y.fileType){case"zip":return gi(j,Y)}var X=function(mt){for(var et=0,lt=0,Lt=0;Lt<mt.FileIndex.length;++Lt){var rr=mt.FileIndex[Lt];if(rr.content){var nr=rr.content.length;nr>0&&(nr<4096?et+=nr+63>>6:lt+=nr+511>>9)}}for(var br=mt.FullPaths.length+3>>2,_i=et+7>>3,Cs=et+127>>7,Zi=_i+lt+br+Cs,Fi=Zi+127>>7,es=Fi<=109?0:Math.ceil((Fi-109)/127);Zi+Fi+es+127>>7>Fi;)es=++Fi<=109?0:Math.ceil((Fi-109)/127);var zn=[1,es,Fi,Cs,br,lt,et,0];return mt.FileIndex[0].size=et<<6,zn[7]=(mt.FileIndex[0].start=zn[0]+zn[1]+zn[2]+zn[3]+zn[4]+zn[5])+(zn[6]+7>>3),zn}(j),Z=Me(X[7]<<9),te=0,ye=0;{for(te=0;te<8;++te)Z.write_shift(1,ve[te]);for(te=0;te<8;++te)Z.write_shift(2,0);for(Z.write_shift(2,62),Z.write_shift(2,3),Z.write_shift(2,65534),Z.write_shift(2,9),Z.write_shift(2,6),te=0;te<3;++te)Z.write_shift(2,0);for(Z.write_shift(4,0),Z.write_shift(4,X[2]),Z.write_shift(4,X[0]+X[1]+X[2]+X[3]-1),Z.write_shift(4,0),Z.write_shift(4,4096),Z.write_shift(4,X[3]?X[0]+X[1]+X[2]-1:R),Z.write_shift(4,X[3]),Z.write_shift(-4,X[1]?X[0]-1:R),Z.write_shift(4,X[1]),te=0;te<109;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1)}if(X[1])for(ye=0;ye<X[1];++ye){for(;te<236+ye*127;++te)Z.write_shift(-4,te<X[2]?X[1]+te:-1);Z.write_shift(-4,ye===X[1]-1?R:ye+1)}var ke=function(mt){for(ye+=mt;te<ye-1;++te)Z.write_shift(-4,te+1);mt&&(++te,Z.write_shift(-4,R))};for(ye=te=0,ye+=X[1];te<ye;++te)Z.write_shift(-4,Ne.DIFSECT);for(ye+=X[2];te<ye;++te)Z.write_shift(-4,Ne.FATSECT);ke(X[3]),ke(X[4]);for(var we=0,Te=0,Pe=j.FileIndex[0];we<j.FileIndex.length;++we)Pe=j.FileIndex[we],Pe.content&&(Te=Pe.content.length,!(Te<4096)&&(Pe.start=ye,ke(Te+511>>9)));for(ke(X[6]+7>>3);Z.l&511;)Z.write_shift(-4,Ne.ENDOFCHAIN);for(ye=te=0,we=0;we<j.FileIndex.length;++we)Pe=j.FileIndex[we],Pe.content&&(Te=Pe.content.length,!(!Te||Te>=4096)&&(Pe.start=ye,ke(Te+63>>6)));for(;Z.l&511;)Z.write_shift(-4,Ne.ENDOFCHAIN);for(te=0;te<X[4]<<2;++te){var Ke=j.FullPaths[te];if(!Ke||Ke.length===0){for(we=0;we<17;++we)Z.write_shift(4,0);for(we=0;we<3;++we)Z.write_shift(4,-1);for(we=0;we<12;++we)Z.write_shift(4,0);continue}Pe=j.FileIndex[te],te===0&&(Pe.start=Pe.size?Pe.start-1:R);var it=te===0&&Y.root||Pe.name;if(Te=2*(it.length+1),Z.write_shift(64,it,"utf16le"),Z.write_shift(2,Te),Z.write_shift(1,Pe.type),Z.write_shift(1,Pe.color),Z.write_shift(-4,Pe.L),Z.write_shift(-4,Pe.R),Z.write_shift(-4,Pe.C),Pe.clsid)Z.write_shift(16,Pe.clsid,"hex");else for(we=0;we<4;++we)Z.write_shift(4,0);Z.write_shift(4,Pe.state||0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(4,Pe.start),Z.write_shift(4,Pe.size),Z.write_shift(4,0)}for(te=1;te<j.FileIndex.length;++te)if(Pe=j.FileIndex[te],Pe.size>=4096)if(Z.l=Pe.start+1<<9,lr&&Buffer.isBuffer(Pe.content))Pe.content.copy(Z,Z.l,0,Pe.size),Z.l+=Pe.size+511&-512;else{for(we=0;we<Pe.size;++we)Z.write_shift(1,Pe.content[we]);for(;we&511;++we)Z.write_shift(1,0)}for(te=1;te<j.FileIndex.length;++te)if(Pe=j.FileIndex[te],Pe.size>0&&Pe.size<4096)if(lr&&Buffer.isBuffer(Pe.content))Pe.content.copy(Z,Z.l,0,Pe.size),Z.l+=Pe.size+63&-64;else{for(we=0;we<Pe.size;++we)Z.write_shift(1,Pe.content[we]);for(;we&63;++we)Z.write_shift(1,0)}if(lr)Z.l=Z.length;else for(;Z.l<Z.length;)Z.write_shift(1,0);return Z}function b(j,ee){var Y=j.FullPaths.map(function(we){return we.toUpperCase()}),X=Y.map(function(we){var Te=we.split("/");return Te[Te.length-(we.slice(-1)=="/"?2:1)]}),Z=!1;ee.charCodeAt(0)===47?(Z=!0,ee=Y[0].slice(0,-1)+ee):Z=ee.indexOf("/")!==-1;var te=ee.toUpperCase(),ye=Z===!0?Y.indexOf(te):X.indexOf(te);if(ye!==-1)return j.FileIndex[ye];var ke=!te.match(u0);for(te=te.replace(yf,""),ke&&(te=te.replace(u0,"!")),ye=0;ye<Y.length;++ye)if((ke?Y[ye].replace(u0,"!"):Y[ye]).replace(yf,"")==te||(ke?X[ye].replace(u0,"!"):X[ye]).replace(yf,"")==te)return j.FileIndex[ye];return null}var S=64,R=-2,se="d0cf11e0a1b11ae1",ve=[208,207,17,224,161,177,26,225],Ee="00000000000000000000000000000000",Ne={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:se,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Ee,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function _e(j,ee,Y){u();var X=V(j,Y);c.writeFileSync(ee,X)}function Ce(j){for(var ee=new Array(j.length),Y=0;Y<j.length;++Y)ee[Y]=String.fromCharCode(j[Y]);return ee.join("")}function Fe(j,ee){var Y=V(j,ee);switch(ee&&ee.type||"buffer"){case"file":return u(),c.writeFileSync(ee.filename,Y),Y;case"binary":return typeof Y=="string"?Y:Ce(Y);case"base64":return Xf(typeof Y=="string"?Y:Ce(Y));case"buffer":if(lr)return Buffer.isBuffer(Y)?Y:ho(Y);case"array":return typeof Y=="string"?Hs(Y):Y}return Y}var nt;function T(j){try{var ee=j.InflateRaw,Y=new ee;if(Y._processChunk(new Uint8Array([3,0]),Y._finishFlushFlag),Y.bytesRead)nt=j;else throw new Error("zlib does not expose bytesRead")}catch(X){console.error("cannot use native zlib: "+(X.message||X))}}function D(j,ee){if(!nt)return Kt(j,ee);var Y=nt.InflateRaw,X=new Y,Z=X._processChunk(j.slice(j.l),X._finishFlushFlag);return j.l+=X.bytesRead,Z}function B(j){return nt?nt.deflateRawSync(j):qt(j)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],J=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function le(j){var ee=(j<<1|j<<11)&139536|(j<<5|j<<15)&558144;return(ee>>16|ee>>8|ee)&255}for(var ue=typeof Uint8Array<"u",xe=ue?new Uint8Array(256):[],Be=0;Be<256;++Be)xe[Be]=le(Be);function ze(j,ee){var Y=xe[j&255];return ee<=8?Y>>>8-ee:(Y=Y<<8|xe[j>>8&255],ee<=16?Y>>>16-ee:(Y=Y<<8|xe[j>>16&255],Y>>>24-ee))}function Ze(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=6?0:j[X+1]<<8))>>>Y&3}function at(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=5?0:j[X+1]<<8))>>>Y&7}function Re(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=4?0:j[X+1]<<8))>>>Y&15}function ne(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=3?0:j[X+1]<<8))>>>Y&31}function We(j,ee){var Y=ee&7,X=ee>>>3;return(j[X]|(Y<=1?0:j[X+1]<<8))>>>Y&127}function _t(j,ee,Y){var X=ee&7,Z=ee>>>3,te=(1<<Y)-1,ye=j[Z]>>>X;return Y<8-X||(ye|=j[Z+1]<<8-X,Y<16-X)||(ye|=j[Z+2]<<16-X,Y<24-X)||(ye|=j[Z+3]<<24-X),ye&te}function $e(j,ee,Y){var X=ee&7,Z=ee>>>3;return X<=5?j[Z]|=(Y&7)<<X:(j[Z]|=Y<<X&255,j[Z+1]=(Y&7)>>8-X),ee+3}function rt(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y=(Y&1)<<X,j[Z]|=Y,ee+1}function ct(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y,ee+8}function ut(j,ee,Y){var X=ee&7,Z=ee>>>3;return Y<<=X,j[Z]|=Y&255,Y>>>=8,j[Z+1]=Y&255,j[Z+2]=Y>>>8,ee+16}function Tt(j,ee){var Y=j.length,X=2*Y>ee?2*Y:ee+5,Z=0;if(Y>=ee)return j;if(lr){var te=Rw(X);if(j.copy)j.copy(te);else for(;Z<j.length;++Z)te[Z]=j[Z];return te}else if(ue){var ye=new Uint8Array(X);if(ye.set)ye.set(j);else for(;Z<Y;++Z)ye[Z]=j[Z];return ye}return j.length=X,j}function At(j){for(var ee=new Array(j),Y=0;Y<j;++Y)ee[Y]=0;return ee}function Ft(j,ee,Y){var X=1,Z=0,te=0,ye=0,ke=0,we=j.length,Te=ue?new Uint16Array(32):At(32);for(te=0;te<32;++te)Te[te]=0;for(te=we;te<Y;++te)j[te]=0;we=j.length;var Pe=ue?new Uint16Array(we):At(we);for(te=0;te<we;++te)Te[Z=j[te]]++,X<Z&&(X=Z),Pe[te]=0;for(Te[0]=0,te=1;te<=X;++te)Te[te+16]=ke=ke+Te[te-1]<<1;for(te=0;te<we;++te)ke=j[te],ke!=0&&(Pe[te]=Te[ke+16]++);var Ke=0;for(te=0;te<we;++te)if(Ke=j[te],Ke!=0)for(ke=ze(Pe[te],X)>>X-Ke,ye=(1<<X+4-Ke)-1;ye>=0;--ye)ee[ke|ye<<Ke]=Ke&15|te<<4;return X}var It=ue?new Uint16Array(512):At(512),Ct=ue?new Uint16Array(32):At(32);if(!ue){for(var Ht=0;Ht<512;++Ht)It[Ht]=0;for(Ht=0;Ht<32;++Ht)Ct[Ht]=0}(function(){for(var j=[],ee=0;ee<32;ee++)j.push(5);Ft(j,Ct,32);var Y=[];for(ee=0;ee<=143;ee++)Y.push(8);for(;ee<=255;ee++)Y.push(9);for(;ee<=279;ee++)Y.push(7);for(;ee<=287;ee++)Y.push(8);Ft(Y,It,288)})();var kt=function(){for(var ee=ue?new Uint8Array(32768):[],Y=0,X=0;Y<ae.length-1;++Y)for(;X<ae[Y+1];++X)ee[X]=Y;for(;X<32768;++X)ee[X]=29;var Z=ue?new Uint8Array(259):[];for(Y=0,X=0;Y<J.length-1;++Y)for(;X<J[Y+1];++X)Z[X]=Y;function te(ke,we){for(var Te=0;Te<ke.length;){var Pe=Math.min(65535,ke.length-Te),Ke=Te+Pe==ke.length;for(we.write_shift(1,+Ke),we.write_shift(2,Pe),we.write_shift(2,~Pe&65535);Pe-- >0;)we[we.l++]=ke[Te++]}return we.l}function ye(ke,we){for(var Te=0,Pe=0,Ke=ue?new Uint16Array(32768):[];Pe<ke.length;){var it=Math.min(65535,ke.length-Pe);if(it<10){for(Te=$e(we,Te,+(Pe+it==ke.length)),Te&7&&(Te+=8-(Te&7)),we.l=Te/8|0,we.write_shift(2,it),we.write_shift(2,~it&65535);it-- >0;)we[we.l++]=ke[Pe++];Te=we.l*8;continue}Te=$e(we,Te,+(Pe+it==ke.length)+2);for(var mt=0;it-- >0;){var et=ke[Pe];mt=(mt<<5^et)&32767;var lt=-1,Lt=0;if((lt=Ke[mt])&&(lt|=Pe&-32768,lt>Pe&&(lt-=32768),lt<Pe))for(;ke[lt+Lt]==ke[Pe+Lt]&&Lt<250;)++Lt;if(Lt>2){et=Z[Lt],et<=22?Te=ct(we,Te,xe[et+1]>>1)-1:(ct(we,Te,3),Te+=5,ct(we,Te,xe[et-23]>>5),Te+=3);var rr=et<8?0:et-4>>2;rr>0&&(ut(we,Te,Lt-J[et]),Te+=rr),et=ee[Pe-lt],Te=ct(we,Te,xe[et]>>3),Te-=3;var nr=et<4?0:et-2>>1;nr>0&&(ut(we,Te,Pe-lt-ae[et]),Te+=nr);for(var br=0;br<Lt;++br)Ke[mt]=Pe&32767,mt=(mt<<5^ke[Pe])&32767,++Pe;it-=Lt-1}else et<=143?et=et+48:Te=rt(we,Te,1),Te=ct(we,Te,xe[et]),Ke[mt]=Pe&32767,++Pe}Te=ct(we,Te,0)-1}return we.l=(Te+7)/8|0,we.l}return function(we,Te){return we.length<8?te(we,Te):ye(we,Te)}}();function qt(j){var ee=Me(50+Math.floor(j.length*1.1)),Y=kt(j,ee);return ee.slice(0,Y)}var pt=ue?new Uint16Array(32768):At(32768),Dr=ue?new Uint16Array(32768):At(32768),Gt=ue?new Uint16Array(128):At(128),qn=1,tr=1;function Er(j,ee){var Y=ne(j,ee)+257;ee+=5;var X=ne(j,ee)+1;ee+=5;var Z=Re(j,ee)+4;ee+=4;for(var te=0,ye=ue?new Uint8Array(19):At(19),ke=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],we=1,Te=ue?new Uint8Array(8):At(8),Pe=ue?new Uint8Array(8):At(8),Ke=ye.length,it=0;it<Z;++it)ye[U[it]]=te=at(j,ee),we<te&&(we=te),Te[te]++,ee+=3;var mt=0;for(Te[0]=0,it=1;it<=we;++it)Pe[it]=mt=mt+Te[it-1]<<1;for(it=0;it<Ke;++it)(mt=ye[it])!=0&&(ke[it]=Pe[mt]++);var et=0;for(it=0;it<Ke;++it)if(et=ye[it],et!=0){mt=xe[ke[it]]>>8-et;for(var lt=(1<<7-et)-1;lt>=0;--lt)Gt[mt|lt<<et]=et&7|it<<3}var Lt=[];for(we=1;Lt.length<Y+X;)switch(mt=Gt[We(j,ee)],ee+=mt&7,mt>>>=3){case 16:for(te=3+Ze(j,ee),ee+=2,mt=Lt[Lt.length-1];te-- >0;)Lt.push(mt);break;case 17:for(te=3+at(j,ee),ee+=3;te-- >0;)Lt.push(0);break;case 18:for(te=11+We(j,ee),ee+=7;te-- >0;)Lt.push(0);break;default:Lt.push(mt),we<mt&&(we=mt);break}var rr=Lt.slice(0,Y),nr=Lt.slice(Y);for(it=Y;it<286;++it)rr[it]=0;for(it=X;it<30;++it)nr[it]=0;return qn=Ft(rr,pt,286),tr=Ft(nr,Dr,30),ee}function Li(j,ee){if(j[0]==3&&!(j[1]&3))return[bu(ee),2];for(var Y=0,X=0,Z=Rw(ee||1<<18),te=0,ye=Z.length>>>0,ke=0,we=0;!(X&1);){if(X=at(j,Y),Y+=3,X>>>1)X>>1==1?(ke=9,we=5):(Y=Er(j,Y),ke=qn,we=tr);else{Y&7&&(Y+=8-(Y&7));var Te=j[Y>>>3]|j[(Y>>>3)+1]<<8;if(Y+=32,Te>0)for(!ee&&ye<te+Te&&(Z=Tt(Z,te+Te),ye=Z.length);Te-- >0;)Z[te++]=j[Y>>>3],Y+=8;continue}for(;;){!ee&&ye<te+32767&&(Z=Tt(Z,te+32767),ye=Z.length);var Pe=_t(j,Y,ke),Ke=X>>>1==1?It[Pe]:pt[Pe];if(Y+=Ke&15,Ke>>>=4,!(Ke>>>8&255))Z[te++]=Ke;else{if(Ke==256)break;Ke-=257;var it=Ke<8?0:Ke-4>>2;it>5&&(it=0);var mt=te+J[Ke];it>0&&(mt+=_t(j,Y,it),Y+=it),Pe=_t(j,Y,we),Ke=X>>>1==1?Ct[Pe]:Dr[Pe],Y+=Ke&15,Ke>>>=4;var et=Ke<4?0:Ke-2>>1,lt=ae[Ke];for(et>0&&(lt+=_t(j,Y,et),Y+=et),!ee&&ye<mt&&(Z=Tt(Z,mt+100),ye=Z.length);te<mt;)Z[te]=Z[te-lt],++te}}}return ee?[Z,Y+7>>>3]:[Z.slice(0,te),Y+7>>>3]}function Kt(j,ee){var Y=j.slice(j.l||0),X=Li(Y,ee);return j.l+=X[1],X[0]}function Qi(j,ee){if(j)typeof console<"u"&&console.error(ee);else throw new Error(ee)}function Tr(j,ee){var Y=j;cs(Y,0);var X=[],Z=[],te={FileIndex:X,FullPaths:Z};N(te,{root:ee.root});for(var ye=Y.length-4;(Y[ye]!=80||Y[ye+1]!=75||Y[ye+2]!=5||Y[ye+3]!=6)&&ye>=0;)--ye;Y.l=ye+4,Y.l+=4;var ke=Y.read_shift(2);Y.l+=6;var we=Y.read_shift(4);for(Y.l=we,ye=0;ye<ke;++ye){Y.l+=20;var Te=Y.read_shift(4),Pe=Y.read_shift(4),Ke=Y.read_shift(2),it=Y.read_shift(2),mt=Y.read_shift(2);Y.l+=8;var et=Y.read_shift(4),lt=o(Y.slice(Y.l+Ke,Y.l+Ke+it));Y.l+=Ke+it+mt;var Lt=Y.l;Y.l=et+4,bn(Y,Te,Pe,te,lt),Y.l=Lt}return te}function bn(j,ee,Y,X,Z){j.l+=2;var te=j.read_shift(2),ye=j.read_shift(2),ke=a(j);if(te&8257)throw new Error("Unsupported ZIP encryption");for(var we=j.read_shift(4),Te=j.read_shift(4),Pe=j.read_shift(4),Ke=j.read_shift(2),it=j.read_shift(2),mt="",et=0;et<Ke;++et)mt+=String.fromCharCode(j[j.l++]);if(it){var lt=o(j.slice(j.l,j.l+it));(lt[21589]||{}).mt&&(ke=lt[21589].mt),((Z||{})[21589]||{}).mt&&(ke=Z[21589].mt)}j.l+=it;var Lt=j.slice(j.l,j.l+Te);switch(ye){case 8:Lt=D(j,Pe);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+ye)}var rr=!1;te&8&&(we=j.read_shift(4),we==134695760&&(we=j.read_shift(4),rr=!0),Te=j.read_shift(4),Pe=j.read_shift(4)),Te!=ee&&Qi(rr,"Bad compressed size: "+ee+" != "+Te),Pe!=Y&&Qi(rr,"Bad uncompressed size: "+Y+" != "+Pe),gn(X,mt,Lt,{unsafe:!0,mt:ke})}function gi(j,ee){var Y=ee||{},X=[],Z=[],te=Me(1),ye=Y.compression?8:0,ke=0,we=0,Te=0,Pe=0,Ke=0,it=j.FullPaths[0],mt=it,et=j.FileIndex[0],lt=[],Lt=0;for(we=1;we<j.FullPaths.length;++we)if(mt=j.FullPaths[we].slice(it.length),et=j.FileIndex[we],!(!et.size||!et.content||mt=="Sh33tJ5")){var rr=Pe,nr=Me(mt.length);for(Te=0;Te<mt.length;++Te)nr.write_shift(1,mt.charCodeAt(Te)&127);nr=nr.slice(0,nr.l),lt[Ke]=bM.buf(et.content,0);var br=et.content;ye==8&&(br=B(br)),te=Me(30),te.write_shift(4,67324752),te.write_shift(2,20),te.write_shift(2,ke),te.write_shift(2,ye),et.mt?s(te,et.mt):te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,br.length),te.write_shift(4,et.content.length),te.write_shift(2,nr.length),te.write_shift(2,0),Pe+=te.length,X.push(te),Pe+=nr.length,X.push(nr),Pe+=br.length,X.push(br),te=Me(46),te.write_shift(4,33639248),te.write_shift(2,0),te.write_shift(2,20),te.write_shift(2,ke),te.write_shift(2,ye),te.write_shift(4,0),te.write_shift(-4,lt[Ke]),te.write_shift(4,br.length),te.write_shift(4,et.content.length),te.write_shift(2,nr.length),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(4,0),te.write_shift(4,rr),Lt+=te.l,Z.push(te),Lt+=nr.length,Z.push(nr),++Ke}return te=Me(22),te.write_shift(4,101010256),te.write_shift(2,0),te.write_shift(2,0),te.write_shift(2,Ke),te.write_shift(2,Ke),te.write_shift(4,Lt),te.write_shift(4,Pe),te.write_shift(2,0),Qn([Qn(X),Qn(Z),te])}var cr={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Nt(j,ee){if(j.ctype)return j.ctype;var Y=j.name||"",X=Y.match(/\.([^\.]+)$/);return X&&cr[X[1]]||ee&&(X=(Y=ee).match(/[\.\\]([^\.\\])+$/),X&&cr[X[1]])?cr[X[1]]:"application/octet-stream"}function er(j){for(var ee=Xf(j),Y=[],X=0;X<ee.length;X+=76)Y.push(ee.slice(X,X+76));return Y.join(`\r
`)+`\r
`}function Di(j){var ee=j.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Te){var Pe=Te.charCodeAt(0).toString(16).toUpperCase();return"="+(Pe.length==1?"0"+Pe:Pe)});ee=ee.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ee.charAt(0)==`
`&&(ee="=0D"+ee.slice(1)),ee=ee.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Y=[],X=ee.split(`\r
`),Z=0;Z<X.length;++Z){var te=X[Z];if(te.length==0){Y.push("");continue}for(var ye=0;ye<te.length;){var ke=76,we=te.slice(ye,ye+ke);we.charAt(ke-1)=="="?ke--:we.charAt(ke-2)=="="?ke-=2:we.charAt(ke-3)=="="&&(ke-=3),we=te.slice(ye,ye+ke),ye+=ke,ye<te.length&&(we+="="),Y.push(we)}}return Y.join(`\r
`)}function Kr(j){for(var ee=[],Y=0;Y<j.length;++Y){for(var X=j[Y];Y<=j.length&&X.charAt(X.length-1)=="=";)X=X.slice(0,X.length-1)+j[++Y];ee.push(X)}for(var Z=0;Z<ee.length;++Z)ee[Z]=ee[Z].replace(/[=][0-9A-Fa-f]{2}/g,function(te){return String.fromCharCode(parseInt(te.slice(1),16))});return Hs(ee.join(`\r
`))}function kn(j,ee,Y){for(var X="",Z="",te="",ye,ke=0;ke<10;++ke){var we=ee[ke];if(!we||we.match(/^\s*$/))break;var Te=we.match(/^(.*?):\s*([^\s].*)$/);if(Te)switch(Te[1].toLowerCase()){case"content-location":X=Te[2].trim();break;case"content-type":te=Te[2].trim();break;case"content-transfer-encoding":Z=Te[2].trim();break}}switch(++ke,Z.toLowerCase()){case"base64":ye=Hs(io(ee.slice(ke).join("")));break;case"quoted-printable":ye=Kr(ee.slice(ke));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Z)}var Pe=gn(j,X.slice(Y.length),ye,{unsafe:!0});te&&(Pe.ctype=te)}function vi(j,ee){if(Ce(j.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Y=ee&&ee.root||"",X=(lr&&Buffer.isBuffer(j)?j.toString("binary"):Ce(j)).split(`\r
`),Z=0,te="";for(Z=0;Z<X.length;++Z)if(te=X[Z],!!/^Content-Location:/i.test(te)&&(te=te.slice(te.indexOf("file")),Y||(Y=te.slice(0,te.lastIndexOf("/")+1)),te.slice(0,Y.length)!=Y))for(;Y.length>0&&(Y=Y.slice(0,Y.length-1),Y=Y.slice(0,Y.lastIndexOf("/")+1),te.slice(0,Y.length)!=Y););var ye=(X[1]||"").match(/boundary="(.*?)"/);if(!ye)throw new Error("MAD cannot find boundary");var ke="--"+(ye[1]||""),we=[],Te=[],Pe={FileIndex:we,FullPaths:Te};N(Pe);var Ke,it=0;for(Z=0;Z<X.length;++Z){var mt=X[Z];mt!==ke&&mt!==ke+"--"||(it++&&kn(Pe,X.slice(Ke,Z),Y),Ke=Z)}return Pe}function wt(j,ee){var Y=ee||{},X=Y.boundary||"SheetJS";X="------="+X;for(var Z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+X.slice(2)+'"',"","",""],te=j.FullPaths[0],ye=te,ke=j.FileIndex[0],we=1;we<j.FullPaths.length;++we)if(ye=j.FullPaths[we].slice(te.length),ke=j.FileIndex[we],!(!ke.size||!ke.content||ye=="Sh33tJ5")){ye=ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Lt){return"_x"+Lt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Lt){return"_u"+Lt.charCodeAt(0).toString(16)+"_"});for(var Te=ke.content,Pe=lr&&Buffer.isBuffer(Te)?Te.toString("binary"):Ce(Te),Ke=0,it=Math.min(1024,Pe.length),mt=0,et=0;et<=it;++et)(mt=Pe.charCodeAt(et))>=32&&mt<128&&++Ke;var lt=Ke>=it*4/5;Z.push(X),Z.push("Content-Location: "+(Y.root||"file:///C:/SheetJS/")+ye),Z.push("Content-Transfer-Encoding: "+(lt?"quoted-printable":"base64")),Z.push("Content-Type: "+Nt(ke,ye)),Z.push(""),Z.push(lt?Di(Pe):er(Pe))}return Z.push(X+`--\r
`),Z.join(`\r
`)}function si(j){var ee={};return N(ee,j),ee}function gn(j,ee,Y,X){var Z=X&&X.unsafe;Z||N(j);var te=!Z&&Ir.find(j,ee);if(!te){var ye=j.FullPaths[0];ee.slice(0,ye.length)==ye?ye=ee:(ye.slice(-1)!="/"&&(ye+="/"),ye=(ye+ee).replace("//","/")),te={name:i(ee),type:2},j.FileIndex.push(te),j.FullPaths.push(ye),Z||Ir.utils.cfb_gc(j)}return te.content=Y,te.size=Y?Y.length:0,X&&(X.CLSID&&(te.clsid=X.CLSID),X.mt&&(te.mt=X.mt),X.ct&&(te.ct=X.ct)),te}function Yr(j,ee){N(j);var Y=Ir.find(j,ee);if(Y){for(var X=0;X<j.FileIndex.length;++X)if(j.FileIndex[X]==Y)return j.FileIndex.splice(X,1),j.FullPaths.splice(X,1),!0}return!1}function Hr(j,ee,Y){N(j);var X=Ir.find(j,ee);if(X){for(var Z=0;Z<j.FileIndex.length;++Z)if(j.FileIndex[Z]==X)return j.FileIndex[Z].name=i(Y),j.FullPaths[Z]=Y,!0}return!1}function Ur(j){k(j,!0)}return e.find=b,e.read=oe,e.parse=l,e.write=Fe,e.writeFile=_e,e.utils={cfb_new:si,cfb_add:gn,cfb_del:Yr,cfb_mov:Hr,cfb_gc:Ur,ReadShift:xf,CheckField:ZA,prep_blob:cs,bconcat:Qn,use_zlib:T,_deflateRaw:qt,_inflateRaw:Kt,consts:Ne},e}();function AM(r){return typeof r=="string"?lm(r):Array.isArray(r)?J7(r):r}function Id(r,e,t){if(typeof Deno<"u"){if(t&&typeof e=="string")switch(t){case"utf8":e=new TextEncoder(t).encode(e);break;case"binary":e=lm(e);break;default:throw new Error("Unsupported encoding "+t)}return Deno.writeFileSync(r,e)}var n=t=="utf8"?Qf(e):e;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,r);if(typeof Blob<"u"){var i=new Blob([AM(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(i,r);if(typeof saveAs<"u")return saveAs(i,r);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var s=URL.createObjectURL(i);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),chrome.downloads.download({url:s,filename:r,saveAs:!0});var a=document.createElement("a");if(a.download!=null)return a.download=r,a.href=s,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(s)},6e4),s}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var o=File(r);return o.open("w"),o.encoding="binary",Array.isArray(e)&&(e=Ad(e)),o.write(e),o.close(),e}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+r)}function ii(r){for(var e=Object.keys(r),t=[],n=0;n<e.length;++n)Object.prototype.hasOwnProperty.call(r,e[n])&&t.push(e[n]);return t}function Uw(r,e){for(var t=[],n=ii(r),i=0;i!==n.length;++i)t[r[n[i]][e]]==null&&(t[r[n[i]][e]]=n[i]);return t}function Iv(r){for(var e=[],t=ii(r),n=0;n!==t.length;++n)e[r[t[n]]]=t[n];return e}function dm(r){for(var e=[],t=ii(r),n=0;n!==t.length;++n)e[r[t[n]]]=parseInt(t[n],10);return e}function IM(r){for(var e=[],t=ii(r),n=0;n!==t.length;++n)e[r[t[n]]]==null&&(e[r[t[n]]]=[]),e[r[t[n]]].push(t[n]);return e}var fp=new Date(1899,11,30,0,0,0);function Yi(r,e){var t=r.getTime(),n=fp.getTime()+(r.getTimezoneOffset()-fp.getTimezoneOffset())*6e4;return(t-n)/(24*60*60*1e3)}var OA=new Date,SM=fp.getTime()+(OA.getTimezoneOffset()-fp.getTimezoneOffset())*6e4,jw=OA.getTimezoneOffset();function MA(r){var e=new Date;return e.setTime(r*24*60*60*1e3+SM),e.getTimezoneOffset()!==jw&&e.setTime(e.getTime()+(e.getTimezoneOffset()-jw)*6e4),e}var qw=new Date("2017-02-19T19:06:09.000Z"),BA=isNaN(qw.getFullYear())?new Date("2/19/17"):qw,PM=BA.getFullYear()==2017;function ki(r,e){var t=new Date(r);if(PM)return e>0?t.setTime(t.getTime()+t.getTimezoneOffset()*60*1e3):e<0&&t.setTime(t.getTime()-t.getTimezoneOffset()*60*1e3),t;if(r instanceof Date)return r;if(BA.getFullYear()==1917&&!isNaN(t.getFullYear())){var n=t.getFullYear();return r.indexOf(""+n)>-1||t.setFullYear(t.getFullYear()+100),t}var i=r.match(/\d+/g)||["2017","2","19","0","0","0"],s=new Date(+i[0],+i[1]-1,+i[2],+i[3]||0,+i[4]||0,+i[5]||0);return r.indexOf("Z")>-1&&(s=new Date(s.getTime()-s.getTimezoneOffset()*60*1e3)),s}function pm(r,e){if(lr&&Buffer.isBuffer(r))return r.toString("binary");if(typeof TextDecoder<"u")try{var t={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(r)&&(r=new Uint8Array(r)),new TextDecoder("latin1").decode(r).replace(/[]/g,function(s){return t[s]||s})}catch{}for(var n=[],i=0;i!=r.length;++i)n.push(String.fromCharCode(r[i]));return n.join("")}function Xi(r){if(typeof JSON<"u"&&!Array.isArray(r))return JSON.parse(JSON.stringify(r));if(typeof r!="object"||r==null)return r;if(r instanceof Date)return new Date(r.getTime());var e={};for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=Xi(r[t]));return e}function Zr(r,e){for(var t="";t.length<e;)t+=r;return t}function Qa(r){var e=Number(r);if(!isNaN(e))return isFinite(e)?e:NaN;if(!/\d/.test(r))return e;var t=1,n=r.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return t*=100,""});return!isNaN(e=Number(n))||(n=n.replace(/[(](.*)[)]/,function(i,s){return t=-t,s}),!isNaN(e=Number(n)))?e/t:e}var NM=["january","february","march","april","may","june","july","august","september","october","november","december"];function Jf(r){var e=new Date(r),t=new Date(NaN),n=e.getYear(),i=e.getMonth(),s=e.getDate();if(isNaN(s))return t;var a=r.toLowerCase();if(a.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(a=a.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),a.length>3&&NM.indexOf(a)==-1)return t}else if(a.match(/[a-z]/))return t;return n<0||n>8099?t:(i>0||s>1)&&n!=101?e:r.match(/[^-0-9:,\/\\]/)?t:e}function $t(r,e,t){if(r.FullPaths){if(typeof t=="string"){var n;return lr?n=ho(t):n=Q7(t),Ir.utils.cfb_add(r,e,n)}Ir.utils.cfb_add(r,e,t)}else r.file(e,t)}function Sv(){return Ir.utils.cfb_new()}var Tn=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,CM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Pv=Iv(CM),Nv=/[&<>'"]/g,kM=/[\u0000-\u0008\u000b-\u001f]/g;function yr(r){var e=r+"";return e.replace(Nv,function(t){return Pv[t]}).replace(kM,function(t){return"_x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+"_"})}function zw(r){return yr(r).replace(/ /g,"_x0020_")}var VA=/[\u0000-\u001f]/g;function RM(r){var e=r+"";return e.replace(Nv,function(t){return Pv[t]}).replace(/\n/g,"<br/>").replace(VA,function(t){return"&#x"+("000"+t.charCodeAt(0).toString(16)).slice(-4)+";"})}function LM(r){var e=r+"";return e.replace(Nv,function(t){return Pv[t]}).replace(VA,function(t){return"&#x"+t.charCodeAt(0).toString(16).toUpperCase()+";"})}function DM(r){return r.replace(/(\r\n|[\r\n])/g,"&#10;")}function FM(r){switch(r){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function hg(r){for(var e="",t=0,n=0,i=0,s=0,a=0,o=0;t<r.length;){if(n=r.charCodeAt(t++),n<128){e+=String.fromCharCode(n);continue}if(i=r.charCodeAt(t++),n>191&&n<224){a=(n&31)<<6,a|=i&63,e+=String.fromCharCode(a);continue}if(s=r.charCodeAt(t++),n<240){e+=String.fromCharCode((n&15)<<12|(i&63)<<6|s&63);continue}a=r.charCodeAt(t++),o=((n&7)<<18|(i&63)<<12|(s&63)<<6|a&63)-65536,e+=String.fromCharCode(55296+(o>>>10&1023)),e+=String.fromCharCode(56320+(o&1023))}return e}function Ww(r){var e=bu(2*r.length),t,n,i=1,s=0,a=0,o;for(n=0;n<r.length;n+=i)i=1,(o=r.charCodeAt(n))<128?t=o:o<224?(t=(o&31)*64+(r.charCodeAt(n+1)&63),i=2):o<240?(t=(o&15)*4096+(r.charCodeAt(n+1)&63)*64+(r.charCodeAt(n+2)&63),i=3):(i=4,t=(o&7)*262144+(r.charCodeAt(n+1)&63)*4096+(r.charCodeAt(n+2)&63)*64+(r.charCodeAt(n+3)&63),t-=65536,a=55296+(t>>>10&1023),t=56320+(t&1023)),a!==0&&(e[s++]=a&255,e[s++]=a>>>8,a=0),e[s++]=t%256,e[s++]=t>>>8;return e.slice(0,s).toString("ucs2")}function Hw(r){return ho(r,"binary").toString("utf8")}var h0="foo bar baz",wf=lr&&(Hw(h0)==hg(h0)&&Hw||Ww(h0)==hg(h0)&&Ww)||hg,Qf=lr?function(r){return ho(r,"utf8").toString("binary")}:function(r){for(var e=[],t=0,n=0,i=0;t<r.length;)switch(n=r.charCodeAt(t++),!0){case n<128:e.push(String.fromCharCode(n));break;case n<2048:e.push(String.fromCharCode(192+(n>>6))),e.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,i=r.charCodeAt(t++)-56320+(n<<10),e.push(String.fromCharCode(240+(i>>18&7))),e.push(String.fromCharCode(144+(i>>12&63))),e.push(String.fromCharCode(128+(i>>6&63))),e.push(String.fromCharCode(128+(i&63)));break;default:e.push(String.fromCharCode(224+(n>>12))),e.push(String.fromCharCode(128+(n>>6&63))),e.push(String.fromCharCode(128+(n&63)))}return e.join("")},OM=function(){var r=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(e){return[new RegExp("&"+e[0]+";","ig"),e[1]]});return function(t){for(var n=t.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),i=0;i<r.length;++i)n=n.replace(r[i][0],r[i][1]);return n}}(),UA=/(^\s|\s$|\n)/;function Zn(r,e){return"<"+r+(e.match(UA)?' xml:space="preserve"':"")+">"+e+"</"+r+">"}function Zf(r){return ii(r).map(function(e){return" "+e+'="'+r[e]+'"'}).join("")}function st(r,e,t){return"<"+r+(t!=null?Zf(t):"")+(e!=null?(e.match(UA)?' xml:space="preserve"':"")+">"+e+"</"+r:"/")+">"}function d1(r,e){try{return r.toISOString().replace(/\.\d*/,"")}catch(t){if(e)throw t}return""}function MM(r,e){switch(typeof r){case"string":var t=st("vt:lpwstr",yr(r));return t=t.replace(/&quot;/g,"_x0022_"),t;case"number":return st((r|0)==r?"vt:i4":"vt:r8",yr(String(r)));case"boolean":return st("vt:bool",r?"true":"false")}if(r instanceof Date)return st("vt:filetime",d1(r));throw new Error("Unable to serialize "+r)}var Mn={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},Th=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],ls={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function BM(r,e){for(var t=1-2*(r[e+7]>>>7),n=((r[e+7]&127)<<4)+(r[e+6]>>>4&15),i=r[e+6]&15,s=5;s>=0;--s)i=i*256+r[e+s];return n==2047?i==0?t*(1/0):NaN:(n==0?n=-1022:(n-=1023,i+=Math.pow(2,52)),t*Math.pow(2,n-52)*i)}function VM(r,e,t){var n=(e<0||1/e==-1/0?1:0)<<7,i=0,s=0,a=n?-e:e;isFinite(a)?a==0?i=s=0:(i=Math.floor(Math.log(a)/Math.LN2),s=a*Math.pow(2,52-i),i<=-1023&&(!isFinite(s)||s<Math.pow(2,52))?i=-1022:(s-=Math.pow(2,52),i+=1023)):(i=2047,s=isNaN(e)?26985:0);for(var o=0;o<=5;++o,s/=256)r[t+o]=s&255;r[t+6]=(i&15)<<4|s&15,r[t+7]=i>>4|n}var $w=function(r){for(var e=[],t=10240,n=0;n<r[0].length;++n)if(r[0][n])for(var i=0,s=r[0][n].length;i<s;i+=t)e.push.apply(e,r[0][n].slice(i,i+t));return e},Gw=lr?function(r){return r[0].length>0&&Buffer.isBuffer(r[0][0])?Buffer.concat(r[0].map(function(e){return Buffer.isBuffer(e)?e:ho(e)})):$w(r)}:$w,Kw=function(r,e,t){for(var n=[],i=e;i<t;i+=2)n.push(String.fromCharCode(uf(r,i)));return n.join("").replace(yf,"")},Cv=lr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("utf16le",e,t).replace(yf,""):Kw(r,e,t)}:Kw,Yw=function(r,e,t){for(var n=[],i=e;i<e+t;++i)n.push(("0"+r[i].toString(16)).slice(-2));return n.join("")},jA=lr?function(r,e,t){return Buffer.isBuffer(r)?r.toString("hex",e,e+t):Yw(r,e,t)}:Yw,Xw=function(r,e,t){for(var n=[],i=e;i<t;i++)n.push(String.fromCharCode(El(r,i)));return n.join("")},Sd=lr?function(e,t,n){return Buffer.isBuffer(e)?e.toString("utf8",t,n):Xw(e,t,n)}:Xw,qA=function(r,e){var t=hs(r,e);return t>0?Sd(r,e+4,e+4+t-1):""},zA=qA,WA=function(r,e){var t=hs(r,e);return t>0?Sd(r,e+4,e+4+t-1):""},HA=WA,$A=function(r,e){var t=2*hs(r,e);return t>0?Sd(r,e+4,e+4+t-1):""},GA=$A,KA=function(e,t){var n=hs(e,t);return n>0?Cv(e,t+4,t+4+n):""},YA=KA,XA=function(r,e){var t=hs(r,e);return t>0?Sd(r,e+4,e+4+t):""},JA=XA,QA=function(r,e){return BM(r,e)},dp=QA,kv=function(e){return Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array};lr&&(zA=function(e,t){if(!Buffer.isBuffer(e))return qA(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},HA=function(e,t){if(!Buffer.isBuffer(e))return WA(e,t);var n=e.readUInt32LE(t);return n>0?e.toString("utf8",t+4,t+4+n-1):""},GA=function(e,t){if(!Buffer.isBuffer(e))return $A(e,t);var n=2*e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n-1)},YA=function(e,t){if(!Buffer.isBuffer(e))return KA(e,t);var n=e.readUInt32LE(t);return e.toString("utf16le",t+4,t+4+n)},JA=function(e,t){if(!Buffer.isBuffer(e))return XA(e,t);var n=e.readUInt32LE(t);return e.toString("utf8",t+4,t+4+n)},dp=function(e,t){return Buffer.isBuffer(e)?e.readDoubleLE(t):QA(e,t)},kv=function(e){return Buffer.isBuffer(e)||Array.isArray(e)||typeof Uint8Array<"u"&&e instanceof Uint8Array});var El=function(r,e){return r[e]},uf=function(r,e){return r[e+1]*256+r[e]},UM=function(r,e){var t=r[e+1]*256+r[e];return t<32768?t:(65535-t+1)*-1},hs=function(r,e){return r[e+3]*(1<<24)+(r[e+2]<<16)+(r[e+1]<<8)+r[e]},Xc=function(r,e){return r[e+3]<<24|r[e+2]<<16|r[e+1]<<8|r[e]},jM=function(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]};function xf(r,e){var t="",n,i,s=[],a,o,c,u;switch(e){case"dbcs":if(u=this.l,lr&&Buffer.isBuffer(this))t=this.slice(this.l,this.l+2*r).toString("utf16le");else for(c=0;c<r;++c)t+=String.fromCharCode(uf(this,u)),u+=2;r*=2;break;case"utf8":t=Sd(this,this.l,this.l+r);break;case"utf16le":r*=2,t=Cv(this,this.l,this.l+r);break;case"wstr":return xf.call(this,r,"dbcs");case"lpstr-ansi":t=zA(this,this.l),r=4+hs(this,this.l);break;case"lpstr-cp":t=HA(this,this.l),r=4+hs(this,this.l);break;case"lpwstr":t=GA(this,this.l),r=4+2*hs(this,this.l);break;case"lpp4":r=4+hs(this,this.l),t=YA(this,this.l),r&2&&(r+=2);break;case"8lpp4":r=4+hs(this,this.l),t=JA(this,this.l),r&3&&(r+=4-(r&3));break;case"cstr":for(r=0,t="";(a=El(this,this.l+r++))!==0;)s.push(c0(a));t=s.join("");break;case"_wstr":for(r=0,t="";(a=uf(this,this.l+r))!==0;)s.push(c0(a)),r+=2;r+=2,t=s.join("");break;case"dbcs-cont":for(t="",u=this.l,c=0;c<r;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=El(this,u),this.l=u+1,o=xf.call(this,r-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(c0(uf(this,u))),u+=2}t=s.join(""),r*=2;break;case"cpstr":case"sbcs-cont":for(t="",u=this.l,c=0;c!=r;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return a=El(this,u),this.l=u+1,o=xf.call(this,r-c,a?"dbcs-cont":"sbcs-cont"),s.join("")+o;s.push(c0(El(this,u))),u+=1}t=s.join("");break;default:switch(r){case 1:return n=El(this,this.l),this.l++,n;case 2:return n=(e==="i"?UM:uf)(this,this.l),this.l+=2,n;case 4:case-4:return e==="i"||!(this[this.l+3]&128)?(n=(r>0?Xc:jM)(this,this.l),this.l+=4,n):(i=hs(this,this.l),this.l+=4,i);case 8:case-8:if(e==="f")return r==8?i=dp(this,this.l):i=dp([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,i;r=8;case 16:t=jA(this,this.l,r);break}}return this.l+=r,t}var qM=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255,r[t+2]=e>>>16&255,r[t+3]=e>>>24&255},zM=function(r,e,t){r[t]=e&255,r[t+1]=e>>8&255,r[t+2]=e>>16&255,r[t+3]=e>>24&255},WM=function(r,e,t){r[t]=e&255,r[t+1]=e>>>8&255};function HM(r,e,t){var n=0,i=0;if(t==="dbcs"){for(i=0;i!=e.length;++i)WM(this,e.charCodeAt(i),this.l+2*i);n=2*e.length}else if(t==="sbcs"){for(e=e.replace(/[^\x00-\x7F]/g,"_"),i=0;i!=e.length;++i)this[this.l+i]=e.charCodeAt(i)&255;n=e.length}else if(t==="hex"){for(;i<r;++i)this[this.l++]=parseInt(e.slice(2*i,2*i+2),16)||0;return this}else if(t==="utf16le"){var s=Math.min(this.l+r,this.length);for(i=0;i<Math.min(e.length,r);++i){var a=e.charCodeAt(i);this[this.l++]=a&255,this[this.l++]=a>>8}for(;this.l<s;)this[this.l++]=0;return this}else switch(r){case 1:n=1,this[this.l]=e&255;break;case 2:n=2,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255;break;case 3:n=3,this[this.l]=e&255,e>>>=8,this[this.l+1]=e&255,e>>>=8,this[this.l+2]=e&255;break;case 4:n=4,qM(this,e,this.l);break;case 8:if(n=8,t==="f"){VM(this,e,this.l);break}case 16:break;case-4:n=4,zM(this,e,this.l);break}return this.l+=n,this}function ZA(r,e){var t=jA(this,this.l,r.length>>1);if(t!==r)throw new Error(e+"Expected "+r+" saw "+t);this.l+=r.length>>1}function cs(r,e){r.l=e,r.read_shift=xf,r.chk=ZA,r.write_shift=HM}function Aa(r,e){r.l+=e}function Me(r){var e=bu(r);return cs(e,0),e}function Gi(){var r=[],e=lr?256:2048,t=function(u){var l=Me(u);return cs(l,0),l},n=t(e),i=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&r.push(n),n=null)},s=function(u){return n&&u<n.length-n.l?n:(i(),n=t(Math.max(u+1,e)))},a=function(){return i(),Qn(r)},o=function(u){i(),n=u,n.l==null&&(n.l=n.length),s(e)};return{next:s,push:o,end:a,_bufs:r}}function He(r,e,t,n){var i=+e,s;if(!isNaN(i)){n||(n=Bq[i].p||(t||[]).length||0),s=1+(i>=128?1:0)+1,n>=128&&++s,n>=16384&&++s,n>=2097152&&++s;var a=r.next(s);i<=127?a.write_shift(1,i):(a.write_shift(1,(i&127)+128),a.write_shift(1,i>>7));for(var o=0;o!=4;++o)if(n>=128)a.write_shift(1,(n&127)+128),n>>=7;else{a.write_shift(1,n);break}n>0&&kv(t)&&r.push(t)}}function Ef(r,e,t){var n=Xi(r);if(e.s?(n.cRel&&(n.c+=e.s.c),n.rRel&&(n.r+=e.s.r)):(n.cRel&&(n.c+=e.c),n.rRel&&(n.r+=e.r)),!t||t.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function Jw(r,e,t){var n=Xi(r);return n.s=Ef(n.s,e.s,t),n.e=Ef(n.e,e.s,t),n}function Tf(r,e){if(r.cRel&&r.c<0)for(r=Xi(r);r.c<0;)r.c+=e>8?16384:256;if(r.rRel&&r.r<0)for(r=Xi(r);r.r<0;)r.r+=e>8?1048576:e>5?65536:16384;var t=xr(r);return!r.cRel&&r.cRel!=null&&(t=KM(t)),!r.rRel&&r.rRel!=null&&(t=$M(t)),t}function fg(r,e){return r.s.r==0&&!r.s.rRel&&r.e.r==(e.biff>=12?1048575:e.biff>=8?65536:16384)&&!r.e.rRel?(r.s.cRel?"":"$")+di(r.s.c)+":"+(r.e.cRel?"":"$")+di(r.e.c):r.s.c==0&&!r.s.cRel&&r.e.c==(e.biff>=12?16383:255)&&!r.e.cRel?(r.s.rRel?"":"$")+ri(r.s.r)+":"+(r.e.rRel?"":"$")+ri(r.e.r):Tf(r.s,e.biff)+":"+Tf(r.e,e.biff)}function Rv(r){return parseInt(GM(r),10)-1}function ri(r){return""+(r+1)}function $M(r){return r.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function GM(r){return r.replace(/\$(\d+)$/,"$1")}function Lv(r){for(var e=YM(r),t=0,n=0;n!==e.length;++n)t=26*t+e.charCodeAt(n)-64;return t-1}function di(r){if(r<0)throw new Error("invalid column "+r);var e="";for(++r;r;r=Math.floor((r-1)/26))e=String.fromCharCode((r-1)%26+65)+e;return e}function KM(r){return r.replace(/^([A-Z])/,"$$$1")}function YM(r){return r.replace(/^\$([A-Z])/,"$1")}function XM(r){return r.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Bn(r){for(var e=0,t=0,n=0;n<r.length;++n){var i=r.charCodeAt(n);i>=48&&i<=57?e=10*e+(i-48):i>=65&&i<=90&&(t=26*t+(i-64))}return{c:t-1,r:e-1}}function xr(r){for(var e=r.c+1,t="";e;e=(e-1)/26|0)t=String.fromCharCode((e-1)%26+65)+t;return t+(r.r+1)}function ms(r){var e=r.indexOf(":");return e==-1?{s:Bn(r),e:Bn(r)}:{s:Bn(r.slice(0,e)),e:Bn(r.slice(e+1))}}function En(r,e){return typeof e>"u"||typeof e=="number"?En(r.s,r.e):(typeof r!="string"&&(r=xr(r)),typeof e!="string"&&(e=xr(e)),r==e?r:r+":"+e)}function Vr(r){var e={s:{c:0,r:0},e:{c:0,r:0}},t=0,n=0,i=0,s=r.length;for(t=0;n<s&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.s.c=--t,t=0;n<s&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;if(e.s.r=--t,n===s||i!=10)return e.e.c=e.s.c,e.e.r=e.s.r,e;for(++n,t=0;n!=s&&!((i=r.charCodeAt(n)-64)<1||i>26);++n)t=26*t+i;for(e.e.c=--t,t=0;n!=s&&!((i=r.charCodeAt(n)-48)<0||i>9);++n)t=10*t+i;return e.e.r=--t,e}function Qw(r,e){var t=r.t=="d"&&e instanceof Date;if(r.z!=null)try{return r.w=hc(r.z,t?Yi(e):e)}catch{}try{return r.w=hc((r.XF||{}).numFmtId||(t?14:0),t?Yi(e):e)}catch{return""+e}}function so(r,e,t){return r==null||r.t==null||r.t=="z"?"":r.w!==void 0?r.w:(r.t=="d"&&!r.z&&t&&t.dateNF&&(r.z=t.dateNF),r.t=="e"?Pd[r.v]||r.v:e==null?Qw(r,r.v):Qw(r,e))}function Lu(r,e){var t=e&&e.sheet?e.sheet:"Sheet1",n={};return n[t]=r,{SheetNames:[t],Sheets:n}}function eI(r,e,t){var n=t||{},i=r?Array.isArray(r):n.dense,s=r||(i?[]:{}),a=0,o=0;if(s&&n.origin!=null){if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Bn(n.origin):n.origin;a=c.r,o=c.c}s["!ref"]||(s["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(s["!ref"]){var l=Vr(s["!ref"]);u.s.c=l.s.c,u.s.r=l.s.r,u.e.c=Math.max(u.e.c,l.e.c),u.e.r=Math.max(u.e.r,l.e.r),a==-1&&(u.e.r=a=l.e.r+1)}for(var d=0;d!=e.length;++d)if(e[d]){if(!Array.isArray(e[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=e[d].length;++g)if(!(typeof e[d][g]>"u")){var p={v:e[d][g]},x=a+d,_=o+g;if(u.s.r>x&&(u.s.r=x),u.s.c>_&&(u.s.c=_),u.e.r<x&&(u.e.r=x),u.e.c<_&&(u.e.c=_),e[d][g]&&typeof e[d][g]=="object"&&!Array.isArray(e[d][g])&&!(e[d][g]instanceof Date))p=e[d][g];else if(Array.isArray(p.v)&&(p.f=e[d][g][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||tn[14],n.cellDates?(p.t="d",p.w=hc(p.z,Yi(p.v))):(p.t="n",p.v=Yi(p.v),p.w=hc(p.z,p.v))):p.t="s";if(i)s[x]||(s[x]=[]),s[x][_]&&s[x][_].z&&(p.z=s[x][_].z),s[x][_]=p;else{var E=xr({c:_,r:x});s[E]&&s[E].z&&(p.z=s[E].z),s[E]=p}}}return u.s.c<1e7&&(s["!ref"]=En(u)),s}function bh(r,e){return eI(null,r,e)}function JM(r){return r.read_shift(4,"i")}function Gs(r,e){return e||(e=Me(4)),e.write_shift(4,r),e}function pi(r){var e=r.read_shift(4);return e===0?"":r.read_shift(e,"dbcs")}function Vn(r,e){var t=!1;return e==null&&(t=!0,e=Me(4+2*r.length)),e.write_shift(4,r.length),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}function QM(r){return{ich:r.read_shift(2),ifnt:r.read_shift(2)}}function ZM(r,e){return e||(e=Me(4)),e.write_shift(2,0),e.write_shift(2,0),e}function Dv(r,e){var t=r.l,n=r.read_shift(1),i=pi(r),s=[],a={t:i,h:i};if(n&1){for(var o=r.read_shift(4),c=0;c!=o;++c)s.push(QM(r));a.r=s}else a.r=[{ich:0,ifnt:0}];return r.l=t+e,a}function e9(r,e){var t=!1;return e==null&&(t=!0,e=Me(15+4*r.t.length)),e.write_shift(1,0),Vn(r.t,e),t?e.slice(0,e.l):e}var t9=Dv;function r9(r,e){var t=!1;return e==null&&(t=!0,e=Me(23+4*r.t.length)),e.write_shift(1,1),Vn(r.t,e),e.write_shift(4,1),ZM({},e),t?e.slice(0,e.l):e}function Ns(r){var e=r.read_shift(4),t=r.read_shift(2);return t+=r.read_shift(1)<<16,r.l++,{c:e,iStyleRef:t}}function Du(r,e){return e==null&&(e=Me(8)),e.write_shift(-4,r.c),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}function Fu(r){var e=r.read_shift(2);return e+=r.read_shift(1)<<16,r.l++,{c:-1,iStyleRef:e}}function Ou(r,e){return e==null&&(e=Me(4)),e.write_shift(3,r.iStyleRef||r.s),e.write_shift(1,0),e}var n9=pi,tI=Vn;function Fv(r){var e=r.read_shift(4);return e===0||e===4294967295?"":r.read_shift(e,"dbcs")}function pp(r,e){var t=!1;return e==null&&(t=!0,e=Me(127)),e.write_shift(4,r.length>0?r.length:4294967295),r.length>0&&e.write_shift(0,r,"dbcs"),t?e.slice(0,e.l):e}var i9=pi,p1=Fv,Ov=pp;function rI(r){var e=r.slice(r.l,r.l+4),t=e[0]&1,n=e[0]&2;r.l+=4;var i=n===0?dp([0,0,0,0,e[0]&252,e[1],e[2],e[3]],0):Xc(e,0)>>2;return t?i/100:i}function nI(r,e){e==null&&(e=Me(4));var t=0,n=0,i=r*100;if(r==(r|0)&&r>=-536870912&&r<1<<29?n=1:i==(i|0)&&i>=-536870912&&i<1<<29&&(n=1,t=1),n)e.write_shift(-4,((t?i:r)<<2)+(t+2));else throw new Error("unsupported RkNumber "+r)}function iI(r){var e={s:{},e:{}};return e.s.r=r.read_shift(4),e.e.r=r.read_shift(4),e.s.c=r.read_shift(4),e.e.c=r.read_shift(4),e}function s9(r,e){return e||(e=Me(16)),e.write_shift(4,r.s.r),e.write_shift(4,r.e.r),e.write_shift(4,r.s.c),e.write_shift(4,r.e.c),e}var Mu=iI,Ah=s9;function Ih(r){if(r.length-r.l<8)throw"XLS Xnum Buffer underflow";return r.read_shift(8,"f")}function Au(r,e){return(e||Me(8)).write_shift(8,r,"f")}function a9(r){var e={},t=r.read_shift(1),n=t>>>1,i=r.read_shift(1),s=r.read_shift(2,"i"),a=r.read_shift(1),o=r.read_shift(1),c=r.read_shift(1);switch(r.l++,n){case 0:e.auto=1;break;case 1:e.index=i;var u=m9[i];u&&(e.rgb=u5(u));break;case 2:e.rgb=u5([a,o,c]);break;case 3:e.theme=i;break}return s!=0&&(e.tint=s>0?s/32767:s/32768),e}function mp(r,e){if(e||(e=Me(8)),!r||r.auto)return e.write_shift(4,0),e.write_shift(4,0),e;r.index!=null?(e.write_shift(1,2),e.write_shift(1,r.index)):r.theme!=null?(e.write_shift(1,6),e.write_shift(1,r.theme)):(e.write_shift(1,5),e.write_shift(1,0));var t=r.tint||0;if(t>0?t*=32767:t<0&&(t*=32768),e.write_shift(2,t),!r.rgb||r.theme!=null)e.write_shift(2,0),e.write_shift(1,0),e.write_shift(1,0);else{var n=r.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),e.write_shift(1,parseInt(n.slice(0,2),16)),e.write_shift(1,parseInt(n.slice(2,4),16)),e.write_shift(1,parseInt(n.slice(4,6),16)),e.write_shift(1,255)}return e}function o9(r){var e=r.read_shift(1);r.l++;var t={fBold:e&1,fItalic:e&2,fUnderline:e&4,fStrikeout:e&8,fOutline:e&16,fShadow:e&32,fCondense:e&64,fExtend:e&128};return t}function c9(r,e){e||(e=Me(2));var t=(r.italic?2:0)|(r.strike?8:0)|(r.outline?16:0)|(r.shadow?32:0)|(r.condense?64:0)|(r.extend?128:0);return e.write_shift(1,t),e.write_shift(1,0),e}var sI=2,os=3,f0=11,gp=19,d0=64,u9=65,l9=71,h9=4108,f9=4126,Yn=80,Zw={1:{n:"CodePage",t:sI},2:{n:"Category",t:Yn},3:{n:"PresentationFormat",t:Yn},4:{n:"ByteCount",t:os},5:{n:"LineCount",t:os},6:{n:"ParagraphCount",t:os},7:{n:"SlideCount",t:os},8:{n:"NoteCount",t:os},9:{n:"HiddenCount",t:os},10:{n:"MultimediaClipCount",t:os},11:{n:"ScaleCrop",t:f0},12:{n:"HeadingPairs",t:h9},13:{n:"TitlesOfParts",t:f9},14:{n:"Manager",t:Yn},15:{n:"Company",t:Yn},16:{n:"LinksUpToDate",t:f0},17:{n:"CharacterCount",t:os},19:{n:"SharedDoc",t:f0},22:{n:"HyperlinksChanged",t:f0},23:{n:"AppVersion",t:os,p:"version"},24:{n:"DigSig",t:u9},26:{n:"ContentType",t:Yn},27:{n:"ContentStatus",t:Yn},28:{n:"Language",t:Yn},29:{n:"Version",t:Yn},255:{},2147483648:{n:"Locale",t:gp},2147483651:{n:"Behavior",t:gp},1919054434:{}},e5={1:{n:"CodePage",t:sI},2:{n:"Title",t:Yn},3:{n:"Subject",t:Yn},4:{n:"Author",t:Yn},5:{n:"Keywords",t:Yn},6:{n:"Comments",t:Yn},7:{n:"Template",t:Yn},8:{n:"LastAuthor",t:Yn},9:{n:"RevNumber",t:Yn},10:{n:"EditTime",t:d0},11:{n:"LastPrinted",t:d0},12:{n:"CreatedDate",t:d0},13:{n:"ModifiedDate",t:d0},14:{n:"PageCount",t:os},15:{n:"WordCount",t:os},16:{n:"CharCount",t:os},17:{n:"Thumbnail",t:l9},18:{n:"Application",t:Yn},19:{n:"DocSecurity",t:os},255:{},2147483648:{n:"Locale",t:gp},2147483651:{n:"Behavior",t:gp},1919054434:{}};function d9(r){return r.map(function(e){return[e>>16&255,e>>8&255,e&255]})}var p9=d9([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),m9=Xi(p9),Pd={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},g9={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},p0={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function aI(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function oI(r,e){var t=IM(g9),n=[],i;n[n.length]=Tn,n[n.length]=st("Types",null,{xmlns:Mn.CT,"xmlns:xsd":Mn.xsd,"xmlns:xsi":Mn.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return st("Default",null,{Extension:c[0],ContentType:c[1]})}));var s=function(c){r[c]&&r[c].length>0&&(i=r[c][0],n[n.length]=st("Override",null,{PartName:(i[0]=="/"?"":"/")+i,ContentType:p0[c][e.bookType]||p0[c].xlsx}))},a=function(c){(r[c]||[]).forEach(function(u){n[n.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:p0[c][e.bookType]||p0[c].xlsx})})},o=function(c){(r[c]||[]).forEach(function(u){n[n.length]=st("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:t[c][0]})})};return s("workbooks"),a("sheets"),a("charts"),o("themes"),["strs","styles"].forEach(s),["coreprops","extprops","custprops"].forEach(o),o("vba"),o("comments"),o("threadedcomments"),o("drawings"),a("metadata"),o("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var ar={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function cI(r){var e=r.lastIndexOf("/");return r.slice(0,e+1)+"_rels/"+r.slice(e+1)+".rels"}function Ml(r){var e=[Tn,st("Relationships",null,{xmlns:Mn.RELS})];return ii(r["!id"]).forEach(function(t){e[e.length]=st("Relationship",null,r["!id"][t])}),e.length>2&&(e[e.length]="</Relationships>",e[1]=e[1].replace("/>",">")),e.join("")}function vr(r,e,t,n,i,s){if(i||(i={}),r["!id"]||(r["!id"]={}),r["!idx"]||(r["!idx"]=1),e<0)for(e=r["!idx"];r["!id"]["rId"+e];++e);if(r["!idx"]=e+1,i.Id="rId"+e,i.Type=n,i.Target=t,[ar.HLINK,ar.XPATH,ar.XMISS].indexOf(i.Type)>-1&&(i.TargetMode="External"),r["!id"][i.Id])throw new Error("Cannot rewrite rId "+e);return r["!id"][i.Id]=i,r[("/"+i.Target).replace("//","/")]=i,e}function v9(r){var e=[Tn];e.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),e.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var t=0;t<r.length;++t)e.push('  <manifest:file-entry manifest:full-path="'+r[t][0]+'" manifest:media-type="'+r[t][1]+`"/>
`);return e.push("</manifest:manifest>"),e.join("")}function t5(r,e,t){return['  <rdf:Description rdf:about="'+r+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(t||"odf")+"#"+e+`"/>
`,`  </rdf:Description>
`].join("")}function _9(r,e){return['  <rdf:Description rdf:about="'+r+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+e+`"/>
`,`  </rdf:Description>
`].join("")}function y9(r){var e=[Tn];e.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var t=0;t!=r.length;++t)e.push(t5(r[t][0],r[t][1])),e.push(_9("",r[t][0]));return e.push(t5("","Document","pkg")),e.push("</rdf:RDF>"),e.join("")}function uI(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+op.version+"</meta:generator></office:meta></office:document-meta>"}var su=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]];function dg(r,e,t,n,i){i[r]!=null||e==null||e===""||(i[r]=e,e=yr(e),n[n.length]=t?st(r,e,t):Zn(r,e))}function lI(r,e){var t=e||{},n=[Tn,st("cp:coreProperties",null,{"xmlns:cp":Mn.CORE_PROPS,"xmlns:dc":Mn.dc,"xmlns:dcterms":Mn.dcterms,"xmlns:dcmitype":Mn.dcmitype,"xmlns:xsi":Mn.xsi})],i={};if(!r&&!t.Props)return n.join("");r&&(r.CreatedDate!=null&&dg("dcterms:created",typeof r.CreatedDate=="string"?r.CreatedDate:d1(r.CreatedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i),r.ModifiedDate!=null&&dg("dcterms:modified",typeof r.ModifiedDate=="string"?r.ModifiedDate:d1(r.ModifiedDate,t.WTF),{"xsi:type":"dcterms:W3CDTF"},n,i));for(var s=0;s!=su.length;++s){var a=su[s],o=t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:r?r[a[1]]:null;o===!0?o="1":o===!1?o="0":typeof o=="number"&&(o=String(o)),o!=null&&dg(a[0],o,null,n,i)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Bl=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],hI=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function fI(r){var e=[],t=st;return r||(r={}),r.Application="SheetJS",e[e.length]=Tn,e[e.length]=st("Properties",null,{xmlns:Mn.EXT_PROPS,"xmlns:vt":Mn.vt}),Bl.forEach(function(n){if(r[n[1]]!==void 0){var i;switch(n[2]){case"string":i=yr(String(r[n[1]]));break;case"bool":i=r[n[1]]?"true":"false";break}i!==void 0&&(e[e.length]=t(n[0],i))}}),e[e.length]=t("HeadingPairs",t("vt:vector",t("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+t("vt:variant",t("vt:i4",String(r.Worksheets))),{size:2,baseType:"variant"})),e[e.length]=t("TitlesOfParts",t("vt:vector",r.SheetNames.map(function(n){return"<vt:lpstr>"+yr(n)+"</vt:lpstr>"}).join(""),{size:r.Worksheets,baseType:"lpstr"})),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}function dI(r){var e=[Tn,st("Properties",null,{xmlns:Mn.CUST_PROPS,"xmlns:vt":Mn.vt})];if(!r)return e.join("");var t=1;return ii(r).forEach(function(i){++t,e[e.length]=st("property",MM(r[i]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:t,name:yr(i)})}),e.length>2&&(e[e.length]="</Properties>",e[1]=e[1].replace("/>",">")),e.join("")}var r5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"};function w9(r,e){var t=[];return ii(r5).map(function(n){for(var i=0;i<su.length;++i)if(su[i][1]==n)return su[i];for(i=0;i<Bl.length;++i)if(Bl[i][1]==n)return Bl[i];throw n}).forEach(function(n){if(r[n[1]]!=null){var i=e&&e.Props&&e.Props[n[1]]!=null?e.Props[n[1]]:r[n[1]];switch(n[2]){case"date":i=new Date(i).toISOString().replace(/\.\d*Z/,"Z");break}typeof i=="number"?i=String(i):i===!0||i===!1?i=i?"1":"0":i instanceof Date&&(i=new Date(i).toISOString().replace(/\.\d*Z/,"")),t.push(Zn(r5[n[1]]||n[1],i))}}),st("DocumentProperties",t.join(""),{xmlns:ls.o})}function x9(r,e){var t=["Worksheets","SheetNames"],n="CustomDocumentProperties",i=[];return r&&ii(r).forEach(function(s){if(Object.prototype.hasOwnProperty.call(r,s)){for(var a=0;a<su.length;++a)if(s==su[a][1])return;for(a=0;a<Bl.length;++a)if(s==Bl[a][1])return;for(a=0;a<t.length;++a)if(s==t[a])return;var o=r[s],c="string";typeof o=="number"?(c="float",o=String(o)):o===!0||o===!1?(c="boolean",o=o?"1":"0"):o=String(o),i.push(st(zw(s),o,{"dt:dt":c}))}}),e&&ii(e).forEach(function(s){if(Object.prototype.hasOwnProperty.call(e,s)&&!(r&&Object.prototype.hasOwnProperty.call(r,s))){var a=e[s],o="string";typeof a=="number"?(o="float",a=String(a)):a===!0||a===!1?(o="boolean",a=a?"1":"0"):a instanceof Date?(o="dateTime.tz",a=a.toISOString()):a=String(a),i.push(st(zw(s),a,{"dt:dt":o}))}}),"<"+n+' xmlns="'+ls.o+'">'+i.join("")+"</"+n+">"}function E9(r){var e=typeof r=="string"?new Date(Date.parse(r)):r,t=e.getTime()/1e3+11644473600,n=t%Math.pow(2,32),i=(t-n)/Math.pow(2,32);n*=1e7,i*=1e7;var s=n/Math.pow(2,32)|0;s>0&&(n=n%Math.pow(2,32),i+=s);var a=Me(8);return a.write_shift(4,n),a.write_shift(4,i),a}function n5(r,e){var t=Me(4),n=Me(4);switch(t.write_shift(4,r==80?31:r),r){case 3:n.write_shift(-4,e);break;case 5:n=Me(8),n.write_shift(8,e,"f");break;case 11:n.write_shift(4,e?1:0);break;case 64:n=E9(e);break;case 31:case 80:for(n=Me(4+2*(e.length+1)+(e.length%2?0:2)),n.write_shift(4,e.length+1),n.write_shift(0,e,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+r+" "+e)}return Qn([t,n])}var pI=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function T9(r){switch(typeof r){case"boolean":return 11;case"number":return(r|0)==r?3:5;case"string":return 31;case"object":if(r instanceof Date)return 64;break}return-1}function i5(r,e,t){var n=Me(8),i=[],s=[],a=8,o=0,c=Me(8),u=Me(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),s.push(c),i.push(u),a+=8+c.length,!e){u=Me(8),u.write_shift(4,0),i.unshift(u);var l=[Me(4)];for(l[0].write_shift(4,r.length),o=0;o<r.length;++o){var d=r[o][0];for(c=Me(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,o+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);l.push(c)}c=Qn(l),s.unshift(c),a+=8+c.length}for(o=0;o<r.length;++o)if(!(e&&!e[r[o][0]])&&!(pI.indexOf(r[o][0])>-1||hI.indexOf(r[o][0])>-1)&&r[o][1]!=null){var g=r[o][1],p=0;if(e){p=+e[r[o][0]];var x=t[p];if(x.p=="version"&&typeof g=="string"){var _=g.split(".");g=(+_[0]<<16)+(+_[1]||0)}c=n5(x.t,g)}else{var E=T9(g);E==-1&&(E=31,g=String(g)),c=n5(E,g)}s.push(c),u=Me(8),u.write_shift(4,e?p:2+o),i.push(u),a+=8+c.length}var P=8*(s.length+1);for(o=0;o<s.length;++o)i[o].write_shift(4,P),P+=s[o].length;return n.write_shift(4,a),n.write_shift(4,s.length),Qn([n].concat(i).concat(s))}function s5(r,e,t,n,i,s){var a=Me(i?68:48),o=[a];a.write_shift(2,65534),a.write_shift(2,0),a.write_shift(4,842412599),a.write_shift(16,Ir.utils.consts.HEADER_CLSID,"hex"),a.write_shift(4,i?2:1),a.write_shift(16,e,"hex"),a.write_shift(4,i?68:48);var c=i5(r,t,n);if(o.push(c),i){var u=i5(i,null,null);a.write_shift(16,s,"hex"),a.write_shift(4,68+c.length),o.push(u)}return Qn(o)}function b9(r,e){e||(e=Me(r));for(var t=0;t<r;++t)e.write_shift(1,0);return e}function A9(r,e){return r.read_shift(e)===1}function Ii(r,e){return e||(e=Me(2)),e.write_shift(2,+!!r),e}function mI(r){return r.read_shift(2,"u")}function As(r,e){return e||(e=Me(2)),e.write_shift(2,r),e}function gI(r,e,t){return t||(t=Me(2)),t.write_shift(1,e=="e"?+r:+!!r),t.write_shift(1,e=="e"?1:0),t}function vI(r,e,t){var n=r.read_shift(t&&t.biff>=12?2:1),i="sbcs-cont";if(t&&t.biff>=8,!t||t.biff==8){var s=r.read_shift(1);s&&(i="dbcs-cont")}else t.biff==12&&(i="wstr");t.biff>=2&&t.biff<=5&&(i="cpstr");var a=n?r.read_shift(n,i):"";return a}function I9(r){var e=r.t||"",t=Me(3);t.write_shift(2,e.length),t.write_shift(1,1);var n=Me(2*e.length);n.write_shift(2*e.length,e,"utf16le");var i=[t,n];return Qn(i)}function S9(r,e,t){var n;if(t){if(t.biff>=2&&t.biff<=5)return r.read_shift(e,"cpstr");if(t.biff>=12)return r.read_shift(e,"dbcs-cont")}var i=r.read_shift(1);return i===0?n=r.read_shift(e,"sbcs-cont"):n=r.read_shift(e,"dbcs-cont"),n}function P9(r,e,t){var n=r.read_shift(t&&t.biff==2?1:2);return n===0?(r.l++,""):S9(r,n,t)}function N9(r,e,t){if(t.biff>5)return P9(r,e,t);var n=r.read_shift(1);return n===0?(r.l++,""):r.read_shift(n,t.biff<=4||!r.lens?"cpstr":"sbcs-cont")}function _I(r,e,t){return t||(t=Me(3+2*r.length)),t.write_shift(2,r.length),t.write_shift(1,1),t.write_shift(31,r,"utf16le"),t}function a5(r,e){e||(e=Me(6+r.length*2)),e.write_shift(4,1+r.length);for(var t=0;t<r.length;++t)e.write_shift(2,r.charCodeAt(t));return e.write_shift(2,0),e}function C9(r){var e=Me(512),t=0,n=r.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var i=n.indexOf("#"),s=i>-1?31:23;switch(n.charAt(0)){case"#":s=28;break;case".":s&=-3;break}e.write_shift(4,2),e.write_shift(4,s);var a=[8,6815827,6619237,4849780,83];for(t=0;t<a.length;++t)e.write_shift(4,a[t]);if(s==28)n=n.slice(1),a5(n,e);else if(s&2){for(a="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));var o=i>-1?n.slice(0,i):n;for(e.write_shift(4,2*(o.length+1)),t=0;t<o.length;++t)e.write_shift(2,o.charCodeAt(t));e.write_shift(2,0),s&8&&a5(i>-1?n.slice(i+1):"",e)}else{for(a="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),t=0;t<a.length;++t)e.write_shift(1,parseInt(a[t],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(e.write_shift(2,c),e.write_shift(4,n.length-3*c+1),t=0;t<n.length-3*c;++t)e.write_shift(1,n.charCodeAt(t+3*c)&255);for(e.write_shift(1,0),e.write_shift(2,65535),e.write_shift(2,57005),t=0;t<6;++t)e.write_shift(4,0)}return e.slice(0,e.l)}function Iu(r,e,t,n){return n||(n=Me(6)),n.write_shift(2,r),n.write_shift(2,e),n.write_shift(2,t||0),n}function k9(r,e,t){var n=t.biff>8?4:2,i=r.read_shift(n),s=r.read_shift(n,"i"),a=r.read_shift(n,"i");return[i,s,a]}function R9(r){var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(2),i=r.read_shift(2);return{s:{c:n,r:e},e:{c:i,r:t}}}function yI(r,e){return e||(e=Me(8)),e.write_shift(2,r.s.r),e.write_shift(2,r.e.r),e.write_shift(2,r.s.c),e.write_shift(2,r.e.c),e}function Mv(r,e,t){var n=1536,i=16;switch(t.bookType){case"biff8":break;case"biff5":n=1280,i=8;break;case"biff4":n=4,i=6;break;case"biff3":n=3,i=6;break;case"biff2":n=2,i=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var s=Me(i);return s.write_shift(2,n),s.write_shift(2,e),i>4&&s.write_shift(2,29282),i>6&&s.write_shift(2,1997),i>8&&(s.write_shift(2,49161),s.write_shift(2,1),s.write_shift(2,1798),s.write_shift(2,0)),s}function L9(r,e){var t=!e||e.biff==8,n=Me(t?112:54);for(n.write_shift(e.biff==8?2:1,7),t&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(t?0:536870912));n.l<n.length;)n.write_shift(1,t?0:32);return n}function D9(r,e){var t=!e||e.biff>=8?2:1,n=Me(8+t*r.name.length);n.write_shift(4,r.pos),n.write_shift(1,r.hs||0),n.write_shift(1,r.dt),n.write_shift(1,r.name.length),e.biff>=8&&n.write_shift(1,1),n.write_shift(t*r.name.length,r.name,e.biff<8?"sbcs":"utf16le");var i=n.slice(0,n.l);return i.l=n.l,i}function F9(r,e){var t=Me(8);t.write_shift(4,r.Count),t.write_shift(4,r.Unique);for(var n=[],i=0;i<r.length;++i)n[i]=I9(r[i]);var s=Qn([t].concat(n));return s.parts=[t.length].concat(n.map(function(a){return a.length})),s}function O9(){var r=Me(18);return r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,29280),r.write_shift(2,17600),r.write_shift(2,56),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,1),r.write_shift(2,500),r}function M9(r){var e=Me(18),t=1718;return r&&r.RTL&&(t|=64),e.write_shift(2,t),e.write_shift(4,0),e.write_shift(4,64),e.write_shift(4,0),e.write_shift(4,0),e}function B9(r,e){var t=r.name||"Arial",n=e&&e.biff==5,i=n?15+t.length:16+2*t.length,s=Me(i);return s.write_shift(2,r.sz*20),s.write_shift(4,0),s.write_shift(2,400),s.write_shift(4,0),s.write_shift(2,0),s.write_shift(1,t.length),n||s.write_shift(1,1),s.write_shift((n?1:2)*t.length,t,n?"sbcs":"utf16le"),s}function V9(r,e,t,n){var i=Me(10);return Iu(r,e,n,i),i.write_shift(4,t),i}function U9(r,e,t,n,i){var s=!i||i.biff==8,a=Me(8+ +s+(1+s)*t.length);return Iu(r,e,n,a),a.write_shift(2,t.length),s&&a.write_shift(1,1),a.write_shift((1+s)*t.length,t,s?"utf16le":"sbcs"),a}function j9(r,e,t,n){var i=t&&t.biff==5;n||(n=Me(i?3+e.length:5+2*e.length)),n.write_shift(2,r),n.write_shift(i?1:2,e.length),i||n.write_shift(1,1),n.write_shift((i?1:2)*e.length,e,i?"sbcs":"utf16le");var s=n.length>n.l?n.slice(0,n.l):n;return s.l==null&&(s.l=s.length),s}function q9(r,e){var t=e.biff==8||!e.biff?4:2,n=Me(2*t+6);return n.write_shift(t,r.s.r),n.write_shift(t,r.e.r+1),n.write_shift(2,r.s.c),n.write_shift(2,r.e.c+1),n.write_shift(2,0),n}function o5(r,e,t,n){var i=t&&t.biff==5;n||(n=Me(i?16:20)),n.write_shift(2,0),r.style?(n.write_shift(2,r.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,r.numFmtId||0),n.write_shift(2,e<<4));var s=0;return r.numFmtId>0&&i&&(s|=1024),n.write_shift(4,s),n.write_shift(4,0),i||n.write_shift(4,0),n.write_shift(2,0),n}function z9(r){var e=Me(8);return e.write_shift(4,0),e.write_shift(2,0),e.write_shift(2,0),e}function W9(r,e,t,n,i,s){var a=Me(8);return Iu(r,e,n,a),gI(t,s,a),a}function H9(r,e,t,n){var i=Me(14);return Iu(r,e,n,i),Au(t,i),i}function $9(r,e,t){if(t.biff<8)return G9(r,e,t);for(var n=[],i=r.l+e,s=r.read_shift(t.biff>8?4:2);s--!==0;)n.push(k9(r,t.biff>8?12:6,t));if(r.l!=i)throw new Error("Bad ExternSheet: "+r.l+" != "+i);return n}function G9(r,e,t){r[r.l+1]==3&&r[r.l]++;var n=vI(r,e,t);return n.charCodeAt(0)==3?n.slice(1):n}function K9(r){var e=Me(2+r.length*8);e.write_shift(2,r.length);for(var t=0;t<r.length;++t)yI(r[t],e);return e}function Y9(r){var e=Me(24),t=Bn(r[0]);e.write_shift(2,t.r),e.write_shift(2,t.r),e.write_shift(2,t.c),e.write_shift(2,t.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),i=0;i<16;++i)e.write_shift(1,parseInt(n[i],16));return Qn([e,C9(r[1])])}function X9(r){var e=r[1].Tooltip,t=Me(10+2*(e.length+1));t.write_shift(2,2048);var n=Bn(r[0]);t.write_shift(2,n.r),t.write_shift(2,n.r),t.write_shift(2,n.c),t.write_shift(2,n.c);for(var i=0;i<e.length;++i)t.write_shift(2,e.charCodeAt(i));return t.write_shift(2,0),t}function J9(r){return r||(r=Me(4)),r.write_shift(2,1),r.write_shift(2,1),r}function Q9(r,e,t){if(!t.cellStyles)return Aa(r,e);var n=t&&t.biff>=12?4:2,i=r.read_shift(n),s=r.read_shift(n),a=r.read_shift(n),o=r.read_shift(n),c=r.read_shift(2);n==2&&(r.l+=2);var u={s:i,e:s,w:a,ixfe:o,flags:c};return(t.biff>=5||!t.biff)&&(u.level=c>>8&7),u}function Z9(r,e){var t=Me(12);t.write_shift(2,e),t.write_shift(2,e),t.write_shift(2,r.width*256),t.write_shift(2,0);var n=0;return r.hidden&&(n|=1),t.write_shift(1,n),n=r.level||0,t.write_shift(1,n),t.write_shift(2,0),t}function eB(r){for(var e=Me(2*r),t=0;t<r;++t)e.write_shift(2,t+1);return e}function tB(r,e,t){var n=Me(15);return Cd(n,r,e),n.write_shift(8,t,"f"),n}function rB(r,e,t){var n=Me(9);return Cd(n,r,e),n.write_shift(2,t),n}var nB=function(){var r={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},e=Iv({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function t(o,c){var u=[],l=bu(1);switch(c.type){case"base64":l=Hs(io(o));break;case"binary":l=Hs(o);break;case"buffer":case"array":l=o;break}cs(l,0);var d=l.read_shift(1),g=!!(d&136),p=!1,x=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,g=!0;break;case 49:p=!0,g=!0;break;case 131:break;case 139:break;case 140:x=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var _=0,E=521;d==2&&(_=l.read_shift(2)),l.l+=3,d!=2&&(_=l.read_shift(4)),_>1048576&&(_=1e6),d!=2&&(E=l.read_shift(2));var P=l.read_shift(2),L=c.codepage||1252;d!=2&&(l.l+=16,l.read_shift(1),l[l.l]!==0&&(L=r[l[l.l]]),l.l+=1,l.l+=2),x&&(l.l+=36);for(var M=[],K={},ie=Math.min(l.length,d==2?521:E-10-(p?264:0)),oe=x?32:11;l.l<ie&&l[l.l]!=13;)switch(K={},K.name=cp.utils.decode(L,l.slice(l.l,l.l+oe)).replace(/[\u0000\r\n].*$/g,""),l.l+=oe,K.type=String.fromCharCode(l.read_shift(1)),d!=2&&!x&&(K.offset=l.read_shift(4)),K.len=l.read_shift(1),d==2&&(K.offset=l.read_shift(2)),K.dec=l.read_shift(1),K.name.length&&M.push(K),d!=2&&(l.l+=x?13:14),K.type){case"B":(!p||K.len!=8)&&c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+K.name+":"+K.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+K.type)}if(l[l.l]!==13&&(l.l=E-1),l.read_shift(1)!==13)throw new Error("DBF Terminator not found "+l.l+" "+l[l.l]);l.l=E;var N=0,A=0;for(u[0]=[],A=0;A!=M.length;++A)u[0][A]=M[A].name;for(;_-- >0;){if(l[l.l]===42){l.l+=P;continue}for(++l.l,u[++N]=[],A=0,A=0;A!=M.length;++A){var k=l.slice(l.l,l.l+M[A].len);l.l+=M[A].len,cs(k,0);var V=cp.utils.decode(L,k);switch(M[A].type){case"C":V.trim().length&&(u[N][A]=V.replace(/\s+$/,""));break;case"D":V.length===8?u[N][A]=new Date(+V.slice(0,4),+V.slice(4,6)-1,+V.slice(6,8)):u[N][A]=V;break;case"F":u[N][A]=parseFloat(V.trim());break;case"+":case"I":u[N][A]=x?k.read_shift(-4,"i")^2147483648:k.read_shift(4,"i");break;case"L":switch(V.trim().toUpperCase()){case"Y":case"T":u[N][A]=!0;break;case"N":case"F":u[N][A]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+V+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[N][A]="##MEMO##"+(x?parseInt(V.trim(),10):k.read_shift(4));break;case"N":V=V.replace(/\u0000/g,"").trim(),V&&V!="."&&(u[N][A]=+V||0);break;case"@":u[N][A]=new Date(k.read_shift(-8,"f")-621356832e5);break;case"T":u[N][A]=new Date((k.read_shift(4)-2440588)*864e5+k.read_shift(4));break;case"Y":u[N][A]=k.read_shift(4,"i")/1e4+k.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[N][A]=-k.read_shift(-8,"f");break;case"B":if(p&&M[A].len==8){u[N][A]=k.read_shift(8,"f");break}case"G":case"P":k.l+=M[A].len;break;case"0":if(M[A].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+M[A].type)}}}if(d!=2&&l.l<l.length&&l[l.l++]!=26)throw new Error("DBF EOF Marker missing "+(l.l-1)+" of "+l.length+" "+l[l.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=M,u}function n(o,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var l=bh(t(o,u),u);return l["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,l}function i(o,c){try{return Lu(n(o,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var s={B:8,C:250,L:1,D:8,"?":0,"":0};function a(o,c){var u=c||{};if(+u.codepage>=0&&Yf(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var l=Gi(),d=xp(o,{header:1,raw:!0,cellDates:!0}),g=d[0],p=d.slice(1),x=o["!cols"]||[],_=0,E=0,P=0,L=1;for(_=0;_<g.length;++_){if(((x[_]||{}).DBF||{}).name){g[_]=x[_].DBF.name,++P;continue}if(g[_]!=null){if(++P,typeof g[_]=="number"&&(g[_]=g[_].toString(10)),typeof g[_]!="string")throw new Error("DBF Invalid column name "+g[_]+" |"+typeof g[_]+"|");if(g.indexOf(g[_])!==_){for(E=0;E<1024;++E)if(g.indexOf(g[_]+"_"+E)==-1){g[_]+="_"+E;break}}}}var M=Vr(o["!ref"]),K=[],ie=[],oe=[];for(_=0;_<=M.e.c-M.s.c;++_){var N="",A="",k=0,V=[];for(E=0;E<p.length;++E)p[E][_]!=null&&V.push(p[E][_]);if(V.length==0||g[_]==null){K[_]="?";continue}for(E=0;E<V.length;++E){switch(typeof V[E]){case"number":A="B";break;case"string":A="C";break;case"boolean":A="L";break;case"object":A=V[E]instanceof Date?"D":"C";break;default:A="C"}k=Math.max(k,String(V[E]).length),N=N&&N!=A?"C":A}k>250&&(k=250),A=((x[_]||{}).DBF||{}).type,A=="C"&&x[_].DBF.len>k&&(k=x[_].DBF.len),N=="B"&&A=="N"&&(N="N",oe[_]=x[_].DBF.dec,k=x[_].DBF.len),ie[_]=N=="C"||A=="N"?k:s[N]||0,L+=ie[_],K[_]=N}var b=l.next(32);for(b.write_shift(4,318902576),b.write_shift(4,p.length),b.write_shift(2,296+32*P),b.write_shift(2,L),_=0;_<4;++_)b.write_shift(4,0);for(b.write_shift(4,0|(+e[xA]||3)<<8),_=0,E=0;_<g.length;++_)if(g[_]!=null){var S=l.next(32),R=(g[_].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);S.write_shift(1,R,"sbcs"),S.write_shift(1,K[_]=="?"?"C":K[_],"sbcs"),S.write_shift(4,E),S.write_shift(1,ie[_]||s[K[_]]||0),S.write_shift(1,oe[_]||0),S.write_shift(1,2),S.write_shift(4,0),S.write_shift(1,0),S.write_shift(4,0),S.write_shift(4,0),E+=ie[_]||s[K[_]]||0}var se=l.next(264);for(se.write_shift(4,13),_=0;_<65;++_)se.write_shift(4,0);for(_=0;_<p.length;++_){var ve=l.next(L);for(ve.write_shift(1,0),E=0;E<g.length;++E)if(g[E]!=null)switch(K[E]){case"L":ve.write_shift(1,p[_][E]==null?63:p[_][E]?84:70);break;case"B":ve.write_shift(8,p[_][E]||0,"f");break;case"N":var Ee="0";for(typeof p[_][E]=="number"&&(Ee=p[_][E].toFixed(oe[E]||0)),P=0;P<ie[E]-Ee.length;++P)ve.write_shift(1,32);ve.write_shift(1,Ee,"sbcs");break;case"D":p[_][E]?(ve.write_shift(4,("0000"+p[_][E].getFullYear()).slice(-4),"sbcs"),ve.write_shift(2,("00"+(p[_][E].getMonth()+1)).slice(-2),"sbcs"),ve.write_shift(2,("00"+p[_][E].getDate()).slice(-2),"sbcs")):ve.write_shift(8,"00000000","sbcs");break;case"C":var Ne=String(p[_][E]!=null?p[_][E]:"").slice(0,ie[E]);for(ve.write_shift(1,Ne,"sbcs"),P=0;P<ie[E]-Ne.length;++P)ve.write_shift(1,32);break}}return l.next(1).write_shift(1,26),l.end()}return{to_workbook:i,to_sheet:n,from_sheet:a}}(),iB=function(){var r={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},e=new RegExp("\x1BN("+ii(r).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),t=function(g,p){var x=r[p];return typeof x=="number"?kw(x):x},n=function(g,p,x){var _=p.charCodeAt(0)-32<<4|x.charCodeAt(0)-48;return _==59?g:kw(_)};r["|"]=254;function i(g,p){switch(p.type){case"base64":return s(io(g),p);case"binary":return s(g,p);case"buffer":return s(lr&&Buffer.isBuffer(g)?g.toString("binary"):Ad(g),p);case"array":return s(pm(g),p)}throw new Error("Unrecognized type "+p.type)}function s(g,p){var x=g.split(/[\n\r]+/),_=-1,E=-1,P=0,L=0,M=[],K=[],ie=null,oe={},N=[],A=[],k=[],V=0,b;for(+p.codepage>=0&&Yf(+p.codepage);P!==x.length;++P){V=0;var S=x[P].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(e,t),R=S.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),se=R[0],ve;if(S.length>0)switch(se){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&K.push(S.slice(3).replace(/;;/g,";"));break;case"C":var Ee=!1,Ne=!1,_e=!1,Ce=!1,Fe=-1,nt=-1;for(L=1;L<R.length;++L)switch(R[L].charAt(0)){case"A":break;case"X":E=parseInt(R[L].slice(1))-1,Ne=!0;break;case"Y":for(_=parseInt(R[L].slice(1))-1,Ne||(E=0),b=M.length;b<=_;++b)M[b]=[];break;case"K":ve=R[L].slice(1),ve.charAt(0)==='"'?ve=ve.slice(1,ve.length-1):ve==="TRUE"?ve=!0:ve==="FALSE"?ve=!1:isNaN(Qa(ve))?isNaN(Jf(ve).getDate())||(ve=ki(ve)):(ve=Qa(ve),ie!==null&&LA(ie)&&(ve=MA(ve))),Ee=!0;break;case"E":Ce=!0;var T=rV(R[L].slice(1),{r:_,c:E});M[_][E]=[M[_][E],T];break;case"S":_e=!0,M[_][E]=[M[_][E],"S5S"];break;case"G":break;case"R":Fe=parseInt(R[L].slice(1))-1;break;case"C":nt=parseInt(R[L].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}if(Ee&&(M[_][E]&&M[_][E].length==2?M[_][E][0]=ve:M[_][E]=ve,ie=null),_e){if(Ce)throw new Error("SYLK shared formula cannot have own formula");var D=Fe>-1&&M[Fe][nt];if(!D||!D[1])throw new Error("SYLK shared formula cannot find base");M[_][E][1]=nV(D[1],{r:_-Fe,c:E-nt})}break;case"F":var B=0;for(L=1;L<R.length;++L)switch(R[L].charAt(0)){case"X":E=parseInt(R[L].slice(1))-1,++B;break;case"Y":for(_=parseInt(R[L].slice(1))-1,b=M.length;b<=_;++b)M[b]=[];break;case"M":V=parseInt(R[L].slice(1))/20;break;case"F":break;case"G":break;case"P":ie=K[parseInt(R[L].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(k=R[L].slice(1).split(" "),b=parseInt(k[0],10);b<=parseInt(k[1],10);++b)V=parseInt(k[2],10),A[b-1]=V===0?{hidden:!0}:{wch:V},Bv(A[b-1]);break;case"C":E=parseInt(R[L].slice(1))-1,A[E]||(A[E]={});break;case"R":_=parseInt(R[L].slice(1))-1,N[_]||(N[_]={}),V>0?(N[_].hpt=V,N[_].hpx=bI(V)):V===0&&(N[_].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}B<1&&(ie=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+S)}}return N.length>0&&(oe["!rows"]=N),A.length>0&&(oe["!cols"]=A),p&&p.sheetRows&&(M=M.slice(0,p.sheetRows)),[M,oe]}function a(g,p){var x=i(g,p),_=x[0],E=x[1],P=bh(_,p);return ii(E).forEach(function(L){P[L]=E[L]}),P}function o(g,p){return Lu(a(g,p),p)}function c(g,p,x,_){var E="C;Y"+(x+1)+";X"+(_+1)+";K";switch(g.t){case"n":E+=g.v||0,g.f&&!g.F&&(E+=";E"+Uv(g.f,{r:x,c:_}));break;case"b":E+=g.v?"TRUE":"FALSE";break;case"e":E+=g.w||g.v;break;case"d":E+='"'+(g.w||g.v)+'"';break;case"s":E+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return E}function u(g,p){p.forEach(function(x,_){var E="F;W"+(_+1)+" "+(_+1)+" ";x.hidden?E+="0":(typeof x.width=="number"&&!x.wpx&&(x.wpx=vp(x.width)),typeof x.wpx=="number"&&!x.wch&&(x.wch=_p(x.wpx)),typeof x.wch=="number"&&(E+=Math.round(x.wch))),E.charAt(E.length-1)!=" "&&g.push(E)})}function l(g,p){p.forEach(function(x,_){var E="F;";x.hidden?E+="M0;":x.hpt?E+="M"+20*x.hpt+";":x.hpx&&(E+="M"+20*yp(x.hpx)+";"),E.length>2&&g.push(E+"R"+(_+1))})}function d(g,p){var x=["ID;PWXL;N;E"],_=[],E=Vr(g["!ref"]),P,L=Array.isArray(g),M=`\r
`;x.push("P;PGeneral"),x.push("F;P0;DG0G8;M255"),g["!cols"]&&u(x,g["!cols"]),g["!rows"]&&l(x,g["!rows"]),x.push("B;Y"+(E.e.r-E.s.r+1)+";X"+(E.e.c-E.s.c+1)+";D"+[E.s.c,E.s.r,E.e.c,E.e.r].join(" "));for(var K=E.s.r;K<=E.e.r;++K)for(var ie=E.s.c;ie<=E.e.c;++ie){var oe=xr({r:K,c:ie});P=L?(g[K]||[])[ie]:g[oe],!(!P||P.v==null&&(!P.f||P.F))&&_.push(c(P,g,K,ie))}return x.join(M)+M+_.join(M)+M+"E"+M}return{to_workbook:o,to_sheet:a,from_sheet:d}}(),sB=function(){function r(s,a){switch(a.type){case"base64":return e(io(s),a);case"binary":return e(s,a);case"buffer":return e(lr&&Buffer.isBuffer(s)?s.toString("binary"):Ad(s),a);case"array":return e(pm(s),a)}throw new Error("Unrecognized type "+a.type)}function e(s,a){for(var o=s.split(`
`),c=-1,u=-1,l=0,d=[];l!==o.length;++l){if(o[l].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var g=o[l].trim().split(","),p=g[0],x=g[1];++l;for(var _=o[l]||"";(_.match(/["]/g)||[]).length&1&&l<o.length-1;)_+=`
`+o[++l];switch(_=_.trim(),+p){case-1:if(_==="BOT"){d[++c]=[],u=0;continue}else if(_!=="EOD")throw new Error("Unrecognized DIF special command "+_);break;case 0:_==="TRUE"?d[c][u]=!0:_==="FALSE"?d[c][u]=!1:isNaN(Qa(x))?isNaN(Jf(x).getDate())?d[c][u]=x:d[c][u]=ki(x):d[c][u]=Qa(x),++u;break;case 1:_=_.slice(1,_.length-1),_=_.replace(/""/g,'"'),_&&_.match(/^=".*"$/)&&(_=_.slice(2,-1)),d[c][u++]=_!==""?_:null;break}if(_==="EOD")break}}return a&&a.sheetRows&&(d=d.slice(0,a.sheetRows)),d}function t(s,a){return bh(r(s,a),a)}function n(s,a){return Lu(t(s,a),a)}var i=function(){var s=function(c,u,l,d,g){c.push(u),c.push(l+","+d),c.push('"'+g.replace(/"/g,'""')+'"')},a=function(c,u,l,d){c.push(u+","+l),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],l=Vr(c["!ref"]),d,g=Array.isArray(c);s(u,"TABLE",0,1,"sheetjs"),s(u,"VECTORS",0,l.e.r-l.s.r+1,""),s(u,"TUPLES",0,l.e.c-l.s.c+1,""),s(u,"DATA",0,0,"");for(var p=l.s.r;p<=l.e.r;++p){a(u,-1,0,"BOT");for(var x=l.s.c;x<=l.e.c;++x){var _=xr({r:p,c:x});if(d=g?(c[p]||[])[x]:c[_],!d){a(u,1,0,"");continue}switch(d.t){case"n":var E=d.w;!E&&d.v!=null&&(E=d.v),E==null?d.f&&!d.F?a(u,1,0,"="+d.f):a(u,1,0,""):a(u,0,E,"V");break;case"b":a(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":a(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=hc(d.z||tn[14],Yi(ki(d.v)))),a(u,0,d.w,"V");break;default:a(u,1,0,"")}}}a(u,-1,0,"EOD");var P=`\r
`,L=u.join(P);return L}}();return{to_workbook:n,to_sheet:t,from_sheet:i}}(),wI=function(){function r(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function e(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function t(d,g){for(var p=d.split(`
`),x=-1,_=-1,E=0,P=[];E!==p.length;++E){var L=p[E].trim().split(":");if(L[0]==="cell"){var M=Bn(L[1]);if(P.length<=M.r)for(x=P.length;x<=M.r;++x)P[x]||(P[x]=[]);switch(x=M.r,_=M.c,L[2]){case"t":P[x][_]=r(L[3]);break;case"v":P[x][_]=+L[3];break;case"vtf":var K=L[L.length-1];case"vtc":switch(L[3]){case"nl":P[x][_]=!!+L[4];break;default:P[x][_]=+L[4];break}L[2]=="vtf"&&(P[x][_]=[P[x][_],K])}}}return g&&g.sheetRows&&(P=P.slice(0,g.sheetRows)),P}function n(d,g){return bh(t(d,g),g)}function i(d,g){return Lu(n(d,g),g)}var s=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),a=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,o=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var g=[],p=[],x,_="",E=ms(d["!ref"]),P=Array.isArray(d),L=E.s.r;L<=E.e.r;++L)for(var M=E.s.c;M<=E.e.c;++M)if(_=xr({r:L,c:M}),x=P?(d[L]||[])[M]:d[_],!(!x||x.v==null||x.t==="z")){switch(p=["cell",_,"t"],x.t){case"s":case"str":p.push(e(x.v));break;case"n":x.f?(p[2]="vtf",p[3]="n",p[4]=x.v,p[5]=e(x.f)):(p[2]="v",p[3]=x.v);break;case"b":p[2]="vt"+(x.f?"f":"c"),p[3]="nl",p[4]=x.v?"1":"0",p[5]=e(x.f||(x.v?"TRUE":"FALSE"));break;case"d":var K=Yi(ki(x.v));p[2]="vtc",p[3]="nd",p[4]=""+K,p[5]=x.w||hc(x.z||tn[14],K);break;case"e":continue}g.push(p.join(":"))}return g.push("sheet:c:"+(E.e.c-E.s.c+1)+":r:"+(E.e.r-E.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function l(d){return[s,a,o,a,u(d),c].join(`
`)}return{to_workbook:i,to_sheet:n,from_sheet:l}}(),aB=function(){function r(l,d,g,p,x){x.raw?d[g][p]=l:l===""||(l==="TRUE"?d[g][p]=!0:l==="FALSE"?d[g][p]=!1:isNaN(Qa(l))?isNaN(Jf(l).getDate())?d[g][p]=l:d[g][p]=ki(l):d[g][p]=Qa(l))}function e(l,d){var g=d||{},p=[];if(!l||l.length===0)return p;for(var x=l.split(/[\r\n]/),_=x.length-1;_>=0&&x[_].length===0;)--_;for(var E=10,P=0,L=0;L<=_;++L)P=x[L].indexOf(" "),P==-1?P=x[L].length:P++,E=Math.max(E,P);for(L=0;L<=_;++L){p[L]=[];var M=0;for(r(x[L].slice(0,E).trim(),p,L,M,g),M=1;M<=(x[L].length-E)/10+1;++M)r(x[L].slice(E+(M-1)*10,E+M*10).trim(),p,L,M,g)}return g.sheetRows&&(p=p.slice(0,g.sheetRows)),p}var t={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function i(l){for(var d={},g=!1,p=0,x=0;p<l.length;++p)(x=l.charCodeAt(p))==34?g=!g:!g&&x in t&&(d[x]=(d[x]||0)+1);x=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p]);if(!x.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&x.push([d[p],p])}return x.sort(function(_,E){return _[0]-E[0]||n[_[1]]-n[E[1]]}),t[x.pop()[1]]||44}function s(l,d){var g=d||{},p="",x=g.dense?[]:{},_={s:{c:0,r:0},e:{c:0,r:0}};l.slice(0,4)=="sep="?l.charCodeAt(5)==13&&l.charCodeAt(6)==10?(p=l.charAt(4),l=l.slice(7)):l.charCodeAt(5)==13||l.charCodeAt(5)==10?(p=l.charAt(4),l=l.slice(6)):p=i(l.slice(0,1024)):g&&g.FS?p=g.FS:p=i(l.slice(0,1024));var E=0,P=0,L=0,M=0,K=0,ie=p.charCodeAt(0),oe=!1,N=0,A=l.charCodeAt(0);l=l.replace(/\r\n/mg,`
`);var k=g.dateNF!=null?EM(g.dateNF):null;function V(){var b=l.slice(M,K),S={};if(b.charAt(0)=='"'&&b.charAt(b.length-1)=='"'&&(b=b.slice(1,-1).replace(/""/g,'"')),b.length===0)S.t="z";else if(g.raw)S.t="s",S.v=b;else if(b.trim().length===0)S.t="s",S.v=b;else if(b.charCodeAt(0)==61)b.charCodeAt(1)==34&&b.charCodeAt(b.length-1)==34?(S.t="s",S.v=b.slice(2,-1).replace(/""/g,'"')):iV(b)?(S.t="n",S.f=b.slice(1)):(S.t="s",S.v=b);else if(b=="TRUE")S.t="b",S.v=!0;else if(b=="FALSE")S.t="b",S.v=!1;else if(!isNaN(L=Qa(b)))S.t="n",g.cellText!==!1&&(S.w=b),S.v=L;else if(!isNaN(Jf(b).getDate())||k&&b.match(k)){S.z=g.dateNF||tn[14];var R=0;k&&b.match(k)&&(b=TM(b,g.dateNF,b.match(k)||[]),R=1),g.cellDates?(S.t="d",S.v=ki(b,R)):(S.t="n",S.v=Yi(ki(b,R))),g.cellText!==!1&&(S.w=hc(S.z,S.v instanceof Date?Yi(S.v):S.v)),g.cellNF||delete S.z}else S.t="s",S.v=b;if(S.t=="z"||(g.dense?(x[E]||(x[E]=[]),x[E][P]=S):x[xr({c:P,r:E})]=S),M=K+1,A=l.charCodeAt(M),_.e.c<P&&(_.e.c=P),_.e.r<E&&(_.e.r=E),N==ie)++P;else if(P=0,++E,g.sheetRows&&g.sheetRows<=E)return!0}e:for(;K<l.length;++K)switch(N=l.charCodeAt(K)){case 34:A===34&&(oe=!oe);break;case ie:case 10:case 13:if(!oe&&V())break e;break}return K-M>0&&V(),x["!ref"]=En(_),x}function a(l,d){return!(d&&d.PRN)||d.FS||l.slice(0,4)=="sep="||l.indexOf("	")>=0||l.indexOf(",")>=0||l.indexOf(";")>=0?s(l,d):bh(e(l,d),d)}function o(l,d){var g="",p=d.type=="string"?[0,0,0,0]:_z(l,d);switch(d.type){case"base64":g=io(l);break;case"binary":g=l;break;case"buffer":d.codepage==65001?g=l.toString("utf8"):d.codepage&&typeof cp<"u"||(g=lr&&Buffer.isBuffer(l)?l.toString("binary"):Ad(l));break;case"array":g=pm(l);break;case"string":g=l;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?g=wf(g.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?g=wf(g):d.type=="binary"&&typeof cp<"u",g.slice(0,19)=="socialcalc:version:"?wI.to_sheet(d.type=="string"?g:wf(g),d):a(g,d)}function c(l,d){return Lu(o(l,d),d)}function u(l){for(var d=[],g=Vr(l["!ref"]),p,x=Array.isArray(l),_=g.s.r;_<=g.e.r;++_){for(var E=[],P=g.s.c;P<=g.e.c;++P){var L=xr({r:_,c:P});if(p=x?(l[_]||[])[P]:l[L],!p||p.v==null){E.push("          ");continue}for(var M=(p.w||(so(p),p.w)||"").slice(0,10);M.length<10;)M+=" ";E.push(M+(P===0?" ":""))}d.push(E.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:o,from_sheet:u}}(),c5=function(){function r(T,D,B){if(T){cs(T,T.l||0);for(var U=B.Enum||Fe;T.l<T.length;){var J=T.read_shift(2),ae=U[J]||U[65535],le=T.read_shift(2),ue=T.l+le,xe=ae.f&&ae.f(T,le,B);if(T.l=ue,D(xe,ae,J))return}}}function e(T,D){switch(D.type){case"base64":return t(Hs(io(T)),D);case"binary":return t(Hs(T),D);case"buffer":case"array":return t(T,D)}throw"Unsupported type "+D.type}function t(T,D){if(!T)return T;var B=D||{},U=B.dense?[]:{},J="Sheet1",ae="",le=0,ue={},xe=[],Be=[],ze={s:{r:0,c:0},e:{r:0,c:0}},Ze=B.sheetRows||0;if(T[2]==0&&(T[3]==8||T[3]==9)&&T.length>=16&&T[14]==5&&T[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(T[2]==2)B.Enum=Fe,r(T,function(We,_t,$e){switch($e){case 0:B.vers=We,We>=4096&&(B.qpro=!0);break;case 6:ze=We;break;case 204:We&&(ae=We);break;case 222:ae=We;break;case 15:case 51:B.qpro||(We[1].v=We[1].v.slice(1));case 13:case 14:case 16:$e==14&&(We[2]&112)==112&&(We[2]&15)>1&&(We[2]&15)<15&&(We[1].z=B.dateNF||tn[14],B.cellDates&&(We[1].t="d",We[1].v=MA(We[1].v))),B.qpro&&We[3]>le&&(U["!ref"]=En(ze),ue[J]=U,xe.push(J),U=B.dense?[]:{},ze={s:{r:0,c:0},e:{r:0,c:0}},le=We[3],J=ae||"Sheet"+(le+1),ae="");var rt=B.dense?(U[We[0].r]||[])[We[0].c]:U[xr(We[0])];if(rt){rt.t=We[1].t,rt.v=We[1].v,We[1].z!=null&&(rt.z=We[1].z),We[1].f!=null&&(rt.f=We[1].f);break}B.dense?(U[We[0].r]||(U[We[0].r]=[]),U[We[0].r][We[0].c]=We[1]):U[xr(We[0])]=We[1];break}},B);else if(T[2]==26||T[2]==14)B.Enum=nt,T[2]==14&&(B.qpro=!0,T.l=0),r(T,function(We,_t,$e){switch($e){case 204:J=We;break;case 22:We[1].v=We[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(We[3]>le&&(U["!ref"]=En(ze),ue[J]=U,xe.push(J),U=B.dense?[]:{},ze={s:{r:0,c:0},e:{r:0,c:0}},le=We[3],J="Sheet"+(le+1)),Ze>0&&We[0].r>=Ze)break;B.dense?(U[We[0].r]||(U[We[0].r]=[]),U[We[0].r][We[0].c]=We[1]):U[xr(We[0])]=We[1],ze.e.c<We[0].c&&(ze.e.c=We[0].c),ze.e.r<We[0].r&&(ze.e.r=We[0].r);break;case 27:We[14e3]&&(Be[We[14e3][0]]=We[14e3][1]);break;case 1537:Be[We[0]]=We[1],We[0]==le&&(J=We[1]);break}},B);else throw new Error("Unrecognized LOTUS BOF "+T[2]);if(U["!ref"]=En(ze),ue[ae||J]=U,xe.push(ae||J),!Be.length)return{SheetNames:xe,Sheets:ue};for(var at={},Re=[],ne=0;ne<Be.length;++ne)ue[xe[ne]]?(Re.push(Be[ne]||xe[ne]),at[Be[ne]]=ue[Be[ne]]||ue[xe[ne]]):(Re.push(Be[ne]),at[Be[ne]]={"!ref":"A1"});return{SheetNames:Re,Sheets:at}}function n(T,D){var B=D||{};if(+B.codepage>=0&&Yf(+B.codepage),B.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Gi(),J=Vr(T["!ref"]),ae=Array.isArray(T),le=[];ot(U,0,s(1030)),ot(U,6,c(J));for(var ue=Math.min(J.e.r,8191),xe=J.s.r;xe<=ue;++xe)for(var Be=ri(xe),ze=J.s.c;ze<=J.e.c;++ze){xe===J.s.r&&(le[ze]=di(ze));var Ze=le[ze]+Be,at=ae?(T[xe]||[])[ze]:T[Ze];if(!(!at||at.t=="z"))if(at.t=="n")(at.v|0)==at.v&&at.v>=-32768&&at.v<=32767?ot(U,13,p(xe,ze,at.v)):ot(U,14,_(xe,ze,at.v));else{var Re=so(at);ot(U,15,d(xe,ze,Re.slice(0,239)))}}return ot(U,1),U.end()}function i(T,D){var B=D||{};if(+B.codepage>=0&&Yf(+B.codepage),B.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Gi();ot(U,0,a(T));for(var J=0,ae=0;J<T.SheetNames.length;++J)(T.Sheets[T.SheetNames[J]]||{})["!ref"]&&ot(U,27,Ce(T.SheetNames[J],ae++));var le=0;for(J=0;J<T.SheetNames.length;++J){var ue=T.Sheets[T.SheetNames[J]];if(!(!ue||!ue["!ref"])){for(var xe=Vr(ue["!ref"]),Be=Array.isArray(ue),ze=[],Ze=Math.min(xe.e.r,8191),at=xe.s.r;at<=Ze;++at)for(var Re=ri(at),ne=xe.s.c;ne<=xe.e.c;++ne){at===xe.s.r&&(ze[ne]=di(ne));var We=ze[ne]+Re,_t=Be?(ue[at]||[])[ne]:ue[We];if(!(!_t||_t.t=="z"))if(_t.t=="n")ot(U,23,V(at,ne,le,_t.v));else{var $e=so(_t);ot(U,22,N(at,ne,le,$e.slice(0,239)))}}++le}}return ot(U,1),U.end()}function s(T){var D=Me(2);return D.write_shift(2,T),D}function a(T){var D=Me(26);D.write_shift(2,4096),D.write_shift(2,4),D.write_shift(4,0);for(var B=0,U=0,J=0,ae=0;ae<T.SheetNames.length;++ae){var le=T.SheetNames[ae],ue=T.Sheets[le];if(!(!ue||!ue["!ref"])){++J;var xe=ms(ue["!ref"]);B<xe.e.r&&(B=xe.e.r),U<xe.e.c&&(U=xe.e.c)}}return B>8191&&(B=8191),D.write_shift(2,B),D.write_shift(1,J),D.write_shift(1,U),D.write_shift(2,0),D.write_shift(2,0),D.write_shift(1,1),D.write_shift(1,2),D.write_shift(4,0),D.write_shift(4,0),D}function o(T,D,B){var U={s:{c:0,r:0},e:{c:0,r:0}};return D==8&&B.qpro?(U.s.c=T.read_shift(1),T.l++,U.s.r=T.read_shift(2),U.e.c=T.read_shift(1),T.l++,U.e.r=T.read_shift(2),U):(U.s.c=T.read_shift(2),U.s.r=T.read_shift(2),D==12&&B.qpro&&(T.l+=2),U.e.c=T.read_shift(2),U.e.r=T.read_shift(2),D==12&&B.qpro&&(T.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(T){var D=Me(8);return D.write_shift(2,T.s.c),D.write_shift(2,T.s.r),D.write_shift(2,T.e.c),D.write_shift(2,T.e.r),D}function u(T,D,B){var U=[{c:0,r:0},{t:"n",v:0},0,0];return B.qpro&&B.vers!=20768?(U[0].c=T.read_shift(1),U[3]=T.read_shift(1),U[0].r=T.read_shift(2),T.l+=2):(U[2]=T.read_shift(1),U[0].c=T.read_shift(2),U[0].r=T.read_shift(2)),U}function l(T,D,B){var U=T.l+D,J=u(T,D,B);if(J[1].t="s",B.vers==20768){T.l++;var ae=T.read_shift(1);return J[1].v=T.read_shift(ae,"utf8"),J}return B.qpro&&T.l++,J[1].v=T.read_shift(U-T.l,"cstr"),J}function d(T,D,B){var U=Me(7+B.length);U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(1,39);for(var J=0;J<U.length;++J){var ae=B.charCodeAt(J);U.write_shift(1,ae>=128?95:ae)}return U.write_shift(1,0),U}function g(T,D,B){var U=u(T,D,B);return U[1].v=T.read_shift(2,"i"),U}function p(T,D,B){var U=Me(7);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(2,B,"i"),U}function x(T,D,B){var U=u(T,D,B);return U[1].v=T.read_shift(8,"f"),U}function _(T,D,B){var U=Me(13);return U.write_shift(1,255),U.write_shift(2,D),U.write_shift(2,T),U.write_shift(8,B,"f"),U}function E(T,D,B){var U=T.l+D,J=u(T,D,B);if(J[1].v=T.read_shift(8,"f"),B.qpro)T.l=U;else{var ae=T.read_shift(2);K(T.slice(T.l,T.l+ae),J),T.l+=ae}return J}function P(T,D,B){var U=D&32768;return D&=-32769,D=(U?T:0)+(D>=8192?D-16384:D),(U?"":"$")+(B?di(D):ri(D))}var L={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},M=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function K(T,D){cs(T,0);for(var B=[],U=0,J="",ae="",le="",ue="";T.l<T.length;){var xe=T[T.l++];switch(xe){case 0:B.push(T.read_shift(8,"f"));break;case 1:ae=P(D[0].c,T.read_shift(2),!0),J=P(D[0].r,T.read_shift(2),!1),B.push(ae+J);break;case 2:{var Be=P(D[0].c,T.read_shift(2),!0),ze=P(D[0].r,T.read_shift(2),!1);ae=P(D[0].c,T.read_shift(2),!0),J=P(D[0].r,T.read_shift(2),!1),B.push(Be+ze+":"+ae+J)}break;case 3:if(T.l<T.length){console.error("WK1 premature formula end");return}break;case 4:B.push("("+B.pop()+")");break;case 5:B.push(T.read_shift(2));break;case 6:{for(var Ze="";xe=T[T.l++];)Ze+=String.fromCharCode(xe);B.push('"'+Ze.replace(/"/g,'""')+'"')}break;case 8:B.push("-"+B.pop());break;case 23:B.push("+"+B.pop());break;case 22:B.push("NOT("+B.pop()+")");break;case 20:case 21:ue=B.pop(),le=B.pop(),B.push(["AND","OR"][xe-20]+"("+le+","+ue+")");break;default:if(xe<32&&M[xe])ue=B.pop(),le=B.pop(),B.push(le+M[xe]+ue);else if(L[xe]){if(U=L[xe][1],U==69&&(U=T[T.l++]),U>B.length){console.error("WK1 bad formula parse 0x"+xe.toString(16)+":|"+B.join("|")+"|");return}var at=B.slice(-U);B.length-=U,B.push(L[xe][0]+"("+at.join(",")+")")}else return xe<=7?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=24?console.error("WK1 unsupported op "+xe.toString(16)):xe<=30?console.error("WK1 invalid opcode "+xe.toString(16)):xe<=115?console.error("WK1 unsupported function opcode "+xe.toString(16)):console.error("WK1 unrecognized opcode "+xe.toString(16))}}B.length==1?D[1].f=""+B[0]:console.error("WK1 bad formula parse |"+B.join("|")+"|")}function ie(T){var D=[{c:0,r:0},{t:"n",v:0},0];return D[0].r=T.read_shift(2),D[3]=T[T.l++],D[0].c=T[T.l++],D}function oe(T,D){var B=ie(T);return B[1].t="s",B[1].v=T.read_shift(D-4,"cstr"),B}function N(T,D,B,U){var J=Me(6+U.length);J.write_shift(2,T),J.write_shift(1,B),J.write_shift(1,D),J.write_shift(1,39);for(var ae=0;ae<U.length;++ae){var le=U.charCodeAt(ae);J.write_shift(1,le>=128?95:le)}return J.write_shift(1,0),J}function A(T,D){var B=ie(T);B[1].v=T.read_shift(2);var U=B[1].v>>1;if(B[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return B[1].v=U,B}function k(T,D){var B=ie(T),U=T.read_shift(4),J=T.read_shift(4),ae=T.read_shift(2);if(ae==65535)return U===0&&J===3221225472?(B[1].t="e",B[1].v=15):U===0&&J===3489660928?(B[1].t="e",B[1].v=42):B[1].v=0,B;var le=ae&32768;return ae=(ae&32767)-16446,B[1].v=(1-le*2)*(J*Math.pow(2,ae+32)+U*Math.pow(2,ae)),B}function V(T,D,B,U){var J=Me(14);if(J.write_shift(2,T),J.write_shift(1,B),J.write_shift(1,D),U==0)return J.write_shift(4,0),J.write_shift(4,0),J.write_shift(2,65535),J;var ae=0,le=0,ue=0,xe=0;return U<0&&(ae=1,U=-U),le=Math.log2(U)|0,U/=Math.pow(2,le-31),xe=U>>>0,xe&2147483648||(U/=2,++le,xe=U>>>0),U-=xe,xe|=2147483648,xe>>>=0,U*=Math.pow(2,32),ue=U>>>0,J.write_shift(4,ue),J.write_shift(4,xe),le+=16383+(ae?32768:0),J.write_shift(2,le),J}function b(T,D){var B=k(T);return T.l+=D-14,B}function S(T,D){var B=ie(T),U=T.read_shift(4);return B[1].v=U>>6,B}function R(T,D){var B=ie(T),U=T.read_shift(8,"f");return B[1].v=U,B}function se(T,D){var B=R(T);return T.l+=D-10,B}function ve(T,D){return T[T.l+D-1]==0?T.read_shift(D,"cstr"):""}function Ee(T,D){var B=T[T.l++];B>D-1&&(B=D-1);for(var U="";U.length<B;)U+=String.fromCharCode(T[T.l++]);return U}function Ne(T,D,B){if(!(!B.qpro||D<21)){var U=T.read_shift(1);T.l+=17,T.l+=1,T.l+=2;var J=T.read_shift(D-21,"cstr");return[U,J]}}function _e(T,D){for(var B={},U=T.l+D;T.l<U;){var J=T.read_shift(2);if(J==14e3){for(B[J]=[0,""],B[J][0]=T.read_shift(2);T[T.l];)B[J][1]+=String.fromCharCode(T[T.l]),T.l++;T.l++}}return B}function Ce(T,D){var B=Me(5+T.length);B.write_shift(2,14e3),B.write_shift(2,D);for(var U=0;U<T.length;++U){var J=T.charCodeAt(U);B[B.l++]=J>127?95:J}return B[B.l++]=0,B}var Fe={0:{n:"BOF",f:mI},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:o},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:x},15:{n:"LABEL",f:l},16:{n:"FORMULA",f:E},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:l},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:ve},222:{n:"SHEETNAMELP",f:Ee},65535:{n:""}},nt={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:oe},23:{n:"NUMBER17",f:k},24:{n:"NUMBER18",f:A},25:{n:"FORMULA19",f:b},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:_e},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:S},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:se},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:ve},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:Ne},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:i,to_workbook:e}}(),oB=/^\s|\s$|[\t\n\r]/;function xI(r,e){if(!e.bookSST)return"";var t=[Tn];t[t.length]=st("sst",null,{xmlns:Th[0],count:r.Count,uniqueCount:r.Unique});for(var n=0;n!=r.length;++n)if(r[n]!=null){var i=r[n],s="<si>";i.r?s+=i.r:(s+="<t",i.t||(i.t=""),i.t.match(oB)&&(s+=' xml:space="preserve"'),s+=">"+yr(i.t)+"</t>"),s+="</si>",t[t.length]=s}return t.length>2&&(t[t.length]="</sst>",t[1]=t[1].replace("/>",">")),t.join("")}function cB(r){return[r.read_shift(4),r.read_shift(4)]}function uB(r,e){return e||(e=Me(8)),e.write_shift(4,r.Count),e.write_shift(4,r.Unique),e}var lB=e9;function hB(r){var e=Gi();He(e,159,uB(r));for(var t=0;t<r.length;++t)He(e,19,lB(r[t]));return He(e,160),e.end()}function fB(r){for(var e=[],t=r.split(""),n=0;n<t.length;++n)e[n]=t[n].charCodeAt(0);return e}function EI(r){var e=0,t,n=fB(r),i=n.length+1,s,a,o,c,u;for(t=bu(i),t[0]=n.length,s=1;s!=i;++s)t[s]=n[s-1];for(s=i-1;s>=0;--s)a=t[s],o=e&16384?1:0,c=e<<1&32767,u=o|c,e=u^a;return e^52811}var dB=function(){function r(i,s){switch(s.type){case"base64":return e(io(i),s);case"binary":return e(i,s);case"buffer":return e(lr&&Buffer.isBuffer(i)?i.toString("binary"):Ad(i),s);case"array":return e(pm(i),s)}throw new Error("Unrecognized type "+s.type)}function e(i,s){var a=s||{},o=a.dense?[]:{},c=i.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(l,d){Array.isArray(o)&&(o[d]=[]);for(var g=/\\\w+\b/g,p=0,x,_=-1;x=g.exec(l);){switch(x[0]){case"\\cell":var E=l.slice(p,g.lastIndex-x[0].length);if(E[0]==" "&&(E=E.slice(1)),++_,E.length){var P={v:E,t:"s"};Array.isArray(o)?o[d][_]=P:o[xr({r:d,c:_})]=P}break}p=g.lastIndex}_>u.e.c&&(u.e.c=_)}),o["!ref"]=En(u),o}function t(i,s){return Lu(r(i,s),s)}function n(i){for(var s=["{\\rtf1\\ansi"],a=Vr(i["!ref"]),o,c=Array.isArray(i),u=a.s.r;u<=a.e.r;++u){s.push("\\trowd\\trautofit1");for(var l=a.s.c;l<=a.e.c;++l)s.push("\\cellx"+(l+1));for(s.push("\\pard\\intbl"),l=a.s.c;l<=a.e.c;++l){var d=xr({r:u,c:l});o=c?(i[u]||[])[l]:i[d],!(!o||o.v==null&&(!o.f||o.F))&&(s.push(" "+(o.w||(so(o),o.w))),s.push("\\cell"))}s.push("\\pard\\intbl\\row")}return s.join("")+"}"}return{to_workbook:t,to_sheet:r,from_sheet:n}}();function u5(r){for(var e=0,t=1;e!=3;++e)t=t*256+(r[e]>255?255:r[e]<0?0:r[e]);return t.toString(16).toUpperCase().slice(1)}var pB=6,Za=pB;function vp(r){return Math.floor((r+Math.round(128/Za)/256)*Za)}function _p(r){return Math.floor((r-5)/Za*100+.5)/100}function m1(r){return Math.round((r*Za+5)/Za*256)/256}function Bv(r){r.width?(r.wpx=vp(r.width),r.wch=_p(r.wpx),r.MDW=Za):r.wpx?(r.wch=_p(r.wpx),r.width=m1(r.wch),r.MDW=Za):typeof r.wch=="number"&&(r.width=m1(r.wch),r.wpx=vp(r.width),r.MDW=Za),r.customWidth&&delete r.customWidth}var mB=96,TI=mB;function yp(r){return r*96/TI}function bI(r){return r*TI/96}function gB(r){var e=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(t){for(var n=t[0];n<=t[1];++n)r[n]!=null&&(e[e.length]=st("numFmt",null,{numFmtId:n,formatCode:yr(r[n])}))}),e.length===1?"":(e[e.length]="</numFmts>",e[0]=st("numFmts",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function vB(r){var e=[];return e[e.length]=st("cellXfs",null),r.forEach(function(t){e[e.length]=st("xf",null,t)}),e[e.length]="</cellXfs>",e.length===2?"":(e[0]=st("cellXfs",null,{count:e.length-2}).replace("/>",">"),e.join(""))}function AI(r,e){var t=[Tn,st("styleSheet",null,{xmlns:Th[0],"xmlns:vt":Mn.vt})],n;return r.SSF&&(n=gB(r.SSF))!=null&&(t[t.length]=n),t[t.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',t[t.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',t[t.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',t[t.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=vB(e.cellXfs))&&(t[t.length]=n),t[t.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',t[t.length]='<dxfs count="0"/>',t[t.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',t.length>2&&(t[t.length]="</styleSheet>",t[1]=t[1].replace("/>",">")),t.join("")}function _B(r,e){var t=r.read_shift(2),n=pi(r);return[t,n]}function yB(r,e,t){t||(t=Me(6+4*e.length)),t.write_shift(2,r),Vn(e,t);var n=t.length>t.l?t.slice(0,t.l):t;return t.l==null&&(t.l=t.length),n}function wB(r,e,t){var n={};n.sz=r.read_shift(2)/20;var i=o9(r);i.fItalic&&(n.italic=1),i.fCondense&&(n.condense=1),i.fExtend&&(n.extend=1),i.fShadow&&(n.shadow=1),i.fOutline&&(n.outline=1),i.fStrikeout&&(n.strike=1);var s=r.read_shift(2);switch(s===700&&(n.bold=1),r.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var a=r.read_shift(1);a!=0&&(n.underline=a);var o=r.read_shift(1);o>0&&(n.family=o);var c=r.read_shift(1);switch(c>0&&(n.charset=c),r.l++,n.color=a9(r),r.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=pi(r),n}function xB(r,e){e||(e=Me(25+4*32)),e.write_shift(2,r.sz*20),c9(r,e),e.write_shift(2,r.bold?700:400);var t=0;r.vertAlign=="superscript"?t=1:r.vertAlign=="subscript"&&(t=2),e.write_shift(2,t),e.write_shift(1,r.underline||0),e.write_shift(1,r.family||0),e.write_shift(1,r.charset||0),e.write_shift(1,0),mp(r.color,e);var n=0;return n=2,e.write_shift(1,n),Vn(r.name,e),e.length>e.l?e.slice(0,e.l):e}var EB=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],pg,TB=Aa;function l5(r,e){e||(e=Me(4*3+8*7+16*1)),pg||(pg=Iv(EB));var t=pg[r.patternType];t==null&&(t=40),e.write_shift(4,t);var n=0;if(t!=40)for(mp({auto:1},e),mp({auto:1},e);n<12;++n)e.write_shift(4,0);else{for(;n<4;++n)e.write_shift(4,0);for(;n<12;++n)e.write_shift(4,0)}return e.length>e.l?e.slice(0,e.l):e}function bB(r,e){var t=r.l+e,n=r.read_shift(2),i=r.read_shift(2);return r.l=t,{ixfe:n,numFmtId:i}}function II(r,e,t){t||(t=Me(16)),t.write_shift(2,e||0),t.write_shift(2,r.numFmtId||0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);var n=0;return t.write_shift(1,n),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(1,0),t}function Qh(r,e){return e||(e=Me(10)),e.write_shift(1,0),e.write_shift(1,0),e.write_shift(4,0),e.write_shift(4,0),e}var AB=Aa;function IB(r,e){return e||(e=Me(51)),e.write_shift(1,0),Qh(null,e),Qh(null,e),Qh(null,e),Qh(null,e),Qh(null,e),e.length>e.l?e.slice(0,e.l):e}function SB(r,e){return e||(e=Me(12+4*10)),e.write_shift(4,r.xfId),e.write_shift(2,1),e.write_shift(1,0),e.write_shift(1,0),pp(r.name||"",e),e.length>e.l?e.slice(0,e.l):e}function PB(r,e,t){var n=Me(2052);return n.write_shift(4,r),pp(e,n),pp(t,n),n.length>n.l?n.slice(0,n.l):n}function NB(r,e){if(e){var t=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&++t}),t!=0&&(He(r,615,Gs(t)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&He(r,44,yB(i,e[i]))}),He(r,616))}}function CB(r){var e=1;He(r,611,Gs(e)),He(r,43,xB({sz:12,color:{theme:1},name:"Calibri",family:2})),He(r,612)}function kB(r){var e=2;He(r,603,Gs(e)),He(r,45,l5({patternType:"none"})),He(r,45,l5({patternType:"gray125"})),He(r,604)}function RB(r){var e=1;He(r,613,Gs(e)),He(r,46,IB()),He(r,614)}function LB(r){var e=1;He(r,626,Gs(e)),He(r,47,II({numFmtId:0},65535)),He(r,627)}function DB(r,e){He(r,617,Gs(e.length)),e.forEach(function(t){He(r,47,II(t,0))}),He(r,618)}function FB(r){var e=1;He(r,619,Gs(e)),He(r,48,SB({xfId:0,name:"Normal"})),He(r,620)}function OB(r){var e=0;He(r,505,Gs(e)),He(r,506)}function MB(r){var e=0;He(r,508,PB(e,"TableStyleMedium9","PivotStyleMedium4")),He(r,509)}function BB(r,e){var t=Gi();return He(t,278),NB(t,r.SSF),CB(t),kB(t),RB(t),LB(t),DB(t,e.cellXfs),FB(t),OB(t),MB(t),He(t,279),t.end()}function SI(r,e){if(e&&e.themeXLSX)return e.themeXLSX;if(r&&typeof r.raw=="string")return r.raw;var t=[Tn];return t[t.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',t[t.length]="<a:themeElements>",t[t.length]='<a:clrScheme name="Office">',t[t.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',t[t.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',t[t.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',t[t.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',t[t.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',t[t.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',t[t.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',t[t.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',t[t.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',t[t.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',t[t.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',t[t.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',t[t.length]="</a:clrScheme>",t[t.length]='<a:fontScheme name="Office">',t[t.length]="<a:majorFont>",t[t.length]='<a:latin typeface="Cambria"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Times New Roman"/>',t[t.length]='<a:font script="Hebr" typeface="Times New Roman"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="MoolBoran"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Times New Roman"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:majorFont>",t[t.length]="<a:minorFont>",t[t.length]='<a:latin typeface="Calibri"/>',t[t.length]='<a:ea typeface=""/>',t[t.length]='<a:cs typeface=""/>',t[t.length]='<a:font script="Jpan" typeface=" "/>',t[t.length]='<a:font script="Hang" typeface=" "/>',t[t.length]='<a:font script="Hans" typeface=""/>',t[t.length]='<a:font script="Hant" typeface=""/>',t[t.length]='<a:font script="Arab" typeface="Arial"/>',t[t.length]='<a:font script="Hebr" typeface="Arial"/>',t[t.length]='<a:font script="Thai" typeface="Tahoma"/>',t[t.length]='<a:font script="Ethi" typeface="Nyala"/>',t[t.length]='<a:font script="Beng" typeface="Vrinda"/>',t[t.length]='<a:font script="Gujr" typeface="Shruti"/>',t[t.length]='<a:font script="Khmr" typeface="DaunPenh"/>',t[t.length]='<a:font script="Knda" typeface="Tunga"/>',t[t.length]='<a:font script="Guru" typeface="Raavi"/>',t[t.length]='<a:font script="Cans" typeface="Euphemia"/>',t[t.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',t[t.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',t[t.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',t[t.length]='<a:font script="Thaa" typeface="MV Boli"/>',t[t.length]='<a:font script="Deva" typeface="Mangal"/>',t[t.length]='<a:font script="Telu" typeface="Gautami"/>',t[t.length]='<a:font script="Taml" typeface="Latha"/>',t[t.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',t[t.length]='<a:font script="Orya" typeface="Kalinga"/>',t[t.length]='<a:font script="Mlym" typeface="Kartika"/>',t[t.length]='<a:font script="Laoo" typeface="DokChampa"/>',t[t.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',t[t.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',t[t.length]='<a:font script="Viet" typeface="Arial"/>',t[t.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',t[t.length]='<a:font script="Geor" typeface="Sylfaen"/>',t[t.length]="</a:minorFont>",t[t.length]="</a:fontScheme>",t[t.length]='<a:fmtScheme name="Office">',t[t.length]="<a:fillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="1"/>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:lin ang="16200000" scaled="0"/>',t[t.length]="</a:gradFill>",t[t.length]="</a:fillStyleLst>",t[t.length]="<a:lnStyleLst>",t[t.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',t[t.length]="</a:lnStyleLst>",t[t.length]="<a:effectStyleLst>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]="</a:effectStyle>",t[t.length]="<a:effectStyle>",t[t.length]="<a:effectLst>",t[t.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',t[t.length]="</a:effectLst>",t[t.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',t[t.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',t[t.length]="</a:effectStyle>",t[t.length]="</a:effectStyleLst>",t[t.length]="<a:bgFillStyleLst>",t[t.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]='<a:gradFill rotWithShape="1">',t[t.length]="<a:gsLst>",t[t.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',t[t.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',t[t.length]="</a:gsLst>",t[t.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',t[t.length]="</a:gradFill>",t[t.length]="</a:bgFillStyleLst>",t[t.length]="</a:fmtScheme>",t[t.length]="</a:themeElements>",t[t.length]="<a:objectDefaults>",t[t.length]="<a:spDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',t[t.length]="</a:spDef>",t[t.length]="<a:lnDef>",t[t.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',t[t.length]="</a:lnDef>",t[t.length]="</a:objectDefaults>",t[t.length]="<a:extraClrSchemeLst/>",t[t.length]="</a:theme>",t.join("")}function VB(r,e){return{flags:r.read_shift(4),version:r.read_shift(4),name:pi(r)}}function UB(r){var e=Me(12+2*r.name.length);return e.write_shift(4,r.flags),e.write_shift(4,r.version),Vn(r.name,e),e.slice(0,e.l)}function jB(r){for(var e=[],t=r.read_shift(4);t-- >0;)e.push([r.read_shift(4),r.read_shift(4)]);return e}function qB(r){var e=Me(4+8*r.length);e.write_shift(4,r.length);for(var t=0;t<r.length;++t)e.write_shift(4,r[t][0]),e.write_shift(4,r[t][1]);return e}function zB(r,e){var t=Me(8+2*e.length);return t.write_shift(4,r),Vn(e,t),t.slice(0,t.l)}function WB(r){return r.l+=4,r.read_shift(4)!=0}function HB(r,e){var t=Me(8);return t.write_shift(4,r),t.write_shift(4,1),t}function $B(){var r=Gi();return He(r,332),He(r,334,Gs(1)),He(r,335,UB({name:"XLDAPR",version:12e4,flags:3496657072})),He(r,336),He(r,339,zB(1,"XLDAPR")),He(r,52),He(r,35,Gs(514)),He(r,4096,Gs(0)),He(r,4097,As(1)),He(r,36),He(r,53),He(r,340),He(r,337,HB(1)),He(r,51,qB([[1,0]])),He(r,338),He(r,333),r.end()}function PI(){var r=[Tn];return r.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),r.join("")}function GB(r){var e={};e.i=r.read_shift(4);var t={};t.r=r.read_shift(4),t.c=r.read_shift(4),e.r=xr(t);var n=r.read_shift(1);return n&2&&(e.l="1"),n&8&&(e.a="1"),e}var Il=1024;function NI(r,e){for(var t=[21600,21600],n=["m0,0l0",t[1],t[0],t[1],t[0],"0xe"].join(","),i=[st("xml",null,{"xmlns:v":ls.v,"xmlns:o":ls.o,"xmlns:x":ls.x,"xmlns:mv":ls.mv}).replace(/\/>/,">"),st("o:shapelayout",st("o:idmap",null,{"v:ext":"edit",data:r}),{"v:ext":"edit"}),st("v:shapetype",[st("v:stroke",null,{joinstyle:"miter"}),st("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:t.join(","),path:n})];Il<r*1e3;)Il+=1e3;return e.forEach(function(s){var a=Bn(s[0]),o={color2:"#BEFF82",type:"gradient"};o.type=="gradient"&&(o.angle="-180");var c=o.type=="gradient"?st("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=st("v:fill",c,o),l={on:"t",obscured:"t"};++Il,i=i.concat(["<v:shape"+Zf({id:"_x0000_s"+Il,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(s[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,st("v:shadow",null,l),st("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Zn("x:Anchor",[a.c+1,0,a.r+1,0,a.c+3,20,a.r+5,20].join(",")),Zn("x:AutoFill","False"),Zn("x:Row",String(a.r)),Zn("x:Column",String(a.c)),s[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),i.push("</xml>"),i.join("")}function CI(r){var e=[Tn,st("comments",null,{xmlns:Th[0]})],t=[];return e.push("<authors>"),r.forEach(function(n){n[1].forEach(function(i){var s=yr(i.a);t.indexOf(s)==-1&&(t.push(s),e.push("<author>"+s+"</author>")),i.T&&i.ID&&t.indexOf("tc="+i.ID)==-1&&(t.push("tc="+i.ID),e.push("<author>tc="+i.ID+"</author>"))})}),t.length==0&&(t.push("SheetJ5"),e.push("<author>SheetJ5</author>")),e.push("</authors>"),e.push("<commentList>"),r.forEach(function(n){var i=0,s=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?i=t.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(i=t.indexOf(yr(c.a))),s.push(c.t||"")}),e.push('<comment ref="'+n[0]+'" authorId="'+i+'"><text>'),s.length<=1)e.push(Zn("t",yr(s[0]||"")));else{for(var a=`Comment:
    `+s[0]+`
`,o=1;o<s.length;++o)a+=`Reply:
    `+s[o]+`
`;e.push(Zn("t",yr(a)))}e.push("</text></comment>")}),e.push("</commentList>"),e.length>2&&(e[e.length]="</comments>",e[1]=e[1].replace("/>",">")),e.join("")}function KB(r,e,t){var n=[Tn,st("ThreadedComments",null,{xmlns:Mn.TCMNT}).replace(/[\/]>/,">")];return r.forEach(function(i){var s="";(i[1]||[]).forEach(function(a,o){if(!a.T){delete a.ID;return}a.a&&e.indexOf(a.a)==-1&&e.push(a.a);var c={ref:i[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+t.tcid++).slice(-12)+"}"};o==0?s=c.id:c.parentId=s,a.ID=c.id,a.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+e.indexOf(a.a)).slice(-12)+"}"),n.push(st("threadedComment",Zn("text",a.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function YB(r){var e=[Tn,st("personList",null,{xmlns:Mn.TCMNT,"xmlns:x":Th[0]}).replace(/[\/]>/,">")];return r.forEach(function(t,n){e.push(st("person",null,{displayName:t,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:t,providerId:"None"}))}),e.push("</personList>"),e.join("")}function XB(r){var e={};e.iauthor=r.read_shift(4);var t=Mu(r);return e.rfx=t.s,e.ref=xr(t.s),r.l+=16,e}function JB(r,e){return e==null&&(e=Me(36)),e.write_shift(4,r[1].iauthor),Ah(r[0],e),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e.write_shift(4,0),e}var QB=pi;function ZB(r){return Vn(r.slice(0,54))}function eV(r){var e=Gi(),t=[];return He(e,628),He(e,630),r.forEach(function(n){n[1].forEach(function(i){t.indexOf(i.a)>-1||(t.push(i.a.slice(0,54)),He(e,632,ZB(i.a)))})}),He(e,631),He(e,633),r.forEach(function(n){n[1].forEach(function(i){i.iauthor=t.indexOf(i.a);var s={s:Bn(n[0]),e:Bn(n[0])};He(e,635,JB([s,i])),i.t&&i.t.length>0&&He(e,637,r9(i)),He(e,636),delete i.iauthor})}),He(e,634),He(e,629),e.end()}function tV(r,e){e.FullPaths.forEach(function(t,n){if(n!=0){var i=t.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");i.slice(-1)!=="/"&&Ir.utils.cfb_add(r,i,e.FileIndex[n].content)}})}var kI=["xlsb","xlsm","xlam","biff8","xla"],rV=function(){var r=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,e={r:0,c:0};function t(n,i,s,a){var o=!1,c=!1;s.length==0?c=!0:s.charAt(0)=="["&&(c=!0,s=s.slice(1,-1)),a.length==0?o=!0:a.charAt(0)=="["&&(o=!0,a=a.slice(1,-1));var u=s.length>0?parseInt(s,10)|0:0,l=a.length>0?parseInt(a,10)|0:0;return o?l+=e.c:--l,c?u+=e.r:--u,i+(o?"":"$")+di(l)+(c?"":"$")+ri(u)}return function(i,s){return e=s,i.replace(r,t)}}(),Vv=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,Uv=function(){return function(e,t){return e.replace(Vv,function(n,i,s,a,o,c){var u=Lv(a)-(s?0:t.c),l=Rv(c)-(o?0:t.r),d=l==0?"":o?l+1:"["+l+"]",g=u==0?"":s?u+1:"["+u+"]";return i+"R"+d+"C"+g})}}();function nV(r,e){return r.replace(Vv,function(t,n,i,s,a,o){return n+(i=="$"?i+s:di(Lv(s)+e.c))+(a=="$"?a+o:ri(Rv(o)+e.r))})}function iV(r){return r.length!=1}function yn(r){r.l+=1}function fc(r,e){var t=r.read_shift(2);return[t&16383,t>>14&1,t>>15&1]}function RI(r,e,t){var n=2;if(t){if(t.biff>=2&&t.biff<=5)return LI(r);t.biff==12&&(n=4)}var i=r.read_shift(n),s=r.read_shift(n),a=fc(r),o=fc(r);return{s:{r:i,c:a[0],cRel:a[1],rRel:a[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function LI(r){var e=fc(r),t=fc(r),n=r.read_shift(1),i=r.read_shift(1);return{s:{r:e[0],c:n,cRel:e[1],rRel:e[2]},e:{r:t[0],c:i,cRel:t[1],rRel:t[2]}}}function sV(r,e,t){if(t.biff<8)return LI(r);var n=r.read_shift(t.biff==12?4:2),i=r.read_shift(t.biff==12?4:2),s=fc(r),a=fc(r);return{s:{r:n,c:s[0],cRel:s[1],rRel:s[2]},e:{r:i,c:a[0],cRel:a[1],rRel:a[2]}}}function DI(r,e,t){if(t&&t.biff>=2&&t.biff<=5)return aV(r);var n=r.read_shift(t&&t.biff==12?4:2),i=fc(r);return{r:n,c:i[0],cRel:i[1],rRel:i[2]}}function aV(r){var e=fc(r),t=r.read_shift(1);return{r:e[0],c:t,cRel:e[1],rRel:e[2]}}function oV(r){var e=r.read_shift(2),t=r.read_shift(2);return{r:e,c:t&255,fQuoted:!!(t&16384),cRel:t>>15,rRel:t>>15}}function cV(r,e,t){var n=t&&t.biff?t.biff:8;if(n>=2&&n<=5)return uV(r);var i=r.read_shift(n>=12?4:2),s=r.read_shift(2),a=(s&16384)>>14,o=(s&32768)>>15;if(s&=16383,o==1)for(;i>524287;)i-=1048576;if(a==1)for(;s>8191;)s=s-16384;return{r:i,c:s,cRel:a,rRel:o}}function uV(r){var e=r.read_shift(2),t=r.read_shift(1),n=(e&32768)>>15,i=(e&16384)>>14;return e&=16383,n==1&&e>=8192&&(e=e-16384),i==1&&t>=128&&(t=t-256),{r:e,c:t,cRel:i,rRel:n}}function lV(r,e,t){var n=(r[r.l++]&96)>>5,i=RI(r,t.biff>=2&&t.biff<=5?6:8,t);return[n,i]}function hV(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2,"i"),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}var a=RI(r,s,t);return[n,i,a]}function fV(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t&&t.biff>8?12:t.biff<8?6:8,[n]}function dV(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),s=8;if(t)switch(t.biff){case 5:r.l+=12,s=6;break;case 12:s=12;break}return r.l+=s,[n,i]}function pV(r,e,t){var n=(r[r.l++]&96)>>5,i=sV(r,e-1,t);return[n,i]}function mV(r,e,t){var n=(r[r.l++]&96)>>5;return r.l+=t.biff==2?6:t.biff==12?14:7,[n]}function h5(r){var e=r[r.l+1]&1,t=1;return r.l+=4,[e,t]}function gV(r,e,t){r.l+=2;for(var n=r.read_shift(t&&t.biff==2?1:2),i=[],s=0;s<=n;++s)i.push(r.read_shift(t&&t.biff==2?1:2));return i}function vV(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function _V(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=2,[n,r.read_shift(t&&t.biff==2?1:2)]}function yV(r){var e=r[r.l+1]&255?1:0;return r.l+=2,[e,r.read_shift(2)]}function wV(r,e,t){var n=r[r.l+1]&255?1:0;return r.l+=t&&t.biff==2?3:4,[n]}function FI(r){var e=r.read_shift(1),t=r.read_shift(1);return[e,t]}function xV(r){return r.read_shift(2),FI(r)}function EV(r){return r.read_shift(2),FI(r)}function TV(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=DI(r,0,t);return[n,i]}function bV(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=cV(r,0,t);return[n,i]}function AV(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(2);t&&t.biff==5&&(r.l+=12);var s=DI(r,0,t);return[n,i,s]}function IV(r,e,t){var n=(r[r.l]&96)>>5;r.l+=1;var i=r.read_shift(t&&t.biff<=3?1:2);return[IU[i],BI[i],n]}function SV(r,e,t){var n=r[r.l++],i=r.read_shift(1),s=t&&t.biff<=3?[n==88?-1:0,r.read_shift(1)]:PV(r);return[i,(s[0]===0?BI:AU)[s[1]]]}function PV(r){return[r[r.l+1]>>7,r.read_shift(2)&32767]}function NV(r,e,t){r.l+=t&&t.biff==2?3:4}function CV(r,e,t){if(r.l++,t&&t.biff==12)return[r.read_shift(4,"i"),0];var n=r.read_shift(2),i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function kV(r){return r.l++,Pd[r.read_shift(1)]}function RV(r){return r.l++,r.read_shift(2)}function LV(r){return r.l++,r.read_shift(1)!==0}function DV(r){return r.l++,Ih(r)}function FV(r,e,t){return r.l++,vI(r,e-1,t)}function OV(r,e){var t=[r.read_shift(1)];if(e==12)switch(t[0]){case 2:t[0]=4;break;case 4:t[0]=16;break;case 0:t[0]=1;break;case 1:t[0]=2;break}switch(t[0]){case 4:t[1]=A9(r,1)?"TRUE":"FALSE",e!=12&&(r.l+=7);break;case 37:case 16:t[1]=Pd[r[r.l]],r.l+=e==12?4:8;break;case 0:r.l+=8;break;case 1:t[1]=Ih(r);break;case 2:t[1]=N9(r,0,{biff:e>0&&e<8?2:e});break;default:throw new Error("Bad SerAr: "+t[0])}return t}function MV(r,e,t){for(var n=r.read_shift(t.biff==12?4:2),i=[],s=0;s!=n;++s)i.push((t.biff==12?Mu:R9)(r));return i}function BV(r,e,t){var n=0,i=0;t.biff==12?(n=r.read_shift(4),i=r.read_shift(4)):(i=1+r.read_shift(1),n=1+r.read_shift(2)),t.biff>=2&&t.biff<8&&(--n,--i==0&&(i=256));for(var s=0,a=[];s!=n&&(a[s]=[]);++s)for(var o=0;o!=i;++o)a[s][o]=OV(r,t.biff);return a}function VV(r,e,t){var n=r.read_shift(1)>>>5&3,i=!t||t.biff>=8?4:2,s=r.read_shift(i);switch(t.biff){case 2:r.l+=5;break;case 3:case 4:r.l+=8;break;case 5:r.l+=12;break}return[n,0,s]}function UV(r,e,t){if(t.biff==5)return jV(r);var n=r.read_shift(1)>>>5&3,i=r.read_shift(2),s=r.read_shift(4);return[n,i,s]}function jV(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2,"i");r.l+=8;var n=r.read_shift(2);return r.l+=12,[e,t,n]}function qV(r,e,t){var n=r.read_shift(1)>>>5&3;r.l+=t&&t.biff==2?3:4;var i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function zV(r,e,t){var n=r.read_shift(1)>>>5&3,i=r.read_shift(t&&t.biff==2?1:2);return[n,i]}function WV(r,e,t){var n=r.read_shift(1)>>>5&3;return r.l+=4,t.biff<8&&r.l--,t.biff==12&&(r.l+=2),[n]}function HV(r,e,t){var n=(r[r.l++]&96)>>5,i=r.read_shift(2),s=4;if(t)switch(t.biff){case 5:s=15;break;case 12:s=6;break}return r.l+=s,[n,i]}var $V=Aa,GV=Aa,KV=Aa;function Nd(r,e,t){return r.l+=2,[oV(r)]}function jv(r){return r.l+=6,[]}var YV=Nd,XV=jv,JV=jv,QV=Nd;function OI(r){return r.l+=2,[mI(r),r.read_shift(2)&1]}var ZV=Nd,eU=OI,tU=jv,rU=Nd,nU=Nd,iU=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function sU(r){r.l+=2;var e=r.read_shift(2),t=r.read_shift(2),n=r.read_shift(4),i=r.read_shift(2),s=r.read_shift(2),a=iU[t>>2&31];return{ixti:e,coltype:t&3,rt:a,idx:n,c:i,C:s}}function aU(r){return r.l+=2,[r.read_shift(4)]}function oU(r,e,t){return r.l+=5,r.l+=2,r.l+=t.biff==2?1:4,["PTGSHEET"]}function cU(r,e,t){return r.l+=t.biff==2?4:5,["PTGENDSHEET"]}function uU(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function lU(r){var e=r.read_shift(1)>>>5&3,t=r.read_shift(2);return[e,t]}function hU(r){return r.l+=4,[0,0]}var f5={1:{n:"PtgExp",f:CV},2:{n:"PtgTbl",f:KV},3:{n:"PtgAdd",f:yn},4:{n:"PtgSub",f:yn},5:{n:"PtgMul",f:yn},6:{n:"PtgDiv",f:yn},7:{n:"PtgPower",f:yn},8:{n:"PtgConcat",f:yn},9:{n:"PtgLt",f:yn},10:{n:"PtgLe",f:yn},11:{n:"PtgEq",f:yn},12:{n:"PtgGe",f:yn},13:{n:"PtgGt",f:yn},14:{n:"PtgNe",f:yn},15:{n:"PtgIsect",f:yn},16:{n:"PtgUnion",f:yn},17:{n:"PtgRange",f:yn},18:{n:"PtgUplus",f:yn},19:{n:"PtgUminus",f:yn},20:{n:"PtgPercent",f:yn},21:{n:"PtgParen",f:yn},22:{n:"PtgMissArg",f:yn},23:{n:"PtgStr",f:FV},26:{n:"PtgSheet",f:oU},27:{n:"PtgEndSheet",f:cU},28:{n:"PtgErr",f:kV},29:{n:"PtgBool",f:LV},30:{n:"PtgInt",f:RV},31:{n:"PtgNum",f:DV},32:{n:"PtgArray",f:mV},33:{n:"PtgFunc",f:IV},34:{n:"PtgFuncVar",f:SV},35:{n:"PtgName",f:VV},36:{n:"PtgRef",f:TV},37:{n:"PtgArea",f:lV},38:{n:"PtgMemArea",f:qV},39:{n:"PtgMemErr",f:$V},40:{n:"PtgMemNoMem",f:GV},41:{n:"PtgMemFunc",f:zV},42:{n:"PtgRefErr",f:WV},43:{n:"PtgAreaErr",f:fV},44:{n:"PtgRefN",f:bV},45:{n:"PtgAreaN",f:pV},46:{n:"PtgMemAreaN",f:uU},47:{n:"PtgMemNoMemN",f:lU},57:{n:"PtgNameX",f:UV},58:{n:"PtgRef3d",f:AV},59:{n:"PtgArea3d",f:hV},60:{n:"PtgRefErr3d",f:HV},61:{n:"PtgAreaErr3d",f:dV},255:{}},fU={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},dU={1:{n:"PtgElfLel",f:OI},2:{n:"PtgElfRw",f:rU},3:{n:"PtgElfCol",f:YV},6:{n:"PtgElfRwV",f:nU},7:{n:"PtgElfColV",f:QV},10:{n:"PtgElfRadical",f:ZV},11:{n:"PtgElfRadicalS",f:tU},13:{n:"PtgElfColS",f:XV},15:{n:"PtgElfColSV",f:JV},16:{n:"PtgElfRadicalLel",f:eU},25:{n:"PtgList",f:sU},29:{n:"PtgSxName",f:aU},255:{}},pU={0:{n:"PtgAttrNoop",f:hU},1:{n:"PtgAttrSemi",f:wV},2:{n:"PtgAttrIf",f:_V},4:{n:"PtgAttrChoose",f:gV},8:{n:"PtgAttrGoto",f:vV},16:{n:"PtgAttrSum",f:NV},32:{n:"PtgAttrBaxcel",f:h5},33:{n:"PtgAttrBaxcel",f:h5},64:{n:"PtgAttrSpace",f:xV},65:{n:"PtgAttrSpaceSemi",f:EV},128:{n:"PtgAttrIfError",f:yV},255:{}};function mU(r,e,t,n){if(n.biff<8)return Aa(r,e);for(var i=r.l+e,s=[],a=0;a!==t.length;++a)switch(t[a][0]){case"PtgArray":t[a][1]=BV(r,0,n),s.push(t[a][1]);break;case"PtgMemArea":t[a][2]=MV(r,t[a][1],n),s.push(t[a][2]);break;case"PtgExp":n&&n.biff==12&&(t[a][1][1]=r.read_shift(4),s.push(t[a][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+t[a][0]}return e=i-r.l,e!==0&&s.push(Aa(r,e)),s}function gU(r,e,t){for(var n=r.l+e,i,s,a=[];n!=r.l;)e=n-r.l,s=r[r.l],i=f5[s]||f5[fU[s]],(s===24||s===25)&&(i=(s===24?dU:pU)[r[r.l+1]]),!i||!i.f?Aa(r,e):a.push([i.n,i.f(r,e,t)]);return a}function vU(r){for(var e=[],t=0;t<r.length;++t){for(var n=r[t],i=[],s=0;s<n.length;++s){var a=n[s];if(a)switch(a[0]){case 2:i.push('"'+a[1].replace(/"/g,'""')+'"');break;default:i.push(a[1])}else i.push("")}e.push(i.join(","))}return e.join(";")}var _U={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function yU(r,e){if(!r&&!(e&&e.biff<=5&&e.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(r)?"'"+r+"'":r}function MI(r,e,t){if(!r)return"SH33TJSERR0";if(t.biff>8&&(!r.XTI||!r.XTI[e]))return r.SheetNames[e];if(!r.XTI)return"SH33TJSERR6";var n=r.XTI[e];if(t.biff<8)return e>1e4&&(e-=65536),e<0&&(e=-e),e==0?"":r.XTI[e-1];if(!n)return"SH33TJSERR1";var i="";if(t.biff>8)switch(r[n[0]][0]){case 357:return i=n[1]==-1?"#REF":r.SheetNames[n[1]],n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 358:return t.SID!=null?r.SheetNames[t.SID]:"SH33TJSSAME"+r[n[0]][0];case 355:default:return"SH33TJSSRC"+r[n[0]][0]}switch(r[n[0]][0][0]){case 1025:return i=n[1]==-1?"#REF":r.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?i:i+":"+r.SheetNames[n[2]];case 14849:return r[n[0]].slice(1).map(function(s){return s.Name}).join(";;");default:return r[n[0]][0][3]?(i=n[1]==-1?"#REF":r[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?i:i+":"+r[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function d5(r,e,t){var n=MI(r,e,t);return n=="#REF"?n:yU(n,t)}function ch(r,e,t,n,i){var s=i&&i.biff||8,a={s:{c:0,r:0}},o=[],c,u,l,d=0,g=0,p,x="";if(!r[0]||!r[0][0])return"";for(var _=-1,E="",P=0,L=r[0].length;P<L;++P){var M=r[0][P];switch(M[0]){case"PtgUminus":o.push("-"+o.pop());break;case"PtgUplus":o.push("+"+o.pop());break;case"PtgPercent":o.push(o.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=o.pop(),u=o.pop(),_>=0){switch(r[0][_][1][0]){case 0:E=Zr(" ",r[0][_][1][1]);break;case 1:E=Zr("\r",r[0][_][1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}u=u+E,_=-1}o.push(u+_U[M[0]]+c);break;case"PtgIsect":c=o.pop(),u=o.pop(),o.push(u+" "+c);break;case"PtgUnion":c=o.pop(),u=o.pop(),o.push(u+","+c);break;case"PtgRange":c=o.pop(),u=o.pop(),o.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":l=Ef(M[1][1],a,i),o.push(Tf(l,s));break;case"PtgRefN":l=t?Ef(M[1][1],t,i):M[1][1],o.push(Tf(l,s));break;case"PtgRef3d":d=M[1][1],l=Ef(M[1][2],a,i),x=d5(n,d,i),o.push(x+"!"+Tf(l,s));break;case"PtgFunc":case"PtgFuncVar":var K=M[1][0],ie=M[1][1];K||(K=0),K&=127;var oe=K==0?[]:o.slice(-K);o.length-=K,ie==="User"&&(ie=oe.shift()),o.push(ie+"("+oe.join(",")+")");break;case"PtgBool":o.push(M[1]?"TRUE":"FALSE");break;case"PtgInt":o.push(M[1]);break;case"PtgNum":o.push(String(M[1]));break;case"PtgStr":o.push('"'+M[1].replace(/"/g,'""')+'"');break;case"PtgErr":o.push(M[1]);break;case"PtgAreaN":p=Jw(M[1][1],t?{s:t}:a,i),o.push(fg(p,i));break;case"PtgArea":p=Jw(M[1][1],a,i),o.push(fg(p,i));break;case"PtgArea3d":d=M[1][1],p=M[1][2],x=d5(n,d,i),o.push(x+"!"+fg(p,i));break;case"PtgAttrSum":o.push("SUM("+o.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=M[1][2];var N=(n.names||[])[g-1]||(n[0]||[])[g],A=N?N.Name:"SH33TJSNAME"+String(g);A&&A.slice(0,6)=="_xlfn."&&!i.xlfn&&(A=A.slice(6)),o.push(A);break;case"PtgNameX":var k=M[1][1];g=M[1][2];var V;if(i.biff<=5)k<0&&(k=-k),n[k]&&(V=n[k][g]);else{var b="";if(((n[k]||[])[0]||[])[0]==14849||(((n[k]||[])[0]||[])[0]==1025?n[k][g]&&n[k][g].itab>0&&(b=n.SheetNames[n[k][g].itab-1]+"!"):b=n.SheetNames[g-1]+"!"),n[k]&&n[k][g])b+=n[k][g].Name;else if(n[0]&&n[0][g])b+=n[0][g].Name;else{var S=(MI(n,k,i)||"").split(";;");S[g-1]?b=S[g-1]:b+="SH33TJSERRX"}o.push(b);break}V||(V={Name:"SH33TJSERRY"}),o.push(V.Name);break;case"PtgParen":var R="(",se=")";if(_>=0){switch(E="",r[0][_][1][0]){case 2:R=Zr(" ",r[0][_][1][1])+R;break;case 3:R=Zr("\r",r[0][_][1][1])+R;break;case 4:se=Zr(" ",r[0][_][1][1])+se;break;case 5:se=Zr("\r",r[0][_][1][1])+se;break;default:if(i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+r[0][_][1][0])}_=-1}o.push(R+o.pop()+se);break;case"PtgRefErr":o.push("#REF!");break;case"PtgRefErr3d":o.push("#REF!");break;case"PtgExp":l={c:M[1][1],r:M[1][0]};var ve={c:t.c,r:t.r};if(n.sharedf[xr(l)]){var Ee=n.sharedf[xr(l)];o.push(ch(Ee,a,ve,n,i))}else{var Ne=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(l.c<u[0].s.c||l.c>u[0].e.c)&&!(l.r<u[0].s.r||l.r>u[0].e.r)){o.push(ch(u[1],a,ve,n,i)),Ne=!0;break}Ne||o.push(M[1])}break;case"PtgArray":o.push("{"+vU(M[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":_=P;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":o.push("");break;case"PtgAreaErr":o.push("#REF!");break;case"PtgAreaErr3d":o.push("#REF!");break;case"PtgList":o.push("Table"+M[1].idx+"[#"+M[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(M));default:throw new Error("Unrecognized Formula Token: "+String(M))}var _e=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(i.biff!=3&&_>=0&&_e.indexOf(r[0][P][0])==-1){M=r[0][_];var Ce=!0;switch(M[1][0]){case 4:Ce=!1;case 0:E=Zr(" ",M[1][1]);break;case 5:Ce=!1;case 1:E=Zr("\r",M[1][1]);break;default:if(E="",i.WTF)throw new Error("Unexpected PtgAttrSpaceType "+M[1][0])}o.push((Ce?E:"")+o.pop()+(Ce?"":E)),_=-1}}if(o.length>1&&i.WTF)throw new Error("bad formula stack");return o[0]}function wU(r){if(r==null){var e=Me(8);return e.write_shift(1,3),e.write_shift(1,0),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,65535),e}else if(typeof r=="number")return Au(r);return Au(0)}function xU(r,e,t,n,i){var s=Iu(e,t,i),a=wU(r.v),o=Me(6),c=33;o.write_shift(2,c),o.write_shift(4,0);for(var u=Me(r.bf.length),l=0;l<r.bf.length;++l)u[l]=r.bf[l];var d=Qn([s,a,o,u]);return d}function mm(r,e,t){var n=r.read_shift(4),i=gU(r,n,t),s=r.read_shift(4),a=s>0?mU(r,s,i,t):null;return[i,a]}var EU=mm,gm=mm,TU=mm,bU=mm,AU={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},BI={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},IU={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function SU(r){var e="of:="+r.replace(Vv,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return e.replace(/;/g,"|").replace(/,/g,";")}function PU(r){return r.replace(/\./,"!")}var bf=typeof Map<"u";function qv(r,e,t){var n=0,i=r.length;if(t){if(bf?t.has(e):Object.prototype.hasOwnProperty.call(t,e)){for(var s=bf?t.get(e):t[e];n<s.length;++n)if(r[s[n]].t===e)return r.Count++,s[n]}}else for(;n<i;++n)if(r[n].t===e)return r.Count++,n;return r[i]={t:e},r.Count++,r.Unique++,t&&(bf?(t.has(e)||t.set(e,[]),t.get(e).push(i)):(Object.prototype.hasOwnProperty.call(t,e)||(t[e]=[]),t[e].push(i))),i}function vm(r,e){var t={min:r+1,max:r+1},n=-1;return e.MDW&&(Za=e.MDW),e.width!=null?t.customWidth=1:e.wpx!=null?n=_p(e.wpx):e.wch!=null&&(n=e.wch),n>-1?(t.width=m1(n),t.customWidth=1):e.width!=null&&(t.width=e.width),e.hidden&&(t.hidden=!0),e.level!=null&&(t.outlineLevel=t.level=e.level),t}function VI(r,e){if(r){var t=[.7,.7,.75,.75,.3,.3];r.left==null&&(r.left=t[0]),r.right==null&&(r.right=t[1]),r.top==null&&(r.top=t[2]),r.bottom==null&&(r.bottom=t[3]),r.header==null&&(r.header=t[4]),r.footer==null&&(r.footer=t[5])}}function Ec(r,e,t){var n=t.revssf[e.z!=null?e.z:"General"],i=60,s=r.length;if(n==null&&t.ssf){for(;i<392;++i)if(t.ssf[i]==null){DA(e.z,i),t.ssf[i]=e.z,t.revssf[e.z]=n=i;break}}for(i=0;i!=s;++i)if(r[i].numFmtId===n)return i;return r[s]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},s}function NU(r,e,t){if(r&&r["!ref"]){var n=Vr(r["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+t+"): "+r["!ref"])}}function CU(r){if(r.length===0)return"";for(var e='<mergeCells count="'+r.length+'">',t=0;t!=r.length;++t)e+='<mergeCell ref="'+En(r[t])+'"/>';return e+"</mergeCells>"}function kU(r,e,t,n,i){var s=!1,a={},o=null;if(n.bookType!=="xlsx"&&e.vbaraw){var c=e.SheetNames[t];try{e.Workbook&&(c=e.Workbook.Sheets[t].CodeName||c)}catch{}s=!0,a.codeName=Qf(yr(c))}if(r&&r["!outline"]){var u={summaryBelow:1,summaryRight:1};r["!outline"].above&&(u.summaryBelow=0),r["!outline"].left&&(u.summaryRight=0),o=(o||"")+st("outlinePr",null,u)}!s&&!o||(i[i.length]=st("sheetPr",o,a))}var RU=["objects","scenarios","selectLockedCells","selectUnlockedCells"],LU=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function DU(r){var e={sheet:1};return RU.forEach(function(t){r[t]!=null&&r[t]&&(e[t]="1")}),LU.forEach(function(t){r[t]!=null&&!r[t]&&(e[t]="0")}),r.password&&(e.password=EI(r.password).toString(16).toUpperCase()),st("sheetProtection",null,e)}function FU(r){return VI(r),st("pageMargins",null,r)}function OU(r,e){for(var t=["<cols>"],n,i=0;i!=e.length;++i)(n=e[i])&&(t[t.length]=st("col",null,vm(i,n)));return t[t.length]="</cols>",t.join("")}function MU(r,e,t,n){var i=typeof r.ref=="string"?r.ref:En(r.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var s=t.Workbook.Names,a=ms(i);a.s.r==a.e.r&&(a.e.r=ms(e["!ref"]).e.r,i=En(a));for(var o=0;o<s.length;++o){var c=s[o];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+t.SheetNames[n]+"'!"+i;break}}return o==s.length&&s.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+i}),st("autoFilter",null,{ref:i})}function BU(r,e,t,n){var i={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(i.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),st("sheetViews",st("sheetView",null,i),{})}function VU(r,e,t,n){if(r.c&&t["!comments"].push([e,r.c]),r.v===void 0&&typeof r.f!="string"||r.t==="z"&&!r.f)return"";var i="",s=r.t,a=r.v;if(r.t!=="z")switch(r.t){case"b":i=r.v?"1":"0";break;case"n":i=""+r.v;break;case"e":i=Pd[r.v];break;case"d":n&&n.cellDates?i=ki(r.v,-1).toISOString():(r=Xi(r),r.t="n",i=""+(r.v=Yi(ki(r.v)))),typeof r.z>"u"&&(r.z=tn[14]);break;default:i=r.v;break}var o=Zn("v",yr(i)),c={r:e},u=Ec(n.cellXfs,r,n);switch(u!==0&&(c.s=u),r.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(r.v==null){delete r.t;break}if(r.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){o=Zn("v",""+qv(n.Strings,r.v,n.revStrings)),c.t="s";break}c.t="str";break}if(r.t!=s&&(r.t=s,r.v=a),typeof r.f=="string"&&r.f){var l=r.F&&r.F.slice(0,e.length)==e?{t:"array",ref:r.F}:null;o=st("f",yr(r.f),l)+(r.v!=null?o:"")}return r.l&&t["!links"].push([e,r.l]),r.D&&(c.cm=1),st("c",o,c)}function UU(r,e,t,n){var i=[],s=[],a=Vr(r["!ref"]),o="",c,u="",l=[],d=0,g=0,p=r["!rows"],x=Array.isArray(r),_={r:u},E,P=-1;for(g=a.s.c;g<=a.e.c;++g)l[g]=di(g);for(d=a.s.r;d<=a.e.r;++d){for(s=[],u=ri(d),g=a.s.c;g<=a.e.c;++g){c=l[g]+u;var L=x?(r[d]||[])[g]:r[c];L!==void 0&&(o=VU(L,c,r,e))!=null&&s.push(o)}(s.length>0||p&&p[d])&&(_={r:u},p&&p[d]&&(E=p[d],E.hidden&&(_.hidden=1),P=-1,E.hpx?P=yp(E.hpx):E.hpt&&(P=E.hpt),P>-1&&(_.ht=P,_.customHeight=1),E.level&&(_.outlineLevel=E.level)),i[i.length]=st("row",s.join(""),_))}if(p)for(;d<p.length;++d)p&&p[d]&&(_={r:d+1},E=p[d],E.hidden&&(_.hidden=1),P=-1,E.hpx?P=yp(E.hpx):E.hpt&&(P=E.hpt),P>-1&&(_.ht=P,_.customHeight=1),E.level&&(_.outlineLevel=E.level),i[i.length]=st("row","",_));return i.join("")}function UI(r,e,t,n){var i=[Tn,st("worksheet",null,{xmlns:Th[0],"xmlns:r":Mn.r})],s=t.SheetNames[r],a=0,o="",c=t.Sheets[s];c==null&&(c={});var u=c["!ref"]||"A1",l=Vr(u);if(l.e.c>16383||l.e.r>1048575){if(e.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");l.e.c=Math.min(l.e.c,16383),l.e.r=Math.min(l.e.c,1048575),u=En(l)}n||(n={}),c["!comments"]=[];var d=[];kU(c,t,r,e,i),i[i.length]=st("dimension",null,{ref:u}),i[i.length]=BU(c,e,r,t),e.sheetFormat&&(i[i.length]=st("sheetFormatPr",null,{defaultRowHeight:e.sheetFormat.defaultRowHeight||"16",baseColWidth:e.sheetFormat.baseColWidth||"10",outlineLevelRow:e.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(i[i.length]=OU(c,c["!cols"])),i[a=i.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(o=UU(c,e),o.length>0&&(i[i.length]=o)),i.length>a+1&&(i[i.length]="</sheetData>",i[a]=i[a].replace("/>",">")),c["!protect"]&&(i[i.length]=DU(c["!protect"])),c["!autofilter"]!=null&&(i[i.length]=MU(c["!autofilter"],c,t,r)),c["!merges"]!=null&&c["!merges"].length>0&&(i[i.length]=CU(c["!merges"]));var g=-1,p,x=-1;return c["!links"].length>0&&(i[i.length]="<hyperlinks>",c["!links"].forEach(function(_){_[1].Target&&(p={ref:_[0]},_[1].Target.charAt(0)!="#"&&(x=vr(n,-1,yr(_[1].Target).replace(/#.*$/,""),ar.HLINK),p["r:id"]="rId"+x),(g=_[1].Target.indexOf("#"))>-1&&(p.location=yr(_[1].Target.slice(g+1))),_[1].Tooltip&&(p.tooltip=yr(_[1].Tooltip)),i[i.length]=st("hyperlink",null,p))}),i[i.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(i[i.length]=FU(c["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&(i[i.length]=Zn("ignoredErrors",st("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(x=vr(n,-1,"../drawings/drawing"+(r+1)+".xml",ar.DRAW),i[i.length]=st("drawing",null,{"r:id":"rId"+x}),c["!drawing"]=d),c["!comments"].length>0&&(x=vr(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",ar.VML),i[i.length]=st("legacyDrawing",null,{"r:id":"rId"+x}),c["!legacy"]=x),i.length>1&&(i[i.length]="</worksheet>",i[1]=i[1].replace("/>",">")),i.join("")}function jU(r,e){var t={},n=r.l+e;t.r=r.read_shift(4),r.l+=4;var i=r.read_shift(2);r.l+=1;var s=r.read_shift(1);return r.l=n,s&7&&(t.level=s&7),s&16&&(t.hidden=!0),s&32&&(t.hpt=i/20),t}function qU(r,e,t){var n=Me(145),i=(t["!rows"]||[])[r]||{};n.write_shift(4,r),n.write_shift(4,0);var s=320;i.hpx?s=yp(i.hpx)*20:i.hpt&&(s=i.hpt*20),n.write_shift(2,s),n.write_shift(1,0);var a=0;i.level&&(a|=i.level),i.hidden&&(a|=16),(i.hpx||i.hpt)&&(a|=32),n.write_shift(1,a),n.write_shift(1,0);var o=0,c=n.l;n.l+=4;for(var u={r,c:0},l=0;l<16;++l)if(!(e.s.c>l+1<<10||e.e.c<l<<10)){for(var d=-1,g=-1,p=l<<10;p<l+1<<10;++p){u.c=p;var x=Array.isArray(t)?(t[u.r]||[])[u.c]:t[xr(u)];x&&(d<0&&(d=p),g=p)}d<0||(++o,n.write_shift(4,d),n.write_shift(4,g))}var _=n.l;return n.l=c,n.write_shift(4,o),n.l=_,n.length>n.l?n.slice(0,n.l):n}function zU(r,e,t,n){var i=qU(n,t,e);(i.length>17||(e["!rows"]||[])[n])&&He(r,0,i)}var WU=Mu,HU=Ah;function $U(){}function GU(r,e){var t={},n=r[r.l];return++r.l,t.above=!(n&64),t.left=!(n&128),r.l+=18,t.name=n9(r),t}function KU(r,e,t){t==null&&(t=Me(84+4*r.length));var n=192;e&&(e.above&&(n&=-65),e.left&&(n&=-129)),t.write_shift(1,n);for(var i=1;i<3;++i)t.write_shift(1,0);return mp({auto:1},t),t.write_shift(-4,-1),t.write_shift(-4,-1),tI(r,t),t.slice(0,t.l)}function YU(r){var e=Ns(r);return[e]}function XU(r,e,t){return t==null&&(t=Me(8)),Du(e,t)}function JU(r){var e=Fu(r);return[e]}function QU(r,e,t){return t==null&&(t=Me(4)),Ou(e,t)}function ZU(r){var e=Ns(r),t=r.read_shift(1);return[e,t,"b"]}function ej(r,e,t){return t==null&&(t=Me(9)),Du(e,t),t.write_shift(1,r.v?1:0),t}function tj(r){var e=Fu(r),t=r.read_shift(1);return[e,t,"b"]}function rj(r,e,t){return t==null&&(t=Me(5)),Ou(e,t),t.write_shift(1,r.v?1:0),t}function nj(r){var e=Ns(r),t=r.read_shift(1);return[e,t,"e"]}function ij(r,e,t){return t==null&&(t=Me(9)),Du(e,t),t.write_shift(1,r.v),t}function sj(r){var e=Fu(r),t=r.read_shift(1);return[e,t,"e"]}function aj(r,e,t){return t==null&&(t=Me(8)),Ou(e,t),t.write_shift(1,r.v),t.write_shift(2,0),t.write_shift(1,0),t}function oj(r){var e=Ns(r),t=r.read_shift(4);return[e,t,"s"]}function cj(r,e,t){return t==null&&(t=Me(12)),Du(e,t),t.write_shift(4,e.v),t}function uj(r){var e=Fu(r),t=r.read_shift(4);return[e,t,"s"]}function lj(r,e,t){return t==null&&(t=Me(8)),Ou(e,t),t.write_shift(4,e.v),t}function hj(r){var e=Ns(r),t=Ih(r);return[e,t,"n"]}function fj(r,e,t){return t==null&&(t=Me(16)),Du(e,t),Au(r.v,t),t}function dj(r){var e=Fu(r),t=Ih(r);return[e,t,"n"]}function pj(r,e,t){return t==null&&(t=Me(12)),Ou(e,t),Au(r.v,t),t}function mj(r){var e=Ns(r),t=rI(r);return[e,t,"n"]}function gj(r,e,t){return t==null&&(t=Me(12)),Du(e,t),nI(r.v,t),t}function vj(r){var e=Fu(r),t=rI(r);return[e,t,"n"]}function _j(r,e,t){return t==null&&(t=Me(8)),Ou(e,t),nI(r.v,t),t}function yj(r){var e=Ns(r),t=Dv(r);return[e,t,"is"]}function wj(r){var e=Ns(r),t=pi(r);return[e,t,"str"]}function xj(r,e,t){return t==null&&(t=Me(12+4*r.v.length)),Du(e,t),Vn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function Ej(r){var e=Fu(r),t=pi(r);return[e,t,"str"]}function Tj(r,e,t){return t==null&&(t=Me(8+4*r.v.length)),Ou(e,t),Vn(r.v,t),t.length>t.l?t.slice(0,t.l):t}function bj(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=r.read_shift(1),a=[i,s,"b"];if(t.cellFormula){r.l+=2;var o=gm(r,n-r.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else r.l=n;return a}function Aj(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=r.read_shift(1),a=[i,s,"e"];if(t.cellFormula){r.l+=2;var o=gm(r,n-r.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else r.l=n;return a}function Ij(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=Ih(r),a=[i,s,"n"];if(t.cellFormula){r.l+=2;var o=gm(r,n-r.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else r.l=n;return a}function Sj(r,e,t){var n=r.l+e,i=Ns(r);i.r=t["!row"];var s=pi(r),a=[i,s,"str"];if(t.cellFormula){r.l+=2;var o=gm(r,n-r.l,t);a[3]=ch(o,null,i,t.supbooks,t)}else r.l=n;return a}var Pj=Mu,Nj=Ah;function Cj(r,e){return e==null&&(e=Me(4)),e.write_shift(4,r),e}function kj(r,e){var t=r.l+e,n=Mu(r),i=Fv(r),s=pi(r),a=pi(r),o=pi(r);r.l=t;var c={rfx:n,relId:i,loc:s,display:o};return a&&(c.Tooltip=a),c}function Rj(r,e){var t=Me(50+4*(r[1].Target.length+(r[1].Tooltip||"").length));Ah({s:Bn(r[0]),e:Bn(r[0])},t),Ov("rId"+e,t);var n=r[1].Target.indexOf("#"),i=n==-1?"":r[1].Target.slice(n+1);return Vn(i||"",t),Vn(r[1].Tooltip||"",t),Vn("",t),t.slice(0,t.l)}function Lj(){}function Dj(r,e,t){var n=r.l+e,i=iI(r),s=r.read_shift(1),a=[i];if(a[2]=s,t.cellFormula){var o=EU(r,n-r.l,t);a[1]=o}else r.l=n;return a}function Fj(r,e,t){var n=r.l+e,i=Mu(r),s=[i];if(t.cellFormula){var a=bU(r,n-r.l,t);s[1]=a,r.l=n}else r.l=n;return s}function Oj(r,e,t){t==null&&(t=Me(18));var n=vm(r,e);t.write_shift(-4,r),t.write_shift(-4,r),t.write_shift(4,(n.width||10)*256),t.write_shift(4,0);var i=0;return e.hidden&&(i|=1),typeof n.width=="number"&&(i|=2),e.level&&(i|=e.level<<8),t.write_shift(2,i),t}var jI=["left","right","top","bottom","header","footer"];function Mj(r){var e={};return jI.forEach(function(t){e[t]=Ih(r)}),e}function Bj(r,e){return e==null&&(e=Me(6*8)),VI(r),jI.forEach(function(t){Au(r[t],e)}),e}function Vj(r){var e=r.read_shift(2);return r.l+=28,{RTL:e&32}}function Uj(r,e,t){t==null&&(t=Me(30));var n=924;return(((e||{}).Views||[])[0]||{}).RTL&&(n|=32),t.write_shift(2,n),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,100),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(4,0),t}function jj(r){var e=Me(24);return e.write_shift(4,4),e.write_shift(4,1),Ah(r,e),e}function qj(r,e){return e==null&&(e=Me(16*4+2)),e.write_shift(2,r.password?EI(r.password):0),e.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(t){t[1]?e.write_shift(4,r[t[0]]!=null&&!r[t[0]]?1:0):e.write_shift(4,r[t[0]]!=null&&r[t[0]]?0:1)}),e}function zj(){}function Wj(){}function Hj(r,e,t,n,i,s,a){if(e.v===void 0)return!1;var o="";switch(e.t){case"b":o=e.v?"1":"0";break;case"d":e=Xi(e),e.z=e.z||tn[14],e.v=Yi(ki(e.v)),e.t="n";break;case"n":case"e":o=""+e.v;break;default:o=e.v;break}var c={r:t,c:n};switch(c.s=Ec(i.cellXfs,e,i),e.l&&s["!links"].push([xr(c),e.l]),e.c&&s["!comments"].push([xr(c),e.c]),e.t){case"s":case"str":return i.bookSST?(o=qv(i.Strings,e.v,i.revStrings),c.t="s",c.v=o,a?He(r,18,lj(e,c)):He(r,7,cj(e,c))):(c.t="str",a?He(r,17,Tj(e,c)):He(r,6,xj(e,c))),!0;case"n":return e.v==(e.v|0)&&e.v>-1e3&&e.v<1e3?a?He(r,13,_j(e,c)):He(r,2,gj(e,c)):a?He(r,16,pj(e,c)):He(r,5,fj(e,c)),!0;case"b":return c.t="b",a?He(r,15,rj(e,c)):He(r,4,ej(e,c)),!0;case"e":return c.t="e",a?He(r,14,aj(e,c)):He(r,3,ij(e,c)),!0}return a?He(r,12,QU(e,c)):He(r,1,XU(e,c)),!0}function $j(r,e,t,n){var i=Vr(e["!ref"]||"A1"),s,a="",o=[];He(r,145);var c=Array.isArray(e),u=i.e.r;e["!rows"]&&(u=Math.max(i.e.r,e["!rows"].length-1));for(var l=i.s.r;l<=u;++l){a=ri(l),zU(r,e,i,l);var d=!1;if(l<=i.e.r)for(var g=i.s.c;g<=i.e.c;++g){l===i.s.r&&(o[g]=di(g)),s=o[g]+a;var p=c?(e[l]||[])[g]:e[s];if(!p){d=!1;continue}d=Hj(r,p,l,g,n,e,d)}}He(r,146)}function Gj(r,e){!e||!e["!merges"]||(He(r,177,Cj(e["!merges"].length)),e["!merges"].forEach(function(t){He(r,176,Nj(t))}),He(r,178))}function Kj(r,e){!e||!e["!cols"]||(He(r,390),e["!cols"].forEach(function(t,n){t&&He(r,60,Oj(n,t))}),He(r,391))}function Yj(r,e){!e||!e["!ref"]||(He(r,648),He(r,649,jj(Vr(e["!ref"]))),He(r,650))}function Xj(r,e,t){e["!links"].forEach(function(n){if(n[1].Target){var i=vr(t,-1,n[1].Target.replace(/#.*$/,""),ar.HLINK);He(r,494,Rj(n,i))}}),delete e["!links"]}function Jj(r,e,t,n){if(e["!comments"].length>0){var i=vr(n,-1,"../drawings/vmlDrawing"+(t+1)+".vml",ar.VML);He(r,551,Ov("rId"+i)),e["!legacy"]=i}}function Qj(r,e,t,n){if(e["!autofilter"]){var i=e["!autofilter"],s=typeof i.ref=="string"?i.ref:En(i.ref);t.Workbook||(t.Workbook={Sheets:[]}),t.Workbook.Names||(t.Workbook.Names=[]);var a=t.Workbook.Names,o=ms(s);o.s.r==o.e.r&&(o.e.r=ms(e["!ref"]).e.r,s=En(o));for(var c=0;c<a.length;++c){var u=a[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+t.SheetNames[n]+"'!"+s;break}}c==a.length&&a.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+t.SheetNames[n]+"'!"+s}),He(r,161,Ah(Vr(s))),He(r,162)}}function Zj(r,e,t){He(r,133),He(r,137,Uj(e,t)),He(r,138),He(r,134)}function eq(r,e){e["!protect"]&&He(r,535,qj(e["!protect"]))}function tq(r,e,t,n){var i=Gi(),s=t.SheetNames[r],a=t.Sheets[s]||{},o=s;try{t&&t.Workbook&&(o=t.Workbook.Sheets[r].CodeName||o)}catch{}var c=Vr(a["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(e.WTF)throw new Error("Range "+(a["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return a["!links"]=[],a["!comments"]=[],He(i,129),(t.vbaraw||a["!outline"])&&He(i,147,KU(o,a["!outline"])),He(i,148,HU(c)),Zj(i,a,t.Workbook),Kj(i,a),$j(i,a,r,e),eq(i,a),Qj(i,a,t,r),Gj(i,a),Xj(i,a,n),a["!margins"]&&He(i,476,Bj(a["!margins"])),(!e||e.ignoreEC||e.ignoreEC==null)&&Yj(i,a),Jj(i,a,r,n),He(i,130),i.end()}function rq(r,e){r.l+=10;var t=pi(r);return{name:t}}var nq=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]];function iq(r){return!r.Workbook||!r.Workbook.WBProps?"false":FM(r.Workbook.WBProps.date1904)?"true":"false"}var sq="][*?/\\".split("");function qI(r,e){if(r.length>31)throw new Error("Sheet names cannot exceed 31 chars");var t=!0;return sq.forEach(function(n){if(r.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),t}function aq(r,e,t){r.forEach(function(n,i){qI(n);for(var s=0;s<i;++s)if(n==r[s])throw new Error("Duplicate Sheet Name: "+n);if(t){var a=e&&e[i]&&e[i].CodeName||n;if(a.charCodeAt(0)==95&&a.length>22)throw new Error("Bad Code Name: Worksheet"+a)}})}function oq(r){if(!r||!r.SheetNames||!r.Sheets)throw new Error("Invalid Workbook");if(!r.SheetNames.length)throw new Error("Workbook is empty");var e=r.Workbook&&r.Workbook.Sheets||[];aq(r.SheetNames,e,!!r.vbaraw);for(var t=0;t<r.SheetNames.length;++t)NU(r.Sheets[r.SheetNames[t]],r.SheetNames[t],t)}function zI(r){var e=[Tn];e[e.length]=st("workbook",null,{xmlns:Th[0],"xmlns:r":Mn.r});var t=r.Workbook&&(r.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};r.Workbook&&r.Workbook.WBProps&&(nq.forEach(function(o){r.Workbook.WBProps[o[0]]!=null&&r.Workbook.WBProps[o[0]]!=o[1]&&(n[o[0]]=r.Workbook.WBProps[o[0]])}),r.Workbook.WBProps.CodeName&&(n.codeName=r.Workbook.WBProps.CodeName,delete n.CodeName)),e[e.length]=st("workbookPr",null,n);var i=r.Workbook&&r.Workbook.Sheets||[],s=0;if(i&&i[0]&&i[0].Hidden){for(e[e.length]="<bookViews>",s=0;s!=r.SheetNames.length&&!(!i[s]||!i[s].Hidden);++s);s==r.SheetNames.length&&(s=0),e[e.length]='<workbookView firstSheet="'+s+'" activeTab="'+s+'"/>',e[e.length]="</bookViews>"}for(e[e.length]="<sheets>",s=0;s!=r.SheetNames.length;++s){var a={name:yr(r.SheetNames[s].slice(0,31))};if(a.sheetId=""+(s+1),a["r:id"]="rId"+(s+1),i[s])switch(i[s].Hidden){case 1:a.state="hidden";break;case 2:a.state="veryHidden";break}e[e.length]=st("sheet",null,a)}return e[e.length]="</sheets>",t&&(e[e.length]="<definedNames>",r.Workbook&&r.Workbook.Names&&r.Workbook.Names.forEach(function(o){var c={name:o.Name};o.Comment&&(c.comment=o.Comment),o.Sheet!=null&&(c.localSheetId=""+o.Sheet),o.Hidden&&(c.hidden="1"),o.Ref&&(e[e.length]=st("definedName",yr(o.Ref),c))}),e[e.length]="</definedNames>"),e.length>2&&(e[e.length]="</workbook>",e[1]=e[1].replace("/>",">")),e.join("")}function cq(r,e){var t={};return t.Hidden=r.read_shift(4),t.iTabID=r.read_shift(4),t.strRelID=p1(r),t.name=pi(r),t}function uq(r,e){return e||(e=Me(127)),e.write_shift(4,r.Hidden),e.write_shift(4,r.iTabID),Ov(r.strRelID,e),Vn(r.name.slice(0,31),e),e.length>e.l?e.slice(0,e.l):e}function lq(r,e){var t={},n=r.read_shift(4);t.defaultThemeVersion=r.read_shift(4);var i=e>8?pi(r):"";return i.length>0&&(t.CodeName=i),t.autoCompressPictures=!!(n&65536),t.backupFile=!!(n&64),t.checkCompatibility=!!(n&4096),t.date1904=!!(n&1),t.filterPrivacy=!!(n&8),t.hidePivotFieldList=!!(n&1024),t.promptedSolutions=!!(n&16),t.publishItems=!!(n&2048),t.refreshAllConnections=!!(n&262144),t.saveExternalLinkValues=!!(n&128),t.showBorderUnselectedTables=!!(n&4),t.showInkAnnotation=!!(n&32),t.showObjects=["all","placeholders","none"][n>>13&3],t.showPivotChartFilter=!!(n&32768),t.updateLinks=["userSet","never","always"][n>>8&3],t}function hq(r,e){e||(e=Me(72));var t=0;return r&&r.filterPrivacy&&(t|=8),e.write_shift(4,t),e.write_shift(4,0),tI(r&&r.CodeName||"ThisWorkbook",e),e.slice(0,e.l)}function fq(r,e,t){var n=r.l+e;r.l+=4,r.l+=1;var i=r.read_shift(4),s=i9(r),a=TU(r,0,t),o=Fv(r);r.l=n;var c={Name:s,Ptg:a};return i<268435455&&(c.Sheet=i),o&&(c.Comment=o),c}function dq(r,e){He(r,143);for(var t=0;t!=e.SheetNames.length;++t){var n=e.Workbook&&e.Workbook.Sheets&&e.Workbook.Sheets[t]&&e.Workbook.Sheets[t].Hidden||0,i={Hidden:n,iTabID:t+1,strRelID:"rId"+(t+1),name:e.SheetNames[t]};He(r,156,uq(i))}He(r,144)}function pq(r,e){e||(e=Me(127));for(var t=0;t!=4;++t)e.write_shift(4,0);return Vn("SheetJS",e),Vn(op.version,e),Vn(op.version,e),Vn("7262",e),e.length>e.l?e.slice(0,e.l):e}function mq(r,e){e||(e=Me(29)),e.write_shift(-4,0),e.write_shift(-4,460),e.write_shift(4,28800),e.write_shift(4,17600),e.write_shift(4,500),e.write_shift(4,r),e.write_shift(4,r);var t=120;return e.write_shift(1,t),e.length>e.l?e.slice(0,e.l):e}function gq(r,e){if(!(!e.Workbook||!e.Workbook.Sheets)){for(var t=e.Workbook.Sheets,n=0,i=-1,s=-1;n<t.length;++n)!t[n]||!t[n].Hidden&&i==-1?i=n:t[n].Hidden==1&&s==-1&&(s=n);s>i||(He(r,135),He(r,158,mq(i)),He(r,136))}}function vq(r,e){var t=Gi();return He(t,131),He(t,128,pq()),He(t,153,hq(r.Workbook&&r.Workbook.WBProps||null)),gq(t,r),dq(t,r),He(t,132),t.end()}function _q(r,e,t){return(e.slice(-4)===".bin"?vq:zI)(r)}function yq(r,e,t,n,i){return(e.slice(-4)===".bin"?tq:UI)(r,t,n,i)}function wq(r,e,t){return(e.slice(-4)===".bin"?BB:AI)(r,t)}function xq(r,e,t){return(e.slice(-4)===".bin"?hB:xI)(r,t)}function Eq(r,e,t){return(e.slice(-4)===".bin"?eV:CI)(r)}function Tq(r){return(r.slice(-4)===".bin"?$B:PI)()}function bq(r,e){var t=[];return r.Props&&t.push(w9(r.Props,e)),r.Custprops&&t.push(x9(r.Props,r.Custprops)),t.join("")}function Aq(){return""}function Iq(r,e){var t=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return e.cellXfs.forEach(function(n,i){var s=[];s.push(st("NumberFormat",null,{"ss:Format":yr(tn[n.numFmtId])}));var a={"ss:ID":"s"+(21+i)};t.push(st("Style",s.join(""),a))}),st("Styles",t.join(""))}function WI(r){return st("NamedRange",null,{"ss:Name":r.Name,"ss:RefersTo":"="+Uv(r.Ref,{r:0,c:0})})}function Sq(r){if(!((r||{}).Workbook||{}).Names)return"";for(var e=r.Workbook.Names,t=[],n=0;n<e.length;++n){var i=e[n];i.Sheet==null&&(i.Name.match(/^_xlfn\./)||t.push(WI(i)))}return st("Names",t.join(""))}function Pq(r,e,t,n){if(!r||!((n||{}).Workbook||{}).Names)return"";for(var i=n.Workbook.Names,s=[],a=0;a<i.length;++a){var o=i[a];o.Sheet==t&&(o.Name.match(/^_xlfn\./)||s.push(WI(o)))}return s.join("")}function Nq(r,e,t,n){if(!r)return"";var i=[];if(r["!margins"]&&(i.push("<PageSetup>"),r["!margins"].header&&i.push(st("Header",null,{"x:Margin":r["!margins"].header})),r["!margins"].footer&&i.push(st("Footer",null,{"x:Margin":r["!margins"].footer})),i.push(st("PageMargins",null,{"x:Bottom":r["!margins"].bottom||"0.75","x:Left":r["!margins"].left||"0.7","x:Right":r["!margins"].right||"0.7","x:Top":r["!margins"].top||"0.75"})),i.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[t])if(n.Workbook.Sheets[t].Hidden)i.push(st("Visible",n.Workbook.Sheets[t].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var s=0;s<t&&!(n.Workbook.Sheets[s]&&!n.Workbook.Sheets[s].Hidden);++s);s==t&&i.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&i.push("<DisplayRightToLeft/>"),r["!protect"]&&(i.push(Zn("ProtectContents","True")),r["!protect"].objects&&i.push(Zn("ProtectObjects","True")),r["!protect"].scenarios&&i.push(Zn("ProtectScenarios","True")),r["!protect"].selectLockedCells!=null&&!r["!protect"].selectLockedCells?i.push(Zn("EnableSelection","NoSelection")):r["!protect"].selectUnlockedCells!=null&&!r["!protect"].selectUnlockedCells&&i.push(Zn("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(a){r["!protect"][a[0]]&&i.push("<"+a[1]+"/>")})),i.length==0?"":st("WorksheetOptions",i.join(""),{xmlns:ls.x})}function Cq(r){return r.map(function(e){var t=DM(e.t||""),n=st("ss:Data",t,{xmlns:"http://www.w3.org/TR/REC-html40"});return st("Comment",n,{"ss:Author":e.a})}).join("")}function kq(r,e,t,n,i,s,a){if(!r||r.v==null&&r.f==null)return"";var o={};if(r.f&&(o["ss:Formula"]="="+yr(Uv(r.f,a))),r.F&&r.F.slice(0,e.length)==e){var c=Bn(r.F.slice(e.length+1));o["ss:ArrayRange"]="RC:R"+(c.r==a.r?"":"["+(c.r-a.r)+"]")+"C"+(c.c==a.c?"":"["+(c.c-a.c)+"]")}if(r.l&&r.l.Target&&(o["ss:HRef"]=yr(r.l.Target),r.l.Tooltip&&(o["x:HRefScreenTip"]=yr(r.l.Tooltip))),t["!merges"])for(var u=t["!merges"],l=0;l!=u.length;++l)u[l].s.c!=a.c||u[l].s.r!=a.r||(u[l].e.c>u[l].s.c&&(o["ss:MergeAcross"]=u[l].e.c-u[l].s.c),u[l].e.r>u[l].s.r&&(o["ss:MergeDown"]=u[l].e.r-u[l].s.r));var d="",g="";switch(r.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",g=String(r.v);break;case"b":d="Boolean",g=r.v?"1":"0";break;case"e":d="Error",g=Pd[r.v];break;case"d":d="DateTime",g=new Date(r.v).toISOString(),r.z==null&&(r.z=r.z||tn[14]);break;case"s":d="String",g=LM(r.v||"");break}var p=Ec(n.cellXfs,r,n);o["ss:StyleID"]="s"+(21+p),o["ss:Index"]=a.c+1;var x=r.v!=null?g:"",_=r.t=="z"?"":'<Data ss:Type="'+d+'">'+x+"</Data>";return(r.c||[]).length>0&&(_+=Cq(r.c)),st("Cell",_,o)}function Rq(r,e){var t='<Row ss:Index="'+(r+1)+'"';return e&&(e.hpt&&!e.hpx&&(e.hpx=bI(e.hpt)),e.hpx&&(t+=' ss:AutoFitHeight="0" ss:Height="'+e.hpx+'"'),e.hidden&&(t+=' ss:Hidden="1"')),t+">"}function Lq(r,e,t,n){if(!r["!ref"])return"";var i=Vr(r["!ref"]),s=r["!merges"]||[],a=0,o=[];r["!cols"]&&r["!cols"].forEach(function(E,P){Bv(E);var L=!!E.width,M=vm(P,E),K={"ss:Index":P+1};L&&(K["ss:Width"]=vp(M.width)),E.hidden&&(K["ss:Hidden"]="1"),o.push(st("Column",null,K))});for(var c=Array.isArray(r),u=i.s.r;u<=i.e.r;++u){for(var l=[Rq(u,(r["!rows"]||[])[u])],d=i.s.c;d<=i.e.c;++d){var g=!1;for(a=0;a!=s.length;++a)if(!(s[a].s.c>d)&&!(s[a].s.r>u)&&!(s[a].e.c<d)&&!(s[a].e.r<u)){(s[a].s.c!=d||s[a].s.r!=u)&&(g=!0);break}if(!g){var p={r:u,c:d},x=xr(p),_=c?(r[u]||[])[d]:r[x];l.push(kq(_,x,r,e,t,n,p))}}l.push("</Row>"),l.length>2&&o.push(l.join(""))}return o.join("")}function Dq(r,e,t){var n=[],i=t.SheetNames[r],s=t.Sheets[i],a=s?Pq(s,e,r,t):"";return a.length>0&&n.push("<Names>"+a+"</Names>"),a=s?Lq(s,e,r,t):"",a.length>0&&n.push("<Table>"+a+"</Table>"),n.push(Nq(s,e,r,t)),n.join("")}function Fq(r,e){e||(e={}),r.SSF||(r.SSF=Xi(tn)),r.SSF&&(fm(),hm(r.SSF),e.revssf=dm(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF,e.cellXfs=[],Ec(e.cellXfs,{},{revssf:{General:0}}));var t=[];t.push(bq(r,e)),t.push(Aq()),t.push(""),t.push("");for(var n=0;n<r.SheetNames.length;++n)t.push(st("Worksheet",Dq(n,e,r),{"ss:Name":yr(r.SheetNames[n])}));return t[2]=Iq(r,e),t[3]=Sq(r),Tn+st("Workbook",t.join(""),{xmlns:ls.ss,"xmlns:o":ls.o,"xmlns:x":ls.x,"xmlns:ss":ls.ss,"xmlns:dt":ls.dt,"xmlns:html":ls.html})}var mg={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Oq(r,e){var t=[],n=[],i=[],s=0,a,o=Uw(Zw,"n"),c=Uw(e5,"n");if(r.Props)for(a=ii(r.Props),s=0;s<a.length;++s)(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],r.Props[a[s]]]);if(r.Custprops)for(a=ii(r.Custprops),s=0;s<a.length;++s)Object.prototype.hasOwnProperty.call(r.Props||{},a[s])||(Object.prototype.hasOwnProperty.call(o,a[s])?t:Object.prototype.hasOwnProperty.call(c,a[s])?n:i).push([a[s],r.Custprops[a[s]]]);var u=[];for(s=0;s<i.length;++s)pI.indexOf(i[s][0])>-1||hI.indexOf(i[s][0])>-1||i[s][1]!=null&&u.push(i[s]);n.length&&Ir.utils.cfb_add(e,"/SummaryInformation",s5(n,mg.SI,c,e5)),(t.length||u.length)&&Ir.utils.cfb_add(e,"/DocumentSummaryInformation",s5(t,mg.DSI,o,Zw,u.length?u:null,mg.UDI))}function Mq(r,e){var t=e||{},n=Ir.utils.cfb_new({root:"R"}),i="/Workbook";switch(t.bookType||"xls"){case"xls":t.bookType="biff8";case"xla":t.bookType||(t.bookType="xla");case"biff8":i="/Workbook",t.biff=8;break;case"biff5":i="/Book",t.biff=5;break;default:throw new Error("invalid type "+t.bookType+" for XLS CFB")}return Ir.utils.cfb_add(n,i,HI(r,t)),t.biff==8&&(r.Props||r.Custprops)&&Oq(r,n),t.biff==8&&r.vbaraw&&tV(n,Ir.read(r.vbaraw,{type:typeof r.vbaraw=="string"?"binary":"buffer"})),n}var Bq={0:{f:jU},1:{f:YU},2:{f:mj},3:{f:nj},4:{f:ZU},5:{f:hj},6:{f:wj},7:{f:oj},8:{f:Sj},9:{f:Ij},10:{f:bj},11:{f:Aj},12:{f:JU},13:{f:vj},14:{f:sj},15:{f:tj},16:{f:dj},17:{f:Ej},18:{f:uj},19:{f:Dv},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:fq},40:{},42:{},43:{f:wB},44:{f:_B},45:{f:TB},46:{f:AB},47:{f:bB},48:{},49:{f:JM},50:{},51:{f:jB},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Q9},62:{f:yj},63:{f:GB},64:{f:zj},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:Aa,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Vj},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:GU},148:{f:WU,p:16},151:{f:Lj},152:{},153:{f:lq},154:{},155:{},156:{f:cq},157:{},158:{},159:{T:1,f:cB},160:{T:-1},161:{T:1,f:Mu},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:Pj},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:VB},336:{T:-1},337:{f:WB,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:p1},357:{},358:{},359:{},360:{T:1},361:{},362:{f:$9},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:Dj},427:{f:Fj},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:Mj},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:$U},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:kj},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:p1},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:QB},633:{T:1},634:{T:-1},635:{T:1,f:XB},636:{T:-1},637:{f:t9},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:rq},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Wj},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}};function ot(r,e,t,n){var i=e;if(!isNaN(i)){var s=n||(t||[]).length||0,a=r.next(4);a.write_shift(2,i),a.write_shift(2,s),s>0&&kv(t)&&r.push(t)}}function Vq(r,e,t,n){var i=(t||[]).length||0;if(i<=8224)return ot(r,e,t,i);var s=e;if(!isNaN(s)){for(var a=t.parts||[],o=0,c=0,u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;var l=r.next(4);for(l.write_shift(2,s),l.write_shift(2,u),r.push(t.slice(c,c+u)),c+=u;c<i;){for(l=r.next(4),l.write_shift(2,60),u=0;u+(a[o]||8224)<=8224;)u+=a[o]||8224,o++;l.write_shift(2,u),r.push(t.slice(c,c+u)),c+=u}}}function Cd(r,e,t){return r||(r=Me(7)),r.write_shift(2,e),r.write_shift(2,t),r.write_shift(2,0),r.write_shift(1,0),r}function Uq(r,e,t,n){var i=Me(9);return Cd(i,r,e),gI(t,n||"b",i),i}function jq(r,e,t){var n=Me(8+2*t.length);return Cd(n,r,e),n.write_shift(1,t.length),n.write_shift(t.length,t,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function qq(r,e,t,n){if(e.v!=null)switch(e.t){case"d":case"n":var i=e.t=="d"?Yi(ki(e.v)):e.v;i==(i|0)&&i>=0&&i<65536?ot(r,2,rB(t,n,i)):ot(r,3,tB(t,n,i));return;case"b":case"e":ot(r,5,Uq(t,n,e.v,e.t));return;case"s":case"str":ot(r,4,jq(t,n,(e.v||"").slice(0,255)));return}ot(r,1,Cd(null,t,n))}function zq(r,e,t,n){var i=Array.isArray(e),s=Vr(e["!ref"]||"A1"),a,o="",c=[];if(s.e.c>255||s.e.r>16383){if(n.WTF)throw new Error("Range "+(e["!ref"]||"A1")+" exceeds format limit A1:IV16384");s.e.c=Math.min(s.e.c,255),s.e.r=Math.min(s.e.c,16383),a=En(s)}for(var u=s.s.r;u<=s.e.r;++u){o=ri(u);for(var l=s.s.c;l<=s.e.c;++l){u===s.s.r&&(c[l]=di(l)),a=c[l]+o;var d=i?(e[u]||[])[l]:e[a];d&&qq(r,d,u,l)}}}function Wq(r,e){for(var t=e||{},n=Gi(),i=0,s=0;s<r.SheetNames.length;++s)r.SheetNames[s]==t.sheet&&(i=s);if(i==0&&t.sheet&&r.SheetNames[0]!=t.sheet)throw new Error("Sheet not found: "+t.sheet);return ot(n,t.biff==4?1033:t.biff==3?521:9,Mv(r,16,t)),zq(n,r.Sheets[r.SheetNames[i]],i,t),ot(n,10),n.end()}function Hq(r,e,t){ot(r,49,B9({sz:12,name:"Arial"},t))}function $q(r,e,t){e&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var i=n[0];i<=n[1];++i)e[i]!=null&&ot(r,1054,j9(i,e[i],t))})}function Gq(r,e){var t=Me(19);t.write_shift(4,2151),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,1),t.write_shift(4,0),ot(r,2151,t),t=Me(39),t.write_shift(4,2152),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(2,3),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(2,1),t.write_shift(4,4),t.write_shift(2,0),yI(Vr(e["!ref"]||"A1"),t),t.write_shift(4,4),ot(r,2152,t)}function Kq(r,e){for(var t=0;t<16;++t)ot(r,224,o5({numFmtId:0,style:!0},0,e));e.cellXfs.forEach(function(n){ot(r,224,o5(n,0,e))})}function Yq(r,e){for(var t=0;t<e["!links"].length;++t){var n=e["!links"][t];ot(r,440,Y9(n)),n[1].Tooltip&&ot(r,2048,X9(n))}delete e["!links"]}function Xq(r,e){if(e){var t=0;e.forEach(function(n,i){++t<=256&&n&&ot(r,125,Z9(vm(i,n),i))})}}function Jq(r,e,t,n,i){var s=16+Ec(i.cellXfs,e,i);if(e.v==null&&!e.bf){ot(r,513,Iu(t,n,s));return}if(e.bf)ot(r,6,xU(e,t,n,i,s));else switch(e.t){case"d":case"n":var a=e.t=="d"?Yi(ki(e.v)):e.v;ot(r,515,H9(t,n,a,s));break;case"b":case"e":ot(r,517,W9(t,n,e.v,s,i,e.t));break;case"s":case"str":if(i.bookSST){var o=qv(i.Strings,e.v,i.revStrings);ot(r,253,V9(t,n,o,s))}else ot(r,516,U9(t,n,(e.v||"").slice(0,255),s,i));break;default:ot(r,513,Iu(t,n,s))}}function Qq(r,e,t){var n=Gi(),i=t.SheetNames[r],s=t.Sheets[i]||{},a=(t||{}).Workbook||{},o=(a.Sheets||[])[r]||{},c=Array.isArray(s),u=e.biff==8,l,d="",g=[],p=Vr(s["!ref"]||"A1"),x=u?65536:16384;if(p.e.c>255||p.e.r>=x){if(e.WTF)throw new Error("Range "+(s["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,x-1)}ot(n,2057,Mv(t,16,e)),ot(n,13,As(1)),ot(n,12,As(100)),ot(n,15,Ii(!0)),ot(n,17,Ii(!1)),ot(n,16,Au(.001)),ot(n,95,Ii(!0)),ot(n,42,Ii(!1)),ot(n,43,Ii(!1)),ot(n,130,As(1)),ot(n,128,z9()),ot(n,131,Ii(!1)),ot(n,132,Ii(!1)),u&&Xq(n,s["!cols"]),ot(n,512,q9(p,e)),u&&(s["!links"]=[]);for(var _=p.s.r;_<=p.e.r;++_){d=ri(_);for(var E=p.s.c;E<=p.e.c;++E){_===p.s.r&&(g[E]=di(E)),l=g[E]+d;var P=c?(s[_]||[])[E]:s[l];P&&(Jq(n,P,_,E,e),u&&P.l&&s["!links"].push([l,P.l]))}}var L=o.CodeName||o.name||i;return u&&ot(n,574,M9((a.Views||[])[0])),u&&(s["!merges"]||[]).length&&ot(n,229,K9(s["!merges"])),u&&Yq(n,s),ot(n,442,_I(L)),u&&Gq(n,s),ot(n,10),n.end()}function Zq(r,e,t){var n=Gi(),i=(r||{}).Workbook||{},s=i.Sheets||[],a=i.WBProps||{},o=t.biff==8,c=t.biff==5;if(ot(n,2057,Mv(r,5,t)),t.bookType=="xla"&&ot(n,135),ot(n,225,o?As(1200):null),ot(n,193,b9(2)),c&&ot(n,191),c&&ot(n,192),ot(n,226),ot(n,92,L9("SheetJS",t)),ot(n,66,As(o?1200:1252)),o&&ot(n,353,As(0)),o&&ot(n,448),ot(n,317,eB(r.SheetNames.length)),o&&r.vbaraw&&ot(n,211),o&&r.vbaraw){var u=a.CodeName||"ThisWorkbook";ot(n,442,_I(u))}ot(n,156,As(17)),ot(n,25,Ii(!1)),ot(n,18,Ii(!1)),ot(n,19,As(0)),o&&ot(n,431,Ii(!1)),o&&ot(n,444,As(0)),ot(n,61,O9()),ot(n,64,Ii(!1)),ot(n,141,As(0)),ot(n,34,Ii(iq(r)=="true")),ot(n,14,Ii(!0)),o&&ot(n,439,Ii(!1)),ot(n,218,As(0)),Hq(n,r,t),$q(n,r.SSF,t),Kq(n,t),o&&ot(n,352,Ii(!1));var l=n.end(),d=Gi();o&&ot(d,140,J9()),o&&t.Strings&&Vq(d,252,F9(t.Strings)),ot(d,10);var g=d.end(),p=Gi(),x=0,_=0;for(_=0;_<r.SheetNames.length;++_)x+=(o?12:11)+(o?2:1)*r.SheetNames[_].length;var E=l.length+x+g.length;for(_=0;_<r.SheetNames.length;++_){var P=s[_]||{};ot(p,133,D9({pos:E,hs:P.Hidden||0,dt:0,name:r.SheetNames[_]},t)),E+=e[_].length}var L=p.end();if(x!=L.length)throw new Error("BS8 "+x+" != "+L.length);var M=[];return l.length&&M.push(l),L.length&&M.push(L),g.length&&M.push(g),Qn(M)}function ez(r,e){var t=e||{},n=[];r&&!r.SSF&&(r.SSF=Xi(tn)),r&&r.SSF&&(fm(),hm(r.SSF),t.revssf=dm(r.SSF),t.revssf[r.SSF[65535]]=0,t.ssf=r.SSF),t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,zv(t),t.cellXfs=[],Ec(t.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={});for(var i=0;i<r.SheetNames.length;++i)n[n.length]=Qq(i,t,r);return n.unshift(Zq(r,n,t)),Qn(n)}function HI(r,e){for(var t=0;t<=r.SheetNames.length;++t){var n=r.Sheets[r.SheetNames[t]];if(!(!n||!n["!ref"])){var i=ms(n["!ref"]);i.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+r.SheetNames[t]+"' extends beyond column IV (255).  Data may be lost.")}}var s=e||{};switch(s.biff||2){case 8:case 5:return ez(r,e);case 4:case 3:case 2:return Wq(r,e)}throw new Error("invalid type "+s.bookType+" for BIFF")}function tz(r,e,t,n){for(var i=r["!merges"]||[],s=[],a=e.s.c;a<=e.e.c;++a){for(var o=0,c=0,u=0;u<i.length;++u)if(!(i[u].s.r>t||i[u].s.c>a)&&!(i[u].e.r<t||i[u].e.c<a)){if(i[u].s.r<t||i[u].s.c<a){o=-1;break}o=i[u].e.r-i[u].s.r+1,c=i[u].e.c-i[u].s.c+1;break}if(!(o<0)){var l=xr({r:t,c:a}),d=n.dense?(r[t]||[])[a]:r[l],g=d&&d.v!=null&&(d.h||RM(d.w||(so(d),d.w)||""))||"",p={};o>1&&(p.rowspan=o),c>1&&(p.colspan=c),n.editable?g='<span contenteditable="true">'+g+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(g='<a href="'+d.l.Target+'">'+g+"</a>")),p.id=(n.id||"sjs")+"-"+l,s.push(st("td",g,p))}}var x="<tr>";return x+s.join("")+"</tr>"}var rz='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',nz="</body></html>";function iz(r,e,t){var n=[];return n.join("")+"<table"+(t&&t.id?' id="'+t.id+'"':"")+">"}function $I(r,e){var t=e||{},n=t.header!=null?t.header:rz,i=t.footer!=null?t.footer:nz,s=[n],a=ms(r["!ref"]);t.dense=Array.isArray(r),s.push(iz(r,a,t));for(var o=a.s.r;o<=a.e.r;++o)s.push(tz(r,a,o,t));return s.push("</table>"+i),s.join("")}function GI(r,e,t){var n=t||{},i=0,s=0;if(n.origin!=null)if(typeof n.origin=="number")i=n.origin;else{var a=typeof n.origin=="string"?Bn(n.origin):n.origin;i=a.r,s=a.c}var o=e.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,o.length),u={s:{r:0,c:0},e:{r:i,c:s}};if(r["!ref"]){var l=ms(r["!ref"]);u.s.r=Math.min(u.s.r,l.s.r),u.s.c=Math.min(u.s.c,l.s.c),u.e.r=Math.max(u.e.r,l.e.r),u.e.c=Math.max(u.e.c,l.e.c),i==-1&&(u.e.r=i=l.e.r+1)}var d=[],g=0,p=r["!rows"]||(r["!rows"]=[]),x=0,_=0,E=0,P=0,L=0,M=0;for(r["!cols"]||(r["!cols"]=[]);x<o.length&&_<c;++x){var K=o[x];if(p5(K)){if(n.display)continue;p[_]={hidden:!0}}var ie=K.children;for(E=P=0;E<ie.length;++E){var oe=ie[E];if(!(n.display&&p5(oe))){var N=oe.hasAttribute("data-v")?oe.getAttribute("data-v"):oe.hasAttribute("v")?oe.getAttribute("v"):OM(oe.innerHTML),A=oe.getAttribute("data-z")||oe.getAttribute("z");for(g=0;g<d.length;++g){var k=d[g];k.s.c==P+s&&k.s.r<_+i&&_+i<=k.e.r&&(P=k.e.c+1-s,g=-1)}M=+oe.getAttribute("colspan")||1,((L=+oe.getAttribute("rowspan")||1)>1||M>1)&&d.push({s:{r:_+i,c:P+s},e:{r:_+i+(L||1)-1,c:P+s+(M||1)-1}});var V={t:"s",v:N},b=oe.getAttribute("data-t")||oe.getAttribute("t")||"";N!=null&&(N.length==0?V.t=b||"z":n.raw||N.trim().length==0||b=="s"||(N==="TRUE"?V={t:"b",v:!0}:N==="FALSE"?V={t:"b",v:!1}:isNaN(Qa(N))?isNaN(Jf(N).getDate())||(V={t:"d",v:ki(N)},n.cellDates||(V={t:"n",v:Yi(V.v)}),V.z=n.dateNF||tn[14]):V={t:"n",v:Qa(N)})),V.z===void 0&&A!=null&&(V.z=A);var S="",R=oe.getElementsByTagName("A");if(R&&R.length)for(var se=0;se<R.length&&!(R[se].hasAttribute("href")&&(S=R[se].getAttribute("href"),S.charAt(0)!="#"));++se);S&&S.charAt(0)!="#"&&(V.l={Target:S}),n.dense?(r[_+i]||(r[_+i]=[]),r[_+i][P+s]=V):r[xr({c:P+s,r:_+i})]=V,u.e.c<P+s&&(u.e.c=P+s),P+=M}}++_}return d.length&&(r["!merges"]=(r["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,_-1+i),r["!ref"]=En(u),_>=c&&(r["!fullref"]=En((u.e.r=o.length-x+_-1+i,u))),r}function KI(r,e){var t=e||{},n=t.dense?[]:{};return GI(n,r,e)}function sz(r,e){return Lu(KI(r,e),e)}function p5(r){var e="",t=az(r);return t&&(e=t(r).getPropertyValue("display")),e||(e=r.style&&r.style.display),e==="none"}function az(r){return r.ownerDocument.defaultView&&typeof r.ownerDocument.defaultView.getComputedStyle=="function"?r.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}var oz=function(){var r=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),e="<office:document-styles "+Zf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+r+"</office:document-styles>";return function(){return Tn+e}}(),m5=function(){var r=function(s){return yr(s).replace(/  +/g,function(a){return'<text:s text:c="'+a.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},e=`          <table:table-cell />
`,t=`          <table:covered-table-cell/>
`,n=function(s,a,o){var c=[];c.push('      <table:table table:name="'+yr(a.SheetNames[o])+`" table:style-name="ta1">
`);var u=0,l=0,d=ms(s["!ref"]||"A1"),g=s["!merges"]||[],p=0,x=Array.isArray(s);if(s["!cols"])for(l=0;l<=d.e.c;++l)c.push("        <table:table-column"+(s["!cols"][l]?' table:style-name="co'+s["!cols"][l].ods+'"':"")+`></table:table-column>
`);var _="",E=s["!rows"]||[];for(u=0;u<d.s.r;++u)_=E[u]?' table:style-name="ro'+E[u].ods+'"':"",c.push("        <table:table-row"+_+`></table:table-row>
`);for(;u<=d.e.r;++u){for(_=E[u]?' table:style-name="ro'+E[u].ods+'"':"",c.push("        <table:table-row"+_+`>
`),l=0;l<d.s.c;++l)c.push(e);for(;l<=d.e.c;++l){var P=!1,L={},M="";for(p=0;p!=g.length;++p)if(!(g[p].s.c>l)&&!(g[p].s.r>u)&&!(g[p].e.c<l)&&!(g[p].e.r<u)){(g[p].s.c!=l||g[p].s.r!=u)&&(P=!0),L["table:number-columns-spanned"]=g[p].e.c-g[p].s.c+1,L["table:number-rows-spanned"]=g[p].e.r-g[p].s.r+1;break}if(P){c.push(t);continue}var K=xr({r:u,c:l}),ie=x?(s[u]||[])[l]:s[K];if(ie&&ie.f&&(L["table:formula"]=yr(SU(ie.f)),ie.F&&ie.F.slice(0,K.length)==K)){var oe=ms(ie.F);L["table:number-matrix-columns-spanned"]=oe.e.c-oe.s.c+1,L["table:number-matrix-rows-spanned"]=oe.e.r-oe.s.r+1}if(!ie){c.push(e);continue}switch(ie.t){case"b":M=ie.v?"TRUE":"FALSE",L["office:value-type"]="boolean",L["office:boolean-value"]=ie.v?"true":"false";break;case"n":M=ie.w||String(ie.v||0),L["office:value-type"]="float",L["office:value"]=ie.v||0;break;case"s":case"str":M=ie.v==null?"":ie.v,L["office:value-type"]="string";break;case"d":M=ie.w||ki(ie.v).toISOString(),L["office:value-type"]="date",L["office:date-value"]=ki(ie.v).toISOString(),L["table:style-name"]="ce1";break;default:c.push(e);continue}var N=r(M);if(ie.l&&ie.l.Target){var A=ie.l.Target;A=A.charAt(0)=="#"?"#"+PU(A.slice(1)):A,A.charAt(0)!="#"&&!A.match(/^\w+:/)&&(A="../"+A),N=st("text:a",N,{"xlink:href":A.replace(/&/g,"&amp;")})}c.push("          "+st("table:table-cell",st("text:p",N,{}),L)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},i=function(s,a){s.push(` <office:automatic-styles>
`),s.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),s.push(`   <number:month number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:day number:style="long"/>
`),s.push(`   <number:text>/</number:text>
`),s.push(`   <number:year/>
`),s.push(`  </number:date-style>
`);var o=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var l=0;l<u["!cols"].length;++l)if(u["!cols"][l]){var d=u["!cols"][l];if(d.width==null&&d.wpx==null&&d.wch==null)continue;Bv(d),d.ods=o;var g=u["!cols"][l].wpx+"px";s.push('  <style:style style:name="co'+o+`" style:family="table-column">
`),s.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+g+`"/>
`),s.push(`  </style:style>
`),++o}}});var c=0;a.SheetNames.map(function(u){return a.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var l=0;l<u["!rows"].length;++l)if(u["!rows"][l]){u["!rows"][l].ods=c;var d=u["!rows"][l].hpx+"px";s.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),s.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),s.push(`  </style:style>
`),++c}}}),s.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),s.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),s.push(`  </style:style>
`),s.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),s.push(` </office:automatic-styles>
`)};return function(a,o){var c=[Tn],u=Zf({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),l=Zf({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});o.bookType=="fods"?(c.push("<office:document"+u+l+`>
`),c.push(uI().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),i(c,a),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=a.SheetNames.length;++d)c.push(n(a.Sheets[a.SheetNames[d]],a,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),o.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function YI(r,e){if(e.bookType=="fods")return m5(r,e);var t=Sv(),n="",i=[],s=[];return n="mimetype",$t(t,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",$t(t,n,m5(r,e)),i.push([n,"text/xml"]),s.push([n,"ContentFile"]),n="styles.xml",$t(t,n,oz(r,e)),i.push([n,"text/xml"]),s.push([n,"StylesFile"]),n="meta.xml",$t(t,n,Tn+uI()),i.push([n,"text/xml"]),s.push([n,"MetadataFile"]),n="manifest.rdf",$t(t,n,y9(s)),i.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",$t(t,n,v9(i)),t}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function wp(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function cz(r){return typeof TextEncoder<"u"?new TextEncoder().encode(r):Hs(Qf(r))}function uz(r,e){e:for(var t=0;t<=r.length-e.length;++t){for(var n=0;n<e.length;++n)if(r[t+n]!=e[n])continue e;return!0}return!1}function dc(r){var e=r.reduce(function(i,s){return i+s.length},0),t=new Uint8Array(e),n=0;return r.forEach(function(i){t.set(i,n),n+=i.length}),t}function lz(r,e,t){var n=Math.floor(t==0?0:Math.LOG10E*Math.log(Math.abs(t)))+6176-20,i=t/Math.pow(10,n-6176);r[e+15]|=n>>7,r[e+14]|=(n&127)<<1;for(var s=0;i>=1;++s,i/=256)r[e+s]=i&255;r[e+15]|=t>=0?0:128}function ed(r,e){var t=e?e[0]:0,n=r[t]&127;e:if(r[t++]>=128&&(n|=(r[t]&127)<<7,r[t++]<128||(n|=(r[t]&127)<<14,r[t++]<128)||(n|=(r[t]&127)<<21,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,28),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,35),++t,r[t++]<128)||(n+=(r[t]&127)*Math.pow(2,42),++t,r[t++]<128)))break e;return e&&(e[0]=t),n}function gr(r){var e=new Uint8Array(7);e[0]=r&127;var t=1;e:if(r>127){if(e[t-1]|=128,e[t]=r>>7&127,++t,r<=16383||(e[t-1]|=128,e[t]=r>>14&127,++t,r<=2097151)||(e[t-1]|=128,e[t]=r>>21&127,++t,r<=268435455)||(e[t-1]|=128,e[t]=r/256>>>21&127,++t,r<=34359738367)||(e[t-1]|=128,e[t]=r/65536>>>21&127,++t,r<=4398046511103))break e;e[t-1]|=128,e[t]=r/16777216>>>21&127,++t}return e.slice(0,t)}function Vl(r){var e=0,t=r[e]&127;e:if(r[e++]>=128){if(t|=(r[e]&127)<<7,r[e++]<128||(t|=(r[e]&127)<<14,r[e++]<128)||(t|=(r[e]&127)<<21,r[e++]<128))break e;t|=(r[e]&127)<<28}return t}function Sn(r){for(var e=[],t=[0];t[0]<r.length;){var n=t[0],i=ed(r,t),s=i&7;i=Math.floor(i/8);var a=0,o;if(i==0)break;switch(s){case 0:{for(var c=t[0];r[t[0]++]>=128;);o=r.slice(c,t[0])}break;case 5:a=4,o=r.slice(t[0],t[0]+a),t[0]+=a;break;case 1:a=8,o=r.slice(t[0],t[0]+a),t[0]+=a;break;case 2:a=ed(r,t),o=r.slice(t[0],t[0]+a),t[0]+=a;break;case 3:case 4:default:throw new Error("PB Type ".concat(s," for Field ").concat(i," at offset ").concat(n))}var u={data:o,type:s};e[i]==null?e[i]=[u]:e[i].push(u)}return e}function Kn(r){var e=[];return r.forEach(function(t,n){t.forEach(function(i){i.data&&(e.push(gr(n*8+i.type)),i.type==2&&e.push(gr(i.data.length)),e.push(i.data))})}),dc(e)}function Us(r){for(var e,t=[],n=[0];n[0]<r.length;){var i=ed(r,n),s=Sn(r.slice(n[0],n[0]+i));n[0]+=i;var a={id:Vl(s[1][0].data),messages:[]};s[2].forEach(function(o){var c=Sn(o.data),u=Vl(c[3][0].data);a.messages.push({meta:c,data:r.slice(n[0],n[0]+u)}),n[0]+=u}),(e=s[3])!=null&&e[0]&&(a.merge=Vl(s[3][0].data)>>>0>0),t.push(a)}return t}function dl(r){var e=[];return r.forEach(function(t){var n=[];n[1]=[{data:gr(t.id),type:0}],n[2]=[],t.merge!=null&&(n[3]=[{data:gr(+!!t.merge),type:0}]);var i=[];t.messages.forEach(function(a){i.push(a.data),a.meta[3]=[{type:0,data:gr(a.data.length)}],n[2].push({data:Kn(a.meta),type:2})});var s=Kn(n);e.push(gr(s.length)),e.push(s),i.forEach(function(a){return e.push(a)})}),dc(e)}function hz(r,e){if(r!=0)throw new Error("Unexpected Snappy chunk type ".concat(r));for(var t=[0],n=ed(e,t),i=[];t[0]<e.length;){var s=e[t[0]]&3;if(s==0){var a=e[t[0]++]>>2;if(a<60)++a;else{var o=a-59;a=e[t[0]],o>1&&(a|=e[t[0]+1]<<8),o>2&&(a|=e[t[0]+2]<<16),o>3&&(a|=e[t[0]+3]<<24),a>>>=0,a++,t[0]+=o}i.push(e.slice(t[0],t[0]+a)),t[0]+=a;continue}else{var c=0,u=0;if(s==1?(u=(e[t[0]]>>2&7)+4,c=(e[t[0]++]&224)<<3,c|=e[t[0]++]):(u=(e[t[0]++]>>2)+1,s==2?(c=e[t[0]]|e[t[0]+1]<<8,t[0]+=2):(c=(e[t[0]]|e[t[0]+1]<<8|e[t[0]+2]<<16|e[t[0]+3]<<24)>>>0,t[0]+=4)),i=[dc(i)],c==0)throw new Error("Invalid offset 0");if(c>i[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(i.push(i[0].slice(-c)),u-=c;u>=i[i.length-1].length;)i.push(i[i.length-1]),u-=i[i.length-1].length;i.push(i[0].slice(-c,-c+u))}}var l=dc(i);if(l.length!=n)throw new Error("Unexpected length: ".concat(l.length," != ").concat(n));return l}function js(r){for(var e=[],t=0;t<r.length;){var n=r[t++],i=r[t]|r[t+1]<<8|r[t+2]<<16;t+=3,e.push(hz(n,r.slice(t,t+i))),t+=i}if(t!==r.length)throw new Error("data is not a valid framed stream!");return dc(e)}function pl(r){for(var e=[],t=0;t<r.length;){var n=Math.min(r.length-t,268435455),i=new Uint8Array(4);e.push(i);var s=gr(n),a=s.length;e.push(s),n<=60?(a++,e.push(new Uint8Array([n-1<<2]))):n<=256?(a+=2,e.push(new Uint8Array([240,n-1&255]))):n<=65536?(a+=3,e.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(a+=4,e.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(a+=5,e.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),e.push(r.slice(t,t+n)),a+=n,i[0]=0,i[1]=a&255,i[2]=a>>8&255,i[3]=a>>16&255,t+=n}return dc(e)}function gg(r,e){var t=new Uint8Array(32),n=wp(t),i=12,s=0;switch(t[0]=5,r.t){case"n":t[1]=2,lz(t,i,r.v),s|=1,i+=16;break;case"b":t[1]=6,n.setFloat64(i,r.v?1:0,!0),s|=2,i+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[1]=3,n.setUint32(i,e.indexOf(r.v),!0),s|=8,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(8,s,!0),t.slice(0,i)}function vg(r,e){var t=new Uint8Array(32),n=wp(t),i=12,s=0;switch(t[0]=3,r.t){case"n":t[2]=2,n.setFloat64(i,r.v,!0),s|=32,i+=8;break;case"b":t[2]=6,n.setFloat64(i,r.v?1:0,!0),s|=32,i+=8;break;case"s":if(e.indexOf(r.v)==-1)throw new Error("Value ".concat(r.v," missing from SST!"));t[2]=3,n.setUint32(i,e.indexOf(r.v),!0),s|=16,i+=4;break;default:throw"unsupported cell type "+r.t}return n.setUint32(4,s,!0),t.slice(0,i)}function Wo(r){var e=Sn(r);return ed(e[1][0].data)}function fz(r,e,t){var n,i,s,a;if(!((n=r[6])!=null&&n[0])||!((i=r[7])!=null&&i[0]))throw"Mutation only works on post-BNC storages!";var o=((a=(s=r[8])==null?void 0:s[0])==null?void 0:a.data)&&Vl(r[8][0].data)>0||!1;if(o)throw"Math only works with normal offsets";for(var c=0,u=wp(r[7][0].data),l=0,d=[],g=wp(r[4][0].data),p=0,x=[],_=0;_<e.length;++_){if(e[_]==null){u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535);continue}u.setUint16(_*2,l,!0),g.setUint16(_*2,p,!0);var E,P;switch(typeof e[_]){case"string":E=gg({t:"s",v:e[_]},t),P=vg({t:"s",v:e[_]},t);break;case"number":E=gg({t:"n",v:e[_]},t),P=vg({t:"n",v:e[_]},t);break;case"boolean":E=gg({t:"b",v:e[_]},t),P=vg({t:"b",v:e[_]},t);break;default:throw new Error("Unsupported value "+e[_])}d.push(E),l+=E.length,x.push(P),p+=P.length,++c}for(r[2][0].data=gr(c);_<r[7][0].data.length/2;++_)u.setUint16(_*2,65535,!0),g.setUint16(_*2,65535,!0);return r[6][0].data=dc(d),r[3][0].data=dc(x),c}function dz(r,e){if(!e||!e.numbers)throw new Error("Must pass a `numbers` option -- check the README");var t=r.Sheets[r.SheetNames[0]];r.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ms(t["!ref"]);n.s.r=n.s.c=0;var i=!1;n.e.c>9&&(i=!0,n.e.c=9),n.e.r>49&&(i=!0,n.e.r=49),i&&console.error("The Numbers writer is currently limited to ".concat(En(n)));var s=xp(t,{range:n,header:1}),a=["~Sh33tJ5~"];s.forEach(function(D){return D.forEach(function(B){typeof B=="string"&&a.push(B)})});var o={},c=[],u=Ir.read(e.numbers,{type:"base64"});u.FileIndex.map(function(D,B){return[D,u.FullPaths[B]]}).forEach(function(D){var B=D[0],U=D[1];if(B.type==2&&B.name.match(/\.iwa/)){var J=B.content,ae=js(J),le=Us(ae);le.forEach(function(ue){c.push(ue.id),o[ue.id]={deps:[],location:U,type:Vl(ue.messages[0].meta[1][0].data)}})}}),c.sort(function(D,B){return D-B});var l=c.filter(function(D){return D>1}).map(function(D){return[D,gr(D)]});u.FileIndex.map(function(D,B){return[D,u.FullPaths[B]]}).forEach(function(D){var B=D[0];if(D[1],!!B.name.match(/\.iwa/)){var U=Us(js(B.content));U.forEach(function(J){J.messages.forEach(function(ae){l.forEach(function(le){J.messages.some(function(ue){return Vl(ue.meta[1][0].data)!=11006&&uz(ue.data,le[1])})&&o[le[0]].deps.push(J.id)})})})}});for(var d=Ir.find(u,o[1].location),g=Us(js(d.content)),p,x=0;x<g.length;++x){var _=g[x];_.id==1&&(p=_)}var E=Wo(Sn(p.messages[0].data)[1][0].data);for(d=Ir.find(u,o[E].location),g=Us(js(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);for(E=Wo(Sn(p.messages[0].data)[2][0].data),d=Ir.find(u,o[E].location),g=Us(js(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);for(E=Wo(Sn(p.messages[0].data)[2][0].data),d=Ir.find(u,o[E].location),g=Us(js(d.content)),x=0;x<g.length;++x)_=g[x],_.id==E&&(p=_);var P=Sn(p.messages[0].data);{P[6][0].data=gr(n.e.r+1),P[7][0].data=gr(n.e.c+1);var L=Wo(P[46][0].data),M=Ir.find(u,o[L].location),K=Us(js(M.content));{for(var ie=0;ie<K.length&&K[ie].id!=L;++ie);if(K[ie].id!=L)throw"Bad ColumnRowUIDMapArchive";var oe=Sn(K[ie].messages[0].data);oe[1]=[],oe[2]=[],oe[3]=[];for(var N=0;N<=n.e.c;++N){var A=[];A[1]=A[2]=[{type:0,data:gr(N+420690)}],oe[1].push({type:2,data:Kn(A)}),oe[2].push({type:0,data:gr(N)}),oe[3].push({type:0,data:gr(N)})}oe[4]=[],oe[5]=[],oe[6]=[];for(var k=0;k<=n.e.r;++k)A=[],A[1]=A[2]=[{type:0,data:gr(k+726270)}],oe[4].push({type:2,data:Kn(A)}),oe[5].push({type:0,data:gr(k)}),oe[6].push({type:0,data:gr(k)});K[ie].messages[0].data=Kn(oe)}M.content=pl(dl(K)),M.size=M.content.length,delete P[46];var V=Sn(P[4][0].data);{V[7][0].data=gr(n.e.r+1);var b=Sn(V[1][0].data),S=Wo(b[2][0].data);M=Ir.find(u,o[S].location),K=Us(js(M.content));{if(K[0].id!=S)throw"Bad HeaderStorageBucket";var R=Sn(K[0].messages[0].data);for(k=0;k<s.length;++k){var se=Sn(R[2][0].data);se[1][0].data=gr(k),se[4][0].data=gr(s[k].length),R[2][k]={type:R[2][0].type,data:Kn(se)}}K[0].messages[0].data=Kn(R)}M.content=pl(dl(K)),M.size=M.content.length;var ve=Wo(V[2][0].data);M=Ir.find(u,o[ve].location),K=Us(js(M.content));{if(K[0].id!=ve)throw"Bad HeaderStorageBucket";for(R=Sn(K[0].messages[0].data),N=0;N<=n.e.c;++N)se=Sn(R[2][0].data),se[1][0].data=gr(N),se[4][0].data=gr(n.e.r+1),R[2][N]={type:R[2][0].type,data:Kn(se)};K[0].messages[0].data=Kn(R)}M.content=pl(dl(K)),M.size=M.content.length;var Ee=Wo(V[4][0].data);(function(){for(var D=Ir.find(u,o[Ee].location),B=Us(js(D.content)),U,J=0;J<B.length;++J){var ae=B[J];ae.id==Ee&&(U=ae)}var le=Sn(U.messages[0].data);{le[3]=[];var ue=[];a.forEach(function(ze,Ze){ue[1]=[{type:0,data:gr(Ze)}],ue[2]=[{type:0,data:gr(1)}],ue[3]=[{type:2,data:cz(ze)}],le[3].push({type:2,data:Kn(ue)})})}U.messages[0].data=Kn(le);var xe=dl(B),Be=pl(xe);D.content=Be,D.size=D.content.length})();var Ne=Sn(V[3][0].data);{var _e=Ne[1][0];delete Ne[2];var Ce=Sn(_e.data);{var Fe=Wo(Ce[2][0].data);(function(){for(var D=Ir.find(u,o[Fe].location),B=Us(js(D.content)),U,J=0;J<B.length;++J){var ae=B[J];ae.id==Fe&&(U=ae)}var le=Sn(U.messages[0].data);{delete le[6],delete Ne[7];var ue=new Uint8Array(le[5][0].data);le[5]=[];for(var xe=0,Be=0;Be<=n.e.r;++Be){var ze=Sn(ue);xe+=fz(ze,s[Be],a),ze[1][0].data=gr(Be),le[5].push({data:Kn(ze),type:2})}le[1]=[{type:0,data:gr(n.e.c+1)}],le[2]=[{type:0,data:gr(n.e.r+1)}],le[3]=[{type:0,data:gr(xe)}],le[4]=[{type:0,data:gr(n.e.r+1)}]}U.messages[0].data=Kn(le);var Ze=dl(B),at=pl(Ze);D.content=at,D.size=D.content.length})()}_e.data=Kn(Ce)}V[3][0].data=Kn(Ne)}P[4][0].data=Kn(V)}p.messages[0].data=Kn(P);var nt=dl(g),T=pl(nt);return d.content=T,d.size=d.content.length,u}function pz(r){return function(t){for(var n=0;n!=r.length;++n){var i=r[n];t[i[0]]===void 0&&(t[i[0]]=i[1]),i[2]==="n"&&(t[i[0]]=Number(t[i[0]]))}}}function zv(r){pz([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(r)}function mz(r,e){return e.bookType=="ods"?YI(r,e):e.bookType=="numbers"?dz(r,e):e.bookType=="xlsb"?gz(r,e):vz(r,e)}function gz(r,e){Il=1024,r&&!r.SSF&&(r.SSF=Xi(tn)),r&&r.SSF&&(fm(),hm(r.SSF),e.revssf=dm(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,bf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t=e.bookType=="xlsb"?"bin":"xml",n=kI.indexOf(e.bookType)>-1,i=aI();zv(e=e||{});var s=Sv(),a="",o=0;if(e.cellXfs=[],Ec(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",$t(s,a,lI(r.Props,e)),i.coreprops.push(a),vr(e.rels,2,a,ar.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var c=[],u=0;u<r.SheetNames.length;++u)(r.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(r.SheetNames[u]);r.Props.SheetNames=c}for(r.Props.Worksheets=r.Props.SheetNames.length,$t(s,a,fI(r.Props)),i.extprops.push(a),vr(e.rels,3,a,ar.EXT_PROPS),r.Custprops!==r.Props&&ii(r.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,dI(r.Custprops)),i.custprops.push(a),vr(e.rels,4,a,ar.CUST_PROPS)),o=1;o<=r.SheetNames.length;++o){var l={"!id":{}},d=r.Sheets[r.SheetNames[o-1]],g=(d||{})["!type"]||"sheet";switch(g){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,yq(o-1,a,e,r,l)),i.sheets.push(a),vr(e.wbrels,-1,"worksheets/sheet"+o+"."+t,ar.WS[0])}if(d){var p=d["!comments"],x=!1,_="";p&&p.length>0&&(_="xl/comments"+o+"."+t,$t(s,_,Eq(p,_)),i.comments.push(_),vr(l,-1,"../comments"+o+"."+t,ar.CMNT),x=!0),d["!legacy"]&&x&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",NI(o,d["!comments"])),delete d["!comments"],delete d["!legacy"]}l["!id"].rId1&&$t(s,cI(a),Ml(l))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,xq(e.Strings,a,e)),i.strs.push(a),vr(e.wbrels,-1,"sharedStrings."+t,ar.SST)),a="xl/workbook."+t,$t(s,a,_q(r,a)),i.workbooks.push(a),vr(e.rels,1,a,ar.WB),a="xl/theme/theme1.xml",$t(s,a,SI(r.Themes,e)),i.themes.push(a),vr(e.wbrels,-1,"theme/theme1.xml",ar.THEME),a="xl/styles."+t,$t(s,a,wq(r,a,e)),i.styles.push(a),vr(e.wbrels,-1,"styles."+t,ar.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",$t(s,a,r.vbaraw),i.vba.push(a),vr(e.wbrels,-1,"vbaProject.bin",ar.VBA)),a="xl/metadata."+t,$t(s,a,Tq(a)),i.metadata.push(a),vr(e.wbrels,-1,"metadata."+t,ar.XLMETA),$t(s,"[Content_Types].xml",oI(i,e)),$t(s,"_rels/.rels",Ml(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Ml(e.wbrels)),delete e.revssf,delete e.ssf,s}function vz(r,e){Il=1024,r&&!r.SSF&&(r.SSF=Xi(tn)),r&&r.SSF&&(fm(),hm(r.SSF),e.revssf=dm(r.SSF),e.revssf[r.SSF[65535]]=0,e.ssf=r.SSF),e.rels={},e.wbrels={},e.Strings=[],e.Strings.Count=0,e.Strings.Unique=0,bf?e.revStrings=new Map:(e.revStrings={},e.revStrings.foo=[],delete e.revStrings.foo);var t="xml",n=kI.indexOf(e.bookType)>-1,i=aI();zv(e=e||{});var s=Sv(),a="",o=0;if(e.cellXfs=[],Ec(e.cellXfs,{},{revssf:{General:0}}),r.Props||(r.Props={}),a="docProps/core.xml",$t(s,a,lI(r.Props,e)),i.coreprops.push(a),vr(e.rels,2,a,ar.CORE_PROPS),a="docProps/app.xml",!(r.Props&&r.Props.SheetNames))if(!r.Workbook||!r.Workbook.Sheets)r.Props.SheetNames=r.SheetNames;else{for(var c=[],u=0;u<r.SheetNames.length;++u)(r.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(r.SheetNames[u]);r.Props.SheetNames=c}r.Props.Worksheets=r.Props.SheetNames.length,$t(s,a,fI(r.Props)),i.extprops.push(a),vr(e.rels,3,a,ar.EXT_PROPS),r.Custprops!==r.Props&&ii(r.Custprops||{}).length>0&&(a="docProps/custom.xml",$t(s,a,dI(r.Custprops)),i.custprops.push(a),vr(e.rels,4,a,ar.CUST_PROPS));var l=["SheetJ5"];for(e.tcid=0,o=1;o<=r.SheetNames.length;++o){var d={"!id":{}},g=r.Sheets[r.SheetNames[o-1]],p=(g||{})["!type"]||"sheet";switch(p){case"chart":default:a="xl/worksheets/sheet"+o+"."+t,$t(s,a,UI(o-1,e,r,d)),i.sheets.push(a),vr(e.wbrels,-1,"worksheets/sheet"+o+"."+t,ar.WS[0])}if(g){var x=g["!comments"],_=!1,E="";if(x&&x.length>0){var P=!1;x.forEach(function(L){L[1].forEach(function(M){M.T==!0&&(P=!0)})}),P&&(E="xl/threadedComments/threadedComment"+o+"."+t,$t(s,E,KB(x,l,e)),i.threadedcomments.push(E),vr(d,-1,"../threadedComments/threadedComment"+o+"."+t,ar.TCMNT)),E="xl/comments"+o+"."+t,$t(s,E,CI(x)),i.comments.push(E),vr(d,-1,"../comments"+o+"."+t,ar.CMNT),_=!0}g["!legacy"]&&_&&$t(s,"xl/drawings/vmlDrawing"+o+".vml",NI(o,g["!comments"])),delete g["!comments"],delete g["!legacy"]}d["!id"].rId1&&$t(s,cI(a),Ml(d))}return e.Strings!=null&&e.Strings.length>0&&(a="xl/sharedStrings."+t,$t(s,a,xI(e.Strings,e)),i.strs.push(a),vr(e.wbrels,-1,"sharedStrings."+t,ar.SST)),a="xl/workbook."+t,$t(s,a,zI(r)),i.workbooks.push(a),vr(e.rels,1,a,ar.WB),a="xl/theme/theme1.xml",$t(s,a,SI(r.Themes,e)),i.themes.push(a),vr(e.wbrels,-1,"theme/theme1.xml",ar.THEME),a="xl/styles."+t,$t(s,a,AI(r,e)),i.styles.push(a),vr(e.wbrels,-1,"styles."+t,ar.STY),r.vbaraw&&n&&(a="xl/vbaProject.bin",$t(s,a,r.vbaraw),i.vba.push(a),vr(e.wbrels,-1,"vbaProject.bin",ar.VBA)),a="xl/metadata."+t,$t(s,a,PI()),i.metadata.push(a),vr(e.wbrels,-1,"metadata."+t,ar.XLMETA),l.length>1&&(a="xl/persons/person.xml",$t(s,a,YB(l)),i.people.push(a),vr(e.wbrels,-1,"persons/person.xml",ar.PEOPLE)),$t(s,"[Content_Types].xml",oI(i,e)),$t(s,"_rels/.rels",Ml(e.rels)),$t(s,"xl/_rels/workbook."+t+".rels",Ml(e.wbrels)),delete e.revssf,delete e.ssf,s}function _z(r,e){var t="";switch((e||{}).type||"base64"){case"buffer":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];case"base64":t=io(r.slice(0,12));break;case"binary":t=r;break;case"array":return[r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7]];default:throw new Error("Unrecognized type "+(e&&e.type||"undefined"))}return[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3),t.charCodeAt(4),t.charCodeAt(5),t.charCodeAt(6),t.charCodeAt(7)]}function XI(r,e){switch(e.type){case"base64":case"binary":break;case"buffer":case"array":e.type="";break;case"file":return Id(e.file,Ir.write(r,{type:lr?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");default:throw new Error("Unrecognized type "+e.type)}return Ir.write(r,e)}function yz(r,e){var t=Xi(e||{}),n=mz(r,t);return wz(n,t)}function wz(r,e){var t={},n=lr?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(e.compression&&(t.compression="DEFLATE"),e.password)t.type=n;else switch(e.type){case"base64":t.type="base64";break;case"binary":t.type="string";break;case"string":throw new Error("'string' output type invalid for '"+e.bookType+"' files");case"buffer":case"file":t.type=n;break;default:throw new Error("Unrecognized type "+e.type)}var i=r.FullPaths?Ir.write(r,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[t.type]||t.type,compression:!!e.compression}):r.generate(t);if(typeof Deno<"u"&&typeof i=="string"){if(e.type=="binary"||e.type=="base64")return i;i=new Uint8Array(lm(i))}return e.password&&typeof encrypt_agile<"u"?XI(encrypt_agile(i,e.password),e):e.type==="file"?Id(e.file,i):e.type=="string"?wf(i):i}function xz(r,e){var t=e||{},n=Mq(r,t);return XI(n,t)}function oa(r,e,t){t||(t="");var n=t+r;switch(e.type){case"base64":return Xf(Qf(n));case"binary":return Qf(n);case"string":return r;case"file":return Id(e.file,n,"utf8");case"buffer":return lr?ho(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):oa(n,{type:"binary"}).split("").map(function(i){return i.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function Ez(r,e){switch(e.type){case"base64":return Xf(r);case"binary":return r;case"string":return r;case"file":return Id(e.file,r,"binary");case"buffer":return lr?ho(r,"binary"):r.split("").map(function(t){return t.charCodeAt(0)})}throw new Error("Unrecognized type "+e.type)}function m0(r,e){switch(e.type){case"string":case"base64":case"binary":for(var t="",n=0;n<r.length;++n)t+=String.fromCharCode(r[n]);return e.type=="base64"?Xf(t):e.type=="string"?wf(t):t;case"file":return Id(e.file,r);case"buffer":return r;default:throw new Error("Unrecognized type "+e.type)}}function JI(r,e){X7(),oq(r);var t=Xi(e||{});if(t.cellStyles&&(t.cellNF=!0,t.sheetStubs=!0),t.type=="array"){t.type="binary";var n=JI(r,t);return t.type="array",lm(n)}var i=0;if(t.sheet&&(typeof t.sheet=="number"?i=t.sheet:i=r.SheetNames.indexOf(t.sheet),!r.SheetNames[i]))throw new Error("Sheet not found: "+t.sheet+" : "+typeof t.sheet);switch(t.bookType||"xlsb"){case"xml":case"xlml":return oa(Fq(r,t),t);case"slk":case"sylk":return oa(iB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"htm":case"html":return oa($I(r.Sheets[r.SheetNames[i]],t),t);case"txt":return Ez(QI(r.Sheets[r.SheetNames[i]],t),t);case"csv":return oa(Wv(r.Sheets[r.SheetNames[i]],t),t,"\uFEFF");case"dif":return oa(sB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"dbf":return m0(nB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"prn":return oa(aB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"rtf":return oa(dB.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"eth":return oa(wI.from_sheet(r.Sheets[r.SheetNames[i]],t),t);case"fods":return oa(YI(r,t),t);case"wk1":return m0(c5.sheet_to_wk1(r.Sheets[r.SheetNames[i]],t),t);case"wk3":return m0(c5.book_to_wk3(r,t),t);case"biff2":t.biff||(t.biff=2);case"biff3":t.biff||(t.biff=3);case"biff4":return t.biff||(t.biff=4),m0(HI(r,t),t);case"biff5":t.biff||(t.biff=5);case"biff8":case"xla":case"xls":return t.biff||(t.biff=8),xz(r,t);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return yz(r,t);default:throw new Error("Unrecognized bookType |"+t.bookType+"|")}}function Tz(r){if(!r.bookType){var e={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},t=r.file.slice(r.file.lastIndexOf(".")).toLowerCase();t.match(/^\.[a-z]+$/)&&(r.bookType=t.slice(1)),r.bookType=e[r.bookType]||r.bookType}}function bz(r,e,t){var n={};return n.type="file",n.file=e,Tz(n),JI(r,n)}function Az(r,e,t,n,i,s,a,o){var c=ri(t),u=o.defval,l=o.raw||!Object.prototype.hasOwnProperty.call(o,"raw"),d=!0,g=i===1?[]:{};if(i!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:t,enumerable:!1})}catch{g.__rowNum__=t}else g.__rowNum__=t;if(!a||r[t])for(var p=e.s.c;p<=e.e.c;++p){var x=a?r[t][p]:r[n[p]+c];if(x===void 0||x.t===void 0){if(u===void 0)continue;s[p]!=null&&(g[s[p]]=u);continue}var _=x.v;switch(x.t){case"z":if(_==null)break;continue;case"e":_=_==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+x.t)}if(s[p]!=null){if(_==null)if(x.t=="e"&&_===null)g[s[p]]=null;else if(u!==void 0)g[s[p]]=u;else if(l&&_===null)g[s[p]]=null;else continue;else g[s[p]]=l&&(x.t!=="n"||x.t==="n"&&o.rawNumbers!==!1)?_:so(x,_,o);_!=null&&(d=!1)}}return{row:g,isempty:d}}function xp(r,e){if(r==null||r["!ref"]==null)return[];var t={t:"n",v:0},n=0,i=1,s=[],a=0,o="",c={s:{r:0,c:0},e:{r:0,c:0}},u=e||{},l=u.range!=null?u.range:r["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof l){case"string":c=Vr(l);break;case"number":c=Vr(r["!ref"]),c.s.r=l;break;default:c=l}n>0&&(i=0);var d=ri(c.s.r),g=[],p=[],x=0,_=0,E=Array.isArray(r),P=c.s.r,L=0,M={};E&&!r[P]&&(r[P]=[]);var K=u.skipHidden&&r["!cols"]||[],ie=u.skipHidden&&r["!rows"]||[];for(L=c.s.c;L<=c.e.c;++L)if(!(K[L]||{}).hidden)switch(g[L]=di(L),t=E?r[P][L]:r[g[L]+d],n){case 1:s[L]=L-c.s.c;break;case 2:s[L]=g[L];break;case 3:s[L]=u.header[L-c.s.c];break;default:if(t==null&&(t={w:"__EMPTY",t:"s"}),o=a=so(t,null,u),_=M[a]||0,!_)M[a]=1;else{do o=a+"_"+_++;while(M[o]);M[a]=_,M[o]=1}s[L]=o}for(P=c.s.r+i;P<=c.e.r;++P)if(!(ie[P]||{}).hidden){var oe=Az(r,c,P,g,n,s,E,u);(oe.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[x++]=oe.row)}return p.length=x,p}var g5=/"/g;function Iz(r,e,t,n,i,s,a,o){for(var c=!0,u=[],l="",d=ri(t),g=e.s.c;g<=e.e.c;++g)if(n[g]){var p=o.dense?(r[t]||[])[g]:r[n[g]+d];if(p==null)l="";else if(p.v!=null){c=!1,l=""+(o.rawNumbers&&p.t=="n"?p.v:so(p,null,o));for(var x=0,_=0;x!==l.length;++x)if((_=l.charCodeAt(x))===i||_===s||_===34||o.forceQuotes){l='"'+l.replace(g5,'""')+'"';break}l=="ID"&&(l='"ID"')}else p.f!=null&&!p.F?(c=!1,l="="+p.f,l.indexOf(",")>=0&&(l='"'+l.replace(g5,'""')+'"')):l="";u.push(l)}return o.blankrows===!1&&c?null:u.join(a)}function Wv(r,e){var t=[],n=e??{};if(r==null||r["!ref"]==null)return"";var i=Vr(r["!ref"]),s=n.FS!==void 0?n.FS:",",a=s.charCodeAt(0),o=n.RS!==void 0?n.RS:`
`,c=o.charCodeAt(0),u=new RegExp((s=="|"?"\\|":s)+"+$"),l="",d=[];n.dense=Array.isArray(r);for(var g=n.skipHidden&&r["!cols"]||[],p=n.skipHidden&&r["!rows"]||[],x=i.s.c;x<=i.e.c;++x)(g[x]||{}).hidden||(d[x]=di(x));for(var _=0,E=i.s.r;E<=i.e.r;++E)(p[E]||{}).hidden||(l=Iz(r,i,E,d,a,c,s,n),l!=null&&(n.strip&&(l=l.replace(u,"")),(l||n.blankrows!==!1)&&t.push((_++?o:"")+l)));return delete n.dense,t.join("")}function QI(r,e){e||(e={}),e.FS="	",e.RS=`
`;var t=Wv(r,e);return t}function Sz(r){var e="",t,n="";if(r==null||r["!ref"]==null)return[];var i=Vr(r["!ref"]),s="",a=[],o,c=[],u=Array.isArray(r);for(o=i.s.c;o<=i.e.c;++o)a[o]=di(o);for(var l=i.s.r;l<=i.e.r;++l)for(s=ri(l),o=i.s.c;o<=i.e.c;++o)if(e=a[o]+s,t=u?(r[l]||[])[o]:r[e],n="",t!==void 0){if(t.F!=null){if(e=t.F,!t.f)continue;n=t.f,e.indexOf(":")==-1&&(e=e+":"+e)}if(t.f!=null)n=t.f;else{if(t.t=="z")continue;if(t.t=="n"&&t.v!=null)n=""+t.v;else if(t.t=="b")n=t.v?"TRUE":"FALSE";else if(t.w!==void 0)n="'"+t.w;else{if(t.v===void 0)continue;t.t=="s"?n="'"+t.v:n=""+t.v}}c[c.length]=e+"="+n}return c}function ZI(r,e,t){var n=t||{},i=+!n.skipHeader,s=r||{},a=0,o=0;if(s&&n.origin!=null)if(typeof n.origin=="number")a=n.origin;else{var c=typeof n.origin=="string"?Bn(n.origin):n.origin;a=c.r,o=c.c}var u,l={s:{c:0,r:0},e:{c:o,r:a+e.length-1+i}};if(s["!ref"]){var d=Vr(s["!ref"]);l.e.c=Math.max(l.e.c,d.e.c),l.e.r=Math.max(l.e.r,d.e.r),a==-1&&(a=d.e.r+1,l.e.r=a+e.length-1+i)}else a==-1&&(a=0,l.e.r=e.length-1+i);var g=n.header||[],p=0;e.forEach(function(_,E){ii(_).forEach(function(P){(p=g.indexOf(P))==-1&&(g[p=g.length]=P);var L=_[P],M="z",K="",ie=xr({c:o+p,r:a+E+i});u=td(s,ie),L&&typeof L=="object"&&!(L instanceof Date)?s[ie]=L:(typeof L=="number"?M="n":typeof L=="boolean"?M="b":typeof L=="string"?M="s":L instanceof Date?(M="d",n.cellDates||(M="n",L=Yi(L)),K=n.dateNF||tn[14]):L===null&&n.nullError&&(M="e",L=0),u?(u.t=M,u.v=L,delete u.w,delete u.R,K&&(u.z=K)):s[ie]=u={t:M,v:L},K&&(u.z=K))})}),l.e.c=Math.max(l.e.c,o+g.length-1);var x=ri(a);if(i)for(p=0;p<g.length;++p)s[di(p+o)+x]={t:"s",v:g[p]};return s["!ref"]=En(l),s}function Pz(r,e){return ZI(null,r,e)}function td(r,e,t){if(typeof e=="string"){if(Array.isArray(r)){var n=Bn(e);return r[n.r]||(r[n.r]=[]),r[n.r][n.c]||(r[n.r][n.c]={t:"z"})}return r[e]||(r[e]={t:"z"})}return typeof e!="number"?td(r,xr(e)):td(r,xr({r:e,c:t||0}))}function Nz(r,e){if(typeof e=="number"){if(e>=0&&r.SheetNames.length>e)return e;throw new Error("Cannot find sheet # "+e)}else if(typeof e=="string"){var t=r.SheetNames.indexOf(e);if(t>-1)return t;throw new Error("Cannot find sheet name |"+e+"|")}else throw new Error("Cannot find sheet |"+e+"|")}function Cz(){return{SheetNames:[],Sheets:{}}}function kz(r,e,t,n){var i=1;if(!t)for(;i<=65535&&r.SheetNames.indexOf(t="Sheet"+i)!=-1;++i,t=void 0);if(!t||r.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&r.SheetNames.indexOf(t)>=0){var s=t.match(/(^.*?)(\d+)$/);i=s&&+s[2]||0;var a=s&&s[1]||t;for(++i;i<=65535&&r.SheetNames.indexOf(t=a+i)!=-1;++i);}if(qI(t),r.SheetNames.indexOf(t)>=0)throw new Error("Worksheet with name |"+t+"| already exists!");return r.SheetNames.push(t),r.Sheets[t]=e,t}function Rz(r,e,t){r.Workbook||(r.Workbook={}),r.Workbook.Sheets||(r.Workbook.Sheets=[]);var n=Nz(r,e);switch(r.Workbook.Sheets[n]||(r.Workbook.Sheets[n]={}),t){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+t)}r.Workbook.Sheets[n].Hidden=t}function Lz(r,e){return r.z=e,r}function eS(r,e,t){return e?(r.l={Target:e},t&&(r.l.Tooltip=t)):delete r.l,r}function Dz(r,e,t){return eS(r,"#"+e,t)}function Fz(r,e,t){r.c||(r.c=[]),r.c.push({t:e,a:t||"SheetJS"})}function Oz(r,e,t,n){for(var i=typeof e!="string"?e:Vr(e),s=typeof e=="string"?e:En(e),a=i.s.r;a<=i.e.r;++a)for(var o=i.s.c;o<=i.e.c;++o){var c=td(r,a,o);c.t="n",c.F=s,delete c.v,a==i.s.r&&o==i.s.c&&(c.f=t,n&&(c.D=!0))}return r}var _g={encode_col:di,encode_row:ri,encode_cell:xr,encode_range:En,decode_col:Lv,decode_row:Rv,split_cell:XM,decode_cell:Bn,decode_range:ms,format_cell:so,sheet_add_aoa:eI,sheet_add_json:ZI,sheet_add_dom:GI,aoa_to_sheet:bh,json_to_sheet:Pz,table_to_sheet:KI,table_to_book:sz,sheet_to_csv:Wv,sheet_to_txt:QI,sheet_to_json:xp,sheet_to_html:$I,sheet_to_formulae:Sz,sheet_to_row_object_array:xp,sheet_get_cell:td,book_new:Cz,book_append_sheet:kz,book_set_sheet_visibility:Rz,cell_set_number_format:Lz,cell_set_hyperlink:eS,cell_set_internal_link:Dz,cell_add_comment:Fz,sheet_set_array_formula:Oz,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const Mz="modulepreload",Bz=function(r){return"/"+r},v5={},g1=function(e,t,n){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),o=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(t.map(c=>{if(c=Bz(c),c in v5)return;v5[c]=!0;const u=c.endsWith(".css"),l=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${l}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":Mz,u||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),u)return new Promise((g,p)=>{d.addEventListener("load",g),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(a){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a}return i.then(a=>{for(const o of a||[])o.status==="rejected"&&s(o.reason);return e().catch(s)})};function wr(r){"@babel/helpers - typeof";return wr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(r)}var fi=Uint8Array,ds=Uint16Array,Hv=Int32Array,_m=new fi([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ym=new fi([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),v1=new fi([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tS=function(r,e){for(var t=new ds(31),n=0;n<31;++n)t[n]=e+=1<<r[n-1];for(var i=new Hv(t[30]),n=1;n<30;++n)for(var s=t[n];s<t[n+1];++s)i[s]=s-t[n]<<5|n;return{b:t,r:i}},rS=tS(_m,2),nS=rS.b,_1=rS.r;nS[28]=258,_1[258]=28;var iS=tS(ym,0),Vz=iS.b,_5=iS.r,y1=new ds(32768);for(var Br=0;Br<32768;++Br){var Ho=(Br&43690)>>1|(Br&21845)<<1;Ho=(Ho&52428)>>2|(Ho&13107)<<2,Ho=(Ho&61680)>>4|(Ho&3855)<<4,y1[Br]=((Ho&65280)>>8|(Ho&255)<<8)>>1}var wa=function(r,e,t){for(var n=r.length,i=0,s=new ds(e);i<n;++i)r[i]&&++s[r[i]-1];var a=new ds(e);for(i=1;i<e;++i)a[i]=a[i-1]+s[i-1]<<1;var o;if(t){o=new ds(1<<e);var c=15-e;for(i=0;i<n;++i)if(r[i])for(var u=i<<4|r[i],l=e-r[i],d=a[r[i]-1]++<<l,g=d|(1<<l)-1;d<=g;++d)o[y1[d]>>c]=u}else for(o=new ds(n),i=0;i<n;++i)r[i]&&(o[i]=y1[a[r[i]-1]++]>>15-r[i]);return o},pc=new fi(288);for(var Br=0;Br<144;++Br)pc[Br]=8;for(var Br=144;Br<256;++Br)pc[Br]=9;for(var Br=256;Br<280;++Br)pc[Br]=7;for(var Br=280;Br<288;++Br)pc[Br]=8;var rd=new fi(32);for(var Br=0;Br<32;++Br)rd[Br]=5;var Uz=wa(pc,9,0),jz=wa(pc,9,1),qz=wa(rd,5,0),zz=wa(rd,5,1),yg=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},qs=function(r,e,t){var n=e/8|0;return(r[n]|r[n+1]<<8)>>(e&7)&t},wg=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},$v=function(r){return(r+7)/8|0},sS=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new fi(r.subarray(e,t))},Wz=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ws=function(r,e,t){var n=new Error(e||Wz[r]);if(n.code=r,Error.captureStackTrace&&Error.captureStackTrace(n,Ws),!t)throw n;return n},Hz=function(r,e,t,n){var i=r.length,s=0;if(!i||e.f&&!e.l)return t||new fi(0);var a=!t,o=a||e.i!=2,c=e.i;a&&(t=new fi(i*3));var u=function(Be){var ze=t.length;if(Be>ze){var Ze=new fi(Math.max(ze*2,Be));Ze.set(t),t=Ze}},l=e.f||0,d=e.p||0,g=e.b||0,p=e.l,x=e.d,_=e.m,E=e.n,P=i*8;do{if(!p){l=qs(r,d,1);var L=qs(r,d+1,3);if(d+=3,L)if(L==1)p=jz,x=zz,_=9,E=5;else if(L==2){var oe=qs(r,d,31)+257,N=qs(r,d+10,15)+4,A=oe+qs(r,d+5,31)+1;d+=14;for(var k=new fi(A),V=new fi(19),b=0;b<N;++b)V[v1[b]]=qs(r,d+b*3,7);d+=N*3;for(var S=yg(V),R=(1<<S)-1,se=wa(V,S,1),b=0;b<A;){var ve=se[qs(r,d,R)];d+=ve&15;var M=ve>>4;if(M<16)k[b++]=M;else{var Ee=0,Ne=0;for(M==16?(Ne=3+qs(r,d,3),d+=2,Ee=k[b-1]):M==17?(Ne=3+qs(r,d,7),d+=3):M==18&&(Ne=11+qs(r,d,127),d+=7);Ne--;)k[b++]=Ee}}var _e=k.subarray(0,oe),Ce=k.subarray(oe);_=yg(_e),E=yg(Ce),p=wa(_e,_,1),x=wa(Ce,E,1)}else Ws(1);else{var M=$v(d)+4,K=r[M-4]|r[M-3]<<8,ie=M+K;if(ie>i){c&&Ws(0);break}o&&u(g+K),t.set(r.subarray(M,ie),g),e.b=g+=K,e.p=d=ie*8,e.f=l;continue}if(d>P){c&&Ws(0);break}}o&&u(g+131072);for(var Fe=(1<<_)-1,nt=(1<<E)-1,T=d;;T=d){var Ee=p[wg(r,d)&Fe],D=Ee>>4;if(d+=Ee&15,d>P){c&&Ws(0);break}if(Ee||Ws(2),D<256)t[g++]=D;else if(D==256){T=d,p=null;break}else{var B=D-254;if(D>264){var b=D-257,U=_m[b];B=qs(r,d,(1<<U)-1)+nS[b],d+=U}var J=x[wg(r,d)&nt],ae=J>>4;J||Ws(3),d+=J&15;var Ce=Vz[ae];if(ae>3){var U=ym[ae];Ce+=wg(r,d)&(1<<U)-1,d+=U}if(d>P){c&&Ws(0);break}o&&u(g+131072);var le=g+B;if(g<Ce){var ue=s-Ce,xe=Math.min(Ce,le);for(ue+g<0&&Ws(3);g<xe;++g)t[g]=n[ue+g]}for(;g<le;++g)t[g]=t[g-Ce]}}e.l=p,e.p=T,e.b=g,e.f=l,p&&(l=1,e.m=_,e.d=x,e.n=E)}while(!l);return g!=t.length&&a?sS(t,0,g):t.subarray(0,g)},qa=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8},Zh=function(r,e,t){t<<=e&7;var n=e/8|0;r[n]|=t,r[n+1]|=t>>8,r[n+2]|=t>>16},xg=function(r,e){for(var t=[],n=0;n<r.length;++n)r[n]&&t.push({s:n,f:r[n]});var i=t.length,s=t.slice();if(!i)return{t:oS,l:0};if(i==1){var a=new fi(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(ie,oe){return ie.f-oe.f}),t.push({s:-1,f:25001});var o=t[0],c=t[1],u=0,l=1,d=2;for(t[0]={s:-1,f:o.f+c.f,l:o,r:c};l!=i-1;)o=t[t[u].f<t[d].f?u++:d++],c=t[u!=l&&t[u].f<t[d].f?u++:d++],t[l++]={s:-1,f:o.f+c.f,l:o,r:c};for(var g=s[0].s,n=1;n<i;++n)s[n].s>g&&(g=s[n].s);var p=new ds(g+1),x=w1(t[l-1],p,0);if(x>e){var n=0,_=0,E=x-e,P=1<<E;for(s.sort(function(oe,N){return p[N.s]-p[oe.s]||oe.f-N.f});n<i;++n){var L=s[n].s;if(p[L]>e)_+=P-(1<<x-p[L]),p[L]=e;else break}for(_>>=E;_>0;){var M=s[n].s;p[M]<e?_-=1<<e-p[M]++-1:++n}for(;n>=0&&_;--n){var K=s[n].s;p[K]==e&&(--p[K],++_)}x=e}return{t:new fi(p),l:x}},w1=function(r,e,t){return r.s==-1?Math.max(w1(r.l,e,t+1),w1(r.r,e,t+1)):e[r.s]=t},y5=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new ds(++e),n=0,i=r[0],s=1,a=function(c){t[n++]=c},o=1;o<=e;++o)if(r[o]==i&&o!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)a(32754);s>2&&(a(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(a(i),--s;s>6;s-=6)a(8304);s>2&&(a(s-3<<5|8208),s=0)}for(;s--;)a(i);s=1,i=r[o]}return{c:t.subarray(0,n),n:e}},ef=function(r,e){for(var t=0,n=0;n<e.length;++n)t+=r[n]*e[n];return t},aS=function(r,e,t){var n=t.length,i=$v(e+2);r[i]=n&255,r[i+1]=n>>8,r[i+2]=r[i]^255,r[i+3]=r[i+1]^255;for(var s=0;s<n;++s)r[i+s+4]=t[s];return(i+4+n)*8},w5=function(r,e,t,n,i,s,a,o,c,u,l){qa(e,l++,t),++i[256];for(var d=xg(i,15),g=d.t,p=d.l,x=xg(s,15),_=x.t,E=x.l,P=y5(g),L=P.c,M=P.n,K=y5(_),ie=K.c,oe=K.n,N=new ds(19),A=0;A<L.length;++A)++N[L[A]&31];for(var A=0;A<ie.length;++A)++N[ie[A]&31];for(var k=xg(N,7),V=k.t,b=k.l,S=19;S>4&&!V[v1[S-1]];--S);var R=u+5<<3,se=ef(i,pc)+ef(s,rd)+a,ve=ef(i,g)+ef(s,_)+a+14+3*S+ef(N,V)+2*N[16]+3*N[17]+7*N[18];if(c>=0&&R<=se&&R<=ve)return aS(e,l,r.subarray(c,c+u));var Ee,Ne,_e,Ce;if(qa(e,l,1+(ve<se)),l+=2,ve<se){Ee=wa(g,p,0),Ne=g,_e=wa(_,E,0),Ce=_;var Fe=wa(V,b,0);qa(e,l,M-257),qa(e,l+5,oe-1),qa(e,l+10,S-4),l+=14;for(var A=0;A<S;++A)qa(e,l+3*A,V[v1[A]]);l+=3*S;for(var nt=[L,ie],T=0;T<2;++T)for(var D=nt[T],A=0;A<D.length;++A){var B=D[A]&31;qa(e,l,Fe[B]),l+=V[B],B>15&&(qa(e,l,D[A]>>5&127),l+=D[A]>>12)}}else Ee=Uz,Ne=pc,_e=qz,Ce=rd;for(var A=0;A<o;++A){var U=n[A];if(U>255){var B=U>>18&31;Zh(e,l,Ee[B+257]),l+=Ne[B+257],B>7&&(qa(e,l,U>>23&31),l+=_m[B]);var J=U&31;Zh(e,l,_e[J]),l+=Ce[J],J>3&&(Zh(e,l,U>>5&8191),l+=ym[J])}else Zh(e,l,Ee[U]),l+=Ne[U]}return Zh(e,l,Ee[256]),l+Ne[256]},$z=new Hv([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),oS=new fi(0),Gz=function(r,e,t,n,i,s){var a=s.z||r.length,o=new fi(n+a+5*(1+Math.ceil(a/7e3))+i),c=o.subarray(n,o.length-i),u=s.l,l=(s.r||0)&7;if(e){l&&(c[0]=s.r>>3);for(var d=$z[e-1],g=d>>13,p=d&8191,x=(1<<t)-1,_=s.p||new ds(32768),E=s.h||new ds(x+1),P=Math.ceil(t/3),L=2*P,M=function(at){return(r[at]^r[at+1]<<P^r[at+2]<<L)&x},K=new Hv(25e3),ie=new ds(288),oe=new ds(32),N=0,A=0,k=s.i||0,V=0,b=s.w||0,S=0;k+2<a;++k){var R=M(k),se=k&32767,ve=E[R];if(_[se]=ve,E[R]=se,b<=k){var Ee=a-k;if((N>7e3||V>24576)&&(Ee>423||!u)){l=w5(r,c,0,K,ie,oe,A,V,S,k-S,l),V=N=A=0,S=k;for(var Ne=0;Ne<286;++Ne)ie[Ne]=0;for(var Ne=0;Ne<30;++Ne)oe[Ne]=0}var _e=2,Ce=0,Fe=p,nt=se-ve&32767;if(Ee>2&&R==M(k-nt))for(var T=Math.min(g,Ee)-1,D=Math.min(32767,k),B=Math.min(258,Ee);nt<=D&&--Fe&&se!=ve;){if(r[k+_e]==r[k+_e-nt]){for(var U=0;U<B&&r[k+U]==r[k+U-nt];++U);if(U>_e){if(_e=U,Ce=nt,U>T)break;for(var J=Math.min(nt,U-2),ae=0,Ne=0;Ne<J;++Ne){var le=k-nt+Ne&32767,ue=_[le],xe=le-ue&32767;xe>ae&&(ae=xe,ve=le)}}}se=ve,ve=_[se],nt+=se-ve&32767}if(Ce){K[V++]=268435456|_1[_e]<<18|_5[Ce];var Be=_1[_e]&31,ze=_5[Ce]&31;A+=_m[Be]+ym[ze],++ie[257+Be],++oe[ze],b=k+_e,++N}else K[V++]=r[k],++ie[r[k]]}}for(k=Math.max(k,b);k<a;++k)K[V++]=r[k],++ie[r[k]];l=w5(r,c,u,K,ie,oe,A,V,S,k-S,l),u||(s.r=l&7|c[l/8|0]<<3,l-=7,s.h=E,s.p=_,s.i=k,s.w=b)}else{for(var k=s.w||0;k<a+u;k+=65535){var Ze=k+65535;Ze>=a&&(c[l/8|0]=u,Ze=a),l=aS(c,l+1,r.subarray(k,Ze))}s.i=a}return sS(o,0,n+$v(l)+i)},cS=function(){var r=1,e=0;return{p:function(t){for(var n=r,i=e,s=t.length|0,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=n+=t[a];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}r=n,e=i},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},Kz=function(r,e,t,n,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),a=new fi(s.length+r.length);a.set(s),a.set(r,s.length),r=a,i.w=s.length}return Gz(r,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,n,i)},uS=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},Yz=function(r,e){var t=e.level,n=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=n<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var i=cS();i.p(e.dictionary),uS(r,2,i.d())}},Xz=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&Ws(6,"invalid zlib data"),(r[1]>>5&1)==1&&Ws(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function x1(r,e){e||(e={});var t=cS();t.p(r);var n=Kz(r,e,e.dictionary?6:2,4);return Yz(n,e),uS(n,n.length-4,t.d()),n}function Jz(r,e){return Hz(r.subarray(Xz(r),-4),{i:2},e,e)}var Qz=typeof TextDecoder<"u"&&new TextDecoder,Zz=0;try{Qz.decode(oS,{stream:!0}),Zz=1}catch{}var Ot=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Eg(){Ot.console&&typeof Ot.console.log=="function"&&Ot.console.log.apply(Ot.console,arguments)}var Cr={log:Eg,warn:function(r){Ot.console&&(typeof Ot.console.warn=="function"?Ot.console.warn.apply(Ot.console,arguments):Eg.call(null,arguments))},error:function(r){Ot.console&&(typeof Ot.console.error=="function"?Ot.console.error.apply(Ot.console,arguments):Eg(r))}};function Tg(r,e,t){var n=new XMLHttpRequest;n.open("GET",r),n.responseType="blob",n.onload=function(){Wc(n.response,e,t)},n.onerror=function(){Cr.error("could not download file")},n.send()}function x5(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function g0(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var Af,E1,Wc=Ot.saveAs||((typeof window>"u"?"undefined":wr(window))!=="object"||window!==Ot?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var n=Ot.URL||Ot.webkitURL,i=document.createElement("a");e=e||r.name||"download",i.download=e,i.rel="noopener",typeof r=="string"?(i.href=r,i.origin!==location.origin?x5(i.href)?Tg(r,e,t):g0(i,i.target="_blank"):g0(i)):(i.href=n.createObjectURL(r),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){g0(i)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(x5(r))Tg(r,e,t);else{var n=document.createElement("a");n.href=r,n.target="_blank",setTimeout(function(){g0(n)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:wr(s)!=="object"&&(Cr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}(r,t),e)}:function(r,e,t,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof r=="string")return Tg(r,e,t);var i=r.type==="application/octet-stream",s=/constructor/i.test(Ot.HTMLElement)||Ot.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&s)&&(typeof FileReader>"u"?"undefined":wr(FileReader))==="object"){var o=new FileReader;o.onloadend=function(){var l=o.result;l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location=l,n=null},o.readAsDataURL(r)}else{var c=Ot.URL||Ot.webkitURL,u=c.createObjectURL(r);n?n.location=u:location.href=u,n=null,setTimeout(function(){c.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function lS(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(o){return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(o){return[parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(o){return[parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16)]}}],n=0;n<t.length;n++){var i=t[n].re,s=t[n].process,a=i.exec(r);a&&(e=s(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var o=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return o.length==1&&(o="0"+o),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+o+c+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function bg(r,e){var t=r[0],n=r[1],i=r[2],s=r[3];t=ci(t,n,i,s,e[0],7,-680876936),s=ci(s,t,n,i,e[1],12,-389564586),i=ci(i,s,t,n,e[2],17,606105819),n=ci(n,i,s,t,e[3],22,-1044525330),t=ci(t,n,i,s,e[4],7,-176418897),s=ci(s,t,n,i,e[5],12,1200080426),i=ci(i,s,t,n,e[6],17,-1473231341),n=ci(n,i,s,t,e[7],22,-45705983),t=ci(t,n,i,s,e[8],7,1770035416),s=ci(s,t,n,i,e[9],12,-1958414417),i=ci(i,s,t,n,e[10],17,-42063),n=ci(n,i,s,t,e[11],22,-1990404162),t=ci(t,n,i,s,e[12],7,1804603682),s=ci(s,t,n,i,e[13],12,-40341101),i=ci(i,s,t,n,e[14],17,-1502002290),t=ui(t,n=ci(n,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=ui(s,t,n,i,e[6],9,-1069501632),i=ui(i,s,t,n,e[11],14,643717713),n=ui(n,i,s,t,e[0],20,-373897302),t=ui(t,n,i,s,e[5],5,-701558691),s=ui(s,t,n,i,e[10],9,38016083),i=ui(i,s,t,n,e[15],14,-660478335),n=ui(n,i,s,t,e[4],20,-405537848),t=ui(t,n,i,s,e[9],5,568446438),s=ui(s,t,n,i,e[14],9,-1019803690),i=ui(i,s,t,n,e[3],14,-187363961),n=ui(n,i,s,t,e[8],20,1163531501),t=ui(t,n,i,s,e[13],5,-1444681467),s=ui(s,t,n,i,e[2],9,-51403784),i=ui(i,s,t,n,e[7],14,1735328473),t=li(t,n=ui(n,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=li(s,t,n,i,e[8],11,-2022574463),i=li(i,s,t,n,e[11],16,1839030562),n=li(n,i,s,t,e[14],23,-35309556),t=li(t,n,i,s,e[1],4,-1530992060),s=li(s,t,n,i,e[4],11,1272893353),i=li(i,s,t,n,e[7],16,-155497632),n=li(n,i,s,t,e[10],23,-1094730640),t=li(t,n,i,s,e[13],4,681279174),s=li(s,t,n,i,e[0],11,-358537222),i=li(i,s,t,n,e[3],16,-722521979),n=li(n,i,s,t,e[6],23,76029189),t=li(t,n,i,s,e[9],4,-640364487),s=li(s,t,n,i,e[12],11,-421815835),i=li(i,s,t,n,e[15],16,530742520),t=hi(t,n=li(n,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=hi(s,t,n,i,e[7],10,1126891415),i=hi(i,s,t,n,e[14],15,-1416354905),n=hi(n,i,s,t,e[5],21,-57434055),t=hi(t,n,i,s,e[12],6,1700485571),s=hi(s,t,n,i,e[3],10,-1894986606),i=hi(i,s,t,n,e[10],15,-1051523),n=hi(n,i,s,t,e[1],21,-2054922799),t=hi(t,n,i,s,e[8],6,1873313359),s=hi(s,t,n,i,e[15],10,-30611744),i=hi(i,s,t,n,e[6],15,-1560198380),n=hi(n,i,s,t,e[13],21,1309151649),t=hi(t,n,i,s,e[4],6,-145523070),s=hi(s,t,n,i,e[11],10,-1120210379),i=hi(i,s,t,n,e[2],15,718787259),n=hi(n,i,s,t,e[9],21,-343485551),r[0]=Zo(t,r[0]),r[1]=Zo(n,r[1]),r[2]=Zo(i,r[2]),r[3]=Zo(s,r[3])}function wm(r,e,t,n,i,s){return e=Zo(Zo(e,r),Zo(n,s)),Zo(e<<i|e>>>32-i,t)}function ci(r,e,t,n,i,s,a){return wm(e&t|~e&n,r,e,i,s,a)}function ui(r,e,t,n,i,s,a){return wm(e&n|t&~n,r,e,i,s,a)}function li(r,e,t,n,i,s,a){return wm(e^t^n,r,e,i,s,a)}function hi(r,e,t,n,i,s,a){return wm(t^(e|~n),r,e,i,s,a)}function hS(r){var e,t=r.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)bg(n,eW(r.substring(e-64,e)));r=r.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)i[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(bg(n,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,bg(n,i),n}function eW(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}Af=Ot.atob.bind(Ot),E1=Ot.btoa.bind(Ot);var E5="0123456789abcdef".split("");function tW(r){for(var e="",t=0;t<4;t++)e+=E5[r>>8*t+4&15]+E5[r>>8*t&15];return e}function rW(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function T1(r){return hS(r).map(rW).join("")}var nW=function(r){for(var e=0;e<r.length;e++)r[e]=tW(r[e]);return r.join("")}(hS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Zo(r,e){if(nW){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function b1(r,e){var t,n,i,s;if(r!==t){for(var a=(i=r,s=1+(256/r.length>>0),new Array(s+1).join(i)),o=[],c=0;c<256;c++)o[c]=c;var u=0;for(c=0;c<256;c++){var l=o[c];u=(u+l+a.charCodeAt(c))%256,o[c]=o[u],o[u]=l}t=r,n=o}else o=n;var d=e.length,g=0,p=0,x="";for(c=0;c<d;c++)p=(p+(l=o[g=(g+1)%256]))%256,o[g]=o[p],o[p]=l,a=o[(o[g]+o[p])%256],x+=String.fromCharCode(e.charCodeAt(c)^a);return x}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var T5={print:4,modify:8,copy:16,"annot-forms":32};function Tl(r,e,t,n){this.v=1,this.r=2;var i=192;r.forEach(function(o){if(T5.perm!==void 0)throw new Error("Invalid permission: "+o);i+=T5[o]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,a),this.P=-(1+(255^i)),this.encryptionKey=T1(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=b1(this.encryptionKey,this.padding)}function bl(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,n=0;n<t;n++){var i=r.charCodeAt(n);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=r[n]}return e}function b5(r){if(wr(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,typeof t!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[n,!!i],s},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var a=e[t][s];try{a[0].apply(r,n)}catch(o){Ot.console&&Cr.error("jsPDF PubSub Error",o.message,o)}a[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Ep(r){if(!(this instanceof Ep))return new Ep(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function fS(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function Jc(r,e,t,n,i){if(!(this instanceof Jc))return new Jc(r,e,t,n,i);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,fS.call(this,n,i)}function Sl(r,e,t,n,i){if(!(this instanceof Sl))return new Sl(r,e,t,n,i);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,fS.call(this,n,i)}function Dt(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],s=arguments[3],a=[],o=1,c=16,u="S",l=null;wr(r=r||{})==="object"&&(t=r.orientation,n=r.unit||n,i=r.format||i,s=r.compress||r.compressPdf||s,(l=r.encryption||null)!==null&&(l.userPassword=l.userPassword||"",l.ownerPassword=l.ownerPassword||"",l.userPermissions=l.userPermissions||[]),o=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(c=r.floatPrecision),u=r.defaultPathOperation||"S"),a=r.filters||(s===!0?["FlateEncode"]:a),n=n||"mm",t=(""+(t||"P")).toLowerCase();var d=r.putOnlyUsedFonts||!1,g={},p={internal:{},__private__:{}};p.__private__.PubSub=b5;var x="1.3",_=p.__private__.getPdfVersion=function(){return x};p.__private__.setPdfVersion=function(v){x=v};var E={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return E};var P=p.__private__.getPageFormat=function(v){return E[v]};i=i||"a4";var L={COMPAT:"compat",ADVANCED:"advanced"},M=L.COMPAT;function K(){this.saveGraphicsState(),ne(new wt(pt,0,0,-pt,0,ai()*pt).toString()+" cm"),this.setFontSize(this.getFontSize()/pt),u="n",M=L.ADVANCED}function ie(){this.restoreGraphicsState(),u="S",M=L.COMPAT}var oe=p.__private__.combineFontStyleAndFontWeight=function(v,F){if(v=="bold"&&F=="normal"||v=="bold"&&F==400||v=="normal"&&F=="italic"||v=="bold"&&F=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return F&&(v=F==400||F==="normal"?v==="italic"?"italic":"normal":F!=700&&F!=="bold"||v!=="normal"?(F==700?"bold":F)+""+v:"bold"),v};p.advancedAPI=function(v){var F=M===L.COMPAT;return F&&K.call(this),typeof v!="function"||(v(this),F&&ie.call(this)),this},p.compatAPI=function(v){var F=M===L.ADVANCED;return F&&ie.call(this),typeof v!="function"||(v(this),F&&K.call(this)),this},p.isAdvancedAPI=function(){return M===L.ADVANCED};var N,A=function(v){if(M!==L.ADVANCED)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=p.roundToPrecision=p.__private__.roundToPrecision=function(v,F){var re=e||F;if(isNaN(v)||isNaN(re))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(re).replace(/0+$/,"")};N=p.hpf=p.__private__.hpf=typeof c=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return k(v,c)}:c==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return k(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return k(v,16)};var V=p.f2=p.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return k(v,2)},b=p.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return k(v,3)},S=p.scale=p.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return M===L.COMPAT?v*pt:M===L.ADVANCED?v:void 0},R=function(v){return M===L.COMPAT?ai()-v:M===L.ADVANCED?v:void 0},se=function(v){return S(R(v))};p.__private__.setPrecision=p.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var ve,Ee="00000000000000000000000000000000",Ne=p.__private__.getFileId=function(){return Ee},_e=p.__private__.setFileId=function(v){return Ee=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():Ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),l!==null&&(Or=new Tl(l.userPermissions,l.userPassword,l.ownerPassword,Ee)),Ee};p.setFileId=function(v){return _e(v),this},p.getFileId=function(){return Ne()};var Ce=p.__private__.convertDateToPDFDate=function(v){var F=v.getTimezoneOffset(),re=F<0?"+":"-",ce=Math.floor(Math.abs(F/60)),me=Math.abs(F%60),Oe=[re,B(ce),"'",B(me),"'"].join("");return["D:",v.getFullYear(),B(v.getMonth()+1),B(v.getDate()),B(v.getHours()),B(v.getMinutes()),B(v.getSeconds()),Oe].join("")},Fe=p.__private__.convertPDFDateToDate=function(v){var F=parseInt(v.substr(2,4),10),re=parseInt(v.substr(6,2),10)-1,ce=parseInt(v.substr(8,2),10),me=parseInt(v.substr(10,2),10),Oe=parseInt(v.substr(12,2),10),Ye=parseInt(v.substr(14,2),10);return new Date(F,re,ce,me,Oe,Ye,0)},nt=p.__private__.setCreationDate=function(v){var F;if(v===void 0&&(v=new Date),v instanceof Date)F=Ce(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");F=v}return ve=F},T=p.__private__.getCreationDate=function(v){var F=ve;return v==="jsDate"&&(F=Fe(ve)),F};p.setCreationDate=function(v){return nt(v),this},p.getCreationDate=function(v){return T(v)};var D,B=p.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},U=p.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},J=0,ae=[],le=[],ue=0,xe=[],Be=[],ze=!1,Ze=le,at=function(){J=0,ue=0,le=[],ae=[],xe=[],Y=Ur(),X=Ur()};p.__private__.setCustomOutputDestination=function(v){ze=!0,Ze=v};var Re=function(v){ze||(Ze=v)};p.__private__.resetCustomOutputDestination=function(){ze=!1,Ze=le};var ne=p.__private__.out=function(v){return v=v.toString(),ue+=v.length+1,Ze.push(v),Ze},We=p.__private__.write=function(v){return ne(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},_t=p.__private__.getArrayBuffer=function(v){for(var F=v.length,re=new ArrayBuffer(F),ce=new Uint8Array(re);F--;)ce[F]=v.charCodeAt(F);return re},$e=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return $e};var rt=r.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(v){return rt=M===L.ADVANCED?v/pt:v,this};var ct,ut=p.__private__.getFontSize=p.getFontSize=function(){return M===L.COMPAT?rt:rt*pt},Tt=r.R2L||!1;p.__private__.setR2L=p.setR2L=function(v){return Tt=v,this},p.__private__.getR2L=p.getR2L=function(){return Tt};var At,Ft=p.__private__.setZoomMode=function(v){var F=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))ct=v;else if(isNaN(v)){if(F.indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');ct=v}else ct=parseInt(v,10)};p.__private__.getZoomMode=function(){return ct};var It,Ct=p.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');At=v};p.__private__.getPageMode=function(){return At};var Ht=p.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');It=v};p.__private__.getLayoutMode=function(){return It},p.__private__.setDisplayMode=p.setDisplayMode=function(v,F,re){return Ft(v),Ht(F),Ct(re),this};var kt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(v){if(Object.keys(kt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return kt[v]},p.__private__.getDocumentProperties=function(){return kt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(v){for(var F in kt)kt.hasOwnProperty(F)&&v[F]&&(kt[F]=v[F]);return this},p.__private__.setDocumentProperty=function(v,F){if(Object.keys(kt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return kt[v]=F};var qt,pt,Dr,Gt,qn,tr={},Er={},Li=[],Kt={},Qi={},Tr={},bn={},gi=null,cr=0,Nt=[],er=new b5(p),Di=r.hotfixes||[],Kr={},kn={},vi=[],wt=function v(F,re,ce,me,Oe,Ye){if(!(this instanceof v))return new v(F,re,ce,me,Oe,Ye);isNaN(F)&&(F=1),isNaN(re)&&(re=0),isNaN(ce)&&(ce=0),isNaN(me)&&(me=1),isNaN(Oe)&&(Oe=0),isNaN(Ye)&&(Ye=0),this._matrix=[F,re,ce,me,Oe,Ye]};Object.defineProperty(wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),wt.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(v)},wt.prototype.multiply=function(v){var F=v.sx*this.sx+v.shy*this.shx,re=v.sx*this.shy+v.shy*this.sy,ce=v.shx*this.sx+v.sy*this.shx,me=v.shx*this.shy+v.sy*this.sy,Oe=v.tx*this.sx+v.ty*this.shx+this.tx,Ye=v.tx*this.shy+v.ty*this.sy+this.ty;return new wt(F,re,ce,me,Oe,Ye)},wt.prototype.decompose=function(){var v=this.sx,F=this.shy,re=this.shx,ce=this.sy,me=this.tx,Oe=this.ty,Ye=Math.sqrt(v*v+F*F),dt=(v/=Ye)*re+(F/=Ye)*ce;re-=v*dt,ce-=F*dt;var f=Math.sqrt(re*re+ce*ce);return dt/=f,v*(ce/=f)<F*(re/=f)&&(v=-v,F=-F,dt=-dt,Ye=-Ye),{scale:new wt(Ye,0,0,f,0,0),translate:new wt(1,0,0,1,me,Oe),rotate:new wt(v,F,-F,v,0,0),skew:new wt(1,0,dt,1,0,0)}},wt.prototype.toString=function(v){return this.join(" ")},wt.prototype.inversed=function(){var v=this.sx,F=this.shy,re=this.shx,ce=this.sy,me=this.tx,Oe=this.ty,Ye=1/(v*ce-F*re),dt=ce*Ye,f=-F*Ye,w=-re*Ye,C=v*Ye;return new wt(dt,f,w,C,-dt*me-w*Oe,-f*me-C*Oe)},wt.prototype.applyToPoint=function(v){var F=v.x*this.sx+v.y*this.shx+this.tx,re=v.x*this.shy+v.y*this.sy+this.ty;return new La(F,re)},wt.prototype.applyToRectangle=function(v){var F=this.applyToPoint(v),re=this.applyToPoint(new La(v.x+v.w,v.y+v.h));return new Ao(F.x,F.y,re.x-F.x,re.y-F.y)},wt.prototype.clone=function(){var v=this.sx,F=this.shy,re=this.shx,ce=this.sy,me=this.tx,Oe=this.ty;return new wt(v,F,re,ce,me,Oe)},p.Matrix=wt;var si=p.matrixMult=function(v,F){return F.multiply(v)},gn=new wt(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=gn;var Yr=function(v,F){if(!Qi[v]){var re=(F instanceof Jc?"Sh":"P")+(Object.keys(Kt).length+1).toString(10);F.id=re,Qi[v]=re,Kt[re]=F,er.publish("addPattern",F)}};p.ShadingPattern=Jc,p.TilingPattern=Sl,p.addShadingPattern=function(v,F){return A("addShadingPattern()"),Yr(v,F),this},p.beginTilingPattern=function(v){A("beginTilingPattern()"),Io(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},p.endTilingPattern=function(v,F){A("endTilingPattern()"),F.stream=Be[D].join(`
`),Yr(v,F),er.publish("endTilingPattern",F),vi.pop().restore()};var Hr=p.__private__.newObject=function(){var v=Ur();return j(v,!0),v},Ur=p.__private__.newObjectDeferred=function(){return J++,ae[J]=function(){return ue},J},j=function(v,F){return F=typeof F=="boolean"&&F,ae[v]=ue,F&&ne(v+" 0 obj"),v},ee=p.__private__.newAdditionalObject=function(){var v={objId:Ur(),content:""};return xe.push(v),v},Y=Ur(),X=Ur(),Z=p.__private__.decodeColorString=function(v){var F=v.split(" ");if(F.length!==2||F[1]!=="g"&&F[1]!=="G")F.length===5&&(F[4]==="k"||F[4]==="K")&&(F=[(1-F[0])*(1-F[3]),(1-F[1])*(1-F[3]),(1-F[2])*(1-F[3]),"r"]);else{var re=parseFloat(F[0]);F=[re,re,re,"r"]}for(var ce="#",me=0;me<3;me++)ce+=("0"+Math.floor(255*parseFloat(F[me])).toString(16)).slice(-2);return ce},te=p.__private__.encodeColorString=function(v){var F;typeof v=="string"&&(v={ch1:v});var re=v.ch1,ce=v.ch2,me=v.ch3,Oe=v.ch4,Ye=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof re=="string"&&re.charAt(0)!=="#"){var dt=new lS(re);if(dt.ok)re=dt.toHex();else if(!/^\d*\.?\d*$/.test(re))throw new Error('Invalid color "'+re+'" passed to jsPDF.encodeColorString.')}if(typeof re=="string"&&/^#[0-9A-Fa-f]{3}$/.test(re)&&(re="#"+re[1]+re[1]+re[2]+re[2]+re[3]+re[3]),typeof re=="string"&&/^#[0-9A-Fa-f]{6}$/.test(re)){var f=parseInt(re.substr(1),16);re=f>>16&255,ce=f>>8&255,me=255&f}if(ce===void 0||Oe===void 0&&re===ce&&ce===me)if(typeof re=="string")F=re+" "+Ye[0];else switch(v.precision){case 2:F=V(re/255)+" "+Ye[0];break;case 3:default:F=b(re/255)+" "+Ye[0]}else if(Oe===void 0||wr(Oe)==="object"){if(Oe&&!isNaN(Oe.a)&&Oe.a===0)return F=["1.","1.","1.",Ye[1]].join(" ");if(typeof re=="string")F=[re,ce,me,Ye[1]].join(" ");else switch(v.precision){case 2:F=[V(re/255),V(ce/255),V(me/255),Ye[1]].join(" ");break;default:case 3:F=[b(re/255),b(ce/255),b(me/255),Ye[1]].join(" ")}}else if(typeof re=="string")F=[re,ce,me,Oe,Ye[2]].join(" ");else switch(v.precision){case 2:F=[V(re),V(ce),V(me),V(Oe),Ye[2]].join(" ");break;case 3:default:F=[b(re),b(ce),b(me),b(Oe),Ye[2]].join(" ")}return F},ye=p.__private__.getFilters=function(){return a},ke=p.__private__.putStream=function(v){var F=(v=v||{}).data||"",re=v.filters||ye(),ce=v.alreadyAppliedFilters||[],me=v.addLength1||!1,Oe=F.length,Ye=v.objectId,dt=function(Bt){return Bt};if(l!==null&&Ye===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");l!==null&&(dt=Or.encryptor(Ye,0));var f={};re===!0&&(re=["FlateEncode"]);var w=v.additionalKeyValues||[],C=(f=Dt.API.processDataByFilters!==void 0?Dt.API.processDataByFilters(F,re):{data:F,reverseChain:[]}).reverseChain+(Array.isArray(ce)?ce.join(" "):ce.toString());if(f.data.length!==0&&(w.push({key:"Length",value:f.data.length}),me===!0&&w.push({key:"Length1",value:Oe})),C.length!=0)if(C.split("/").length-1==1)w.push({key:"Filter",value:C});else{w.push({key:"Filter",value:"["+C+"]"});for(var W=0;W<w.length;W+=1)if(w[W].key==="DecodeParms"){for(var pe=[],Ie=0;Ie<f.reverseChain.split("/").length-1;Ie+=1)pe.push("null");pe.push(w[W].value),w[W].value="["+pe.join(" ")+"]"}}ne("<<");for(var Qe=0;Qe<w.length;Qe++)ne("/"+w[Qe].key+" "+w[Qe].value);ne(">>"),f.data.length!==0&&(ne("stream"),ne(dt(f.data)),ne("endstream"))},we=p.__private__.putPage=function(v){var F=v.number,re=v.data,ce=v.objId,me=v.contentsObjId;j(ce,!0),ne("<</Type /Page"),ne("/Parent "+v.rootDictionaryObjId+" 0 R"),ne("/Resources "+v.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(N(v.mediaBox.bottomLeftX))+" "+parseFloat(N(v.mediaBox.bottomLeftY))+" "+N(v.mediaBox.topRightX)+" "+N(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&ne("/CropBox ["+N(v.cropBox.bottomLeftX)+" "+N(v.cropBox.bottomLeftY)+" "+N(v.cropBox.topRightX)+" "+N(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&ne("/BleedBox ["+N(v.bleedBox.bottomLeftX)+" "+N(v.bleedBox.bottomLeftY)+" "+N(v.bleedBox.topRightX)+" "+N(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&ne("/TrimBox ["+N(v.trimBox.bottomLeftX)+" "+N(v.trimBox.bottomLeftY)+" "+N(v.trimBox.topRightX)+" "+N(v.trimBox.topRightY)+"]"),v.artBox!==null&&ne("/ArtBox ["+N(v.artBox.bottomLeftX)+" "+N(v.artBox.bottomLeftY)+" "+N(v.artBox.topRightX)+" "+N(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&ne("/UserUnit "+v.userUnit),er.publish("putPage",{objId:ce,pageContext:Nt[F],pageNumber:F,page:re}),ne("/Contents "+me+" 0 R"),ne(">>"),ne("endobj");var Oe=re.join(`
`);return M===L.ADVANCED&&(Oe+=`
Q`),j(me,!0),ke({data:Oe,filters:ye(),objectId:me}),ne("endobj"),ce},Te=p.__private__.putPages=function(){var v,F,re=[];for(v=1;v<=cr;v++)Nt[v].objId=Ur(),Nt[v].contentsObjId=Ur();for(v=1;v<=cr;v++)re.push(we({number:v,data:Be[v],objId:Nt[v].objId,contentsObjId:Nt[v].contentsObjId,mediaBox:Nt[v].mediaBox,cropBox:Nt[v].cropBox,bleedBox:Nt[v].bleedBox,trimBox:Nt[v].trimBox,artBox:Nt[v].artBox,userUnit:Nt[v].userUnit,rootDictionaryObjId:Y,resourceDictionaryObjId:X}));j(Y,!0),ne("<</Type /Pages");var ce="/Kids [";for(F=0;F<cr;F++)ce+=re[F]+" 0 R ";ne(ce+"]"),ne("/Count "+cr),ne(">>"),ne("endobj"),er.publish("postPutPages")},Pe=function(v){er.publish("putFont",{font:v,out:ne,newObject:Hr,putStream:ke}),v.isAlreadyPutted!==!0&&(v.objectNumber=Hr(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+bl(v.postScriptName)),ne("/Subtype /Type1"),typeof v.encoding=="string"&&ne("/Encoding /"+v.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Ke=function(){for(var v in tr)tr.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&Pe(tr[v])},it=function(v){v.objectNumber=Hr();var F=[];F.push({key:"Type",value:"/XObject"}),F.push({key:"Subtype",value:"/Form"}),F.push({key:"BBox",value:"["+[N(v.x),N(v.y),N(v.x+v.width),N(v.y+v.height)].join(" ")+"]"}),F.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var re=v.pages[1].join(`
`);ke({data:re,additionalKeyValues:F,objectId:v.objectNumber}),ne("endobj")},mt=function(){for(var v in Kr)Kr.hasOwnProperty(v)&&it(Kr[v])},et=function(v,F){var re,ce=[],me=1/(F-1);for(re=0;re<1;re+=me)ce.push(re);if(ce.push(1),v[0].offset!=0){var Oe={offset:0,color:v[0].color};v.unshift(Oe)}if(v[v.length-1].offset!=1){var Ye={offset:1,color:v[v.length-1].color};v.push(Ye)}for(var dt="",f=0,w=0;w<ce.length;w++){for(re=ce[w];re>v[f+1].offset;)f++;var C=v[f].offset,W=(re-C)/(v[f+1].offset-C),pe=v[f].color,Ie=v[f+1].color;dt+=U(Math.round((1-W)*pe[0]+W*Ie[0]).toString(16))+U(Math.round((1-W)*pe[1]+W*Ie[1]).toString(16))+U(Math.round((1-W)*pe[2]+W*Ie[2]).toString(16))}return dt.trim()},lt=function(v,F){F||(F=21);var re=Hr(),ce=et(v.colors,F),me=[];me.push({key:"FunctionType",value:"0"}),me.push({key:"Domain",value:"[0.0 1.0]"}),me.push({key:"Size",value:"["+F+"]"}),me.push({key:"BitsPerSample",value:"8"}),me.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ke({data:ce,additionalKeyValues:me,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:re}),ne("endobj"),v.objectNumber=Hr(),ne("<< /ShadingType "+v.type),ne("/ColorSpace /DeviceRGB");var Oe="/Coords ["+N(parseFloat(v.coords[0]))+" "+N(parseFloat(v.coords[1]))+" ";v.type===2?Oe+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3])):Oe+=N(parseFloat(v.coords[2]))+" "+N(parseFloat(v.coords[3]))+" "+N(parseFloat(v.coords[4]))+" "+N(parseFloat(v.coords[5])),ne(Oe+="]"),v.matrix&&ne("/Matrix ["+v.matrix.toString()+"]"),ne("/Function "+re+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Lt=function(v,F){var re=Ur(),ce=Hr();F.push({resourcesOid:re,objectOid:ce}),v.objectNumber=ce;var me=[];me.push({key:"Type",value:"/Pattern"}),me.push({key:"PatternType",value:"1"}),me.push({key:"PaintType",value:"1"}),me.push({key:"TilingType",value:"1"}),me.push({key:"BBox",value:"["+v.boundingBox.map(N).join(" ")+"]"}),me.push({key:"XStep",value:N(v.xStep)}),me.push({key:"YStep",value:N(v.yStep)}),me.push({key:"Resources",value:re+" 0 R"}),v.matrix&&me.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),ke({data:v.stream,additionalKeyValues:me,objectId:v.objectNumber}),ne("endobj")},rr=function(v){var F;for(F in Kt)Kt.hasOwnProperty(F)&&(Kt[F]instanceof Jc?lt(Kt[F]):Kt[F]instanceof Sl&&Lt(Kt[F],v))},nr=function(v){for(var F in v.objectNumber=Hr(),ne("<<"),v)switch(F){case"opacity":ne("/ca "+V(v[F]));break;case"stroke-opacity":ne("/CA "+V(v[F]))}ne(">>"),ne("endobj")},br=function(){var v;for(v in Tr)Tr.hasOwnProperty(v)&&nr(Tr[v])},_i=function(){for(var v in ne("/XObject <<"),Kr)Kr.hasOwnProperty(v)&&Kr[v].objectNumber>=0&&ne("/"+v+" "+Kr[v].objectNumber+" 0 R");er.publish("putXobjectDict"),ne(">>")},Cs=function(){Or.oid=Hr(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Or.v),ne("/R "+Or.r),ne("/U <"+Or.toHexString(Or.U)+">"),ne("/O <"+Or.toHexString(Or.O)+">"),ne("/P "+Or.P),ne(">>"),ne("endobj")},Zi=function(){for(var v in ne("/Font <<"),tr)tr.hasOwnProperty(v)&&(d===!1||d===!0&&g.hasOwnProperty(v))&&ne("/"+v+" "+tr[v].objectNumber+" 0 R");ne(">>")},Fi=function(){if(Object.keys(Kt).length>0){for(var v in ne("/Shading <<"),Kt)Kt.hasOwnProperty(v)&&Kt[v]instanceof Jc&&Kt[v].objectNumber>=0&&ne("/"+v+" "+Kt[v].objectNumber+" 0 R");er.publish("putShadingPatternDict"),ne(">>")}},es=function(v){if(Object.keys(Kt).length>0){for(var F in ne("/Pattern <<"),Kt)Kt.hasOwnProperty(F)&&Kt[F]instanceof p.TilingPattern&&Kt[F].objectNumber>=0&&Kt[F].objectNumber<v&&ne("/"+F+" "+Kt[F].objectNumber+" 0 R");er.publish("putTilingPatternDict"),ne(">>")}},zn=function(){if(Object.keys(Tr).length>0){var v;for(v in ne("/ExtGState <<"),Tr)Tr.hasOwnProperty(v)&&Tr[v].objectNumber>=0&&ne("/"+v+" "+Tr[v].objectNumber+" 0 R");er.publish("putGStateDict"),ne(">>")}},Fr=function(v){j(v.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Zi(),Fi(),es(v.objectOid),zn(),_i(),ne(">>"),ne("endobj")},Tc=function(){var v=[];Ke(),br(),mt(),rr(v),er.publish("putResources"),v.forEach(Fr),Fr({resourcesOid:X,objectOid:Number.MAX_SAFE_INTEGER}),er.publish("postPutResources")},bc=function(){er.publish("putAdditionalObjects");for(var v=0;v<xe.length;v++){var F=xe[v];j(F.objId,!0),ne(F.content),ne("endobj")}er.publish("postPutAdditionalObjects")},Vu=function(v){Er[v.fontName]=Er[v.fontName]||{},Er[v.fontName][v.fontStyle]=v.id},Ac=function(v,F,re,ce,me){var Oe={id:"F"+(Object.keys(tr).length+1).toString(10),postScriptName:v,fontName:F,fontStyle:re,encoding:ce,isStandardFont:me||!1,metadata:{}};return er.publish("addFont",{font:Oe,instance:this}),tr[Oe.id]=Oe,Vu(Oe),Oe.id},Uu=function(v){for(var F=0,re=$e.length;F<re;F++){var ce=Ac.call(this,v[F][0],v[F][1],v[F][2],$e[F][3],!0);d===!1&&(g[ce]=!0);var me=v[F][0].split("-");Vu({id:ce,fontName:me[0],fontStyle:me[1]||""})}er.publish("addFonts",{fonts:tr,dictionary:Er})},Oi=function(v){return v.foo=function(){try{return v.apply(this,arguments)}catch(ce){var F=ce.stack||"";~F.indexOf(" at ")&&(F=F.split(" at ")[1]);var re="Error in function "+F.split(`
`)[0].split("<")[0]+": "+ce.message;if(!Ot.console)throw new Error(re);Ot.console.error(re,ce),Ot.alert&&alert(re)}},v.foo.bar=v,v.foo},fo=function(v,F){var re,ce,me,Oe,Ye,dt,f,w,C;if(me=(F=F||{}).sourceEncoding||"Unicode",Ye=F.outputEncoding,(F.autoencode||Ye)&&tr[qt].metadata&&tr[qt].metadata[me]&&tr[qt].metadata[me].encoding&&(Oe=tr[qt].metadata[me].encoding,!Ye&&tr[qt].encoding&&(Ye=tr[qt].encoding),!Ye&&Oe.codePages&&(Ye=Oe.codePages[0]),typeof Ye=="string"&&(Ye=Oe[Ye]),Ye)){for(f=!1,dt=[],re=0,ce=v.length;re<ce;re++)(w=Ye[v.charCodeAt(re)])?dt.push(String.fromCharCode(w)):dt.push(v[re]),dt[re].charCodeAt(0)>>8&&(f=!0);v=dt.join("")}for(re=v.length;f===void 0&&re!==0;)v.charCodeAt(re-1)>>8&&(f=!0),re--;if(!f)return v;for(dt=F.noBOM?[]:[254,255],re=0,ce=v.length;re<ce;re++){if((C=(w=v.charCodeAt(re))>>8)>>8)throw new Error("Character at position "+re+" of string '"+v+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");dt.push(C),dt.push(w-(C<<8))}return String.fromCharCode.apply(void 0,dt)},Xr=p.__private__.pdfEscape=p.pdfEscape=function(v,F){return fo(v,F).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yi=p.__private__.beginPage=function(v){Be[++cr]=[],Nt[cr]={objId:0,contentsObjId:0,userUnit:Number(o),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Ic(cr),Re(Be[D])},Pa=function(v,F){var re,ce,me;switch(t=F||t,typeof v=="string"&&(re=P(v.toLowerCase()),Array.isArray(re)&&(ce=re[0],me=re[1])),Array.isArray(v)&&(ce=v[0]*pt,me=v[1]*pt),isNaN(ce)&&(ce=i[0],me=i[1]),(ce>14400||me>14400)&&(Cr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),ce=Math.min(14400,ce),me=Math.min(14400,me)),i=[ce,me],t.substr(0,1)){case"l":me>ce&&(i=[me,ce]);break;case"p":ce>me&&(i=[me,ce])}yi(i),kc(Cc),ne(Wn),Dc!==0&&ne(Dc+" J"),bo!==0&&ne(bo+" j"),er.publish("addPage",{pageNumber:cr})},po=function(v){v>0&&v<=cr&&(Be.splice(v,1),Nt.splice(v,1),cr--,D>cr&&(D=cr),this.setPage(D))},Ic=function(v){v>0&&v<=cr&&(D=v)},dr=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Be.length-1},Na=function(v,F,re){var ce,me=void 0;return re=re||{},v=v!==void 0?v:tr[qt].fontName,F=F!==void 0?F:tr[qt].fontStyle,ce=v.toLowerCase(),Er[ce]!==void 0&&Er[ce][F]!==void 0?me=Er[ce][F]:Er[v]!==void 0&&Er[v][F]!==void 0?me=Er[v][F]:re.disableWarning===!1&&Cr.warn("Unable to look up font label for font '"+v+"', '"+F+"'. Refer to getFontList() for available fonts."),me||re.noFallback||(me=Er.times[F])==null&&(me=Er.times.normal),me},Ca=p.__private__.putInfo=function(){var v=Hr(),F=function(ce){return ce};for(var re in l!==null&&(F=Or.encryptor(v,0)),ne("<<"),ne("/Producer ("+Xr(F("jsPDF "+Dt.version))+")"),kt)kt.hasOwnProperty(re)&&kt[re]&&ne("/"+re.substr(0,1).toUpperCase()+re.substr(1)+" ("+Xr(F(kt[re]))+")");ne("/CreationDate ("+Xr(F(ve))+")"),ne(">>"),ne("endobj")},ks=p.__private__.putCatalog=function(v){var F=(v=v||{}).rootDictionaryObjId||Y;switch(Hr(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+F+" 0 R"),ct||(ct="fullwidth"),ct){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var re=""+ct;re.substr(re.length-1)==="%"&&(ct=parseInt(ct)/100),typeof ct=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+V(ct)+"]")}switch(It||(It="continuous"),It){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}At&&ne("/PageMode /"+At),er.publish("putCatalog"),ne(">>"),ne("endobj")},Sh=p.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(J+1)),ne("/Root "+J+" 0 R"),ne("/Info "+(J-1)+" 0 R"),l!==null&&ne("/Encrypt "+Or.oid+" 0 R"),ne("/ID [ <"+Ee+"> <"+Ee+"> ]"),ne(">>")},ju=p.__private__.putHeader=function(){ne("%PDF-"+x),ne("%")},Ph=p.__private__.putXRef=function(){var v="0000000000";ne("xref"),ne("0 "+(J+1)),ne("0000000000 65535 f ");for(var F=1;F<=J;F++)typeof ae[F]=="function"?ne((v+ae[F]()).slice(-10)+" 00000 n "):ae[F]!==void 0?ne((v+ae[F]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Rs=p.__private__.buildDocument=function(){at(),Re(le),er.publish("buildDocument"),ju(),Te(),bc(),Tc(),l!==null&&Cs(),Ca(),ks();var v=ue;return Ph(),Sh(),ne("startxref"),ne(""+v),ne("%%EOF"),Re(Be[D]),le.join(`
`)},mo=p.__private__.getBlob=function(v){return new Blob([_t(v)],{type:"application/pdf"})},go=p.output=p.__private__.output=Oi(function(v,F){switch(typeof(F=F||{})=="string"?F={filename:F}:F.filename=F.filename||"generated.pdf",v){case void 0:return Rs();case"save":p.save(F.filename);break;case"arraybuffer":return _t(Rs());case"blob":return mo(Rs());case"bloburi":case"bloburl":if(Ot.URL!==void 0&&typeof Ot.URL.createObjectURL=="function")return Ot.URL&&Ot.URL.createObjectURL(mo(Rs()))||void 0;Cr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var re="",ce=Rs();try{re=E1(ce)}catch{re=E1(unescape(encodeURIComponent(ce)))}return"data:application/pdf;filename="+F.filename+";base64,"+re;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var me="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Oe=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';F.pdfObjectUrl&&(me=F.pdfObjectUrl,Oe="");var Ye='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+me+'"'+Oe+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(F)+");<\/script></body></html>",dt=Ot.open();return dt!==null&&dt.document.write(Ye),dt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Ot)==="[object Window]"){var f='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(F.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+F.filename+'" width="500px" height="400px" /></body></html>',w=Ot.open();if(w!==null){w.document.write(f);var C=this;w.document.documentElement.querySelector("#pdfViewer").onload=function(){w.document.title=F.filename,w.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(C.output("bloburl"))}}return w}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Ot)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var W='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",F)+'"></iframe></body></html>',pe=Ot.open();if(pe!==null&&(pe.document.write(W),pe.document.title=F.filename),pe||typeof safari>"u")return pe;break;case"datauri":case"dataurl":return Ot.document.location.href=this.output("datauristring",F);default:return null}}),Qs=function(v){return Array.isArray(Di)===!0&&Di.indexOf(v)>-1};switch(n){case"pt":pt=1;break;case"mm":pt=72/25.4;break;case"cm":pt=72/2.54;break;case"in":pt=72;break;case"px":pt=Qs("px_scaling")==1?.75:96/72;break;case"pc":case"em":pt=12;break;case"ex":pt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);pt=n}var Or=null;nt(),_e();var qu=function(v){return l!==null?Or.encryptor(v,0):function(F){return F}},Sc=p.__private__.getPageInfo=p.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[v].objId,pageNumber:v,pageContext:Nt[v]}},Mt=p.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var F in Nt)if(Nt[F].objId===v)break;return Sc(F)},Zs=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Nt[D].objId,pageNumber:D,pageContext:Nt[D]}};p.addPage=function(){return Pa.apply(this,arguments),this},p.setPage=function(){return Ic.apply(this,arguments),Re.call(this,Be[D]),this},p.insertPage=function(v){return this.addPage(),this.movePage(D,v),this},p.movePage=function(v,F){var re,ce;if(v>F){re=Be[v],ce=Nt[v];for(var me=v;me>F;me--)Be[me]=Be[me-1],Nt[me]=Nt[me-1];Be[F]=re,Nt[F]=ce,this.setPage(F)}else if(v<F){re=Be[v],ce=Nt[v];for(var Oe=v;Oe<F;Oe++)Be[Oe]=Be[Oe+1],Nt[Oe]=Nt[Oe+1];Be[F]=re,Nt[F]=ce,this.setPage(F)}return this},p.deletePage=function(){return po.apply(this,arguments),this},p.__private__.text=p.text=function(v,F,re,ce,me){var Oe,Ye,dt,f,w,C,W,pe,Ie,Qe=(ce=ce||{}).scope||this;if(typeof v=="number"&&typeof F=="number"&&(typeof re=="string"||Array.isArray(re))){var Bt=re;re=F,F=v,v=Bt}if(arguments[3]instanceof wt?(A("The transform parameter of text() with a Matrix value"),Ie=me):(dt=arguments[4],f=arguments[5],wr(W=arguments[3])==="object"&&W!==null||(typeof dt=="string"&&(f=dt,dt=null),typeof W=="string"&&(f=W,W=null),typeof W=="number"&&(dt=W,W=null),ce={flags:W,angle:dt,align:f})),isNaN(F)||isNaN(re)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return Qe;var Xt="",Vt=!1,fr=typeof ce.lineHeightFactor=="number"?ce.lineHeightFactor:hr,Pr=Qe.internal.scaleFactor;function Ms(kr){return kr=kr.split("	").join(Array(ce.TabLen||9).join(" ")),Xr(kr,W)}function Hn(kr){for(var Rr,cn=kr.concat(),In=[],Ba=cn.length;Ba--;)typeof(Rr=cn.shift())=="string"?In.push(Rr):Array.isArray(kr)&&(Rr.length===1||Rr[1]===void 0&&Rr[2]===void 0)?In.push(Rr[0]):In.push([Rr[0],Rr[1],Rr[2]]);return In}function na(kr,Rr){var cn;if(typeof kr=="string")cn=Rr(kr)[0];else if(Array.isArray(kr)){for(var In,Ba,Mh=kr.concat(),tl=[],Fd=Mh.length;Fd--;)typeof(In=Mh.shift())=="string"?tl.push(Rr(In)[0]):Array.isArray(In)&&typeof In[0]=="string"&&(Ba=Rr(In[0],In[1],In[2]),tl.push([Ba[0],Ba[1],Ba[2]]));cn=tl}return cn}var ia=!1,Ch=!0;if(typeof v=="string")ia=!0;else if(Array.isArray(v)){var kh=v.concat();Ye=[];for(var Gu,$n=kh.length;$n--;)(typeof(Gu=kh.shift())!="string"||Array.isArray(Gu)&&typeof Gu[0]!="string")&&(Ch=!1);ia=Ch}if(ia===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Ku=rt/Qe.internal.scaleFactor,Yu=Ku*(fr-1);switch(ce.baseline){case"bottom":re-=Yu;break;case"top":re+=Ku-Yu;break;case"hanging":re+=Ku-2*Yu;break;case"middle":re+=Ku/2-Yu}if((C=ce.maxWidth||0)>0&&(typeof v=="string"?v=Qe.splitTextToSize(v,C):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(kr,Rr){return kr.concat(Qe.splitTextToSize(Rr,C))},[]))),Oe={text:v,x:F,y:re,options:ce,mutex:{pdfEscape:Xr,activeFontKey:qt,fonts:tr,activeFontSize:rt}},er.publish("preProcessText",Oe),v=Oe.text,dt=(ce=Oe.options).angle,!(Ie instanceof wt)&&dt&&typeof dt=="number"){dt*=Math.PI/180,ce.rotationDirection===0&&(dt=-dt),M===L.ADVANCED&&(dt=-dt);var Xu=Math.cos(dt),Rh=Math.sin(dt);Ie=new wt(Xu,Rh,-Rh,Xu,0,0)}else dt&&dt instanceof wt&&(Ie=dt);M!==L.ADVANCED||Ie||(Ie=gn),(w=ce.charSpace||Ra)!==void 0&&(Xt+=N(S(w))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pe=ce.horizontalScale)!==void 0&&(Xt+=N(100*pe)+` Tz
`),ce.lang;var Mi=-1,Em=ce.renderingMode!==void 0?ce.renderingMode:ce.stroke,Lh=Qe.internal.getCurrentPageInfo().pageContext;switch(Em){case 0:case!1:case"fill":Mi=0;break;case 1:case!0:case"stroke":Mi=1;break;case 2:case"fillThenStroke":Mi=2;break;case 3:case"invisible":Mi=3;break;case 4:case"fillAndAddForClipping":Mi=4;break;case 5:case"strokeAndAddPathForClipping":Mi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Mi=6;break;case 7:case"addToPathForClipping":Mi=7}var kd=Lh.usedRenderingMode!==void 0?Lh.usedRenderingMode:-1;Mi!==-1?Xt+=Mi+` Tr
`:kd!==-1&&(Xt+=`0 Tr
`),Mi!==-1&&(Lh.usedRenderingMode=Mi),f=ce.align||"left";var vs,Ju=rt*fr,Rd=Qe.internal.pageSize.getWidth(),Ld=tr[qt];w=ce.charSpace||Ra,C=ce.maxWidth||0,W=Object.assign({autoencode:!0,noBOM:!0},ce.flags);var No=[],Fc=function(kr){return Qe.getStringUnitWidth(kr,{font:Ld,charSpace:w,fontSize:rt,doKerning:!1})*rt/Pr};if(Object.prototype.toString.call(v)==="[object Array]"){var Bi;Ye=Hn(v),f!=="left"&&(vs=Ye.map(Fc));var wi,Co=0;if(f==="right"){F-=vs[0],v=[],$n=Ye.length;for(var Fa=0;Fa<$n;Fa++)Fa===0?(wi=ns(F),Bi=An(re)):(wi=S(Co-vs[Fa]),Bi=-Ju),v.push([Ye[Fa],wi,Bi]),Co=vs[Fa]}else if(f==="center"){F-=vs[0]/2,v=[],$n=Ye.length;for(var Oa=0;Oa<$n;Oa++)Oa===0?(wi=ns(F),Bi=An(re)):(wi=S((Co-vs[Oa])/2),Bi=-Ju),v.push([Ye[Oa],wi,Bi]),Co=vs[Oa]}else if(f==="left"){v=[],$n=Ye.length;for(var Qu=0;Qu<$n;Qu++)v.push(Ye[Qu])}else if(f==="justify"&&Ld.encoding==="Identity-H"){v=[],$n=Ye.length,C=C!==0?C:Rd;for(var Ma=0,on=0;on<$n;on++)if(Bi=on===0?An(re):-Ju,wi=on===0?ns(F):Ma,on<$n-1){var Dh=S((C-vs[on])/(Ye[on].split(" ").length-1)),xi=Ye[on].split(" ");v.push([xi[0]+" ",wi,Bi]),Ma=0;for(var _s=1;_s<xi.length;_s++){var Zu=(Fc(xi[_s-1]+" "+xi[_s])-Fc(xi[_s]))*Pr+Dh;_s==xi.length-1?v.push([xi[_s],Zu,0]):v.push([xi[_s]+" ",Zu,0]),Ma-=Zu}}else v.push([Ye[on],wi,Bi]);v.push(["",Ma,0])}else{if(f!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],$n=Ye.length,C=C!==0?C:Rd,on=0;on<$n;on++)Bi=on===0?An(re):-Ju,wi=on===0?ns(F):0,on<$n-1?No.push(N(S((C-vs[on])/(Ye[on].split(" ").length-1)))):No.push(0),v.push([Ye[on],wi,Bi])}}var Dd=typeof ce.R2L=="boolean"?ce.R2L:Tt;Dd===!0&&(v=na(v,function(kr,Rr,cn){return[kr.split("").reverse().join(""),Rr,cn]})),Oe={text:v,x:F,y:re,options:ce,mutex:{pdfEscape:Xr,activeFontKey:qt,fonts:tr,activeFontSize:rt}},er.publish("postProcessText",Oe),v=Oe.text,Vt=Oe.mutex.isHex||!1;var Fh=tr[qt].encoding;Fh!=="WinAnsiEncoding"&&Fh!=="StandardEncoding"||(v=na(v,function(kr,Rr,cn){return[Ms(kr),Rr,cn]})),Ye=Hn(v),v=[];for(var Oc,Mc,ko,Bc=0,el=1,Vc=Array.isArray(Ye[0])?el:Bc,Ro="",Oh=function(kr,Rr,cn){var In="";return cn instanceof wt?(cn=typeof ce.angle=="number"?si(cn,new wt(1,0,0,1,kr,Rr)):si(new wt(1,0,0,1,kr,Rr),cn),M===L.ADVANCED&&(cn=si(new wt(1,0,0,-1,0,0),cn)),In=cn.join(" ")+` Tm
`):In=N(kr)+" "+N(Rr)+` Td
`,In},ys=0;ys<Ye.length;ys++){switch(Ro="",Vc){case el:ko=(Vt?"<":"(")+Ye[ys][0]+(Vt?">":")"),Oc=parseFloat(Ye[ys][1]),Mc=parseFloat(Ye[ys][2]);break;case Bc:ko=(Vt?"<":"(")+Ye[ys]+(Vt?">":")"),Oc=ns(F),Mc=An(re)}No!==void 0&&No[ys]!==void 0&&(Ro=No[ys]+` Tw
`),ys===0?v.push(Ro+Oh(Oc,Mc,Ie)+ko):Vc===Bc?v.push(Ro+ko):Vc===el&&v.push(Ro+Oh(Oc,Mc,Ie)+ko)}v=Vc===Bc?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var ws=`BT
/`;return ws+=qt+" "+rt+` Tf
`,ws+=N(rt*fr)+` TL
`,ws+=Fs+`
`,ws+=Xt,ws+=v,ne(ws+="ET"),g[qt]=!0,Qe};var Nh=p.__private__.clip=p.clip=function(v){return ne(v==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return Nh("evenodd")},p.__private__.discardPath=p.discardPath=function(){return ne("n"),this};var gs=p.__private__.isValidStyle=function(v){var F=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(F=!0),F};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(v){return gs(v)&&(u=v),this};var zu=p.__private__.getStyle=p.getStyle=function(v){var F=u;switch(v){case"D":case"S":F="S";break;case"F":F="f";break;case"FD":case"DF":F="B";break;case"f":case"f*":case"B":case"B*":F=v}return F},ts=p.close=function(){return ne("h"),this};p.stroke=function(){return ne("S"),this},p.fill=function(v){return vo("f",v),this},p.fillEvenOdd=function(v){return vo("f*",v),this},p.fillStroke=function(v){return vo("B",v),this},p.fillStrokeEvenOdd=function(v){return vo("B*",v),this};var vo=function(v,F){wr(F)==="object"?yo(F,v):ne(v)},Pc=function(v){v===null||M===L.ADVANCED&&v===void 0||(v=zu(v),ne(v))};function _o(v,F,re,ce,me){var Oe=new Sl(F||this.boundingBox,re||this.xStep,ce||this.yStep,this.gState,me||this.matrix);Oe.stream=this.stream;var Ye=v+"$$"+this.cloneIndex+++"$$";return Yr(Ye,Oe),Oe}var yo=function(v,F){var re=Qi[v.key],ce=Kt[re];if(ce instanceof Jc)ne("q"),ne(Wu(F)),ce.gState&&p.setGState(ce.gState),ne(v.matrix.toString()+" cm"),ne("/"+re+" sh"),ne("Q");else if(ce instanceof Sl){var me=new wt(1,0,0,-1,0,ai());v.matrix&&(me=me.multiply(v.matrix||gn),re=_o.call(ce,v.key,v.boundingBox,v.xStep,v.yStep,me).id),ne("q"),ne("/Pattern cs"),ne("/"+re+" scn"),ce.gState&&p.setGState(ce.gState),ne(F),ne("Q")}},Wu=function(v){switch(v){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ls=p.moveTo=function(v,F){return ne(N(S(v))+" "+N(se(F))+" m"),this},rs=p.lineTo=function(v,F){return ne(N(S(v))+" "+N(se(F))+" l"),this},Ds=p.curveTo=function(v,F,re,ce,me,Oe){return ne([N(S(v)),N(se(F)),N(S(re)),N(se(ce)),N(S(me)),N(se(Oe)),"c"].join(" ")),this};p.__private__.line=p.line=function(v,F,re,ce,me){if(isNaN(v)||isNaN(F)||isNaN(re)||isNaN(ce)||!gs(me))throw new Error("Invalid arguments passed to jsPDF.line");return M===L.COMPAT?this.lines([[re-v,ce-F]],v,F,[1,1],me||"S"):this.lines([[re-v,ce-F]],v,F,[1,1]).stroke()},p.__private__.lines=p.lines=function(v,F,re,ce,me,Oe){var Ye,dt,f,w,C,W,pe,Ie,Qe,Bt,Xt,Vt;if(typeof v=="number"&&(Vt=re,re=F,F=v,v=Vt),ce=ce||[1,1],Oe=Oe||!1,isNaN(F)||isNaN(re)||!Array.isArray(v)||!Array.isArray(ce)||!gs(me)||typeof Oe!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ls(F,re),Ye=ce[0],dt=ce[1],w=v.length,Bt=F,Xt=re,f=0;f<w;f++)(C=v[f]).length===2?(Bt=C[0]*Ye+Bt,Xt=C[1]*dt+Xt,rs(Bt,Xt)):(W=C[0]*Ye+Bt,pe=C[1]*dt+Xt,Ie=C[2]*Ye+Bt,Qe=C[3]*dt+Xt,Bt=C[4]*Ye+Bt,Xt=C[5]*dt+Xt,Ds(W,pe,Ie,Qe,Bt,Xt));return Oe&&ts(),Pc(me),this},p.path=function(v){for(var F=0;F<v.length;F++){var re=v[F],ce=re.c;switch(re.op){case"m":Ls(ce[0],ce[1]);break;case"l":rs(ce[0],ce[1]);break;case"c":Ds.apply(this,ce);break;case"h":ts()}}return this},p.__private__.rect=p.rect=function(v,F,re,ce,me){if(isNaN(v)||isNaN(F)||isNaN(re)||isNaN(ce)||!gs(me))throw new Error("Invalid arguments passed to jsPDF.rect");return M===L.COMPAT&&(ce=-ce),ne([N(S(v)),N(se(F)),N(S(re)),N(S(ce)),"re"].join(" ")),Pc(me),this},p.__private__.triangle=p.triangle=function(v,F,re,ce,me,Oe,Ye){if(isNaN(v)||isNaN(F)||isNaN(re)||isNaN(ce)||isNaN(me)||isNaN(Oe)||!gs(Ye))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[re-v,ce-F],[me-re,Oe-ce],[v-me,F-Oe]],v,F,[1,1],Ye,!0),this},p.__private__.roundedRect=p.roundedRect=function(v,F,re,ce,me,Oe,Ye){if(isNaN(v)||isNaN(F)||isNaN(re)||isNaN(ce)||isNaN(me)||isNaN(Oe)||!gs(Ye))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var dt=4/3*(Math.SQRT2-1);return me=Math.min(me,.5*re),Oe=Math.min(Oe,.5*ce),this.lines([[re-2*me,0],[me*dt,0,me,Oe-Oe*dt,me,Oe],[0,ce-2*Oe],[0,Oe*dt,-me*dt,Oe,-me,Oe],[2*me-re,0],[-me*dt,0,-me,-Oe*dt,-me,-Oe],[0,2*Oe-ce],[0,-Oe*dt,me*dt,-Oe,me,-Oe]],v+me,F,[1,1],Ye,!0),this},p.__private__.ellipse=p.ellipse=function(v,F,re,ce,me){if(isNaN(v)||isNaN(F)||isNaN(re)||isNaN(ce)||!gs(me))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Oe=4/3*(Math.SQRT2-1)*re,Ye=4/3*(Math.SQRT2-1)*ce;return Ls(v+re,F),Ds(v+re,F-Ye,v+Oe,F-ce,v,F-ce),Ds(v-Oe,F-ce,v-re,F-Ye,v-re,F),Ds(v-re,F+Ye,v-Oe,F+ce,v,F+ce),Ds(v+Oe,F+ce,v+re,F+Ye,v+re,F),Pc(me),this},p.__private__.circle=p.circle=function(v,F,re,ce){if(isNaN(v)||isNaN(F)||isNaN(re)||!gs(ce))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,F,re,re,ce)},p.setFont=function(v,F,re){return re&&(F=oe(F,re)),qt=Na(v,F,{disableWarning:!1}),this};var Nc=p.__private__.getFont=p.getFont=function(){return tr[Na.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var v,F,re={};for(v in Er)if(Er.hasOwnProperty(v))for(F in re[v]=[],Er[v])Er[v].hasOwnProperty(F)&&re[v].push(F);return re},p.addFont=function(v,F,re,ce,me){var Oe=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Oe.indexOf(arguments[3])!==-1?me=arguments[3]:arguments[3]&&Oe.indexOf(arguments[3])==-1&&(re=oe(re,ce)),me=me||"Identity-H",Ac.call(this,v,F,re,me)};var hr,Cc=r.lineWidth||.200025,wo=p.__private__.getLineWidth=p.getLineWidth=function(){return Cc},kc=p.__private__.setLineWidth=p.setLineWidth=function(v){return Cc=v,ne(N(S(v))+" w"),this};p.__private__.setLineDash=Dt.API.setLineDash=Dt.API.setLineDashPattern=function(v,F){if(v=v||[],F=F||0,isNaN(F)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(re){return N(S(re))}).join(" "),F=N(S(F)),ne("["+v+"] "+F+" d"),this};var Rc=p.__private__.getLineHeight=p.getLineHeight=function(){return rt*hr};p.__private__.getLineHeight=p.getLineHeight=function(){return rt*hr};var Lc=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(hr=v),this},ka=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return hr};Lc(r.lineHeight);var ns=p.__private__.getHorizontalCoordinate=function(v){return S(v)},An=p.__private__.getVerticalCoordinate=function(v){return M===L.ADVANCED?v:Nt[D].mediaBox.topRightY-Nt[D].mediaBox.bottomLeftY-S(v)},Hu=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(v){return N(ns(v))},ea=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(v){return N(An(v))},Wn=r.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Z(Wn)},p.__private__.setStrokeColor=p.setDrawColor=function(v,F,re,ce){return Wn=te({ch1:v,ch2:F,ch3:re,ch4:ce,pdfColorType:"draw",precision:2}),ne(Wn),this};var xo=r.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Z(xo)},p.__private__.setFillColor=p.setFillColor=function(v,F,re,ce){return xo=te({ch1:v,ch2:F,ch3:re,ch4:ce,pdfColorType:"fill",precision:2}),ne(xo),this};var Fs=r.textColor||"0 g",Eo=p.__private__.getTextColor=p.getTextColor=function(){return Z(Fs)};p.__private__.setTextColor=p.setTextColor=function(v,F,re,ce){return Fs=te({ch1:v,ch2:F,ch3:re,ch4:ce,pdfColorType:"text",precision:3}),this};var Ra=r.charSpace,To=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(Ra||0)};p.__private__.setCharSpace=p.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ra=v,this};var Dc=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Dc=F,ne(F+" J"),this};var bo=0;p.__private__.setLineJoin=p.setLineJoin=function(v){var F=p.CapJoinStyles[v];if(F===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return bo=F,ne(F+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(N(S(v))+" M"),this},p.GState=Ep,p.setGState=function(v){(v=typeof v=="string"?Tr[bn[v]]:ta(null,v)).equals(gi)||(ne("/"+v.id+" gs"),gi=v)};var ta=function(v,F){if(!v||!bn[v]){var re=!1;for(var ce in Tr)if(Tr.hasOwnProperty(ce)&&Tr[ce].equals(F)){re=!0;break}if(re)F=Tr[ce];else{var me="GS"+(Object.keys(Tr).length+1).toString(10);Tr[me]=F,F.id=me}return v&&(bn[v]=F.id),er.publish("addGState",F),F}};p.addGState=function(v,F){return ta(v,F),this},p.saveGraphicsState=function(){return ne("q"),Li.push({key:qt,size:rt,color:Fs}),this},p.restoreGraphicsState=function(){ne("Q");var v=Li.pop();return qt=v.key,rt=v.size,Fs=v.color,gi=null,this},p.setCurrentTransformationMatrix=function(v){return ne(v.toString()+" cm"),this},p.comment=function(v){return ne("#"+v),this};var La=function(v,F){var re=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return re},set:function(Oe){isNaN(Oe)||(re=parseFloat(Oe))}});var ce=F||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return ce},set:function(Oe){isNaN(Oe)||(ce=parseFloat(Oe))}});var me="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return me},set:function(Oe){me=Oe.toString()}}),this},Ao=function(v,F,re,ce){La.call(this,v,F),this.type="rect";var me=re||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return me},set:function(Ye){isNaN(Ye)||(me=parseFloat(Ye))}});var Oe=ce||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Oe},set:function(Ye){isNaN(Ye)||(Oe=parseFloat(Ye))}}),this},Da=function(){this.page=cr,this.currentPage=D,this.pages=Be.slice(0),this.pagesContext=Nt.slice(0),this.x=Dr,this.y=Gt,this.matrix=qn,this.width=ra(D),this.height=ai(D),this.outputDestination=Ze,this.id="",this.objectNumber=-1};Da.prototype.restore=function(){cr=this.page,D=this.currentPage,Nt=this.pagesContext,Be=this.pages,Dr=this.x,Gt=this.y,qn=this.matrix,So(D,this.width),Po(D,this.height),Ze=this.outputDestination};var Io=function(v,F,re,ce,me){vi.push(new Da),cr=D=0,Be=[],Dr=v,Gt=F,qn=me,yi([re,ce])},$u=function(v){if(kn[v])vi.pop().restore();else{var F=new Da,re="Xo"+(Object.keys(Kr).length+1).toString(10);F.id=re,kn[v]=re,Kr[re]=F,er.publish("addFormObject",F),vi.pop().restore()}};for(var Os in p.beginFormObject=function(v,F,re,ce,me){return Io(v,F,re,ce,me),this},p.endFormObject=function(v){return $u(v),this},p.doFormObject=function(v,F){var re=Kr[kn[v]];return ne("q"),ne(F.toString()+" cm"),ne("/"+re.id+" Do"),ne("Q"),this},p.getFormObject=function(v){var F=Kr[kn[v]];return{x:F.x,y:F.y,width:F.width,height:F.height,matrix:F.matrix}},p.save=function(v,F){return v=v||"generated.pdf",(F=F||{}).returnPromise=F.returnPromise||!1,F.returnPromise===!1?(Wc(mo(Rs()),v),typeof Wc.unload=="function"&&Ot.setTimeout&&setTimeout(Wc.unload,911),this):new Promise(function(re,ce){try{var me=Wc(mo(Rs()),v);typeof Wc.unload=="function"&&Ot.setTimeout&&setTimeout(Wc.unload,911),re(me)}catch(Oe){ce(Oe.message)}})},Dt.API)Dt.API.hasOwnProperty(Os)&&(Os==="events"&&Dt.API.events.length?function(v,F){var re,ce,me;for(me=F.length-1;me!==-1;me--)re=F[me][0],ce=F[me][1],v.subscribe.apply(v,[re].concat(typeof ce=="function"?[ce]:ce))}(er,Dt.API.events):p[Os]=Dt.API[Os]);var ra=p.getPageWidth=function(v){return(Nt[v=v||D].mediaBox.topRightX-Nt[v].mediaBox.bottomLeftX)/pt},So=p.setPageWidth=function(v,F){Nt[v].mediaBox.topRightX=F*pt+Nt[v].mediaBox.bottomLeftX},ai=p.getPageHeight=function(v){return(Nt[v=v||D].mediaBox.topRightY-Nt[v].mediaBox.bottomLeftY)/pt},Po=p.setPageHeight=function(v,F){Nt[v].mediaBox.topRightY=F*pt+Nt[v].mediaBox.bottomLeftY};return p.internal={pdfEscape:Xr,getStyle:zu,getFont:Nc,getFontSize:ut,getCharSpace:To,getTextColor:Eo,getLineHeight:Rc,getLineHeightFactor:ka,getLineWidth:wo,write:We,getHorizontalCoordinate:ns,getVerticalCoordinate:An,getCoordinateString:Hu,getVerticalCoordinateString:ea,collections:{},newObject:Hr,newAdditionalObject:ee,newObjectDeferred:Ur,newObjectDeferredBegin:j,getFilters:ye,putStream:ke,events:er,scaleFactor:pt,pageSize:{getWidth:function(){return ra(D)},setWidth:function(v){So(D,v)},getHeight:function(){return ai(D)},setHeight:function(v){Po(D,v)}},encryptionOptions:l,encryption:Or,getEncryptor:qu,output:go,getNumberOfPages:dr,pages:Be,out:ne,f2:V,f3:b,getPageInfo:Sc,getPageInfoByObjId:Mt,getCurrentPageInfo:Zs,getPDFVersion:_,Point:La,Rectangle:Ao,Matrix:wt,hasHotfix:Qs},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return ra(D)},set:function(v){So(D,v)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return ai(D)},set:function(v){Po(D,v)},enumerable:!0,configurable:!0}),Uu.call(p,$e),qt="F1",Pa(i,t),er.publish("initialized"),p}Tl.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},Tl.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Tl.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},Tl.prototype.processOwnerPassword=function(r,e){return b1(T1(e).substr(0,5),r)},Tl.prototype.encryptor=function(r,e){var t=T1(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return b1(t,n)}},Ep.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||wr(r)!==wr(this))return!1;var n=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;n++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&n--;return n===0},Dt.API={events:[]},Dt.version="2.5.2";var Qr=Dt.API,Gv=1,Bu=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ml=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Ut=function(r){return r.toFixed(2)},$o=function(r){return r.toFixed(5)};Qr.__acroform__={};var Ji=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},A5=function(r){return r*Gv},ca=function(r){var e=new pS,t=Et.internal.getHeight(r)||0,n=Et.internal.getWidth(r)||0;return e.BBox=[0,0,Number(Ut(n)),Number(Ut(t))],e},iW=Qr.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},sW=Qr.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},aW=Qr.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},un=Qr.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return aW(r,e-1)},ln=Qr.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return iW(r,e-1)},hn=Qr.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return sW(r,e-1)},oW=Qr.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,i=r[0],s=r[1],a=r[2],o=r[3],c={};return c.lowerLeft_X=t(i)||0,c.lowerLeft_Y=n(s+o)||0,c.upperRight_X=t(i+a)||0,c.upperRight_Y=n(s)||0,[Number(Ut(c.lowerLeft_X)),Number(Ut(c.lowerLeft_Y)),Number(Ut(c.upperRight_X)),Number(Ut(c.upperRight_Y))]},cW=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,n=A1(r,t),i=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+i+" "+Ut(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=ca(r);return s.scope=r.scope,s.stream=e.join(`
`),s}},A1=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,n={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=r.multiline?i.map(function(b){return b.split(`
`)}):i.map(function(b){return[b]});var s=t,a=Et.internal.getHeight(r)||0;a=a<0?-a:a;var o=Et.internal.getWidth(r)||0;o=o<0?-o:o;var c=function(b,S,R){if(b+1<i.length){var se=S+" "+i[b+1][0];return v0(se,r,R).width<=o-4}return!1};s++;e:for(;s>0;){e="",s--;var u,l,d=v0("3",r,s).height,g=r.multiline?a-s:(a-d)/2,p=g+=2,x=0,_=0,E=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+v0(e,r,s=12).width+", FieldWidth:"+o+`
`;break}for(var P="",L=0,M=0;M<i.length;M++)if(i.hasOwnProperty(M)){var K=!1;if(i[M].length!==1&&E!==i[M].length-1){if((d+2)*(L+2)+2>a)continue e;P+=i[M][E],K=!0,_=M,M--}else{P=(P+=i[M][E]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var ie=parseInt(M),oe=c(ie,P,s),N=M>=i.length-1;if(oe&&!N){P+=" ",E=0;continue}if(oe||N){if(N)_=ie;else if(r.multiline&&(d+2)*(L+2)+2>a)continue e}else{if(!r.multiline||(d+2)*(L+2)+2>a)continue e;_=ie}}for(var A="",k=x;k<=_;k++){var V=i[k];if(r.multiline){if(k===_){A+=V[E]+" ",E=(E+1)%V.length;continue}if(k===x){A+=V[V.length-1]+" ";continue}}A+=V[0]+" "}switch(A=A.substr(A.length-1)==" "?A.substr(0,A.length-1):A,l=v0(A,r,s).width,r.textAlign){case"right":u=o-l-2;break;case"center":u=(o-l)/2;break;case"left":default:u=2}e+=Ut(u)+" "+Ut(p)+` Td
`,e+="("+Bu(A)+`) Tj
`,e+=-Ut(u)+` 0 Td
`,p=-(s+2),l=0,x=K?_:_+1,L++,P=""}break}return n.text=e,n.fontSize=s,n},v0=function(r,e,t){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(r,{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},uW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lW=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(n){return n.type===t.type&&n.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},hW=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var n=t,i=r[t];e.internal.newObjectDeferredBegin(i.objId,!0),wr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete r[n]}},fW=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(Xs.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(uW)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Gv=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new mS,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i];s.objId=void 0,s.hasAnnotation&&lW(s,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(n,i){var s=!n;for(var a in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(a)){var o=n[a],c=[],u=o.Rect;if(o.Rect&&(o.Rect=oW(o.Rect,i)),i.internal.newObjectDeferredBegin(o.objId,!0),o.DA=Et.createDefaultAppearanceStream(o),wr(o)==="object"&&typeof o.getKeyValueListForStream=="function"&&(c=o.getKeyValueListForStream()),o.Rect=u,o.hasAppearanceStream&&!o.appearanceStreamContent){var l=cW(o);c.push({key:"AP",value:"<</N "+l+">>"}),i.internal.acroformPlugin.xForms.push(l)}if(o.appearanceStreamContent){var d="";for(var g in o.appearanceStreamContent)if(o.appearanceStreamContent.hasOwnProperty(g)){var p=o.appearanceStreamContent[g];if(d+="/"+g+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var a in p)if(p.hasOwnProperty(a)){var x=p[a];typeof x=="function"&&(x=x.call(i,o)),d+="/"+a+" "+x+" ",i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x)}}else typeof(x=p)=="function"&&(x=x.call(i,o)),d+="/"+a+" "+x,i.internal.acroformPlugin.xForms.indexOf(x)>=0||i.internal.acroformPlugin.xForms.push(x);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}i.internal.putStream({additionalKeyValues:c,objectId:o.objId}),i.internal.out("endobj")}s&&hW(i.internal.acroformPlugin.xForms,i)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},dS=Qr.__acroform__.arrayToPdfArray=function(r,e,t){var n=function(a){return a};if(Array.isArray(r)){for(var i="[",s=0;s<r.length;s++)switch(s!==0&&(i+=" "),wr(r[s])){case"boolean":case"number":case"object":i+=r[s].toString();break;case"string":r[s].substr(0,1)!=="/"?(e!==void 0&&t&&(n=t.internal.getEncryptor(e)),i+="("+Bu(n(r[s].toString()))+")"):i+=r[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Ag=function(r,e,t){var n=function(i){return i};return e!==void 0&&t&&(n=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+Bu(n(r))+")"},ga=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ga.prototype.toString=function(){return this.objId+" 0 R"},ga.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ga.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var n=e[t],i=this[n];i&&(Array.isArray(i)?r.push({key:n,value:dS(i,this.objId,this.scope)}):i instanceof ga?(i.scope=this.scope,r.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&r.push({key:n,value:i}))}return r};var pS=function(){ga.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};Ji(pS,ga);var mS=function(){ga.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(n){return n};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Bu(t(r))+")"}},set:function(t){r=t}})};Ji(mS,ga);var Xs=function r(){ga.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');e=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!un(e,3)},set:function(P){P?this.F=ln(e,3):this.F=hn(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');t=P}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(P){n=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(P){n[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(P){n[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(P){n[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(P){n[3]=P}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Tp)return;s="FieldObject"+r.FieldNum++}var P=function(L){return L};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Bu(P(s))+")"},set:function(P){s=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(P){s=P}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var o="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return o},set:function(P){o=P}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(P){c=P}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/Gv:u},set:function(P){u=P}});var l="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return l},set:function(P){l=P}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof Tp||this instanceof au))return Ag(d,this.objId,this.scope)},set:function(P){P=P.toString(),d=P}});var g=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(g)return this instanceof On?g:Ag(g,this.objId,this.scope)},set:function(P){P=P.toString(),g=this instanceof On?P:P.substr(0,1)==="("?ml(P.substr(1,P.length-2)):ml(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof On?ml(g.substr(1,g.length-1)):g},set:function(P){P=P.toString(),g=this instanceof On?"/"+P:P}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof On?p:Ag(p,this.objId,this.scope)},set:function(P){P=P.toString(),p=this instanceof On?P:P.substr(0,1)==="("?ml(P.substr(1,P.length-2)):ml(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof On?ml(p.substr(1,p.length-1)):p},set:function(P){P=P.toString(),p=this instanceof On?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var x,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(P){P=!!P,_=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(x)return x},set:function(P){x=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,1)},set:function(P){P?this.Ff=ln(this.Ff,1):this.Ff=hn(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,2)},set:function(P){P?this.Ff=ln(this.Ff,2):this.Ff=hn(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,3)},set:function(P){P?this.Ff=ln(this.Ff,3):this.Ff=hn(this.Ff,3)}});var E=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(E!==null)return E},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');E=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(E){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:E=2;break;case"center":case 1:E=1;break;case"left":case 0:default:E=0}}})};Ji(Xs,ga);var Ul=function(){Xs.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dS(e,this.objId,this.scope)},set:function(t){var n,i;i=[],typeof(n=t)=="string"&&(i=function(s,a,o){o||(o=1);for(var c,u=[];c=a.exec(s);)u.push(c[o]);return u}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,18)},set:function(t){t?this.Ff=ln(this.Ff,18):this.Ff=hn(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=ln(this.Ff,19):this.Ff=hn(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,20)},set:function(t){t?(this.Ff=ln(this.Ff,20),e.sort()):this.Ff=hn(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,22)},set:function(t){t?this.Ff=ln(this.Ff,22):this.Ff=hn(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,23)},set:function(t){t?this.Ff=ln(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,27)},set:function(t){t?this.Ff=ln(this.Ff,27):this.Ff=hn(this.Ff,27)}}),this.hasAppearanceStream=!1};Ji(Ul,Xs);var jl=function(){Ul.call(this),this.fontName="helvetica",this.combo=!1};Ji(jl,Ul);var ql=function(){jl.call(this),this.combo=!0};Ji(ql,jl);var R0=function(){ql.call(this),this.edit=!0};Ji(R0,ql);var On=function(){Xs.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,15)},set:function(t){t?this.Ff=ln(this.Ff,15):this.Ff=hn(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,16)},set:function(t){t?this.Ff=ln(this.Ff,16):this.Ff=hn(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,17)},set:function(t){t?this.Ff=ln(this.Ff,17):this.Ff=hn(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,26)},set:function(t){t?this.Ff=ln(this.Ff,26):this.Ff=hn(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+Bu(t(e[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){wr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};Ji(On,Xs);var L0=function(){On.call(this),this.pushButton=!0};Ji(L0,On);var zl=function(){On.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};Ji(zl,On);var Tp=function(){var r,e;Xs.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(o){return o};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,a=[];for(s in a.push("<<"),n)a.push("/"+s+" ("+Bu(i(n[s]))+")");return a.push(">>"),a.join(`
`)},set:function(i){wr(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Et.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ji(Tp,Xs),zl.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},zl.prototype.createOption=function(r){var e=new Tp;return e.Parent=this,e.optionName=r,this.Kids.push(e),dW.call(this.scope,e),e};var D0=function(){On.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Et.CheckBox.createAppearanceStream()};Ji(D0,On);var au=function(){Xs.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,13)},set:function(e){e?this.Ff=ln(this.Ff,13):this.Ff=hn(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,21)},set:function(e){e?this.Ff=ln(this.Ff,21):this.Ff=hn(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,23)},set:function(e){e?this.Ff=ln(this.Ff,23):this.Ff=hn(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,24)},set:function(e){e?this.Ff=ln(this.Ff,24):this.Ff=hn(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,25)},set:function(e){e?this.Ff=ln(this.Ff,25):this.Ff=hn(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,26)},set:function(e){e?this.Ff=ln(this.Ff,26):this.Ff=hn(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ji(au,Xs);var F0=function(){au.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!un(this.Ff,14)},set:function(r){r?this.Ff=ln(this.Ff,14):this.Ff=hn(this.Ff,14)}}),this.password=!0};Ji(F0,au);var Et={CheckBox:{createAppearanceStream:function(){return{N:{On:Et.CheckBox.YesNormal},D:{On:Et.CheckBox.YesPushDown,Off:Et.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=r.scope.internal.getFont(r.fontName,r.fontStyle).id,i=r.scope.__private__.encodeColorString(r.color),s=A1(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(r))+" "+Ut(Et.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+n+" "+Ut(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=ca(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,n=r.scope.__private__.encodeColorString(r.color),i=[],s=Et.internal.getHeight(r),a=Et.internal.getWidth(r),o=A1(r,r.caption);return i.push("1 g"),i.push("0 0 "+Ut(a)+" "+Ut(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Ut(a-1)+" "+Ut(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Ut(o.fontSize)+" Tf "+n),i.push(o.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(r))+" "+Ut(Et.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:Et.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=Et.RadioButton.Circle.YesNormal,e.D[r]=Et.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Et.internal.getWidth(r)<=Et.internal.getHeight(r)?Et.internal.getWidth(r)/4:Et.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Et.internal.Bezier_C,s=Number((n*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(r)/2)+" "+$o(Et.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+s+" "+s+" "+n+" 0 "+n+" c"),t.push("-"+s+" "+n+" -"+n+" "+s+" -"+n+" 0 c"),t.push("-"+n+" -"+s+" -"+s+" -"+n+" 0 -"+n+" c"),t.push(s+" -"+n+" "+n+" -"+s+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Et.internal.getWidth(r)<=Et.internal.getHeight(r)?Et.internal.getWidth(r)/4:Et.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Et.internal.Bezier_C).toFixed(5)),a=Number((n*Et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(r)/2)+" "+$o(Et.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(r)/2)+" "+$o(Et.internal.getHeight(r)/2)+" cm"),t.push(n+" 0 m"),t.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),t.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),t.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),t.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Et.internal.getWidth(r)<=Et.internal.getHeight(r)?Et.internal.getWidth(r)/4:Et.internal.getHeight(r)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),s=Number((i*Et.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+$o(Et.internal.getWidth(r)/2)+" "+$o(Et.internal.getHeight(r)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:Et.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=Et.RadioButton.Cross.YesNormal,e.D[r]=Et.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=ca(r);e.scope=r.scope;var t=[],n=Et.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+Ut(Et.internal.getWidth(r)-2)+" "+Ut(Et.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(Ut(n.x1.x)+" "+Ut(n.x1.y)+" m"),t.push(Ut(n.x2.x)+" "+Ut(n.x2.y)+" l"),t.push(Ut(n.x4.x)+" "+Ut(n.x4.y)+" m"),t.push(Ut(n.x3.x)+" "+Ut(n.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=Et.internal.calculateCross(r),n=[];return n.push("0.749023 g"),n.push("0 0 "+Ut(Et.internal.getWidth(r))+" "+Ut(Et.internal.getHeight(r))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Ut(Et.internal.getWidth(r)-2)+" "+Ut(Et.internal.getHeight(r)-2)+" re"),n.push("W"),n.push("n"),n.push(Ut(t.x1.x)+" "+Ut(t.x1.y)+" m"),n.push(Ut(t.x2.x)+" "+Ut(t.x2.y)+" l"),n.push(Ut(t.x4.x)+" "+Ut(t.x4.y)+" m"),n.push(Ut(t.x3.x)+" "+Ut(t.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(r){var e=ca(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Ut(Et.internal.getWidth(r))+" "+Ut(Et.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};Et.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=Et.internal.getWidth(r),t=Et.internal.getHeight(r),n=Math.min(e,t);return{x1:{x:(e-n)/2,y:(t-n)/2+n},x2:{x:(e-n)/2+n,y:(t-n)/2},x3:{x:(e-n)/2,y:(t-n)/2},x4:{x:(e-n)/2+n,y:(t-n)/2+n}}}},Et.internal.getWidth=function(r){var e=0;return wr(r)==="object"&&(e=A5(r.Rect[2])),e},Et.internal.getHeight=function(r){var e=0;return wr(r)==="object"&&(e=A5(r.Rect[3])),e};var dW=Qr.addField=function(r){if(fW(this,r),!(r instanceof Xs))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};Qr.AcroFormChoiceField=Ul,Qr.AcroFormListBox=jl,Qr.AcroFormComboBox=ql,Qr.AcroFormEditBox=R0,Qr.AcroFormButton=On,Qr.AcroFormPushButton=L0,Qr.AcroFormRadioButton=zl,Qr.AcroFormCheckBox=D0,Qr.AcroFormTextField=au,Qr.AcroFormPasswordField=F0,Qr.AcroFormAppearance=Et,Qr.AcroForm={ChoiceField:Ul,ListBox:jl,ComboBox:ql,EditBox:R0,Button:On,PushButton:L0,RadioButton:zl,CheckBox:D0,TextField:au,PasswordField:F0,Appearance:Et},Dt.AcroForm={ChoiceField:Ul,ListBox:jl,ComboBox:ql,EditBox:R0,Button:On,PushButton:L0,RadioButton:zl,CheckBox:D0,TextField:au,PasswordField:F0,Appearance:Et};Dt.AcroForm;function gS(r){return r.reduce(function(e,t,n){return e[t]=n,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=r.__addimage__.getImageFileTypeByImageData=function(b,S){var R,se,ve,Ee,Ne,_e=e;if((S=S||e)==="RGBA"||b.data!==void 0&&b.data instanceof Uint8ClampedArray&&"height"in b&&"width"in b)return"RGBA";if(oe(b))for(Ne in t)for(ve=t[Ne],R=0;R<ve.length;R+=1){for(Ee=!0,se=0;se<ve[R].length;se+=1)if(ve[R][se]!==void 0&&ve[R][se]!==b[se]){Ee=!1;break}if(Ee===!0){_e=Ne;break}}else for(Ne in t)for(ve=t[Ne],R=0;R<ve.length;R+=1){for(Ee=!0,se=0;se<ve[R].length;se+=1)if(ve[R][se]!==void 0&&ve[R][se]!==b.charCodeAt(se)){Ee=!1;break}if(Ee===!0){_e=Ne;break}}return _e===e&&S!==e&&(_e=S),_e},i=function b(S){for(var R=this.internal.write,se=this.internal.putStream,ve=(0,this.internal.getFilters)();ve.indexOf("FlateEncode")!==-1;)ve.splice(ve.indexOf("FlateEncode"),1);S.objectId=this.internal.newObject();var Ee=[];if(Ee.push({key:"Type",value:"/XObject"}),Ee.push({key:"Subtype",value:"/Image"}),Ee.push({key:"Width",value:S.width}),Ee.push({key:"Height",value:S.height}),S.colorSpace===E.INDEXED?Ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(S.palette.length/3-1)+" "+("sMask"in S&&S.sMask!==void 0?S.objectId+2:S.objectId+1)+" 0 R]"}):(Ee.push({key:"ColorSpace",value:"/"+S.colorSpace}),S.colorSpace===E.DEVICE_CMYK&&Ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ee.push({key:"BitsPerComponent",value:S.bitsPerComponent}),"decodeParameters"in S&&S.decodeParameters!==void 0&&Ee.push({key:"DecodeParms",value:"<<"+S.decodeParameters+">>"}),"transparency"in S&&Array.isArray(S.transparency)){for(var Ne="",_e=0,Ce=S.transparency.length;_e<Ce;_e++)Ne+=S.transparency[_e]+" "+S.transparency[_e]+" ";Ee.push({key:"Mask",value:"["+Ne+"]"})}S.sMask!==void 0&&Ee.push({key:"SMask",value:S.objectId+1+" 0 R"});var Fe=S.filter!==void 0?["/"+S.filter]:void 0;if(se({data:S.data,additionalKeyValues:Ee,alreadyAppliedFilters:Fe,objectId:S.objectId}),R("endobj"),"sMask"in S&&S.sMask!==void 0){var nt="/Predictor "+S.predictor+" /Colors 1 /BitsPerComponent "+S.bitsPerComponent+" /Columns "+S.width,T={width:S.width,height:S.height,colorSpace:"DeviceGray",bitsPerComponent:S.bitsPerComponent,decodeParameters:nt,data:S.sMask};"filter"in S&&(T.filter=S.filter),b.call(this,T)}if(S.colorSpace===E.INDEXED){var D=this.internal.newObject();se({data:A(new Uint8Array(S.palette)),objectId:D}),R("endobj")}},s=function(){var b=this.internal.collections.addImage_images;for(var S in b)i.call(this,b[S])},a=function(){var b,S=this.internal.collections.addImage_images,R=this.internal.write;for(var se in S)R("/I"+(b=S[se]).index,b.objectId,"0","R")},o=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var b=this.internal.collections.addImage_images;return o.call(this),b},u=function(){return Object.keys(this.internal.collections.addImage_images).length},l=function(b){return typeof r["process"+b.toUpperCase()]=="function"},d=function(b){return wr(b)==="object"&&b.nodeType===1},g=function(b,S){if(b.nodeName==="IMG"&&b.hasAttribute("src")){var R=""+b.getAttribute("src");if(R.indexOf("data:image/")===0)return Af(unescape(R).split("base64,").pop());var se=r.loadFile(R,!0);if(se!==void 0)return se}if(b.nodeName==="CANVAS"){if(b.width===0||b.height===0)throw new Error("Given canvas must have data. Canvas width: "+b.width+", height: "+b.height);var ve;switch(S){case"PNG":ve="image/png";break;case"WEBP":ve="image/webp";break;case"JPEG":case"JPG":default:ve="image/jpeg"}return Af(b.toDataURL(ve,1).split("base64,").pop())}},p=function(b){var S=this.internal.collections.addImage_images;if(S){for(var R in S)if(b===S[R].alias)return S[R]}},x=function(b,S,R){return b||S||(b=-96,S=-96),b<0&&(b=-1*R.width*72/b/this.internal.scaleFactor),S<0&&(S=-1*R.height*72/S/this.internal.scaleFactor),b===0&&(b=S*R.width/R.height),S===0&&(S=b*R.height/R.width),[b,S]},_=function(b,S,R,se,ve,Ee){var Ne=x.call(this,R,se,ve),_e=this.internal.getCoordinateString,Ce=this.internal.getVerticalCoordinateString,Fe=c.call(this);if(R=Ne[0],se=Ne[1],Fe[ve.index]=ve,Ee){Ee*=Math.PI/180;var nt=Math.cos(Ee),T=Math.sin(Ee),D=function(U){return U.toFixed(4)},B=[D(nt),D(T),D(-1*T),D(nt),0,0,"cm"]}this.internal.write("q"),Ee?(this.internal.write([1,"0","0",1,_e(b),Ce(S+se),"cm"].join(" ")),this.internal.write(B.join(" ")),this.internal.write([_e(R),"0","0",_e(se),"0","0","cm"].join(" "))):this.internal.write([_e(R),"0","0",_e(se),_e(b),Ce(S+se),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ve.index+" Do"),this.internal.write("Q")},E=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},L=r.__addimage__.sHashCode=function(b){var S,R,se=0;if(typeof b=="string")for(R=b.length,S=0;S<R;S++)se=(se<<5)-se+b.charCodeAt(S),se|=0;else if(oe(b))for(R=b.byteLength/2,S=0;S<R;S++)se=(se<<5)-se+b[S],se|=0;return se},M=r.__addimage__.validateStringAsBase64=function(b){(b=b||"").toString().trim();var S=!0;return b.length===0&&(S=!1),b.length%4!=0&&(S=!1),/^[A-Za-z0-9+/]+$/.test(b.substr(0,b.length-2))===!1&&(S=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(b.substr(-2))===!1&&(S=!1),S},K=r.__addimage__.extractImageFromDataUrl=function(b){var S=(b=b||"").split("base64,"),R=null;if(S.length===2){var se=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(S[0]);Array.isArray(se)&&(R={mimeType:se[1],charset:se[2],data:S[1]})}return R},ie=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(b){return ie()&&b instanceof ArrayBuffer};var oe=r.__addimage__.isArrayBufferView=function(b){return ie()&&typeof Uint32Array<"u"&&(b instanceof Int8Array||b instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&b instanceof Uint8ClampedArray||b instanceof Int16Array||b instanceof Uint16Array||b instanceof Int32Array||b instanceof Uint32Array||b instanceof Float32Array||b instanceof Float64Array)},N=r.__addimage__.binaryStringToUint8Array=function(b){for(var S=b.length,R=new Uint8Array(S),se=0;se<S;se++)R[se]=b.charCodeAt(se);return R},A=r.__addimage__.arrayBufferToBinaryString=function(b){for(var S="",R=oe(b)?b:new Uint8Array(b),se=0;se<R.length;se+=8192)S+=String.fromCharCode.apply(null,R.subarray(se,se+8192));return S};r.addImage=function(){var b,S,R,se,ve,Ee,Ne,_e,Ce;if(typeof arguments[1]=="number"?(S=e,R=arguments[1],se=arguments[2],ve=arguments[3],Ee=arguments[4],Ne=arguments[5],_e=arguments[6],Ce=arguments[7]):(S=arguments[1],R=arguments[2],se=arguments[3],ve=arguments[4],Ee=arguments[5],Ne=arguments[6],_e=arguments[7],Ce=arguments[8]),wr(b=arguments[0])==="object"&&!d(b)&&"imageData"in b){var Fe=b;b=Fe.imageData,S=Fe.format||S||e,R=Fe.x||R||0,se=Fe.y||se||0,ve=Fe.w||Fe.width||ve,Ee=Fe.h||Fe.height||Ee,Ne=Fe.alias||Ne,_e=Fe.compression||_e,Ce=Fe.rotation||Fe.angle||Ce}var nt=this.internal.getFilters();if(_e===void 0&&nt.indexOf("FlateEncode")!==-1&&(_e="SLOW"),isNaN(R)||isNaN(se))throw new Error("Invalid coordinates passed to jsPDF.addImage");o.call(this);var T=k.call(this,b,S,Ne,_e);return _.call(this,R,se,ve,Ee,T,Ce),this};var k=function(b,S,R,se){var ve,Ee,Ne;if(typeof b=="string"&&n(b)===e){b=unescape(b);var _e=V(b,!1);(_e!==""||(_e=r.loadFile(b,!0))!==void 0)&&(b=_e)}if(d(b)&&(b=g(b,S)),S=n(b,S),!l(S))throw new Error("addImage does not support files of type '"+S+"', please ensure that a plugin for '"+S+"' support is added.");if(((Ne=R)==null||Ne.length===0)&&(R=function(Ce){return typeof Ce=="string"||oe(Ce)?L(Ce):oe(Ce.data)?L(Ce.data):null}(b)),(ve=p.call(this,R))||(ie()&&(b instanceof Uint8Array||S==="RGBA"||(Ee=b,b=N(b))),ve=this["process"+S.toUpperCase()](b,u.call(this),R,function(Ce){return Ce&&typeof Ce=="string"&&(Ce=Ce.toUpperCase()),Ce in r.image_compression?Ce:P.NONE}(se),Ee)),!ve)throw new Error("An unknown error occurred whilst processing the image.");return ve},V=r.__addimage__.convertBase64ToBinaryString=function(b,S){var R;S=typeof S!="boolean"||S;var se,ve="";if(typeof b=="string"){se=(R=K(b))!==null?R.data:b;try{ve=Af(se)}catch(Ee){if(S)throw M(se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ve};r.getImageProperties=function(b){var S,R,se="";if(d(b)&&(b=g(b)),typeof b=="string"&&n(b)===e&&((se=V(b,!1))===""&&(se=r.loadFile(b)||""),b=se),R=n(b),!l(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!ie()||b instanceof Uint8Array||(b=N(b)),!(S=this["process"+R.toUpperCase()](b)))throw new Error("An unknown error occurred whilst processing the image");return S.fileType=R,S}})(Dt.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};Dt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var n,i,s,a=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,l=!1,d=0;d<u.length&&!l;d++)switch((n=u[d]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(l!=0){this.internal.write("/Annots [");for(var g=0;g<u.length;g++){n=u[g];var p=this.internal.pdfEscape,x=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),E=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(_.objId),L=n.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+p(P(n.contents))+")",s+=" /Popup "+E.objId+" 0 R",s+=" /P "+c.objId+" 0 R",s+=" /T ("+p(P(L))+") >>",_.content=s;var M=_.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+a(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+a(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+M,n.open&&(s+=" /Open true"),s+=" >>",E.content=s,this.internal.write(_.objId,"0 R",E.objId,"0 R");break;case"freetext":i="/Rect ["+a(n.bounds.x)+" "+o(n.bounds.y)+" "+a(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var K=n.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+p(x(n.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(n.options.name){var ie=this.annotations._nameMap[n.options.name];n.options.pageNumber=ie.page,n.options.top=ie.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",s="",n.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+p(x(n.options.url))+") >>";else if(n.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,s+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var oe=o(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),s+=" /XYZ "+n.options.left+" "+oe+" "+n.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var n=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":n.pageContext.annotations.push(t)}},r.link=function(t,n,i,s,a){var o=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;o.pageContext.annotations.push({finalBounds:{x:c(t),y:u(n),w:c(t+i),h:u(n+s)},options:a,type:"link"})},r.textWithLink=function(t,n,i,s){var a,o,c=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){o=s.maxWidth;var l=this.splitTextToSize(t,o).length;a=Math.ceil(u*l)}else o=c,a=u;return this.text(t,n,i,s),i+=.2*u,s.align==="center"&&(n-=c/2),s.align==="right"&&(n-=c),this.link(n,i-u,o,a,s),c},r.getTextWidth=function(t){var n=this.internal.getFontSize();return this.getStringUnitWidth(t)*n/this.internal.scaleFactor}}(Dt.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];r.__arabicParser__={};var s=r.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},a=r.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},o=r.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length<=2},c=r.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&i.indexOf(_.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=1};var u=r.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length>=3};var l=r.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&s(_)&&e[_.charCodeAt(0)].length==4},d=r.__arabicParser__.resolveLigatures=function(_){var E=0,P=t,L="",M=0;for(E=0;E<_.length;E+=1)P[_.charCodeAt(E)]!==void 0?(M++,typeof(P=P[_.charCodeAt(E)])=="number"&&(L+=String.fromCharCode(P),P=t,M=0),E===_.length-1&&(P=t,L+=_.charAt(E-(M-1)),E-=M-1,M=0)):(P=t,L+=_.charAt(E-M),E-=M,M=0);return L};r.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&n[_.charCodeAt(0)]!==void 0};var g=r.__arabicParser__.getCorrectForm=function(_,E,P){return a(_)?s(_)===!1?-1:!u(_)||!a(E)&&!a(P)||!a(P)&&o(E)||o(_)&&!a(E)||o(_)&&c(E)||o(_)&&o(E)?0:l(_)&&a(E)&&!o(E)&&a(P)&&u(P)?3:o(_)||!a(P)?1:2:-1},p=function(_){var E=0,P=0,L=0,M="",K="",ie="",oe=(_=_||"").split("\\s+"),N=[];for(E=0;E<oe.length;E+=1){for(N.push(""),P=0;P<oe[E].length;P+=1)M=oe[E][P],K=oe[E][P-1],ie=oe[E][P+1],a(M)?(L=g(M,K,ie),N[E]+=L!==-1?String.fromCharCode(e[M.charCodeAt(0)][L]):M):N[E]+=M;N[E]=d(N[E])}return N.join(" ")},x=r.__arabicParser__.processArabic=r.processArabic=function(){var _,E=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(E)){var L=0;for(P=[],L=0;L<E.length;L+=1)Array.isArray(E[L])?P.push([p(E[L][0]),E[L][1],E[L][2]]):P.push([p(E[L])]);_=P}else _=p(E);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};r.events.push(["preProcessText",x])}(Dt.API),Dt.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(o){t=o}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(o){n=isNaN(o)||Number.isInteger(o)===!1||o<0?150:o,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(o){i=isNaN(o)||Number.isInteger(o)===!1||o<0?300:o,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(o){s=o}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(o){a=o}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,n){var i;if((t=t||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(Dt.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(_){u=_}});var l=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return l},set:function(_){l=_}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var g=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(_){p=_}});var x=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return x},set:function(_){x=_}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},r.getTextDimensions=function(c,u){n.call(this);var l=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),g=u.scaleFactor||this.internal.scaleFactor,p=0,x=0,_=0,E=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var P=u.maxWidth;P>0?typeof c=="string"?c=this.splitTextToSize(c,P):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(M,K){return M.concat(E.splitTextToSize(K,P))},[])):c=Array.isArray(c)?c:[c];for(var L=0;L<c.length;L++)p<(_=this.getStringUnitWidth(c[L],{font:d})*l)&&(p=_);return p!==0&&(x=c.length),{w:p/=g,h:Math.max((x*l*this.getLineHeightFactor()-l*(this.getLineHeightFactor()-1))/g,0)}},r.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=r.cell=function(){var c;c=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,l=this.internal.__cell__.padding,d=this.internal.__cell__.margins||e,g=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&g&&(this.printHeaderRow(c.lineNumber,!0),c.y+=g[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-l,c.y+l,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+l,{align:"center",baseline:"top",maxWidth:c.width-l-l}):this.text(c.text,c.x+l,c.y+l,{align:"left",baseline:"top",maxWidth:c.width-l-l})),this.internal.__cell__.lastCell=c,this};r.table=function(c,u,l,d,g){if(n.call(this),!l)throw new Error("No data for PDF table.");var p,x,_,E,P=[],L=[],M=[],K={},ie={},oe=[],N=[],A=(g=g||{}).autoSize||!1,k=g.printHeaders!==!1,V=g.css&&g.css["font-size"]!==void 0?16*g.css["font-size"]:g.fontSize||12,b=g.margins||Object.assign({width:this.getPageWidth()},e),S=typeof g.padding=="number"?g.padding:3,R=g.headerBackgroundColor||"#c8c8c8",se=g.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=b,this.internal.__cell__.table_font_size=V,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=se,this.setFontSize(V),d==null)L=P=Object.keys(l[0]),M=P.map(function(){return"left"});else if(Array.isArray(d)&&wr(d[0])==="object")for(P=d.map(function(Fe){return Fe.name}),L=d.map(function(Fe){return Fe.prompt||Fe.name||""}),M=d.map(function(Fe){return Fe.align||"left"}),p=0;p<d.length;p+=1)ie[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(L=P=d,M=P.map(function(){return"left"}));if(A||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<P.length;p+=1){for(K[E=P[p]]=l.map(function(Fe){return Fe[E]}),this.setFont(void 0,"bold"),oe.push(this.getTextDimensions(L[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),x=K[E],this.setFont(void 0,"normal"),_=0;_<x.length;_+=1)oe.push(this.getTextDimensions(x[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ie[E]=Math.max.apply(null,oe)+S+S,oe=[]}if(k){var ve={};for(p=0;p<P.length;p+=1)ve[P[p]]={},ve[P[p]].text=L[p],ve[P[p]].align=M[p];var Ee=o.call(this,ve,ie);N=P.map(function(Fe){return new s(c,u,ie[Fe],Ee,ve[Fe].text,void 0,ve[Fe].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var Ne=d.reduce(function(Fe,nt){return Fe[nt.name]=nt.align,Fe},{});for(p=0;p<l.length;p+=1){"rowStart"in g&&g.rowStart instanceof Function&&g.rowStart({row:p,data:l[p]},this);var _e=o.call(this,l[p],ie);for(_=0;_<P.length;_+=1){var Ce=l[p][P[_]];"cellStart"in g&&g.cellStart instanceof Function&&g.cellStart({row:p,col:_,data:Ce},this),a.call(this,new s(c,u,ie[P[_]],_e,Ce,p+2,Ne[P[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var o=function(c,u){var l=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,g=this.internal.scaleFactor;return Object.keys(c).map(function(p){var x=c[p];return this.splitTextToSize(x.hasOwnProperty("text")?x.text:x,u[p]-l-l)},this).map(function(p){return this.getLineHeightFactor()*p.length*d/g+l+l},this).reduce(function(p,x){return Math.max(p,x)},0)};r.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},r.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var l;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var g=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){l=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(l.y=this.internal.__cell__.margins.top||0,g.push(l)),l.lineNumber=c;var x=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,l),this.setTextColor(x)}g.length>0&&this.setTableHeaderRow(g),this.setFont(void 0,"normal"),t=!1}}(Dt.API);var vS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},_S=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],I1=gS(_S),yS=[100,200,300,400,500,600,700,800,900],pW=gS(yS);function S1(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return vS[s=s||"normal"]?s:"normal"}(r.style),n=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(r.weight),i=function(s){return typeof I1[s=s||"normal"]=="number"?s:"normal"}(r.stretch);return{family:e,style:t,weight:n,stretch:i,src:r.src||[],ref:r.ref||{name:e,style:[i,t,n].join(" ")}}}function I5(r,e,t,n){var i;for(i=t;i>=0&&i<e.length;i+=n)if(r[e[i]])return r[e[i]];for(i=t;i>=0&&i<e.length;i-=n)if(r[e[i]])return r[e[i]]}var mW={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},S5={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function P5(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function gW(r,e,t){for(var n=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},mW,t.genericFontFamilies||{}),s=null,a=null,o=0;o<e.length;++o)if(i[(s=S1(e[o])).family]&&(s.family=i[s.family]),r.hasOwnProperty(s.family)){a=r[s.family];break}if(!(a=a||r[n]))throw new Error("Could not find a font-family for the rule '"+P5(s)+"' and default family '"+n+"'.");if(a=function(c,u){if(u[c])return u[c];var l=I1[c],d=l<=I1.normal?-1:1,g=I5(u,_S,l,d);if(!g)throw new Error("Could not find a matching font-stretch value for "+c);return g}(s.stretch,a),a=function(c,u){if(u[c])return u[c];for(var l=vS[c],d=0;d<l.length;++d)if(u[l[d]])return u[l[d]];throw new Error("Could not find a matching font-style for "+c)}(s.style,a),!(a=function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var l=pW[c],d=I5(u,yS,l,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d}(s.weight,a)))throw new Error("Failed to resolve a font for the rule '"+P5(s)+"'.");return a}function N5(r){return r.trimLeft()}function vW(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function _W(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var _0,C5,k5,Ig=["times"];(function(r){var e,t,n,i,s,a,o,c,u,l=function(T){return T=T||{},this.isStrokeTransparent=T.isStrokeTransparent||!1,this.strokeOpacity=T.strokeOpacity||1,this.strokeStyle=T.strokeStyle||"#000000",this.fillStyle=T.fillStyle||"#000000",this.isFillTransparent=T.isFillTransparent||!1,this.fillOpacity=T.fillOpacity||1,this.font=T.font||"10px sans-serif",this.textBaseline=T.textBaseline||"alphabetic",this.textAlign=T.textAlign||"left",this.lineWidth=T.lineWidth||1,this.lineJoin=T.lineJoin||"miter",this.lineCap=T.lineCap||"butt",this.path=T.path||[],this.transform=T.transform!==void 0?T.transform.clone():new c,this.globalCompositeOperation=T.globalCompositeOperation||"normal",this.globalAlpha=T.globalAlpha||1,this.clip_path=T.clip_path||[],this.currentPoint=T.currentPoint||new a,this.miterLimit=T.miterLimit||10,this.lastPoint=T.lastPoint||new a,this.lineDashOffset=T.lineDashOffset||0,this.lineDash=T.lineDash||[],this.margin=T.margin||[0,0,0,0],this.prevPageLastElemOffset=T.prevPageLastElemOffset||0,this.ignoreClearRect=typeof T.ignoreClearRect!="boolean"||T.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new d(this),e=this.internal.f2,t=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,a=this.internal.Point,o=this.internal.Rectangle,c=this.internal.Matrix,u=new l}]);var d=function(T){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var D=T;Object.defineProperty(this,"pdf",{get:function(){return D}});var B=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return B},set:function(Re){B=!!Re}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(Re){U=!!Re}});var J=0;Object.defineProperty(this,"posX",{get:function(){return J},set:function(Re){isNaN(Re)||(J=Re)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(Re){isNaN(Re)||(ae=Re)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Re){var ne;typeof Re=="number"?ne=[Re,Re,Re,Re]:((ne=new Array(4))[0]=Re[0],ne[1]=Re.length>=2?Re[1]:ne[0],ne[2]=Re.length>=3?Re[2]:ne[0],ne[3]=Re.length>=4?Re[3]:ne[1]),u.margin=ne}});var le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return le},set:function(Re){le=Re}});var ue=0;Object.defineProperty(this,"lastBreak",{get:function(){return ue},set:function(Re){ue=Re}});var xe=[];Object.defineProperty(this,"pageBreaks",{get:function(){return xe},set:function(Re){xe=Re}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Re){Re instanceof l&&(u=Re)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Re){u.path=Re}});var Be=[];Object.defineProperty(this,"ctxStack",{get:function(){return Be},set:function(Re){Be=Re}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Re){var ne;ne=g(Re),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Re){var ne=g(Re);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Re){["butt","round","square"].indexOf(Re)!==-1&&(this.ctx.lineCap=Re,this.pdf.setLineCap(Re))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Re){isNaN(Re)||(this.ctx.lineWidth=Re,this.pdf.setLineWidth(Re))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Re){["bevel","round","miter"].indexOf(Re)!==-1&&(this.ctx.lineJoin=Re,this.pdf.setLineJoin(Re))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Re){isNaN(Re)||(this.ctx.miterLimit=Re,this.pdf.setMiterLimit(Re))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Re){this.ctx.textBaseline=Re}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Re){["right","end","center","left","start"].indexOf(Re)!==-1&&(this.ctx.textAlign=Re)}});var ze=null;function Ze(Re,ne){if(ze===null){var We=function(_t){var $e=[];return Object.keys(_t).forEach(function(rt){_t[rt].forEach(function(ct){var ut=null;switch(ct){case"bold":ut={family:rt,weight:"bold"};break;case"italic":ut={family:rt,style:"italic"};break;case"bolditalic":ut={family:rt,weight:"bold",style:"italic"};break;case"":case"normal":ut={family:rt}}ut!==null&&(ut.ref={name:rt,style:ct},$e.push(ut))})}),$e}(Re.getFontList());ze=function(_t){for(var $e={},rt=0;rt<_t.length;++rt){var ct=S1(_t[rt]),ut=ct.family,Tt=ct.stretch,At=ct.style,Ft=ct.weight;$e[ut]=$e[ut]||{},$e[ut][Tt]=$e[ut][Tt]||{},$e[ut][Tt][At]=$e[ut][Tt][At]||{},$e[ut][Tt][At][Ft]=ct}return $e}(We.concat(ne))}return ze}var at=null;Object.defineProperty(this,"fontFaces",{get:function(){return at},set:function(Re){ze=null,at=Re}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Re){var ne;if(this.ctx.font=Re,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Re))!==null){var We=ne[1],_t=(ne[2],ne[3]),$e=ne[4],rt=(ne[5],ne[6]),ct=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($e)[2];$e=Math.floor(ct==="px"?parseFloat($e)*this.pdf.internal.scaleFactor:ct==="em"?parseFloat($e)*this.pdf.getFontSize():parseFloat($e)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($e);var ut=function(kt){var qt,pt,Dr=[],Gt=kt.trim();if(Gt==="")return Ig;if(Gt in S5)return[S5[Gt]];for(;Gt!=="";){switch(pt=null,qt=(Gt=N5(Gt)).charAt(0)){case'"':case"'":pt=vW(Gt.substring(1),qt);break;default:pt=_W(Gt)}if(pt===null||(Dr.push(pt[0]),(Gt=N5(pt[1]))!==""&&Gt.charAt(0)!==","))return Ig;Gt=Gt.replace(/^,/,"")}return Dr}(rt);if(this.fontFaces){var Tt=gW(Ze(this.pdf,this.fontFaces),ut.map(function(kt){return{family:kt,stretch:"normal",weight:_t,style:We}}));this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var At="";(_t==="bold"||parseInt(_t,10)>=700||We==="bold")&&(At="bold"),We==="italic"&&(At+="italic"),At.length===0&&(At="normal");for(var Ft="",It={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ct=0;Ct<ut.length;Ct++){if(this.pdf.internal.getFont(ut[Ct],At,{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[Ct];break}if(At==="bolditalic"&&this.pdf.internal.getFont(ut[Ct],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ft=ut[Ct],At="bold";else if(this.pdf.internal.getFont(ut[Ct],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ft=ut[Ct],At="normal";break}}if(Ft===""){for(var Ht=0;Ht<ut.length;Ht++)if(It[ut[Ht]]){Ft=It[ut[Ht]];break}}Ft=Ft===""?"Times":Ft,this.pdf.setFont(Ft,At)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Re){this.ctx.globalCompositeOperation=Re}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Re){this.ctx.globalAlpha=Re}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Re){this.ctx.lineDashOffset=Re,nt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Re){this.ctx.lineDash=Re,nt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Re){this.ctx.ignoreClearRect=!!Re}})};d.prototype.setLineDash=function(T){this.lineDash=T},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){K.call(this,"fill",!1)},d.prototype.stroke=function(){K.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(T,D){if(isNaN(T)||isNaN(D))throw Cr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var B=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"mt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(T,D)},d.prototype.closePath=function(){var T=new a(0,0),D=0;for(D=this.path.length-1;D!==-1;D--)if(this.path[D].type==="begin"&&wr(this.path[D+1])==="object"&&typeof this.path[D+1].x=="number"){T=new a(this.path[D+1].x,this.path[D+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(T.x,T.y)},d.prototype.lineTo=function(T,D){if(isNaN(T)||isNaN(D))throw Cr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var B=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"lt",x:B.x,y:B.y}),this.ctx.lastPoint=new a(B.x,B.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},d.prototype.quadraticCurveTo=function(T,D,B,U){if(isNaN(B)||isNaN(U)||isNaN(T)||isNaN(D))throw Cr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var J=this.ctx.transform.applyToPoint(new a(B,U)),ae=this.ctx.transform.applyToPoint(new a(T,D));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:J.x,y:J.y}),this.ctx.lastPoint=new a(J.x,J.y)},d.prototype.bezierCurveTo=function(T,D,B,U,J,ae){if(isNaN(J)||isNaN(ae)||isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var le=this.ctx.transform.applyToPoint(new a(J,ae)),ue=this.ctx.transform.applyToPoint(new a(T,D)),xe=this.ctx.transform.applyToPoint(new a(B,U));this.path.push({type:"bct",x1:ue.x,y1:ue.y,x2:xe.x,y2:xe.y,x:le.x,y:le.y}),this.ctx.lastPoint=new a(le.x,le.y)},d.prototype.arc=function(T,D,B,U,J,ae){if(isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U)||isNaN(J))throw Cr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var le=this.ctx.transform.applyToPoint(new a(T,D));T=le.x,D=le.y;var ue=this.ctx.transform.applyToPoint(new a(0,B)),xe=this.ctx.transform.applyToPoint(new a(0,0));B=Math.sqrt(Math.pow(ue.x-xe.x,2)+Math.pow(ue.y-xe.y,2))}Math.abs(J-U)>=2*Math.PI&&(U=0,J=2*Math.PI),this.path.push({type:"arc",x:T,y:D,radius:B,startAngle:U,endAngle:J,counterclockwise:ae})},d.prototype.arcTo=function(T,D,B,U,J){throw new Error("arcTo not implemented.")},d.prototype.rect=function(T,D,B,U){if(isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(T,D),this.lineTo(T+B,D),this.lineTo(T+B,D+U),this.lineTo(T,D+U),this.lineTo(T,D),this.lineTo(T+B,D),this.lineTo(T,D)},d.prototype.fillRect=function(T,D,B,U){if(isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var J={};this.lineCap!=="butt"&&(J.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(J.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(T,D,B,U),this.fill(),J.hasOwnProperty("lineCap")&&(this.lineCap=J.lineCap),J.hasOwnProperty("lineJoin")&&(this.lineJoin=J.lineJoin)}},d.prototype.strokeRect=function(T,D,B,U){if(isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(T,D,B,U),this.stroke())},d.prototype.clearRect=function(T,D,B,U){if(isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U))throw Cr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(T,D,B,U))},d.prototype.save=function(T){T=typeof T!="boolean"||T;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("q");if(this.pdf.setPage(D),T){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new l(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},d.prototype.restore=function(T){T=typeof T!="boolean"||T;for(var D=this.pdf.internal.getCurrentPageInfo().pageNumber,B=0;B<this.pdf.internal.getNumberOfPages();B++)this.pdf.setPage(B+1),this.pdf.internal.out("Q");this.pdf.setPage(D),T&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(T){var D,B,U,J;if(T.isCanvasGradient===!0&&(T=T.getColor()),!T)return{r:0,g:0,b:0,a:0,style:T};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(T))D=0,B=0,U=0,J=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(T);if(ae!==null)D=parseInt(ae[1]),B=parseInt(ae[2]),U=parseInt(ae[3]),J=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(T))!==null)D=parseInt(ae[1]),B=parseInt(ae[2]),U=parseInt(ae[3]),J=parseFloat(ae[4]);else{if(J=1,typeof T=="string"&&T.charAt(0)!=="#"){var le=new lS(T);T=le.ok?le.toHex():"#000000"}T.length===4?(D=T.substring(1,2),D+=D,B=T.substring(2,3),B+=B,U=T.substring(3,4),U+=U):(D=T.substring(1,3),B=T.substring(3,5),U=T.substring(5,7)),D=parseInt(D,16),B=parseInt(B,16),U=parseInt(U,16)}}return{r:D,g:B,b:U,a:J,style:T}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},x=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(T,D,B,U){if(isNaN(D)||isNaN(B)||typeof T!="string")throw Cr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!p.call(this)){var J=_e(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;S.call(this,{text:T,x:D,y:B,scale:ae,angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.strokeText=function(T,D,B,U){if(isNaN(D)||isNaN(B)||typeof T!="string")throw Cr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){U=isNaN(U)?void 0:U;var J=_e(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;S.call(this,{text:T,x:D,y:B,scale:ae,renderingMode:"stroke",angle:J,align:this.textAlign,maxWidth:U})}},d.prototype.measureText=function(T){if(typeof T!="string")throw Cr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var D=this.pdf,B=this.pdf.internal.scaleFactor,U=D.internal.getFontSize(),J=D.getStringUnitWidth(T)*U/D.internal.scaleFactor,ae=function(le){var ue=(le=le||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ue}}),this};return new ae({width:J*=Math.round(96*B/72*1e4)/1e4})},d.prototype.scale=function(T,D){if(isNaN(T)||isNaN(D))throw Cr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var B=new c(T,0,0,D,0,0);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.rotate=function(T){if(isNaN(T))throw Cr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var D=new c(Math.cos(T),Math.sin(T),-Math.sin(T),Math.cos(T),0,0);this.ctx.transform=this.ctx.transform.multiply(D)},d.prototype.translate=function(T,D){if(isNaN(T)||isNaN(D))throw Cr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var B=new c(1,0,0,1,T,D);this.ctx.transform=this.ctx.transform.multiply(B)},d.prototype.transform=function(T,D,B,U,J,ae){if(isNaN(T)||isNaN(D)||isNaN(B)||isNaN(U)||isNaN(J)||isNaN(ae))throw Cr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var le=new c(T,D,B,U,J,ae);this.ctx.transform=this.ctx.transform.multiply(le)},d.prototype.setTransform=function(T,D,B,U,J,ae){T=isNaN(T)?1:T,D=isNaN(D)?0:D,B=isNaN(B)?0:B,U=isNaN(U)?1:U,J=isNaN(J)?0:J,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(T,D,B,U,J,ae)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(T,D,B,U,J,ae,le,ue,xe){var Be=this.pdf.getImageProperties(T),ze=1,Ze=1,at=1,Re=1;U!==void 0&&ue!==void 0&&(at=ue/U,Re=xe/J,ze=Be.width/U*ue/U,Ze=Be.height/J*xe/J),ae===void 0&&(ae=D,le=B,D=0,B=0),U!==void 0&&ue===void 0&&(ue=U,xe=J),U===void 0&&ue===void 0&&(ue=Be.width,xe=Be.height);for(var ne,We=this.ctx.transform.decompose(),_t=_e(We.rotate.shx),$e=new c,rt=($e=($e=($e=$e.multiply(We.translate)).multiply(We.skew)).multiply(We.scale)).applyToRectangle(new o(ae-D*at,le-B*Re,U*ze,J*Ze)),ct=E.call(this,rt),ut=[],Tt=0;Tt<ct.length;Tt+=1)ut.indexOf(ct[Tt])===-1&&ut.push(ct[Tt]);if(M(ut),this.autoPaging)for(var At=ut[0],Ft=ut[ut.length-1],It=At;It<Ft+1;It++){this.pdf.setPage(It);var Ct=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ht=It===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],qt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],pt=It===1?0:kt+(It-2)*qt;if(this.ctx.clip_path.length!==0){var Dr=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(ne,this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset),ie.call(this,"fill",!0),this.path=Dr}var Gt=JSON.parse(JSON.stringify(rt));Gt=L([Gt],this.posX+this.margin[3],-pt+Ht+this.ctx.prevPageLastElemOffset)[0];var qn=(It>At||It<Ft)&&_.call(this);qn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ct,qt,null).clip().discardPath()),this.pdf.addImage(T,"JPEG",Gt.x,Gt.y,Gt.w,Gt.h,null,null,_t),qn&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(T,"JPEG",rt.x,rt.y,rt.w,rt.h,null,null,_t)};var E=function(T,D,B){var U=[];D=D||this.pdf.internal.pageSize.width,B=B||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var J=this.posY+this.ctx.prevPageLastElemOffset;switch(T.type){default:case"mt":case"lt":U.push(Math.floor((T.y+J)/B)+1);break;case"arc":U.push(Math.floor((T.y+J-T.radius)/B)+1),U.push(Math.floor((T.y+J+T.radius)/B)+1);break;case"qct":var ae=Ce(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x,T.y);U.push(Math.floor((ae.y+J)/B)+1),U.push(Math.floor((ae.y+ae.h+J)/B)+1);break;case"bct":var le=Fe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,T.x1,T.y1,T.x2,T.y2,T.x,T.y);U.push(Math.floor((le.y+J)/B)+1),U.push(Math.floor((le.y+le.h+J)/B)+1);break;case"rect":U.push(Math.floor((T.y+J)/B)+1),U.push(Math.floor((T.y+T.h+J)/B)+1)}for(var ue=0;ue<U.length;ue+=1)for(;this.pdf.internal.getNumberOfPages()<U[ue];)P.call(this);return U},P=function(){var T=this.fillStyle,D=this.strokeStyle,B=this.font,U=this.lineCap,J=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=T,this.strokeStyle=D,this.font=B,this.lineCap=U,this.lineWidth=J,this.lineJoin=ae},L=function(T,D,B){for(var U=0;U<T.length;U++)switch(T[U].type){case"bct":T[U].x2+=D,T[U].y2+=B;case"qct":T[U].x1+=D,T[U].y1+=B;case"mt":case"lt":case"arc":default:T[U].x+=D,T[U].y+=B}return T},M=function(T){return T.sort(function(D,B){return D-B})},K=function(T,D){for(var B,U,J=this.fillStyle,ae=this.strokeStyle,le=this.lineCap,ue=this.lineWidth,xe=Math.abs(ue*this.ctx.transform.scaleX),Be=this.lineJoin,ze=JSON.parse(JSON.stringify(this.path)),Ze=JSON.parse(JSON.stringify(this.path)),at=[],Re=0;Re<Ze.length;Re++)if(Ze[Re].x!==void 0)for(var ne=E.call(this,Ze[Re]),We=0;We<ne.length;We+=1)at.indexOf(ne[We])===-1&&at.push(ne[We]);for(var _t=0;_t<at.length;_t++)for(;this.pdf.internal.getNumberOfPages()<at[_t];)P.call(this);if(M(at),this.autoPaging)for(var $e=at[0],rt=at[at.length-1],ct=$e;ct<rt+1;ct++){this.pdf.setPage(ct),this.fillStyle=J,this.strokeStyle=ae,this.lineCap=le,this.lineWidth=xe,this.lineJoin=Be;var ut=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=ct===1?this.posY+this.margin[0]:this.margin[0],At=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ft=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],It=ct===1?0:At+(ct-2)*Ft;if(this.ctx.clip_path.length!==0){var Ct=this.path;B=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(B,this.posX+this.margin[3],-It+Tt+this.ctx.prevPageLastElemOffset),ie.call(this,T,!0),this.path=Ct}if(U=JSON.parse(JSON.stringify(ze)),this.path=L(U,this.posX+this.margin[3],-It+Tt+this.ctx.prevPageLastElemOffset),D===!1||ct===0){var Ht=(ct>$e||ct<rt)&&_.call(this);Ht&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ut,Ft,null).clip().discardPath()),ie.call(this,T,D),Ht&&this.pdf.restoreGraphicsState()}this.lineWidth=ue}else this.lineWidth=xe,ie.call(this,T,D),this.lineWidth=ue;this.path=ze},ie=function(T,D){if((T!=="stroke"||D||!x.call(this))&&(T==="stroke"||D||!p.call(this))){for(var B,U,J=[],ae=this.path,le=0;le<ae.length;le++){var ue=ae[le];switch(ue.type){case"begin":J.push({begin:!0});break;case"close":J.push({close:!0});break;case"mt":J.push({start:ue,deltas:[],abs:[]});break;case"lt":var xe=J.length;if(ae[le-1]&&!isNaN(ae[le-1].x)&&(B=[ue.x-ae[le-1].x,ue.y-ae[le-1].y],xe>0)){for(;xe>=0;xe--)if(J[xe-1].close!==!0&&J[xe-1].begin!==!0){J[xe-1].deltas.push(B),J[xe-1].abs.push(ue);break}}break;case"bct":B=[ue.x1-ae[le-1].x,ue.y1-ae[le-1].y,ue.x2-ae[le-1].x,ue.y2-ae[le-1].y,ue.x-ae[le-1].x,ue.y-ae[le-1].y],J[J.length-1].deltas.push(B);break;case"qct":var Be=ae[le-1].x+2/3*(ue.x1-ae[le-1].x),ze=ae[le-1].y+2/3*(ue.y1-ae[le-1].y),Ze=ue.x+2/3*(ue.x1-ue.x),at=ue.y+2/3*(ue.y1-ue.y),Re=ue.x,ne=ue.y;B=[Be-ae[le-1].x,ze-ae[le-1].y,Ze-ae[le-1].x,at-ae[le-1].y,Re-ae[le-1].x,ne-ae[le-1].y],J[J.length-1].deltas.push(B);break;case"arc":J.push({deltas:[],abs:[],arc:!0}),Array.isArray(J[J.length-1].abs)&&J[J.length-1].abs.push(ue)}}U=D?null:T==="stroke"?"stroke":"fill";for(var We=!1,_t=0;_t<J.length;_t++)if(J[_t].arc)for(var $e=J[_t].abs,rt=0;rt<$e.length;rt++){var ct=$e[rt];ct.type==="arc"?A.call(this,ct.x,ct.y,ct.radius,ct.startAngle,ct.endAngle,ct.counterclockwise,void 0,D,!We):R.call(this,ct.x,ct.y),We=!0}else if(J[_t].close===!0)this.pdf.internal.out("h"),We=!1;else if(J[_t].begin!==!0){var ut=J[_t].start.x,Tt=J[_t].start.y;se.call(this,J[_t].deltas,ut,Tt),We=!0}U&&k.call(this,U),D&&V.call(this)}},oe=function(T){var D=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,B=D*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return T-B;case"top":return T+D-B;case"hanging":return T+D-2*B;case"middle":return T+D/2-B;case"ideographic":return T;case"alphabetic":default:return T}},N=function(T){return T+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var T=function(){};return T.colorStops=[],T.addColorStop=function(D,B){this.colorStops.push([D,B])},T.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},T.isCanvasGradient=!0,T},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var A=function(T,D,B,U,J,ae,le,ue,xe){for(var Be=Ee.call(this,B,U,J,ae),ze=0;ze<Be.length;ze++){var Ze=Be[ze];ze===0&&(xe?b.call(this,Ze.x1+T,Ze.y1+D):R.call(this,Ze.x1+T,Ze.y1+D)),ve.call(this,T,D,Ze.x2,Ze.y2,Ze.x3,Ze.y3,Ze.x4,Ze.y4)}ue?V.call(this):k.call(this,le)},k=function(T){switch(T){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},V=function(){this.pdf.clip(),this.pdf.discardPath()},b=function(T,D){this.pdf.internal.out(t(T)+" "+n(D)+" m")},S=function(T){var D;switch(T.align){case"right":case"end":D="right";break;case"center":D="center";break;case"left":case"start":default:D="left"}var B=this.pdf.getTextDimensions(T.text),U=oe.call(this,T.y),J=N.call(this,U)-B.h,ae=this.ctx.transform.applyToPoint(new a(T.x,U)),le=this.ctx.transform.decompose(),ue=new c;ue=(ue=(ue=ue.multiply(le.translate)).multiply(le.skew)).multiply(le.scale);for(var xe,Be,ze,Ze=this.ctx.transform.applyToRectangle(new o(T.x,U,B.w,B.h)),at=ue.applyToRectangle(new o(T.x,J,B.w,B.h)),Re=E.call(this,at),ne=[],We=0;We<Re.length;We+=1)ne.indexOf(Re[We])===-1&&ne.push(Re[We]);if(M(ne),this.autoPaging)for(var _t=ne[0],$e=ne[ne.length-1],rt=_t;rt<$e+1;rt++){this.pdf.setPage(rt);var ct=rt===1?this.posY+this.margin[0]:this.margin[0],ut=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[2],At=Tt-this.margin[0],Ft=this.pdf.internal.pageSize.width-this.margin[1],It=Ft-this.margin[3],Ct=rt===1?0:ut+(rt-2)*At;if(this.ctx.clip_path.length!==0){var Ht=this.path;xe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=L(xe,this.posX+this.margin[3],-1*Ct+ct),ie.call(this,"fill",!0),this.path=Ht}var kt=L([JSON.parse(JSON.stringify(at))],this.posX+this.margin[3],-Ct+ct+this.ctx.prevPageLastElemOffset)[0];T.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*T.scale),ze=this.lineWidth,this.lineWidth=ze*T.scale);var qt=this.autoPaging!=="text";if(qt||kt.y+kt.h<=Tt){if(qt||kt.y>=ct&&kt.x<=Ft){var pt=qt?T.text:this.pdf.splitTextToSize(T.text,T.maxWidth||Ft-kt.x)[0],Dr=L([JSON.parse(JSON.stringify(Ze))],this.posX+this.margin[3],-Ct+ct+this.ctx.prevPageLastElemOffset)[0],Gt=qt&&(rt>_t||rt<$e)&&_.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],It,At,null).clip().discardPath()),this.pdf.text(pt,Dr.x,Dr.y,{angle:T.angle,align:D,renderingMode:T.renderingMode}),Gt&&this.pdf.restoreGraphicsState()}}else kt.y<Tt&&(this.ctx.prevPageLastElemOffset+=Tt-kt.y);T.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=ze)}else T.scale>=.01&&(Be=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Be*T.scale),ze=this.lineWidth,this.lineWidth=ze*T.scale),this.pdf.text(T.text,ae.x+this.posX,ae.y+this.posY,{angle:T.angle,align:D,renderingMode:T.renderingMode,maxWidth:T.maxWidth}),T.scale>=.01&&(this.pdf.setFontSize(Be),this.lineWidth=ze)},R=function(T,D,B,U){B=B||0,U=U||0,this.pdf.internal.out(t(T+B)+" "+n(D+U)+" l")},se=function(T,D,B){return this.pdf.lines(T,D,B,null,null)},ve=function(T,D,B,U,J,ae,le,ue){this.pdf.internal.out([e(i(B+T)),e(s(U+D)),e(i(J+T)),e(s(ae+D)),e(i(le+T)),e(s(ue+D)),"c"].join(" "))},Ee=function(T,D,B,U){for(var J=2*Math.PI,ae=Math.PI/2;D>B;)D-=J;var le=Math.abs(B-D);le<J&&U&&(le=J-le);for(var ue=[],xe=U?-1:1,Be=D;le>1e-5;){var ze=Be+xe*Math.min(le,ae);ue.push(Ne.call(this,T,Be,ze)),le-=Math.abs(ze-Be),Be=ze}return ue},Ne=function(T,D,B){var U=(B-D)/2,J=T*Math.cos(U),ae=T*Math.sin(U),le=J,ue=-ae,xe=le*le+ue*ue,Be=xe+le*J+ue*ae,ze=4/3*(Math.sqrt(2*xe*Be)-Be)/(le*ae-ue*J),Ze=le-ze*ue,at=ue+ze*le,Re=Ze,ne=-at,We=U+D,_t=Math.cos(We),$e=Math.sin(We);return{x1:T*Math.cos(D),y1:T*Math.sin(D),x2:Ze*_t-at*$e,y2:Ze*$e+at*_t,x3:Re*_t-ne*$e,y3:Re*$e+ne*_t,x4:T*Math.cos(B),y4:T*Math.sin(B)}},_e=function(T){return 180*T/Math.PI},Ce=function(T,D,B,U,J,ae){var le=T+.5*(B-T),ue=D+.5*(U-D),xe=J+.5*(B-J),Be=ae+.5*(U-ae),ze=Math.min(T,J,le,xe),Ze=Math.max(T,J,le,xe),at=Math.min(D,ae,ue,Be),Re=Math.max(D,ae,ue,Be);return new o(ze,at,Ze-ze,Re-at)},Fe=function(T,D,B,U,J,ae,le,ue){var xe,Be,ze,Ze,at,Re,ne,We,_t,$e,rt,ct,ut,Tt,At=B-T,Ft=U-D,It=J-B,Ct=ae-U,Ht=le-J,kt=ue-ae;for(Be=0;Be<41;Be++)_t=(ne=(ze=T+(xe=Be/40)*At)+xe*((at=B+xe*It)-ze))+xe*(at+xe*(J+xe*Ht-at)-ne),$e=(We=(Ze=D+xe*Ft)+xe*((Re=U+xe*Ct)-Ze))+xe*(Re+xe*(ae+xe*kt-Re)-We),Be==0?(rt=_t,ct=$e,ut=_t,Tt=$e):(rt=Math.min(rt,_t),ct=Math.min(ct,$e),ut=Math.max(ut,_t),Tt=Math.max(Tt,$e));return new o(Math.round(rt),Math.round(ct),Math.round(ut-rt),Math.round(Tt-ct))},nt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var T,D,B=(T=this.ctx.lineDash,D=this.ctx.lineDashOffset,JSON.stringify({lineDash:T,lineDashOffset:D}));this.prevLineDash!==B&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=B)}}})(Dt.API),function(r){var e=function(s){var a,o,c,u,l,d,g,p,x,_;for(o=[],c=0,u=(s+=a="\0\0\0\0".slice(s.length%4||4)).length;u>c;c+=4)(l=(s.charCodeAt(c)<<24)+(s.charCodeAt(c+1)<<16)+(s.charCodeAt(c+2)<<8)+s.charCodeAt(c+3))!==0?(d=(l=((l=((l=((l=(l-(_=l%85))/85)-(x=l%85))/85)-(p=l%85))/85)-(g=l%85))/85)%85,o.push(d+33,g+33,p+33,x+33,_+33)):o.push(122);return function(E,P){for(var L=P;L>0;L--)E.pop()}(o,a.length),String.fromCharCode.apply(String,o)+"~>"},t=function(s){var a,o,c,u,l,d=String,g="length",p=255,x="charCodeAt",_="slice",E="replace";for(s[_](-2),s=s[_](0,-2)[E](/\s/g,"")[E]("z","!!!!!"),c=[],u=0,l=(s+=a="uuuuu"[_](s[g]%5||5))[g];l>u;u+=5)o=52200625*(s[x](u)-33)+614125*(s[x](u+1)-33)+7225*(s[x](u+2)-33)+85*(s[x](u+3)-33)+(s[x](u+4)-33),c.push(p&o>>24,p&o>>16,p&o>>8,p&o);return function(P,L){for(var M=L;M>0;M--)P.pop()}(c,a[g]),d.fromCharCode.apply(d,c)},n=function(s){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),a.test(s)===!1)return"";for(var o="",c=0;c<s.length;c+=2)o+=String.fromCharCode("0x"+(s[c]+s[c+1]));return o},i=function(s){for(var a=new Uint8Array(s.length),o=s.length;o--;)a[o]=s.charCodeAt(o);return s=(a=x1(a)).reduce(function(c,u){return c+String.fromCharCode(u)},"")};r.processDataByFilters=function(s,a){var o=0,c=s||"",u=[];for(typeof(a=a||[])=="string"&&(a=[a]),o=0;o<a.length;o+=1)switch(a[o]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=i(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[o]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}}(Dt.API),function(r){r.loadFile=function(e,t,n){return function(i,s,a){s=s!==!1,a=typeof a=="function"?a:function(){};var o=void 0;try{o=function(c,u,l){var d=new XMLHttpRequest,g=0,p=function(x){var _=x.length,E=[],P=String.fromCharCode;for(g=0;g<_;g+=1)E.push(P(255&x.charCodeAt(g)));return E.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?l(p(this.responseText)):l(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)}(i,s,a)}catch{}return o}(e,t,n)},r.loadImageFile=r.loadFile}(Dt.API),function(r){function e(){return(Ot.html2canvas?Promise.resolve(Ot.html2canvas):g1(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(Ot.DOMPurify?Promise.resolve(Ot.DOMPurify):g1(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var o=wr(a);return o==="undefined"?"undefined":o==="string"||a instanceof String?"string":o==="number"||a instanceof Number?"number":o==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":o==="object"?"object":"unknown"},i=function(a,o){var c=document.createElement(a);for(var u in o.className&&(c.className=o.className),o.innerHTML&&o.dompurify&&(c.innerHTML=o.dompurify.sanitize(o.innerHTML)),o.style)c.style[u]=o.style[u];return c},s=function a(o){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),u=a.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,a,1,[a])).set(o)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(a,o){return a.__proto__=o||s.prototype,a},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(a,o){return this.then(function(){switch(o=o||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:i("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},s.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},o=function c(u,l){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),g=u.firstChild;g;g=g.nextSibling)l!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||d.appendChild(c(g,l));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft},!0)),d}(this.prop.src,this.opt.html2canvas.javascriptEnabled);o.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(o),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,o(this.prop.container,c)}).then(function(o){(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(o){var c=this.opt.jsPDF,u=this.opt.fontFaces,l=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:l,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var g=0;g<u.length;++g){var p=u[g],x=p.src.find(function(_){return _.format==="truetype"});x&&c.addFont(x.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),o(this.prop.container,d)}).then(function(o){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(o),this.prop.canvas=o,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(a,o,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,o):this.outputPdf(a,o)},s.prototype.outputPdf=function(a,o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,o)})},s.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},s.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(a){if(n(a)!=="object")return this;var o=Object.keys(a||{}).map(function(c){if(c in s.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(o)})},s.prototype.get=function(a,o){return this.then(function(){var c=a in s.template.prop?this.prop[a]:this.opt[a];return o?o(c):c})},s.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},s.prototype.setPageSize=function(a){function o(c,u){return Math.floor(c*u/72*96)}return this.then(function(){(a=a||Dt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:o(a.inner.width,a.k),height:o(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},s.prototype.setProgress=function(a,o,c,u){return a!=null&&(this.progress.val=a),o!=null&&(this.progress.state=o),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(a,o,c,u){return this.setProgress(a?this.progress.val+a:null,o||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(a,o){var c=this;return this.thenCore(a,o,function(u,l){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(d){return c.updateProgress(null,u),d}).then(u,l).then(function(d){return c.updateProgress(1),d})})},s.prototype.thenCore=function(a,o,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),o&&(o=o.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),l=c.call(u,a,o);return s.convert(l,this.__proto__)},s.prototype.thenExternal=function(a,o){return Promise.prototype.then.call(this,a,o)},s.prototype.thenList=function(a){var o=this;return a.forEach(function(c){o=o.thenCore(c)}),o},s.prototype.catch=function(a){a&&(a=a.bind(this));var o=Promise.prototype.catch.call(this,a);return s.convert(o,this)},s.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},s.prototype.error=function(a){return this.then(function(){throw new Error(a)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,Dt.getPageSize=function(a,o,c){if(wr(a)==="object"){var u=a;a=u.orientation,o=u.unit||o,c=u.format||c}o=o||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var l,d=(""+c).toLowerCase(),g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(o){case"pt":l=1;break;case"mm":l=72/25.4;break;case"cm":l=72/2.54;break;case"in":l=72;break;case"px":l=.75;break;case"pc":case"em":l=12;break;case"ex":l=6;break;default:throw"Invalid unit: "+o}var p,x=0,_=0;if(g.hasOwnProperty(d))x=g[d][1]/l,_=g[d][0]/l;else try{x=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",_>x&&(p=_,_=x,x=p);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",x>_&&(p=_,_=x,x=p)}return{width:_,height:x,unit:o,k:l,orientation:a}},r.html=function(a,o){(o=o||{}).callback=o.callback||function(){},o.html2canvas=o.html2canvas||{},o.html2canvas.canvas=o.html2canvas.canvas||this.canvas,o.jsPDF=o.jsPDF||this,o.fontFaces=o.fontFaces?o.fontFaces.map(S1):null;var c=new s(o);return o.worker?c:c.from(a).doCallback()}}(Dt.API),Dt.API.addJS=function(r){return k5=r,this.internal.events.subscribe("postPutResources",function(){_0=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(_0+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),C5=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+k5+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){_0!==void 0&&C5!==void 0&&this.internal.out("/Names <</JavaScript "+_0+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var a=i[s],o=n.exec(a);if(o!=null){var c=o[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,l=[];for(s=0;s<u;s++){var d=t.internal.newObject();l.push(d);var g=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+g.objId+" 0 R /XYZ null null null]>> endobj")}var p=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<l.length;s++)t.internal.write("(page_"+(s+1)+")"+l[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+p+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(n,i,s){var a={title:i,options:s,children:[]};return n==null&&(n=this.root),n.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(n){n.id=t.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},t.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},t.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<n.children.length;s++){var a=n.children[s];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(n)),s>0&&this.line("/Prev "+this.makeRef(n.children[s-1])),s<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[s+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var o=this.count=this.count_r({count:0},a);if(o>0&&this.line("/Count "+o),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},t.outline.line=function(n){this.ctx.val+=n+`\r
`},t.outline.makeRef=function(n){return n.id+" 0 R"},t.outline.makeString=function(n){return"("+t.internal.pdfEscape(n)+")"},t.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(n,i){for(var s=0;s<i.children.length;s++)n.count++,this.count_r(n,i.children[s]);return n.count}}])}(Dt.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,n,i,s,a,o){var c,u=this.decode.DCT_DECODE,l=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(d){for(var g,p=256*d.charCodeAt(4)+d.charCodeAt(5),x=d.length,_={width:0,height:0,numcomponents:1},E=4;E<x;E+=2){if(E+=p,e.indexOf(d.charCodeAt(E+1))!==-1){g=256*d.charCodeAt(E+5)+d.charCodeAt(E+6),_={width:256*d.charCodeAt(E+7)+d.charCodeAt(E+8),height:g,numcomponents:d.charCodeAt(E+9)};break}p=256*d.charCodeAt(E+2)+d.charCodeAt(E+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}l={data:t,width:c.width,height:c.height,colorSpace:o,bitsPerComponent:8,filter:u,index:n,alias:i}}return l}}(Dt.API);var gl,y0,R5,L5,D5,yW=function(){var r,e,t;function n(s){var a,o,c,u,l,d,g,p,x,_,E,P,L,M;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(a=this.readUInt32(),x=(function(){var K,ie;for(ie=[],K=0;K<4;++K)ie.push(String.fromCharCode(this.data[this.pos++]));return ie}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},l=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*l/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(x==="fdAT"&&(this.pos+=4,a-=4),s=(d!=null?d.data:void 0)||this.imgData,P=0;0<=a?P<a:P>a;0<=a?++P:--P)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(L=0;0<=_?L<_:L>_;0<=_?++L:--L)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":g=(E=this.read(a)).indexOf(0),p=String.fromCharCode.apply(String,E.slice(0,g)),this.text[p]=String.fromCharCode.apply(String,E.slice(g+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(M=this.colorType)===4||M===6,o=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*o,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(s){var a,o;for(o=[],a=0;0<=s?a<s:a>s;0<=s?++a:--a)o.push(this.data[this.pos++]);return o},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(s){var a=this.pixelBitlength/8,o=new Uint8Array(this.width*this.height*a),c=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function l(d,g,p,x){var _,E,P,L,M,K,ie,oe,N,A,k,V,b,S,R,se,ve,Ee,Ne,_e,Ce,Fe=Math.ceil((u.width-d)/p),nt=Math.ceil((u.height-g)/x),T=u.width==Fe&&u.height==nt;for(S=a*Fe,V=T?o:new Uint8Array(S*nt),K=s.length,b=0,E=0;b<nt&&c<K;){switch(s[c++]){case 0:for(L=ve=0;ve<S;L=ve+=1)V[E++]=s[c++];break;case 1:for(L=Ee=0;Ee<S;L=Ee+=1)_=s[c++],M=L<a?0:V[E-a],V[E++]=(_+M)%256;break;case 2:for(L=Ne=0;Ne<S;L=Ne+=1)_=s[c++],P=(L-L%a)/a,R=b&&V[(b-1)*S+P*a+L%a],V[E++]=(R+_)%256;break;case 3:for(L=_e=0;_e<S;L=_e+=1)_=s[c++],P=(L-L%a)/a,M=L<a?0:V[E-a],R=b&&V[(b-1)*S+P*a+L%a],V[E++]=(_+Math.floor((M+R)/2))%256;break;case 4:for(L=Ce=0;Ce<S;L=Ce+=1)_=s[c++],P=(L-L%a)/a,M=L<a?0:V[E-a],b===0?R=se=0:(R=V[(b-1)*S+P*a+L%a],se=P&&V[(b-1)*S+(P-1)*a+L%a]),ie=M+R-se,oe=Math.abs(ie-M),A=Math.abs(ie-R),k=Math.abs(ie-se),N=oe<=A&&oe<=k?M:A<=k?R:se,V[E++]=(_+N)%256;break;default:throw new Error("Invalid filter algorithm: "+s[c-1])}if(!T){var D=((g+b*x)*u.width+d)*a,B=b*S;for(L=0;L<Fe;L+=1){for(var U=0;U<a;U+=1)o[D++]=V[B++];D+=(p-1)*a}}b++}}return s=Jz(s),u.interlaceMethod==1?(l(0,0,8,8),l(4,0,8,8),l(0,4,4,8),l(2,0,4,4),l(0,2,2,4),l(1,0,2,2),l(0,1,1,2)):l(0,0,1,1),o},n.prototype.decodePalette=function(){var s,a,o,c,u,l,d,g,p;for(o=this.palette,l=this.transparency.indexed||[],u=new Uint8Array((l.length||0)+o.length),c=0,s=0,a=d=0,g=o.length;d<g;a=d+=3)u[c++]=o[a],u[c++]=o[a+1],u[c++]=o[a+2],u[c++]=(p=l[s++])!=null?p:255;return u},n.prototype.copyToImageData=function(s,a){var o,c,u,l,d,g,p,x,_,E,P;if(c=this.colors,_=null,o=this.hasAlphaChannel,this.palette.length&&(_=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),c=4,o=!0),x=(u=s.data||s).length,d=_||a,l=g=0,c===1)for(;l<x;)p=_?4*a[l/4]:g,E=d[p++],u[l++]=E,u[l++]=E,u[l++]=E,u[l++]=o?d[p++]:255,g=p;else for(;l<x;)p=_?4*a[l/4]:g,u[l++]=d[p++],u[l++]=d[p++],u[l++]=d[p++],u[l++]=o?d[p++]:255,g=p},n.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Ot)==="[object Window]"){try{e=Ot.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),r=function(s){var a;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(s){var a,o,c,u,l,d,g,p;if(this.animation){for(p=[],o=l=0,d=(g=this.animation.frames).length;l<d;o=++l)a=g[o],c=s.createImageData(a.width,a.height),u=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,u),a.imageData=c,p.push(a.image=r(c));return p}},n.prototype.renderFrame=function(s,a){var o,c,u;return o=(c=this.animation.frames)[a],u=c[a-1],a===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),o.blendOp===0&&s.clearRect(o.xOffset,o.yOffset,o.width,o.height),s.drawImage(o.image,o.xOffset,o.yOffset)},n.prototype.animate=function(s){var a,o,c,u,l,d,g=this;return o=0,d=this.animation,u=d.numFrames,c=d.frames,l=d.numPlays,(a=function(){var p,x;if(p=o++%u,x=c[p],g.renderFrame(s,p),u>1&&o/u<l)return g.animation._timeout=setTimeout(a,x.delay)})()},n.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},n.prototype.render=function(s){var a,o;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,a=s.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(o=a.createImageData(this.width,this.height),this.copyToImageData(o,this.decodePixels()),a.putImageData(o,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function wW(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,n=r[e++]|r[e++]<<8,i=r[e++],s=i>>7,a=1<<(7&i)+1;r[e++],r[e++];var o=null,c=null;s&&(o=e,c=a,e+=3*a);var u=!0,l=[],d=0,g=null,p=0,x=null;for(this.width=t,this.height=n;u&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,x=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((b=r[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=r[e++];d=r[e++]|r[e++]<<8,g=r[e++],!(1&_)&&(g=null),p=_>>2&7,e++;break;case 254:for(;;){if(!((b=r[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var E=r[e++]|r[e++]<<8,P=r[e++]|r[e++]<<8,L=r[e++]|r[e++]<<8,M=r[e++]|r[e++]<<8,K=r[e++],ie=K>>6&1,oe=1<<(7&K)+1,N=o,A=c,k=!1;K>>7&&(k=!0,N=e,A=oe,e+=3*oe);var V=e;for(e++;;){var b;if(!((b=r[e++])>=0))throw Error("Invalid block size");if(b===0)break;e+=b}l.push({x:E,y:P,width:L,height:M,has_local_palette:k,palette_offset:N,palette_size:A,data_offset:V,data_length:e-V,transparent_index:g,interlaced:!!ie,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return l.length},this.loopCount=function(){return x},this.frameInfo=function(S){if(S<0||S>=l.length)throw new Error("Frame index out of range.");return l[S]},this.decodeAndBlitFrameBGRA=function(S,R){var se=this.frameInfo(S),ve=se.width*se.height,Ee=new Uint8Array(ve);F5(r,se.data_offset,Ee,ve);var Ne=se.palette_offset,_e=se.transparent_index;_e===null&&(_e=256);var Ce=se.width,Fe=t-Ce,nt=Ce,T=4*(se.y*t+se.x),D=4*((se.y+se.height)*t+se.x),B=T,U=4*Fe;se.interlaced===!0&&(U+=4*t*7);for(var J=8,ae=0,le=Ee.length;ae<le;++ae){var ue=Ee[ae];if(nt===0&&(nt=Ce,(B+=U)>=D&&(U=4*Fe+4*t*(J-1),B=T+(Ce+Fe)*(J<<1),J>>=1)),ue===_e)B+=4;else{var xe=r[Ne+3*ue],Be=r[Ne+3*ue+1],ze=r[Ne+3*ue+2];R[B++]=ze,R[B++]=Be,R[B++]=xe,R[B++]=255}--nt}},this.decodeAndBlitFrameRGBA=function(S,R){var se=this.frameInfo(S),ve=se.width*se.height,Ee=new Uint8Array(ve);F5(r,se.data_offset,Ee,ve);var Ne=se.palette_offset,_e=se.transparent_index;_e===null&&(_e=256);var Ce=se.width,Fe=t-Ce,nt=Ce,T=4*(se.y*t+se.x),D=4*((se.y+se.height)*t+se.x),B=T,U=4*Fe;se.interlaced===!0&&(U+=4*t*7);for(var J=8,ae=0,le=Ee.length;ae<le;++ae){var ue=Ee[ae];if(nt===0&&(nt=Ce,(B+=U)>=D&&(U=4*Fe+4*t*(J-1),B=T+(Ce+Fe)*(J<<1),J>>=1)),ue===_e)B+=4;else{var xe=r[Ne+3*ue],Be=r[Ne+3*ue+1],ze=r[Ne+3*ue+2];R[B++]=xe,R[B++]=Be,R[B++]=ze,R[B++]=255}--nt}}}function F5(r,e,t,n){for(var i=r[e++],s=1<<i,a=s+1,o=a+1,c=i+1,u=(1<<c)-1,l=0,d=0,g=0,p=r[e++],x=new Int32Array(4096),_=null;;){for(;l<16&&p!==0;)d|=r[e++]<<l,l+=8,p===1?p=r[e++]:--p;if(l<c)break;var E=d&u;if(d>>=c,l-=c,E!==s){if(E===a)break;for(var P=E<o?E:_,L=0,M=P;M>s;)M=x[M]>>8,++L;var K=M;if(g+L+(P!==E?1:0)>n)return void Cr.log("Warning, gif stream longer than expected.");t[g++]=K;var ie=g+=L;for(P!==E&&(t[g++]=K),M=P;L--;)M=x[M],t[--ie]=255&M,M>>=8;_!==null&&o<4096&&(x[o++]=_<<8|K,o>=u+1&&c<12&&(++c,u=u<<1|1)),_=E}else o=a+1,u=(1<<(c=i+1))-1,_=null}return g!==n&&Cr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Sg(r){var e,t,n,i,s,a=Math.floor,o=new Array(64),c=new Array(64),u=new Array(64),l=new Array(64),d=new Array(65535),g=new Array(65535),p=new Array(64),x=new Array(64),_=[],E=0,P=7,L=new Array(64),M=new Array(64),K=new Array(64),ie=new Array(256),oe=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],A=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],b=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],S=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],se=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ve=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ee(T,D){for(var B=0,U=0,J=new Array,ae=1;ae<=16;ae++){for(var le=1;le<=T[ae];le++)J[D[U]]=[],J[D[U]][0]=B,J[D[U]][1]=ae,U++,B++;B*=2}return J}function Ne(T){for(var D=T[0],B=T[1]-1;B>=0;)D&1<<B&&(E|=1<<P),B--,--P<0&&(E==255?(_e(255),_e(0)):_e(E),P=7,E=0)}function _e(T){_.push(T)}function Ce(T){_e(T>>8&255),_e(255&T)}function Fe(T,D,B,U,J){for(var ae,le=J[0],ue=J[240],xe=function($e,rt){var ct,ut,Tt,At,Ft,It,Ct,Ht,kt,qt,pt=0;for(kt=0;kt<8;++kt){ct=$e[pt],ut=$e[pt+1],Tt=$e[pt+2],At=$e[pt+3],Ft=$e[pt+4],It=$e[pt+5],Ct=$e[pt+6];var Dr=ct+(Ht=$e[pt+7]),Gt=ct-Ht,qn=ut+Ct,tr=ut-Ct,Er=Tt+It,Li=Tt-It,Kt=At+Ft,Qi=At-Ft,Tr=Dr+Kt,bn=Dr-Kt,gi=qn+Er,cr=qn-Er;$e[pt]=Tr+gi,$e[pt+4]=Tr-gi;var Nt=.707106781*(cr+bn);$e[pt+2]=bn+Nt,$e[pt+6]=bn-Nt;var er=.382683433*((Tr=Qi+Li)-(cr=tr+Gt)),Di=.5411961*Tr+er,Kr=1.306562965*cr+er,kn=.707106781*(gi=Li+tr),vi=Gt+kn,wt=Gt-kn;$e[pt+5]=wt+Di,$e[pt+3]=wt-Di,$e[pt+1]=vi+Kr,$e[pt+7]=vi-Kr,pt+=8}for(pt=0,kt=0;kt<8;++kt){ct=$e[pt],ut=$e[pt+8],Tt=$e[pt+16],At=$e[pt+24],Ft=$e[pt+32],It=$e[pt+40],Ct=$e[pt+48];var si=ct+(Ht=$e[pt+56]),gn=ct-Ht,Yr=ut+Ct,Hr=ut-Ct,Ur=Tt+It,j=Tt-It,ee=At+Ft,Y=At-Ft,X=si+ee,Z=si-ee,te=Yr+Ur,ye=Yr-Ur;$e[pt]=X+te,$e[pt+32]=X-te;var ke=.707106781*(ye+Z);$e[pt+16]=Z+ke,$e[pt+48]=Z-ke;var we=.382683433*((X=Y+j)-(ye=Hr+gn)),Te=.5411961*X+we,Pe=1.306562965*ye+we,Ke=.707106781*(te=j+Hr),it=gn+Ke,mt=gn-Ke;$e[pt+40]=mt+Te,$e[pt+24]=mt-Te,$e[pt+8]=it+Pe,$e[pt+56]=it-Pe,pt++}for(kt=0;kt<64;++kt)qt=$e[kt]*rt[kt],p[kt]=qt>0?qt+.5|0:qt-.5|0;return p}(T,D),Be=0;Be<64;++Be)x[N[Be]]=xe[Be];var ze=x[0]-B;B=x[0],ze==0?Ne(U[0]):(Ne(U[g[ae=32767+ze]]),Ne(d[ae]));for(var Ze=63;Ze>0&&x[Ze]==0;)Ze--;if(Ze==0)return Ne(le),B;for(var at,Re=1;Re<=Ze;){for(var ne=Re;x[Re]==0&&Re<=Ze;)++Re;var We=Re-ne;if(We>=16){at=We>>4;for(var _t=1;_t<=at;++_t)Ne(ue);We&=15}ae=32767+x[Re],Ne(J[(We<<4)+g[ae]]),Ne(d[ae]),Re++}return Ze!=63&&Ne(le),B}function nt(T){T=Math.min(Math.max(T,1),100),s!=T&&(function(D){for(var B=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var J=a((B[U]*D+50)/100);J=Math.min(Math.max(J,1),255),o[N[U]]=J}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],le=0;le<64;le++){var ue=a((ae[le]*D+50)/100);ue=Math.min(Math.max(ue,1),255),c[N[le]]=ue}for(var xe=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Be=0,ze=0;ze<8;ze++)for(var Ze=0;Ze<8;Ze++)u[Be]=1/(o[N[Be]]*xe[ze]*xe[Ze]*8),l[Be]=1/(c[N[Be]]*xe[ze]*xe[Ze]*8),Be++}(T<50?Math.floor(5e3/T):Math.floor(200-2*T)),s=T)}this.encode=function(T,D){D&&nt(D),_=new Array,E=0,P=7,Ce(65496),Ce(65504),Ce(16),_e(74),_e(70),_e(73),_e(70),_e(0),_e(1),_e(1),_e(0),Ce(1),Ce(1),_e(0),_e(0),function(){Ce(65499),Ce(132),_e(0);for(var ut=0;ut<64;ut++)_e(o[ut]);_e(1);for(var Tt=0;Tt<64;Tt++)_e(c[Tt])}(),function(ut,Tt){Ce(65472),Ce(17),_e(8),Ce(Tt),Ce(ut),_e(3),_e(1),_e(17),_e(0),_e(2),_e(17),_e(1),_e(3),_e(17),_e(1)}(T.width,T.height),function(){Ce(65476),Ce(418),_e(0);for(var ut=0;ut<16;ut++)_e(A[ut+1]);for(var Tt=0;Tt<=11;Tt++)_e(k[Tt]);_e(16);for(var At=0;At<16;At++)_e(V[At+1]);for(var Ft=0;Ft<=161;Ft++)_e(b[Ft]);_e(1);for(var It=0;It<16;It++)_e(S[It+1]);for(var Ct=0;Ct<=11;Ct++)_e(R[Ct]);_e(17);for(var Ht=0;Ht<16;Ht++)_e(se[Ht+1]);for(var kt=0;kt<=161;kt++)_e(ve[kt])}(),Ce(65498),Ce(12),_e(3),_e(1),_e(0),_e(2),_e(17),_e(3),_e(17),_e(0),_e(63),_e(0);var B=0,U=0,J=0;E=0,P=7,this.encode.displayName="_encode_";for(var ae,le,ue,xe,Be,ze,Ze,at,Re,ne=T.data,We=T.width,_t=T.height,$e=4*We,rt=0;rt<_t;){for(ae=0;ae<$e;){for(Be=$e*rt+ae,Ze=-1,at=0,Re=0;Re<64;Re++)ze=Be+(at=Re>>3)*$e+(Ze=4*(7&Re)),rt+at>=_t&&(ze-=$e*(rt+1+at-_t)),ae+Ze>=$e&&(ze-=ae+Ze-$e+4),le=ne[ze++],ue=ne[ze++],xe=ne[ze++],L[Re]=(oe[le]+oe[ue+256>>0]+oe[xe+512>>0]>>16)-128,M[Re]=(oe[le+768>>0]+oe[ue+1024>>0]+oe[xe+1280>>0]>>16)-128,K[Re]=(oe[le+1280>>0]+oe[ue+1536>>0]+oe[xe+1792>>0]>>16)-128;B=Fe(L,u,B,e,n),U=Fe(M,l,U,t,i),J=Fe(K,l,J,t,i),ae+=32}rt+=8}if(P>=0){var ct=[];ct[1]=P+1,ct[0]=(1<<P+1)-1,Ne(ct)}return Ce(65497),new Uint8Array(_)},r=r||50,function(){for(var T=String.fromCharCode,D=0;D<256;D++)ie[D]=T(D)}(),e=Ee(A,k),t=Ee(S,R),n=Ee(V,b),i=Ee(se,ve),function(){for(var T=1,D=2,B=1;B<=15;B++){for(var U=T;U<D;U++)g[32767+U]=B,d[32767+U]=[],d[32767+U][1]=B,d[32767+U][0]=U;for(var J=-(D-1);J<=-T;J++)g[32767+J]=B,d[32767+J]=[],d[32767+J][1]=B,d[32767+J][0]=D-1+J;T<<=1,D<<=1}}(),function(){for(var T=0;T<256;T++)oe[T]=19595*T,oe[T+256>>0]=38470*T,oe[T+512>>0]=7471*T+32768,oe[T+768>>0]=-11059*T,oe[T+1024>>0]=-21709*T,oe[T+1280>>0]=32768*T+8421375,oe[T+1536>>0]=-27439*T,oe[T+1792>>0]=-5329*T}(),nt(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function zs(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function O5(r){function e(A){if(!A)throw Error("assert :P")}function t(A,k,V){for(var b=0;4>b;b++)if(A[k+b]!=V.charCodeAt(b))return!0;return!1}function n(A,k,V,b,S){for(var R=0;R<S;R++)A[k+R]=V[b+R]}function i(A,k,V,b){for(var S=0;S<b;S++)A[k+S]=V}function s(A){return new Int32Array(A)}function a(A,k){for(var V=[],b=0;b<A;b++)V.push(new k);return V}function o(A,k){var V=[];return function b(S,R,se){for(var ve=se[R],Ee=0;Ee<ve&&(S.push(se.length>R+1?[]:new k),!(se.length<R+1));Ee++)b(S[Ee],R+1,se)}(V,0,A),V}var c=function(){var A=this;function k(h,m){for(var y=1<<m-1>>>0;h&y;)y>>>=1;return y?(h&y-1)+y:h}function V(h,m,y,I,O){e(!(I%y));do h[m+(I-=y)]=O;while(0<I)}function b(h,m,y,I,O){if(e(2328>=O),512>=O)var q=s(512);else if((q=s(O))==null)return 0;return function(z,H,G,Q,he,be){var Ae,ge,qe=H,De=1<<G,fe=s(16),de=s(16);for(e(he!=0),e(Q!=null),e(z!=null),e(0<G),ge=0;ge<he;++ge){if(15<Q[ge])return 0;++fe[Q[ge]]}if(fe[0]==he)return 0;for(de[1]=0,Ae=1;15>Ae;++Ae){if(fe[Ae]>1<<Ae)return 0;de[Ae+1]=de[Ae]+fe[Ae]}for(ge=0;ge<he;++ge)Ae=Q[ge],0<Q[ge]&&(be[de[Ae]++]=ge);if(de[15]==1)return(Q=new S).g=0,Q.value=be[0],V(z,qe,1,De,Q),De;var Ue,Ge=-1,je=De-1,yt=0,ht=1,Rt=1,vt=1<<G;for(ge=0,Ae=1,he=2;Ae<=G;++Ae,he<<=1){if(ht+=Rt<<=1,0>(Rt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae])(Q=new S).g=Ae,Q.value=be[ge++],V(z,qe+yt,he,vt,Q),yt=k(yt,Ae)}for(Ae=G+1,he=2;15>=Ae;++Ae,he<<=1){if(ht+=Rt<<=1,0>(Rt-=fe[Ae]))return 0;for(;0<fe[Ae];--fe[Ae]){if(Q=new S,(yt&je)!=Ge){for(qe+=vt,Ue=1<<(Ge=Ae)-G;15>Ge&&!(0>=(Ue-=fe[Ge]));)++Ge,Ue<<=1;De+=vt=1<<(Ue=Ge-G),z[H+(Ge=yt&je)].g=Ue+G,z[H+Ge].value=qe-H-Ge}Q.g=Ae-G,Q.value=be[ge++],V(z,qe+(yt>>G),he,vt,Q),yt=k(yt,Ae)}}return ht!=2*de[15]-1?0:De}(h,m,y,I,O,q)}function S(){this.value=this.g=0}function R(){this.value=this.g=0}function se(){this.G=a(5,S),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a($n,R)}function ve(h,m,y,I){e(h!=null),e(m!=null),e(2147483648>I),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=m,h.pa=y,h.Jd=m,h.Yc=y+I,h.Zc=4<=I?y+I-4+1:y,ae(h)}function Ee(h,m){for(var y=0;0<m--;)y|=ue(h,128)<<m;return y}function Ne(h,m){var y=Ee(h,m);return le(h)?-y:y}function _e(h,m,y,I){var O,q=0;for(e(h!=null),e(m!=null),e(4294967288>I),h.Sb=I,h.Ra=0,h.u=0,h.h=0,4<I&&(I=4),O=0;O<I;++O)q+=m[y+O]<<8*O;h.Ra=q,h.bb=I,h.oa=m,h.pa=y}function Ce(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<Xu-8>>>0,++h.bb,h.u-=8;B(h)&&(h.h=1,h.u=0)}function Fe(h,m){if(e(0<=m),!h.h&&m<=Yu){var y=D(h)&Ku[m];return h.u+=m,Ce(h),y}return h.h=1,h.u=0}function nt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function T(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function D(h){return h.Ra>>>(h.u&Xu-1)>>>0}function B(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>Xu}function U(h,m){h.u=m,h.h=B(h)}function J(h){h.u>=Rh&&(e(h.u>=Rh),Ce(h))}function ae(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function le(h){return Ee(h,1)}function ue(h,m){var y=h.Ca;0>h.b&&ae(h);var I=h.b,O=y*m>>>8,q=(h.I>>>I>O)+0;for(q?(y-=O,h.I-=O+1<<I>>>0):y=O+1,I=y,O=0;256<=I;)O+=8,I>>=8;return I=7^O+Mi[I],h.b-=I,h.Ca=(y<<I)-1,q}function xe(h,m,y){h[m+0]=y>>24&255,h[m+1]=y>>16&255,h[m+2]=y>>8&255,h[m+3]=y>>0&255}function Be(h,m){return h[m+0]<<0|h[m+1]<<8}function ze(h,m){return Be(h,m)|h[m+2]<<16}function Ze(h,m){return Be(h,m)|Be(h,m+2)<<16}function at(h,m){var y=1<<m;return e(h!=null),e(0<m),h.X=s(y),h.X==null?0:(h.Mb=32-m,h.Xa=m,1)}function Re(h,m){e(h!=null),e(m!=null),e(h.Xa==m.Xa),n(m.X,0,h.X,0,1<<m.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function We(h,m,y,I){e(y!=null),e(I!=null);var O=y[0],q=I[0];return O==0&&(O=(h*q+m/2)/m),q==0&&(q=(m*O+h/2)/h),0>=O||0>=q?0:(y[0]=O,I[0]=q,1)}function _t(h,m){return h+(1<<m)-1>>>m}function $e(h,m){return((4278255360&h)+(4278255360&m)>>>0&4278255360)+((16711935&h)+(16711935&m)>>>0&16711935)>>>0}function rt(h,m){A[m]=function(y,I,O,q,z,H,G){var Q;for(Q=0;Q<z;++Q){var he=A[h](H[G+Q-1],O,q+Q);H[G+Q]=$e(y[I+Q],he)}}}function ct(){this.ud=this.hd=this.jd=0}function ut(h,m){return((4278124286&(h^m))>>>1)+(h&m)>>>0}function Tt(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function At(h,m){return Tt(h+(h-m+.5>>1))}function Ft(h,m,y){return Math.abs(m-y)-Math.abs(h-y)}function It(h,m,y,I,O,q,z){for(I=q[z-1],y=0;y<O;++y)q[z+y]=I=$e(h[m+y],I)}function Ct(h,m,y,I,O){var q;for(q=0;q<y;++q){var z=h[m+q],H=z>>8&255,G=16711935&(G=(G=16711935&z)+((H<<16)+H));I[O+q]=(4278255360&z)+G>>>0}}function Ht(h,m){m.jd=h>>0&255,m.hd=h>>8&255,m.ud=h>>16&255}function kt(h,m,y,I,O,q){var z;for(z=0;z<I;++z){var H=m[y+z],G=H>>>8,Q=H,he=255&(he=(he=H>>>16)+((h.jd<<24>>24)*(G<<24>>24)>>>5));Q=255&(Q=(Q=Q+((h.hd<<24>>24)*(G<<24>>24)>>>5))+((h.ud<<24>>24)*(he<<24>>24)>>>5)),O[q+z]=(4278255360&H)+(he<<16)+Q}}function qt(h,m,y,I,O){A[m]=function(q,z,H,G,Q,he,be,Ae,ge){for(G=be;G<Ae;++G)for(be=0;be<ge;++be)Q[he++]=O(H[I(q[z++])])},A[h]=function(q,z,H,G,Q,he,be){var Ae=8>>q.b,ge=q.Ea,qe=q.K[0],De=q.w;if(8>Ae)for(q=(1<<q.b)-1,De=(1<<Ae)-1;z<H;++z){var fe,de=0;for(fe=0;fe<ge;++fe)fe&q||(de=I(G[Q++])),he[be++]=O(qe[de&De]),de>>=Ae}else A["VP8LMapColor"+y](G,Q,qe,De,he,be,z,H,ge)}}function pt(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>16&255,I[O++]=q>>8&255,I[O++]=q>>0&255}}function Dr(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>16&255,I[O++]=q>>8&255,I[O++]=q>>0&255,I[O++]=q>>24&255}}function Gt(h,m,y,I,O){for(y=m+y;m<y;){var q=(z=h[m++])>>16&240|z>>12&15,z=z>>0&240|z>>28&15;I[O++]=q,I[O++]=z}}function qn(h,m,y,I,O){for(y=m+y;m<y;){var q=(z=h[m++])>>16&248|z>>13&7,z=z>>5&224|z>>3&31;I[O++]=q,I[O++]=z}}function tr(h,m,y,I,O){for(y=m+y;m<y;){var q=h[m++];I[O++]=q>>0&255,I[O++]=q>>8&255,I[O++]=q>>16&255}}function Er(h,m,y,I,O,q){if(q==0)for(y=m+y;m<y;)xe(I,((q=h[m++])[0]>>24|q[1]>>8&65280|q[2]<<8&16711680|q[3]<<24)>>>0),O+=32;else n(I,O,h,m,y)}function Li(h,m){A[m][0]=A[h+"0"],A[m][1]=A[h+"1"],A[m][2]=A[h+"2"],A[m][3]=A[h+"3"],A[m][4]=A[h+"4"],A[m][5]=A[h+"5"],A[m][6]=A[h+"6"],A[m][7]=A[h+"7"],A[m][8]=A[h+"8"],A[m][9]=A[h+"9"],A[m][10]=A[h+"10"],A[m][11]=A[h+"11"],A[m][12]=A[h+"12"],A[m][13]=A[h+"13"],A[m][14]=A[h+"0"],A[m][15]=A[h+"0"]}function Kt(h){return h==Am||h==Im||h==jd||h==Sm}function Qi(){this.eb=[],this.size=this.A=this.fb=0}function Tr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function bn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Qi,this.f.kb=new Tr,this.sd=null}function gi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function cr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function er(h,m){var y=h.T,I=m.ba.f.RGBA,O=I.eb,q=I.fb+h.ka*I.A,z=Es[m.ba.S],H=h.y,G=h.O,Q=h.f,he=h.N,be=h.ea,Ae=h.W,ge=m.cc,qe=m.dc,De=m.Mc,fe=m.Nc,de=h.ka,Ue=h.ka+h.T,Ge=h.U,je=Ge+1>>1;for(de==0?z(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,O,q,null,null,Ge):(z(m.ec,m.fc,H,G,ge,qe,De,fe,Q,he,be,Ae,O,q-I.A,O,q,Ge),++y);de+2<Ue;de+=2)ge=Q,qe=he,De=be,fe=Ae,he+=h.Rc,Ae+=h.Rc,q+=2*I.A,z(H,(G+=2*h.fa)-h.fa,H,G,ge,qe,De,fe,Q,he,be,Ae,O,q-I.A,O,q,Ge);return G+=h.fa,h.j+Ue<h.o?(n(m.ec,m.fc,H,G,Ge),n(m.cc,m.dc,Q,he,je),n(m.Mc,m.Nc,be,Ae,je),y--):1&Ue||z(H,G,null,null,Q,he,be,Ae,Q,he,be,Ae,O,q+I.A,null,null,Ge),y}function Di(h,m,y){var I=h.F,O=[h.J];if(I!=null){var q=h.U,z=m.ba.S,H=z==Ud||z==jd;m=m.ba.f.RGBA;var G=[0],Q=h.ka;G[0]=h.T,h.Kb&&(Q==0?--G[0]:(--Q,O[0]-=h.width),h.j+h.ka+h.T==h.o&&(G[0]=h.o-h.j-Q));var he=m.eb;Q=m.fb+Q*m.A,h=Rr(I,O[0],h.width,q,G,he,Q+(H?0:3),m.A),e(y==G),h&&Kt(z)&&ws(he,Q,H,q,G,m.A)}return 0}function Kr(h){var m=h.ma,y=m.ba.S,I=11>y,O=y==Bd||y==Vd||y==Ud||y==bm||y==12||Kt(y);if(m.memory=null,m.Ib=null,m.Jb=null,m.Nd=null,!Ch(m.Oa,h,O?11:12))return 0;if(O&&Kt(y)&&Ye(),h.da)alert("todo:use_scaling");else{if(I){if(m.Ib=Nt,h.Kb){if(y=h.U+1>>1,m.memory=s(h.U+2*y),m.memory==null)return 0;m.ec=m.memory,m.fc=0,m.cc=m.ec,m.dc=m.fc+h.U,m.Mc=m.cc,m.Nc=m.dc+y,m.Ib=er,Ye()}}else alert("todo:EmitYUV");O&&(m.Jb=Di,I&&me())}if(I&&!n_){for(h=0;256>h;++h)US[h]=89858*(h-128)+zd>>qd,zS[h]=-22014*(h-128)+zd,qS[h]=-45773*(h-128),jS[h]=113618*(h-128)+zd>>qd;for(h=Vh;h<Cm;++h)m=76283*(h-16)+zd>>qd,WS[h-Vh]=fr(m,255),HS[h-Vh]=fr(m+8>>4,15);n_=1}return 1}function kn(h){var m=h.ma,y=h.U,I=h.T;return e(!(1&h.ka)),0>=y||0>=I?0:(y=m.Ib(h,m),m.Jb!=null&&m.Jb(h,m,y),m.Dc+=y,1)}function vi(h){h.ma.memory=null}function wt(h,m,y,I){return Fe(h,8)!=47?0:(m[0]=Fe(h,14)+1,y[0]=Fe(h,14)+1,I[0]=Fe(h,1),Fe(h,3)!=0?0:!h.h)}function si(h,m){if(4>h)return h+1;var y=h-2>>1;return(2+(1&h)<<y)+Fe(m,y)+1}function gn(h,m){return 120<m?m-120:1<=(y=((y=IS[m-1])>>4)*h+(8-(15&y)))?y:1;var y}function Yr(h,m,y){var I=D(y),O=h[m+=255&I].g-8;return 0<O&&(U(y,y.u+8),I=D(y),m+=h[m].value,m+=I&(1<<O)-1),U(y,y.u+h[m].g),h[m].value}function Hr(h,m,y){return y.g+=h.g,y.value+=h.value<<m>>>0,e(8>=y.g),h.g}function Ur(h,m,y){var I=h.xc;return e((m=I==0?0:h.vc[h.md*(y>>I)+(m>>I)])<h.Wb),h.Ya[m]}function j(h,m,y,I){var O=h.ab,q=h.c*m,z=h.C;m=z+m;var H=y,G=I;for(I=h.Ta,y=h.Ua;0<O--;){var Q=h.gc[O],he=z,be=m,Ae=H,ge=G,qe=(G=I,H=y,Q.Ea);switch(e(he<be),e(be<=Q.nc),Q.hc){case 2:kd(Ae,ge,(be-he)*qe,G,H);break;case 0:var De=he,fe=be,de=G,Ue=H,Ge=(vt=Q).Ea;De==0&&(Em(Ae,ge,null,null,1,de,Ue),It(Ae,ge+1,0,0,Ge-1,de,Ue+1),ge+=Ge,Ue+=Ge,++De);for(var je=1<<vt.b,yt=je-1,ht=_t(Ge,vt.b),Rt=vt.K,vt=vt.w+(De>>vt.b)*ht;De<fe;){var ur=Rt,pr=vt,sr=1;for(Lh(Ae,ge,de,Ue-Ge,1,de,Ue);sr<Ge;){var Jt=(sr&~yt)+je;Jt>Ge&&(Jt=Ge),(0,No[ur[pr++]>>8&15])(Ae,ge+ +sr,de,Ue+sr-Ge,Jt-sr,de,Ue+sr),sr=Jt}ge+=Ge,Ue+=Ge,++De&yt||(vt+=ht)}be!=Q.nc&&n(G,H-qe,G,H+(be-he-1)*qe,qe);break;case 1:for(qe=Ae,fe=ge,Ge=(Ae=Q.Ea)-(Ue=Ae&~(de=(ge=1<<Q.b)-1)),De=_t(Ae,Q.b),je=Q.K,Q=Q.w+(he>>Q.b)*De;he<be;){for(yt=je,ht=Q,Rt=new ct,vt=fe+Ue,ur=fe+Ae;fe<vt;)Ht(yt[ht++],Rt),Fc(Rt,qe,fe,ge,G,H),fe+=ge,H+=ge;fe<ur&&(Ht(yt[ht++],Rt),Fc(Rt,qe,fe,Ge,G,H),fe+=Ge,H+=Ge),++he&de||(Q+=De)}break;case 3:if(Ae==G&&ge==H&&0<Q.b){for(fe=G,Ae=qe=H+(be-he)*qe-(Ue=(be-he)*_t(Q.Ea,Q.b)),ge=G,de=H,De=[],Ue=(Ge=Ue)-1;0<=Ue;--Ue)De[Ue]=ge[de+Ue];for(Ue=Ge-1;0<=Ue;--Ue)fe[Ae+Ue]=De[Ue];vs(Q,he,be,G,qe,G,H)}else vs(Q,he,be,Ae,ge,G,H)}H=I,G=y}G!=y&&n(I,y,H,G,q)}function ee(h,m){var y=h.V,I=h.Ba+h.c*h.C,O=m-h.C;if(e(m<=h.l.o),e(16>=O),0<O){var q=h.l,z=h.Ta,H=h.Ua,G=q.width;if(j(h,O,y,I),O=H=[H],e((y=h.C)<(I=m)),e(q.v<q.va),I>q.o&&(I=q.o),y<q.j){var Q=q.j-y;y=q.j,O[0]+=Q*G}if(y>=I?y=0:(O[0]+=4*q.v,q.ka=y-q.j,q.U=q.va-q.v,q.T=I-y,y=1),y){if(H=H[0],11>(y=h.ca).S){var he=y.f.RGBA,be=(I=y.S,O=q.U,q=q.T,Q=he.eb,he.A),Ae=q;for(he=he.fb+h.Ma*he.A;0<Ae--;){var ge=z,qe=H,De=O,fe=Q,de=he;switch(I){case Md:Bi(ge,qe,De,fe,de);break;case Bd:wi(ge,qe,De,fe,de);break;case Am:wi(ge,qe,De,fe,de),ws(fe,de,0,De,1,0);break;case Kv:Oa(ge,qe,De,fe,de);break;case Vd:Er(ge,qe,De,fe,de,1);break;case Im:Er(ge,qe,De,fe,de,1),ws(fe,de,0,De,1,0);break;case Ud:Er(ge,qe,De,fe,de,0);break;case jd:Er(ge,qe,De,fe,de,0),ws(fe,de,1,De,1,0);break;case bm:Co(ge,qe,De,fe,de);break;case Sm:Co(ge,qe,De,fe,de),kr(fe,de,De,1,0);break;case Yv:Fa(ge,qe,De,fe,de);break;default:e(0)}H+=G,he+=be}h.Ma+=q}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=y.height)}}h.C=m,e(h.C<=h.i)}function Y(h){var m;if(0<h.ua)return 0;for(m=0;m<h.Wb;++m){var y=h.Ya[m].G,I=h.Ya[m].H;if(0<y[1][I[1]+0].g||0<y[2][I[2]+0].g||0<y[3][I[3]+0].g)return 0}return 1}function X(h,m,y,I,O,q){if(h.Z!=0){var z=h.qd,H=h.rd;for(e(Do[h.Z]!=null);m<y;++m)Do[h.Z](z,H,I,O,I,O,q),z=I,H=O,O+=q;h.qd=z,h.rd=H}}function Z(h,m){var y=h.l.ma,I=y.Z==0||y.Z==1?h.l.j:h.C;if(I=h.C<I?I:h.C,e(m<=h.l.o),m>I){var O=h.l.width,q=y.ca,z=y.tb+O*I,H=h.V,G=h.Ba+h.c*I,Q=h.gc;e(h.ab==1),e(Q[0].hc==3),Rd(Q[0],I,m,H,G,q,z),X(y,I,m,q,z,O)}h.C=h.Ma=m}function te(h,m,y,I,O,q,z){var H=h.$/I,G=h.$%I,Q=h.m,he=h.s,be=y+h.$,Ae=be;O=y+I*O;var ge=y+I*q,qe=280+he.ua,De=h.Pb?H:16777216,fe=0<he.ua?he.Wa:null,de=he.wc,Ue=be<ge?Ur(he,G,H):null;e(h.C<q),e(ge<=O);var Ge=!1;e:for(;;){for(;Ge||be<ge;){var je=0;if(H>=De){var yt=be-y;e((De=h).Pb),De.wd=De.m,De.xd=yt,0<De.s.ua&&Re(De.s.Wa,De.s.vb),De=H+PS}if(G&de||(Ue=Ur(he,G,H)),e(Ue!=null),Ue.Qb&&(m[be]=Ue.qb,Ge=!0),!Ge)if(J(Q),Ue.jc){je=Q,yt=m;var ht=be,Rt=Ue.pd[D(je)&$n-1];e(Ue.jc),256>Rt.g?(U(je,je.u+Rt.g),yt[ht]=Rt.value,je=0):(U(je,je.u+Rt.g-256),e(256<=Rt.value),je=Rt.value),je==0&&(Ge=!0)}else je=Yr(Ue.G[0],Ue.H[0],Q);if(Q.h)break;if(Ge||256>je){if(!Ge)if(Ue.nd)m[be]=(Ue.qb|je<<8)>>>0;else{if(J(Q),Ge=Yr(Ue.G[1],Ue.H[1],Q),J(Q),yt=Yr(Ue.G[2],Ue.H[2],Q),ht=Yr(Ue.G[3],Ue.H[3],Q),Q.h)break;m[be]=(ht<<24|Ge<<16|je<<8|yt)>>>0}if(Ge=!1,++be,++G>=I&&(G=0,++H,z!=null&&H<=q&&!(H%16)&&z(h,H),fe!=null))for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else if(280>je){if(je=si(je-256,Q),yt=Yr(Ue.G[4],Ue.H[4],Q),J(Q),yt=gn(I,yt=si(yt,Q)),Q.h)break;if(be-y<yt||O-be<je)break e;for(ht=0;ht<je;++ht)m[be+ht]=m[be+ht-yt];for(be+=je,G+=je;G>=I;)G-=I,++H,z!=null&&H<=q&&!(H%16)&&z(h,H);if(e(be<=O),G&de&&(Ue=Ur(he,G,H)),fe!=null)for(;Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je}else{if(!(je<qe))break e;for(Ge=je-280,e(fe!=null);Ae<be;)je=m[Ae++],fe.X[(506832829*je&4294967295)>>>fe.Mb]=je;je=be,e(!(Ge>>>(yt=fe).Xa)),m[je]=yt.X[Ge],Ge=!0}Ge||e(Q.h==B(Q))}if(h.Pb&&Q.h&&be<O)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Re(h.s.vb,h.s.Wa);else{if(Q.h)break e;z!=null&&z(h,H>q?q:H),h.a=0,h.$=be-y}return 1}return h.a=3,0}function ye(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var m=h.Wa;m!=null&&(m.X=null),h.vb=null,e(h!=null)}function ke(){var h=new $u;return h==null?null:(h.a=0,h.xb=Qv,Li("Predictor","VP8LPredictors"),Li("Predictor","VP8LPredictors_C"),Li("PredictorAdd","VP8LPredictorsAdd"),Li("PredictorAdd","VP8LPredictorsAdd_C"),kd=Ct,Fc=kt,Bi=pt,wi=Dr,Co=Gt,Fa=qn,Oa=tr,A.VP8LMapColor32b=Ju,A.VP8LMapColor8b=Ld,h)}function we(h,m,y,I,O){var q=1,z=[h],H=[m],G=I.m,Q=I.s,he=null,be=0;e:for(;;){if(y)for(;q&&Fe(G,1);){var Ae=z,ge=H,qe=I,De=1,fe=qe.m,de=qe.gc[qe.ab],Ue=Fe(fe,2);if(qe.Oc&1<<Ue)q=0;else{switch(qe.Oc|=1<<Ue,de.hc=Ue,de.Ea=Ae[0],de.nc=ge[0],de.K=[null],++qe.ab,e(4>=qe.ab),Ue){case 0:case 1:de.b=Fe(fe,3)+2,De=we(_t(de.Ea,de.b),_t(de.nc,de.b),0,qe,de.K),de.K=de.K[0];break;case 3:var Ge,je=Fe(fe,8)+1,yt=16<je?0:4<je?1:2<je?2:3;if(Ae[0]=_t(de.Ea,yt),de.b=yt,Ge=De=we(je,1,0,qe,de.K)){var ht,Rt=je,vt=de,ur=1<<(8>>vt.b),pr=s(ur);if(pr==null)Ge=0;else{var sr=vt.K[0],Jt=vt.w;for(pr[0]=vt.K[0][0],ht=1;ht<1*Rt;++ht)pr[ht]=$e(sr[Jt+ht],pr[ht-1]);for(;ht<4*ur;++ht)pr[ht]=0;vt.K[0]=null,vt.K[0]=pr,Ge=1}}De=Ge;break;case 2:break;default:e(0)}q=De}}if(z=z[0],H=H[0],q&&Fe(G,1)&&!(q=1<=(be=Fe(G,4))&&11>=be)){I.a=3;break e}var Nr;if(Nr=q)t:{var Ar,zt,vn,Vi=I,_n=z,Ui=H,mr=be,ss=y,as=Vi.m,Rn=Vi.s,Gn=[null],Ei=1,Ts=0,sa=SS[mr];r:for(;;){if(ss&&Fe(as,1)){var Ln=Fe(as,3)+2,Ua=_t(_n,Ln),Uc=_t(Ui,Ln),rl=Ua*Uc;if(!we(Ua,Uc,0,Vi,Gn))break r;for(Gn=Gn[0],Rn.xc=Ln,Ar=0;Ar<rl;++Ar){var Fo=Gn[Ar]>>8&65535;Gn[Ar]=Fo,Fo>=Ei&&(Ei=Fo+1)}}if(as.h)break r;for(zt=0;5>zt;++zt){var Jr=Xv[zt];!zt&&0<mr&&(Jr+=1<<mr),Ts<Jr&&(Ts=Jr)}var km=a(Ei*sa,S),a_=Ei,o_=a(a_,se);if(o_==null)var Hd=null;else e(65536>=a_),Hd=o_;var Uh=s(Ts);if(Hd==null||Uh==null||km==null){Vi.a=1;break r}var $d=km;for(Ar=vn=0;Ar<Ei;++Ar){var Vs=Hd[Ar],nl=Vs.G,il=Vs.H,c_=0,Gd=1,u_=0;for(zt=0;5>zt;++zt){Jr=Xv[zt],nl[zt]=$d,il[zt]=vn,!zt&&0<mr&&(Jr+=1<<mr);i:{var Kd,Rm=Jr,Yd=Vi,jh=Uh,KS=$d,YS=vn,Lm=0,Oo=Yd.m,XS=Fe(Oo,1);if(i(jh,0,0,Rm),XS){var JS=Fe(Oo,1)+1,QS=Fe(Oo,1),l_=Fe(Oo,QS==0?1:8);jh[l_]=1,JS==2&&(jh[l_=Fe(Oo,8)]=1);var Xd=1}else{var h_=s(19),f_=Fe(Oo,4)+4;if(19<f_){Yd.a=3;var Jd=0;break i}for(Kd=0;Kd<f_;++Kd)h_[AS[Kd]]=Fe(Oo,3);var Dm=void 0,qh=void 0,d_=Yd,ZS=h_,Qd=Rm,p_=jh,Fm=0,Mo=d_.m,m_=8,g_=a(128,S);n:for(;b(g_,0,7,ZS,19);){if(Fe(Mo,1)){var e4=2+2*Fe(Mo,3);if((Dm=2+Fe(Mo,e4))>Qd)break n}else Dm=Qd;for(qh=0;qh<Qd&&Dm--;){J(Mo);var v_=g_[0+(127&D(Mo))];U(Mo,Mo.u+v_.g);var sl=v_.value;if(16>sl)p_[qh++]=sl,sl!=0&&(m_=sl);else{var t4=sl==16,__=sl-16,r4=TS[__],y_=Fe(Mo,ES[__])+r4;if(qh+y_>Qd)break n;for(var n4=t4?m_:0;0<y_--;)p_[qh++]=n4}}Fm=1;break n}Fm||(d_.a=3),Xd=Fm}(Xd=Xd&&!Oo.h)&&(Lm=b(KS,YS,8,jh,Rm)),Xd&&Lm!=0?Jd=Lm:(Yd.a=3,Jd=0)}if(Jd==0)break r;if(Gd&&bS[zt]==1&&(Gd=$d[vn].g==0),c_+=$d[vn].g,vn+=Jd,3>=zt){var zh,Om=Uh[0];for(zh=1;zh<Jr;++zh)Uh[zh]>Om&&(Om=Uh[zh]);u_+=Om}}if(Vs.nd=Gd,Vs.Qb=0,Gd&&(Vs.qb=(nl[3][il[3]+0].value<<24|nl[1][il[1]+0].value<<16|nl[2][il[2]+0].value)>>>0,c_==0&&256>nl[0][il[0]+0].value&&(Vs.Qb=1,Vs.qb+=nl[0][il[0]+0].value<<8)),Vs.jc=!Vs.Qb&&6>u_,Vs.jc){var Zd,ja=Vs;for(Zd=0;Zd<$n;++Zd){var Bo=Zd,Vo=ja.pd[Bo],e0=ja.G[0][ja.H[0]+Bo];256<=e0.value?(Vo.g=e0.g+256,Vo.value=e0.value):(Vo.g=0,Vo.value=0,Bo>>=Hr(e0,8,Vo),Bo>>=Hr(ja.G[1][ja.H[1]+Bo],16,Vo),Bo>>=Hr(ja.G[2][ja.H[2]+Bo],0,Vo),Hr(ja.G[3][ja.H[3]+Bo],24,Vo))}}}Rn.vc=Gn,Rn.Wb=Ei,Rn.Ya=Hd,Rn.yc=km,Nr=1;break t}Nr=0}if(!(q=Nr)){I.a=3;break e}if(0<be){if(Q.ua=1<<be,!at(Q.Wa,be)){I.a=1,q=0;break e}}else Q.ua=0;var Mm=I,w_=z,i4=H,Bm=Mm.s,Vm=Bm.xc;if(Mm.c=w_,Mm.i=i4,Bm.md=_t(w_,Vm),Bm.wc=Vm==0?-1:(1<<Vm)-1,y){I.xb=FS;break e}if((he=s(z*H))==null){I.a=1,q=0;break e}q=(q=te(I,he,0,z,H,H,null))&&!G.h;break e}return q?(O!=null?O[0]=he:(e(he==null),e(y)),I.$=0,y||ye(Q)):ye(Q),q}function Te(h,m){var y=h.c*h.i,I=y+m+16*m;return e(h.c<=m),h.V=s(I),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+y+m,1)}function Pe(h,m){var y=h.C,I=m-y,O=h.V,q=h.Ba+h.c*y;for(e(m<=h.l.o);0<I;){var z=16<I?16:I,H=h.l.ma,G=h.l.width,Q=G*z,he=H.ca,be=H.tb+G*y,Ae=h.Ta,ge=h.Ua;j(h,z,O,q),cn(Ae,ge,he,be,Q),X(H,y,y+z,he,be,G),I-=z,O+=z*h.c,y+=z}e(y==m),h.C=h.Ma=m}function Ke(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function mt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function et(){this.Yb=function(){var h=[];return function m(y,I,O){for(var q=O[I],z=0;z<q&&(y.push(O.length>I+1?[]:0),!(O.length<I+1));z++)m(y[z],I+1,O)}(h,0,[3,11]),h}()}function lt(){this.jb=s(3),this.Wc=o([4,8],et),this.Xc=o([4,17],et)}function Lt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function rr(){this.ld=this.La=this.dd=this.tc=0}function nr(){this.Na=this.la=0}function br(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function _i(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Cs(){this.uc=this.M=this.Nb=0,this.wa=Array(new rr),this.Y=0,this.ya=Array(new _i),this.aa=0,this.l=new es}function Zi(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Fi(){this.cb=this.a=0,this.sc="",this.m=new nt,this.Od=new Ke,this.Kc=new it,this.ed=new Lt,this.Qa=new mt,this.Ic=this.$c=this.Aa=0,this.D=new Cs,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,nt),this.ia=0,this.pb=a(4,br),this.Pa=new lt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Zi),this.Hd=0,this.rb=Array(new nr),this.sb=0,this.wa=Array(new rr),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new _i),this.L=this.aa=0,this.gd=o([4,2],rr),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function es(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function zn(){var h=new Fi;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,Bh||(Bh=Vu)),h}function Fr(h,m,y){return h.a==0&&(h.a=m,h.sc=y,h.cb=0),0}function Tc(h,m,y){return 3<=y&&h[m+0]==157&&h[m+1]==1&&h[m+2]==42}function bc(h,m){if(h==null)return 0;if(h.a=0,h.sc="OK",m==null)return Fr(h,2,"null VP8Io passed to VP8GetHeaders()");var y=m.data,I=m.w,O=m.ha;if(4>O)return Fr(h,7,"Truncated header.");var q=y[I+0]|y[I+1]<<8|y[I+2]<<16,z=h.Od;if(z.Rb=!(1&q),z.td=q>>1&7,z.yd=q>>4&1,z.ub=q>>5,3<z.td)return Fr(h,3,"Incorrect keyframe parameters.");if(!z.yd)return Fr(h,4,"Frame not displayable.");I+=3,O-=3;var H=h.Kc;if(z.Rb){if(7>O)return Fr(h,7,"cannot parse picture header");if(!Tc(y,I,O))return Fr(h,3,"Bad code word");H.c=16383&(y[I+4]<<8|y[I+3]),H.Td=y[I+4]>>6,H.i=16383&(y[I+6]<<8|y[I+5]),H.Ud=y[I+6]>>6,I+=7,O-=7,h.za=H.c+15>>4,h.Ub=H.i+15>>4,m.width=H.c,m.height=H.i,m.Da=0,m.j=0,m.v=0,m.va=m.width,m.o=m.height,m.da=0,m.ib=m.width,m.hb=m.height,m.U=m.width,m.T=m.height,i((q=h.Pa).jb,0,255,q.jb.length),e((q=h.Qa)!=null),q.Cb=0,q.Bb=0,q.Fb=1,i(q.Zb,0,0,q.Zb.length),i(q.Lb,0,0,q.Lb)}if(z.ub>O)return Fr(h,7,"bad partition length");ve(q=h.m,y,I,z.ub),I+=z.ub,O-=z.ub,z.Rb&&(H.Ld=le(q),H.Kd=le(q)),H=h.Qa;var G,Q=h.Pa;if(e(q!=null),e(H!=null),H.Cb=le(q),H.Cb){if(H.Bb=le(q),le(q)){for(H.Fb=le(q),G=0;4>G;++G)H.Zb[G]=le(q)?Ne(q,7):0;for(G=0;4>G;++G)H.Lb[G]=le(q)?Ne(q,6):0}if(H.Bb)for(G=0;3>G;++G)Q.jb[G]=le(q)?Ee(q,8):255}else H.Bb=0;if(q.Ka)return Fr(h,3,"cannot parse segment header");if((H=h.ed).zd=le(q),H.Tb=Ee(q,6),H.wb=Ee(q,3),H.Pc=le(q),H.Pc&&le(q)){for(Q=0;4>Q;++Q)le(q)&&(H.vd[Q]=Ne(q,6));for(Q=0;4>Q;++Q)le(q)&&(H.od[Q]=Ne(q,6))}if(h.L=H.Tb==0?0:H.zd?1:2,q.Ka)return Fr(h,3,"cannot parse filter header");var he=O;if(O=G=I,I=G+he,H=he,h.Xb=(1<<Ee(h.m,2))-1,he<3*(Q=h.Xb))y=7;else{for(G+=3*Q,H-=3*Q,he=0;he<Q;++he){var be=y[O+0]|y[O+1]<<8|y[O+2]<<16;be>H&&(be=H),ve(h.Jc[+he],y,G,be),G+=be,H-=be,O+=3}ve(h.Jc[+Q],y,G,H),y=G<I?0:5}if(y!=0)return Fr(h,y,"cannot parse partitions");for(y=Ee(G=h.m,7),O=le(G)?Ne(G,4):0,I=le(G)?Ne(G,4):0,H=le(G)?Ne(G,4):0,Q=le(G)?Ne(G,4):0,G=le(G)?Ne(G,4):0,he=h.Qa,be=0;4>be;++be){if(he.Cb){var Ae=he.Zb[be];he.Fb||(Ae+=y)}else{if(0<be){h.pb[be]=h.pb[0];continue}Ae=y}var ge=h.pb[be];ge.Sc[0]=Pm[fr(Ae+O,127)],ge.Sc[1]=Nm[fr(Ae+0,127)],ge.Eb[0]=2*Pm[fr(Ae+I,127)],ge.Eb[1]=101581*Nm[fr(Ae+H,127)]>>16,8>ge.Eb[1]&&(ge.Eb[1]=8),ge.Qc[0]=Pm[fr(Ae+Q,117)],ge.Qc[1]=Nm[fr(Ae+G,127)],ge.lc=Ae+G}if(!z.Rb)return Fr(h,4,"Not a key frame.");for(le(q),z=h.Pa,y=0;4>y;++y){for(O=0;8>O;++O)for(I=0;3>I;++I)for(H=0;11>H;++H)Q=ue(q,LS[y][O][I][H])?Ee(q,8):kS[y][O][I][H],z.Wc[y][O].Yb[I][H]=Q;for(O=0;17>O;++O)z.Xc[y][O]=z.Wc[y][DS[O]]}return h.kc=le(q),h.kc&&(h.Bd=Ee(q,8)),h.cb=1}function Vu(h,m,y,I,O,q,z){var H=m[O].Yb[y];for(y=0;16>O;++O){if(!ue(h,H[y+0]))return O;for(;!ue(h,H[y+1]);)if(H=m[++O].Yb[0],y=0,O==16)return 16;var G=m[O+1].Yb;if(ue(h,H[y+2])){var Q=h,he=0;if(ue(Q,(Ae=H)[(be=y)+3]))if(ue(Q,Ae[be+6])){for(H=0,be=2*(he=ue(Q,Ae[be+8]))+(Ae=ue(Q,Ae[be+9+he])),he=0,Ae=NS[be];Ae[H];++H)he+=he+ue(Q,Ae[H]);he+=3+(8<<be)}else ue(Q,Ae[be+7])?(he=7+2*ue(Q,165),he+=ue(Q,145)):he=5+ue(Q,159);else he=ue(Q,Ae[be+4])?3+ue(Q,Ae[be+5]):2;H=G[2]}else he=1,H=G[1];G=z+CS[O],0>(Q=h).b&&ae(Q);var be,Ae=Q.b,ge=(be=Q.Ca>>1)-(Q.I>>Ae)>>31;--Q.b,Q.Ca+=ge,Q.Ca|=1,Q.I-=(be+1&ge)<<Ae,q[G]=((he^ge)-ge)*I[(0<O)+0]}return 16}function Ac(h){var m=h.rb[h.sb-1];m.la=0,m.Na=0,i(h.zc,0,0,h.zc.length),h.ja=0}function Uu(h,m){if(h==null)return 0;if(m==null)return Fr(h,2,"NULL VP8Io parameter in VP8Decode().");if(!h.cb&&!bc(h,m))return 0;if(e(h.cb),m.ac==null||m.ac(m)){m.ob&&(h.L=0);var y=Wd[h.L];if(h.L==2?(h.yb=0,h.zb=0):(h.yb=m.v-y>>4,h.zb=m.j-y>>4,0>h.yb&&(h.yb=0),0>h.zb&&(h.zb=0)),h.Va=m.o+15+y>>4,h.Hb=m.va+15+y>>4,h.Hb>h.za&&(h.Hb=h.za),h.Va>h.Ub&&(h.Va=h.Ub),0<h.L){var I=h.ed;for(y=0;4>y;++y){var O;if(h.Qa.Cb){var q=h.Qa.Lb[y];h.Qa.Fb||(q+=I.Tb)}else q=I.Tb;for(O=0;1>=O;++O){var z=h.gd[y][O],H=q;if(I.Pc&&(H+=I.vd[0],O&&(H+=I.od[0])),0<(H=0>H?0:63<H?63:H)){var G=H;0<I.wb&&(G=4<I.wb?G>>2:G>>1)>9-I.wb&&(G=9-I.wb),1>G&&(G=1),z.dd=G,z.tc=2*H+G,z.ld=40<=H?2:15<=H?1:0}else z.tc=0;z.La=O}}}y=0}else Fr(h,6,"Frame setup failed"),y=h.a;if(y=y==0){if(y){h.$c=0,0<h.Aa||(h.Ic=GS);e:{y=h.Ic,I=4*(G=h.za);var Q=32*G,he=G+1,be=0<h.L?G*(0<h.Aa?2:1):0,Ae=(h.Aa==2?2:1)*G;if((z=I+832+(O=3*(16*y+Wd[h.L])/2*Q)+(q=h.Fa!=null&&0<h.Fa.length?h.Kc.c*h.Kc.i:0))!=z)y=0;else{if(z>h.Vb){if(h.Vb=0,h.Ec=s(z),h.Fc=0,h.Ec==null){y=Fr(h,1,"no memory during frame initialization.");break e}h.Vb=z}z=h.Ec,H=h.Fc,h.Ac=z,h.Bc=H,H+=I,h.Gd=a(Q,Zi),h.Hd=0,h.rb=a(he+1,nr),h.sb=1,h.wa=be?a(be,rr):null,h.Y=0,h.D.Nb=0,h.D.wa=h.wa,h.D.Y=h.Y,0<h.Aa&&(h.D.Y+=G),e(!0),h.oc=z,h.pc=H,H+=832,h.ya=a(Ae,_i),h.aa=0,h.D.ya=h.ya,h.D.aa=h.aa,h.Aa==2&&(h.D.aa+=G),h.R=16*G,h.B=8*G,G=(Q=Wd[h.L])*h.R,Q=Q/2*h.B,h.sa=z,h.ta=H+G,h.qa=h.sa,h.ra=h.ta+16*y*h.R+Q,h.Ha=h.qa,h.Ia=h.ra+8*y*h.B+Q,h.$c=0,H+=O,h.mb=q?z:null,h.nb=q?H:null,e(H+q<=h.Fc+h.Vb),Ac(h),i(h.Ac,h.Bc,0,I),y=1}}if(y){if(m.ka=0,m.y=h.sa,m.O=h.ta,m.f=h.qa,m.N=h.ra,m.ea=h.Ha,m.Vd=h.Ia,m.fa=h.R,m.Rc=h.B,m.F=null,m.J=0,!Fd){for(y=-255;255>=y;++y)In[255+y]=0>y?-y:y;for(y=-1020;1020>=y;++y)Ba[1020+y]=-128>y?-128:127<y?127:y;for(y=-112;112>=y;++y)Mh[112+y]=-16>y?-16:15<y?15:y;for(y=-255;510>=y;++y)tl[255+y]=0>y?0:255<y?255:y;Fd=1}Qu=Ca,Ma=po,Dh=Ic,xi=dr,_s=Na,on=Pa,Zu=xo,Dd=Fs,Fh=To,Oc=Dc,Mc=Eo,ko=Ra,Bc=bo,el=ta,Vc=ka,Ro=ns,Oh=An,ys=Hu,Bs[0]=gs,Bs[1]=Sh,Bs[2]=Zs,Bs[3]=Nh,Bs[4]=zu,Bs[5]=vo,Bs[6]=ts,Bs[7]=Pc,Bs[8]=yo,Bs[9]=_o,Lo[0]=Qs,Lo[1]=Ph,Lo[2]=Rs,Lo[3]=mo,Lo[4]=Or,Lo[5]=qu,Lo[6]=Sc,Va[0]=Ds,Va[1]=ju,Va[2]=Wu,Va[3]=Ls,Va[4]=hr,Va[5]=Nc,Va[6]=Cc,y=1}else y=0}y&&(y=function(ge,qe){for(ge.M=0;ge.M<ge.Va;++ge.M){var De,fe=ge.Jc[ge.M&ge.Xb],de=ge.m,Ue=ge;for(De=0;De<Ue.za;++De){var Ge=de,je=Ue,yt=je.Ac,ht=je.Bc+4*De,Rt=je.zc,vt=je.ya[je.aa+De];if(je.Qa.Bb?vt.$b=ue(Ge,je.Pa.jb[0])?2+ue(Ge,je.Pa.jb[2]):ue(Ge,je.Pa.jb[1]):vt.$b=0,je.kc&&(vt.Ad=ue(Ge,je.Bd)),vt.Za=!ue(Ge,145)+0,vt.Za){var ur=vt.Ob,pr=0;for(je=0;4>je;++je){var sr,Jt=Rt[0+je];for(sr=0;4>sr;++sr){Jt=RS[yt[ht+sr]][Jt];for(var Nr=Jv[ue(Ge,Jt[0])];0<Nr;)Nr=Jv[2*Nr+ue(Ge,Jt[Nr])];Jt=-Nr,yt[ht+sr]=Jt}n(ur,pr,yt,ht,4),pr+=4,Rt[0+je]=Jt}}else Jt=ue(Ge,156)?ue(Ge,128)?1:3:ue(Ge,163)?2:0,vt.Ob[0]=Jt,i(yt,ht,Jt,4),i(Rt,0,Jt,4);vt.Dd=ue(Ge,142)?ue(Ge,114)?ue(Ge,183)?1:3:2:0}if(Ue.m.Ka)return Fr(ge,7,"Premature end-of-partition0 encountered.");for(;ge.ja<ge.za;++ge.ja){if(Ue=fe,Ge=(de=ge).rb[de.sb-1],yt=de.rb[de.sb+de.ja],De=de.ya[de.aa+de.ja],ht=de.kc?De.Ad:0)Ge.la=yt.la=0,De.Za||(Ge.Na=yt.Na=0),De.Hc=0,De.Gc=0,De.ia=0;else{var Ar,zt;if(Ge=yt,yt=Ue,ht=de.Pa.Xc,Rt=de.ya[de.aa+de.ja],vt=de.pb[Rt.$b],je=Rt.ad,ur=0,pr=de.rb[de.sb-1],Jt=sr=0,i(je,ur,0,384),Rt.Za)var vn=0,Vi=ht[3];else{Nr=s(16);var _n=Ge.Na+pr.Na;if(_n=Bh(yt,ht[1],_n,vt.Eb,0,Nr,0),Ge.Na=pr.Na=(0<_n)+0,1<_n)Qu(Nr,0,je,ur);else{var Ui=Nr[0]+3>>3;for(Nr=0;256>Nr;Nr+=16)je[ur+Nr]=Ui}vn=1,Vi=ht[0]}var mr=15&Ge.la,ss=15&pr.la;for(Nr=0;4>Nr;++Nr){var as=1&ss;for(Ui=zt=0;4>Ui;++Ui)mr=mr>>1|(as=(_n=Bh(yt,Vi,_n=as+(1&mr),vt.Sc,vn,je,ur))>vn)<<7,zt=zt<<2|(3<_n?3:1<_n?2:je[ur+0]!=0),ur+=16;mr>>=4,ss=ss>>1|as<<7,sr=(sr<<8|zt)>>>0}for(Vi=mr,vn=ss>>4,Ar=0;4>Ar;Ar+=2){for(zt=0,mr=Ge.la>>4+Ar,ss=pr.la>>4+Ar,Nr=0;2>Nr;++Nr){for(as=1&ss,Ui=0;2>Ui;++Ui)_n=as+(1&mr),mr=mr>>1|(as=0<(_n=Bh(yt,ht[2],_n,vt.Qc,0,je,ur)))<<3,zt=zt<<2|(3<_n?3:1<_n?2:je[ur+0]!=0),ur+=16;mr>>=2,ss=ss>>1|as<<5}Jt|=zt<<4*Ar,Vi|=mr<<4<<Ar,vn|=(240&ss)<<Ar}Ge.la=Vi,pr.la=vn,Rt.Hc=sr,Rt.Gc=Jt,Rt.ia=43690&Jt?0:vt.ia,ht=!(sr|Jt)}if(0<de.L&&(de.wa[de.Y+de.ja]=de.gd[De.$b][De.Za],de.wa[de.Y+de.ja].La|=!ht),Ue.Ka)return Fr(ge,7,"Premature end-of-file encountered.")}if(Ac(ge),de=qe,Ue=1,De=(fe=ge).D,Ge=0<fe.L&&fe.M>=fe.zb&&fe.M<=fe.Va,fe.Aa==0)e:{if(De.M=fe.M,De.uc=Ge,na(fe,De),Ue=1,De=(zt=fe.D).Nb,Ge=(Jt=Wd[fe.L])*fe.R,yt=Jt/2*fe.B,Nr=16*De*fe.R,Ui=8*De*fe.B,ht=fe.sa,Rt=fe.ta-Ge+Nr,vt=fe.qa,je=fe.ra-yt+Ui,ur=fe.Ha,pr=fe.Ia-yt+Ui,ss=(mr=zt.M)==0,sr=mr>=fe.Va-1,fe.Aa==2&&na(fe,zt),zt.uc)for(as=(_n=fe).D.M,e(_n.D.uc),zt=_n.yb;zt<_n.Hb;++zt){vn=zt,Vi=as;var Rn=(Gn=(Jr=_n).D).Nb;Ar=Jr.R;var Gn=Gn.wa[Gn.Y+vn],Ei=Jr.sa,Ts=Jr.ta+16*Rn*Ar+16*vn,sa=Gn.dd,Ln=Gn.tc;if(Ln!=0)if(e(3<=Ln),Jr.L==1)0<vn&&Ro(Ei,Ts,Ar,Ln+4),Gn.La&&ys(Ei,Ts,Ar,Ln),0<Vi&&Vc(Ei,Ts,Ar,Ln+4),Gn.La&&Oh(Ei,Ts,Ar,Ln);else{var Ua=Jr.B,Uc=Jr.qa,rl=Jr.ra+8*Rn*Ua+8*vn,Fo=Jr.Ha,Jr=Jr.Ia+8*Rn*Ua+8*vn;Rn=Gn.ld,0<vn&&(Dd(Ei,Ts,Ar,Ln+4,sa,Rn),Oc(Uc,rl,Fo,Jr,Ua,Ln+4,sa,Rn)),Gn.La&&(ko(Ei,Ts,Ar,Ln,sa,Rn),el(Uc,rl,Fo,Jr,Ua,Ln,sa,Rn)),0<Vi&&(Zu(Ei,Ts,Ar,Ln+4,sa,Rn),Fh(Uc,rl,Fo,Jr,Ua,Ln+4,sa,Rn)),Gn.La&&(Mc(Ei,Ts,Ar,Ln,sa,Rn),Bc(Uc,rl,Fo,Jr,Ua,Ln,sa,Rn))}}if(fe.ia&&alert("todo:DitherRow"),de.put!=null){if(zt=16*mr,mr=16*(mr+1),ss?(de.y=fe.sa,de.O=fe.ta+Nr,de.f=fe.qa,de.N=fe.ra+Ui,de.ea=fe.Ha,de.W=fe.Ia+Ui):(zt-=Jt,de.y=ht,de.O=Rt,de.f=vt,de.N=je,de.ea=ur,de.W=pr),sr||(mr-=Jt),mr>de.o&&(mr=de.o),de.F=null,de.J=null,fe.Fa!=null&&0<fe.Fa.length&&zt<mr&&(de.J=Po(fe,de,zt,mr-zt),de.F=fe.mb,de.F==null&&de.F.length==0)){Ue=Fr(fe,3,"Could not decode alpha data.");break e}zt<de.j&&(Jt=de.j-zt,zt=de.j,e(!(1&Jt)),de.O+=fe.R*Jt,de.N+=fe.B*(Jt>>1),de.W+=fe.B*(Jt>>1),de.F!=null&&(de.J+=de.width*Jt)),zt<mr&&(de.O+=de.v,de.N+=de.v>>1,de.W+=de.v>>1,de.F!=null&&(de.J+=de.v),de.ka=zt-de.j,de.U=de.va-de.v,de.T=mr-zt,Ue=de.put(de))}De+1!=fe.Ic||sr||(n(fe.sa,fe.ta-Ge,ht,Rt+16*fe.R,Ge),n(fe.qa,fe.ra-yt,vt,je+8*fe.B,yt),n(fe.Ha,fe.Ia-yt,ur,pr+8*fe.B,yt))}if(!Ue)return Fr(ge,6,"Output aborted.")}return 1}(h,m)),m.bc!=null&&m.bc(m),y&=1}return y?(h.cb=0,y):0}function Oi(h,m,y,I,O){O=h[m+y+32*I]+(O>>3),h[m+y+32*I]=-256&O?0>O?0:255:O}function fo(h,m,y,I,O,q){Oi(h,m,0,y,I+O),Oi(h,m,1,y,I+q),Oi(h,m,2,y,I-q),Oi(h,m,3,y,I-O)}function Xr(h){return(20091*h>>16)+h}function yi(h,m,y,I){var O,q=0,z=s(16);for(O=0;4>O;++O){var H=h[m+0]+h[m+8],G=h[m+0]-h[m+8],Q=(35468*h[m+4]>>16)-Xr(h[m+12]),he=Xr(h[m+4])+(35468*h[m+12]>>16);z[q+0]=H+he,z[q+1]=G+Q,z[q+2]=G-Q,z[q+3]=H-he,q+=4,m++}for(O=q=0;4>O;++O)H=(h=z[q+0]+4)+z[q+8],G=h-z[q+8],Q=(35468*z[q+4]>>16)-Xr(z[q+12]),Oi(y,I,0,0,H+(he=Xr(z[q+4])+(35468*z[q+12]>>16))),Oi(y,I,1,0,G+Q),Oi(y,I,2,0,G-Q),Oi(y,I,3,0,H-he),q++,I+=32}function Pa(h,m,y,I){var O=h[m+0]+4,q=35468*h[m+4]>>16,z=Xr(h[m+4]),H=35468*h[m+1]>>16;fo(y,I,0,O+z,h=Xr(h[m+1]),H),fo(y,I,1,O+q,h,H),fo(y,I,2,O-q,h,H),fo(y,I,3,O-z,h,H)}function po(h,m,y,I,O){yi(h,m,y,I),O&&yi(h,m+16,y,I+4)}function Ic(h,m,y,I){Ma(h,m+0,y,I,1),Ma(h,m+32,y,I+128,1)}function dr(h,m,y,I){var O;for(h=h[m+0]+4,O=0;4>O;++O)for(m=0;4>m;++m)Oi(y,I,m,O,h)}function Na(h,m,y,I){h[m+0]&&xi(h,m+0,y,I),h[m+16]&&xi(h,m+16,y,I+4),h[m+32]&&xi(h,m+32,y,I+128),h[m+48]&&xi(h,m+48,y,I+128+4)}function Ca(h,m,y,I){var O,q=s(16);for(O=0;4>O;++O){var z=h[m+0+O]+h[m+12+O],H=h[m+4+O]+h[m+8+O],G=h[m+4+O]-h[m+8+O],Q=h[m+0+O]-h[m+12+O];q[0+O]=z+H,q[8+O]=z-H,q[4+O]=Q+G,q[12+O]=Q-G}for(O=0;4>O;++O)z=(h=q[0+4*O]+3)+q[3+4*O],H=q[1+4*O]+q[2+4*O],G=q[1+4*O]-q[2+4*O],Q=h-q[3+4*O],y[I+0]=z+H>>3,y[I+16]=Q+G>>3,y[I+32]=z-H>>3,y[I+48]=Q-G>>3,I+=64}function ks(h,m,y){var I,O=m-32,q=is,z=255-h[O-1];for(I=0;I<y;++I){var H,G=q,Q=z+h[m-1];for(H=0;H<y;++H)h[m+H]=G[Q+h[O+H]];m+=32}}function Sh(h,m){ks(h,m,4)}function ju(h,m){ks(h,m,8)}function Ph(h,m){ks(h,m,16)}function Rs(h,m){var y;for(y=0;16>y;++y)n(h,m+32*y,h,m-32,16)}function mo(h,m){var y;for(y=16;0<y;--y)i(h,m,h[m-1],16),m+=32}function go(h,m,y){var I;for(I=0;16>I;++I)i(m,y+32*I,h,16)}function Qs(h,m){var y,I=16;for(y=0;16>y;++y)I+=h[m-1+32*y]+h[m+y-32];go(I>>5,h,m)}function Or(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m-1+32*y];go(I>>4,h,m)}function qu(h,m){var y,I=8;for(y=0;16>y;++y)I+=h[m+y-32];go(I>>4,h,m)}function Sc(h,m){go(128,h,m)}function Mt(h,m,y){return h+2*m+y+2>>2}function Zs(h,m){var y,I=m-32;for(I=new Uint8Array([Mt(h[I-1],h[I+0],h[I+1]),Mt(h[I+0],h[I+1],h[I+2]),Mt(h[I+1],h[I+2],h[I+3]),Mt(h[I+2],h[I+3],h[I+4])]),y=0;4>y;++y)n(h,m+32*y,I,0,I.length)}function Nh(h,m){var y=h[m-1],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96];xe(h,m+0,16843009*Mt(h[m-1-32],y,I)),xe(h,m+32,16843009*Mt(y,I,O)),xe(h,m+64,16843009*Mt(I,O,q)),xe(h,m+96,16843009*Mt(O,q,q))}function gs(h,m){var y,I=4;for(y=0;4>y;++y)I+=h[m+y-32]+h[m-1+32*y];for(I>>=3,y=0;4>y;++y)i(h,m+32*y,I,4)}function zu(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1-32],z=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+96]=Mt(I,O,h[m-1+96]),h[m+1+96]=h[m+0+64]=Mt(y,I,O),h[m+2+96]=h[m+1+64]=h[m+0+32]=Mt(q,y,I),h[m+3+96]=h[m+2+64]=h[m+1+32]=h[m+0+0]=Mt(z,q,y),h[m+3+64]=h[m+2+32]=h[m+1+0]=Mt(H,z,q),h[m+3+32]=h[m+2+0]=Mt(G,H,z),h[m+3+0]=Mt(Q,G,H)}function ts(h,m){var y=h[m+1-32],I=h[m+2-32],O=h[m+3-32],q=h[m+4-32],z=h[m+5-32],H=h[m+6-32],G=h[m+7-32];h[m+0+0]=Mt(h[m+0-32],y,I),h[m+1+0]=h[m+0+32]=Mt(y,I,O),h[m+2+0]=h[m+1+32]=h[m+0+64]=Mt(I,O,q),h[m+3+0]=h[m+2+32]=h[m+1+64]=h[m+0+96]=Mt(O,q,z),h[m+3+32]=h[m+2+64]=h[m+1+96]=Mt(q,z,H),h[m+3+64]=h[m+2+96]=Mt(z,H,G),h[m+3+96]=Mt(H,G,G)}function vo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1-32],z=h[m+0-32],H=h[m+1-32],G=h[m+2-32],Q=h[m+3-32];h[m+0+0]=h[m+1+64]=q+z+1>>1,h[m+1+0]=h[m+2+64]=z+H+1>>1,h[m+2+0]=h[m+3+64]=H+G+1>>1,h[m+3+0]=G+Q+1>>1,h[m+0+96]=Mt(O,I,y),h[m+0+64]=Mt(I,y,q),h[m+0+32]=h[m+1+96]=Mt(y,q,z),h[m+1+32]=h[m+2+96]=Mt(q,z,H),h[m+2+32]=h[m+3+96]=Mt(z,H,G),h[m+3+32]=Mt(H,G,Q)}function Pc(h,m){var y=h[m+0-32],I=h[m+1-32],O=h[m+2-32],q=h[m+3-32],z=h[m+4-32],H=h[m+5-32],G=h[m+6-32],Q=h[m+7-32];h[m+0+0]=y+I+1>>1,h[m+1+0]=h[m+0+64]=I+O+1>>1,h[m+2+0]=h[m+1+64]=O+q+1>>1,h[m+3+0]=h[m+2+64]=q+z+1>>1,h[m+0+32]=Mt(y,I,O),h[m+1+32]=h[m+0+96]=Mt(I,O,q),h[m+2+32]=h[m+1+96]=Mt(O,q,z),h[m+3+32]=h[m+2+96]=Mt(q,z,H),h[m+3+64]=Mt(z,H,G),h[m+3+96]=Mt(H,G,Q)}function _o(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96];h[m+0+0]=y+I+1>>1,h[m+2+0]=h[m+0+32]=I+O+1>>1,h[m+2+32]=h[m+0+64]=O+q+1>>1,h[m+1+0]=Mt(y,I,O),h[m+3+0]=h[m+1+32]=Mt(I,O,q),h[m+3+32]=h[m+1+64]=Mt(O,q,q),h[m+3+64]=h[m+2+64]=h[m+0+96]=h[m+1+96]=h[m+2+96]=h[m+3+96]=q}function yo(h,m){var y=h[m-1+0],I=h[m-1+32],O=h[m-1+64],q=h[m-1+96],z=h[m-1-32],H=h[m+0-32],G=h[m+1-32],Q=h[m+2-32];h[m+0+0]=h[m+2+32]=y+z+1>>1,h[m+0+32]=h[m+2+64]=I+y+1>>1,h[m+0+64]=h[m+2+96]=O+I+1>>1,h[m+0+96]=q+O+1>>1,h[m+3+0]=Mt(H,G,Q),h[m+2+0]=Mt(z,H,G),h[m+1+0]=h[m+3+32]=Mt(y,z,H),h[m+1+32]=h[m+3+64]=Mt(I,y,z),h[m+1+64]=h[m+3+96]=Mt(O,I,y),h[m+1+96]=Mt(q,O,I)}function Wu(h,m){var y;for(y=0;8>y;++y)n(h,m+32*y,h,m-32,8)}function Ls(h,m){var y;for(y=0;8>y;++y)i(h,m,h[m-1],8),m+=32}function rs(h,m,y){var I;for(I=0;8>I;++I)i(m,y+32*I,h,8)}function Ds(h,m){var y,I=8;for(y=0;8>y;++y)I+=h[m+y-32]+h[m-1+32*y];rs(I>>4,h,m)}function Nc(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m+y-32];rs(I>>3,h,m)}function hr(h,m){var y,I=4;for(y=0;8>y;++y)I+=h[m-1+32*y];rs(I>>3,h,m)}function Cc(h,m){rs(128,h,m)}function wo(h,m,y){var I=h[m-y],O=h[m+0],q=3*(O-I)+Tm[1020+h[m-2*y]-h[m+y]],z=Od[112+(q+4>>3)];h[m-y]=is[255+I+Od[112+(q+3>>3)]],h[m+0]=is[255+O-z]}function kc(h,m,y,I){var O=h[m+0],q=h[m+y];return xs[255+h[m-2*y]-h[m-y]]>I||xs[255+q-O]>I}function Rc(h,m,y,I){return 4*xs[255+h[m-y]-h[m+0]]+xs[255+h[m-2*y]-h[m+y]]<=I}function Lc(h,m,y,I,O){var q=h[m-3*y],z=h[m-2*y],H=h[m-y],G=h[m+0],Q=h[m+y],he=h[m+2*y],be=h[m+3*y];return 4*xs[255+H-G]+xs[255+z-Q]>I?0:xs[255+h[m-4*y]-q]<=O&&xs[255+q-z]<=O&&xs[255+z-H]<=O&&xs[255+be-he]<=O&&xs[255+he-Q]<=O&&xs[255+Q-G]<=O}function ka(h,m,y,I){var O=2*I+1;for(I=0;16>I;++I)Rc(h,m+I,y,O)&&wo(h,m+I,y)}function ns(h,m,y,I){var O=2*I+1;for(I=0;16>I;++I)Rc(h,m+I*y,1,O)&&wo(h,m+I*y,1)}function An(h,m,y,I){var O;for(O=3;0<O;--O)ka(h,m+=4*y,y,I)}function Hu(h,m,y,I){var O;for(O=3;0<O;--O)ns(h,m+=4,y,I)}function ea(h,m,y,I,O,q,z,H){for(q=2*q+1;0<O--;){if(Lc(h,m,y,q,z))if(kc(h,m,y,H))wo(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-2*he],Ae=G[Q-he],ge=G[Q+0],qe=G[Q+he],De=G[Q+2*he],fe=27*(Ue=Tm[1020+3*(ge-Ae)+Tm[1020+be-qe]])+63>>7,de=18*Ue+63>>7,Ue=9*Ue+63>>7;G[Q-3*he]=is[255+G[Q-3*he]+Ue],G[Q-2*he]=is[255+be+de],G[Q-he]=is[255+Ae+fe],G[Q+0]=is[255+ge-fe],G[Q+he]=is[255+qe-de],G[Q+2*he]=is[255+De-Ue]}m+=I}}function Wn(h,m,y,I,O,q,z,H){for(q=2*q+1;0<O--;){if(Lc(h,m,y,q,z))if(kc(h,m,y,H))wo(h,m,y);else{var G=h,Q=m,he=y,be=G[Q-he],Ae=G[Q+0],ge=G[Q+he],qe=Od[112+((De=3*(Ae-be))+4>>3)],De=Od[112+(De+3>>3)],fe=qe+1>>1;G[Q-2*he]=is[255+G[Q-2*he]+fe],G[Q-he]=is[255+be+De],G[Q+0]=is[255+Ae-qe],G[Q+he]=is[255+ge-fe]}m+=I}}function xo(h,m,y,I,O,q){ea(h,m,y,1,16,I,O,q)}function Fs(h,m,y,I,O,q){ea(h,m,1,y,16,I,O,q)}function Eo(h,m,y,I,O,q){var z;for(z=3;0<z;--z)Wn(h,m+=4*y,y,1,16,I,O,q)}function Ra(h,m,y,I,O,q){var z;for(z=3;0<z;--z)Wn(h,m+=4,1,y,16,I,O,q)}function To(h,m,y,I,O,q,z,H){ea(h,m,O,1,8,q,z,H),ea(y,I,O,1,8,q,z,H)}function Dc(h,m,y,I,O,q,z,H){ea(h,m,1,O,8,q,z,H),ea(y,I,1,O,8,q,z,H)}function bo(h,m,y,I,O,q,z,H){Wn(h,m+4*O,O,1,8,q,z,H),Wn(y,I+4*O,O,1,8,q,z,H)}function ta(h,m,y,I,O,q,z,H){Wn(h,m+4,1,O,8,q,z,H),Wn(y,I+4,1,O,8,q,z,H)}function La(){this.ba=new bn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new cr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ao(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Da(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Io(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new se,this.yc=new S}function $u(){this.xb=this.a=0,this.l=new es,this.ca=new bn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new T,this.Pb=0,this.wd=new T,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Io,this.ab=0,this.gc=a(4,Da),this.Oc=0}function Os(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new es,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ra(h,m,y,I,O,q,z){for(h=h==null?0:h[m+0],m=0;m<z;++m)O[q+m]=h+y[I+m]&255,h=O[q+m]}function So(h,m,y,I,O,q,z){var H;if(h==null)ra(null,null,y,I,O,q,z);else for(H=0;H<z;++H)O[q+H]=h[m+H]+y[I+H]&255}function ai(h,m,y,I,O,q,z){if(h==null)ra(null,null,y,I,O,q,z);else{var H,G=h[m+0],Q=G,he=G;for(H=0;H<z;++H)Q=he+(G=h[m+H])-Q,he=y[I+H]+(-256&Q?0>Q?0:255:Q)&255,Q=G,O[q+H]=he}}function Po(h,m,y,I){var O=m.width,q=m.o;if(e(h!=null&&m!=null),0>y||0>=I||y+I>q)return null;if(!h.Cc){if(h.ga==null){var z;if(h.ga=new Os,(z=h.ga==null)||(z=m.width*m.o,e(h.Gb.length==0),h.Gb=s(z),h.Uc=0,h.Gb==null?z=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,z=1),z=!z),!z){z=h.ga;var H=h.Fa,G=h.P,Q=h.qc,he=h.mb,be=h.nb,Ae=G+1,ge=Q-1,qe=z.l;if(e(H!=null&&he!=null&&m!=null),Do[0]=null,Do[1]=ra,Do[2]=So,Do[3]=ai,z.ca=he,z.tb=be,z.c=m.width,z.i=m.height,e(0<z.c&&0<z.i),1>=Q)m=0;else if(z.$a=H[G+0]>>0&3,z.Z=H[G+0]>>2&3,z.Lc=H[G+0]>>4&3,G=H[G+0]>>6&3,0>z.$a||1<z.$a||4<=z.Z||1<z.Lc||G)m=0;else if(qe.put=kn,qe.ac=Kr,qe.bc=vi,qe.ma=z,qe.width=m.width,qe.height=m.height,qe.Da=m.Da,qe.v=m.v,qe.va=m.va,qe.j=m.j,qe.o=m.o,z.$a)e:{e(z.$a==1),m=ke();t:for(;;){if(m==null){m=0;break e}if(e(z!=null),z.mc=m,m.c=z.c,m.i=z.i,m.l=z.l,m.l.ma=z,m.l.width=z.c,m.l.height=z.i,m.a=0,_e(m.m,H,Ae,ge),!we(z.c,z.i,1,m,null)||(m.ab==1&&m.gc[0].hc==3&&Y(m.s)?(z.ic=1,H=m.c*m.i,m.Ta=null,m.Ua=0,m.V=s(H),m.Ba=0,m.V==null?(m.a=1,m=0):m=1):(z.ic=0,m=Te(m,z.c)),!m))break t;m=1;break e}z.mc=null,m=0}else m=ge>=z.c*z.i;z=!m}if(z)return null;h.ga.Lc!=1?h.Ga=0:I=q-y}e(h.ga!=null),e(y+I<=q);e:{if(m=(H=h.ga).c,q=H.l.o,H.$a==0){if(Ae=h.rc,ge=h.Vc,qe=h.Fa,G=h.P+1+y*m,Q=h.mb,he=h.nb+y*m,e(G<=h.P+h.qc),H.Z!=0)for(e(Do[H.Z]!=null),z=0;z<I;++z)Do[H.Z](Ae,ge,qe,G,Q,he,m),Ae=Q,ge=he,he+=m,G+=m;else for(z=0;z<I;++z)n(Q,he,qe,G,m),Ae=Q,ge=he,he+=m,G+=m;h.rc=Ae,h.Vc=ge}else{if(e(H.mc!=null),m=y+I,e((z=H.mc)!=null),e(m<=z.i),z.C>=m)m=1;else if(H.ic||me(),H.ic){H=z.V,Ae=z.Ba,ge=z.c;var De=z.i,fe=(qe=1,G=z.$/ge,Q=z.$%ge,he=z.m,be=z.s,z.$),de=ge*De,Ue=ge*m,Ge=be.wc,je=fe<Ue?Ur(be,Q,G):null;e(fe<=de),e(m<=De),e(Y(be));t:for(;;){for(;!he.h&&fe<Ue;){if(Q&Ge||(je=Ur(be,Q,G)),e(je!=null),J(he),256>(De=Yr(je.G[0],je.H[0],he)))H[Ae+fe]=De,++fe,++Q>=ge&&(Q=0,++G<=m&&!(G%16)&&Z(z,G));else{if(!(280>De)){qe=0;break t}De=si(De-256,he);var yt,ht=Yr(je.G[4],je.H[4],he);if(J(he),!(fe>=(ht=gn(ge,ht=si(ht,he)))&&de-fe>=De)){qe=0;break t}for(yt=0;yt<De;++yt)H[Ae+fe+yt]=H[Ae+fe+yt-ht];for(fe+=De,Q+=De;Q>=ge;)Q-=ge,++G<=m&&!(G%16)&&Z(z,G);fe<Ue&&Q&Ge&&(je=Ur(be,Q,G))}e(he.h==B(he))}Z(z,G>m?m:G);break t}!qe||he.h&&fe<de?(qe=0,z.a=he.h?5:3):z.$=fe,m=qe}else m=te(z,z.V,z.Ba,z.c,z.i,m,Pe);if(!m){I=0;break e}}y+I>=q&&(h.Cc=1),I=1}if(!I)return null;if(h.Cc&&((I=h.ga)!=null&&(I.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+y*O}function v(h,m,y,I,O,q){for(;0<O--;){var z,H=h,G=m+(y?1:0),Q=h,he=m+(y?0:3);for(z=0;z<I;++z){var be=Q[he+4*z];be!=255&&(be*=32897,H[G+4*z+0]=H[G+4*z+0]*be>>23,H[G+4*z+1]=H[G+4*z+1]*be>>23,H[G+4*z+2]=H[G+4*z+2]*be>>23)}m+=q}}function F(h,m,y,I,O){for(;0<I--;){var q;for(q=0;q<y;++q){var z=h[m+2*q+0],H=15&(Q=h[m+2*q+1]),G=4369*H,Q=(240&Q|Q>>4)*G>>16;h[m+2*q+0]=(240&z|z>>4)*G>>16&240|(15&z|z<<4)*G>>16>>4&15,h[m+2*q+1]=240&Q|H}m+=O}}function re(h,m,y,I,O,q,z,H){var G,Q,he=255;for(Q=0;Q<O;++Q){for(G=0;G<I;++G){var be=h[m+G];q[z+4*G]=be,he&=be}m+=y,z+=H}return he!=255}function ce(h,m,y,I,O){var q;for(q=0;q<O;++q)y[I+q]=h[m+q]>>8}function me(){ws=v,kr=F,Rr=re,cn=ce}function Oe(h,m,y){A[h]=function(I,O,q,z,H,G,Q,he,be,Ae,ge,qe,De,fe,de,Ue,Ge){var je,yt=Ge-1>>1,ht=H[G+0]|Q[he+0]<<16,Rt=be[Ae+0]|ge[qe+0]<<16;e(I!=null);var vt=3*ht+Rt+131074>>2;for(m(I[O+0],255&vt,vt>>16,De,fe),q!=null&&(vt=3*Rt+ht+131074>>2,m(q[z+0],255&vt,vt>>16,de,Ue)),je=1;je<=yt;++je){var ur=H[G+je]|Q[he+je]<<16,pr=be[Ae+je]|ge[qe+je]<<16,sr=ht+ur+Rt+pr+524296,Jt=sr+2*(ur+Rt)>>3;vt=Jt+ht>>1,ht=(sr=sr+2*(ht+pr)>>3)+ur>>1,m(I[O+2*je-1],255&vt,vt>>16,De,fe+(2*je-1)*y),m(I[O+2*je-0],255&ht,ht>>16,De,fe+(2*je-0)*y),q!=null&&(vt=sr+Rt>>1,ht=Jt+pr>>1,m(q[z+2*je-1],255&vt,vt>>16,de,Ue+(2*je-1)*y),m(q[z+2*je+0],255&ht,ht>>16,de,Ue+(2*je+0)*y)),ht=ur,Rt=pr}1&Ge||(vt=3*ht+Rt+131074>>2,m(I[O+Ge-1],255&vt,vt>>16,De,fe+(Ge-1)*y),q!=null&&(vt=3*Rt+ht+131074>>2,m(q[z+Ge-1],255&vt,vt>>16,de,Ue+(Ge-1)*y)))}}function Ye(){Es[Md]=OS,Es[Bd]=Zv,Es[Kv]=MS,Es[Vd]=e_,Es[Ud]=t_,Es[bm]=r_,Es[Yv]=BS,Es[Am]=Zv,Es[Im]=e_,Es[jd]=t_,Es[Sm]=r_}function dt(h){return h&-16384?0>h?0:255:h>>VS}function f(h,m){return dt((19077*h>>8)+(26149*m>>8)-14234)}function w(h,m,y){return dt((19077*h>>8)-(6419*m>>8)-(13320*y>>8)+8708)}function C(h,m){return dt((19077*h>>8)+(33050*m>>8)-17685)}function W(h,m,y,I,O){I[O+0]=f(h,y),I[O+1]=w(h,m,y),I[O+2]=C(h,m)}function pe(h,m,y,I,O){I[O+0]=C(h,m),I[O+1]=w(h,m,y),I[O+2]=f(h,y)}function Ie(h,m,y,I,O){var q=w(h,m,y);m=q<<3&224|C(h,m)>>3,I[O+0]=248&f(h,y)|q>>5,I[O+1]=m}function Qe(h,m,y,I,O){var q=240&C(h,m)|15;I[O+0]=240&f(h,y)|w(h,m,y)>>4,I[O+1]=q}function Bt(h,m,y,I,O){I[O+0]=255,W(h,m,y,I,O+1)}function Xt(h,m,y,I,O){pe(h,m,y,I,O),I[O+3]=255}function Vt(h,m,y,I,O){W(h,m,y,I,O),I[O+3]=255}function fr(h,m){return 0>h?0:h>m?m:h}function Pr(h,m,y){A[h]=function(I,O,q,z,H,G,Q,he,be){for(var Ae=he+(-2&be)*y;he!=Ae;)m(I[O+0],q[z+0],H[G+0],Q,he),m(I[O+1],q[z+0],H[G+0],Q,he+y),O+=2,++z,++G,he+=2*y;1&be&&m(I[O+0],q[z+0],H[G+0],Q,he)}}function Ms(h,m,y){return y==0?h==0?m==0?6:5:m==0?4:0:y}function Hn(h,m,y,I,O){switch(h>>>30){case 3:Ma(m,y,I,O,0);break;case 2:on(m,y,I,O);break;case 1:xi(m,y,I,O)}}function na(h,m){var y,I,O=m.M,q=m.Nb,z=h.oc,H=h.pc+40,G=h.oc,Q=h.pc+584,he=h.oc,be=h.pc+600;for(y=0;16>y;++y)z[H+32*y-1]=129;for(y=0;8>y;++y)G[Q+32*y-1]=129,he[be+32*y-1]=129;for(0<O?z[H-1-32]=G[Q-1-32]=he[be-1-32]=129:(i(z,H-32-1,127,21),i(G,Q-32-1,127,9),i(he,be-32-1,127,9)),I=0;I<h.za;++I){var Ae=m.ya[m.aa+I];if(0<I){for(y=-1;16>y;++y)n(z,H+32*y-4,z,H+32*y+12,4);for(y=-1;8>y;++y)n(G,Q+32*y-4,G,Q+32*y+4,4),n(he,be+32*y-4,he,be+32*y+4,4)}var ge=h.Gd,qe=h.Hd+I,De=Ae.ad,fe=Ae.Hc;if(0<O&&(n(z,H-32,ge[qe].y,0,16),n(G,Q-32,ge[qe].f,0,8),n(he,be-32,ge[qe].ea,0,8)),Ae.Za){var de=z,Ue=H-32+16;for(0<O&&(I>=h.za-1?i(de,Ue,ge[qe].y[15],4):n(de,Ue,ge[qe+1].y,0,4)),y=0;4>y;y++)de[Ue+128+y]=de[Ue+256+y]=de[Ue+384+y]=de[Ue+0+y];for(y=0;16>y;++y,fe<<=2)de=z,Ue=H+i_[y],Bs[Ae.Ob[y]](de,Ue),Hn(fe,De,16*+y,de,Ue)}else if(de=Ms(I,O,Ae.Ob[0]),Lo[de](z,H),fe!=0)for(y=0;16>y;++y,fe<<=2)Hn(fe,De,16*+y,z,H+i_[y]);for(y=Ae.Gc,de=Ms(I,O,Ae.Dd),Va[de](G,Q),Va[de](he,be),fe=De,de=G,Ue=Q,255&(Ae=y>>0)&&(170&Ae?Dh(fe,256,de,Ue):_s(fe,256,de,Ue)),Ae=he,fe=be,255&(y>>=8)&&(170&y?Dh(De,320,Ae,fe):_s(De,320,Ae,fe)),O<h.Ub-1&&(n(ge[qe].y,0,z,H+480,16),n(ge[qe].f,0,G,Q+224,8),n(ge[qe].ea,0,he,be+224,8)),y=8*q*h.B,ge=h.sa,qe=h.ta+16*I+16*q*h.R,De=h.qa,Ae=h.ra+8*I+y,fe=h.Ha,de=h.Ia+8*I+y,y=0;16>y;++y)n(ge,qe+y*h.R,z,H+32*y,16);for(y=0;8>y;++y)n(De,Ae+y*h.B,G,Q+32*y,8),n(fe,de+y*h.B,he,be+32*y,8)}}function ia(h,m,y,I,O,q,z,H,G){var Q=[0],he=[0],be=0,Ae=G!=null?G.kd:0,ge=G??new Ao;if(h==null||12>y)return 7;ge.data=h,ge.w=m,ge.ha=y,m=[m],y=[y],ge.gb=[ge.gb];e:{var qe=m,De=y,fe=ge.gb;if(e(h!=null),e(De!=null),e(fe!=null),fe[0]=0,12<=De[0]&&!t(h,qe[0],"RIFF")){if(t(h,qe[0]+8,"WEBP")){fe=3;break e}var de=Ze(h,qe[0]+4);if(12>de||4294967286<de){fe=3;break e}if(Ae&&de>De[0]-8){fe=7;break e}fe[0]=de,qe[0]+=12,De[0]-=12}fe=0}if(fe!=0)return fe;for(de=0<ge.gb[0],y=y[0];;){e:{var Ue=h;De=m,fe=y;var Ge=Q,je=he,yt=qe=[0];if((vt=be=[be])[0]=0,8>fe[0])fe=7;else{if(!t(Ue,De[0],"VP8X")){if(Ze(Ue,De[0]+4)!=10){fe=3;break e}if(18>fe[0]){fe=7;break e}var ht=Ze(Ue,De[0]+8),Rt=1+ze(Ue,De[0]+12);if(2147483648<=Rt*(Ue=1+ze(Ue,De[0]+15))){fe=3;break e}yt!=null&&(yt[0]=ht),Ge!=null&&(Ge[0]=Rt),je!=null&&(je[0]=Ue),De[0]+=18,fe[0]-=18,vt[0]=1}fe=0}}if(be=be[0],qe=qe[0],fe!=0)return fe;if(De=!!(2&qe),!de&&be)return 3;if(q!=null&&(q[0]=!!(16&qe)),z!=null&&(z[0]=De),H!=null&&(H[0]=0),z=Q[0],qe=he[0],be&&De&&G==null){fe=0;break}if(4>y){fe=7;break}if(de&&be||!de&&!be&&!t(h,m[0],"ALPH")){y=[y],ge.na=[ge.na],ge.P=[ge.P],ge.Sa=[ge.Sa];e:{ht=h,fe=m,de=y;var vt=ge.gb;Ge=ge.na,je=ge.P,yt=ge.Sa,Rt=22,e(ht!=null),e(de!=null),Ue=fe[0];var ur=de[0];for(e(Ge!=null),e(yt!=null),Ge[0]=null,je[0]=null,yt[0]=0;;){if(fe[0]=Ue,de[0]=ur,8>ur){fe=7;break e}var pr=Ze(ht,Ue+4);if(4294967286<pr){fe=3;break e}var sr=8+pr+1&-2;if(Rt+=sr,0<vt&&Rt>vt){fe=3;break e}if(!t(ht,Ue,"VP8 ")||!t(ht,Ue,"VP8L")){fe=0;break e}if(ur[0]<sr){fe=7;break e}t(ht,Ue,"ALPH")||(Ge[0]=ht,je[0]=Ue+8,yt[0]=pr),Ue+=sr,ur-=sr}}if(y=y[0],ge.na=ge.na[0],ge.P=ge.P[0],ge.Sa=ge.Sa[0],fe!=0)break}y=[y],ge.Ja=[ge.Ja],ge.xa=[ge.xa];e:if(vt=h,fe=m,de=y,Ge=ge.gb[0],je=ge.Ja,yt=ge.xa,ht=fe[0],Ue=!t(vt,ht,"VP8 "),Rt=!t(vt,ht,"VP8L"),e(vt!=null),e(de!=null),e(je!=null),e(yt!=null),8>de[0])fe=7;else{if(Ue||Rt){if(vt=Ze(vt,ht+4),12<=Ge&&vt>Ge-12){fe=3;break e}if(Ae&&vt>de[0]-8){fe=7;break e}je[0]=vt,fe[0]+=8,de[0]-=8,yt[0]=Rt}else yt[0]=5<=de[0]&&vt[ht+0]==47&&!(vt[ht+4]>>5),je[0]=de[0];fe=0}if(y=y[0],ge.Ja=ge.Ja[0],ge.xa=ge.xa[0],m=m[0],fe!=0)break;if(4294967286<ge.Ja)return 3;if(H==null||De||(H[0]=ge.xa?2:1),z=[z],qe=[qe],ge.xa){if(5>y){fe=7;break}H=z,Ae=qe,De=q,h==null||5>y?h=0:5<=y&&h[m+0]==47&&!(h[m+4]>>5)?(de=[0],vt=[0],Ge=[0],_e(je=new T,h,m,y),wt(je,de,vt,Ge)?(H!=null&&(H[0]=de[0]),Ae!=null&&(Ae[0]=vt[0]),De!=null&&(De[0]=Ge[0]),h=1):h=0):h=0}else{if(10>y){fe=7;break}H=qe,h==null||10>y||!Tc(h,m+3,y-3)?h=0:(Ae=h[m+0]|h[m+1]<<8|h[m+2]<<16,De=16383&(h[m+7]<<8|h[m+6]),h=16383&(h[m+9]<<8|h[m+8]),1&Ae||3<(Ae>>1&7)||!(Ae>>4&1)||Ae>>5>=ge.Ja||!De||!h?h=0:(z&&(z[0]=De),H&&(H[0]=h),h=1))}if(!h||(z=z[0],qe=qe[0],be&&(Q[0]!=z||he[0]!=qe)))return 3;G!=null&&(G[0]=ge,G.offset=m-G.w,e(4294967286>m-G.w),e(G.offset==G.ha-y));break}return fe==0||fe==7&&be&&G==null?(q!=null&&(q[0]|=ge.na!=null&&0<ge.na.length),I!=null&&(I[0]=z),O!=null&&(O[0]=qe),0):fe}function Ch(h,m,y){var I=m.width,O=m.height,q=0,z=0,H=I,G=O;if(m.Da=h!=null&&0<h.Da,m.Da&&(H=h.cd,G=h.bd,q=h.v,z=h.j,11>y||(q&=-2,z&=-2),0>q||0>z||0>=H||0>=G||q+H>I||z+G>O))return 0;if(m.v=q,m.j=z,m.va=q+H,m.o=z+G,m.U=H,m.T=G,m.da=h!=null&&0<h.da,m.da){if(!We(H,G,y=[h.ib],q=[h.hb]))return 0;m.ib=y[0],m.hb=q[0]}return m.ob=h!=null&&h.ob,m.Kb=h==null||!h.Sd,m.da&&(m.ob=m.ib<3*I/4&&m.hb<3*O/4,m.Kb=0),1}function kh(h){if(h==null)return 2;if(11>h.S){var m=h.f.RGBA;m.fb+=(h.height-1)*m.A,m.A=-m.A}else m=h.f.kb,h=h.height,m.O+=(h-1)*m.fa,m.fa=-m.fa,m.N+=(h-1>>1)*m.Ab,m.Ab=-m.Ab,m.W+=(h-1>>1)*m.Db,m.Db=-m.Db,m.F!=null&&(m.J+=(h-1)*m.lb,m.lb=-m.lb);return 0}function Gu(h,m,y,I){if(I==null||0>=h||0>=m)return 2;if(y!=null){if(y.Da){var O=y.cd,q=y.bd,z=-2&y.v,H=-2&y.j;if(0>z||0>H||0>=O||0>=q||z+O>h||H+q>m)return 2;h=O,m=q}if(y.da){if(!We(h,m,O=[y.ib],q=[y.hb]))return 2;h=O[0],m=q[0]}}I.width=h,I.height=m;e:{var G=I.width,Q=I.height;if(h=I.S,0>=G||0>=Q||!(h>=Md&&13>h))h=2;else{if(0>=I.Rd&&I.sd==null){z=q=O=m=0;var he=(H=G*s_[h])*Q;if(11>h||(q=(Q+1)/2*(m=(G+1)/2),h==12&&(z=(O=G)*Q)),(Q=s(he+2*q+z))==null){h=1;break e}I.sd=Q,11>h?((G=I.f.RGBA).eb=Q,G.fb=0,G.A=H,G.size=he):((G=I.f.kb).y=Q,G.O=0,G.fa=H,G.Fd=he,G.f=Q,G.N=0+he,G.Ab=m,G.Cd=q,G.ea=Q,G.W=0+he+q,G.Db=m,G.Ed=q,h==12&&(G.F=Q,G.J=0+he+2*q),G.Tc=z,G.lb=O)}if(m=1,O=I.S,q=I.width,z=I.height,O>=Md&&13>O)if(11>O)h=I.f.RGBA,m&=(H=Math.abs(h.A))*(z-1)+q<=h.size,m&=H>=q*s_[O],m&=h.eb!=null;else{h=I.f.kb,H=(q+1)/2,he=(z+1)/2,G=Math.abs(h.fa),Q=Math.abs(h.Ab);var be=Math.abs(h.Db),Ae=Math.abs(h.lb),ge=Ae*(z-1)+q;m&=G*(z-1)+q<=h.Fd,m&=Q*(he-1)+H<=h.Cd,m=(m&=be*(he-1)+H<=h.Ed)&G>=q&Q>=H&be>=H,m&=h.y!=null,m&=h.f!=null,m&=h.ea!=null,O==12&&(m&=Ae>=q,m&=ge<=h.Tc,m&=h.F!=null)}else m=0;h=m?0:2}}return h!=0||y!=null&&y.fd&&(h=kh(I)),h}var $n=64,Ku=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Yu=24,Xu=32,Rh=8,Mi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];rt("Predictor0","PredictorAdd0"),A.Predictor0=function(){return 4278190080},A.Predictor1=function(h){return h},A.Predictor2=function(h,m,y){return m[y+0]},A.Predictor3=function(h,m,y){return m[y+1]},A.Predictor4=function(h,m,y){return m[y-1]},A.Predictor5=function(h,m,y){return ut(ut(h,m[y+1]),m[y+0])},A.Predictor6=function(h,m,y){return ut(h,m[y-1])},A.Predictor7=function(h,m,y){return ut(h,m[y+0])},A.Predictor8=function(h,m,y){return ut(m[y-1],m[y+0])},A.Predictor9=function(h,m,y){return ut(m[y+0],m[y+1])},A.Predictor10=function(h,m,y){return ut(ut(h,m[y-1]),ut(m[y+0],m[y+1]))},A.Predictor11=function(h,m,y){var I=m[y+0];return 0>=Ft(I>>24&255,h>>24&255,(m=m[y-1])>>24&255)+Ft(I>>16&255,h>>16&255,m>>16&255)+Ft(I>>8&255,h>>8&255,m>>8&255)+Ft(255&I,255&h,255&m)?I:h},A.Predictor12=function(h,m,y){var I=m[y+0];return(Tt((h>>24&255)+(I>>24&255)-((m=m[y-1])>>24&255))<<24|Tt((h>>16&255)+(I>>16&255)-(m>>16&255))<<16|Tt((h>>8&255)+(I>>8&255)-(m>>8&255))<<8|Tt((255&h)+(255&I)-(255&m)))>>>0},A.Predictor13=function(h,m,y){var I=m[y-1];return(At((h=ut(h,m[y+0]))>>24&255,I>>24&255)<<24|At(h>>16&255,I>>16&255)<<16|At(h>>8&255,I>>8&255)<<8|At(h>>0&255,I>>0&255))>>>0};var Em=A.PredictorAdd0;A.PredictorAdd1=It,rt("Predictor2","PredictorAdd2"),rt("Predictor3","PredictorAdd3"),rt("Predictor4","PredictorAdd4"),rt("Predictor5","PredictorAdd5"),rt("Predictor6","PredictorAdd6"),rt("Predictor7","PredictorAdd7"),rt("Predictor8","PredictorAdd8"),rt("Predictor9","PredictorAdd9"),rt("Predictor10","PredictorAdd10"),rt("Predictor11","PredictorAdd11"),rt("Predictor12","PredictorAdd12"),rt("Predictor13","PredictorAdd13");var Lh=A.PredictorAdd2;qt("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),qt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var kd,vs=A.ColorIndexInverseTransform,Ju=A.MapARGB,Rd=A.VP8LColorIndexInverseTransformAlpha,Ld=A.MapAlpha,No=A.VP8LPredictorsAdd=[];No.length=16,(A.VP8LPredictors=[]).length=16,(A.VP8LPredictorsAdd_C=[]).length=16,(A.VP8LPredictors_C=[]).length=16;var Fc,Bi,wi,Co,Fa,Oa,Qu,Ma,on,Dh,xi,_s,Zu,Dd,Fh,Oc,Mc,ko,Bc,el,Vc,Ro,Oh,ys,ws,kr,Rr,cn,In=s(511),Ba=s(2041),Mh=s(225),tl=s(767),Fd=0,Tm=Ba,Od=Mh,is=tl,xs=In,Md=0,Bd=1,Kv=2,Vd=3,Ud=4,bm=5,Yv=6,Am=7,Im=8,jd=9,Sm=10,ES=[2,3,7],TS=[3,3,11],Xv=[280,256,256,256,40],bS=[0,1,1,1,0],AS=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],IS=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],SS=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],PS=8,Pm=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Nm=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bh=null,NS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],CS=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Jv=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],kS=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],RS=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],LS=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],DS=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Lo=[],Bs=[],Va=[],FS=1,Qv=2,Do=[],Es=[];Oe("UpsampleRgbLinePair",W,3),Oe("UpsampleBgrLinePair",pe,3),Oe("UpsampleRgbaLinePair",Vt,4),Oe("UpsampleBgraLinePair",Xt,4),Oe("UpsampleArgbLinePair",Bt,4),Oe("UpsampleRgba4444LinePair",Qe,2),Oe("UpsampleRgb565LinePair",Ie,2);var OS=A.UpsampleRgbLinePair,MS=A.UpsampleBgrLinePair,Zv=A.UpsampleRgbaLinePair,e_=A.UpsampleBgraLinePair,t_=A.UpsampleArgbLinePair,r_=A.UpsampleRgba4444LinePair,BS=A.UpsampleRgb565LinePair,qd=16,zd=1<<qd-1,Vh=-227,Cm=482,VS=6,n_=0,US=s(256),jS=s(256),qS=s(256),zS=s(256),WS=s(Cm-Vh),HS=s(Cm-Vh);Pr("YuvToRgbRow",W,3),Pr("YuvToBgrRow",pe,3),Pr("YuvToRgbaRow",Vt,4),Pr("YuvToBgraRow",Xt,4),Pr("YuvToArgbRow",Bt,4),Pr("YuvToRgba4444Row",Qe,2),Pr("YuvToRgb565Row",Ie,2);var i_=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wd=[0,2,8],$S=[8,7,6,4,4,2,2,2,1,1,1,1],GS=1;this.WebPDecodeRGBA=function(h,m,y,I,O){var q=Bd,z=new La,H=new bn;z.ba=H,H.S=q,H.width=[H.width],H.height=[H.height];var G=H.width,Q=H.height,he=new gi;if(he==null||h==null)var be=2;else e(he!=null),be=ia(h,m,y,he.width,he.height,he.Pd,he.Qd,he.format,null);if(be!=0?G=0:(G!=null&&(G[0]=he.width[0]),Q!=null&&(Q[0]=he.height[0]),G=1),G){H.width=H.width[0],H.height=H.height[0],I!=null&&(I[0]=H.width),O!=null&&(O[0]=H.height);e:{if(I=new es,(O=new Ao).data=h,O.w=m,O.ha=y,O.kd=1,m=[0],e(O!=null),((h=ia(O.data,O.w,O.ha,null,null,null,m,null,O))==0||h==7)&&m[0]&&(h=4),(m=h)==0){if(e(z!=null),I.data=O.data,I.w=O.w+O.offset,I.ha=O.ha-O.offset,I.put=kn,I.ac=Kr,I.bc=vi,I.ma=z,O.xa){if((h=ke())==null){z=1;break e}if(function(Ae,ge){var qe=[0],De=[0],fe=[0];t:for(;;){if(Ae==null)return 0;if(ge==null)return Ae.a=2,0;if(Ae.l=ge,Ae.a=0,_e(Ae.m,ge.data,ge.w,ge.ha),!wt(Ae.m,qe,De,fe)){Ae.a=3;break t}if(Ae.xb=Qv,ge.width=qe[0],ge.height=De[0],!we(qe[0],De[0],1,Ae,null))break t;return 1}return e(Ae.a!=0),0}(h,I)){if(I=(m=Gu(I.width,I.height,z.Oa,z.ba))==0){t:{I=h;r:for(;;){if(I==null){I=0;break t}if(e(I.s.yc!=null),e(I.s.Ya!=null),e(0<I.s.Wb),e((y=I.l)!=null),e((O=y.ma)!=null),I.xb!=0){if(I.ca=O.ba,I.tb=O.tb,e(I.ca!=null),!Ch(O.Oa,y,Vd)){I.a=2;break r}if(!Te(I,y.width)||y.da)break r;if((y.da||Kt(I.ca.S))&&me(),11>I.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),I.ca.f.kb.F!=null&&me()),I.Pb&&0<I.s.ua&&I.s.vb.X==null&&!at(I.s.vb,I.s.Wa.Xa)){I.a=1;break r}I.xb=0}if(!te(I,I.V,I.Ba,I.c,I.i,y.o,ee))break r;O.Dc=I.Ma,I=1;break t}e(I.a!=0),I=0}I=!I}I&&(m=h.a)}else m=h.a}else{if((h=new zn)==null){z=1;break e}if(h.Fa=O.na,h.P=O.P,h.qc=O.Sa,bc(h,I)){if((m=Gu(I.width,I.height,z.Oa,z.ba))==0){if(h.Aa=0,y=z.Oa,e((O=h)!=null),y!=null){if(0<(G=0>(G=y.Md)?0:100<G?255:255*G/100)){for(Q=he=0;4>Q;++Q)12>(be=O.pb[Q]).lc&&(be.ia=G*$S[0>be.lc?0:be.lc]>>3),he|=be.ia;he&&(alert("todo:VP8InitRandom"),O.ia=1)}O.Ga=y.Id,100<O.Ga?O.Ga=100:0>O.Ga&&(O.Ga=0)}Uu(h,I)||(m=h.a)}}else m=h.a}m==0&&z.Oa!=null&&z.Oa.fd&&(m=kh(z.ba))}z=m}q=z!=0?null:11>q?H.f.RGBA.eb:H.f.kb.y}else q=null;return q};var s_=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(A,k){for(var V="",b=0;b<4;b++)V+=String.fromCharCode(A[k++]);return V}function l(A,k){return(A[k+0]<<0|A[k+1]<<8|A[k+2]<<16)>>>0}function d(A,k){return(A[k+0]<<0|A[k+1]<<8|A[k+2]<<16|A[k+3]<<24)>>>0}new c;var g=[0],p=[0],x=[],_=new c,E=r,P=function(A,k){var V={},b=0,S=!1,R=0,se=0;if(V.frames=[],!function(D,B,U,J){for(var ae=0;ae<J;ae++)if(D[B+ae]!=U.charCodeAt(ae))return!0;return!1}(A,k,"RIFF",4)){var ve,Ee;for(d(A,k+=4),k+=8;k<A.length;){var Ne=u(A,k),_e=d(A,k+=4);k+=4;var Ce=_e+(1&_e);switch(Ne){case"VP8 ":case"VP8L":V.frames[b]===void 0&&(V.frames[b]={}),(T=V.frames[b]).src_off=S?se:k-8,T.src_size=R+_e+8,b++,S&&(S=!1,R=0,se=0);break;case"VP8X":(T=V.header={}).feature_flags=A[k];var Fe=k+4;T.canvas_width=1+l(A,Fe),Fe+=3,T.canvas_height=1+l(A,Fe),Fe+=3;break;case"ALPH":S=!0,R=Ce+8,se=k-8;break;case"ANIM":(T=V.header).bgcolor=d(A,k),Fe=k+4,T.loop_count=(ve=A)[(Ee=Fe)+0]<<0|ve[Ee+1]<<8,Fe+=2;break;case"ANMF":var nt,T;(T=V.frames[b]={}).offset_x=2*l(A,k),k+=3,T.offset_y=2*l(A,k),k+=3,T.width=1+l(A,k),k+=3,T.height=1+l(A,k),k+=3,T.duration=l(A,k),k+=3,nt=A[k++],T.dispose=1&nt,T.blend=nt>>1&1}Ne!="ANMF"&&(k+=Ce)}return V}}(E,0);P.response=E,P.rgbaoutput=!0,P.dataurl=!1;var L=P.header?P.header:null,M=P.frames?P.frames:null;if(L){L.loop_counter=L.loop_count,g=[L.canvas_height],p=[L.canvas_width];for(var K=0;K<M.length&&M[K].blend!=0;K++);}var ie=M[0],oe=_.WebPDecodeRGBA(E,ie.src_off,ie.src_size,p,g);ie.rgba=oe,ie.imgwidth=p[0],ie.imgheight=g[0];for(var N=0;N<p[0]*g[0]*4;N++)x[N]=oe[N];return this.width=p,this.height=g,this.data=x,this}(function(r){var e=function(){return typeof x1=="function"},t=function(g,p,x,_){var E=4,P=a;switch(_){case r.image_compression.FAST:E=1,P=s;break;case r.image_compression.MEDIUM:E=6,P=o;break;case r.image_compression.SLOW:E=9,P=c}g=n(g,p,x,P);var L=x1(g,{level:E});return r.__addimage__.arrayBufferToBinaryString(L)},n=function(g,p,x,_){for(var E,P,L,M=g.length/p,K=new Uint8Array(g.length+M),ie=l(),oe=0;oe<M;oe+=1){if(L=oe*p,E=g.subarray(L,L+p),_)K.set(_(E,x,P),L+oe);else{for(var N,A=ie.length,k=[];N<A;N+=1)k[N]=ie[N](E,x,P);var V=d(k.concat());K.set(k[V],L+oe)}P=E}return K},i=function(g){var p=Array.apply([],g);return p.unshift(0),p},s=function(g,p){var x,_=[],E=g.length;_[0]=1;for(var P=0;P<E;P+=1)x=g[P-p]||0,_[P+1]=g[P]-x+256&255;return _},a=function(g,p,x){var _,E=[],P=g.length;E[0]=2;for(var L=0;L<P;L+=1)_=x&&x[L]||0,E[L+1]=g[L]-_+256&255;return E},o=function(g,p,x){var _,E,P=[],L=g.length;P[0]=3;for(var M=0;M<L;M+=1)_=g[M-p]||0,E=x&&x[M]||0,P[M+1]=g[M]+256-(_+E>>>1)&255;return P},c=function(g,p,x){var _,E,P,L,M=[],K=g.length;M[0]=4;for(var ie=0;ie<K;ie+=1)_=g[ie-p]||0,E=x&&x[ie]||0,P=x&&x[ie-p]||0,L=u(_,E,P),M[ie+1]=g[ie]-L+256&255;return M},u=function(g,p,x){if(g===p&&p===x)return g;var _=Math.abs(p-x),E=Math.abs(g-x),P=Math.abs(g+p-x-x);return _<=E&&_<=P?g:E<=P?p:x},l=function(){return[i,s,a,o,c]},d=function(g){var p=g.map(function(x){return x.reduce(function(_,E){return _+Math.abs(E)},0)});return p.indexOf(Math.min.apply(null,p))};r.processPNG=function(g,p,x,_){var E,P,L,M,K,ie,oe,N,A,k,V,b,S,R,se,ve=this.decode.FLATE_DECODE,Ee="";if(this.__addimage__.isArrayBuffer(g)&&(g=new Uint8Array(g)),this.__addimage__.isArrayBufferView(g)){if(g=(L=new yW(g)).imgData,P=L.bits,E=L.colorSpace,K=L.colors,[4,6].indexOf(L.colorType)!==-1){if(L.bits===8){A=(N=L.pixelBitlength==32?new Uint32Array(L.decodePixels().buffer):L.pixelBitlength==16?new Uint16Array(L.decodePixels().buffer):new Uint8Array(L.decodePixels().buffer)).length,V=new Uint8Array(A*L.colors),k=new Uint8Array(A);var Ne,_e=L.pixelBitlength-L.bits;for(R=0,se=0;R<A;R++){for(S=N[R],Ne=0;Ne<_e;)V[se++]=S>>>Ne&255,Ne+=L.bits;k[R]=S>>>Ne&255}}if(L.bits===16){A=(N=new Uint32Array(L.decodePixels().buffer)).length,V=new Uint8Array(A*(32/L.pixelBitlength)*L.colors),k=new Uint8Array(A*(32/L.pixelBitlength)),b=L.colors>1,R=0,se=0;for(var Ce=0;R<A;)S=N[R++],V[se++]=S>>>0&255,b&&(V[se++]=S>>>16&255,S=N[R++],V[se++]=S>>>0&255),k[Ce++]=S>>>16&255;P=8}_!==r.image_compression.NONE&&e()?(g=t(V,L.width*L.colors,L.colors,_),oe=t(k,L.width,1,_)):(g=V,oe=k,ve=void 0)}if(L.colorType===3&&(E=this.color_spaces.INDEXED,ie=L.palette,L.transparency.indexed)){var Fe=L.transparency.indexed,nt=0;for(R=0,A=Fe.length;R<A;++R)nt+=Fe[R];if((nt/=255)===A-1&&Fe.indexOf(0)!==-1)M=[Fe.indexOf(0)];else if(nt!==A){for(N=L.decodePixels(),k=new Uint8Array(N.length),R=0,A=N.length;R<A;R++)k[R]=Fe[N[R]];oe=t(k,L.width,1)}}var T=function(D){var B;switch(D){case r.image_compression.FAST:B=11;break;case r.image_compression.MEDIUM:B=13;break;case r.image_compression.SLOW:B=14;break;default:B=12}return B}(_);return ve===this.decode.FLATE_DECODE&&(Ee="/Predictor "+T+" "),Ee+="/Colors "+K+" /BitsPerComponent "+P+" /Columns "+L.width,(this.__addimage__.isArrayBuffer(g)||this.__addimage__.isArrayBufferView(g))&&(g=this.__addimage__.arrayBufferToBinaryString(g)),(oe&&this.__addimage__.isArrayBuffer(oe)||this.__addimage__.isArrayBufferView(oe))&&(oe=this.__addimage__.arrayBufferToBinaryString(oe)),{alias:x,data:g,index:p,filter:ve,decodeParameters:Ee,transparency:M,palette:ie,sMask:oe,predictor:T,width:L.width,height:L.height,bitsPerComponent:P,colorSpace:E}}}})(Dt.API),function(r){r.processGIF89A=function(e,t,n,i){var s=new wW(e),a=s.width,o=s.height,c=[];s.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:a,height:o},l=new Sg(100).encode(u,100);return r.processJPEG.call(this,l,t,n,i)},r.processGIF87A=r.processGIF89A}(Dt.API),zs.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:n,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},zs.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){Cr.log("bit decode error:"+t)}},zs.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+8*i*4,o=0;o<8&&8*i+o<this.width;o++){var c=this.palette[s>>7-o&1];this.data[a+4*o]=c.blue,this.data[a+4*o+1]=c.green,this.data[a+4*o+2]=c.red,this.data[a+4*o+3]=255}t!==0&&(this.pos+=4-t)}},zs.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<r;i++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+2*i*4,o=s>>4,c=15&s,u=this.palette[o];if(this.data[a]=u.blue,this.data[a+1]=u.green,this.data[a+2]=u.red,this.data[a+3]=255,2*i+1>=this.width)break;u=this.palette[c],this.data[a+4]=u.blue,this.data[a+4+1]=u.green,this.data[a+4+2]=u.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},zs.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*n;if(i<this.palette.length){var a=this.palette[i];this.data[s]=a.red,this.data[s+1]=a.green,this.data[s+2]=a.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}r!==0&&(this.pos+=4-r)}},zs.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,o=(s>>5&e)/e*255|0,c=(s>>10&e)/e*255|0,u=s>>15?255:0,l=n*this.width*4+4*i;this.data[l]=c,this.data[l+1]=o,this.data[l+2]=a,this.data[l+3]=u}this.pos+=r}},zs.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,u=(a>>11)/e*255|0,l=i*this.width*4+4*s;this.data[l]=u,this.data[l+1]=c,this.data[l+2]=o,this.data[l+3]=255}this.pos+=r}},zs.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=n,this.data[a+3]=255}this.pos+=this.width%4}},zs.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=a}},zs.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,n,i){var s=new zs(e,!1),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Sg(100).encode(c,100);return r.processJPEG.call(this,u,t,n,i)}}(Dt.API),O5.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,n,i){var s=new O5(e),a=s.width,o=s.height,c={data:s.getData(),width:a,height:o},u=new Sg(100).encode(c,100);return r.processJPEG.call(this,u,t,n,i)}}(Dt.API),Dt.API.processRGBA=function(r,e,t){for(var n=r.data,i=n.length,s=new Uint8Array(i/4*3),a=new Uint8Array(i/4),o=0,c=0,u=0;u<i;u+=4){var l=n[u],d=n[u+1],g=n[u+2],p=n[u+3];s[o++]=l,s[o++]=d,s[o++]=g,a[c++]=p}var x=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:x,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},Dt.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},gl=Dt.API,y0=gl.getCharWidthsArray=function(r,e){var t,n,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),o=e.widths?e.widths:i.metadata.Unicode.widths,c=o.fof?o.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,l=u.fof?u.fof:1,d=e.doKerning!==!1,g=0,p=r.length,x=0,_=o[0]||c,E=[];for(t=0;t<p;t++)n=r.charCodeAt(t),typeof i.metadata.widthOfString=="function"?E.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+a*(1e3/s)||0)/1e3):(g=d&&wr(u[n])==="object"&&!isNaN(parseInt(u[n][x],10))?u[n][x]/l:0,E.push((o[n]||_)/c+g)),x=n;return E},R5=gl.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return gl.processArabic&&(r=gl.processArabic(r)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(r,t,i)/t:y0.apply(this,arguments).reduce(function(s,a){return s+a},0)},L5=function(r,e,t,n){for(var i=[],s=0,a=r.length,o=0;s!==a&&o+e[s]<t;)o+=e[s],s++;i.push(r.slice(0,s));var c=s;for(o=0;s!==a;)o+e[s]>n&&(i.push(r.slice(c,s)),o=0,c=s),o+=e[s],s++;return c!==s&&i.push(r.slice(c,s)),i},D5=function(r,e,t){t||(t={});var n,i,s,a,o,c,u,l=[],d=[l],g=t.textIndent||0,p=0,x=0,_=r.split(" "),E=y0.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var P=Array(c).join(" "),L=[];_.map(function(K){(K=K.split(/\s*\n/)).length>1?L=L.concat(K.map(function(ie,oe){return(oe&&ie.length?`
`:"")+ie})):L.push(K[0])}),_=L,c=R5.apply(this,[P,t])}for(s=0,a=_.length;s<a;s++){var M=0;if(n=_[s],c&&n[0]==`
`&&(n=n.substr(1),M=1),g+p+(x=(i=y0.apply(this,[n,t])).reduce(function(K,ie){return K+ie},0))>e||M){if(x>e){for(o=L5.apply(this,[n,i,e-(g+p),e]),l.push(o.shift()),l=[o.pop()];o.length;)d.push([o.shift()]);x=i.slice(n.length-(l[0]?l[0].length:0)).reduce(function(K,ie){return K+ie},0)}else l=[n];d.push(l),g=x+c,p=E}else l.push(n),g+=p+x,p=E}return u=c?function(K,ie){return(ie?P:"")+K.join(" ")}:function(K){return K.join(" ")},d.map(u)},gl.splitTextToSize=function(r,e,t){var n,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=(function(l){if(l.widths&&l.kerning)return{widths:l.widths,kerning:l.kerning};var d=this.internal.getFont(l.fontName,l.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);n=Array.isArray(r)?r:String(r).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var o,c,u=[];for(o=0,c=n.length;o<c;o++)u=u.concat(D5.apply(this,[n[o],a,s]));return u},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},n={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],n["0123456789abcdef"[i]]=e[i];var s=function(d){return"0x"+parseInt(d,10).toString(16)},a=r.__fontmetrics__.compress=function(d){var g,p,x,_,E=["{"];for(var P in d){if(g=d[P],isNaN(parseInt(P,10))?p="'"+P+"'":(P=parseInt(P,10),p=(p=s(P).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof g=="number")g<0?(x=s(g).slice(3),_="-"):(x=s(g).slice(2),_=""),x=_+x.slice(0,-1)+n[x.slice(-1)];else{if(wr(g)!=="object")throw new Error("Don't know what to do with value type "+wr(g)+".");x=a(g)}E.push(p+x)}return E.push("}"),E.join("")},o=r.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var g,p,x,_,E={},P=1,L=E,M=[],K="",ie="",oe=d.length-1,N=1;N<oe;N+=1)(_=d[N])=="'"?g?(x=g.join(""),g=void 0):g=[]:g?g.push(_):_=="{"?(M.push([L,x]),L={},x=void 0):_=="}"?((p=M.pop())[0][p[1]]=L,x=void 0,L=p[0]):_=="-"?P=-1:x===void 0?t.hasOwnProperty(_)?(K+=t[_],x=parseInt(K,16)*P,P=1,K=""):K+=_:t.hasOwnProperty(_)?(ie+=t[_],L[x]=parseInt(ie,16)*P,P=1,x=void 0,ie=""):ie+=_;return E},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:o("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},l={Unicode:{"Courier-Oblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":o("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":o("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:o("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":o("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:o("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":o("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":o("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":o("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":o("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(d){var g=d.font,p=l.Unicode[g.postScriptName];p&&(g.metadata.Unicode={},g.metadata.Unicode.widths=p.widths,g.metadata.Unicode.kerning=p.kerning);var x=u.Unicode[g.postScriptName];x&&(g.metadata.Unicode.encoding=x,g.encoding=x.codePages[0])}])}(Dt.API),function(r){var e=function(t){for(var n=t.length,i=new Uint8Array(n),s=0;s<n;s++)i[s]=t.charCodeAt(s);return i};r.API.events.push(["addFont",function(t){var n=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(a,o){o=/^\x00\x01\x00\x00/.test(o)?e(o):e(Af(o)),a.metadata=r.API.TTFFont.open(o),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(i,n)}}])}(Dt),function(r){function e(){return(Ot.canvg?Promise.resolve(Ot.canvg):g1(()=>import("./index.es-x6uM0xTV.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}Dt.API.addSvgAsImage=function(t,n,i,s,a,o,c,u){if(isNaN(n)||isNaN(i))throw Cr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(a))throw Cr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=s,l.height=a;var d=l.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,l.width,l.height);var g={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return e().then(function(x){return x.fromString(d,t,g)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(x){return x.render(g)}).then(function(){p.addImage(l.toDataURL("image/jpeg",1),n,i,s,a,c,u)})}}(),Dt.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(e,t);return this},Dt.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var n,i,s,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},o=Object.keys(a),c=[],u=0,l=0,d=0;function g(x,_){var E,P=!1;for(E=0;E<x.length;E+=1)x[E]===_&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var p=o.length;for(d=0;d<p;d+=1)t[o[d]].value=t[o[d]].defaultValue,t[o[d]].explicitSet=!1}if(wr(r)==="object"){for(i in r)if(s=r[i],g(o,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&g(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(n=!0,s[u].length===1&&typeof s[u][0]=="number")c.push(String(s[u]-1));else if(s[u].length>1){for(l=0;l<s[u].length;l+=1)typeof s[u][l]!="number"&&(n=!1);n===!0&&c.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+c.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var x,_=[];for(x in t)t[x].explicitSet===!0&&(t[x].type==="name"?_.push("/"+x+" /"+t[x].value):_.push("/"+x+" "+t[x].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(n)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+a.length+o.length+i.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+a+o+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(Dt.API),function(r){var e=r.API,t=e.pdfEscape16=function(s,a){for(var o,c=a.metadata.Unicode.widths,u=["","0","00","000","0000"],l=[""],d=0,g=s.length;d<g;++d){if(o=a.metadata.characterToGlyph(s.charCodeAt(d)),a.metadata.glyIdsUsed.push(o),a.metadata.toUnicode[o]=s.charCodeAt(d),c.indexOf(o)==-1&&(c.push(o),c.push([parseInt(a.metadata.widthOfGlyph(o),10)])),o=="0")return l.join("");o=o.toString(16),l.push(u[4-o.length],o)}return l.join("")},n=function(s){var a,o,c,u,l,d,g;for(l=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,g=(o=Object.keys(s).sort(function(p,x){return p-x})).length;d<g;d++)a=o[d],c.length>=100&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),s[a]!==void 0&&s[a]!==null&&typeof s[a].toString=="function"&&(u=("0000"+s[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+u+">"));return c.length&&(l+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),l+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="Identity-H"){for(var d=o.metadata.Unicode.widths,g=o.metadata.subset.encode(o.metadata.glyIdsUsed,1),p="",x=0;x<g.length;x++)p+=String.fromCharCode(g[x]);var _=u();l({data:p,addLength1:!0,objectId:_}),c("endobj");var E=u();l({data:n(o.metadata.toUnicode),addLength1:!0,objectId:E}),c("endobj");var P=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+bl(o.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),c("/Flags "+o.metadata.flags),c("/StemV "+o.metadata.stemV),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c(">>"),c("endobj");var L=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+bl(o.fontName)),c("/FontDescriptor "+P+" 0 R"),c("/W "+r.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+o.encoding+")"),c(">>"),c(">>"),c("endobj"),o.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+E+" 0 R"),c("/BaseFont /"+bl(o.fontName)),c("/Encoding /"+o.encoding),c("/DescendantFonts ["+L+" 0 R]"),c(">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(a){var o=a.font,c=a.out,u=a.newObject,l=a.putStream;if(o.metadata instanceof r.API.TTFFont&&o.encoding==="WinAnsiEncoding"){for(var d=o.metadata.rawData,g="",p=0;p<d.length;p++)g+=String.fromCharCode(d[p]);var x=u();l({data:g,addLength1:!0,objectId:x}),c("endobj");var _=u();l({data:n(o.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var E=u();c("<<"),c("/Descent "+o.metadata.decender),c("/CapHeight "+o.metadata.capHeight),c("/StemV "+o.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+x+" 0 R"),c("/Flags 96"),c("/FontBBox "+r.API.PDFObject.convert(o.metadata.bbox)),c("/FontName /"+bl(o.fontName)),c("/ItalicAngle "+o.metadata.italicAngle),c("/Ascent "+o.metadata.ascender),c(">>"),c("endobj"),o.objectNumber=u();for(var P=0;P<o.metadata.hmtx.widths.length;P++)o.metadata.hmtx.widths[P]=parseInt(o.metadata.hmtx.widths[P]*(1e3/o.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+bl(o.fontName)+"/FontDescriptor "+E+" 0 R/Encoding/"+o.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(o.metadata.hmtx.widths)+">>"),c("endobj"),o.isAlreadyPutted=!0}})(s)}]);var i=function(s){var a,o=s.text||"",c=s.x,u=s.y,l=s.options||{},d=s.mutex||{},g=d.pdfEscape,p=d.activeFontKey,x=d.fonts,_=p,E="",P=0,L="",M=x[_].encoding;if(x[_].encoding!=="Identity-H")return{text:o,x:c,y:u,options:l,mutex:d};for(L=o,_=p,Array.isArray(o)&&(L=o[0]),P=0;P<L.length;P+=1)x[_].metadata.hasOwnProperty("cmap")&&(a=x[_].metadata.cmap.unicode.codeMap[L[P].charCodeAt(0)]),a||L[P].charCodeAt(0)<256&&x[_].metadata.hasOwnProperty("Unicode")?E+=L[P]:E+="";var K="";return parseInt(_.slice(1))<14||M==="WinAnsiEncoding"?K=g(E,_).split("").map(function(ie){return ie.charCodeAt(0).toString(16)}).join(""):M==="Identity-H"&&(K=t(E,x[_])),d.isHex=!0,{text:K,x:c,y:u,options:l,mutex:d}};e.events.push(["postProcessText",function(s){var a=s.text||"",o=[],c={text:a,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(a)){var u=0;for(u=0;u<a.length;u+=1)Array.isArray(a[u])&&a[u].length===3?o.push([i(Object.assign({},c,{text:a[u][0]})).text,a[u][1],a[u][2]]):o.push(i(Object.assign({},c,{text:a[u]})).text);s.text=o}else s.text=i(Object.assign({},c,{text:a})).text}])}(Dt),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(Dt.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(n){var i,s,a,o,c,u,l,d=e,g=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],x={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},E=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),L=!1,M=0;this.__bidiEngine__={};var K=function(b){var S=b.charCodeAt(),R=S>>8,se=_[R];return se!==void 0?d[256*se+(255&S)]:R===252||R===253?"AL":P.test(R)?"L":R===8?"R":"N"},ie=function(b){for(var S,R=0;R<b.length;R++){if((S=K(b.charAt(R)))==="L")return!1;if(S==="R")return!0}return!1},oe=function(b,S,R,se){var ve,Ee,Ne,_e,Ce=S[se];switch(Ce){case"L":case"R":L=!1;break;case"N":case"AN":break;case"EN":L&&(Ce="AN");break;case"AL":L=!0,Ce="R";break;case"WS":Ce="N";break;case"CS":se<1||se+1>=S.length||(ve=R[se-1])!=="EN"&&ve!=="AN"||(Ee=S[se+1])!=="EN"&&Ee!=="AN"?Ce="N":L&&(Ee="AN"),Ce=Ee===ve?Ee:"N";break;case"ES":Ce=(ve=se>0?R[se-1]:"B")==="EN"&&se+1<S.length&&S[se+1]==="EN"?"EN":"N";break;case"ET":if(se>0&&R[se-1]==="EN"){Ce="EN";break}if(L){Ce="N";break}for(Ne=se+1,_e=S.length;Ne<_e&&S[Ne]==="ET";)Ne++;Ce=Ne<_e&&S[Ne]==="EN"?"EN":"N";break;case"NSM":if(a&&!o){for(_e=S.length,Ne=se+1;Ne<_e&&S[Ne]==="NSM";)Ne++;if(Ne<_e){var Fe=b[se],nt=Fe>=1425&&Fe<=2303||Fe===64286;if(ve=S[Ne],nt&&(ve==="R"||ve==="AL")){Ce="R";break}}}Ce=se<1||(ve=S[se-1])==="B"?"N":R[se-1];break;case"B":L=!1,i=!0,Ce=M;break;case"S":s=!0,Ce="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":L=!1;break;case"BN":Ce="N"}return Ce},N=function(b,S,R){var se=b.split("");return R&&A(se,R,{hiLevel:M}),se.reverse(),S&&S.reverse(),se.join("")},A=function(b,S,R){var se,ve,Ee,Ne,_e,Ce=-1,Fe=b.length,nt=0,T=[],D=M?p:g,B=[];for(L=!1,i=!1,s=!1,ve=0;ve<Fe;ve++)B[ve]=K(b[ve]);for(Ee=0;Ee<Fe;Ee++){if(_e=nt,T[Ee]=oe(b,B,T,Ee),se=240&(nt=D[_e][x[T[Ee]]]),nt&=15,S[Ee]=Ne=D[nt][5],se>0)if(se===16){for(ve=Ce;ve<Ee;ve++)S[ve]=1;Ce=-1}else Ce=-1;if(D[nt][6])Ce===-1&&(Ce=Ee);else if(Ce>-1){for(ve=Ce;ve<Ee;ve++)S[ve]=Ne;Ce=-1}B[Ee]==="B"&&(S[Ee]=0),R.hiLevel|=Ne}s&&function(U,J,ae){for(var le=0;le<ae;le++)if(U[le]==="S"){J[le]=M;for(var ue=le-1;ue>=0&&U[ue]==="WS";ue--)J[ue]=M}}(B,S,Fe)},k=function(b,S,R,se,ve){if(!(ve.hiLevel<b)){if(b===1&&M===1&&!i)return S.reverse(),void(R&&R.reverse());for(var Ee,Ne,_e,Ce,Fe=S.length,nt=0;nt<Fe;){if(se[nt]>=b){for(_e=nt+1;_e<Fe&&se[_e]>=b;)_e++;for(Ce=nt,Ne=_e-1;Ce<Ne;Ce++,Ne--)Ee=S[Ce],S[Ce]=S[Ne],S[Ne]=Ee,R&&(Ee=R[Ce],R[Ce]=R[Ne],R[Ne]=Ee);nt=_e}nt++}}},V=function(b,S,R){var se=b.split(""),ve={hiLevel:M};return R||(R=[]),A(se,R,ve),function(Ee,Ne,_e){if(_e.hiLevel!==0&&l)for(var Ce,Fe=0;Fe<Ee.length;Fe++)Ne[Fe]===1&&(Ce=E.indexOf(Ee[Fe]))>=0&&(Ee[Fe]=E[Ce+1])}(se,R,ve),k(2,se,S,R,ve),k(1,se,S,R,ve),se.join("")};return this.__bidiEngine__.doBidiReorder=function(b,S,R){if(function(ve,Ee){if(Ee)for(var Ne=0;Ne<ve.length;Ne++)Ee[Ne]=Ne;o===void 0&&(o=ie(ve)),u===void 0&&(u=ie(ve))}(b,S),a||!c||u)if(a&&c&&o^u)M=o?1:0,b=N(b,S,R);else if(!a&&c&&u)M=o?1:0,b=V(b,S,R),b=N(b,S);else if(!a||o||c||u){if(a&&!c&&o^u)b=N(b,S),o?(M=0,b=V(b,S,R)):(M=1,b=V(b,S,R),b=N(b,S));else if(a&&o&&!c&&u)M=1,b=V(b,S,R),b=N(b,S);else if(!a&&!c&&o^u){var se=l;o?(M=1,b=V(b,S,R),M=0,l=!1,b=V(b,S,R),l=se):(M=0,b=V(b,S,R),b=N(b,S),M=1,l=!1,b=V(b,S,R),l=se,b=N(b,S))}}else M=0,b=V(b,S,R);else M=o?1:0,b=V(b,S,R);return b},this.__bidiEngine__.setOptions=function(b){b&&(a=b.isInputVisual,c=b.isOutputVisual,o=b.isInputRtl,u=b.isOutputRtl,l=b.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(n){var i=n.text,s=(n.x,n.y,n.options||{}),a=(n.mutex,s.lang,[]);if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var o=0;for(a=[],o=0;o<i.length;o+=1)Object.prototype.toString.call(i[o])==="[object Array]"?a.push([t.doBidiReorder(i[o][0]),i[o][1],i[o][2]]):a.push([t.doBidiReorder(i[o])]);n.text=a}else n.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(Dt),Dt.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new mc(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new FW(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new xW(this.contents),this.head=new TW(this),this.name=new PW(this),this.cmap=new wS(this),this.toUnicode={},this.hhea=new bW(this),this.maxp=new NW(this),this.hmtx=new CW(this),this.post=new IW(this),this.os2=new AW(this),this.loca=new DW(this),this.glyf=new kW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,n,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,o,c,u;for(u=[],a=0,o=(c=this.bbox).length;a<o;a++)e=c[a],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,n){var i,s,a,o;for(a=0,s=0,o=(e=""+e).length;0<=o?s<o:s>o;s=0<=o?++s:--s)i=e.charCodeAt(s),a+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/t)||0;return a*(t/1e3)},r.prototype.lineHeight=function(e,t){var n;return t==null&&(t=!1),n=t?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},r}();var Js,mc=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,n;for(n=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)n[t]=String.fromCharCode(this.readByte());return n.join("")},r.prototype.writeString=function(e){var t,n,i;for(i=[],t=0,n=e.length;0<=n?t<n:t>n;t=0<=n?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,n,i,s,a,o,c;return e=this.readByte(),t=this.readByte(),n=this.readByte(),i=this.readByte(),s=this.readByte(),a=this.readByte(),o=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^s)+65536*(255^a)+256*(255^o)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*n+4294967296*i+16777216*s+65536*a+256*o+c},r.prototype.writeLongLong=function(e){var t,n;return t=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,n;for(t=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)t.push(this.readByte());return t},r.prototype.write=function(e){var t,n,i,s;for(s=[],n=0,i=e.length;n<i;n++)t=e[n],s.push(this.writeByte(t));return s},r}(),xW=function(){var r;function e(t){var n,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)n={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(t){var n,i,s,a,o,c,u,l,d,g,p,x,_;for(_ in p=Object.keys(t).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),a=Math.floor(d/c),l=16*p-d,(i=new mc).writeInt(this.scalarType),i.writeShort(p),i.writeShort(d),i.writeShort(a),i.writeShort(l),s=16*p,u=i.pos+s,o=null,x=[],t)for(g=t[_],i.writeString(_),i.writeInt(r(g)),i.writeInt(u),i.writeInt(g.length),x=x.concat(g),_==="head"&&(o=u),u+=g.length;u%4;)x.push(0),u++;return i.write(x),n=2981146554-r(i.data),i.pos=o+8,i.writeUInt32(n),i.data},r=function(t){var n,i,s,a;for(t=xS.call(t);t.length%4;)t.push(0);for(s=new mc(t),i=0,n=0,a=t.length;n<a;n=n+=4)i+=s.readUInt32();return 4294967295&i},e}(),EW={}.hasOwnProperty,Sa=function(r,e){for(var t in e)EW.call(e,t)&&(r[t]=e[t]);function n(){this.constructor=r}return n.prototype=e.prototype,r.prototype=new n,r.__super__=e.prototype,r};Js=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var TW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var n;return(n=new mc).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(t),n.writeShort(this.glyphDataFormat),n.data},e}(),M5=function(){function r(e,t){var n,i,s,a,o,c,u,l,d,g,p,x,_,E,P,L,M;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),d=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(p=e.readUInt16(),g=p/2,e.pos+=6,s=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),e.pos+=2,_=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),u=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),l=function(){var K,ie;for(ie=[],c=K=0;0<=g?K<g:K>g;c=0<=g?++K:--K)ie.push(e.readUInt16());return ie}(),i=(this.length-e.pos+this.offset)/2,o=function(){var K,ie;for(ie=[],c=K=0;0<=i?K<i:K>i;c=0<=i?++K:--K)ie.push(e.readUInt16());return ie}(),c=P=0,M=s.length;P<M;c=++P)for(E=s[c],n=L=x=_[c];x<=E?L<=E:L>=E;n=x<=E?++L:--L)l[c]===0?a=n+u[c]:(a=o[l[c]/2+(n-x)-(g-c)]||0)!==0&&(a+=u[c]),this.codeMap[n]=65535&a}e.pos=d}return r.encode=function(e,t){var n,i,s,a,o,c,u,l,d,g,p,x,_,E,P,L,M,K,ie,oe,N,A,k,V,b,S,R,se,ve,Ee,Ne,_e,Ce,Fe,nt,T,D,B,U,J,ae,le,ue,xe,Be,ze;switch(se=new mc,a=Object.keys(e).sort(function(Ze,at){return Ze-at}),t){case"macroman":for(_=0,E=function(){var Ze=[];for(x=0;x<256;++x)Ze.push(0);return Ze}(),L={0:0},s={},ve=0,Ce=a.length;ve<Ce;ve++)L[ue=e[i=a[ve]]]==null&&(L[ue]=++_),s[i]={old:e[i],new:L[e[i]]},E[i]=L[e[i]];return se.writeUInt16(1),se.writeUInt16(0),se.writeUInt32(12),se.writeUInt16(0),se.writeUInt16(262),se.writeUInt16(0),se.write(E),{charMap:s,subtable:se.data,maxGlyphID:_+1};case"unicode":for(S=[],d=[],M=0,L={},n={},P=u=null,Ee=0,Fe=a.length;Ee<Fe;Ee++)L[ie=e[i=a[Ee]]]==null&&(L[ie]=++M),n[i]={old:ie,new:L[ie]},o=L[ie]-i,P!=null&&o===u||(P&&d.push(P),S.push(i),u=o),P=i;for(P&&d.push(P),d.push(65535),S.push(65535),V=2*(k=S.length),A=2*Math.pow(Math.log(k)/Math.LN2,2),g=Math.log(A/2)/Math.LN2,N=2*k-A,c=[],oe=[],p=[],x=Ne=0,nt=S.length;Ne<nt;x=++Ne){if(b=S[x],l=d[x],b===65535){c.push(0),oe.push(0);break}if(b-(R=n[b].new)>=32768)for(c.push(0),oe.push(2*(p.length+k-x)),i=_e=b;b<=l?_e<=l:_e>=l;i=b<=l?++_e:--_e)p.push(n[i].new);else c.push(R-b),oe.push(0)}for(se.writeUInt16(3),se.writeUInt16(1),se.writeUInt32(12),se.writeUInt16(4),se.writeUInt16(16+8*k+2*p.length),se.writeUInt16(0),se.writeUInt16(V),se.writeUInt16(A),se.writeUInt16(g),se.writeUInt16(N),ae=0,T=d.length;ae<T;ae++)i=d[ae],se.writeUInt16(i);for(se.writeUInt16(0),le=0,D=S.length;le<D;le++)i=S[le],se.writeUInt16(i);for(xe=0,B=c.length;xe<B;xe++)o=c[xe],se.writeUInt16(o);for(Be=0,U=oe.length;Be<U;Be++)K=oe[Be],se.writeUInt16(K);for(ze=0,J=p.length;ze<J;ze++)_=p[ze],se.writeUInt16(_);return{charMap:n,subtable:se.data,maxGlyphID:M+1}}},r}(),wS=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="cmap",e.prototype.parse=function(t){var n,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)n=new M5(t,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},e.encode=function(t,n){var i,s;return n==null&&(n="macroman"),i=M5.encode(t,n),(s=new mc).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),bW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),AW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var n,i;for(i=[],n=0;n<10;++n)i.push(t.readByte());return i}(),this.charRange=function(){var n,i;for(i=[],n=0;n<4;++n)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),IW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="post",e.prototype.parse=function(t){var n,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(i=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)n=t.readByte(),s.push(this.names.push(t.readString(n)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=(function(){var o,c,u;for(u=[],a=o=0,c=this.file.maxp.numGlyphs;0<=c?o<c:o>c;a=0<=c?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e}(),SW=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},PW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="name",e.prototype.parse=function(t){var n,i,s,a,o,c,u,l,d,g,p;for(t.pos=this.offset,t.readShort(),n=t.readShort(),c=t.readShort(),i=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(u={},a=d=0,g=i.length;d<g;a=++d)s=i[a],t.pos=s.offset,l=t.readString(s.length),o=new SW(l,s),u[p=s.nameID]==null&&(u[p]=[]),u[s.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),NW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),CW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="hmtx",e.prototype.parse=function(t){var n,i,s,a,o,c,u;for(t.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var l,d;for(d=[],n=l=0;0<=s?l<s:l>s;n=0<=s?++l:--l)d.push(t.readInt16());return d}(),this.widths=(function(){var l,d,g,p;for(p=[],l=0,d=(g=this.metrics).length;l<d;l++)a=g[l],p.push(a.advance);return p}).call(this),i=this.widths[this.widths.length-1],u=[],n=o=0;0<=s?o<s:o>s;n=0<=s?++o:--o)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),xS=[].slice,kW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var n,i,s,a,o,c,u,l,d,g;return t in this.cache?this.cache[t]:(a=this.file.loca,n=this.file.contents,i=a.indexOf(t),(s=a.lengthOf(t))===0?this.cache[t]=null:(n.pos=this.offset+i,o=(c=new mc(n.read(s))).readShort(),l=c.readShort(),g=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[t]=o===-1?new LW(c,l,g,u,d):new RW(c,o,l,g,u,d),this.cache[t]))},e.prototype.encode=function(t,n,i){var s,a,o,c,u;for(o=[],a=[],c=0,u=n.length;c<u;c++)s=t[n[c]],a.push(o.length),s&&(o=o.concat(s.encode(i)));return a.push(o.length),{table:o,offsets:a}},e}(),RW=function(){function r(e,t,n,i,s,a){this.raw=e,this.numberOfContours=t,this.xMin=n,this.yMin=i,this.xMax=s,this.yMax=a,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),LW=function(){function r(e,t,n,i,s){var a,o;for(this.raw=e,this.xMin=t,this.yMin=n,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;o=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&o;)a.pos+=1&o?4:2,128&o?a.pos+=8:64&o?a.pos+=4:8&o&&(a.pos+=2)}return r.prototype.encode=function(){var e,t,n;for(t=new mc(xS.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),DW=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return Sa(e,Js),e.prototype.tag="loca",e.prototype.parse=function(t){var n,i;return t.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var s,a;for(a=[],i=0,s=this.length;i<s;i+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,n){for(var i=new Uint32Array(this.offsets.length),s=0,a=0,o=0;o<i.length;++o)if(i[o]=s,a<n.length&&n[a]==o){++a,i[o]=s;var c=this.offsets[o],u=this.offsets[o+1]-c;u>0&&(s+=u)}for(var l=new Array(4*i.length),d=0;d<i.length;++d)l[4*d+3]=255&i[d],l[4*d+2]=(65280&i[d])>>8,l[4*d+1]=(16711680&i[d])>>16,l[4*d]=(4278190080&i[d])>>24;return l},e}(),FW=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,n,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)n=s[t],e[t]=i[n];return e},r.prototype.glyphsFor=function(e){var t,n,i,s,a,o,c;for(i={},a=0,o=e.length;a<o;a++)i[s=e[a]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(n=i[s])!=null&&n.compound&&t.push.apply(t,n.glyphIDs);if(t.length>0)for(s in c=this.glyphsFor(t))n=c[s],i[s]=n;return i},r.prototype.encode=function(e,t){var n,i,s,a,o,c,u,l,d,g,p,x,_,E,P;for(i in n=wS.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),p={0:0},P=n.charMap)p[(c=P[i]).old]=c.new;for(x in g=n.maxGlyphID,a)x in p||(p[x]=g++);return l=function(L){var M,K;for(M in K={},L)K[L[M]]=M;return K}(p),d=Object.keys(l).sort(function(L,M){return L-M}),_=function(){var L,M,K;for(K=[],L=0,M=d.length;L<M;L++)o=d[L],K.push(l[o]);return K}(),s=this.font.glyf.encode(a,_,p),u=this.font.loca.encode(s.offsets,_),E={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(E["OS/2"]=this.font.os2.raw()),this.font.directory.encode(E)},r}();Dt.API.PDFObject=function(){var r;function e(){}return r=function(t,n){return(Array(n+1).join("0")+t).slice(-n)},e.convert=function(t){var n,i,s,a;if(Array.isArray(t))return"["+function(){var o,c,u;for(u=[],o=0,c=t.length;o<c;o++)n=t[o],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)a=t[i],s.push("/"+i+" "+e.convert(a));return s.push(">>"),s.join(`
`)}return""+t},e}();function OW(){window.exportXLSX=UW,window.exportPDF=BW,window.exportCSV=jW,window.exportJSON=qW,window.importJSON=zW}function nd(){return new Date().toISOString().split("T")[0]}function MW(r,e){if(!r||!e)return 0;const[t,n]=r.split(":").map(Number),[i,s]=e.split(":").map(Number),a=t*60+n,o=i*60+s;return Math.round((o-a)/60*100)/100}function xm(){const r=document.getElementById("exportPeriod").value;let e=Ve.entries;if(r!=="all"){const{start:t,end:n}=WW(r);e=e.filter(i=>i.datum>=t&&i.datum<=n)}return e}function BW(){const r=xm();if(r.length===0){alert("Keine Daten zum Exportieren");return}const e=VW(r),t=new Dt("l","mm","a4");t.setFontSize(18),t.text("Zeiterfassung",14,22),t.setFontSize(10),t.text(`Erstellt am: ${oh(nd())}`,14,30),t.text(`${e.length} Zeitblcke (aus ${r.length} Eintrgen)`,14,36);let n=50;t.setFontSize(9),t.setFont(void 0,"bold"),t.text("Datum",14,n),t.text("Projekte",40,n),t.text("Ttigkeiten",110,n),t.text("Start",195,n),t.text("Ende",212,n),t.text("Std",230,n),t.text("Ort",250,n),n+=2,t.setDrawColor(200,200,200),t.setLineWidth(.3),t.line(14,n,270,n),t.setFont(void 0,"normal"),n+=6;let i=null,s=0;e.forEach((N,A)=>{n>190&&(t.addPage(),n=20,i=null);const k=N.datum!==i;k&&(i=N.datum,s++),s%2===0&&(t.setFillColor(240,255,240),t.rect(10,n-4,277,6,"F")),k&&A>0&&(t.setDrawColor(180,180,180),t.setLineWidth(.4),t.line(14,n-3,270,n-3)),t.setTextColor(0,0,0),t.text(oh(N.datum),14,n),t.text((N.projekte||[]).join(", ").substring(0,40),40,n),t.text((N.taetigkeiten||[]).join(", ").substring(0,50),110,n),t.text(N.start||"",195,n),t.text(N.ende||"",212,n),t.text((N.stunden||0).toFixed(2),230,n),t.text(N.homeoffice?"HO":"Bro",250,n),n+=6});const a=e.filter(N=>!N.projekte.includes("Pause")),o=a.reduce((N,A)=>N+(A.stunden||0),0),u=[...new Set(a.map(N=>N.datum))].length,l=u>0?o/u:0,g=l/7.8*100,p=a.filter(N=>N.homeoffice).reduce((N,A)=>N+(A.stunden||0),0),x=a.filter(N=>!N.homeoffice).reduce((N,A)=>N+(A.stunden||0),0),_=o>0?p/o*100:0,E=o>0?x/o*100:0,P=l*5,L=P/39*100;n+=5,t.setFont(void 0,"bold"),t.text(`Gesamt: ${o.toFixed(2)} Stunden`,14,n),n+=10,t.setFontSize(11),t.text("STATISTIK",14,n),t.setFontSize(9),t.setFont(void 0,"normal"),n+=6,t.text(`Arbeitstage: ${u}`,14,n),n+=5;const M=l<7.8?[255,0,0]:[0,170,0];t.setTextColor(M[0],M[1],M[2]),t.setFont(void 0,"bold"),t.text(` Stunden/Tag: ${l.toFixed(2)}h`,14,n),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),n+=5;const K=g<100?[255,0,0]:[0,170,0];t.setTextColor(K[0],K[1],K[2]),t.setFont(void 0,"bold"),t.text(` % zur Regelarbeitszeit (7,8h): ${g.toFixed(1)}%`,14,n),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),n+=5;const ie=P<39?[255,0,0]:[0,170,0];t.setTextColor(ie[0],ie[1],ie[2]),t.setFont(void 0,"bold"),t.text(`Hochrechnung Woche (5 Tage): ${P.toFixed(2)}h (${L.toFixed(1)}%)`,14,n),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),n+=10,t.setFont(void 0,"bold"),t.text("ARBEITSORT-VERTEILUNG",14,n),t.setFont(void 0,"normal"),n+=6,t.text(`Homeoffice: ${p.toFixed(2)}h (${_.toFixed(1)}%)`,14,n),n+=5;const oe=E<50?[255,0,0]:[0,170,0];t.setTextColor(oe[0],oe[1],oe[2]),t.setFont(void 0,"bold"),t.text(`Bro: ${x.toFixed(2)}h (${E.toFixed(1)}%)`,14,n),t.setFont(void 0,"normal"),t.setTextColor(0,0,0),t.save(`Zeiterfassung_${nd()}.pdf`)}function VW(r){const e=[...r].sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||"")),t=[];let n=null;for(const i of e)n?n.datum===i.datum&&n.ende===i.start&&n.projekte.includes("Pause")===(i.projekt==="Pause")?(n.ende=i.ende,n.stunden=MW(n.start,n.ende),i.projekt&&!n.projekte.includes(i.projekt)&&n.projekte.push(i.projekt),i.taetigkeit&&!n.taetigkeiten.includes(i.taetigkeit)&&n.taetigkeiten.push(i.taetigkeit)):(t.push(n),n={datum:i.datum,start:i.start,ende:i.ende,projekte:[i.projekt||"Allgemein"],taetigkeiten:i.taetigkeit?[i.taetigkeit]:[],homeoffice:i.homeoffice,stunden:parseFloat(i.stunden)||0}):n={datum:i.datum,start:i.start,ende:i.ende,projekte:[i.projekt||"Allgemein"],taetigkeiten:i.taetigkeit?[i.taetigkeit]:[],homeoffice:i.homeoffice,stunden:parseFloat(i.stunden)||0};return n&&t.push(n),t}function UW(){const r=xm();r.sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||""));const e=r.map(i=>({Datum:oh(i.datum),Start:i.start,Ende:i.ende,Projekt:i.projekt||"",Ttigkeit:i.taetigkeit||"",Stunden:i.stunden,Ort:i.homeoffice?"Homeoffice":"Bro"})),t=_g.json_to_sheet(e),n=_g.book_new();_g.book_append_sheet(n,t,"Zeiten"),bz(n,`Zeiterfassung_${nd()}.xlsx`)}function jW(){const r=xm();r.sort((s,a)=>s.datum!==a.datum?s.datum.localeCompare(a.datum):(s.start||"").localeCompare(a.start||""));const t=[["Datum","Start","Ende","Projekt","Ttigkeit","Stunden","Ort"].join(";"),...r.map(s=>[oh(s.datum),s.start,s.ende,s.projekt||"",s.taetigkeit||"",s.stunden,s.homeoffice?"Homeoffice":"Bro"].join(";"))].join(`
`),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a");i.href=URL.createObjectURL(n),i.download=`Zeiterfassung_${nd()}.csv`,i.click()}function qW(){const r=xm();r.sort((i,s)=>i.datum!==s.datum?i.datum.localeCompare(s.datum):(i.start||"").localeCompare(s.start||""));const e=JSON.stringify(r,null,2),t=new Blob([e],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=`Zeiterfassung_${nd()}.json`,n.click()}function zW(){const r=document.getElementById("importFile");if(!r.files||!r.files[0])return;const e=new FileReader;e.onload=function(t){try{const n=JSON.parse(t.target.result);Array.isArray(n)&&alert(`Backup enthlt ${n.length} Eintrge. Import ist in dieser Version noch nicht vollstndig implementiert.`)}catch{alert("Fehler beim Lesen der JSON-Datei")}},e.readAsText(r.files[0])}function WW(r){const e=new Date,t=e.toISOString().split("T")[0];let n=t,i=t;if(r==="custom")n=document.getElementById("exportFrom").value,i=document.getElementById("exportTo").value;else if(r==="week"){const s=e.getDay()||7,a=new Date(e);a.setDate(e.getDate()-s+1),n=a.toISOString().split("T")[0]}else r==="month"?(n=new Date(e.getFullYear(),e.getMonth(),1).toISOString().split("T")[0],i=new Date(e.getFullYear(),e.getMonth()+1,0).toISOString().split("T")[0]):r==="year"&&(n=new Date(e.getFullYear(),0,1).toISOString().split("T")[0],i=new Date(e.getFullYear(),11,31).toISOString().split("T")[0]);return{start:n,end:i}}window.toggleCustomDates=function(){const r=document.getElementById("exportPeriod").value,e=document.getElementById("customDateRange");r==="custom"?e.classList.remove("hidden"):e.classList.add("hidden")};document.addEventListener("DOMContentLoaded",()=>{L7(),w7(),Z8(),o7(),m7(),f7(),OW(),U7()});export{wr as _};
